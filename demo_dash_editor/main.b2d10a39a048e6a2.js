(self.webpackChunkdemo_d=self.webpackChunkdemo_d||[]).push([[179],{518:(qt,Ye,ze)=>{"use strict";function Ne(t){return"function"==typeof t}function mt(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const ot=mt(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pt(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Pe{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(Ne(i))try{i()}catch(s){e=s instanceof ot?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{$e(s)}catch(o){e=e??[],o instanceof ot?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ot(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$e(e);else{if(e instanceof Pe){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pt(n,e)}remove(e){const{_finalizers:n}=this;n&&pt(n,e),e instanceof Pe&&e._removeParent(this)}}Pe.EMPTY=(()=>{const t=new Pe;return t.closed=!0,t})();const ht=Pe.EMPTY;function et(t){return t instanceof Pe||t&&"closed"in t&&Ne(t.remove)&&Ne(t.add)&&Ne(t.unsubscribe)}function $e(t){Ne(t)?t():t.unsubscribe()}const Qe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},jt={setTimeout(t,e,...n){const{delegate:i}=jt;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=jt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function en(t){jt.setTimeout(()=>{const{onUnhandledError:e}=Qe;if(!e)throw t;e(t)})}function Re(){}const pe=Tn("C",void 0,void 0);function Tn(t,e,n){return{kind:t,value:e,error:n}}let kt=null;function It(t){if(Qe.useDeprecatedSynchronousErrorHandling){const e=!kt;if(e&&(kt={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=kt;if(kt=null,n)throw i}}else t()}class Kn extends Pe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,et(e)&&e.add(this)):this.destination=Kt}static create(e,n,i){return new B(e,n,i)}next(e){this.isStopped?Pt(function gn(t){return Tn("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Pt(function Se(t){return Tn("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Pt(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qe=Function.prototype.bind;function Be(t,e){return qe.call(t,e)}class Cn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){Ut(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){Ut(i)}else Ut(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ut(n)}}}class B extends Kn{constructor(e,n,i){let r;if(super(),Ne(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&Qe.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Be(e.next,s),error:e.error&&Be(e.error,s),complete:e.complete&&Be(e.complete,s)}):r=e}this.destination=new Cn(r)}}function Ut(t){Qe.useDeprecatedSynchronousErrorHandling?function Pn(t){Qe.useDeprecatedSynchronousErrorHandling&&kt&&(kt.errorThrown=!0,kt.error=t)}(t):en(t)}function Pt(t,e){const{onStoppedNotification:n}=Qe;n&&jt.setTimeout(()=>n(t,e))}const Kt={closed:!0,next:Re,error:function L(t){throw t},complete:Re},An="function"==typeof Symbol&&Symbol.observable||"@@observable";function fn(t){return t}function $(t){return 0===t.length?fn:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let U=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function W(t){return t&&t instanceof Kn||function le(t){return t&&Ne(t.next)&&Ne(t.error)&&Ne(t.complete)}(t)&&et(t)}(n)?n:new B(n,i,r);return It(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=ae(i))((r,s)=>{const o=new B({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[An](){return this}pipe(...n){return $(n)(this)}toPromise(n){return new(n=ae(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function ae(t){var e;return null!==(e=t??Qe.Promise)&&void 0!==e?e:Promise}const Y=mt(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class t extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new te(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new Y}next(n){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){It(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?ht:(this.currentObservers=null,s.push(n),new Pe(()=>{this.currentObservers=null,pt(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new U;return n.source=this,n}}return t.create=(e,n)=>new te(e,n),t})();class te extends z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:ht}}function re(t){return Ne(t?.lift)}function fe(t){return e=>{if(re(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function se(t,e,n,i,r){return new be(t,e,n,i,r)}class be extends Kn{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ce(t,e){return fe((n,i)=>{let r=0;n.subscribe(se(i,s=>{i.next(t.call(e,s,r++))}))})}function Ii(t){return this instanceof Ii?(this.v=t,this):new Ii(t)}function Ta(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(v){i[v]&&(r[v]=function(_){return new Promise(function(y,E){s.push([v,_,y,E])>1||a(v,_)})})}function a(v,_){try{!function l(v){v.value instanceof Ii?Promise.resolve(v.value.v).then(c,f):g(s[0][2],v)}(i[v](_))}catch(y){g(s[0][3],y)}}function c(v){a("next",v)}function f(v){a("throw",v)}function g(v,_){v(_),s.shift(),s.length&&a(s[0][0],s[0][1])}}function kl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Ar(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}const to=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Lo(t){return Ne(t?.then)}function Ft(t){return Ne(t[An])}function Mi(t){return Symbol.asyncIterator&&Ne(t?.[Symbol.asyncIterator])}function vn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Bo=function ji(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Oe(t){return Ne(t?.[Bo])}function Cs(t){return Ta(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Ii(n.read());if(r)return yield Ii(void 0);yield yield Ii(i)}}finally{n.releaseLock()}})}function Ds(t){return Ne(t?.getReader)}function Ei(t){if(t instanceof U)return t;if(null!=t){if(Ft(t))return function Eu(t){return new U(e=>{const n=t[An]();if(Ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(to(t))return function Uo(t){return new U(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Lo(t))return function Ll(t){return new U(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,en)})}(t);if(Mi(t))return w(t);if(Oe(t))return function x(t){return new U(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ds(t))return function D(t){return w(Cs(t))}(t)}throw vn(t)}function w(t){return new U(e=>{(function R(t,e){var n,i,r,s;return function dr(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(f){try{c(i.next(f))}catch(g){o(g)}}function l(f){try{c(i.throw(f))}catch(g){o(g)}}function c(f){f.done?s(f.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(f.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=kl(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function F(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function H(t,e,n=1/0){return Ne(e)?H((i,r)=>ce((s,o)=>e(i,s,r,o))(Ei(t(i,r))),n):("number"==typeof e&&(n=e),fe((i,r)=>function j(t,e,n,i,r,s,o,a){const l=[];let c=0,f=0,g=!1;const v=()=>{g&&!l.length&&!c&&e.complete()},_=E=>c<i?y(E):l.push(E),y=E=>{s&&e.next(E),c++;let S=!1;Ei(n(E,f++)).subscribe(se(e,T=>{r?.(T),s?_(T):e.next(T)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<i;){const T=l.shift();o?F(e,o,()=>y(T)):y(T)}v()}catch(T){e.error(T)}}))};return t.subscribe(se(e,_,()=>{g=!0,v()})),()=>{a?.()}}(i,r,t,n)))}function ne(t=1/0){return H(fn,t)}const K=new U(t=>t.complete());function nt(t){return t[t.length-1]}function bt(t){return function Ae(t){return t&&Ne(t.schedule)}(nt(t))?t.pop():void 0}function Ct(t,e=0){return fe((n,i)=>{n.subscribe(se(i,r=>F(i,t,()=>i.next(r),e),()=>F(i,t,()=>i.complete(),e),r=>F(i,t,()=>i.error(r),e)))})}function it(t,e=0){return fe((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function lt(t,e){if(!t)throw new Error("Iterable cannot be null");return new U(n=>{F(n,e,()=>{const i=t[Symbol.asyncIterator]();F(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function _e(t,e){return e?function Vt(t,e){if(null!=t){if(Ft(t))return function Wt(t,e){return Ei(t).pipe(it(e),Ct(e))}(t,e);if(to(t))return function Ot(t,e){return new U(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Lo(t))return function zt(t,e){return Ei(t).pipe(it(e),Ct(e))}(t,e);if(Mi(t))return lt(t,e);if(Oe(t))return function je(t,e){return new U(n=>{let i;return F(n,e,()=>{i=t[Bo](),F(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>Ne(i?.return)&&i.return()})}(t,e);if(Ds(t))return function Fe(t,e){return lt(Cs(t),e)}(t,e)}throw vn(t)}(t,e):Ei(t)}function ut(...t){const e=bt(t),n=function tn(t,e){return"number"==typeof nt(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Ei(i[0]):ne(n)(_e(i,e)):K}function Je(t={}){const{connector:e=(()=>new z),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,f=!1,g=!1;const v=()=>{a?.unsubscribe(),a=void 0},_=()=>{v(),o=l=void 0,f=g=!1},y=()=>{const E=o;_(),E?.unsubscribe()};return fe((E,S)=>{c++,!g&&!f&&v();const T=l=l??e();S.add(()=>{c--,0===c&&!g&&!f&&(a=On(y,r))}),T.subscribe(S),!o&&c>0&&(o=new B({next:M=>T.next(M),error:M=>{g=!0,v(),a=On(_,n,M),T.error(M)},complete:()=>{f=!0,v(),a=On(_,i),T.complete()}}),Ei(E).subscribe(o))})(s)}}function On(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new B({next:()=>{i.unsubscribe(),t()}});return e(...n).subscribe(i)}function Lt(t){for(let e in t)if(t[e]===Lt)return e;throw Error("Could not find renamed property on target object.")}function on(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(on).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function pr(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Ri=Lt({__forward_ref__:Lt});function Bl(t){return t.__forward_ref__=Bl,t.toString=function(){return on(this())},t}function Ee(t){return Cu(t)?t():t}function Cu(t){return"function"==typeof t&&t.hasOwnProperty(Ri)&&t.__forward_ref__===Bl}function Du(t){return t&&!!t.\u0275providers}class xe extends Error{constructor(e,n){super(function gr(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function Rt(t){return"string"==typeof t?t:null==t?"":String(t)}function xn(t,e){throw new xe(-201,!1)}function Gi(t,e){null==t&&function yn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function vt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function zi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ul(t){return Xd(t,jl)||Xd(t,qd)}function Xd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Au(t){return t&&(t.hasOwnProperty(Iu)||t.hasOwnProperty(Ht))?t[Iu]:null}const jl=Lt({\u0275prov:Lt}),Iu=Lt({\u0275inj:Lt}),qd=Lt({ngInjectableDef:Lt}),Ht=Lt({ngInjectorDef:Lt});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Mu;function $i(t){const e=Mu;return Mu=t,e}function Kd(t,e,n){const i=Ul(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&wt.Optional?null:void 0!==e?e:void xn(on(t))}const In=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vo={},Ma="__NG_DI_FLAG__",Vl="ngTempTokenPath",$m=/\n/gm,Qd="__source";let As;function Kr(t){const e=As;return As=t,e}function Xm(t,e=wt.Default){if(void 0===As)throw new xe(-203,!1);return null===As?Kd(t,void 0,e):As.get(t,e&wt.Optional?null:void 0,e)}function _t(t,e=wt.Default){return(function Aa(){return Mu}()||Xm)(Ee(t),e)}function cn(t,e=wt.Default){return _t(t,Hl(e))}function Hl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ra(t){const e=[];for(let n=0;n<t.length;n++){const i=Ee(t[n]);if(Array.isArray(i)){if(0===i.length)throw new xe(900,!1);let r,s=wt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Ym(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(_t(r,s))}else e.push(_t(i))}return e}function Pa(t,e){return t[Ma]=e,t.prototype[Ma]=e,t}function Ym(t){return t[Ma]}function Is(t){return{toString:t}.toString()}var Mr=(()=>((Mr=Mr||{})[Mr.OnPush=0]="OnPush",Mr[Mr.Default=1]="Default",Mr))(),Rr=(()=>{return(t=Rr||(Rr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Rr;var t})();const Zr={},bn=[],Gl=Lt({\u0275cmp:Lt}),Pu=Lt({\u0275dir:Lt}),Ou=Lt({\u0275pipe:Lt}),ef=Lt({\u0275mod:Lt}),Qr=Lt({\u0275fac:Lt}),Oa=Lt({__NG_ELEMENT_ID__:Lt});let Km=0;function Jr(t){return Is(()=>{const n=!0===t.standalone,i={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Mr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||bn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Rr.Emulated,id:"c"+Km++,styles:t.styles||bn,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return r.inputs=zl(t.inputs,i),r.outputs=zl(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(tf).filter(nf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ci).filter(nf):null,r})}function tf(t){return En(t)||_i(t)}function nf(t){return null!==t}function Pr(t){return Is(()=>({type:t.type,bootstrap:t.bootstrap||bn,declarations:t.declarations||bn,imports:t.imports||bn,exports:t.exports||bn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function zl(t,e){if(null==t)return Zr;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const Jn=Jr;function En(t){return t[Gl]||null}function _i(t){return t[Pu]||null}function Ci(t){return t[Ou]||null}function Wi(t,e){const n=t[ef]||null;if(!n&&!0===e)throw new Error(`Type ${on(t)} does not have '\u0275mod' property.`);return n}function Xi(t){return Array.isArray(t)&&"object"==typeof t[1]}function _r(t){return Array.isArray(t)&&!0===t[1]}function Yl(t){return 0!=(4&t.flags)}function La(t){return t.componentOffset>-1}function ql(t){return 1==(1&t.flags)}function tr(t){return null!==t.template}function Jm(t){return 0!=(256&t[2])}function io(t,e){return t.hasOwnProperty(Qr)?t[Qr]:null}class rv{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Rs(){return uf}function uf(t){return t.type.prototype.ngOnChanges&&(t.setInput=ov),sv}function sv(){const t=df(this),e=t?.current;if(e){const n=t.previous;if(n===Zr)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function ov(t,e,n,i){const r=this.declaredInputs[n],s=df(t)||function av(t,e){return t[hf]=e}(t,{previous:Zr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new rv(l&&l.currentValue,e,a===Zr),t[i]=e}Rs.ngInherit=!0;const hf="__ngSimpleChanges__";function df(t){return t[hf]||null}function ci(t){for(;Array.isArray(t);)t=t[0];return t}function Yi(t,e){return ci(e[t.index])}function Lu(t,e){return t.data[e]}function qi(t,e){const n=e[t];return Xi(n)?n:n[0]}function Zl(t){return 64==(64&t[2])}function Ps(t,e){return null==e?null:t[e]}function gf(t){t[18]=0}function Bu(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Bt={lFrame:Cf(null),bindingsEnabled:!0};function vf(){return Bt.bindingsEnabled}function me(){return Bt.lFrame.lView}function un(){return Bt.lFrame.tView}function ui(){let t=Uu();for(;null!==t&&64===t.type;)t=t.parent;return t}function Uu(){return Bt.lFrame.currentTNode}function Nr(t,e){const n=Bt.lFrame;n.currentTNode=t,n.isParent=e}function ju(){return Bt.lFrame.isParent}function Ko(){return Bt.lFrame.bindingIndex++}function yv(t,e){const n=Bt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Vu(e)}function Vu(t){Bt.lFrame.currentDirectiveIndex=t}function wf(){return Bt.lFrame.currentQueryIndex}function Gu(t){Bt.lFrame.currentQueryIndex=t}function wv(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function xf(t,e,n){if(n&wt.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&wt.Host||(r=wv(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Bt.lFrame=Ef();return i.currentTNode=e,i.lView=t,!0}function zu(t){const e=Ef(),n=t[1];Bt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Ef(){const t=Bt.lFrame,e=null===t?null:t.child;return null===e?Cf(t):e}function Cf(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function is(){const t=Bt.lFrame;return Bt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Df=is;function $u(){const t=is();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ei(){return Bt.lFrame.selectedIndex}function Os(t){Bt.lFrame.selectedIndex=t}function Ba(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=f&&(t.destroyHooks||(t.destroyHooks=[])).push(n,f)}}function Ua(t,e,n){Xu(t,e,3,n)}function nc(t,e,n,i){(3&t[2])===n&&Xu(t,e,n,i)}function Sf(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Xu(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(t[18]+=65536),(a<s||-1==s)&&(Av(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function Av(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class ja{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Yu(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Va(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function Tf(t){return 3===t||4===t||6===t}function Va(t){return 64===t.charCodeAt(0)}function Ha(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Af(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Af(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function If(t){return-1!==t}function ic(t){return 32767&t}function rc(t,e){let n=function Ov(t){return t>>16}(t),i=e;for(;n>0;)i=i[15],n--;return i}let qu=!0;function sc(t){const e=qu;return qu=t,e}let Nv=0;const kr={};function oc(t,e){const n=Pf(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Ku(i.data,t),Ku(e,null),Ku(i.blueprint,null));const r=Zu(t,e),s=t.injectorIndex;if(If(r)){const o=ic(r),a=rc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Ku(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Pf(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Zu(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=th(r),null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function Qu(t,e,n){!function kv(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Oa)&&(i=n[Oa]),null==i&&(i=n[Oa]=Nv++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Ju(t,e,n){if(n&wt.Optional||void 0!==t)return t;xn()}function ac(t,e,n,i){if(n&wt.Optional&&void 0===i&&(i=null),0==(n&(wt.Self|wt.Host))){const r=t[9],s=$i(void 0);try{return r?r.get(e,i,n&wt.Optional):Kd(e,i,n&wt.Optional)}finally{$i(s)}}return Ju(i,0,n)}function yr(t,e,n,i=wt.Default,r){if(null!==t){if(1024&e[2]){const o=function Qo(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=br(s,o,n,i|wt.Self,kr);if(a!==kr)return a;let l=s.parent;if(!l){const c=o[21];if(c){const f=c.get(n,kr,i);if(f!==kr)return f}l=th(o),o=o[15]}s=l}return r}(t,e,n,i,kr);if(o!==kr)return o}const s=br(t,e,n,i,kr);if(s!==kr)return s}return ac(e,n,i,r)}function br(t,e,n,i,r){const s=function Lv(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Oa)?t[Oa]:void 0;return"number"==typeof e?e>=0?255&e:Bv:e}(n);if("function"==typeof s){if(!xf(e,t,i))return i&wt.Host?Ju(r,0,i):ac(e,n,i,r);try{const o=s(i);if(null!=o||i&wt.Optional)return o;xn()}finally{Df()}}else if("number"==typeof s){let o=null,a=Pf(t,e),l=-1,c=i&wt.Host?e[16][6]:null;for((-1===a||i&wt.SkipSelf)&&(l=-1===a?Zu(t,e):e[a+8],-1!==l&&Yt(i,!1)?(o=e[1],a=ic(l),e=rc(l,e)):a=-1);-1!==a;){const f=e[1];if(Nf(s,a,f.data)){const g=Fv(a,e,n,o,i,c);if(g!==kr)return g}l=e[a+8],-1!==l&&Yt(i,e[1].data[a+8]===c)&&Nf(s,a,e)?(o=f,a=ic(l),e=rc(l,e)):a=-1}}return r}function Fv(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],f=lc(a,o,n,null==i?La(a)&&qu:i!=o&&0!=(3&a.type),r&wt.Host&&s===a);return null!==f?wr(e,o,f,a):kr}function lc(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,f=s>>20,v=r?a+f:t.directiveEnd;for(let _=i?a:a+f;_<v;_++){const y=o[_];if(_<l&&n===y||_>=l&&y.type===n)return _}if(r){const _=o[l];if(_&&tr(_)&&_.type===n)return l}return null}function wr(t,e,n,i){let r=t[n];const s=e.data;if(function Iv(t){return t instanceof ja}(r)){const o=r;o.resolving&&function Su(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new xe(-200,`Circular dependency in DI detected for ${t}${n}`)}(function _n(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Rt(t)}(s[n]));const a=sc(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?$i(o.injectImpl):null;xf(t,i,wt.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function Tv(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=uf(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&$i(l),sc(a),o.resolving=!1,Df()}}return r}function Nf(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Yt(t,e){return!(t&wt.Self||t&wt.Host&&e)}class so{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return yr(this._tNode,this._lView,e,Hl(i),n)}}function Bv(){return new so(ui(),me())}function Fn(t){return Cu(t)?()=>{const e=Fn(Ee(t));return e&&e()}:io(t)}function th(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const ea="__parameters__";function p(t,e,n){return Is(()=>{const i=function d(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,f){const g=l.hasOwnProperty(ea)?l[ea]:Object.defineProperty(l,ea,{value:[]})[ea];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class C{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=vt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function za(t,e){t.forEach(n=>Array.isArray(n)?za(n,e):e(n))}function Px(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function kf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const ih=Pa(p("Optional"),8),rh=Pa(p("SkipSelf"),4);var ir=(()=>((ir=ir||{})[ir.Important=1]="Important",ir[ir.DashCase=2]="DashCase",ir))();const Wv=new Map;let wN=0;const Yv="__ngContext__";function Ni(t,e){Xi(e)?(t[Yv]=e[20],function EN(t){Wv.set(t[20],t)}(e)):t[Yv]=e}function Kv(t,e){return undefined(t,e)}function lh(t){const e=t[3];return _r(e)?e[3]:e}function Zv(t){return Jx(t[13])}function Qv(t){return Jx(t[4])}function Jx(t){for(;null!==t&&!_r(t);)t=t[4];return t}function hc(t,e,n,i,r){if(null!=i){let s,o=!1;_r(i)?s=i:Xi(i)&&(o=!0,i=i[0]);const a=ci(i);0===t&&null!==n?null==r?sE(e,n,a):$a(e,n,a,r||null,!0):1===t&&null!==n?$a(e,n,a,r||null,!0):2===t?function s_(t,e,n){const i=Uf(t,e);i&&function GN(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function WN(t,e,n,i,r){const s=n[7];s!==ci(n)&&hc(e,t,i,s,r);for(let a=10;a<n.length;a++){const l=n[a];ch(l[1],l,t,e,i,s)}}(e,t,s,n,r)}}function e_(t,e,n){return t.createElement(e,n)}function tE(t,e){const n=t[9],i=n.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,Bu(r,-1)),n.splice(i,1)}function t_(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&tE(r,i),e>0&&(t[n-1][4]=i[4]);const s=kf(t,10+e);!function kN(t,e){ch(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function nE(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&ch(t,e,n,3,null,null),function BN(t){let e=t[13];if(!e)return n_(t[1],t);for(;e;){let n=null;if(Xi(e))n=e[13];else{const i=e[10];i&&(n=i)}if(!n){for(;e&&!e[4]&&e!==t;)Xi(e)&&n_(e[1],e),e=e[3];null===e&&(e=t),Xi(e)&&n_(e[1],e),n=e&&e[4]}e=n}}(e)}}function n_(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function HN(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof ja)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(t,e),function VN(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=n[s+1]];n[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&_r(e[3])){n!==e[3]&&tE(n,e);const i=e[19];null!==i&&i.detachView(t)}!function CN(t){Wv.delete(t[20])}(e)}}function iE(t,e,n){return function rE(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===Rr.None||s===Rr.Emulated)return null}return Yi(i,n)}}(t,e.parent,n)}function $a(t,e,n,i,r){t.insertBefore(e,n,i,r)}function sE(t,e,n){t.appendChild(e,n)}function oE(t,e,n,i,r){null!==i?$a(t,e,n,i,r):sE(t,e,n)}function Uf(t,e){return t.parentNode(e)}let l_,cE=function lE(t,e,n){return 40&t.type?Yi(t,n):null};function jf(t,e,n,i){const r=iE(t,i,e),s=e[11],a=function aE(t,e,n){return cE(t,e,n)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)oE(s,r,n[l],a,!1);else oE(s,r,n,a,!1)}function Vf(t,e){if(null!==e){const n=e.type;if(3&n)return Yi(e,t);if(4&n)return r_(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Vf(t,i);{const r=t[e.index];return _r(r)?r_(-1,r):ci(r)}}if(32&n)return Kv(e,t)()||ci(t[e.index]);{const i=hE(t,e);return null!==i?Array.isArray(i)?i[0]:Vf(lh(t[16]),i):Vf(t,e.next)}}return null}function hE(t,e){return null!==e?t[16][6].projection[e.projection]:null}function r_(t,e){const n=10+t+1;if(n<e.length){const i=e[n],r=i[1].firstChild;if(null!==r)return Vf(i,r)}return e[7]}function o_(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&Ni(ci(a),i),n.flags|=2),32!=(32&n.flags))if(8&l)o_(t,e,n.child,i,r,s,!1),hc(e,t,r,a,s);else if(32&l){const c=Kv(n,i);let f;for(;f=c();)hc(e,t,r,f,s);hc(e,t,r,a,s)}else 16&l?dE(t,e,i,n,r,s):hc(e,t,r,a,s);n=o?n.projectionNext:n.next}}function ch(t,e,n,i,r,s){o_(n,i,t.firstChild,e,r,s,!1)}function dE(t,e,n,i,r,s){const o=n[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)hc(e,t,r,l[c],s);else o_(t,e,l,o[3],r,s,!0)}function fE(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function pE(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&Yu(t,e,i),null!==r&&fE(t,e,r),null!==s&&function YN(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const $f=new C("ENVIRONMENT_INITIALIZER"),IE=new C("INJECTOR",-1),ME=new C("INJECTOR_DEF_TYPES");class RE{get(e,n=Vo){if(n===Vo){const i=new Error(`NullInjectorError: No provider for ${on(e)}!`);throw i.name="NullInjectorError",i}return n}}function wk(...t){return{\u0275providers:PE(0,t),\u0275fromNgModule:!0}}function PE(t,...e){const n=[],i=new Set;let r;return za(e,s=>{const o=s;p_(o,n,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&OE(r,n),n}function OE(t,e){for(let n=0;n<t.length;n++){const{providers:r}=t[n];g_(r,s=>{e.push(s)})}}function p_(t,e,n,i){if(!(t=Ee(t)))return!1;let r=null,s=Au(t);const o=!s&&En(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const l=t.ngModule;if(s=Au(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)p_(c,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{za(s.imports,f=>{p_(f,e,n,i)&&(c||(c=[]),c.push(f))})}finally{}void 0!==c&&OE(c,e)}if(!a){const c=io(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:bn},{provide:ME,useValue:r,multi:!0},{provide:$f,useValue:()=>_t(r),multi:!0})}const l=s.providers;null==l||a||g_(l,f=>{e.push(f)})}}return r!==t&&void 0!==t.providers}function g_(t,e){for(let n of t)Du(n)&&(n=n.\u0275providers),Array.isArray(n)?g_(n,e):e(n)}const xk=Lt({provide:String,useValue:Lt});function m_(t){return null!==t&&"object"==typeof t&&xk in t}function Xa(t){return"function"==typeof t}const v_=new C("Set Injector scope."),Wf={},Ck={};let __;function Xf(){return void 0===__&&(__=new RE),__}class ao{}class FE extends ao{constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,b_(e,o=>this.processProvider(o)),this.records.set(IE,dc(void 0,this)),r.has("environment")&&this.records.set(ao,dc(void 0,this));const s=this.records.get(v_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(ME.multi,bn,wt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Kr(this),i=$i(void 0);try{return e()}finally{Kr(n),$i(i)}}get(e,n=Vo,i=wt.Default){this.assertNotDestroyed(),i=Hl(i);const r=Kr(this),s=$i(void 0);try{if(!(i&wt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function Ik(t){return"function"==typeof t||"object"==typeof t&&t instanceof C}(e)&&Ul(e);a=l&&this.injectableDefInScope(l)?dc(y_(e),Wf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&wt.Self?Xf():this.parent).get(e,n=i&wt.Optional&&n===Vo?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Vl]=o[Vl]||[]).unshift(on(e)),r)throw o;return function qm(t,e,n,i){const r=t[Vl];throw e[Qd]&&r.unshift(e[Qd]),t.message=function Jd(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=on(e);if(Array.isArray(e))r=e.map(on).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):on(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace($m,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Vl]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{$i(s),Kr(r)}}resolveInjectorInitializers(){const e=Kr(this),n=$i(void 0);try{const i=this.get($f.multi,bn,wt.Self);for(const r of i)r()}finally{Kr(e),$i(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(on(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(e){let n=Xa(e=Ee(e))?e:Ee(e&&e.provide);const i=function Sk(t){return m_(t)?dc(void 0,t.useValue):dc(function LE(t,e,n){let i;if(Xa(t)){const r=Ee(t);return io(r)||y_(r)}if(m_(t))i=()=>Ee(t.useValue);else if(function kE(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Ra(t.deps||[]));else if(function NE(t){return!(!t||!t.useExisting)}(t))i=()=>_t(Ee(t.useExisting));else{const r=Ee(t&&(t.useClass||t.provide));if(!function Tk(t){return!!t.deps}(t))return io(r)||y_(r);i=()=>new r(...Ra(t.deps))}return i}(t),Wf)}(e);if(Xa(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=dc(void 0,Wf,!0),r.factory=()=>Ra(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Wf&&(n.value=Ck,n.value=n.factory()),"object"==typeof n.value&&n.value&&function Ak(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ee(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function y_(t){const e=Ul(t),n=null!==e?e.factory:io(t);if(null!==n)return n;if(t instanceof C)throw new xe(204,!1);if(t instanceof Function)return function Dk(t){const e=t.length;if(e>0)throw function nh(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(e,"?"),new xe(204,!1);const n=function Yd(t){const e=t&&(t[jl]||t[qd]);if(e){const n=function Hm(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new xe(204,!1)}function dc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function b_(t,e){for(const n of t)Array.isArray(n)?b_(n,e):n&&Du(n)?b_(n.\u0275providers,e):e(n)}class Mk{}class BE{}class Pk{resolveComponentFactory(e){throw function Rk(t){const e=Error(`No component factory found for ${on(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let fh=(()=>{class t{}return t.NULL=new Pk,t})();function Ok(){return fc(ui(),me())}function fc(t,e){return new wi(Yi(t,e))}let wi=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=Ok,t})();function Nk(t){return t instanceof wi?t.nativeElement:t}class jE{}let pc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function kk(){const t=me(),n=qi(ui().index,t);return(Xi(n)?n:t)[11]}(),t})(),Fk=(()=>{class t{}return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>null}),t})();class Yf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Lk=new Yf("15.0.4"),w_={};function E_(t){return t.ngOriginalError}class gc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&E_(e);for(;n&&E_(n);)n=E_(n);return n||null}}function lo(t){return t instanceof Function?t():t}function HE(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}const GE="ng-template";function Yk(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==HE(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function zE(t){return 4===t.type&&t.value!==GE}function qk(t,e,n){return e===(4!==t.type||n?t.value:GE)}function Kk(t,e,n){let i=4;const r=t.attrs||[],s=function Jk(t){for(let e=0;e<t.length;e++)if(Tf(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!qk(t,l,n)||""===l&&1===e.length){if(ss(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!Yk(t.attrs,c,n)){if(ss(i))return!1;o=!0}continue}const g=Zk(8&i?"class":l,r,zE(t),n);if(-1===g){if(ss(i))return!1;o=!0;continue}if(""!==c){let v;v=g>s?"":r[g+1].toLowerCase();const _=8&i?v:null;if(_&&-1!==HE(_,c,0)||2&i&&c!==v){if(ss(i))return!1;o=!0}}}}else{if(!o&&!ss(i)&&!ss(l))return!1;if(o&&ss(l))continue;o=!1,i=l|1&i}}return ss(i)||o}function ss(t){return 0==(1&t)}function Zk(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function eF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function $E(t,e,n=!1){for(let i=0;i<e.length;i++)if(Kk(t,e[i],n))return!0;return!1}function WE(t,e){return t?":not("+e.trim()+")":e}function nF(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ss(o)&&(e+=WE(s,r),r=""),i=o,s=s||!ss(i);n++}return""!==r&&(e+=WE(s,r)),e}const Gt={};function na(t){XE(un(),me(),ei()+t,!1)}function XE(t,e,n,i){if(!i)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&Ua(e,s,n)}else{const s=t.preOrderHooks;null!==s&&nc(e,s,0,n)}Os(n)}function ZE(t,e=null,n=null,i){const r=QE(t,e,n,i);return r.resolveInjectorInitializers(),r}function QE(t,e=null,n=null,i,r=new Set){const s=[n||bn,wk(t)];return i=i||("object"==typeof t?void 0:on(t)),new FE(s,e||Xf(),i||null,r)}let Ns=(()=>{class t{static create(n,i){if(Array.isArray(n))return ZE({name:""},i,n,"");{const r=n.name??"";return ZE({name:r},n.parent,n.providers,r)}}}return t.THROW_IF_NOT_FOUND=Vo,t.NULL=new RE,t.\u0275prov=vt({token:t,providedIn:"any",factory:()=>_t(IE)}),t.__NG_ELEMENT_ID__=-1,t})();function We(t,e=wt.Default){const n=me();return null===n?_t(t,e):yr(ui(),n,Ee(t),e)}function oC(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const o=t.data[s];Gu(r),o.contentQueries(2,e[s],s)}}}function Kf(t,e,n,i,r,s,o,a,l,c,f){const g=e.blueprint.slice();return g[0]=r,g[2]=76|i,(null!==f||t&&1024&t[2])&&(g[2]|=1024),gf(g),g[3]=g[15]=t,g[8]=n,g[10]=o||t&&t[10],g[11]=a||t&&t[11],g[12]=l||t&&t[12]||null,g[9]=c||t&&t[9]||null,g[6]=s,g[20]=function xN(){return wN++}(),g[21]=f,g[16]=2==e.type?t[16]:g,g}function _c(t,e,n,i,r){let s=t.data[e];if(null===s)s=function A_(t,e,n,i,r){const s=Uu(),o=ju(),l=t.data[e]=function AF(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(t,e,n,i,r),function tc(){return Bt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function qo(){const t=Bt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Nr(s,!0),s}function ph(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function I_(t,e,n){zu(e);try{const i=t.viewQuery;null!==i&&U_(1,i,n);const r=t.template;null!==r&&aC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&oC(t,e),t.staticViewQueries&&U_(2,t.viewQuery,n);const s=t.components;null!==s&&function DF(t,e){for(let n=0;n<e.length;n++)XF(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[2]&=-5,$u()}}function Zf(t,e,n,i){const r=e[2];if(128!=(128&r)){zu(e);try{gf(e),function yf(t){return Bt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&aC(t,e,n,2,i);const o=3==(3&r);if(o){const c=t.preOrderCheckHooks;null!==c&&Ua(e,c,null)}else{const c=t.preOrderHooks;null!==c&&nc(e,c,0,null),Sf(e,0)}if(function $F(t){for(let e=Zv(t);null!==e;e=Qv(e)){if(!e[2])continue;const n=e[9];for(let i=0;i<n.length;i++){const r=n[i],s=r[3];0==(512&r[2])&&Bu(s,1),r[2]|=512}}}(e),function zF(t){for(let e=Zv(t);null!==e;e=Qv(e))for(let n=10;n<e.length;n++){const i=e[n],r=i[1];Zl(i)&&Zf(r,i,r.template,i[8])}}(e),null!==t.contentQueries&&oC(t,e),o){const c=t.contentCheckHooks;null!==c&&Ua(e,c)}else{const c=t.contentHooks;null!==c&&nc(e,c,1),Sf(e,1)}!function EF(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)Os(~r);else{const s=r,o=n[++i],a=n[++i];yv(o,s),a(2,e[s])}}}finally{Os(-1)}}(t,e);const a=t.components;null!==a&&function CF(t,e){for(let n=0;n<e.length;n++)WF(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&U_(2,l,i),o){const c=t.viewCheckHooks;null!==c&&Ua(e,c)}else{const c=t.viewHooks;null!==c&&nc(e,c,2),Sf(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Bu(e[3],-1))}finally{$u()}}}function aC(t,e,n,i,r){const s=ei(),o=2&i;try{Os(-1),o&&e.length>22&&XE(t,e,22,!1),n(i,r)}finally{Os(s)}}function M_(t,e,n){if(Yl(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function R_(t,e,n){!vf()||(function NF(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;La(n)&&function VF(t,e,n){const i=Yi(e,t),r=lC(n),s=t[10],o=Qf(t,Kf(t,r,null,n.onPush?32:16,i,e,s,s.createRenderer(i,n),null,null,null));t[e.index]=o}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||oc(n,e),Ni(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const l=t.data[a],c=wr(e,t,a,n);Ni(c,e),null!==o&&HF(0,a-r,c,l,0,o),tr(l)&&(qi(n.index,e)[8]=wr(e,t,a,n))}}(t,e,n,Yi(n,e)),64==(64&n.flags)&&pC(t,e,n))}function P_(t,e,n=Yi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function lC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=O_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function O_(t,e,n,i,r,s,o,a,l,c){const f=22+i,g=f+r,v=function SF(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Gt);return n}(f,g),_="function"==typeof c?c():c;return v[1]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1}}function cC(t,e,n,i){const r=mC(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&vC(t).push(i,r.length-1))}function uC(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const s=t[r];null===i?hC(n,e,r,s):i.hasOwnProperty(r)&&hC(n,e,i[r],s)}return n}function hC(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function dC(t,e){const n=qi(e,t);16&n[2]||(n[2]|=32)}function N_(t,e,n,i){let r=!1;if(vf()){const s=null===i?null:{"":-1},o=function FF(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if($E(e,o.selectors,!1))if(i||(i=[]),tr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),k_(t,e,a.length)}else i.unshift(o),k_(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&(r=!0,fC(t,e,n,a,s,l)),s&&function LF(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new xe(-301,!1);i.push(e[r],s)}}}(n,i,s)}return n.mergedAttrs=Ha(n.mergedAttrs,n.attrs),r}function fC(t,e,n,i,r,s){for(let c=0;c<i.length;c++)Qu(oc(n,e),t,i[c].type);!function UF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let c=0;c<i.length;c++){const f=i[c];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,l=ph(t,e,i.length,null);for(let c=0;c<i.length;c++){const f=i[c];n.mergedAttrs=Ha(n.mergedAttrs,f.hostAttrs),jF(t,n,e,l,f),BF(l,f,r),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function IF(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,c=null;for(let f=e.directiveStart;f<r;f++){const g=s[f],v=n?n.get(g):null,y=v?v.outputs:null;l=uC(g.inputs,f,l,v?v.inputs:null),c=uC(g.outputs,f,c,y);const E=null===l||null===o||zE(e)?null:GF(l,f,o);a.push(E)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,s)}function pC(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function bv(){return Bt.lFrame.currentDirectiveIndex}();try{Os(s);for(let a=i;a<r;a++){const l=t.data[a],c=e[a];Vu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&kF(l,c)}}finally{Os(-1),Vu(o)}}function kF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function k_(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function BF(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;tr(e)&&(n[""]=t)}}function jF(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=io(r.type)),o=new ja(s,tr(r),We);t.blueprint[i]=o,n[i]=o,function PF(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function OF(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,ph(t,n,r.hostVars,Gt),r)}function HF(t,e,n,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],f=o[l++],g=o[l++];null!==a?i.setInput(n,g,c,f):n[f]=g}}}function GF(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function gC(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null]}function WF(t,e){const n=qi(e,t);if(Zl(n)){const i=n[1];48&n[2]?Zf(i,n,i.template,n[8]):n[5]>0&&L_(n)}}function L_(t){for(let i=Zv(t);null!==i;i=Qv(i))for(let r=10;r<i.length;r++){const s=i[r];if(Zl(s))if(512&s[2]){const o=s[1];Zf(o,s,o.template,s[8])}else s[5]>0&&L_(s)}const n=t[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=qi(n[i],t);Zl(r)&&r[5]>0&&L_(r)}}function XF(t,e){const n=qi(e,t),i=n[1];(function YF(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(i,n),I_(i,n,n[8])}function Qf(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function B_(t){for(;t;){t[2]|=32;const e=lh(t);if(Jm(t)&&!e)return t;t=e}return null}function Jf(t,e,n,i=!0){const r=e[10];r.begin&&r.begin();try{Zf(t,e,t.template,n)}catch(o){throw i&&yC(e,o),o}finally{r.end&&r.end()}}function U_(t,e,n){Gu(0),e(t,n)}function mC(t){return t[7]||(t[7]=[])}function vC(t){return t.cleanup||(t.cleanup=[])}function yC(t,e){const n=t[9],i=n?n.get(gc,null):null;i&&i.handleError(e)}function j_(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function co(t,e,n){const i=function Kl(t,e){return ci(e[t])}(e,t);!function eE(t,e,n){t.setValue(e,n)}(t[11],i,n)}function ep(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=pr(r,a):2==s&&(i=pr(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function tp(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(ci(s)),_r(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&tp(l[1],l,c,i)}const o=n.type;if(8&o)tp(t,e,n.child,i);else if(32&o){const a=Kv(n,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=hE(e,n);if(Array.isArray(a))i.push(...a);else{const l=lh(e[16]);tp(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class gh{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return tp(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(_r(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(t_(e,i),kf(n,i))}this._attachedToViewContainer=!1}nE(this._lView[1],this._lView)}onDestroy(e){cC(this._lView[1],this._lView,null,e)}markForCheck(){B_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Jf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function LN(t,e){ch(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=e}}class qF extends gh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Jf(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class bC extends fh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=En(e);return new mh(n,this.ngModule)}}function wC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class ZF{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=Hl(i);const r=this.injector.get(e,w_,i);return r!==w_||n===w_?r:this.parentInjector.get(e,n,i)}}class mh extends BE{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function iF(t){return t.map(nF).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return wC(this.componentDef.inputs)}get outputs(){return wC(this.componentDef.outputs)}create(e,n,i,r){let s=(r=r||this.ngModule)instanceof ao?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new ZF(e,s):e,a=o.get(jE,null);if(null===a)throw new xe(407,!1);const l=o.get(Fk,null),c=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=i?function TF(t,e,n){return t.selectRootElement(e,n===Rr.ShadowDom)}(c,i,this.componentDef.encapsulation):e_(c,f,function KF(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.onPush?288:272,_=O_(0,null,null,1,0,null,null,null,null,null),y=Kf(null,_,null,v,null,null,a,c,l,o,null);let E,S;zu(y);try{const T=this.componentDef;let M,I=null;T.findHostDirectiveDefs?(M=[],I=new Map,T.findHostDirectiveDefs(T,M,I),M.push(T)):M=[T];const O=function JF(t,e){const n=t[1];return t[22]=e,_c(n,22,2,"#host",null)}(y,g),V=function eL(t,e,n,i,r,s,o,a){const l=r[1];!function tL(t,e,n,i){for(const r of t)e.mergedAttrs=Ha(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(ep(e,e.mergedAttrs,!0),null!==n&&pE(i,n,e))}(i,t,e,o);const c=s.createRenderer(e,n),f=Kf(r,lC(n),null,n.onPush?32:16,r[t.index],t,s,c,a||null,null,null);return l.firstCreatePass&&k_(l,t,i.length-1),Qf(r,f),r[t.index]=f}(O,g,T,M,y,a,c);S=Lu(_,22),g&&function iL(t,e,n,i){if(i)Yu(t,n,["ng-version",Lk.full]);else{const{attrs:r,classes:s}=function rF(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!ss(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&Yu(t,n,r),s&&s.length>0&&fE(t,n,s.join(" "))}}(c,T,g,i),void 0!==n&&function rL(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(S,this.ngContentSelectors,n),E=function nL(t,e,n,i,r,s){const o=ui(),a=r[1],l=Yi(o,r);fC(a,r,o,n,null,i);for(let f=0;f<n.length;f++)Ni(wr(r,a,o.directiveStart+f,o),r);pC(a,r,o),l&&Ni(l,r);const c=wr(r,a,o.directiveStart+o.componentOffset,o);if(t[8]=r[8]=c,null!==s)for(const f of s)f(c,e);return M_(a,o,t),c}(V,T,M,I,y,[sL]),I_(_,y,null)}finally{$u()}return new QF(this.componentType,E,fc(S,y),y,S)}}class QF extends Mk{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new qF(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;j_(s[1],s,r,e,n),dC(s,this._tNode.index)}}get injector(){return new so(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function sL(){const t=ui();Ba(me()[1],t)}let ip=null;function Ya(){if(!ip){const t=In.Symbol;if(t&&t.iterator)ip=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(ip=i)}}}return ip}function vh(t){return!!function H_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ya()in t)}function ki(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function z_(t,e,n){const i=me();return ki(i,Ko(),e)&&function Er(t,e,n,i,r,s,o,a){const l=Yi(e,n);let f,c=e.inputs;!a&&null!=c&&(f=c[i])?(j_(t,n,f,i,r),La(e)&&dC(n,e.index)):3&e.type&&(i=function MF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(un(),function jn(){const t=Bt.lFrame;return Lu(t.tView,t.selectedIndex)}(),i,t,e,i[11],n,!1),z_}function $_(t,e,n,i,r){const o=r?"class":"style";j_(t,n,e.inputs[o],o,i)}function Ki(t,e,n,i){const r=me(),s=un(),o=22+t,a=r[11],l=r[o]=e_(a,e,function Sv(){return Bt.lFrame.currentNamespace}()),c=s.firstCreatePass?function xL(t,e,n,i,r,s,o){const a=e.consts,c=_c(e,t,2,r,Ps(a,s));return N_(e,n,c,Ps(a,o)),null!==c.attrs&&ep(c,c.attrs,!1),null!==c.mergedAttrs&&ep(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,n,i):s.data[o];return Nr(c,!0),pE(a,l,c),32!=(32&c.flags)&&jf(s,r,l,c),0===function fv(){return Bt.lFrame.elementDepthCount}()&&Ni(l,r),function pv(){Bt.lFrame.elementDepthCount++}(),ql(c)&&(R_(s,r,c),M_(s,c,r)),null!==i&&P_(r,c),Ki}function sr(){let t=ui();ju()?function ec(){Bt.lFrame.isParent=!1}():(t=t.parent,Nr(t,!1));const e=t;!function mf(){Bt.lFrame.elementDepthCount--}();const n=un();return n.firstCreatePass&&(Ba(n,t),Yl(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Mv(t){return 0!=(8&t.flags)}(e)&&$_(n,e,me(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Rv(t){return 0!=(16&t.flags)}(e)&&$_(n,e,me(),e.stylesWithoutHost,!1),sr}function os(t,e,n,i){return Ki(t,e,n,i),sr(),os}function sp(t){return!!t&&"function"==typeof t.then}const BC=function LC(t){return!!t&&"function"==typeof t.subscribe};function Ka(t,e,n,i){const r=me(),s=un(),o=ui();return function jC(t,e,n,i,r,s,o){const a=ql(i),c=t.firstCreatePass&&vC(t),f=e[8],g=mC(e);let v=!0;if(3&i.type||o){const E=Yi(i,e),S=o?o(E):E,T=g.length,M=o?O=>o(ci(O[i.index])):i.index;let I=null;if(!o&&a&&(I=function DL(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,v=!1;else{s=HC(i,e,f,s,!1);const O=n.listen(S,r,s);g.push(s,O),c&&c.push(r,M,T,T+1)}}else s=HC(i,e,f,s,!1);const _=i.outputs;let y;if(v&&null!==_&&(y=_[r])){const E=y.length;if(E)for(let S=0;S<E;S+=2){const V=e[y[S]][y[S+1]].subscribe(s),q=g.length;g.push(s,V),c&&c.push(r,i.index,q,-(q+1))}}}(s,r,r[11],o,t,e,i),Ka}function VC(t,e,n,i){try{return!1!==n(i)}catch(r){return yC(t,r),!1}}function HC(t,e,n,i,r){return function s(o){if(o===Function)return i;B_(t.componentOffset>-1?qi(t.index,e):e);let l=VC(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=VC(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Qa(t,e=""){const n=me(),i=un(),r=t+22,s=i.firstCreatePass?_c(i,r,1,e,null):i.data[r],o=n[r]=function Jv(t,e){return t.createText(e)}(n[11],e);jf(i,n,o,s),Nr(s,!1)}function uo(t,e,n){const i=me(),r=function bc(t,e,n,i){return ki(t,Ko(),n)?e+Rt(n)+i:Gt}(i,t,e,n);return r!==Gt&&co(i,ei(),r),uo}const Mc="en-US";let kD=Mc;class Rc{}class aS{}class lS extends Rc{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bC(this);const i=Wi(e);this._bootstrapComponents=lo(i.bootstrap),this._r3Injector=QE(e,n,[{provide:Rc,useValue:this},{provide:fh,useValue:this.componentFactoryResolver}],on(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class sy extends aS{constructor(e){super(),this.moduleType=e}create(e){return new lS(this.moduleType,e)}}class v2 extends Rc{constructor(e,n,i){super(),this.componentFactoryResolver=new bC(this),this.instance=null;const r=new FE([...e,{provide:Rc,useValue:this},{provide:fh,useValue:this.componentFactoryResolver}],n||Xf(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function dp(t,e,n=null){return new v2(t,e,n).injector}let _2=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=PE(0,n.type),r=i.length>0?dp([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=vt({token:t,providedIn:"environment",factory:()=>new t(_t(ao))}),t})();function cS(t){t.getStandaloneInjector=e=>e.get(_2).getOrCreateStandaloneInjector(t)}function ay(t){return e=>{setTimeout(t,void 0,e)}}const Gn=class z2 extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=ay(s),r&&(r=ay(r)),o&&(o=ay(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Pe&&e.add(a),a}};function $2(){return this._results[Ya()]()}class ly{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ya(),i=ly.prototype;i[n]||(i[n]=$2)}get changes(){return this._changes||(this._changes=new Gn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Fr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Uv(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let ho=(()=>{class t{}return t.__NG_ELEMENT_ID__=Y2,t})();const W2=ho,X2=class extends W2{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(e,n){const i=this._declarationTContainer.tViews,r=Kf(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),I_(i,r,e),new gh(r)}};function Y2(){return fp(ui(),me())}function fp(t,e){return 4&t.type?new X2(e,t,fc(t,e)):null}let Br=(()=>{class t{}return t.__NG_ELEMENT_ID__=q2,t})();function q2(){return ES(ui(),me())}const K2=Br,wS=class extends K2{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return fc(this._hostTNode,this._hostLView)}get injector(){return new so(this._hostTNode,this._hostLView)}get parentInjector(){const e=Zu(this._hostTNode,this._hostLView);if(If(e)){const n=rc(e,this._hostLView),i=ic(e);return new so(n[1].data[i+8],n)}return new so(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=xS(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,r),o}createComponent(e,n,i,r,s){const o=e&&!function Dn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=o?e:new mh(En(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const v=(o?c:this.parentInjector).get(ao,null);v&&(s=v)}const f=l.create(c,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,n){const i=e._lView,r=i[1];if(function dv(t){return _r(t[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const g=i[3],v=new wS(g,g[6],g[3]);v.detach(v.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function UN(t,e,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-10?(e[4]=n[r],Px(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function jN(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(r,i,o,s);const a=r_(s,o),l=i[11],c=Uf(l,o[7]);return null!==c&&function FN(t,e,n,i,r,s){i[0]=r,i[6]=e,ch(t,i,n,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),Px(cy(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=xS(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=t_(this._lContainer,n);i&&(kf(cy(this._lContainer),n),nE(i[1],i))}detach(e){const n=this._adjustIndex(e,-1),i=t_(this._lContainer,n);return i&&null!=kf(cy(this._lContainer),n)?new gh(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function xS(t){return t[8]}function cy(t){return t[8]||(t[8]=[])}function ES(t,e){let n;const i=e[t.index];if(_r(i))n=i;else{let r;if(8&t.type)r=ci(i);else{const s=e[11];r=s.createComment("");const o=Yi(t,e);$a(s,Uf(s,o),r,function zN(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=gC(i,e,r,t),Qf(e,n)}return new wS(n,t,e)}class uy{constructor(e){this.queryList=e,this.matches=null}clone(){return new uy(this.queryList)}setDirty(){this.queryList.setDirty()}}class hy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new hy(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==IS(e,n).matches&&this.queries[n].setDirty()}}class CS{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class dy{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new dy(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class fy{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new fy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,Z2(n,s)),this.matchTNodeWithReadOption(e,n,lc(n,e,s,!1,!1))}else i===ho?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,lc(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===wi||r===Br||r===ho&&4&n.type)this.addMatch(n.index,-2);else{const s=lc(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function Z2(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function J2(t,e,n,i){return-1===n?function Q2(t,e){return 11&t.type?fc(t,e):4&t.type?fp(t,e):null}(e,t):-2===n?function eU(t,e,n){return n===wi?fc(e,t):n===ho?fp(e,t):n===Br?ES(e,t):void 0}(t,e,i):wr(t,t[1],n,e)}function DS(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:J2(e,s[c],o[l+1],n.metadata.read))}r.matches=a}return r.matches}function py(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=DS(t,e,r,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],f=e[-l];for(let g=10;g<f.length;g++){const v=f[g];v[17]===v[3]&&py(v[1],v,c,i)}if(null!==f[9]){const g=f[9];for(let v=0;v<g.length;v++){const _=g[v];py(_[1],_,c,i)}}}}}return i}function pp(t){const e=me(),n=un(),i=wf();Gu(i+1);const r=IS(n,i);if(t.dirty&&function hv(t){return 4==(4&t[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?py(n,e,i,[]):DS(n,e,r,i);t.reset(s,Nk),t.notifyOnChanges()}return!0}return!1}function gy(t,e,n){const i=un();i.firstCreatePass&&(function AS(t,e,n){null===t.queries&&(t.queries=new dy),t.queries.track(new fy(e,n))}(i,new CS(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),function TS(t,e,n){const i=new ly(4==(4&n));cC(t,e,i,i.destroy),null===e[19]&&(e[19]=new hy),e[19].queries.push(new uy(i))}(i,me(),e)}function IS(t,e){return t.queries.getByIndex(e)}function vp(...t){}const _p=new C("Application Initializer");let yp=(()=>{class t{constructor(n){this.appInits=n,this.resolve=vp,this.reject=vp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(sp(s))n.push(s);else if(BC(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(_t(_p,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ah=new C("AppId",{providedIn:"root",factory:function qS(){return`${by()}${by()}${by()}`}});function by(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const KS=new C("Platform Initializer"),ZS=new C("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QS=new C("appBootstrapListener");let EU=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const fo=new C("LocaleId",{providedIn:"root",factory:()=>cn(fo,wt.Optional|wt.SkipSelf)||function CU(){return typeof $localize<"u"&&$localize.locale||Mc}()});class SU{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let JS=(()=>{class t{compileModuleSync(n){return new sy(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),s=lo(Wi(n).declarations).reduce((o,a)=>{const l=En(a);return l&&o.push(new mh(l)),o},[]);return new SU(i,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const IU=(()=>Promise.resolve(0))();function wy(t){typeof Zone>"u"?IU.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Mn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Gn(!1),this.onMicrotaskEmpty=new Gn(!1),this.onStable=new Gn(!1),this.onError=new Gn(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function MU(){let t=In.requestAnimationFrame,e=In.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function OU(t){const e=()=>{!function PU(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(In,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ey(t),t.isCheckStableRunning=!0,xy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ey(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return nT(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),iT(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return nT(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),iT(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Ey(t),xy(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Mn.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Mn.isInAngularZone())throw new xe(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,RU,vp,vp);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const RU={};function xy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ey(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function nT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function iT(t){t._nesting--,xy(t)}class NU{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Gn,this.onMicrotaskEmpty=new Gn,this.onStable=new Gn,this.onError=new Gn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const rT=new C(""),bp=new C("");let Sy,Cy=(()=>{class t{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sy||(function kU(t){Sy=t}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Mn.assertNotInAngularZone(),wy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())wy(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return t.\u0275fac=function(n){return new(n||t)(_t(Mn),_t(Dy),_t(bp))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),Dy=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Sy?.findTestabilityInTree(this,n,i)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),ra=null;const sT=new C("AllowMultipleToken"),Ty=new C("PlatformDestroyListeners");class oT{constructor(e,n){this.name=e,this.token=n}}function lT(t,e,n=[]){const i=`Platform: ${e}`,r=new C(i);return(s=[])=>{let o=Ay();if(!o||o.injector.get(sT,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function BU(t){if(ra&&!ra.get(sT,!1))throw new xe(400,!1);ra=t;const e=t.get(uT);(function aT(t){const e=t.get(KS,null);e&&e.forEach(n=>n())})(t)}(function cT(t=[],e){return Ns.create({name:e,providers:[{provide:v_,useValue:"platform"},{provide:Ty,useValue:new Set([()=>ra=null])},...t]})}(a,i))}return function jU(t){const e=Ay();if(!e)throw new xe(401,!1);return e}()}}function Ay(){return ra?.get(uT)??null}let uT=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function dT(t,e){let n;return n="noop"===t?new NU:("zone.js"===t?void 0:t)||new Mn(e),n}(i?.ngZone,function hT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Mn,useValue:r}];return r.run(()=>{const o=Ns.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),l=a.injector.get(gc,null);if(!l)throw new xe(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:f=>{l.handleError(f)}});a.onDestroy(()=>{xp(this._modules,a),c.unsubscribe()})}),function fT(t,e,n){try{const i=n();return sp(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(yp);return c.runInitializers(),c.donePromise.then(()=>(function FD(t){Gi(t,"Expected localeId to be defined"),"string"==typeof t&&(kD=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(fo,Mc)||Mc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=pT({},i);return function FU(t,e,n){const i=new sy(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(wp);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new xe(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(Ty,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(_t(Ns))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function pT(t,e){return Array.isArray(e)?e.reduce(pT,t):{...t,...e}}let wp=(()=>{class t{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new U(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new U(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Mn.assertNotInAngularZone(),wy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Mn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=ut(s,o.pipe(Je()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof BE;if(!this._injector.get(yp).done)throw!r&&function Ho(t){const e=En(t)||_i(t)||Ci(t);return null!==e&&e.standalone}(n),new xe(405,false);let o;o=r?n:this._injector.get(fh).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function LU(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Rc),c=o.create(Ns.NULL,[],i||o.selector,a),f=c.location.nativeElement,g=c.injector.get(rT,null);return g?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),xp(this.components,c),g?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new xe(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;xp(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(QS,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>xp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new xe(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(_t(Mn),_t(ao),_t(gc))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let Iy=(()=>{class t{}return t.__NG_ELEMENT_ID__=HU,t})();function HU(t){return function GU(t,e,n){if(La(t)&&!n){const i=qi(t.index,e);return new gh(i,i)}return 47&t.type?new gh(e[16],e):null}(ui(),me(),16==(16&t))}class yT{constructor(){}supports(e){return vh(e)}create(e){return new qU(e)}}const YU=(t,e)=>e;class qU{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||YU}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<wT(i,r,s)?n:i,a=wT(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,f=l-r;if(c!=f){for(let v=0;v<c;v++){const _=v<s.length?s[v]:s[v]=0,y=_+v;f<=y&&y<c&&(s[v]=_+1)}s[o.previousIndex]=f-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!vh(e))throw new xe(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function mL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ya()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new KU(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new bT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class KU{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZU{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class bT{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new ZU,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function wT(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function ET(){return new Dp([new yT])}let Dp=(()=>{class t{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||ET()),deps:[[t,new rh,new ih]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new xe(901,!1)}}return t.\u0275prov=vt({token:t,providedIn:"root",factory:ET}),t})();const n3=lT(null,"core",[]);let i3=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(_t(wp))},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({}),t})(),ky=null;function sa(){return ky}class o3{}const Ji=new C("DocumentToken");let Fy=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return function a3(){return _t(DT)}()},providedIn:"platform"}),t})();const l3=new C("Location Initialized");let DT=(()=>{class t extends Fy{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return sa().getBaseHref(this._doc)}onPopState(n){const i=sa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=sa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){ST()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){ST()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(_t(Ji))},t.\u0275prov=vt({token:t,factory:function(){return function c3(){return new DT(_t(Ji))}()},providedIn:"platform"}),t})();function ST(){return!!window.history.pushState}function Ly(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function TT(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function go(t){return t&&"?"!==t[0]?"?"+t:t}let tl=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return cn(IT)},providedIn:"root"}),t})();const AT=new C("appBaseHref");let IT=(()=>{class t extends tl{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??cn(Ji).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Ly(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+go(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+go(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+go(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(_t(Fy),_t(AT,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),u3=(()=>{class t extends tl{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=Ly(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,s){let o=this.prepareExternalUrl(r+go(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){let o=this.prepareExternalUrl(r+go(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(_t(Fy),_t(AT,8))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),By=(()=>{class t{constructor(n){this._subject=new Gn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function f3(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(TT(MT(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+go(i))}normalize(n){return t.stripTrailingSlash(function d3(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._basePath,MT(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+go(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+go(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return t.normalizeQueryParams=go,t.joinWithSlash=Ly,t.stripTrailingSlash=TT,t.\u0275fac=function(n){return new(n||t)(_t(tl))},t.\u0275prov=vt({token:t,factory:function(){return function h3(){return new By(_t(tl))}()},providedIn:"root"}),t})();function MT(t){return t.replace(/\/index.html$/,"")}class J3{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let VT=(()=>{class t{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new J3(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),HT(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{HT(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return t.\u0275fac=function(n){return new(n||t)(We(Br),We(ho),We(Dp))},t.\u0275dir=Jn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function HT(t,e){t.context.$implicit=e.item}let Rj=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({}),t})();let kj=(()=>{class t{}return t.\u0275prov=vt({token:t,providedIn:"root",factory:()=>new Fj(_t(Ji),window)}),t})();class Fj{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function Lj(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=XT(this.window.history)||XT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function XT(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class hV extends o3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class eb extends hV{static makeCurrent(){!function s3(t){ky||(ky=t)}(new eb)}onAndCancel(e,n,i){return e.addEventListener(n,i,!1),()=>{e.removeEventListener(n,i,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function dV(){return Oh=Oh||document.querySelector("base"),Oh?Oh.getAttribute("href"):null}();return null==n?null:function fV(t){Fp=Fp||document.createElement("a"),Fp.setAttribute("href",t);const e=Fp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Oh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function K3(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Fp,Oh=null;const JT=new C("TRANSITION_ID"),gV=[{provide:_p,useFactory:function pV(t,e,n){return()=>{n.get(yp).donePromise.then(()=>{const i=sa(),r=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[JT,Ji,Ns],multi:!0}];let vV=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();const Lp=new C("EventManagerPlugins");let Bp=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(_t(Lp),_t(Mn))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();class e1{constructor(e){this._doc=e}addGlobalEventListener(e,n,i){const r=sa().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let t1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),Nh=(()=>{class t extends t1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(n1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(n1))}}return t.\u0275fac=function(n){return new(n||t)(_t(Ji))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function n1(t){sa().remove(t)}const tb={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},nb=/%COMP%/g;function ib(t,e){return e.flat(100).map(n=>n.replace(nb,t))}function s1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rb=(()=>{class t{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new sb(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case Rr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new EV(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case Rr.ShadowDom:return new CV(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=ib(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(_t(Bp),_t(Nh),_t(Ah))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();class sb{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(tb[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(a1(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(a1(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=tb[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=tb[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ir.DashCase|ir.Important)?e.style.setProperty(n,i,r&ir.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ir.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,s1(i)):this.eventManager.addEventListener(e,n,s1(i))}}function a1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class EV extends sb{constructor(e,n,i,r){super(e),this.component=i;const s=ib(r+"-"+i.id,i.styles);n.addStyles(s),this.contentAttr=function bV(t){return"_ngcontent-%COMP%".replace(nb,t)}(r+"-"+i.id),this.hostAttr=function wV(t){return"_nghost-%COMP%".replace(nb,t)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}class CV extends sb{constructor(e,n,i,r){super(e),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=ib(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let DV=(()=>{class t extends e1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return t.\u0275fac=function(n){return new(n||t)(_t(Ji))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();const l1=["alt","control","meta","shift"],SV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TV={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let AV=(()=>{class t extends e1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),o=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>sa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),l1.forEach(c=>{const f=i.indexOf(c);f>-1&&(i.splice(f,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(n,i){let r=SV[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),l1.forEach(o=>{o!==r&&(0,TV[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(_t(Ji))},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();const u1=[{provide:ZS,useValue:"browser"},{provide:KS,useValue:function IV(){eb.makeCurrent()},multi:!0},{provide:Ji,useFactory:function RV(){return function QN(t){l_=t}(document),document},deps:[]}],PV=lT(n3,"browser",u1),h1=new C(""),d1=[{provide:bp,useClass:class mV{addToWindow(e){In.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},In.getAllAngularTestabilities=()=>e.getAllTestabilities(),In.getAllAngularRootElements=()=>e.getAllRootElements(),In.frameworkStabilizers||(In.frameworkStabilizers=[]),In.frameworkStabilizers.push(i=>{const r=In.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?sa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:rT,useClass:Cy,deps:[Mn,Dy,bp]},{provide:Cy,useClass:Cy,deps:[Mn,Dy,bp]}],f1=[{provide:v_,useValue:"root"},{provide:gc,useFactory:function MV(){return new gc},deps:[]},{provide:Lp,useClass:DV,multi:!0,deps:[Ji,Mn,ZS]},{provide:Lp,useClass:AV,multi:!0,deps:[Ji]},{provide:rb,useClass:rb,deps:[Bp,Nh,Ah]},{provide:jE,useExisting:rb},{provide:t1,useExisting:Nh},{provide:Nh,useClass:Nh,deps:[Ji]},{provide:Bp,useClass:Bp,deps:[Lp,Mn]},{provide:class Bj{},useClass:vV,deps:[]},[]];let OV=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Ah,useValue:n.appId},{provide:JT,useExisting:Ah},gV]}}}return t.\u0275fac=function(n){return new(n||t)(_t(h1,12))},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({providers:[...f1,...d1],imports:[Rj,i3]}),t})(),p1=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(_t(Ji))},t.\u0275prov=vt({token:t,factory:function(n){let i=null;return i=n?new n:function kV(){return new p1(_t(Ji))}(),i},providedIn:"root"}),t})();function St(...t){return _e(t,bt(t))}typeof window<"u"&&window;class ds extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Up=mt(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:GV}=Array,{getPrototypeOf:zV,prototype:$V,keys:WV}=Object;const{isArray:qV}=Array;function v1(t){return ce(e=>function KV(t,e){return qV(e)?t(...e):t(e)}(t,e))}function lb(...t){const e=bt(t),n=function yt(t){return Ne(nt(t))?t.pop():void 0}(t),{args:i,keys:r}=function XV(t){if(1===t.length){const e=t[0];if(GV(e))return{args:e,keys:null};if(function YV(t){return t&&"object"==typeof t&&zV(t)===$V}(e)){const n=WV(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}(t);if(0===i.length)return _e([],e);const s=new U(function QV(t,e,n=fn){return i=>{_1(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)_1(e,()=>{const c=_e(t[l],e);let f=!1;c.subscribe(se(i,g=>{s[l]=g,f||(f=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function ZV(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}(r,o):fn));return n?s.pipe(v1(n)):s}function _1(t,e,n){t?F(n,t,e):e()}function cb(...t){return function JV(){return ne(1)}()(_e(t,bt(t)))}function y1(t){return new U(e=>{Ei(t()).subscribe(e)})}function kh(t,e){const n=Ne(t)?t:()=>t,i=r=>r.error(n());return new U(e?r=>e.schedule(i,0,r):i)}function ub(){return fe((t,e)=>{let n=null;t._refCount++;const i=se(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class b1 extends U{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,re(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pe;const n=this.getSubject();e.add(this.source.subscribe(se(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pe.EMPTY)}return e}refCount(){return ub()(this)}}function Us(t,e){return fe((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(se(i,l=>{r?.unsubscribe();let c=0;const f=s++;Ei(t(l,f)).subscribe(r=se(i,g=>i.next(e?e(l,g,f,c++):g),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function vo(t){return t<=0?()=>K:fe((e,n)=>{let i=0;e.subscribe(se(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function w1(...t){const e=bt(t);return fe((n,i)=>{(e?cb(t,n,e):cb(t,n)).subscribe(i)})}function ar(t,e){return fe((n,i)=>{let r=0;n.subscribe(se(i,s=>t.call(e,s,r++)&&i.next(s)))})}function jp(t){return fe((e,n)=>{let i=!1;e.subscribe(se(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function x1(t=eH){return fe((e,n)=>{let i=!1;e.subscribe(se(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function eH(){return new Up}function aa(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ar((r,s)=>t(r,s,i)):fn,vo(1),n?jp(e):x1(()=>new Up))}function nl(t,e){return Ne(e)?H(t,e,1):H(t,1)}function Fi(t,e,n){const i=Ne(t)||e||n?{next:t,error:e,complete:n}:t;return i?fe((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(se(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):fn}function la(t){return fe((e,n)=>{let s,i=null,r=!1;i=e.subscribe(se(n,void 0,void 0,o=>{s=Ei(t(o,la(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function E1(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(se(o,f=>{const g=c++;l=a?t(l,f,g):(a=!0,f),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function C1(t,e){return fe(E1(t,e,arguments.length>=2,!0))}function Vp(t){return t<=0?()=>K:fe((e,n)=>{let i=[];e.subscribe(se(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function D1(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ar((r,s)=>t(r,s,i)):fn,Vp(1),n?jp(e):x1(()=>new Up))}function hb(t){return fe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const nn="primary",Fh=Symbol("RouteTitle");class iH{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Nc(t){return new iH(t)}function rH(t,e,n){const i=n.path.split("/");if(i.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function js(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!S1(t[r],e[r]))return!1;return!0}function S1(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}return t===e}function T1(t){return Array.prototype.concat.apply([],t)}function A1(t){return t.length>0?t[t.length-1]:null}function Si(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ca(t){return BC(t)?t:sp(t)?_e(Promise.resolve(t)):St(t)}const Hp=!1,oH={exact:function R1(t,e,n){if(!rl(t.segments,e.segments)||!Gp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!t.children[i]||!R1(t.children[i],e.children[i],n))return!1;return!0},subset:P1},I1={exact:function aH(t,e){return js(t,e)},subset:function lH(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>S1(t[n],e[n]))},ignored:()=>!0};function M1(t,e,n){return oH[n.paths](t.root,e.root,n.matrixParams)&&I1[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function P1(t,e,n){return O1(t,e,e.segments,n)}function O1(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!rl(r,n)||e.hasChildren()||!Gp(r,n,i))}if(t.segments.length===n.length){if(!rl(t.segments,n)||!Gp(t.segments,n,i))return!1;for(const r in e.children)if(!t.children[r]||!P1(t.children[r],e.children[r],i))return!1;return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(rl(t.segments,r)&&Gp(t.segments,r,i)&&t.children[nn])&&O1(t.children[nn],e,s,i)}}function Gp(t,e,n){return e.every((i,r)=>I1[n](t[r].parameters,i.parameters))}class il{constructor(e=new rn([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nc(this.queryParams)),this._queryParamMap}toString(){return hH.serialize(this)}}class rn{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Si(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zp(this)}}class Lh{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Nc(this.parameters)),this._parameterMap}toString(){return F1(this)}}function rl(t,e){return t.length===e.length&&t.every((n,i)=>n.path===e[i].path)}let Bh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return new db},providedIn:"root"}),t})();class db{parse(e){const n=new bH(e);return new il(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Uh(e.root,!0)}`,i=function pH(t){const e=Object.keys(t).map(n=>{const i=t[n];return Array.isArray(i)?i.map(r=>`${$p(n)}=${$p(r)}`).join("&"):`${$p(n)}=${$p(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${i}${"string"==typeof e.fragment?`#${function dH(t){return encodeURI(t)}(e.fragment)}`:""}`}}const hH=new db;function zp(t){return t.segments.map(e=>F1(e)).join("/")}function Uh(t,e){if(!t.hasChildren())return zp(t);if(e){const n=t.children[nn]?Uh(t.children[nn],!1):"",i=[];return Si(t.children,(r,s)=>{s!==nn&&i.push(`${s}:${Uh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function uH(t,e){let n=[];return Si(t.children,(i,r)=>{r===nn&&(n=n.concat(e(i,r)))}),Si(t.children,(i,r)=>{r!==nn&&(n=n.concat(e(i,r)))}),n}(t,(i,r)=>r===nn?[Uh(t.children[nn],!1)]:[`${r}:${Uh(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[nn]?`${zp(t)}/${n[0]}`:`${zp(t)}/(${n.join("//")})`}}function N1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $p(t){return N1(t).replace(/%3B/gi,";")}function fb(t){return N1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Wp(t){return decodeURIComponent(t)}function k1(t){return Wp(t.replace(/\+/g,"%20"))}function F1(t){return`${fb(t.path)}${function fH(t){return Object.keys(t).map(e=>`;${fb(e)}=${fb(t[e])}`).join("")}(t.parameters)}`}const gH=/^[^\/()?;=#]+/;function Xp(t){const e=t.match(gH);return e?e[0]:""}const mH=/^[^=?&#]+/,_H=/^[^&#]+/;class bH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new rn([],{}):new rn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[nn]=new rn(e,n)),i}parseSegment(){const e=Xp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new xe(4009,Hp);return this.capture(e),new Lh(Wp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Xp(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=Xp(this.remaining);r&&(i=r,this.capture(i))}e[Wp(n)]=Wp(i)}parseQueryParam(e){const n=function vH(t){const e=t.match(mH);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=function yH(t){const e=t.match(_H);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=k1(n),s=k1(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Xp(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new xe(4010,Hp);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=nn);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[nn]:new rn([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new xe(4011,Hp)}}function pb(t){return t.segments.length>0?new rn([],{[nn]:t}):t}function Yp(t){const e={};for(const i of Object.keys(t.children)){const s=Yp(t.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function wH(t){if(1===t.numberOfChildren&&t.children[nn]){const e=t.children[nn];return new rn(t.segments.concat(e.segments),e.children)}return t}(new rn(t.segments,e))}function sl(t){return t instanceof il}function CH(t,e,n,i,r){if(0===n.length)return kc(e.root,e.root,e.root,i,r);const s=function U1(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new B1(!0,0,t);let e=0,n=!1;const i=t.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Si(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new B1(n,e,i)}(n);return s.toRoot()?kc(e.root,e.root,new rn([],{}),i,r):function o(l){const c=function SH(t,e,n,i){if(t.isAbsolute)return new Fc(e.root,!0,0);if(-1===i)return new Fc(n,n===e.root,0);return function j1(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new xe(4005,!1);r=i.segments.length}return new Fc(i,!1,r-s)}(n,i+(jh(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,l),f=c.processChildren?Hh(c.segmentGroup,c.index,s.commands):mb(c.segmentGroup,c.index,s.commands);return kc(e.root,c.segmentGroup,f,i,r)}(t.snapshot?._lastPathIndex)}function jh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Vh(t){return"object"==typeof t&&null!=t&&t.outlets}function kc(t,e,n,i,r){let o,s={};i&&Si(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=t===e?n:L1(t,e,n);const a=pb(Yp(o));return new il(a,s,r)}function L1(t,e,n){const i={};return Si(t.children,(r,s)=>{i[s]=r===e?n:L1(r,e,n)}),new rn(t.segments,i)}class B1{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&jh(i[0]))throw new xe(4003,!1);const r=i.find(Vh);if(r&&r!==A1(i))throw new xe(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fc{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}}function mb(t,e,n){if(t||(t=new rn([],{})),0===t.segments.length&&t.hasChildren())return Hh(t,e,n);const i=function AH(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const o=t.segments[r],a=n[i];if(Vh(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!H1(l,c,o))return s;i+=2}else{if(!H1(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new rn(t.segments.slice(0,i.pathIndex),{});return s.children[nn]=new rn(t.segments.slice(i.pathIndex),t.children),Hh(s,0,r)}return i.match&&0===r.length?new rn(t.segments,{}):i.match&&!t.hasChildren()?vb(t,e,n):i.match?Hh(t,0,r):vb(t,e,n)}function Hh(t,e,n){if(0===n.length)return new rn(t.segments,{});{const i=function TH(t){return Vh(t[0])?t[0].outlets:{[nn]:t}}(n),r={};return Si(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=mb(t.children[o],e,s))}),Si(t.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new rn(t.segments,r)}}function vb(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(Vh(s)){const l=IH(s.outlets);return new rn(i,l)}if(0===r&&jh(n[0])){i.push(new Lh(t.segments[e].path,V1(n[0]))),r++;continue}const o=Vh(s)?s.outlets[nn]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&jh(a)?(i.push(new Lh(o,V1(a))),r+=2):(i.push(new Lh(o,{})),r++)}return new rn(i,{})}function IH(t){const e={};return Si(t,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[i]=vb(new rn([],{}),0,n))}),e}function V1(t){const e={};return Si(t,(n,i)=>e[i]=`${n}`),e}function H1(t,e,n){return t==n.path&&js(e,n.parameters)}class _o{constructor(e,n){this.id=e,this.url=n}}class _b extends _o{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ol extends _o{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qp extends _o{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class G1 extends _o{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class MH extends _o{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class RH extends _o{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class PH extends _o{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class OH extends _o{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class NH extends _o{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class kH{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class FH{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class LH{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class BH{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UH{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jH{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class z1{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let HH=(()=>{class t{createUrlTree(n,i,r,s,o,a){return CH(n||i.root,r,s,o,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})(),GH=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(e){return HH.\u0275fac(e)},providedIn:"root"}),t})();class $1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=yb(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){const n=yb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=bb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return bb(e,this._root).map(n=>n.value)}}function yb(t,e){if(t===e.value)return e;for(const n of e.children){const i=yb(t,n);if(i)return i}return null}function bb(t,e){if(t===e.value)return[e];for(const n of e.children){const i=bb(t,n);if(i.length)return i.unshift(e),i}return[]}class yo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Lc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class W1 extends $1{constructor(e,n){super(e),this.snapshot=n,wb(this,e)}toString(){return this.snapshot.toString()}}function X1(t,e){const n=function zH(t,e){const o=new Kp([],{},{},"",{},nn,e,null,t.root,-1,{});return new q1("",new yo(o,[]))}(t,e),i=new ds([new Lh("",{})]),r=new ds({}),s=new ds({}),o=new ds({}),a=new ds(""),l=new Bc(i,r,o,a,s,nn,e,n.root);return l.snapshot=n.root,new W1(new yo(l,[]),n)}class Bc{constructor(e,n,i,r,s,o,a,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(ce(c=>c[Fh]))??St(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ce(e=>Nc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ce(e=>Nc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Y1(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const r=n[i],s=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function $H(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Kp{constructor(e,n,i,r,s,o,a,l,c,f,g){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=f,this._resolve=g}get title(){return this.data?.[Fh]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Nc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Nc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class q1 extends $1{constructor(e,n){super(n),this.url=e,wb(this,n)}toString(){return K1(this._root)}}function wb(t,e){e.value._routerState=t,e.children.forEach(n=>wb(t,n))}function K1(t){const e=t.children.length>0?` { ${t.children.map(K1).join(", ")} } `:"";return`${t.value}${e}`}function xb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,js(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),js(e.params,n.params)||t.params.next(n.params),function sH(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!js(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),js(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Eb(t,e){const n=js(t.params,e.params)&&function cH(t,e){return rl(t,e)&&t.every((n,i)=>js(n.parameters,e[i].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Eb(t.parent,e.parent))}function Gh(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function XH(t,e,n){return e.children.map(i=>{for(const r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Gh(t,i,r);return Gh(t,i)})}(t,e,n);return new yo(i,r)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Gh(t,a)),o}}const i=function YH(t){return new Bc(new ds(t.url),new ds(t.params),new ds(t.queryParams),new ds(t.fragment),new ds(t.data),t.outlet,t.component,t)}(e.value),r=e.children.map(s=>Gh(t,s));return new yo(i,r)}}const Cb="ngNavigationCancelingError";function Z1(t,e){const{redirectTo:n,navigationBehaviorOptions:i}=sl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Q1(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function Q1(t,e,n){const i=new Error("NavigationCancelingError: "+(t||""));return i[Cb]=!0,i.cancellationCode=e,n&&(i.url=n),i}function J1(t){return eA(t)&&sl(t.url)}function eA(t){return t&&t[Cb]}class qH{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new zh,this.attachRef=null}}let zh=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new qH,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Zp=!1;let tA=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=nn,this.activateEvents=new Gn,this.deactivateEvents=new Gn,this.attachEvents=new Gn,this.detachEvents=new Gn,this.parentContexts=cn(zh),this.location=cn(Br),this.changeDetector=cn(Iy),this.environmentInjector=cn(ao)}ngOnChanges(n){if(n.name){const{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new xe(4012,Zp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new xe(4012,Zp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new xe(4012,Zp);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new xe(4013,Zp);this._activatedRoute=n;const r=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new KH(n,a,r.injector);if(i&&function ZH(t){return!!t.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Jn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rs]}),t})();class KH{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Bc?this.route:e===zh?this.childContexts:this.parent.get(e,n)}}let Db=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Jr({type:t,selectors:[["ng-component"]],standalone:!0,features:[cS],decls:1,vars:0,template:function(n,i){1&n&&os(0,"router-outlet")},dependencies:[tA],encapsulation:2}),t})();function nA(t,e){return t.providers&&!t._injector&&(t._injector=dp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Tb(t){const e=t.children&&t.children.map(Tb),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nn&&(n.component=Db),n}function Vr(t){return t.outlet||nn}function iA(t,e){const n=t.filter(i=>Vr(i)===e);return n.push(...t.filter(i=>Vr(i)!==e)),n}function $h(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class n5{constructor(e,n,i,r){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(e){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),xb(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){const r=Lc(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Si(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Lc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Lc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,n,i){const r=Lc(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new jH(s.value.snapshot))}),e.children.length&&this.forwardEvent(new BH(e.value.snapshot))}activateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(xb(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),xb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=$h(r.snapshot),l=a?.get(fh)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class rA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Qp{constructor(e,n){this.component=e,this.route=n}}function i5(t,e,n){const i=t._root;return Wh(i,e?e._root:null,n,[i.value])}function Uc(t,e){const n=Symbol(),i=e.get(t,n);return i===n?"function"!=typeof t||function Vm(t){return null!==Ul(t)}(t)?e.get(t):t:i}function Wh(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Lc(e);return t.children.forEach(o=>{(function s5(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function o5(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rl(t.url,e.url)||!js(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Eb(t,e)||!js(t.queryParams,e.queryParams);default:return!Eb(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new rA(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Wh(t,e,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Qp(a.outlet.component,o))}else o&&Xh(e,a,r),r.canActivateChecks.push(new rA(i)),Wh(t,null,s.component?a?a.children:null:n,i,r)})(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Si(s,(o,a)=>Xh(o,n.getContext(a),r)),r}function Xh(t,e,n){const i=Lc(t),r=t.value;Si(i,(s,o)=>{Xh(s,r.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new Qp(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Yh(t){return"function"==typeof t}function Ab(t){return t instanceof Up||"EmptyError"===t?.name}const Jp=Symbol("INITIAL_VALUE");function jc(){return Us(t=>lb(t.map(e=>e.pipe(vo(1),w1(Jp)))).pipe(ce(e=>{for(const n of e)if(!0!==n){if(n===Jp)return Jp;if(!1===n||n instanceof il)return n}return!0}),ar(e=>e!==Jp),vo(1)))}function sA(t){return function N(...t){return $(t)}(Fi(e=>{if(sl(e))throw Z1(0,e)}),ce(e=>!0===e))}const Ib={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function oA(t,e,n,i,r){const s=Mb(t,e,n);return s.matched?function E5(t,e,n,i){const r=e.canMatch;return r&&0!==r.length?St(r.map(o=>{const a=Uc(o,t);return ca(function d5(t){return t&&Yh(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(jc(),sA()):St(!0)}(i=nA(e,i),e,n).pipe(ce(o=>!0===o?s:{...Ib})):St(s)}function Mb(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Ib}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(e.matcher||rH)(n,t,e);if(!r)return{...Ib};const s={};Si(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function eg(t,e,n,i){if(n.length>0&&function S5(t,e,n){return n.some(i=>tg(t,e,i)&&Vr(i)!==nn)}(t,n,i)){const s=new rn(e,function D5(t,e,n,i){const r={};r[nn]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Vr(s)!==nn){const o=new rn([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,r[Vr(s)]=o}return r}(t,e,i,new rn(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function T5(t,e,n){return n.some(i=>tg(t,e,i))}(t,n,i)){const s=new rn(t.segments,function C5(t,e,n,i,r){const s={};for(const o of i)if(tg(t,n,o)&&!r[Vr(o)]){const a=new rn([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,s[Vr(o)]=a}return{...r,...s}}(t,e,n,i,t.children));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const r=new rn(t.segments,t.children);return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:n}}function tg(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function aA(t,e,n,i){return!!(Vr(t)===i||i!==nn&&tg(e,n,t))&&("**"===t.path||Mb(e,t,n).matched)}function lA(t,e,n){return 0===e.length&&!t.children[n]}const ng=!1;class ig{constructor(e){this.segmentGroup=e||null}}class cA{constructor(e){this.urlTree=e}}function qh(t){return kh(new ig(t))}function uA(t){return kh(new cA(t))}class R5{constructor(e,n,i,r,s){this.injector=e,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=eg(this.urlTree.root,[],[],this.config).segmentGroup,n=new rn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,nn).pipe(ce(s=>this.createUrlTree(Yp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(la(s=>{if(s instanceof cA)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ig?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,nn).pipe(ce(r=>this.createUrlTree(Yp(r),e.queryParams,e.fragment))).pipe(la(r=>{throw r instanceof ig?this.noMatchError(r):r}))}noMatchError(e){return new xe(4002,ng)}createUrlTree(e,n,i){const r=pb(e);return new il(r,n,i)}expandSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,n,i).pipe(ce(s=>new rn([],s))):this.expandSegment(e,i,n,i.segments,r,!0)}expandChildren(e,n,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return _e(r).pipe(nl(s=>{const o=i.children[s],a=iA(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(ce(l=>({segment:l,outlet:s})))}),C1((s,o)=>(s[o.outlet]=o.segment,s),{}),D1())}expandSegment(e,n,i,r,s,o){return _e(i).pipe(nl(a=>this.expandSegmentAgainstRoute(e,n,i,a,r,s,o).pipe(la(c=>{if(c instanceof ig)return St(null);throw c}))),aa(a=>!!a),la((a,l)=>{if(Ab(a))return lA(n,r,s)?St(new rn([],{})):qh(n);throw a}))}expandSegmentAgainstRoute(e,n,i,r,s,o,a){return aA(r,n,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,n,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o):qh(n):qh(n)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?uA(s):this.lineralizeSegments(i,s).pipe(H(o=>{const a=new rn(o,{});return this.expandSegment(e,a,n,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:f}=Mb(n,r,s);if(!a)return qh(n);const g=this.applyRedirectCommands(l,r.redirectTo,f);return r.redirectTo.startsWith("/")?uA(g):this.lineralizeSegments(r,g).pipe(H(v=>this.expandSegment(e,n,i,v.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){return"**"===i.path?(e=nA(i,e),i.loadChildren?(i._loadedRoutes?St({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(ce(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new rn(r,{})))):St(new rn(r,{}))):oA(n,i,r,e).pipe(Us(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(H(f=>{const g=f.injector??e,v=f.routes,{segmentGroup:_,slicedSegments:y}=eg(n,a,l,v),E=new rn(_.segments,_.children);if(0===y.length&&E.hasChildren())return this.expandChildren(g,v,E).pipe(ce(I=>new rn(a,I)));if(0===v.length&&0===y.length)return St(new rn(a,{}));const S=Vr(i)===s;return this.expandSegment(g,E,v,y,S?nn:s,!0).pipe(ce(M=>new rn(a.concat(M.segments),M.children)))})):qh(n)))}getChildConfig(e,n,i){return n.children?St({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?St({routes:n._loadedRoutes,injector:n._loadedInjector}):function x5(t,e,n,i){const r=e.canLoad;return void 0===r||0===r.length?St(!0):St(r.map(o=>{const a=Uc(o,t);return ca(function l5(t){return t&&Yh(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(jc(),sA())}(e,n,i).pipe(H(r=>r?this.configLoader.loadChildren(e,n).pipe(Fi(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function I5(t){return kh(Q1(ng,3))}())):St({routes:[],injector:e})}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return St(i);if(r.numberOfChildren>1||!r.children[nn])return kh(new xe(4e3,ng));r=r.children[nn]}}applyRedirectCommands(e,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i)}applyRedirectCreateUrlTree(e,n,i,r){const s=this.createSegmentGroup(e,n.root,i,r);return new il(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const i={};return Si(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(e,n,i,r){const s=this.createSegments(e,n.segments,i,r);let o={};return Si(n.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new rn(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){const r=i[n.path.substring(1)];if(!r)throw new xe(4001,ng);return r}findOrReturn(e,n){let i=0;for(const r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}}class O5{}class F5{constructor(e,n,i,r,s,o,a){this.injector=e,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=eg(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nn).pipe(ce(n=>{if(null===n)return null;const i=new Kp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new yo(i,n),s=new q1(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,i=Y1(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r)}processChildren(e,n,i){return _e(Object.keys(i.children)).pipe(nl(r=>{const s=i.children[r],o=iA(n,r);return this.processSegmentGroup(e,o,s,r)}),C1((r,s)=>r&&s?(r.push(...s),r):null),function tH(t,e=!1){return fe((n,i)=>{let r=0;n.subscribe(se(i,s=>{const o=t(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),jp(null),D1(),ce(r=>{if(null===r)return null;const s=dA(r);return function L5(t){t.sort((e,n)=>e.value.outlet===nn?-1:n.value.outlet===nn?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,i,r,s){return _e(n).pipe(nl(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),aa(o=>!!o),la(o=>{if(Ab(o))return lA(i,r,s)?St([]):St(null);throw o}))}processSegmentAgainstRoute(e,n,i,r,s){if(n.redirectTo||!aA(n,i,r,s))return St(null);let o;if("**"===n.path){const a=r.length>0?A1(r).parameters:{},l=pA(i)+r.length;o=St({snapshot:new Kp(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gA(n),Vr(n),n.component??n._loadedComponent??null,n,fA(i),l,mA(n)),consumedSegments:[],remainingSegments:[]})}else o=oA(i,n,r,e).pipe(ce(({matched:a,consumedSegments:l,remainingSegments:c,parameters:f})=>{if(!a)return null;const g=pA(i)+l.length;return{snapshot:new Kp(l,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,gA(n),Vr(n),n.component??n._loadedComponent??null,n,fA(i),g,mA(n)),consumedSegments:l,remainingSegments:c}}));return o.pipe(Us(a=>{if(null===a)return St(null);const{snapshot:l,consumedSegments:c,remainingSegments:f}=a;e=n._injector??e;const g=n._loadedInjector??e,v=function B5(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:_,slicedSegments:y}=eg(i,c,f,v.filter(S=>void 0===S.redirectTo));if(0===y.length&&_.hasChildren())return this.processChildren(g,v,_).pipe(ce(S=>null===S?null:[new yo(l,S)]));if(0===v.length&&0===y.length)return St([new yo(l,[])]);const E=Vr(n)===s;return this.processSegment(g,v,_,y,E?nn:s).pipe(ce(S=>null===S?null:[new yo(l,S)]))}))}}function U5(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function dA(t){const e=[],n=new Set;for(const i of t){if(!U5(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):e.push(i)}for(const i of n){const r=dA(i.children);e.push(new yo(i.value,r))}return e.filter(i=>!n.has(i))}function fA(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function pA(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function gA(t){return t.data||{}}function mA(t){return t.resolve||{}}function vA(t){return"string"==typeof t.title||null===t.title}function Rb(t){return Us(e=>{const n=t(e);return n?_e(n).pipe(ce(()=>e)):St(e)})}const Vc=new C("ROUTES");let Pb=(()=>{class t{constructor(n,i){this.injector=n,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return St(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=ca(n.loadComponent()).pipe(ce(yA),Fi(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),hb(()=>{this.componentLoaders.delete(n)})),r=new b1(i,()=>new z).pipe(ub());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return St({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ce(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,f=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=T1(l.get(Vc,[],wt.Self|wt.Optional)));return{routes:c.map(Tb),injector:l}}),hb(()=>{this.childrenLoaders.delete(i)})),o=new b1(s,()=>new z).pipe(ub());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(n){return ca(n()).pipe(ce(yA),H(r=>r instanceof aS||Array.isArray(r)?St(r):_e(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(_t(Ns),_t(JS))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function yA(t){return function Y5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Ob=(()=>{class t{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new z,this.configLoader=cn(Pb),this.environmentInjector=cn(ao),this.urlSerializer=cn(Bh),this.rootContexts=cn(zh),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new FH(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new kH(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(n){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:i})}setupNavigations(n){return this.transitions=new ds({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ar(i=>0!==i.id),ce(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),Us(i=>{let r=!1,s=!1;return St(i).pipe(Fi(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Us(o=>{const a=n.browserUrlTree.toString(),l=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(("reload"===n.onSameUrlNavigation||l)&&n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return wA(o.source)&&(n.browserUrlTree=o.extractedUrl),St(o).pipe(Us(f=>{const g=this.transitions?.getValue();return this.events.next(new _b(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?K:Promise.resolve(f)}),function P5(t,e,n,i){return Us(r=>function M5(t,e,n,i,r){return new R5(t,e,n,i,r).apply()}(t,e,n,r.extractedUrl,i).pipe(ce(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Fi(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},i.urlAfterRedirects=f.urlAfterRedirects}),function V5(t,e,n,i,r){return H(s=>function k5(t,e,n,i,r,s,o="emptyOnly"){return new F5(t,e,n,i,r,o,s).recognize().pipe(Us(a=>null===a?function N5(t){return new U(e=>e.error(t))}(new O5):St(a)))}(t,e,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(ce(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,n.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Fi(f=>{if(i.targetSnapshot=f.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!f.extras.skipLocationChange){const v=n.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);n.setBrowserUrl(v,f)}n.browserUrlTree=f.urlAfterRedirects}const g=new MH(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:g,extractedUrl:v,source:_,restoredState:y,extras:E}=o,S=new _b(g,this.urlSerializer.serialize(v),_,y);this.events.next(S);const T=X1(v,n.rootComponentType).snapshot;return St(i={...o,targetSnapshot:T,urlAfterRedirects:v,extras:{...E,skipLocationChange:!1,replaceUrl:!1}})}return n.rawUrlTree=o.rawUrl,o.resolve(null),K}),Fi(o=>{const a=new RH(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ce(o=>i={...o,guards:i5(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function p5(t,e){return H(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?St({...n,guardsResult:!0}):function g5(t,e,n,i){return _e(t).pipe(H(r=>function w5(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?St(s.map(a=>{const l=$h(e)??r,c=Uc(a,l);return ca(function h5(t){return t&&Yh(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,i):l.runInContext(()=>c(t,e,n,i))).pipe(aa())})).pipe(jc()):St(!0)}(r.component,r.route,n,e,i)),aa(r=>!0!==r,!0))}(o,i,r,t).pipe(H(a=>a&&function a5(t){return"boolean"==typeof t}(a)?function m5(t,e,n,i){return _e(e).pipe(nl(r=>cb(function _5(t,e){return null!==t&&e&&e(new LH(t)),St(!0)}(r.route.parent,i),function v5(t,e){return null!==t&&e&&e(new UH(t)),St(!0)}(r.route,i),function b5(t,e,n){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function r5(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>y1(()=>St(o.guards.map(l=>{const c=$h(o.node)??n,f=Uc(l,c);return ca(function u5(t){return t&&Yh(t.canActivateChild)}(f)?f.canActivateChild(i,t):c.runInContext(()=>f(i,t))).pipe(aa())})).pipe(jc())));return St(s).pipe(jc())}(t,r.path,n),function y5(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return St(!0);const r=i.map(s=>y1(()=>{const o=$h(e)??n,a=Uc(s,o);return ca(function c5(t){return t&&Yh(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(aa())}));return St(r).pipe(jc())}(t,r.route,n))),aa(r=>!0!==r,!0))}(i,s,t,e):St(a)),ce(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Fi(o=>{if(i.guardsResult=o.guardsResult,sl(o.guardsResult))throw Z1(0,o.guardsResult);const a=new PH(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ar(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3,n),!1)),Rb(o=>{if(o.guards.canActivateChecks.length)return St(o).pipe(Fi(a=>{const l=new OH(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Us(a=>{let l=!1;return St(a).pipe(function H5(t,e){return H(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return St(n);let s=0;return _e(r).pipe(nl(o=>function G5(t,e,n,i){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!vA(r)&&(s[Fh]=r.title),function z5(t,e,n,i){const r=function $5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return St({});const s={};return _e(r).pipe(H(o=>function W5(t,e,n,i){const r=$h(e)??i,s=Uc(t,r);return ca(s.resolve?s.resolve(e,n):r.runInContext(()=>s(e,n)))}(t[o],e,n,i).pipe(aa(),Fi(a=>{s[o]=a}))),Vp(1),function nH(t){return ce(()=>t)}(s),la(o=>Ab(o)?K:kh(o)))}(s,t,e,i).pipe(ce(o=>(t._resolvedData=o,t.data=Y1(t,n).resolve,r&&vA(r)&&(t.data[Fh]=r.title),null)))}(o.route,i,t,e)),Fi(()=>s++),Vp(1),H(o=>s===r.length?St(n):K))})}(n.paramsInheritanceStrategy,this.environmentInjector),Fi({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2,n))}}))}),Fi(a=>{const l=new NH(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Rb(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Fi(f=>{l.component=f}),ce(()=>{})));for(const f of l.children)c.push(...a(f));return c};return lb(a(o.targetSnapshot.root)).pipe(jp(),vo(1))}),Rb(()=>n.afterPreactivation()),ce(o=>{const a=function WH(t,e,n){const i=Gh(t,e._root,n?n._root:void 0);return new W1(i,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Fi(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n)=>ce(i=>(new n5(e,i.targetRouterState,i.currentRouterState,n).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),Fi({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new ol(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),hb(()=>{r||s||this.cancelNavigationTransition(i,"",1,n),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),la(o=>{if(s=!0,eA(o)){J1(o)||(n.navigated=!0,n.restoreHistory(i,!0));const a=new qp(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),J1(o)){const l=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||wA(i.source)};n.scheduleNavigation(l,"imperative",null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{n.restoreHistory(i,!0);const a=new G1(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(n.errorHandler(o))}catch(l){i.reject(l)}}return K}))}))}cancelNavigationTransition(n,i,r,s){const o=new qp(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function wA(t){return"imperative"!==t}let xA=(()=>{class t{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===nn);return i}getResolvedTitleForRoute(n){return n.data[Fh]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return cn(q5)},providedIn:"root"}),t})(),q5=(()=>{class t extends xA{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(n){return new(n||t)(_t(p1))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),K5=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return cn(Q5)},providedIn:"root"}),t})();class Z5{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let Q5=(()=>{class t extends Z5{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=function eh(t){return Is(()=>{const e=t.prototype.constructor,n=e[Qr]||Fn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Qr]||Fn(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(t)))(i||t)}}(),t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rg=new C("",{providedIn:"root",factory:()=>({})});let eG=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:function(){return cn(tG)},providedIn:"root"}),t})(),tG=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nG(t){throw t}function iG(t,e,n){return e.parse("/")}const rG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},sG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Cr=(()=>{class t{constructor(){this.disposed=!1,this.currentPageId=0,this.console=cn(EU),this.isNgZoneEnabled=!1,this.options=cn(rg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||nG,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||iG,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>St(void 0),this.urlHandlingStrategy=cn(eG),this.routeReuseStrategy=cn(K5),this.urlCreationStrategy=cn(GH),this.titleStrategy=cn(xA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=T1(cn(Vc,{optional:!0})??[]),this.navigationTransitions=cn(Ob),this.urlSerializer=cn(Bh),this.location=cn(By),this.rootComponentType=null,this.isNgZoneEnabled=cn(Mn)instanceof Mn&&Mn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new il,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=X1(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(n.state){const a={...n.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(n.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Tb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,n,f,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=sl(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function oG(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new xe(4008,!1)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...rG}:!1===i?{...sG}:i,sl(n))return M1(this.currentUrlTree,n,r);const s=this.parseUrl(n);return M1(this.currentUrlTree,s,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const s=n[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(n,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,f;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((g,v)=>{a=g,l=v}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.navigationTransitions.handleNavigationRequest({targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(g=>Promise.reject(g))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class CA{}let cG=(()=>{class t{constructor(n,i,r,s,o){this.router=n,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ar(n=>n instanceof ol),nl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=dp(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return _e(r).pipe(ne())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):St(null);const s=r.pipe(H(o=>null===o?St(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return i.loadComponent&&!i._loadedComponent?_e([s,this.loader.loadComponent(i)]).pipe(ne()):s})}}return t.\u0275fac=function(n){return new(n||t)(_t(Cr),_t(JS),_t(ao),_t(CA),_t(Pb))},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kb=new C("");let DA=(()=>{class t{constructor(n,i,r,s,o={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof _b?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ol&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof z1&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new z1(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function sC(){throw new Error("invalid")}()},t.\u0275prov=vt({token:t,factory:t.\u0275fac}),t})();function Gc(t,e){return{\u0275kind:t,\u0275providers:e}}function TA(){const t=cn(Ns);return e=>{const n=t.get(wp);if(e!==n.components[0])return;const i=t.get(Cr),r=t.get(AA);1===t.get(Lb)&&i.initialNavigation(),t.get(IA,null,wt.Optional)?.setUpPreloading(),t.get(kb,null,wt.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const AA=new C("",{factory:()=>new z}),Lb=new C("",{providedIn:"root",factory:()=>1});const IA=new C("");function pG(t){return Gc(0,[{provide:IA,useExisting:cG},{provide:CA,useExisting:t}])}const MA=new C("ROUTER_FORROOT_GUARD"),gG=[By,{provide:Bh,useClass:db},Cr,zh,{provide:Bc,useFactory:function SA(t){return t.routerState.root},deps:[Cr]},Pb,[]];function mG(){return new oT("Router",Cr)}let RA=(()=>{class t{constructor(n){}static forRoot(n,i){return{ngModule:t,providers:[gG,[],{provide:Vc,multi:!0,useValue:n},{provide:MA,useFactory:bG,deps:[[Cr,new ih,new rh]]},{provide:rg,useValue:i||{}},i?.useHash?{provide:tl,useClass:u3}:{provide:tl,useClass:IT},{provide:kb,useFactory:()=>{const t=cn(kj),e=cn(Mn),n=cn(rg),i=cn(Ob),r=cn(Bh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new DA(r,i,t,e,n)}},i?.preloadingStrategy?pG(i.preloadingStrategy).\u0275providers:[],{provide:oT,multi:!0,useFactory:mG},i?.initialNavigation?wG(i):[],[{provide:PA,useFactory:TA},{provide:QS,multi:!0,useExisting:PA}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Vc,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(_t(MA,8))},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({imports:[Db]}),t})();function bG(t){return"guarded"}function wG(t){return["disabled"===t.initialNavigation?Gc(3,[{provide:_p,multi:!0,useFactory:()=>{const e=cn(Cr);return()=>{e.setUpLocationChangeListener()}}},{provide:Lb,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?Gc(2,[{provide:Lb,useValue:0},{provide:_p,multi:!0,deps:[Ns],useFactory:e=>{const n=e.get(l3,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const s=e.get(Cr),o=e.get(AA);(function i(r){e.get(Cr).events.pipe(ar(o=>o instanceof ol||o instanceof qp||o instanceof G1),ce(o=>o instanceof ol||o instanceof qp&&(0===o.code||1===o.code)&&null),ar(o=>null!==o),vo(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?St(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const PA=new C("");class zc{}zc.\u0275fac=function(e){return new(e||zc)},zc.\u0275mod=Pr({type:zc}),zc.\u0275inj=zi({imports:[RA.forRoot([]),RA]});var al=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(al||{}),Bb=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Bb||{}),Tt=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Tt||{}),Vs=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Vs||{}),Me=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Me||{}),$c=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))($c||{}),xt=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(xt||{}),Ub=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Ub||{}),bo=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(bo||{}),ua=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(ua||{}),Hs=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Hs||{}),fs=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(fs||{}),Gs=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Gs||{}),jb=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(jb||{}),Hr=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Hr||{}),gi=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(gi||{}),ai=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(ai||{}),zs=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(zs||{});const SG={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};var Vb=/iPhone/i,OA=/iPod/i,NA=/iPad/i,kA=/\biOS-universal(?:.+)Mac\b/i,Hb=/\bAndroid(?:.+)Mobile\b/i,FA=/Android/i,Wc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,sg=/Silk/i,wo=/Windows Phone/i,LA=/\bWindows(?:.+)ARM\b/i,BA=/BlackBerry/i,UA=/BB10/i,jA=/Opera Mini/i,VA=/\b(CriOS|Chrome)(?:.+)Mobile/i,HA=/Mobile(?:.+)Firefox\b/i,GA=function(t){return typeof t<"u"&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&typeof MSStream>"u"};const xo=function AG(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,i=n.split("[FBAN");typeof i[1]<"u"&&(n=i[0]),typeof(i=n.split("Twitter"))[1]<"u"&&(n=i[0]);var r=function TG(t){return function(e){return e.test(t)}}(n),s={apple:{phone:r(Vb)&&!r(wo),ipod:r(OA),tablet:!r(Vb)&&(r(NA)||GA(e))&&!r(wo),universal:r(kA),device:(r(Vb)||r(OA)||r(NA)||r(kA)||GA(e))&&!r(wo)},amazon:{phone:r(Wc),tablet:!r(Wc)&&r(sg),device:r(Wc)||r(sg)},android:{phone:!r(wo)&&r(Wc)||!r(wo)&&r(Hb),tablet:!r(wo)&&!r(Wc)&&!r(Hb)&&(r(sg)||r(FA)),device:!r(wo)&&(r(Wc)||r(sg)||r(Hb)||r(FA))||r(/\bokhttp\b/i)},windows:{phone:r(wo),tablet:r(LA),device:r(wo)||r(LA)},other:{blackberry:r(BA),blackberry10:r(UA),opera:r(jA),firefox:r(HA),chrome:r(VA),device:r(BA)||r(UA)||r(jA)||r(HA)||r(VA)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator),De={ADAPTER:SG,MIPMAP_TEXTURES:Hs.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ai.NONE,SPRITE_MAX_TEXTURES:function MG(t){let e=!0;if(xo.tablet||xo.phone){if(xo.apple.device){const n=navigator.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(xo.android.device){const n=navigator.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:jb.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:ua.CLAMP,SCALE_MODE:bo.LINEAR,PRECISION_VERTEX:Hr.HIGH,PRECISION_FRAGMENT:xo.apple.device?Hr.HIGH:Hr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:function IG(){return!xo.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};De.PREFER_ENV=al.WEBGL2,De.STRICT_TEXTURE_CACHE=!1;var Ve=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(Ve||{});const Gb=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},zA=(t,e)=>Gb(t).priority??e,ft={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Gb).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map(Gb).forEach(e=>{e.type.forEach(n=>{const i=this._addHandlers,r=this._queue;i[n]?i[n](e):(r[n]=r[n]||[],r[n].push(e))})}),this},handle(t,e,n){const i=this._addHandlers,r=this._removeHandlers;if(i[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,r[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>zA(s,n)-zA(r,n)))},i=>{const r=e.indexOf(i.ref);-1!==r&&e.splice(r,1)})}},og=2*Math.PI,RG=180/Math.PI,PG=Math.PI/180;var Ti=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Ti||{});class Qt{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new Qt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const ag=[new Qt,new Qt,new Qt,new Qt];class ln{constructor(e=0,n=0,i=0,r=0){this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(r),this.type=Ti.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new ln(0,0,0,0)}clone(){return new ln(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=ag[0].set(e.left,e.top),l=ag[1].set(e.left,e.bottom),c=ag[2].set(e.right,e.top),f=ag[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const g=Math.sign(n.a*n.d-n.b*n.c);if(0===g||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(f,f),Math.max(a.x,l.x,c.x,f.x)<=i||Math.min(a.x,l.x,c.x,f.x)>=r||Math.max(a.y,l.y,c.y,f.y)<=s||Math.min(a.y,l.y,c.y,f.y)>=o))return!1;const v=g*(l.y-a.y),_=g*(a.x-l.x),y=v*i+_*s,E=v*r+_*s,S=v*i+_*o,T=v*r+_*o;if(Math.max(y,E,S,T)<=v*a.x+_*a.y||Math.min(y,E,S,T)>=v*f.x+_*f.y)return!1;const M=g*(a.y-c.y),I=g*(c.x-a.x),O=M*i+I*s,V=M*r+I*s,q=M*i+I*o,Q=M*r+I*o;return!(Math.max(O,V,q,Q)<=M*a.x+I*a.y||Math.min(O,V,q,Q)>=M*f.x+I*f.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this}fit(e){const n=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(i-n,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,n=.001){const i=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=i-n,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class zb{constructor(e=0,n=0,i=0){this.x=e,this.y=n,this.radius=i,this.type=Ti.CIRC}clone(){return new zb(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;let r=this.x-e,s=this.y-n;return r*=r,s*=s,r+s<=this.radius*this.radius}getBounds(){return new ln(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class $b{constructor(e=0,n=0,i=0,r=0){this.x=e,this.y=n,this.width=i,this.height=r,this.type=Ti.ELIP}clone(){return new $b(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,r=(n-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new ln(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Xc{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){const i=[];for(let r=0,s=n.length;r<s;r++)i.push(n[r].x,n[r].y);n=i}this.points=n,this.type=Ti.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Xc(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[2*s],l=this.points[2*s+1],c=this.points[2*o],f=this.points[2*o+1];l>n!=f>n&&e<(n-l)/(f-l)*(c-a)+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class Wb{constructor(e=0,n=0,i=0,r=0,s=20){this.x=e,this.y=n,this.width=i,this.height=r,this.radius=s,this.type=Ti.RREC}clone(){return new Wb(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+i&&n<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=n-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=n-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class ha{constructor(e,n,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new ha(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class zn{constructor(e=1,n=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,i,r,s,o){return this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const i=n||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,n){n=n||new Qt;const i=e.x,r=e.y;return n.x=this.a*i+this.c*r+this.tx,n.y=this.b*i+this.d*r+this.ty,n}applyInverse(e,n){n=n||new Qt;const i=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return n.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,n.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*n-this.b*i,this.b=r*i+this.b*n,this.c=s*n-this.d*i,this.d=s*i+this.d*n,this.tx=o*n-this.ty*i,this.ty=o*i+this.ty*n,this}append(e){const n=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*n+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,n,i,r,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=n-(i*this.b+r*this.d),this}prepend(e){const n=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,n),c=Math.abs(a+l);return c<1e-5||Math.abs(og-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*n+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,n=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-n*i;return this.a=r/o,this.b=-n/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new zn;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new zn}static get TEMP_MATRIX(){return new zn}}const ll=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ul=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Xb=[],$A=[],lg=Math.sign;!function OG(){for(let t=0;t<16;t++){const e=[];Xb.push(e);for(let n=0;n<16;n++){const i=lg(ll[t]*ll[n]+ul[t]*cl[n]),r=lg(cl[t]*ll[n]+hl[t]*cl[n]),s=lg(ll[t]*ul[n]+ul[t]*hl[n]),o=lg(cl[t]*ul[n]+hl[t]*hl[n]);for(let a=0;a<16;a++)if(ll[a]===i&&cl[a]===r&&ul[a]===s&&hl[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new zn;e.set(ll[t],cl[t],ul[t],hl[t],0,0),$A.push(e)}}();const Yn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ll[t],uY:t=>cl[t],vX:t=>ul[t],vY:t=>hl[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>Xb[t][e],sub:(t,e)=>Xb[t][Yn.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?Yn.S:Yn.N:2*Math.abs(e)<=Math.abs(t)?t>0?Yn.E:Yn.W:e>0?t>0?Yn.SE:Yn.SW:t>0?Yn.NE:Yn.NW,matrixAppendRotationInv:(t,e,n=0,i=0)=>{const r=$A[Yn.inv(e)];r.tx=n,r.ty=i,t.append(r)}},WA=class{constructor(){this.worldTransform=new zn,this.localTransform=new zn,this.position=new ha(this.onChange,this,0,0),this.scale=new ha(this.onChange,this,1,1),this.pivot=new ha(this.onChange,this,0,0),this.skew=new ha(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Yb=WA;Yb.IDENTITY=new WA;class ps{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,i,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:f}=this;this._aliasCount++;for(let g=0,v=f.length;g<v;g++)f[g][c](e,n,i,r,s,o,a,l);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return-1!==n&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(ps.prototype,{dispatch:{value:ps.prototype.emit},run:{value:ps.prototype.emit}}),De.TARGET_FPMS=.06;var Yc=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Yc||{});class qb{constructor(e,n=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=i,this.once=r}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}class li{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new qb(null,null,1/0),this.deltaMS=1/De.TARGET_FPMS,this.elapsedMS=1/De.TARGET_FPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,i=Yc.NORMAL){return this._addListener(new qb(e,n,i))}addOnce(e,n,i=Yc.NORMAL){return this._addListener(new qb(e,n,i,!0))}_addListener(e){let n=this._head.next,i=this._head;if(n){for(;n;){if(e.priority>n.priority){e.connect(i);break}i=n,n=n.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,n){let i=this._head.next;for(;i;)i=i.match(e,n)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*De.TARGET_FPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,n)/1e3,De.TARGET_FPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!li._shared){const e=li._shared=new li;e.autoStart=!0,e._protected=!0}return li._shared}static get system(){if(!li._system){const e=li._system=new li;e.autoStart=!0,e._protected=!0}return li._system}}class XA{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,Yc.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?li.shared:new li,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}XA.extension=Ve.Application,ft.add(XA);var Zh=ze(5),NG=ze(469),Kb=ze(762);const kG={parse:Kb.Qc,format:Kb.WU,resolve:Kb.DB};function gs(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function YA(t){return t.split("?")[0].split("#")[0]}const Ai={toPosix:t=>function LG(t,e,n){return t.replace(new RegExp(function FG(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),n)}(t,"\\","/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){gs(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),r=/^[^/:]+:\//.exec(t);if(n||i||r){const s=n?.[0]||i?.[0]||r?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const i=YA(this.toPosix(e??De.ADAPTER.getBaseUrl())),r=YA(this.toPosix(n??this.rootname(i)));return gs(t),(t=this.toPosix(t)).startsWith("/")?Ai.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if(gs(t=this.toPosix(t)),0===t.length)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=function BG(t,e){let o,n="",i=0,r=-1,s=0;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(r!==a-1&&1!==s)if(r!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,r=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+=`/${t.slice(r+1,a)}`:n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else 46===o&&-1!==s?++s:s=-1}return n}(t,!1),t.length>0&&i&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return gs(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let n=0;n<t.length;++n){const i=t[n];gs(i),i.length>0&&(void 0===e?e=i:this.extname(t[n-1]??"")?e+=`/../${i}`:e+=`/${i}`)}return void 0===e?".":this.normalize(e)},dirname(t){if(gs(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const n=47===e;let i=-1,r=!0;const s=this.getProtocol(t),o=t;for(let a=(t=t.slice(s.length)).length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!r){i=a;break}}else r=!1;return-1===i?n?"/":this.isUrl(o)?s+t:s:n&&1===i?"//":s+t.slice(0,i)},rootname(t){gs(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);e=-1!==n?t.slice(0,n):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){gs(t),e&&gs(e),t=this.toPosix(t);let s,n=0,i=-1,r=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(47===l){if(!r){n=s+1;break}}else-1===a&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?-1==--o&&(i=s):(o=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(s=t.length-1;s>=0;--s)if(47===t.charCodeAt(s)){if(!r){n=s+1;break}}else-1===i&&(r=!1,i=s+1);return-1===i?"":t.slice(n,i)},extname(t){gs(t);let e=-1,n=0,i=-1,r=!0,s=0;for(let o=(t=this.toPosix(t)).length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===i&&(r=!1,i=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){n=o+1;break}}return-1===e||-1===i||0===s||1===s&&e===i-1&&e===n+1?"":t.slice(e,i)},parse(t){gs(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let n=(t=this.toPosix(t)).charCodeAt(0);const i=this.isAbsolute(t);let r;e.root=this.rootname(t),r=i||this.hasProtocol(t)?1:0;let o=-1,a=0,l=-1,c=!0,f=t.length-1,g=0;for(;f>=r;--f)if(n=t.charCodeAt(f),47!==n)-1===l&&(c=!1,l=f+1),46===n?-1===o?o=f:1!==g&&(g=1):-1!==o&&(g=-1);else if(!c){a=f+1;break}return-1===o||-1===l||0===g||1===g&&o===l-1&&o===a+1?-1!==l&&(e.base=e.name=t.slice(0===a&&i?1:a,l)):(0===a&&i?(e.name=t.slice(1,o),e.base=t.slice(1,l)):(e.name=t.slice(a,o),e.base=t.slice(a,l)),e.ext=t.slice(o,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};De.RETINA_PREFIX=/@([0-9\.]+)x/,De.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;const qA={};function lr(t,e,n=3){if(qA[e])return;let i=(new Error).stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(i=i.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(i))),qA[e]=!0}let Zb;var Sz={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Qh(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function KA(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function Qb(t){if("string"==typeof t&&("#"===(t=Sz[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,n,i]=t;t=e+e+n+n+i+i}return parseInt(t,16)}const ZA=function Tz(){const t=[],e=[];for(let i=0;i<32;i++)t[i]=i,e[i]=i;t[Tt.NORMAL_NPM]=Tt.NORMAL,t[Tt.ADD_NPM]=Tt.ADD,t[Tt.SCREEN_NPM]=Tt.SCREEN,e[Tt.NORMAL]=Tt.NORMAL_NPM,e[Tt.ADD]=Tt.ADD_NPM,e[Tt.SCREEN]=Tt.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}();function QA(t,e){return ZA[e?1:0][t]}function Jb(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let n=t>>16&255,i=t>>8&255,r=255&t;return n=n*e+.5|0,i=i*e+.5|0,r=r*e+.5|0,(255*e<<24)+(n<<16)+(i<<8)+r}function JA(t,e,n,i){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(i||void 0===i)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function e0(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function cg(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function eI(t){return!(t&t-1||!t)}function tI(t){let e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,n=((t>>>=n)>15?1:0)<<2,e|=n,n=((t>>>=n)>3?1:0)<<1,e|=n,e|(t>>>=n)>>1}function qc(t,e,n){const i=t.length;let r;if(e>=i||0===n)return;const s=i-(n=e+n>i?i-e:n);for(r=e;r<s;++r)t[r]=t[r+n];t.length=s}function Kc(t){return 0===t?0:t<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let Rz=0;function dl(){return++Rz}const nI={},cr=Object.create(null),Gr=Object.create(null);class iI{constructor(e,n,i){this.canvas=De.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||De.RESOLUTION,this.resize(e,n)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,n){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(n*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(e){this.canvas.width=Math.round(e)}get height(){return this.canvas.height}set height(e){this.canvas.height=Math.round(e)}}function rI(t,e,n){for(let i=0,r=4*n*e;i<e;++i,r+=4)if(0!==t[r+3])return!1;return!0}function sI(t,e,n,i,r){const s=4*e;for(let o=i,a=i*s+4*n;o<=r;++o,a+=s)if(0!==t[a+3])return!1;return!0}let ug;function da(t,e=1){const n=De.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):e}const t0=[];function oI(t,e){if(!t)return null;let n="";if("string"==typeof t){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(n=i[1].toLowerCase())}for(let i=t0.length-1;i>=0;--i){const r=t0[i];if(r.test&&r.test(t,n))return new r(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Jh{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new ps("setRealSize"),this.onUpdate=new ps("update"),this.onError=new ps("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class ed extends Jh{constructor(e,n){const{width:i,height:r}=n||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e}upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const kz={scaleMode:bo.NEAREST,format:Me.RGBA,alphaMode:fs.NPM},td=class extends Zh{constructor(t=null,e=null){super(),e=e||{};const{alphaMode:n,mipmap:i,anisotropicLevel:r,scaleMode:s,width:o,height:a,wrapMode:l,format:c,type:f,target:g,resolution:v,resourceOptions:_}=e;t&&!(t instanceof Jh)&&((t=oI(t,_)).internal=!0),this.resolution=v||De.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i??De.MIPMAP_TEXTURES,this.anisotropicLevel=r??De.ANISOTROPIC_LEVEL,this._wrapMode=l||De.WRAP_MODE,this._scaleMode=s??De.SCALE_MODE,this.format=c||Me.RGBA,this.type=f||xt.UNSIGNED_BYTE,this.target=g||$c.TEXTURE_2D,this.alphaMode=n??fs.UNPACK,this.uid=dl(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return this.setRealSize(t*(n=n||this.resolution),e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=eI(this.realWidth)&&eI(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Gr[this.cacheId],delete cr[this.cacheId],this.cacheId=null),this.dispose(),td.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=De.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let r=null;i?r=t:(t._pixiId||(t._pixiId=`${e?.pixiIdPrefix||"pixiid"}_${dl()}`),r=t._pixiId);let s=Gr[r];if(i&&n&&!s)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return s||(s=new td(t,e),s.cacheId=r,td.addToCache(s,r)),s}static fromBuffer(t,e,n,i){t=t||new Float32Array(e*n*4);const r=new ed(t,{width:e,height:n}),s=t instanceof Float32Array?xt.FLOAT:xt.UNSIGNED_BYTE;return new td(r,Object.assign({},kz,i||{width:e,height:n,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Gr[e]&&Gr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Gr[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Gr[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Gr[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Gr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let mn=td;mn._globalBatch=0;class aI extends Jh{constructor(e,n){const{width:i,height:r}=n||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new mn;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let i=0;i<this.length;i++)!e[i]||(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):this.addResourceAt(e[i]instanceof Jh?e[i]:oI(e[i],n),i))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(n).then(()=>{const{realWidth:i,realHeight:r}=this.items[0];return this.resize(i,r),Promise.resolve(this)}),this._load}}class fa extends Jh{constructor(e){super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,i){void 0!==i||n.startsWith("data:")?!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous"):e.crossOrigin=function Nz(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,ug||(ug=document.createElement("a")),ug.href=t;const n=kG.parse(ug.href);return n.hostname!==e.hostname||(n.port||""!==e.port)&&n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}(n)}upload(e,n,i,r){const s=e.gl,o=n.realWidth,a=n.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK),this.noSubImage||n.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(n.target,0,i.internalFormat,n.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,i.type,r),!0}update(){if(this.destroyed)return;const e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),super.update()}dispose(){this.source=null}}const nd=class extends aI{constructor(t,e){const{width:n,height:i,autoLoad:r,linkBaseTexture:s}=e||{};if(t&&t.length!==nd.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let o=0;o<nd.SIDES;o++)this.items[o].target=$c.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==r&&this.load()}bind(t){super.bind(t),t.target=$c.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=$c.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const i=this.itemDirtyIds;for(let r=0;r<nd.SIDES;r++){const s=this.items[r];(i[r]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),i[r]=s.dirtyId):i[r]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),i[r]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===nd.SIDES}};let lI=nd;lI.SIDES=6;class cI extends fa{constructor(e,n){if(n=n||{},"string"==typeof e){const i=new Image;fa.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}super(e),!e.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??De.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this.bitmap=null,this._load=null,!1!==n.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((n,i)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,n(this.createBitmap?this.process():this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{i(o),this.onError.emit(o)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap;return this._process=fetch(e.src,{mode:e.crossOrigin&&"anonymous"!==e.crossOrigin?"no-cors":"cors"}).then(r=>r.blob()).then(r=>n(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===fs.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,i){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,i,this.bitmap),!this.preserveBitmap){let r=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}const hg=class extends fa{constructor(t,e){e=e||{},super(De.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},hg.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const t=new Image;fa.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{!this._resolve||(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,r=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*e,r=this._overrideHeight||this._overrideWidth/e*n),i=Math.round(i),r=Math.round(r);const s=this.source;s.width=i,s.height=r,s._pixiId=`canvas_${dl()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,i,r),this._resolve(),this._resolve=null}}static getSize(t){const e=hg.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&hg.SVG_XML.test(t)}};let id=hg;id.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,id.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const n0=class extends fa{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),fa.crossOrigin(n,t[0].src||t[0],e.crossorigin);for(let r=0;r<t.length;++r){const s=document.createElement("source");let{src:o,mime:a}=t[r];o=o||t[r];const l=o.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);a=a||n0.MIME_TYPES[c]||`video/${c}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-li.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(li.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(li.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(li.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||n0.TYPES.includes(e)}};let r0=n0;function uI(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Nt(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){uI(s,i,r,o,a,"next",l)}function a(l){uI(s,i,r,o,a,"throw",l)}o(void 0)})}}r0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],r0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class Zc extends fa{constructor(e,n){var i=(...r)=>{super(...r)};n=n||{},"string"==typeof e?(i(Zc.EMPTY),this.url=e):(i(e),this.url=null),this.crossOrigin=n.crossOrigin??!0,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this._load=null,!1!==n.autoLoad&&this.load()}load(){var e=this;return this._load||(this._load=new Promise(function(){var n=Nt(function*(i,r){if(null!==e.url)try{const s=yield De.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});if(e.destroyed)return;const o=yield s.blob();if(e.destroyed)return;const a=yield createImageBitmap(o,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===fs.UNPACK?"premultiply":"none"});if(e.destroyed)return;e.source=a,e.update(),i(e)}catch(s){if(e.destroyed)return;r(s),e.onError.emit(s)}else i(e)});return function(i,r){return n.apply(this,arguments)}}())),this._load}upload(e,n,i){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),super.upload(e,n,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return Zc._EMPTY=Zc._EMPTY??De.ADAPTER.createCanvas(0,0),Zc._EMPTY}}t0.push(Zc,cI,class Lz extends fa{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return!!(n&&e instanceof n)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},r0,id,ed,lI,class Fz extends aI{constructor(e,n){const{width:i,height:r}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:r}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,n),this}bind(e){super.bind(e),e.target=$c.TEXTURE_2D_ARRAY}upload(e,n,i){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,n.format,i.type,null);for(let l=0;l<r;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,i.type,c.resource.source))}return!0}});class Bz extends ed{upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}}class s0{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ps("disposeFramebuffer"),this.multisample=ai.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new mn(null,{scaleMode:bo.NEAREST,resolution:1,mipmap:Hs.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new mn(new Bz(null,{width:this.width,height:this.height}),{scaleMode:bo.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Hs.OFF,format:Me.DEPTH_COMPONENT,type:xt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),e!==this.width||n!==this.height){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(e/s,n/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,n/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class hI extends mn{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=ai.NONE),super(null,e),this.mipmap=Hs.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new s0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class dI{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,i){const r=n.width,s=n.height;if(i){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,c=e.y/s+a;i=Yn.add(i,Yn.NW),this.x0=l+o*Yn.uX(i),this.y0=c+a*Yn.uY(i),i=Yn.add(i,2),this.x1=l+o*Yn.uX(i),this.y1=c+a*Yn.uY(i),i=Yn.add(i,2),this.x2=l+o*Yn.uX(i),this.y2=c+a*Yn.uY(i),i=Yn.add(i,2),this.x3=l+o*Yn.uX(i),this.y3=c+a*Yn.uY(i)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const fI=new dI;function dg(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class at extends Zh{constructor(e,n,i,r,s,o){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new ln(0,0,1,1)),e instanceof at&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=r,this.valid=!1,this._uvs=fI,this.uvMatrix=null,this.orig=i||n,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Qt(o.x,o.y):new Qt(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n?.url&&cr[n.url]&&at.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,at.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),i=new at(this.baseTexture,!this.noFrame&&e,n,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===fI&&(this._uvs=new dI),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},i=De.STRICT_TEXTURE_CACHE){const r="string"==typeof e;let s=null;r?s=e:e instanceof mn?(e.cacheId||(e.cacheId=`${n?.pixiIdPrefix||"pixiid"}-${dl()}`,mn.addToCache(e,e.cacheId)),s=e.cacheId):(e._pixiId||(e._pixiId=`${n?.pixiIdPrefix||"pixiid"}_${dl()}`),s=e._pixiId);let o=cr[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return o||e instanceof mn?!o&&e instanceof mn&&(o=new at(e),at.addToCache(o,s)):(n.resolution||(n.resolution=da(e)),o=new at(new mn(e,n)),o.baseTexture.cacheId=s,mn.addToCache(o.baseTexture,s),at.addToCache(o,s)),o}static fromURL(e,n){const i=Object.assign({autoLoad:!1},n?.resourceOptions),r=at.from(e,Object.assign({resourceOptions:i},n),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,n,i,r){return new at(mn.fromBuffer(e,n,i,r))}static fromLoader(e,n,i,r){const s=new mn(e,Object.assign({scaleMode:De.SCALE_MODE,resolution:da(n)},r)),{resource:o}=s;o instanceof cI&&(o.url=n);const a=new at(s);return i||(i=n),mn.addToCache(a.baseTexture,i),at.addToCache(a,i),i!==n&&(mn.addToCache(a.baseTexture,n),at.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),cr[n]&&cr[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),cr[n]=e)}static removeFromCache(e){if("string"==typeof e){const n=cr[e];if(n){const i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete cr[e],n}}else if(e?.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)cr[e.textureCacheIds[n]]===e&&delete cr[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:i,width:r,height:s}=e,o=n+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${n} + ${r} = ${n+r} > ${this.baseTexture.width} ${o&&a?"and":"or"} Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`);this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return at._EMPTY||(at._EMPTY=new at(new mn),dg(at._EMPTY),dg(at._EMPTY.baseTexture)),at._EMPTY}static get WHITE(){if(!at._WHITE){const e=De.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),at._WHITE=new at(mn.from(e)),dg(at._WHITE),dg(at._WHITE.baseTexture)}return at._WHITE}}class pa extends at{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,i=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(n*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new pa(new hI(e))}}let Uz=(()=>{class t{constructor(n){this.texturePool={},this.textureOptions=n||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(n,i,r=ai.NONE){const s=new hI(Object.assign({width:n,height:i,resolution:1,multisample:r},this.textureOptions));return new pa(s)}getOptimalTexture(n,i,r=1,s=ai.NONE){let o;n=Math.ceil(n*r-1e-6),i=Math.ceil(i*r-1e-6),this.enableFullScreen&&n===this._pixelsWidth&&i===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(n=cg(n)))<<16|65535&(i=cg(i)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(n,i,s)),a.filterPoolKey=o,a.setResolution(r),a}getFilterTexture(n,i,r){const s=this.getOptimalTexture(n.width,n.height,i||n.resolution,r||ai.NONE);return s.filterFrame=n.filterFrame,s}returnTexture(n){const i=n.filterPoolKey;n.filterFrame=null,this.texturePool[i].push(n)}returnFilterTexture(n){this.returnTexture(n)}clear(n){if(n=!1!==n)for(const i in this.texturePool){const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(n){if(n.width!==this._pixelsWidth||n.height!==this._pixelsHeight){this.enableFullScreen=n.width>0&&n.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=n.width,this._pixelsHeight=n.height}}}return t.SCREEN_KEY=-1,t})();class fg{constructor(e,n=0,i=!1,r=xt.FLOAT,s,o,a){this.buffer=e,this.size=n,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a}destroy(){this.buffer=null}static from(e,n,i,r,s){return new fg(e,n,i,r,s)}}let jz=0;class ni{constructor(e,n=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=n,this.id=jz++,this.disposeRunner=new ps("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?zs.ELEMENT_ARRAY_BUFFER:zs.ARRAY_BUFFER}get index(){return this.type===zs.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ni(e)}}const Vz={Float32Array,Uint32Array,Int32Array,Uint8Array},pI={5126:4,5123:2,5121:1};let Gz=0;const zz={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ga{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=Gz++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ps("disposeGeometry"),this.refCount=0}addAttribute(e,n,i=0,r=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof ni||(n instanceof Array&&(n=new Float32Array(n)),n=new ni(n));const c=e.split("|");if(c.length>1){for(let g=0;g<c.length;g++)this.addAttribute(c[g],n,i,r,s);return this}let f=this.buffers.indexOf(n);return-1===f&&(this.buffers.push(n),f=this.buffers.length-1),this.attributes[e]=new fg(f,i,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ni||(e instanceof Array&&(e=new Uint16Array(e)),e=new ni(e)),e.type=zs.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],n=[],i=new ni;let r;for(r in this.attributes){const s=this.attributes[r];e.push(this.buffers[s.buffer].data),n.push(s.size*pI[s.type]/4),s.buffer=0}for(i.data=function Hz(t,e){let n=0,i=0;const r={};for(let l=0;l<t.length;l++)i+=e[l],n+=t[l].length;const s=new ArrayBuffer(4*n);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],f=t[l],g=e0(f);r[g]||(r[g]=new Vz[g](s)),o=r[g];for(let v=0;v<f.length;v++)o[(v/c|0)*i+a+v%c]=f[v];a+=c}return new Float32Array(s)}(e,n),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ga;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new ni(this.buffers[n].data.slice(0));for(const n in this.attributes){const i=this.attributes[n];e.attributes[n]=new fg(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=zs.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new ga,i=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new(zz[e0(o.buffers[a].data)])(r[a]),n.buffers[a]=new ni(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=zs.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,f=0;for(let g=0;g<o.buffers.length;g++)if(o.buffers[g]!==o.indexBuffer){f=g;break}for(const g in o.attributes){const v=o.attributes[g];(0|v.buffer)===f&&(l+=v.size*pI[v.type]/4)}for(let g=0;g<e.length;g++){const v=e[g].indexBuffer.data;for(let _=0;_<v.length;_++)n.indexBuffer.data[_+c]+=a;a+=e[g].buffers[f].data.length/l,c+=v.length}}return n}}class $z extends ga{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class gI extends ga{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ni(this.vertices),this.uvBuffer=new ni(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+n.width/e.width,this.uvs[3]=r,this.uvs[4]=i+n.width/e.width,this.uvs[5]=r+n.height/e.height,this.uvs[6]=i,this.uvs[7]=r+n.height/e.height,i=n.x,r=n.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+n.width,this.vertices[3]=r,this.vertices[4]=i+n.width,this.vertices[5]=r+n.height,this.vertices[6]=i,this.vertices[7]=r+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let Wz=0;class ms{constructor(e,n,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Wz++,this.static=!!n,this.ubo=!!i,e instanceof ni?(this.buffer=e,this.buffer.type=zs.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ni(new Float32Array(1)),this.buffer.type=zs.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new ms(n,i)}static from(e,n,i){return new ms(e,n,i)}static uboFrom(e,n){return new ms(e,n??!0,!0)}}class Xz{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ai.NONE,this.sourceFrame=new ln,this.destinationFrame=new ln,this.bindingSourceFrame=new ln,this.bindingDestinationFrame=new ln,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const pg=[new Qt,new Qt,new Qt,new Qt],o0=new zn;class mI{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new Uz,this.statePool=[],this.quad=new $z,this.quadUv=new gI,this.tempRect=new ln,this.activeState={},this.globalUniforms=new ms({outputFrame:new ln,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new Xz,o=this.renderer.renderTexture;let a=n[0].resolution,l=n[0].multisample,c=n[0].padding,f=n[0].autoFit,g=n[0].legacy??!0;for(let y=1;y<n.length;y++){const E=n[y];a=Math.min(a,E.resolution),l=Math.min(l,E.multisample),c=this.useMaxPadding?Math.max(c,E.padding):c+E.padding,f=f&&E.autoFit,g=g||(E.legacy??!0)}1===r.length&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=a,s.multisample=l,s.legacy=g,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const v=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(o0.copyFrom(i.projection.transform).invert(),v),f?(s.sourceFrame.fit(v),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(v)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),i=n.filters;this.activeState=n;const r=this.globalUniforms.uniforms;r.outputFrame=n.sourceFrame,r.resolution=n.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=r.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,n.renderTexture,l.renderTexture,Gs.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,n.resolution);f.filterFrame=c.filterFrame;let g=0;for(g=0;g<i.length-1;++g){1===g&&n.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,n.resolution),f.filterFrame=c.filterFrame),i[g].apply(this,c,f,Gs.CLEAR,n);const v=c;c=f,f=v}i[g].apply(this,c,l.renderTexture,Gs.BLEND,n),g>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Gs.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(n===Gs.CLEAR||n===Gs.BLIT&&(1&r.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,i,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,r),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Vs.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Vs.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=n._texture,o=e.set(r.width,0,0,r.height,i.x,i.y),a=n.worldTransform.copyTo(zn.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,i=1,r=ai.NONE){return this.texturePool.getOptimalTexture(e,n,i,r)}getFilterTexture(e,n,i){if("number"==typeof e){const s=e;e=n,n=s}const r=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,n||e.resolution,i||ai.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const i=pg[0],r=pg[1],s=pg[2],o=pg[3];i.set(n.left,n.top),r.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(i,i),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,r.x,s.x,o.x),l=Math.min(i.y,r.y,s.y,o.y),c=Math.max(i.x,r.x,s.x,o.x),f=Math.max(i.y,r.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=f-l}roundFrame(e,n,i,r,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}(s=s?o0.copyFrom(s):o0.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}mI.extension={type:Ve.RendererSystem,name:"filter"},ft.add(mI);class gg{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class vI{constructor(e){this.renderer=e,this.emptyRenderer=new gg(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:i}=this.renderer.texture;for(let r=n-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,n,i,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const f=s[c],g=f._batchLocation;if(g>=0&&g<r&&n[g]===f)o[c]=g;else for(;l<r;){const v=n[l];if(!v||v._batchEnabled!==i||v._batchLocation!==l){o[c]=l,f._batchLocation=l,n[l]=f;break}l++}}}destroy(){this.renderer=null}}vI.extension={type:Ve.RendererSystem,name:"batch"},ft.add(vI);let _I=0;class yI{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=_I++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=_I++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;void 0!==n.addEventListener&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let i;if(De.PREFER_ENV>=al.WEBGL2&&(i=e.getContext("webgl2",n)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}yI.extension={type:Ve.RendererSystem,name:"context"},ft.add(yI);class Yz{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ai.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const qz=new ln;class bI{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new s0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new ln,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let n=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;De.PREFER_ENV===al.WEBGL_LEGACY&&(n=null,i=null),n?e.drawBuffers=r=>n.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,i=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>i,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,n.height>>i)}else this.setViewport(0,0,e.width>>i,e.height>>i)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,i,r){const s=this.viewport;e=Math.round(e),n=Math.round(n),i=Math.round(i),r=Math.round(r),(s.width!==i||s.height!==r||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=i,s.height=r,this.gl.viewport(e,n,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,i,r,s=Bb.COLOR|Bb.DEPTH){const{gl:o}=this;o.clearColor(e,n,i,r),o.clear(s)}initFramebuffer(e){const{gl:n}=this,i=new Yz(n.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const r=e.colorTextures;let s=r.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&i.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:i}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),0===l&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,c.target,f._glTextures[this.CONTEXT_UID].texture,n),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const c=e.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,n)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let i=ai.NONE;if(e<=1||null===n)return i;for(let r=0;r<n.length;r++)if(n[r]<=e){i=n[r];break}return 1===i&&(i=ai.NONE),i}blit(e,n,i){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(2!==s.context.webGLVersion||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const f=r.colorTextures[0];if(!f)return;l.blitFramebuffer||(l.blitFramebuffer=new s0(r.width,r.height),l.blitFramebuffer.addColorTexture(0,f)),(e=l.blitFramebuffer).colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}n||((n=qz).width=r.width,n.height=r.height),i||(i=n);const c=n.width===i.width&&n.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}disposeFramebuffer(e,n){const i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<n.length;i++)this.disposeFramebuffer(n[i],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const i=e.width,r=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,i,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,r),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new ln}destroy(){this.renderer=null}}bI.extension={type:Ve.RendererSystem,name:"framebuffer"},ft.add(bI);const a0={5126:4,5123:2,5121:1};class wI{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==n.webGLVersion){let i=this.renderer.context.extensions.vertexArrayObject;De.PREFER_ENV===al.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==n.webGLVersion){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>i.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>i.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===n.webGLVersion||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:i}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++)n.update(e.buffers[i])}checkCompatibility(e,n){const i=e.attributes,r=n.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const i=e.attributes,r=n.attributeData,s=["g",e.id];for(const o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,n,i=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let f=c[l];if(f)return c[a.id]=f,f;const g=e.buffers,v=e.attributes,_={},y={};for(const E in g)_[E]=0,y[E]=0;for(const E in v)!v[E].size&&a.attributeData[E]?v[E].size=a.attributeData[E].size:v[E].size||console.warn(`PIXI Geometry attribute '${E}' size cannot be determined (likely the bound shader does not have the attribute)`),_[v[E].buffer]+=v[E].size*a0[v[E].type];for(const E in v){const S=v[E],T=S.size;void 0===S.stride&&(S.stride=_[S.buffer]===T*a0[S.type]?0:_[S.buffer]),void 0===S.start&&(S.start=y[S.buffer],y[S.buffer]+=T*a0[S.type])}f=r.createVertexArray(),r.bindVertexArray(f);for(let E=0;E<g.length;E++){const S=g[E];o.bind(S),i&&S._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=f,c[l]=f,r.bindVertexArray(null),o.unbind(zs.ARRAY_BUFFER),f}disposeGeometry(e,n){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),i){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&o.dispose(s[a],n))}if(!n)for(const a in i)if("g"===a[0]){const l=i[a];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let i=0;i<n.length;i++)this.disposeGeometry(this.managedGeometries[n[i]],e)}activateVao(e,n){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const f=a[c],g=o[f.buffer],v=g._glBuffers[r];if(n.attributeData[c]){l!==v&&(s.bind(g),l=v);const _=n.attributeData[c].location;if(i.enableVertexAttribArray(_),i.vertexAttribPointer(_,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(_,1)}}}}draw(e,n,i,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(i||0)*a,r||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,n||o.getSize(),r||1):s.drawArrays(e,i,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}wI.extension={type:Ve.RendererSystem,name:"geometry"},ft.add(wI);class Kz{constructor(e=null){this.type=gi.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=De.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=gi.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}const xI={};let vg,mg=xI;function EI(t,e,n){if("precision"!==t.substring(0,9)){let i=e;return e===Hr.HIGH&&n!==Hr.HIGH&&(i=Hr.MEDIUM),`precision ${i} float;\n${t}`}return n!==Hr.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}const Jz={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function CI(t){return Jz[t]}let _g=null;const DI={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function SI(t,e){if(!_g){const n=Object.keys(DI);_g={};for(let i=0;i<n.length;++i){const r=n[i];_g[t[r]]=DI[r]}}return _g[e]}const Qc=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],e$={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},t$={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},i$=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function r$(t){let e="";for(let n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}let l$=0;const yg={};class Eo{constructor(e,n,i="pixi-shader",r={}){this.extra={},this.id=l$++,this.vertexSrc=e||Eo.defaultVertexSrc,this.fragmentSrc=n||Eo.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),yg[i]?(yg[i]++,i+=`-${yg[i]}`):yg[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=EI(this.vertexSrc,De.PRECISION_VERTEX,Hr.HIGH),this.fragmentSrc=EI(this.fragmentSrc,De.PRECISION_FRAGMENT,function Qz(){if(!vg){vg=Hr.MEDIUM;const t=function Zz(){if(mg===xI||mg?.isContextLost()){const t=De.ADAPTER.createCanvas();let e;De.PREFER_ENV>=al.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),mg=e}return mg}();t&&t.getShaderPrecisionFormat&&(vg=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Hr.HIGH:Hr.MEDIUM)}return vg}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,n,i){const r=e+n;let s=nI[r];return s||(nI[r]=s=new Eo(e,n,i)),s}}class $s{constructor(e,n){this.uniformBindCount=0,this.program=e,this.uniformGroup=n?n instanceof ms?n:new ms(n):new ms({}),this.disposeRunner=new ps("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const i in n.uniforms){const r=n.uniforms[i];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,i){const r=Eo.from(e,n);return new $s(r,i)}}class Co{constructor(){this.data=0,this.blendMode=Tt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Tt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new Co;return e.depthTest=!1,e.blend=!0,e}}class vs extends $s{constructor(e,n,i){super(Eo.from(e||vs.defaultVertexSrc,n||vs.defaultFragmentSrc),i),this.padding=0,this.resolution=De.FILTER_RESOLUTION,this.multisample=De.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new Co}apply(e,n,i,r,s){e.applyFilter(this,n,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}const TI=new zn;class AI{constructor(e,n){this._texture=e,this.mapCoord=new zn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){void 0===n&&(n=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];n[r]=s*i.a+o*i.c+i.tx,n[r+1]=s*i.b+o*i.d+i.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const i=n._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=n.orig,s=n.trim;s&&(TI.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(TI));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&0===n.rotate,!0}}class f$ extends vs{constructor(e,n,i){let r=null;"string"!=typeof e&&void 0===n&&void 0===i&&(r=e,e=void 0,n=void 0,i=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i),this.maskSprite=r,this.maskMatrix=new zn}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,i,r){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new AI(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,i,r))}}class II{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let i=n;if(!i.isMaskData){const s=this.maskDataPool.pop()||new Kz;s.pooled=!0,s.maskObject=n,i=s}const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==gi.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case gi.SCISSOR:this.renderer.scissor.push(i);break;case gi.STENCIL:this.renderer.stencil.push(i);break;case gi.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case gi.COLOR:this.pushColorMask(i)}i.type===gi.SPRITE&&this.maskStack.push(i)}pop(e){const n=this.maskStack.pop();if(n&&n._target===e){if(n.enabled)switch(n.type){case gi.SCISSOR:this.renderer.scissor.pop(n);break;case gi.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case gi.SPRITE:this.popSpriteMask(n);break;case gi.COLOR:this.popColorMask(n)}if(n.reset(),n.pooled&&this.maskDataPool.push(n),0!==this.maskStack.length){const i=this.maskStack[this.maskStack.length-1];i.type===gi.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const n=e.maskObject;e.type=n?n.isSprite?gi.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?gi.SCISSOR:gi.STENCIL:gi.COLOR}pushSpriteMask(e){const{maskObject:n}=e,i=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new f$]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const f=o.current;a=e.resolution||f.resolution,l=e.multisample??f.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=n;const c=i.filterArea;i.filterArea=n.getBounds(!0),s.filter.push(i,r),i.filterArea=c,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,i=e._colorMask=n&e.colorMask;i!==n&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}popColorMask(e){const i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}destroy(){this.renderer=null}}II.extension={type:Ve.RendererSystem,name:"mask"},ft.add(II);class MI{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,i=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==i&&(0===r?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const RI=new zn,PI=[],bg=class extends MI{constructor(t){super(t),this.glConst=De.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:i}=this,r=i.renderTexture,s=n.getBounds(!0,PI.pop()??new ln);this.roundFrameToPixels(s,r.current?r.current.resolution:i.resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:i,d:r}=t;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||bg.isMatrixRotated(e.worldTransform)||bg.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,i,r){bg.isMatrixRotated(r)||((r=r?RI.copyFrom(r):RI.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(r,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&PI.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let OI=bg;OI.extension={type:Ve.RendererSystem,name:"scissor"},ft.add(OI);class NI extends MI{constructor(e){super(e),this.glConst=De.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;0!==s&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,0!==s&&(e._colorMask=s,i.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()}pop(e){const n=this.renderer.gl;if(0===this.getStackLength())n.disable(n.STENCIL_TEST);else{const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;0!==r&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(i._colorMask=r,n.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}NI.extension={type:Ve.RendererSystem,name:"stencil"},ft.add(NI);class kI{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new zn,this.transform=null}update(e,n,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,i,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}kI.extension={type:Ve.RendererSystem,name:"projection"},ft.add(kI);const fl=new ln,rd=new ln;class FI{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new ln,this.destinationFrame=new ln,this.viewportFrame=new ln}bind(e=null,n,i){const r=this.renderer;let s,o,a;this.current=e,e?(s=e.baseTexture,a=s.resolution,n||(fl.width=e.frame.width,fl.height=e.frame.height,n=fl),i||(rd.x=e.frame.x,rd.y=e.frame.y,rd.width=n.width,rd.height=n.height,i=rd),o=s.framebuffer):(a=r.resolution,n||(fl.width=r._view.screen.width,fl.height=r._view.screen.height,n=fl),i||((i=fl).width=n.width,i.height=n.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,n,a,!o),this.renderer.mask.setMaskStack(e?s.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(i)}clear(e,n){e=this.current?e||this.current.baseTexture.clearColor:e||this.renderer.background.colorRgba;const i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==r.width||i.height!==r.height;if(s){let{x:o,y:a,width:l,height:c}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,c)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],n),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}function p$(t,e,n,i,r){n.buffer.update(r)}FI.extension={type:Ve.RendererSystem,name:"renderTexture"},ft.add(FI);const g$={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},LI={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};class y${constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function BI(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function p0(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function UI(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return p0(2*e);case"bvec3":return p0(3*e);case"bvec4":return p0(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function jI(t,e){const n=t.getShaderSource(e).split("\n").map((c,f)=>`${f}: ${c}`),i=t.getShaderInfoLog(e),r=i.split("\n"),s={},o=r.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>!(!c||s[c]||(s[c]=!0,0))),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join("\n");a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}let sd,D$=0;const wg={textureCount:0,uboCount:0};class VI{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=D$++}systemCheck(){if(!function C$(){if("boolean"==typeof sd)return sd;try{sd=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{sd=!1}return sd}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),n||(wg.textureCount=0,wg.uboCount=0,this.syncUniformGroup(e.uniformGroup,wg)),r}setUniforms(e){const n=this.shader.program;n.syncUniforms(n.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)}syncUniformGroup(e,n){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,n))}syncUniforms(e,n,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=function n$(t,e){const n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in t.uniforms){const r=e[i];if(!r){t.uniforms[i]?.group&&n.push(t.uniforms[i].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${i}, syncData);\n                    `);continue}const s=t.uniforms[i];let o=!1;for(let a=0;a<Qc.length;a++)if(Qc[a].test(r,s)){n.push(Qc[a].code(i,s)),o=!0;break}if(!o){const l=(1!==r.size||r.isArray?t$:e$)[r.type].replace("location",`ud["${i}"].location`);n.push(`\n            cu = ud["${i}"];\n            cv = cu.value;\n            v = uv["${i}"];\n            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const i=this.getGlProgram();if(!e.static||0!==e.dirtyId||!i.uniformGroups[e.id]){e.dirtyId=0;const r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,n);e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,wg,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[n])}createSyncBufferGroup(e,n,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,i);n.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=function _$(t,e){if(!t.autoManage)return{size:0,syncFunc:p$};const n=function v$(t,e){const n=[];for(const i in t)e[i]&&n.push(e[i]);return n.sort((i,r)=>i.index-r.index),n}(t.uniforms,e),{uboElements:i,size:r}=function m$(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,i=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=LI[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,i%n!=0&&i<16){const a=i%n%16;i+=a,r+=a}i+n>16?(r=16*Math.ceil(r/16),o.offset=r,r+=n,i=n):(o.offset=r,i+=n,r+=n)}return r=16*Math.ceil(r/16),{uboElements:e,size:r}}(n),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<i.length;o++){const a=i[o],l=t.uniforms[a.data.name],c=a.data.name;let f=!1;for(let g=0;g<Qc.length;g++){const v=Qc[g];if(v.codeUbo&&v.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Qc[g].codeUbo(a.data.name,l)),f=!0;break}}if(!f)if(a.data.size>1){const g=CI(a.data.type),v=Math.max(LI[a.data.type]/16,1),_=g/v;s.push(`\n                cv = ud.${c}.value;\n                v = uv.${c};\n                offset = ${a.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${a.data.size*v}; i++)\n                {\n                    for(var j = 0; j < ${_}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-_%4)%4};\n                }\n\n                `)}else s.push(`\n                cv = ud.${c}.value;\n                v = uv.${c};\n                offset = ${a.offset/4};\n                ${g$[a.data.type]};\n                `)}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,i){const r=e.uniforms,s=[`${i}-`];for(const o in r)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const i=e.program,r=function E$(t,e){const n=BI(t,t.VERTEX_SHADER,e.vertexSrc),i=BI(t,t.FRAGMENT_SHADER,e.fragmentSrc),r=t.createProgram();t.attachShader(r,n),t.attachShader(r,i);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(r,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||function x$(t,e,n,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||jI(t,n),t.getShaderParameter(i,t.COMPILE_STATUS)||jI(t,i),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,r,n,i),e.attributeData=function b$(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(t,r);if(s.name.startsWith("gl_"))continue;const o=SI(e,s.type),a={type:o,name:s.name,size:CI(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}(r,t),e.uniformData=function w$(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=SI(e,s.type);n[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:UI(l,s.size)}}return n}(r,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,f)=>c>f?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(r,c,l[c]);t.linkProgram(r)}t.deleteShader(n),t.deleteShader(i);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(r,l),value:UI(c.type,c.size)}}return new y$(r,o)}(this.gl,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}VI.extension={type:Ve.RendererSystem,name:"shader"},ft.add(VI);const g0=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Tt.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Co,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function S$(t,e=[]){return e[Tt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.ADD]=[t.ONE,t.ONE],e[Tt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.NONE]=[0,0],e[Tt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Tt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Tt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Tt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Tt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Tt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Tt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Tt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Tt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Tt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Tt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(this.stateId!==(t=t||this.defaultState).data){let e=this.stateId^t.data,n=0;for(;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(g0.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(g0.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):!e&&-1!==n&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let HI=g0;HI.extension={type:Ve.RendererSystem,name:"state"},ft.add(HI);class GI{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=De.GC_MAX_IDLE,this.checkCountMax=De.GC_MAX_CHECK_COUNT,this.mode=De.GC_MODE}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==jb.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let i=!1;for(let r=0;r<n.length;r++){const s=n[r];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[r]=null,i=!0)}if(i){let r=0;for(let s=0;s<n.length;s++)null!==n[s]&&(n[r++]=n[s]);n.length=r}}unload(e){const i=e._texture;i&&!i.framebuffer&&this.renderer.texture.destroyTexture(i);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}}GI.extension={type:Ve.RendererSystem,name:"textureGC"},ft.add(GI);class m0{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=xt.UNSIGNED_BYTE,this.internalFormat=Me.RGBA,this.samplerType=0}}class zI{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new mn,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function O$(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[xt.UNSIGNED_BYTE]:{[Me.RGBA]:t.RGBA8,[Me.RGB]:t.RGB8,[Me.RG]:t.RG8,[Me.RED]:t.R8,[Me.RGBA_INTEGER]:t.RGBA8UI,[Me.RGB_INTEGER]:t.RGB8UI,[Me.RG_INTEGER]:t.RG8UI,[Me.RED_INTEGER]:t.R8UI,[Me.ALPHA]:t.ALPHA,[Me.LUMINANCE]:t.LUMINANCE,[Me.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[xt.BYTE]:{[Me.RGBA]:t.RGBA8_SNORM,[Me.RGB]:t.RGB8_SNORM,[Me.RG]:t.RG8_SNORM,[Me.RED]:t.R8_SNORM,[Me.RGBA_INTEGER]:t.RGBA8I,[Me.RGB_INTEGER]:t.RGB8I,[Me.RG_INTEGER]:t.RG8I,[Me.RED_INTEGER]:t.R8I},[xt.UNSIGNED_SHORT]:{[Me.RGBA_INTEGER]:t.RGBA16UI,[Me.RGB_INTEGER]:t.RGB16UI,[Me.RG_INTEGER]:t.RG16UI,[Me.RED_INTEGER]:t.R16UI,[Me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[xt.SHORT]:{[Me.RGBA_INTEGER]:t.RGBA16I,[Me.RGB_INTEGER]:t.RGB16I,[Me.RG_INTEGER]:t.RG16I,[Me.RED_INTEGER]:t.R16I},[xt.UNSIGNED_INT]:{[Me.RGBA_INTEGER]:t.RGBA32UI,[Me.RGB_INTEGER]:t.RGB32UI,[Me.RG_INTEGER]:t.RG32UI,[Me.RED_INTEGER]:t.R32UI,[Me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[xt.INT]:{[Me.RGBA_INTEGER]:t.RGBA32I,[Me.RGB_INTEGER]:t.RGB32I,[Me.RG_INTEGER]:t.RG32I,[Me.RED_INTEGER]:t.R32I},[xt.FLOAT]:{[Me.RGBA]:t.RGBA32F,[Me.RGB]:t.RGB32F,[Me.RG]:t.RG32F,[Me.RED]:t.R32F,[Me.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[xt.HALF_FLOAT]:{[Me.RGBA]:t.RGBA16F,[Me.RGB]:t.RGB16F,[Me.RG]:t.RG16F,[Me.RED]:t.R16F},[xt.UNSIGNED_SHORT_5_6_5]:{[Me.RGB]:t.RGB565},[xt.UNSIGNED_SHORT_4_4_4_4]:{[Me.RGBA]:t.RGBA4},[xt.UNSIGNED_SHORT_5_5_5_1]:{[Me.RGBA]:t.RGB5_A1},[xt.UNSIGNED_INT_2_10_10_10_REV]:{[Me.RGBA]:t.RGB10_A2,[Me.RGBA_INTEGER]:t.RGB10_A2UI},[xt.UNSIGNED_INT_10F_11F_11F_REV]:{[Me.RGB]:t.R11F_G11F_B10F},[xt.UNSIGNED_INT_5_9_9_9_REV]:{[Me.RGB]:t.RGB9_E5},[xt.UNSIGNED_INT_24_8]:{[Me.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[xt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Me.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[xt.UNSIGNED_BYTE]:{[Me.RGBA]:t.RGBA,[Me.RGB]:t.RGB,[Me.ALPHA]:t.ALPHA,[Me.LUMINANCE]:t.LUMINANCE,[Me.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[xt.UNSIGNED_SHORT_5_6_5]:{[Me.RGB]:t.RGB},[xt.UNSIGNED_SHORT_4_4_4_4]:{[Me.RGBA]:t.RGBA},[xt.UNSIGNED_SHORT_5_5_5_1]:{[Me.RGBA]:t.RGBA}},e}(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let r=0;r<n;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new m0(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new m0(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,n=0){const{gl:i}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===e&&(this.currentLocation!==r&&(n.activeTexture(n.TEXTURE0+r),this.currentLocation=r),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[r]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[r].samplerType!==Ub.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new m0(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){n.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,n.type=2===this.webGLVersion&&e.type===xt.HALF_FLOAT?this.gl.HALF_FLOAT:e.type}updateTexture(e){const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const i=this.renderer;if(this.initTextureType(e,n),e.resource?.upload(i,e,n))n.samplerType!==Ub.FLOAT&&(this.hasIntegerTextures=!0);else{const r=e.realWidth,s=e.realHeight,o=i.gl;(n.width!==r||n.height!==s||n.dirtyId<0)&&(n.width=r,n.height=s,o.texImage2D(e.target,0,n.internalFormat,r,s,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:i}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const r=this.managedTextures.indexOf(e);-1!==r&&qc(this.managedTextures,r,1)}}updateTextureStyle(e){const n=e._glTextures[this.CONTEXT_UID];!n||(n.mipmap=!!(e.mipmap!==Hs.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,n.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:ua.CLAMP,e.resource?.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const i=this.gl;if(n.mipmap&&e.mipmap!==Hs.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,n.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===bo.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===bo.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===bo.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===bo.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}zI.extension={type:Ve.RendererSystem,name:"texture"},ft.add(zI);const N$=new Yb;class $I{constructor(e){this.renderer=e,this._tempMatrix=new zn}generateTexture(e,n){const{region:i,...r}=n||{},s=i||e.getLocalBounds(null,!0);0===s.width&&(s.width=1),0===s.height&&(s.height=1);const o=pa.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=N$,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}$I.extension={type:[Ve.RendererSystem,Ve.CanvasRendererSystem],name:"textureGenerator"},ft.add($I);class WI{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color="string"==typeof e.color?Qb(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=KA(e),Qh(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}WI.extension={type:[Ve.RendererSystem,Ve.CanvasRendererSystem],name:"background"},ft.add(WI);class XI{constructor(e){this.renderer=e}init(e){this.screen=new ln(0,0,e.width,e.height),this.element=e.view||De.ADAPTER.createCanvas(),this.resolution=e.resolution||De.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}XI.extension={type:[Ve.RendererSystem,Ve.CanvasRendererSystem],name:"_view"},ft.add(XI);class YI{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(e){for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}YI.extension={type:[Ve.RendererSystem,Ve.CanvasRendererSystem],name:"_plugin"},ft.add(YI);class k$ extends Zh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(r=>e.systems[r]),i=[...n,...Object.keys(e.systems).filter(r=>!n.includes(r))];for(const r of i)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(n=>{this.runners[n]=new ps(n)})}addSystem(e,n){const i=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=i,this._systemsHash[n]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(e,n){const i=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=i.find(o=>this._systemsHash[o]===r);r[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}class qI{constructor(e){this.renderer=e}run(e){const n=this.renderer;n.emitWithCustomOptions(n.runners.init,e),e.hello&&console.log(`PixiJS 7.0.5 - ${n.rendererLogId} - https://pixijs.com`),n.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}qI.extension={type:[Ve.RendererSystem,Ve.CanvasRendererSystem],name:"startup"},ft.add(qI);class KI{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:i,renderer:r}=this;n&&r.shader.bind(n),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:i,CONTEXT_UID:r}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[r]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];!a||(i.buffer.update(a),a._glBuffers[r].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const i=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&s.dispose(a,n))}!i||(n||r.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}KI.extension={type:Ve.RendererSystem,name:"transformFeedback"},ft.add(KI);const ZI=[];ft.handleByList(Ve.Renderer,ZI);const v0=class extends k${constructor(t){super(),t=Object.assign({},De.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ms({projectionMatrix:new zn},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:v0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in t&&(lr("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this.startup.run({hello:t.hello,_plugin:v0.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}})}static test(t){return!t?.forceCanvas&&function UG(){return typeof Zb>"u"&&(Zb=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:De.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!De.ADAPTER.getWebGLRenderingContext())return!1;const n=De.ADAPTER.createCanvas();let i=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const r=!(!i||!i.getContextAttributes().stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}}()),Zb}()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return lr("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return lr("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return lr("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return lr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){lr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return lr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){lr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return lr("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Jc=v0;Jc.extension={type:Ve.Renderer,priority:1},Jc.__plugins={},Jc.__systems={},ft.handleByMap(Ve.RendererPlugin,Jc.__plugins),ft.handleByMap(Ve.RendererSystem,Jc.__systems),ft.add(Jc);class _0{constructor(){this.texArray=null,this.blend=0,this.type=Vs.TRIANGLES,this.start=0,this.size=0,this.data=null}}class y0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class b0{constructor(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class j${constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=ms.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Eo(this.vertexSrc,r)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new zn,default:this.defaultGroupCache[e]};return new $s(this.programCache[e],n)}generateSampleSrc(e){let n="";n+="\n",n+="\n";for(let i=0;i<e;i++)i>0&&(n+="\nelse "),i<e-1&&(n+=`if(vTextureId < ${i}.5)`),n+="\n{",n+=`\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`,n+="\n}";return n+="\n",n+="\n",n}}class JI extends ga{constructor(e=!1){super(),this._buffer=new ni(null,e,!1),this._indexBuffer=new ni(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,xt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,xt.FLOAT).addAttribute("aColor",this._buffer,4,!0,xt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,xt.FLOAT).addIndex(this._indexBuffer)}}const pl=class extends gg{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=JI,this.vertexSize=6,this.state=Co.for2d(),this.size=4*De.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=pl.defaultVertexSrc,fragment:e=pl.defaultFragmentTemplate}={}){this.shaderGenerator=new j$(t,e)}contextChange(){const t=this.renderer.gl;De.PREFER_ENV===al.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),De.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function s$(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=i$.replace(/%forloop%/gi,r$(t));if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=pl,n=this.size/4,i=Math.floor(n/this.MAX_TEXTURES)+1;for(;t.length<n;)t.push(new _0);for(;e.length<i;)e.push(new y0);for(let r=0;r<this.MAX_TEXTURES;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,MAX_TEXTURES:e}=this,n=pl._textureArrayPool,i=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++mn._globalBatch,a=0,l=n[0],c=0;i.copyBoundTextures(r,e);for(let f=0;f<this._bufferSize;++f){const g=t[f];t[f]=null,g._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,c,f),c=f,l=n[++a],++o),g._batchEnabled=o,g.touched=s,l.elements[l.count++]=g)}l.count>0&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,c,this._bufferSize),++a,++o);for(let f=0;f<r.length;f++)r[f]=null;mn._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:i,_attributeBuffer:r,_indexBuffer:s,vertexSize:o}=this,a=pl._drawCallPool;let l=this._dcIndex,c=this._aIndex,f=this._iIndex,g=a[l];g.start=this._iIndex,g.texArray=t;for(let v=e;v<n;++v){const _=i[v],E=ZA[_._texture.baseTexture.alphaMode?1:0][_.blendMode];i[v]=null,e<v&&g.blend!==E&&(g.size=f-g.start,e=v,g=a[++l],g.texArray=t,g.start=f),this.packInterleavedGeometry(_,r,s,c,f),c+=_.vertexData.length/2*o,f+=_.indices.length,g.blend=E}e<n&&(g.size=f-g.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;De.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,i=pl._drawCallPool;let r=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:c,blend:f}=i[s];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=f,n.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,2*c)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),De.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=cg(Math.ceil(t/8)),n=tI(e),i=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new b0(i*this.vertexSize*4)),r}getIndexBuffer(t){const e=cg(Math.ceil(t/12)),n=tI(e),i=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r}packInterleavedGeometry(t,e,n,i,r){const{uint32View:s,float32View:o}=e,a=i/this.vertexSize,l=t.uvs,c=t.indices,f=t.vertexData,g=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),_=v<1&&t._texture.baseTexture.alphaMode?Jb(t._tintRGB,v):t._tintRGB+(255*v<<24);for(let y=0;y<f.length;y+=2)o[i++]=f[y],o[i++]=f[y+1],o[i++]=l[y],o[i++]=l[y+1],s[i++]=_,o[i++]=g;for(let y=0;y<c.length;y++)n[r++]=a+c[y]}};let xg=pl;xg.extension={name:"batch",type:Ve.RendererPlugin},xg._drawCallPool=[],xg._textureArrayPool=[],ft.add(xg);class G${constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class eM{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[n]=e,i.bindBufferBase(i.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,n||0,o.buffer,256*i,256)}update(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,n.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(n||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let i=0;i<n.length;i++)this.dispose(this.managedBuffers[n[i]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:i}=this;return e._glBuffers[n]=new G$(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}eM.extension={type:Ve.RendererSystem,name:"buffer"},ft.add(eM);class tM{constructor(e){this.renderer=e}contextChange(e){let n;if(1===this.renderer.context.webGLVersion){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}this.multisample=n>=ai.HIGH?ai.HIGH:n>=ai.MEDIUM?ai.MEDIUM:n>=ai.LOW?ai.LOW:ai.NONE}destroy(){}}tM.extension={type:Ve.RendererSystem,name:"_multisample"},ft.add(tM);class nM{constructor(e){this.renderer=e}render(e,n){const i=this.renderer;let r,s,o,a;if(n&&(r=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),r&&(n.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}nM.extension={type:Ve.RendererSystem,name:"objectRenderer"},ft.add(nM),["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class x0 extends vs{constructor(){super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",{m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1}),this.alpha=1}_loadMatrix(e,n=!1){let i=e;n&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,n,i){return e[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],e[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],e[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],e[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],e[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],e[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],e[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],e[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],e[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],e[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],e[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],e[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],e[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],e[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],e[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],e[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],e[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],e[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],e[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],e[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],n)}tint(e,n){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],n)}greyscale(e,n){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],n)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,n){e=(e||0)/180*Math.PI;const i=Math.cos(e),r=Math.sin(e),o=1/3,a=(0,Math.sqrt)(o);this._loadMatrix([i+(1-i)*o,o*(1-i)-a*r,o*(1-i)+a*r,0,0,o*(1-i)+a*r,i+o*(1-i),o*(1-i)-a*r,0,0,o*(1-i)-a*r,o*(1-i)+a*r,i+o*(1-i),0,0,0,0,0,1,0],n)}contrast(e,n){const i=(e||0)+1,r=-.5*(i-1);this._loadMatrix([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],n)}saturate(e=0,n){const i=2*e/3+1,r=-.5*(i-1);this._loadMatrix([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],n)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,n,i,r,s){const o=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,l=(255&i)/255,c=((r=r||3375104)>>16&255)/255,f=(r>>8&255)/255,g=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,o,a,l,e=e||.2,0,c,f,g,n=n||.15,0,o-c,a-f,l-g,0,0],s)}night(e,n){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],n)}predator(e,n){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],n)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}x0.prototype.grayscale=x0.prototype.greyscale,De.SORTABLE_CHILDREN=!1;class Eg{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?ln.EMPTY:((e=e||new ln(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:i,b:r,c:s,d:o,tx:a,ty:l}=e,c=i*n.x+s*n.y+a,f=r*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let n=this.minX,i=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,this.minX=n,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,n,i,r,s){this.addFrameMatrix(e.worldTransform,n,i,r,s)}addFrameMatrix(e,n,i,r,s){const o=e.a,a=e.b,l=e.c,c=e.d,f=e.tx,g=e.ty;let v=this.minX,_=this.minY,y=this.maxX,E=this.maxY,S=o*n+l*i+f,T=a*n+c*i+g;v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*r+l*i+f,T=a*r+c*i+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*n+l*s+f,T=a*n+c*s+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*r+l*s+f,T=a*r+c*s+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,this.minX=v,this.minY=_,this.maxX=y,this.maxY=E}addVertexData(e,n,i){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<i;l+=2){const c=e[l],f=e[l+1];r=c<r?c:r,s=f<s?f:s,o=c>o?c:o,a=f>a?f:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,i,r){this.addVerticesMatrix(e.worldTransform,n,i,r)}addVerticesMatrix(e,n,i,r,s=0,o=s){const a=e.a,l=e.b,c=e.c,f=e.d,g=e.tx,v=e.ty;let _=this.minX,y=this.minY,E=this.maxX,S=this.maxY;for(let T=i;T<r;T+=2){const M=n[T],I=n[T+1],O=a*M+c*I+g,V=f*I+l*M+v;_=Math.min(_,O-s),E=Math.max(E,O+s),y=Math.min(y,V-o),S=Math.max(S,V+o)}this.minX=_,this.minY=y,this.maxX=E,this.maxY=S}addBounds(e){const n=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const i=e.minX>n.minX?e.minX:n.minX,r=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,f=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const i=e.minX>n.x?e.minX:n.x,r=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,f=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,i,r,s,o){n-=o,i+=s,r+=o,this.minX=this.minX<(e-=s)?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>r?this.maxY:r}}class qn extends Zh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Yb,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Eg,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let i=0;i<n.length;++i){const r=n[i];Object.defineProperty(qn.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new ln),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new ln),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Eg);const n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=n,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,i,r){return n&&(e=n.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,n=0,i=1,r=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new aW),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*RG}set angle(e){this.transform.rotation=e*PG}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,0===n._maskRefCount&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(0===n._maskRefCount&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class aW extends qn{constructor(){super(...arguments),this.sortDirty=null}}qn.prototype.displayObjectUpdateTransform=qn.prototype.updateTransform;const lW=new zn;function cW(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}class zr extends qn{constructor(){super(),this.children=[],this.sortableChildren=De.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const i=this.getChildIndex(e),r=this.getChildIndex(n);this.children[i]=n,this.children[r]=e,this.onChildrenChange(i<r?i:r)}getChildIndex(e){const n=this.children.indexOf(e);if(-1===n)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);qc(this.children,i,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],i=this.children.indexOf(n);if(-1===i)return null;n.parent=null,n.transform._parentID=-1,qc(this.children,i,1),this._boundsID++,this.onChildrenChange(i),n.emit("removed",this),this.emit("childRemoved",n,this,i)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,qc(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const s=n-e;let o;if(s>0&&s<=n){o=this.children.splice(e,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,i=this.children.length;n<i;++n){const r=this.children[n];r._lastSortedIndex=n,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(cW),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(n.visible&&n.renderable)if(n.calculateBounds(),n._mask){const i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const i=super.getLocalBounds(e);if(!n)for(let r=0,s=this.children.length;r<s;++r){const o=this.children[r];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==zr.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(r?(r=lW.copyFrom(r),r.prepend(s)):r=s),i&&n.intersects(i,r))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){const n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s])}const r=n&&this._enabledFilters?.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==gi.NONE));if(r&&e.batch.flush(),n&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}r&&e.batch.flush(),i&&e.mask.pop(this),n&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n="boolean"==typeof e?e:e?.children,i=this.removeChildren(0,this.children.length);if(n)for(let r=0;r<i.length;++r)i[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;this.scale.x=0!==n?e/n:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;this.scale.y=0!==n?e/n:1,this._height=e}}zr.prototype.containerUpdateTransform=zr.prototype.updateTransform;const od=new Qt,uW=new Uint16Array([0,1,2,0,2,3]);class gl extends zr{constructor(e){super(),this._anchor=new ha(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=Tt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||at.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=uW,this.pluginName="batch",this.isSprite=!0,this._roundPixels=De.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Kc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Kc(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,i=n.a,r=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,f=e.trim,g=e.orig,v=this._anchor;let _=0,y=0,E=0,S=0;if(f?(y=f.x-v._x*g.width,_=y+f.width,S=f.y-v._y*g.height,E=S+f.height):(y=-v._x*g.width,_=y+g.width,S=-v._y*g.height,E=S+g.height),c[0]=i*y+s*S+a,c[1]=o*S+r*y+l,c[2]=i*_+s*S+a,c[3]=o*S+r*_+l,c[4]=i*_+s*E+a,c[5]=o*E+r*_+l,c[6]=i*y+s*E+a,c[7]=o*E+r*y+l,this._roundPixels){const T=De.RESOLUTION;for(let M=0;M<c.length;++M)c[M]=Math.round(c[M]*T)/T}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const n=this.vertexTrimmedData,i=this._texture.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,f=s.tx,g=s.ty,v=-r._x*i.width,_=v+i.width,y=-r._y*i.height,E=y+i.height;n[0]=o*v+l*y+f,n[1]=c*y+a*v+g,n[2]=o*_+l*y+f,n[3]=c*y+a*_+g,n[4]=o*_+l*E+f,n[5]=c*E+a*_+g,n[6]=o*v+l*E+f,n[7]=c*E+a*v+g}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Eg),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new ln),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,od);const n=this._texture.orig.width,i=this._texture.orig.height,r=-n*this.anchor.x;let s=0;return od.x>=r&&od.x<r+n&&(s=-i*this.anchor.y,od.y>=s&&od.y<s+i)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e?.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e?.baseTexture)),this._texture=null}static from(e,n){const i=e instanceof at?e:at.from(e,n);return new gl(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Kc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Kc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||at.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const iM=new zn;qn.prototype._cacheAsBitmap=!1,qn.prototype._cacheData=null,qn.prototype._cacheAsBitmapResolution=null,qn.prototype._cacheAsBitmapMultisample=null;class hW{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(qn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new hW),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),qn.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},qn.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const i=this.getLocalBounds(null,!0).clone();this.filters?.length&&i.pad(this.filters[0].padding),i.ceil(De.RESOLUTION);const r=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=pa.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),c=`cacheAsBitmap_${dl()}`;this._cacheData.textureCacheId=c,mn.addToCache(l.baseTexture,c),at.addToCache(l,c);const f=this.transform.localTransform.copyTo(iM).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const g=new gl(l);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-i.x/i.width,g.anchor.y=-i.y/i.height,g.alpha=n,g._bounds=this._bounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=g.containsPoint.bind(g)},qn.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},qn.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const n=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=e.canvasContext.activeContext,s=e._projTransform;n.ceil(De.RESOLUTION);const o=pa.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${dl()}`;this._cacheData.textureCacheId=a,mn.addToCache(o.baseTexture,a),at.addToCache(o,a);const l=iM;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=r,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const c=new gl(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-n.x/n.width,c.anchor.y=-n.y/n.height,c.alpha=i,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)},qn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},qn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},qn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,mn.removeFromCache(this._cacheData.textureCacheId),at.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},qn.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},qn.prototype.name=null,zr.prototype.getChildByName=function(e,n){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===e)return this.children[i];if(n)for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null},qn.prototype.getGlobalPosition=function(e=new Qt,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};class ad{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=ad.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Qt,this.page=new Qt,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Cg extends ad{constructor(){super(...arguments),this.client=new Qt,this.movement=new Qt,this.offset=new Qt,this.global=new Qt,this.screen=new Qt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,i,r,s,o,a,l,c,f,g,v,_,y,E){throw new Error("Method not implemented.")}}class _s extends Cg{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class E0 extends Cg{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const pW=new Qt,C0=new Qt;class gW{constructor(e){this.dispatch=new Zh,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let i=0,r=n.length;i<r;i++)n[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,pW.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,i=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const r=i.children;if(r)for(let s=0;s<r.length;s++)this.all(e,n,r[s]);e.currentTarget=i,this.notifyTarget(e,n)}propagationPath(e){const n=[e];for(let i=0;i<2048&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestRecursive(e,n,i,r,s){if(!e||!e.visible||s(e,i))return null;if(e.interactiveChildren&&e.children){const o=e.children;for(let a=o.length-1;a>=0;a--){const l=o[a],c=this.hitTestRecursive(l,n||l.interactive,i,r,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;return(c.length>0||e.interactive)&&c.push(e),c}}}return n&&r(e,i)?e.interactive?[e]:[]:null}hitPruneFn(e,n){if(e.hitArea&&(e.worldTransform.applyInverse(n,C0),!e.hitArea.contains(C0.x,C0.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!i.containsPoint?.(n))return!0}return!1}hitTestFn(e,n){return!!e.hitArea||!!e.containsPoint&&e.containsPoint(n)}notifyTarget(e,n){n=n??e.type,this.notifyListeners(e,e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.createPointerEvent(e);this.dispatchEvent(n,"pointerdown"),"touch"===n.pointerType?this.dispatchEvent(n,"touchstart"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.dispatchEvent(n,2===n.button?"rightdown":"mousedown"),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType,r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets&&s!==n.target){const l=this.createPointerEvent(e,"mousemove"===e.type?"mouseout":"pointerout",s);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!n.composedPath().includes(s)){const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!n.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),i&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(l)}if(s!==n.target){const l=this.clonePointerEvent(n,"mousemove"===e.type?"mouseover":"pointerover");this.dispatchEvent(l,"pointerover"),i&&this.dispatchEvent(l,"mouseover");let c=s?.parent;for(;c&&c!==this.rootTarget.parent&&c!==n.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const g=this.clonePointerEvent(n,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),i&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(l)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](n,"pointermove"),"touch"===n.pointerType&&this[o](n,"touchmove"),i&&(this[o](n,"mousemove"),this.cursor=n.target?.cursor),r.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),i=this.createPointerEvent(e),r="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId);if(n.overTargets){const i="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=performance.now(),i=this.createPointerEvent(e);this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType?this.dispatchEvent(i,"touchend"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.dispatchEvent(i,2===i.button?"rightup":"mouseup");const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);)i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),a=a.parent;delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=r.clicksByButton[e.button];l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,"mouse"===a.pointerType?this.dispatchEvent(a,"click"):"touch"===a.pointerType&&this.dispatchEvent(a,"tap"),this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):("mouse"===r.pointerType||"pen"===r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof E0))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let i=1;i<e.length&&e[i].parent===n;i++)n=e[i];return n}createPointerEvent(e,n,i){const r=this.allocateEvent(_s);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=i??this.hitTest(r.global.x,r.global.y),"string"==typeof n&&(r.type=n),r}createWheelEvent(e){const n=this.allocateEvent(E0);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const i=this.allocateEvent(_s);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=n??i.type,i}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof _s&&n instanceof _s&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof Cg&&n instanceof Cg&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const i=e.currentTarget._events[n];if(i)if("fn"in i)i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e)}}const vW={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class rM{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new gW(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new _s(null),this.rootWheelEvent=new E0(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":n&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":n&&Object.assign(this.domElement.style,i)}else n&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=n.length;i<r;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const i=n!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,i){let r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=this.domElement.width/r.width*(n-r.left)*s,e.y=this.domElement.height/r.height*(i-r.top)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=1),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=vW[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}}rM.extension={name:"events",type:[Ve.RendererSystem,Ve.CanvasRendererSystem]},ft.add(rM);const _W={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r="function"==typeof e?void 0:e;this.on(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,r)},removeEventListener(t,e,n){const r="function"==typeof e?void 0:e;this.off(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,r)},dispatchEvent(t){if(!(t instanceof ad))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};qn.mixin(_W),qn.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class aM{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(xo.tablet||xo.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=2..toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let i=0;i<n.length;i++)this.updateAccessibleObjects(n[i])}update(){const e=performance.now();if(xo.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:i,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=r/o*l,f=s/a*l;let g=this.div;g.style.left=`${n}px`,g.style.top=`${i}px`,g.style.width=`${o}px`,g.style.height=`${a}px`;for(let v=0;v<this.children.length;v++){const _=this.children[v];if(_.renderId!==this.renderId)_._accessibleActive=!1,qc(this.children,v,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,v--;else{g=_._accessibleDiv;let y=_.hitArea;const E=_.worldTransform;_.hitArea?(g.style.left=(E.tx+y.x*E.a)*c+"px",g.style.top=(E.ty+y.y*E.d)*f+"px",g.style.width=y.width*E.a*c+"px",g.style.height=y.height*E.d*f+"px"):(y=_.getBounds(),this.capHitArea(y),g.style.left=y.x*c+"px",g.style.top=y.y*f+"px",g.style.width=y.width*c+"px",g.style.height=y.height*f+"px",g.title!==_.accessibleTitle&&null!==_.accessibleTitle&&(g.title=_.accessibleTitle),g.getAttribute("aria-label")!==_.accessibleHint&&null!==_.accessibleHint&&g.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==g.title||_.tabIndex!==g.tabIndex)&&(g.title=_.accessibleTitle,g.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(g))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:i}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width="100px",n.style.height="100px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=2..toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?n.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:i}=e.target,r=this.renderer.events.rootBoundary,s=Object.assign(new ad(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}aM.extension={name:"accessibility",type:[Ve.RendererPlugin,Ve.CanvasRendererPlugin]},ft.add(aM);const D0=class{constructor(t){this.stage=new zr,t=Object.assign({forceCanvas:!1},t),this.renderer=function F$(t){for(const e of ZI)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}(t),D0._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=D0._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let S0=D0;S0._plugins=[],ft.handleByList(Ve.Application,S0._plugins);class lM{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let n,i;if(this.cancelResize(),this._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;n=r,i=s}this.renderer.resize(n,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}lM.extension=Ve.Application,ft.add(lM);class DW{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var e=this;return Nt(function*(){if(e._assetList.length&&e._isActive){e._isLoading=!0;const n=[],i=Math.min(e._assetList.length,e._maxConcurrent);for(let r=0;r<i;r++)n.push(e._assetList.pop());yield e._loader.load(n),e._isLoading=!1,e._next()}})()}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Sg(t,e){const n=t.split("?")[0],i=Ai.extname(n).toLowerCase();return Array.isArray(e)?e.includes(i.toLowerCase()):i.toLowerCase()===e}const Do=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>"string"==typeof n?e(n):n):t),ld=new class SW{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const i=Do(e);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){r=l.getCacheableAssets(i,n);break}}r||(r={},i.forEach(a=>{r[a]=n}));const s=Object.keys(r),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),n instanceof at){const a=n;i.forEach(l=>{a.baseTexture!==at.EMPTY.baseTexture&&mn.addToCache(a.baseTexture,l),at.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},Tg=t=>!Array.isArray(t);class TW{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,n){var i=this;const r={promise:null,parser:null};return r.promise=Nt(function*(){let s=null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];if(a.load&&a.test?.(e,n,i)){s=yield a.load(e,n,i),r.parser=a;break}}if(!r.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];a.parse&&a.parse&&(yield a.testParse?.(s,n,i))&&(s=(yield a.parse(s,n,i))||s,r.parser=a)}return s})(),r}load(e,n){var i=this;return Nt(function*(){let r=0;const s={},o=Tg(e),a=Do(e,f=>({src:f})),l=a.length,c=a.map(function(){var f=Nt(function*(g){const v=Ai.toAbsolute(g.src);if(!s[g.src])try{i.promiseCache[v]||(i.promiseCache[v]=i._getLoadPromiseAndParser(v,g)),s[g.src]=yield i.promiseCache[v].promise,n&&n(++r/l)}catch(_){throw delete i.promiseCache[v],delete s[g.src],new Error(`[Loader.load] Failed to load ${v}.\n${_}`)}});return function(g){return f.apply(this,arguments)}}());return yield Promise.all(c),o?s[a[0].src]:s})()}unload(e){var n=this;return Nt(function*(){const r=Do(e,s=>({src:s})).map(function(){var s=Nt(function*(o){const a=Ai.toAbsolute(o.src),l=n.promiseCache[a];if(l){const c=yield l.promise;l.parser?.unload?.(c,o,n),delete n.promiseCache[a]}});return function(o){return s.apply(this,arguments)}}());yield Promise.all(r)})()}get parsers(){return this._parsers}}function cM(t,e,n,i,r){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?cM(t.replace(i[n],a),e,n+1,i,r):r.push(t.replace(i[n],a))}}function AW(t){const n=t.match(/\{(.*?)\}/g),i=[];if(n){const r=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),cM(t,r,0,n,i)}else i.push(t);return i}class IW{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const i=[];Array.isArray(n)?n.forEach(r=>{"string"==typeof r.name?i.push(r.name):i.push(...r.name),this.add(r.name,r.srcs)}):Object.keys(n).forEach(r=>{i.push(r),this.add(r,n[r])}),this._bundles[e]=i}add(e,n,i){const r=Do(e);r.forEach(o=>{this._assetMap[o]&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(n="string"==typeof n?AW(n):[n]);const s=n.map(o=>{let a=o;if("string"==typeof o){let l=!1;for(let c=0;c<this._parsers.length;c++){const f=this._parsers[c];if(f.test(o)){a=f.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=Ai.toAbsolute(a.src,this._basePath,this._rootPath)),a.data=a.data??i,a});r.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=Tg(e);e=Do(e);const i={};return e.forEach(r=>{const s=this._bundles[r];s&&(i[r]=this.resolve(s))}),n?i[e[0]]:i}resolveUrl(e){const n=this.resolve(e);if("string"!=typeof e){const i={};for(const r in n)i[r]=n[r].src;return i}return n.src}resolve(e){const n=Tg(e);e=Do(e);const i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(l=>{o.params[l].forEach(c=>{const f=s.filter(g=>!!g[l]&&g[l]===c);f.length&&(s=f)})}),this._resolverHash[r]=s[0]??a}else{let s=r;(this._basePath||this._rootPath)&&(s=Ai.toAbsolute(s,this._basePath,this._rootPath)),this._resolverHash[r]={src:s}}i[r]=this._resolverHash[r]}),n?i[e[0]]:i}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const i=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}}const Ag=new class MW{constructor(){this._detections=[],this._initialized=!1,this.resolver=new IW,this.loader=new TW,this.cache=ld,this._backgroundLoader=new DW(this.loader),this._backgroundLoader.active=!0,this.reset()}init(e={}){var n=this;return Nt(function*(){if(n._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(n._initialized=!0,e.basePath&&(n.resolver.basePath=e.basePath),e.manifest){let o=e.manifest;"string"==typeof o&&(o=yield n.load(o)),n.resolver.addManifest(o)}const i=e.texturePreference?.resolution??1,r="number"==typeof i?[i]:i;let s=[];if(e.texturePreference?.format){const o=e.texturePreference?.format;s="string"==typeof o?[o]:o;for(const a of n._detections)(yield a.test())||(s=yield a.remove(s))}else for(const o of n._detections)(yield o.test())&&(s=yield o.add(s));n.resolver.prefer({params:{format:s,resolution:r}})})()}add(e,n,i){this.resolver.add(e,n,i)}load(e,n){var i=this;return Nt(function*(){i._initialized||(yield i.init());const r=Tg(e),s=Do(e).map(l=>"string"!=typeof l?(i.resolver.add(l.src,l),l.src):l),o=i.resolver.resolve(s),a=yield i._mapLoadToResolve(o,n);return r?a[s[0]]:a})()}addBundle(e,n){this.resolver.addBundle(e,n)}loadBundle(e,n){var i=this;return Nt(function*(){i._initialized||(yield i.init());let r=!1;"string"==typeof e&&(r=!0,e=[e]);const s=i.resolver.resolveBundle(e),o={},a=Object.keys(s);let l=0,c=0;const f=()=>{n?.(++l/c)},g=a.map(v=>{const _=s[v];return c+=Object.keys(_).length,i._mapLoadToResolve(_,f).then(y=>{o[v]=y})});return yield Promise.all(g),r?o[e[0]]:o})()}backgroundLoad(e){var n=this;return Nt(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const i=n.resolver.resolve(e);n._backgroundLoader.add(Object.values(i))})()}backgroundLoadBundle(e){var n=this;return Nt(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const i=n.resolver.resolveBundle(e);Object.values(i).forEach(r=>{n._backgroundLoader.add(Object.values(r))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return ld.get(e);const n={};for(let i=0;i<e.length;i++)n[i]=ld.get(e[i]);return n}_mapLoadToResolve(e,n){var i=this;return Nt(function*(){const r=Object.values(e),s=Object.keys(e);i._backgroundLoader.active=!1;const o=yield i.loader.load(r,n);i._backgroundLoader.active=!0;const a={};return r.forEach((l,c)=>{const f=o[l.src],g=[l.src];l.alias&&g.push(...l.alias),a[s[c]]=f,ld.set(g,f)}),a})()}unload(e){var n=this;return Nt(function*(){n._initialized||(yield n.init());const i=Do(e).map(s=>"string"!=typeof s?s.src:s),r=n.resolver.resolve(i);yield n._unloadFromResolved(r)})()}unloadBundle(e){var n=this;return Nt(function*(){n._initialized||(yield n.init()),e=Do(e);const i=n.resolver.resolveBundle(e),r=Object.keys(i).map(s=>n._unloadFromResolved(i[s]));yield Promise.all(r)})()}_unloadFromResolved(e){var n=this;return Nt(function*(){const i=Object.values(e);i.forEach(r=>{ld.remove(r.src)}),yield n.loader.unload(i)})()}get detections(){return this._detections}};ft.handleByList(Ve.LoadParser,Ag.loader.parsers).handleByList(Ve.ResolveParser,Ag.resolver.parsers).handleByList(Ve.CacheParser,Ag.cache.parsers).handleByList(Ve.DetectionParser,Ag.detections);const uM={loader:Ve.LoadParser,resolver:Ve.ResolveParser,cache:Ve.CacheParser,detection:Ve.DetectionParser};ft.handle(Ve.Asset,t=>{const e=t.ref;Object.entries(uM).filter(([n])=>!!e[n]).forEach(([n,i])=>ft.add(Object.assign(e[n],{extension:e[n].extension??i})))},t=>{const e=t.ref;Object.keys(uM).filter(n=>!!e[n]).forEach(n=>ft.remove(e[n]))});const RW={extension:Ve.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof at),getCacheableAssets:(t,e)=>{const n={};return t.forEach(i=>{e.forEach((r,s)=>{n[i+(0===s?"":s+1)]=r})}),n}};ft.add(RW);var Ws=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Ws||{});const PW={extension:{type:Ve.LoadParser,priority:Ws.Low},test:t=>Ai.extname(t).includes(".json"),load:t=>Nt(function*(){return yield(yield De.ADAPTER.fetch(t)).json()})()};ft.add(PW);const OW={extension:{type:Ve.LoadParser,priority:Ws.Low},test:t=>Ai.extname(t).includes(".txt"),load:t=>Nt(function*(){return yield(yield De.ADAPTER.fetch(t)).text()})()};function hM(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}ft.add(OW);const NW=["normal","bold","100","200","300","400","500","600","700","800","900"],kW=[".ttf",".otf",".woff",".woff2"],FW=["font/ttf","font/otf","font/woff","font/woff2"],BW={extension:{type:Ve.LoadParser,priority:Ws.Low},test:t=>hM(t,FW)||Sg(t,kW),load:(t,e)=>Nt(function*(){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const n=De.ADAPTER.getFontFaceSet();if(n){const i=[],r=e.data?.family??function LW(t){const e=Ai.extname(t);return Ai.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}(t),s=e.data?.weights?.filter(a=>NW.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],c=new FontFace(r,`url(${encodeURI(t)})`,{...o,weight:l});yield c.load(),n.add(c),i.push(c)}return 1===i.length?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(t){(Array.isArray(t)?t:[t]).forEach(e=>De.ADAPTER.getFontFaceSet().delete(e))}};ft.add(BW);let T0,dM=0;const UW_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",jW_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let A0;const fM=new class VW{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([UW_code],{type:"application/javascript"})),i=new Worker(n);i.addEventListener("message",r=>{i.terminate(),URL.revokeObjectURL(n),e(r.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){var e=this;return Nt(function*(){e._initialized||(e._initialized=!0)})()}getWorker(){void 0===T0&&(T0=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<T0&&(A0||(A0=URL.createObjectURL(new Blob([jW_code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(A0),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,n){var i=this;return Nt(function*(){yield i._initWorkers();const r=new Promise((s,o)=>{i.queue.push({id:e,arguments:n,resolve:s,reject:o})});return i.next(),r})()}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),i=n.id;this.resolveHash[dM]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:dM++,id:i})}};function Ig(t,e,n){const i=new at(t);return i.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),i}const HW=[".jpeg",".jpg",".png",".webp",".avif"],GW=["image/jpeg","image/png","image/webp","image/avif"];function I0(){return(I0=Nt(function*(t){const e=yield De.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=yield e.blob();return yield createImageBitmap(n)})).apply(this,arguments)}const M0={extension:{type:Ve.LoadParser,priority:Ws.High},config:{preferWorkers:!0},test:t=>hM(t,GW)||Sg(t,HW),load(t,e,n){var i=this;return Nt(function*(){let r=null;r=globalThis.createImageBitmap?i.config.preferWorkers&&(yield fM.isImageBitmapSupported())?yield fM.loadImageBitmap(t):yield function zW(t){return I0.apply(this,arguments)}(t):yield new Promise(o=>{r=new Image,r.crossOrigin="anonymous",r.src=t,r.complete?o(r):r.onload=()=>{o(r)}});const s=new mn(r,{resolution:da(t),...e.data});return s.resource.src=t,Ig(s,n,t)})()},unload(t){t.destroy(!0)}};ft.add(M0);const $W={extension:Ve.ResolveParser,test:M0.test,parse:t=>({resolution:parseFloat(De.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};ft.add($W);const WW={extension:{type:Ve.DetectionParser,priority:1},test:(t=Nt(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield De.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(i=>i.blob());return createImageBitmap(n).then(()=>!0,()=>!1)}),function(){return t.apply(this,arguments)}),add:function(){var t=Nt(function*(e){return[...e,"avif"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Nt(function*(e){return e.filter(n=>"avif"!==n)});return function(n){return t.apply(this,arguments)}}()};var t;ft.add(WW);const XW={extension:{type:Ve.DetectionParser,priority:0},test:function(){var t=Nt(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield De.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(i=>i.blob());return createImageBitmap(n).then(()=>!0,()=>!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=Nt(function*(e){return[...e,"webp"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Nt(function*(e){return e.filter(n=>"webp"!==n)});return function(n){return t.apply(this,arguments)}}()};ft.add(XW);const pM=["png","jpg","jpeg"],YW={extension:{type:Ve.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var t=Nt(function*(e){return[...e,...pM]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Nt(function*(e){return e.filter(n=>!pM.includes(n))});return function(n){return t.apply(this,arguments)}}()};ft.add(YW);var Dr=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Dr||{});const Mg={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};class qW extends ed{constructor(e,n={width:1,height:1,autoLoad:!0}){let i,r;"string"==typeof e?(i=e,r=new Uint8Array):(i=null,r=e),super(r,n),this.origin=i,this.buffer=r?new b0(r):null,this.origin&&!1!==n.autoLoad&&this.load(),r?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){var e=this;return Nt(function*(){const r=yield(yield(yield fetch(e.origin)).blob()).arrayBuffer();return e.data=new Uint32Array(r),e.buffer=new b0(r),e.loaded=!0,e.onBlobLoaded(r),e.update(),e})()}}class ml extends qW{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=ml._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||ml._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,i){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:f,levelBuffer:g}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,c,f,0,g)}return!0}onBlobLoaded(){this._levelBuffers=ml._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,i,r,s,o,a){const l=new Array(i);let c=e.byteOffset,f=o,g=a,v=f+r-1&~(r-1),_=g+s-1&~(s-1),y=v*_*Mg[n];for(let E=0;E<i;E++)l[E]={levelID:E,levelWidth:i>1?f:v,levelHeight:i>1?g:_,levelBuffer:new Uint8Array(e.buffer,c,y)},c+=y,f=f>>1||1,g=g>>1||1,v=f+r-1&~(r-1),_=g+s-1&~(s-1),y=v*_*Mg[n];return l}}let So,eu;function gM(){eu={s3tc:So.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:So.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:So.getExtension("WEBGL_compressed_texture_etc"),etc1:So.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:So.getExtension("WEBGL_compressed_texture_pvrtc")||So.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:So.getExtension("WEBGL_compressed_texture_atc"),astc:So.getExtension("WEBGL_compressed_texture_astc")}}const KW={extension:{type:Ve.DetectionParser,priority:2},test:function(){var t=Nt(function*(){const n=De.ADAPTER.createCanvas().getContext("webgl");return n?(So=n,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=Nt(function*(e){eu||gM();const n=[];for(const i in eu)!eu[i]||n.push(i);return[...n,...e]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Nt(function*(e){return eu||gM(),e.filter(n=>!(n in eu))});return function(n){return t.apply(this,arguments)}}()};ft.add(KW);const f6={827611204:Dr.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Dr.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Dr.COMPRESSED_RGBA_S3TC_DXT5_EXT},p6={70:Dr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Dr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Dr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Dr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Dr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Dr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Dr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Dr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Dr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},vM=[171,75,84,88,32,49,49,187,13,10,26,10],_M={[xt.UNSIGNED_BYTE]:1,[xt.UNSIGNED_SHORT]:2,[xt.INT]:4,[xt.UNSIGNED_INT]:4,[xt.FLOAT]:4,[xt.HALF_FLOAT]:8},v6={[Me.RGBA]:4,[Me.RGB]:3,[Me.RG]:2,[Me.RED]:1,[Me.LUMINANCE]:1,[Me.LUMINANCE_ALPHA]:2,[Me.ALPHA]:1},_6={[xt.UNSIGNED_SHORT_4_4_4_4]:2,[xt.UNSIGNED_SHORT_5_5_5_1]:2,[xt.UNSIGNED_SHORT_5_6_5]:2};function w6(t){switch(t){case Me.RGBA:return Me.RGBA_INTEGER;case Me.RGB:return Me.RGB_INTEGER;case Me.RG:return Me.RG_INTEGER;case Me.RED:return Me.RED_INTEGER;default:return t}}const E6={extension:{type:Ve.LoadParser,priority:Ws.High},test:t=>Sg(t,".dds"),load:(t,e,n)=>Nt(function*(){const o=function g6(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],s=i[4],o=i[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=a[1];if(4&l){const c=a[2];if(808540228!==c){const I=f6[c],V=new Uint8Array(t,128);return[new ml(V,{format:I,width:s,height:r,levels:o})]}const g=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),v=g[0],_=g[1],y=g[2],E=g[3],S=p6[v];if(void 0===S)throw new Error(`DDSParser cannot parse texture data with DXGI format ${v}`);if(4===y)throw new Error("DDSParser does not support cubemap textures");if(6===_)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,M=148;if(1===E)T.push(new Uint8Array(t,M));else{const I=Mg[S];let O=0,V=s,q=r;for(let ie=0;ie<o;ie++)O+=Math.max(1,V+3&-4)*Math.max(1,q+3&-4)*I,V>>>=1,q>>>=1;let Q=M;for(let ie=0;ie<E;ie++)T.push(new Uint8Array(t,Q,O)),Q+=O}return T.map(I=>new ml(I,{format:S,width:s,height:r,levels:o}))}throw 64&l?new Error("DDSParser does not support uncompressed texture data."):512&l?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&l?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&l?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield De.ADAPTER.fetch(t)).arrayBuffer()).map(a=>Ig(new mn(a,{mipmap:Hs.OFF,alphaMode:fs.NO_PREMULTIPLIED_ALPHA,resolution:da(t),...e.data}),n,t));return 1===o.length?o[0]:o})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ft.add(E6);const C6={extension:{type:Ve.LoadParser,priority:Ws.High},test:t=>Sg(t,".ktx"),load:(t,e,n)=>Nt(function*(){const r=yield(yield De.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=function y6(t,e,n=!1){const i=new DataView(e);if(!function b6(t,e){for(let n=0;n<vM.length;n++)if(e.getUint8(n)!==vM[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}(t,i))return null;const r=67305985===i.getUint32(12,!0),s=i.getUint32(16,r),o=i.getUint32(24,r),a=i.getUint32(28,r),l=i.getUint32(36,r),c=i.getUint32(40,r)||1,f=i.getUint32(44,r)||1,g=i.getUint32(48,r)||1,v=i.getUint32(52,r),_=i.getUint32(56,r),y=i.getUint32(60,r);if(0===c||1!==f)throw new Error("Only 2D textures are supported");if(1!==v)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==g)throw new Error("WebGL does not support array textures");const T=l+3&-4,M=c+3&-4,I=new Array(g);let V,O=l*c;if(0===s&&(O=T*M),V=0!==s?_M[s]?_M[s]*v6[o]:_6[s]:Mg[a],void 0===V)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const q=n?function x6(t,e,n){const i=new Map;let r=0;for(;r<e;){const s=t.getUint32(64+r,n),o=64+r+4,a=3-(s+3)%4;if(0===s||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==t.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=(new TextDecoder).decode(new Uint8Array(t.buffer,o,l)),f=new DataView(t.buffer,o+l+1,s-l-1);i.set(c,f),r+=4+s+a}return i}(i,y,r):null;let ie=O*V,ve=l,he=c,ee=T,de=M,ue=64+y;for(let ge=0;ge<_;ge++){const Ge=i.getUint32(ue,r);let st=ue+4;for(let Ze=0;Ze<g;Ze++){let pn=I[Ze];pn||(pn=I[Ze]=new Array(_)),pn[ge]={levelID:ge,levelWidth:_>1||0!==s?ve:ee,levelHeight:_>1||0!==s?he:de,levelBuffer:new Uint8Array(e,st,ie)},st+=ie}ue+=Ge+4,ue=ue%4!=0?ue+4-ue%4:ue,ve=ve>>1||1,he=he>>1||1,ee=ve+4-1&-4,de=he+4-1&-4,ie=ee*de*V}return 0!==s?{uncompressed:I.map(ge=>{let Ge=ge[0].levelBuffer,st=!1;return s===xt.FLOAT?Ge=new Float32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4):s===xt.UNSIGNED_INT?(st=!0,Ge=new Uint32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4)):s===xt.INT&&(st=!0,Ge=new Int32Array(ge[0].levelBuffer.buffer,ge[0].levelBuffer.byteOffset,ge[0].levelBuffer.byteLength/4)),{resource:new ed(Ge,{width:ge[0].levelWidth,height:ge[0].levelHeight}),type:s,format:st?w6(o):o}}),kvData:q}:{compressed:I.map(ge=>new ml(null,{format:a,width:l,height:c,levels:_,levelBuffers:ge})),kvData:q}}(t,r),l=s??o,c={mipmap:Hs.OFF,alphaMode:fs.NO_PREMULTIPLIED_ALPHA,resolution:da(t),...e.data},f=l.map(g=>{l===o&&Object.assign(c,{type:g.type,format:g.format});const v=new mn(g,c);return v.ktxKeyValueData=a,Ig(v,n,t)});return 1===f.length?f[0]:f})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};ft.add(C6);const D6={extension:Ve.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(r=>t.endsWith(r)))return{resolution:parseFloat(De.RETINA_PREFIX.exec(t)?.[1]??"1"),format:i.find(r=>t.endsWith(r)),src:t}}return{resolution:parseFloat(De.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};ft.add(D6);const yM=new ln,O0=class{constructor(t){this.renderer=t}image(t,e,n){var i=this;return Nt(function*(){const r=new Image;return r.src=yield i.base64(t,e,n),r})()}base64(t,e,n){var i=this;return Nt(function*(){const r=i.canvas(t);if(void 0!==r.toDataURL)return r.toDataURL(e,n);if(void 0!==r.convertToBlob){const s=yield r.convertToBlob({type:e,quality:n});return yield new Promise(o=>{const a=new FileReader;a.onload=()=>o(a.result),a.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")})()}canvas(t,e){const n=this.renderer;let i,s,r=!1,o=!1;t&&(t instanceof pa?s=t:(s=this.renderer.generateTexture(t),o=!0)),s?(i=s.baseTexture.resolution,e=e??s.frame,r=!1,n.renderTexture.bind(s)):(i=n.resolution,e||((e=yM).width=n.width,e.height=n.height),r=!0,n.renderTexture.bind(null));const a=Math.round(e.width*i),l=Math.round(e.height*i);let c=new iI(a,l,1);const f=new Uint8Array(4*a*l),g=n.gl;g.readPixels(Math.round(e.x*i),Math.round(e.y*i),a,l,g.RGBA,g.UNSIGNED_BYTE,f);const v=c.context.getImageData(0,0,a,l);if(O0.arrayPostDivide(f,v.data),c.context.putImageData(v,0,0),r){const _=new iI(c.width,c.height,1);_.context.scale(1,-1),_.context.drawImage(c.canvas,0,-l),c.destroy(),c=_}return o&&s.destroy(!0),c.canvas}pixels(t,e){const n=this.renderer;let i,r,s=!1;t&&(t instanceof pa?r=t:(r=this.renderer.generateTexture(t),s=!0)),r?(i=r.baseTexture.resolution,e=e??r.frame,n.renderTexture.bind(r)):(i=n.resolution,e||((e=yM).width=n.width,e.height=n.height),n.renderTexture.bind(null));const o=Math.round(e.width*i),a=Math.round(e.height*i),l=new Uint8Array(4*o*a),c=n.gl;return c.readPixels(Math.round(e.x*i),Math.round(e.y*i),o,a,c.RGBA,c.UNSIGNED_BYTE,l),s&&r.destroy(!0),O0.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let n=0;n<t.length;n+=4){const i=e[n+3]=t[n+3];0!==i?(e[n]=Math.round(Math.min(255*t[n]/i,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/i,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}}};let wM=O0;wM.extension={name:"extract",type:Ve.RendererSystem},ft.add(wM);var ma=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(ma||{}),vl=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(vl||{});const cd={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class Ng{constructor(){this.color=16777215,this.alpha=1,this.texture=at.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Ng;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=at.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function xM(t,e=!1){const n=t.length;if(n<6)return;let i=0;for(let r=0,s=t[n-2],o=t[n-1];r<n;r+=2){const a=t[r],l=t[r+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const r=n/2;for(let s=r+r%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const N0={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const i=t.holes,r=e.points,s=e.indices;if(n.length>=6){xM(n,!1);const o=[];for(let c=0;c<i.length;c++){const f=i[c];xM(f.points,!0),o.push(n.length/2),n=n.concat(f.points)}const a=NG(n,o,2);if(!a)return;const l=r.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)r.push(n[c])}}},ud={build(t){const e=t.points;let n,i,r,s,o,a;if(t.type===Ti.CIRC){const y=t.shape;n=y.x,i=y.y,o=a=y.radius,r=s=0}else if(t.type===Ti.ELIP){const y=t.shape;n=y.x,i=y.y,o=y.width,a=y.height,r=s=0}else{const y=t.shape,E=y.width/2,S=y.height/2;n=y.x+E,i=y.y+S,o=a=Math.max(0,Math.min(y.radius,Math.min(E,S))),r=E-o,s=S-a}if(!(o>=0&&a>=0&&r>=0&&s>=0))return void(e.length=0);const l=Math.ceil(2.3*Math.sqrt(o+a)),c=8*l+(r?4:0)+(s?4:0);if(e.length=c,0===c)return;if(0===l)return e.length=8,e[0]=e[6]=n+r,e[1]=e[3]=i+s,e[2]=e[4]=n-r,void(e[5]=e[7]=i-s);let f=0,g=4*l+(r?2:0)+2,v=g,_=c;{const y=r+o,E=s,S=n+y,T=n-y,M=i+E;if(e[f++]=S,e[f++]=M,e[--g]=M,e[--g]=T,s){const I=i-E;e[v++]=T,e[v++]=I,e[--_]=I,e[--_]=S}}for(let y=1;y<l;y++){const E=Math.PI/2*(y/l),S=r+Math.cos(E)*o,T=s+Math.sin(E)*a,M=n+S,I=n-S,O=i+T,V=i-T;e[f++]=M,e[f++]=O,e[--g]=O,e[--g]=I,e[v++]=I,e[v++]=V,e[--_]=V,e[--_]=M}{const E=s+a,S=n+r,T=n-r,M=i+E,I=i-E;e[f++]=S,e[f++]=M,e[--_]=I,e[--_]=S,r&&(e[f++]=T,e[f++]=M,e[--_]=I,e[--_]=T)}},triangulate(t,e){const n=t.points,i=e.points,r=e.indices;if(0===n.length)return;let s=i.length/2;const o=s;let a,l;if(t.type!==Ti.RREC){const f=t.shape;a=f.x,l=f.y}else{const f=t.shape;a=f.x+f.width/2,l=f.y+f.height/2}const c=t.matrix;i.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,i.push(n[0],n[1]);for(let f=2;f<n.length;f+=2)i.push(n[f],n[f+1]),r.push(s++,o,s);r.push(o+1,o,s)}},EM={build(t){const e=t.shape,n=e.x,i=e.y,r=e.width,s=e.height,o=t.points;o.length=0,r>=0&&s>=0&&o.push(n,i,n+r,i,n+r,i+s,n,i+s)},triangulate(t,e){const n=t.points,i=e.points;if(0===n.length)return;const r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},CM={build(t){ud.build(t)},triangulate(t,e){ud.triangulate(t,e)}};function DM(t,e,n,i,r,s,o,a){let v,_;o?(v=i,_=-n):(v=-i,_=n);const S=t+n*s+v,T=e+i*s+_;return a.push(t-n*r+v,e-i*r+_),a.push(S,T),2}function _l(t,e,n,i,r,s,o,a){const l=n-t,c=i-e;let f=Math.atan2(l,c),g=Math.atan2(r-t,s-e);a&&f<g?f+=2*Math.PI:!a&&f>g&&(g+=2*Math.PI);let v=f;const _=g-f,y=Math.abs(_),E=Math.sqrt(l*l+c*c),S=1+(15*y*Math.sqrt(E)/Math.PI>>0),T=_/S;if(v+=T,a){o.push(t,e),o.push(n,i);for(let M=1,I=v;M<S;M++,I+=T)o.push(t,e),o.push(t+Math.sin(I)*E,e+Math.cos(I)*E);o.push(t,e),o.push(r,s)}else{o.push(n,i),o.push(t,e);for(let M=1,I=v;M<S;M++,I+=T)o.push(t+Math.sin(I)*E,e+Math.cos(I)*E),o.push(t,e);o.push(r,s),o.push(t,e)}return 2*S}function k0(t,e){t.lineStyle.native?function T6(t,e){let n=0;const i=t.shape,r=t.points||i.points,s=i.type!==Ti.POLY||i.closeStroke;if(0===r.length)return;const o=e.points,a=e.indices,l=r.length/2,c=o.length/2;let f=c;for(o.push(r[0],r[1]),n=1;n<l;n++)o.push(r[2*n],r[2*n+1]),a.push(f,f+1),f++;s&&a.push(f,c)}(t,e):function S6(t,e){const n=t.shape;let i=t.points||n.points.slice();const r=e.closePointEps;if(0===i.length)return;const s=t.lineStyle,o=new Qt(i[0],i[1]),a=new Qt(i[i.length-2],i[i.length-1]),l=n.type!==Ti.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){i=i.slice(),c&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const Ze=.5*(o.x+a.x),pn=.5*(a.y+o.y);i.unshift(Ze,pn),i.push(Ze,pn)}const f=e.points,g=i.length/2;let v=i.length;const _=f.length/2,y=s.width/2,E=y*y,S=s.miterLimit*s.miterLimit;let T=i[0],M=i[1],I=i[2],O=i[3],V=0,q=0,Q=-(M-O),ie=T-I,ve=0,he=0,ee=Math.sqrt(Q*Q+ie*ie);Q/=ee,ie/=ee,Q*=y,ie*=y;const de=s.alignment,ue=2*(1-de),ge=2*de;l||(s.cap===vl.ROUND?v+=_l(T-Q*(ue-ge)*.5,M-ie*(ue-ge)*.5,T-Q*ue,M-ie*ue,T+Q*ge,M+ie*ge,f,!0)+2:s.cap===vl.SQUARE&&(v+=DM(T,M,Q,ie,ue,ge,!0,f))),f.push(T-Q*ue,M-ie*ue),f.push(T+Q*ge,M+ie*ge);for(let Ze=1;Ze<g-1;++Ze){T=i[2*(Ze-1)],M=i[2*(Ze-1)+1],I=i[2*Ze],O=i[2*Ze+1],V=i[2*(Ze+1)],q=i[2*(Ze+1)+1],Q=-(M-O),ie=T-I,ee=Math.sqrt(Q*Q+ie*ie),Q/=ee,ie/=ee,Q*=y,ie*=y,ve=-(O-q),he=I-V,ee=Math.sqrt(ve*ve+he*he),ve/=ee,he/=ee,ve*=y,he*=y;const pn=I-T,sn=M-O,qr=I-V,Zs=q-O,Oo=pn*qr+sn*Zs,Qs=sn*qr-Zs*pn,No=Qs<0;if(Math.abs(Qs)<.001*Math.abs(Oo)){f.push(I-Q*ue,O-ie*ue),f.push(I+Q*ge,O+ie*ge),Oo>=0&&(v+=s.join===ma.ROUND?_l(I,O,I-Q*ue,O-ie*ue,I-ve*ue,O-he*ue,f,!1)+4:2,f.push(I-ve*ge,O-he*ge),f.push(I+ve*ue,O+he*ue));continue}const vu=(-Q+T)*(-ie+O)-(-Q+I)*(-ie+M),_u=(-ve+V)*(-he+O)-(-ve+I)*(-he+q),Nm=(pn*_u-qr*vu)/Qs,km=(Zs*vu-sn*_u)/Qs,sx=(Nm-I)*(Nm-I)+(km-O)*(km-O),Ml=I+(Nm-I)*ue,Rl=O+(km-O)*ue,Pl=I-(Nm-I)*ge,Ol=O-(km-O)*ge,ZO=No?ue:ge;sx<=Math.min(pn*pn+sn*sn,qr*qr+Zs*Zs)+ZO*ZO*E?s.join===ma.BEVEL||sx/E>S?(No?(f.push(Ml,Rl),f.push(I+Q*ge,O+ie*ge),f.push(Ml,Rl),f.push(I+ve*ge,O+he*ge)):(f.push(I-Q*ue,O-ie*ue),f.push(Pl,Ol),f.push(I-ve*ue,O-he*ue),f.push(Pl,Ol)),v+=2):s.join===ma.ROUND?No?(f.push(Ml,Rl),f.push(I+Q*ge,O+ie*ge),v+=_l(I,O,I+Q*ge,O+ie*ge,I+ve*ge,O+he*ge,f,!0)+4,f.push(Ml,Rl),f.push(I+ve*ge,O+he*ge)):(f.push(I-Q*ue,O-ie*ue),f.push(Pl,Ol),v+=_l(I,O,I-Q*ue,O-ie*ue,I-ve*ue,O-he*ue,f,!1)+4,f.push(I-ve*ue,O-he*ue),f.push(Pl,Ol)):(f.push(Ml,Rl),f.push(Pl,Ol)):(f.push(I-Q*ue,O-ie*ue),f.push(I+Q*ge,O+ie*ge),s.join===ma.ROUND?v+=No?_l(I,O,I+Q*ge,O+ie*ge,I+ve*ge,O+he*ge,f,!0)+2:_l(I,O,I-Q*ue,O-ie*ue,I-ve*ue,O-he*ue,f,!1)+2:s.join===ma.MITER&&sx/E<=S&&(No?(f.push(Pl,Ol),f.push(Pl,Ol)):(f.push(Ml,Rl),f.push(Ml,Rl)),v+=2),f.push(I-ve*ue,O-he*ue),f.push(I+ve*ge,O+he*ge),v+=2)}T=i[2*(g-2)],M=i[2*(g-2)+1],I=i[2*(g-1)],O=i[2*(g-1)+1],Q=-(M-O),ie=T-I,ee=Math.sqrt(Q*Q+ie*ie),Q/=ee,ie/=ee,Q*=y,ie*=y,f.push(I-Q*ue,O-ie*ue),f.push(I+Q*ge,O+ie*ge),l||(s.cap===vl.ROUND?v+=_l(I-Q*(ue-ge)*.5,O-ie*(ue-ge)*.5,I-Q*ue,O-ie*ue,I+Q*ge,O+ie*ge,f,!1)+2:s.cap===vl.SQUARE&&(v+=DM(I,O,Q,ie,ue,ge,!1,f)));const Ge=e.indices,st=cd.epsilon*cd.epsilon;for(let Ze=_;Ze<v+_-2;++Ze)T=f[2*Ze],M=f[2*Ze+1],I=f[2*(Ze+1)],O=f[2*(Ze+1)+1],V=f[2*(Ze+2)],q=f[2*(Ze+2)+1],!(Math.abs(T*(O-q)+I*(q-M)+V*(M-O))<st)&&Ge.push(Ze,Ze+1,Ze+2)}(t,e)}class F0{static curveTo(e,n,i,r,s,o){const c=o[o.length-1]-n,f=o[o.length-2]-e,g=r-n,v=i-e,_=Math.abs(c*v-f*g);if(_<1e-8||0===s)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const y=c*c+f*f,E=g*g+v*v,S=c*g+f*v,T=s*Math.sqrt(y)/_,M=s*Math.sqrt(E)/_,I=T*S/y,O=M*S/E,V=T*v+M*f,q=T*g+M*c,ve=v*(T+O),he=g*(T+O);return{cx:V+e,cy:q+n,radius:s,startAngle:Math.atan2(c*(M+I)-q,f*(M+I)-V),endAngle:Math.atan2(he-q,ve-V),anticlockwise:f*g>v*c}}static arc(e,n,i,r,s,o,a,l,c){const f=a-o,g=cd._segmentsCount(Math.abs(f)*s,40*Math.ceil(Math.abs(f)/og)),v=f/(2*g),_=2*v,y=Math.cos(v),E=Math.sin(v),S=g-1,T=S%1/S;for(let M=0;M<=S;++M){const O=v+o+_*(M+T*M),V=Math.cos(O),q=-Math.sin(O);c.push((y*V+E*q)*s+i,(y*-q+E*V)*s+r)}}}class kg{static curveLength(e,n,i,r,s,o,a,l){let f=0,g=0,v=0,_=0,y=0,E=0,S=0,T=0,M=0,I=0,O=0,V=e,q=n;for(let Q=1;Q<=10;++Q)g=Q/10,v=g*g,_=v*g,y=1-g,E=y*y,S=E*y,T=S*e+3*E*g*i+3*y*v*s+_*a,M=S*n+3*E*g*r+3*y*v*o+_*l,I=V-T,O=q-M,V=T,q=M,f+=Math.sqrt(I*I+O*O);return f}static curveTo(e,n,i,r,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const f=cd._segmentsCount(kg.curveLength(l,c,e,n,i,r,s,o));let g=0,v=0,_=0,y=0,E=0;a.push(l,c);for(let S=1,T=0;S<=f;++S)T=S/f,g=1-T,v=g*g,_=v*g,y=T*T,E=y*T,a.push(_*l+3*v*T*e+3*g*y*i+E*s,_*c+3*v*T*n+3*g*y*r+E*o)}}class Fg{static curveLength(e,n,i,r,s,o){const a=e-2*i+s,l=n-2*r+o,c=2*i-2*e,f=2*r-2*n,g=4*(a*a+l*l),v=4*(a*c+l*f),_=c*c+f*f,y=2*Math.sqrt(g+v+_),E=Math.sqrt(g),S=2*g*E,T=2*Math.sqrt(_),M=v/E;return(S*y+E*v*(y-T)+(4*_*g-v*v)*Math.log((2*E+M+y)/(M+T)))/(4*S)}static curveTo(e,n,i,r,s){const o=s[s.length-2],a=s[s.length-1],l=cd._segmentsCount(Fg.curveLength(o,a,e,n,i,r));let c=0,f=0;for(let g=1;g<=l;++g){const v=g/l;c=o+(e-o)*v,f=a+(n-a)*v,s.push(c+(e+(i-e)*v-c)*v,f+(n+(r-n)*v-f)*v)}}}const Lg={[Ti.POLY]:N0,[Ti.CIRC]:ud,[Ti.ELIP]:ud,[Ti.RECT]:EM,[Ti.RREC]:CM},L0=[],hd=[];class Bg{constructor(e,n=null,i=null,r=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=n,this.matrix=r,this.type=e.type}clone(){return new Bg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class SM{constructor(){this.reset()}begin(e,n,i){this.reset(),this.style=e,this.start=n,this.attribStart=i}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const tu=new Qt,TM=class extends JI{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Eg,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),hd.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),L0.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,i=null){const r=new Bg(t,e,n,i);return this.graphicsData.push(r),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new Bg(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const i=e[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,tu):tu.copyFrom(t),i.shape.contains(tu.x,tu.y))){let r=!1;if(i.holes)for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(tu.x,tu.y)){r=!0;break}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],c=l.fillStyle,f=l.lineStyle;Lg[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||f.visible)&&this.processHoles(l.holes);for(let v=0;v<2;v++){const _=0===v?c:f;if(!_.visible)continue;const E=this.indices.length,S=this.points.length/2;_.texture.baseTexture.wrapMode=ua.REPEAT,0===v?this.processFill(l):this.processLine(l);const T=this.points.length/2-S;0!==T&&(n&&!this._compareStyles(i,_)&&(n.end(E,S),n=null),n||(n=L0.pop()||new SM,n.begin(_,E,S),this.batches.push(n),i=_),this.addUvs(this.points,t,_.texture,S,T,_.matrix))}}const s=this.points.length/2;if(n&&n.end(this.indices.length,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const i=t[e];for(let r=0;r<i.size;r++){const s=i.start+r;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*TM.BATCHABLE_SIZE}buildDrawCalls(){let t=++mn._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),hd.push(this.drawCalls[f]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let i=hd.pop();i||(i=new _0,i.texArray=new y0),i.texArray.count=0,i.start=0,i.size=0,i.type=Vs.TRIANGLES;let r=0,s=null,o=0,a=!1,l=Vs.TRIANGLES,c=0;this.drawCalls.push(i);for(let f=0;f<this.batches.length;f++){const g=this.batches[f],v=8,_=g.style,y=_.texture.baseTexture;a!==!!_.native&&(a=!!_.native,l=a?Vs.LINES:Vs.TRIANGLES,s=null,r=v,t++),s!==y&&(s=y,y._batchEnabled!==t&&(r===v&&(t++,r=0,i.size>0&&(i=hd.pop(),i||(i=new _0,i.texArray=new y0),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=l),y.touched=1,y._batchEnabled=t,y._batchLocation=r,y.wrapMode=ua.REPEAT,i.texArray.elements[i.texArray.count++]=y,r++)),i.size+=g.size,c+=g.size,o=y._batchLocation,this.addColors(e,_.color,_.alpha,g.attribSize,g.attribStart),this.addTextureIds(n,o,g.attribSize,g.attribStart)}mn._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[2*l],s[a++]=t[2*l+1],s[a++]=e[2*l],s[a++]=e[2*l+1],o[a++]=n[l],s[a++]=i[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?N0.triangulate(t,this):Lg[t.type].triangulate(t,this)}processLine(t){k0(t,this);for(let e=0;e<t.holes.length;e++)k0(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];Lg[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const i=t[2*n],r=t[2*n+1];t[2*n]=e.a*i+e.c*r+e.tx,t[2*n+1]=e.b*i+e.d*r+e.ty}}addColors(t,e,n,i,r=0){const o=Jb((e>>16)+(65280&e)+((255&e)<<16),n);t.length=Math.max(t.length,r+i);for(let a=0;a<i;a++)t[r+a]=o}addTextureIds(t,e,n,i=0){t.length=Math.max(t.length,i+n);for(let r=0;r<n;r++)t[i+r]=e}addUvs(t,e,n,i,r,s=null){let o=0;const a=e.length,l=n.frame;for(;o<r;){let f=t[2*(i+o)],g=t[2*(i+o)+1];if(s){const v=s.a*f+s.c*g+s.tx;g=s.b*f+s.d*g+s.ty,f=v}o++,e.push(f/l.width,g/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(e,n,a,r)}adjustUvs(t,e,n,i){const r=e.baseTexture,s=1e-6,o=n+2*i,a=e.frame,l=a.width/r.width,c=a.height/r.height;let f=a.x/a.width,g=a.y/a.height,v=Math.floor(t[n]+s),_=Math.floor(t[n+1]+s);for(let y=n+2;y<o;y+=2)v=Math.min(v,Math.floor(t[y]+s)),_=Math.min(_,Math.floor(t[y+1]+s));f-=v,g-=_;for(let y=n;y<o;y+=2)t[y]=(t[y]+f)*l,t[y+1]=(t[y+1]+g)*c}};let AM=TM;AM.BATCHABLE_SIZE=100;class B0 extends Ng{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=vl.BUTT,this.join=ma.MITER,this.miterLimit=10}clone(){const e=new B0;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const A6=new Float32Array(3),U0={},Ug=class extends zr{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Ng,this._lineStyle=new B0,this._matrix=null,this._holeMode=!1,this.state=Co.for2d(),this._geometry=t||new AM,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=Tt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ug(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n=1,i=.5,r=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:i,native:r}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:at.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:vl.BUTT,join:ma.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Xc,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Xc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points;return(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,i){this._initCurve();const r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),Fg.curveTo(t,e,n,i,r),this}bezierCurveTo(t,e,n,i,r,s){return this._initCurve(),kg.curveTo(t,e,n,i,r,s,this.currentPath.points),this}arcTo(t,e,n,i,r){this._initCurve(t,e);const o=F0.curveTo(t,e,n,i,r,this.currentPath.points);if(o){const{cx:a,cy:l,radius:c,startAngle:f,endAngle:g,anticlockwise:v}=o;this.arc(a,l,c,f,g,v)}return this}arc(t,e,n,i,r,s=!1){if(i===r)return this;if(!s&&r<=i?r+=og:s&&i<=r&&(i+=og),r-i==0)return this;const a=t+Math.cos(i)*n,l=e+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const g=Math.abs(f[f.length-2]-a),v=Math.abs(f[f.length-1]-l);g<c&&v<c||f.push(a,l)}else this.moveTo(a,l),f=this.currentPath.points;return F0.arc(a,l,t,e,n,i,r,s,f),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:at.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:at.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,i){return this.drawShape(new ln(t,e,n,i))}drawRoundedRect(t,e,n,i,r){return this.drawShape(new Wb(t,e,n,i,r))}drawCircle(t,e,n){return this.drawShape(new zb(t,e,n))}drawEllipse(t,e,n,i){return this.drawShape(new $b(t,e,n,i))}drawPolygon(...t){let e,n=!0;const i=t[0];i.points?(n=i.closeStroke,e=i.points):e=Array.isArray(t[0])?t[0]:t;const r=new Xc(e);return r.closeStroke=n,this.drawShape(r),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Ti.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),c={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:Qh(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,i=this.tint,r=this.worldAlpha,s=e.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*r,s.tint[1]=(i>>8&255)/255*r,s.tint[2]=(255&i)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:n,type:i,size:r,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(i,r,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!U0[n]){const{MAX_TEXTURES:i}=t.plugins[n],r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new zn,default:ms.from({uSamplers:r},!0)};U0[n]=new $s(t.plugins[n]._shader.program,s)}e=U0[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:i,maxY:r}=t.bounds;this._bounds.addFrame(this.transform,e,n,i,r)}containsPoint(t){return this.worldTransform.applyInverse(t,Ug._TEMP_POINT),this._geometry.containsPoint(Ug._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=Qh(this.tint,A6);for(let e=0;e<this.batches.length;e++){const n=this.batches[e],i=n._batchRGB,a=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);n._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,c=this.vertexData;let f=0;for(let g=0;g<l.length;g+=2){const v=l[g],_=l[g+1];c[f++]=n*v+r*_+o,c[f++]=s*_+i*v+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let nu=Ug;nu._TEMP_POINT=new Qt;class I6{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const j0=new Qt,IM=new Xc,MM=class extends zr{constructor(t,e,n,i=Vs.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||Co.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=De.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){this.shader.batchable&&this.drawMode===Vs.TRIANGLES&&this.geometry.buffers[0].data.length<2*MM.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,c=r.tx,f=r.ty,g=this.vertexData;for(let v=0;v<g.length/2;v++){const _=n[2*v],y=n[2*v+1];g[2*v]=s*_+a*y+c,g[2*v+1]=o*_+l*y+f}if(this._roundPixels){const v=De.RESOLUTION;for(let _=0;_<g.length;++_)g[_]=Math.round(g[_]*v)/v}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new I6(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,j0);const e=this.geometry.getBuffer("aVertexPosition").data,n=IM.points,i=this.geometry.getIndex().data,r=i.length,s=4===this.drawMode?3:1;for(let o=0;o+2<r;o+=s){const a=2*i[o],l=2*i[o+1],c=2*i[o+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[c],n[5]=e[c+1],IM.contains(j0.x,j0.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let V0=MM;V0.BATCHABLE_SIZE=100;class RM extends $s{constructor(e,n){const i={uSampler:e,alpha:1,uTextureMatrix:zn.IDENTITY,uColor:new Float32Array([1,1,1,1])};(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),super(n.program||Eo.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new AI(e),this.batchable=void 0===n.program,this.pluginName=n.pluginName,this.tint=n.tint,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){this._colorDirty&&(this._colorDirty=!1,JA(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class P6 extends ga{constructor(e,n,i){super();const r=new ni(e),s=new ni(n,!0),o=new ni(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,xt.FLOAT).addAttribute("aTextureCoord",s,2,!1,xt.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class PM{constructor(e,n,i){this.geometry=new ga,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let s=e[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||xt.FLOAT,offset:s.offset},n[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new ni(function Iz(t,e=null){const n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let i=0,r=0;i<n;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ni(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ni(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===xt.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===xt.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}}uploadDynamic(e,n,i){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(e,n,i,s.type===xt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,i){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(e,n,i,s.type===xt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class OM extends gg{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new zn,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:xt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=$s.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Co.for2d()}render(e){const n=e.children,i=e._maxSize,r=e._batchSize,s=this.renderer;let o=n.length;if(0===o)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=QA(e.blendMode,c),s.state.set(this.state);const f=s.gl,g=e.worldTransform.copyTo(this.tempMatrix);g.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=g.toArray(!0),this.shader.uniforms.uColor=function Az(t,e,n,i){return n=n||new Float32Array(4),i||void 0===i?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let v=!1;for(let _=0,y=0;_<o;_+=r,y+=1){let E=o-_;E>r&&(E=r),y>=a.length&&a.push(this._generateOneMoreBuffer(e));const S=a[y];S.uploadDynamic(n,_,E);const T=e._bufferUpdateIDs[y]||0;v=v||S._updateID<T,v&&(S._updateID=e._updateID,S.uploadStatic(n,_,E)),s.geometry.bind(S.geometry),f.drawElements(f.TRIANGLES,6*E,f.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],i=e._maxSize,r=e._batchSize,s=e._properties;for(let o=0;o<i;o+=r)n.push(new PM(this.properties,s,r));return n}_generateOneMoreBuffer(e){return new PM(this.properties,e._properties,e._batchSize)}uploadVertices(e,n,i,r,s,o){let a=0,l=0,c=0,f=0;for(let g=0;g<i;++g){const v=e[n+g],_=v._texture,y=v.scale.x,E=v.scale.y,S=_.trim,T=_.orig;S?(l=S.x-v.anchor.x*T.width,a=l+S.width,f=S.y-v.anchor.y*T.height,c=f+S.height):(a=T.width*(1-v.anchor.x),l=T.width*-v.anchor.x,c=T.height*(1-v.anchor.y),f=T.height*-v.anchor.y),r[o]=l*y,r[o+1]=f*E,r[o+s]=a*y,r[o+s+1]=f*E,r[o+2*s]=a*y,r[o+2*s+1]=c*E,r[o+3*s]=l*y,r[o+3*s+1]=c*E,o+=4*s}}uploadPosition(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+2*s]=l.x,r[o+2*s+1]=l.y,r[o+3*s]=l.x,r[o+3*s+1]=l.y,o+=4*s}}uploadRotation(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].rotation;r[o]=l,r[o+s]=l,r[o+2*s]=l,r[o+3*s]=l,o+=4*s}}uploadUvs(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+2*s]=l.x2,r[o+2*s+1]=l.y2,r[o+3*s]=l.x3,r[o+3*s+1]=l.y3,o+=4*s):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+2*s]=0,r[o+2*s+1]=0,r[o+3*s]=0,r[o+3*s+1]=0,o+=4*s)}}uploadTint(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a],c=l._texture.baseTexture.alphaMode>0,f=l.alpha,g=f<1&&c?Jb(l._tintRGB,f):l._tintRGB+(255*f<<24);r[o]=g,r[o+s]=g,r[o+2*s]=g,r[o+3*s]=g,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}OM.extension={name:"particle",type:Ve.RendererPlugin},ft.add(OM),De.UPLOADS_PER_FRAME=4;var Vg=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Vg||{});const H0={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Vg.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},k6=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class va{constructor(e){this.styleID=0,this.reset(),z0(this,e,e)}clone(){const e={};return z0(e,this,H0),new va(e)}reset(){z0(this,H0,H0)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=G0(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=G0(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function F6(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=G0(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let i=n.length-1;i>=0;i--){let r=n[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!k6.includes(r)&&(r=`"${r}"`),n[i]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}}function NM(t){return"number"==typeof t?KA(t):("string"==typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function G0(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=NM(t[e]);return t}return NM(t)}function z0(t,e,n){for(const i in n)t[i]=Array.isArray(e[i])?e[i].slice():e[i]}const Hg={willReadFrequently:!0};let $0=(()=>{class t{constructor(n,i,r,s,o,a,l,c,f){this.text=n,this.style=i,this.width=r,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=f}static measureText(n,i,r,s=t._canvas){r=r??i.wordWrap;const o=i.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);const l=s.getContext("2d",Hg);l.font=o;const f=(r?t.wordWrap(n,i,s):n).split(/(?:\r\n|\r|\n)/),g=new Array(f.length);let v=0;for(let S=0;S<f.length;S++){const T=l.measureText(f[S]).width+(f[S].length-1)*i.letterSpacing;g[S]=T,v=Math.max(v,T)}let _=v+i.strokeThickness;i.dropShadow&&(_+=i.dropShadowDistance);const y=i.lineHeight||a.fontSize+i.strokeThickness;let E=Math.max(y,a.fontSize+2*i.strokeThickness)+(f.length-1)*(y+i.leading);return i.dropShadow&&(E+=i.dropShadowDistance),new t(n,i,_,E,f,g,y+i.leading,v,a)}static wordWrap(n,i,r=t._canvas){const s=r.getContext("2d",Hg);let o=0,a="",l="";const c=Object.create(null),{letterSpacing:f,whiteSpace:g}=i,v=t.collapseSpaces(g),_=t.collapseNewlines(g);let y=!v;const E=i.wordWrapWidth+f,S=t.tokenize(n);for(let T=0;T<S.length;T++){let M=S[T];if(t.isNewline(M)){if(!_){l+=t.addLine(a),y=!v,a="",o=0;continue}M=" "}if(v){const O=t.isBreakingSpace(M),V=t.isBreakingSpace(a[a.length-1]);if(O&&V)continue}const I=t.getFromCache(M,f,c,s);if(I>E)if(""!==a&&(l+=t.addLine(a),a="",o=0),t.canBreakWords(M,i.breakWords)){const O=t.wordWrapSplit(M);for(let V=0;V<O.length;V++){let q=O[V],Q=1;for(;O[V+Q];){const ve=O[V+Q];if(t.canBreakChars(q[q.length-1],ve,M,V,i.breakWords))break;q+=ve,Q++}V+=q.length-1;const ie=t.getFromCache(q,f,c,s);ie+o>E&&(l+=t.addLine(a),y=!1,a="",o=0),a+=q,o+=ie}}else a.length>0&&(l+=t.addLine(a),a="",o=0),l+=t.addLine(M,!(T===S.length-1)),y=!1,a="",o=0;else I+o>E&&(y=!1,l+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(M)||y)&&(a+=M,o+=I)}return l+=t.addLine(a,!1),l}static addLine(n,i=!0){return n=t.trimRight(n),i?`${n}\n`:n}static getFromCache(n,i,r,s){let o=r[n];if("number"!=typeof o){const a=n.length*i;o=s.measureText(n).width+a,r[n]=o}return o}static collapseSpaces(n){return"normal"===n||"pre-line"===n}static collapseNewlines(n){return"normal"===n}static trimRight(n){if("string"!=typeof n)return"";for(let i=n.length-1;i>=0&&t.isBreakingSpace(n[i]);i--)n=n.slice(0,-1);return n}static isNewline(n){return"string"==typeof n&&t._newlines.includes(n.charCodeAt(0))}static isBreakingSpace(n,i){return"string"==typeof n&&t._breakingSpaces.includes(n.charCodeAt(0))}static tokenize(n){const i=[];let r="";if("string"!=typeof n)return i;for(let s=0;s<n.length;s++){const o=n[s];t.isBreakingSpace(o,n[s+1])||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i}static canBreakWords(n,i){return i}static canBreakChars(n,i,r,s,o){return!0}static wordWrapSplit(n){return n.split("")}static measureFont(n){if(t._fonts[n])return t._fonts[n];const i={ascent:0,descent:0,fontSize:0},r=t._canvas,s=t._context;s.font=n;const o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(s.measureText(o).width);let l=Math.ceil(s.measureText(t.BASELINE_SYMBOL).width);const c=Math.ceil(t.HEIGHT_MULTIPLIER*l);l=l*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=c,s.fillStyle="#f00",s.fillRect(0,0,a,c),s.font=n,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);const f=s.getImageData(0,0,a,c).data,g=f.length,v=4*a;let _=0,y=0,E=!1;for(_=0;_<l;++_){for(let S=0;S<v;S+=4)if(255!==f[y+S]){E=!0;break}if(E)break;y+=v}for(i.ascent=l-_,y=g-v,E=!1,_=c;_>l;--_){for(let S=0;S<v;S+=4)if(255!==f[y+S]){E=!0;break}if(E)break;y-=v}return i.descent=_-l,i.fontSize=i.ascent+i.descent,t._fonts[n]=i,i}static clearMetrics(n=""){n?delete t._fonts[n]:t._fonts={}}static get _canvas(){if(!t.__canvas){let n;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",Hg)?.measureText)return t.__canvas=i,i;n=De.ADAPTER.createCanvas()}catch{n=De.ADAPTER.createCanvas()}n.width=n.height=10,t.__canvas=n}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",Hg)),t.__context}}return t._fonts={},t.METRICS_STRING="|\xc9q\xc5",t.BASELINE_SYMBOL="M",t.BASELINE_MULTIPLIER=1.4,t.HEIGHT_MULTIPLIER=2,t._newlines=[10,13],t._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],t})();const L6={texture:!0,children:!1,baseTexture:!0},kM=class extends gl{constructor(t,e,n){let i=!1;n||(n=De.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const r=at.from(n);r.orig=new ln,r.trim=new ln,super(r),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=De.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,i=$0.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,c=i.maxLineWidth,f=i.fontProperties;let g,v;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;const _=e.dropShadow?2:1;for(let y=0;y<_;++y){const E=e.dropShadow&&0===y,S=E?Math.ceil(Math.max(1,s)+2*e.padding):0,T=S*this._resolution;if(E){n.fillStyle="black",n.strokeStyle="black";const I=e.dropShadowColor,O=Qh("number"==typeof I?I:Qb(I)),V=e.dropShadowBlur*this._resolution,q=e.dropShadowDistance*this._resolution;n.shadowColor=`rgba(${255*O[0]},${255*O[1]},${255*O[2]},${e.dropShadowAlpha})`,n.shadowBlur=V,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*q,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*q+T}else n.fillStyle=this._generateFillStyle(e,o,i),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let M=(a-f.fontSize)/2;a-f.fontSize<0&&(M=0);for(let I=0;I<o.length;I++)g=e.strokeThickness/2,v=e.strokeThickness/2+I*a+f.ascent+M,"right"===e.align?g+=c-l[I]:"center"===e.align&&(g+=(c-l[I])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[I],g+e.padding,v+e.padding-S,!0),e.fill&&this.drawLetterSpacing(o[I],g+e.padding,v+e.padding-S)}this.updateTexture()}drawLetterSpacing(t,e,n,i=!1){const s=this._style.letterSpacing,o=kM.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===s||o)return o&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));let a=e;const l=Array.from?Array.from(t):t.split("");let c=this.context.measureText(t).width,f=0;for(let g=0;g<l.length;++g){const v=l[g];i?this.context.strokeText(v,a,n):this.context.fillText(v,a,n);let _="";for(let y=g+1;y<l.length;++y)_+=l[y];f=this.context.measureText(_).width,a+=c-f+s,c=f}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=function Pz(t){let{width:e,height:n}=t;const i=t.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,e,n).data;let o=0,a=n-1,l=0,c=e-1;for(;o<n&&rI(s,e,o);)++o;if(o===n)return{width:0,height:0,data:null};for(;rI(s,e,a);)--a;for(;sI(s,e,l,o,a);)++l;for(;sI(s,e,c,o,a);)--c;return e=c-l+1,n=a-o+1,{width:e,height:n,data:i.getImageData(l,o,e,n)}}(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,i=n.trim?0:n.padding,r=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),r.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let r;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,c=i.slice(),f=t.fillGradientStops.slice();if(!f.length){const g=c.length+1;for(let v=1;v<g;++v)f.push(v/g)}if(c.unshift(i[0]),f.unshift(0),c.push(i[i.length-1]),f.push(1),t.fillGradientType===Vg.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const g=n.fontProperties.fontSize+t.strokeThickness;for(let v=0;v<e.length;v++){const _=n.lineHeight*(v-1)+g,y=n.lineHeight*v;let E=y;v>0&&_>y&&(E=(y+_)/2);const S=y+g,T=n.lineHeight*(v+1);let M=S;v+1<e.length&&T<S&&(M=(S+T)/2);const I=(M-E)/l;for(let O=0;O<c.length;O++){let V=0;V="number"==typeof f[O]?f[O]:O/c.length;let q=Math.min(1,Math.max(0,E/l+V*I));q=Number(q.toFixed(5)),r.addColorStop(q,c[O])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const g=c.length+1;let v=1;for(let _=0;_<c.length;_++){let y;y="number"==typeof f[_]?f[_]:v/g,r.addColorStop(y,c[_]),v++}}return r}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},L6,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Kc(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Kc(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){this._style=(t=t||{})instanceof va?t:new va(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let W0=kM;W0.experimentalLetterSpacing=!1;class B6{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function U6(t,e){let n=!1;if(t?._textures?.length)for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof at){const r=t._textures[i].baseTexture;e.includes(r)||(e.push(r),n=!0)}return n}function j6(t,e){if(t.baseTexture instanceof mn){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function V6(t,e){if(t._texture&&t._texture instanceof at){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function H6(t,e){return e instanceof W0&&(e.updateText(!0),!0)}function G6(t,e){if(e instanceof va){const n=e.toFontString();return $0.measureFont(n),!0}return!1}function z6(t,e){if(t instanceof W0){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function $6(t,e){return t instanceof va&&(e.includes(t)||e.push(t),!0)}class W6{constructor(e){this.limiter=new B6(De.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(z6),this.registerFindHook($6),this.registerFindHook(U6),this.registerFindHook(j6),this.registerFindHook(V6),this.registerUploadHook(H6),this.registerUploadHook(G6)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,li.system.addOnce(this.tick,this,Yc.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed)for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}n||this.queue.shift()}if(this.queue.length)li.system.addOnce(this.tick,this,Yc.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,i=e.length;n<i;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,i=this.addHooks.length;n<i&&!this.addHooks[n](e,this.queue);n++);if(e instanceof zr)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&li.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function FM(t,e){return e instanceof mn&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function X6(t,e){if(!(e instanceof nu))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:i}=n;for(let r=0;r<i.length;r++){const{texture:s}=i[r].style;s&&FM(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function Y6(t,e){return t instanceof nu&&(e.push(t),!0)}class LM extends W6{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Y6),this.registerUploadHook(FM),this.registerUploadHook(X6)}}LM.extension={name:"prepare",type:Ve.RendererSystem},ft.add(LM);const dd=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof at?t:null,this.baseTexture=t instanceof mn?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=da(t,null);return null===n&&(n=parseFloat(e??"1")),1!==n&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=dd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=dd.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const i=this._frameKeys[e],r=this._frames[i],s=r.frame;if(s){let o=null,a=null;const l=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,c=new ln(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=r.rotated?new ln(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new ln(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(a=new ln(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new at(this.baseTexture,o,c,a,r.rotated?2:0,r.anchor),at.addToCache(this.textures[i],i)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++)this.animations[e].push(this.textures[t[e][n]])}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*dd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*dd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let X0=dd;X0.BATCH_SIZE=1e3;const q6=["jpg","png","jpeg","avif","webp"];function BM(t,e,n){const i={};if(t.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!n){const r=Ai.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=BM([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const K6={extension:Ve.Asset,cache:{test:t=>t instanceof X0,getCacheableAssets:(t,e)=>BM(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),i=n.pop(),r=n.pop();return"json"===i&&q6.includes(r)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(De.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:Ve.LoadParser,priority:Ws.Normal},testParse:(t,e)=>Nt(function*(){return Ai.extname(e.src).includes(".json")&&!!t.frames})(),parse:(t,e,n)=>Nt(function*(){let i=Ai.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const r=i+t.meta.image,o=(yield n.load([r]))[r],a=new X0(o.baseTexture,t,e.src);yield a.parse();const l=t?.meta?.related_multi_packs;if(Array.isArray(l)){const c=[];for(const g of l){if("string"!=typeof g)continue;const v=i+g;e.data?.ignoreMultiPack||c.push(n.load({src:v,data:{ignoreMultiPack:!0}}))}const f=yield Promise.all(c);a.linkedSheets=f,f.forEach(g=>{g.linkedSheets=[a].concat(a.linkedSheets.filter(v=>v!==g))})}return a})(),unload(t){t.destroy(!0)}}};ft.add(K6),new Qt;var jM="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const Gg=new zn;class VM extends gg{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new gI,this.state=Co.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=$s.from(jM,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",n),this.shader=e.context.webGLVersion>1?$s.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",n):$s.from(jM,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",n)}render(e){const n=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=i.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,f=e.tileTransform.localTransform,g=e.uvMatrix;let v=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;v&&(l._glTextures[n.CONTEXT_UID]?v=l.wrapMode!==ua.CLAMP:l.wrapMode===ua.CLAMP&&(l.wrapMode=ua.REPEAT));const _=v?this.simpleShader:this.shader,y=a.width,E=a.height,S=e._width,T=e._height;Gg.set(f.a*y/S,f.b*y/T,f.c*E/S,f.d*E/T,f.tx/S,f.ty/T),Gg.invert(),v?Gg.prepend(g.mapCoord):(_.uniforms.uMapCoord=g.mapCoord.toArray(!0),_.uniforms.uClampFrame=g.uClampFrame,_.uniforms.uClampOffset=g.uClampOffset),_.uniforms.uTransform=Gg.toArray(!0),_.uniforms.uColor=JA(e.tint,e.worldAlpha,_.uniforms.uColor,c),_.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),_.uniforms.uSampler=a,n.shader.bind(_),n.geometry.bind(i),this.state.blendMode=QA(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}VM.extension={name:"tilingSprite",type:Ve.RendererPlugin},ft.add(VM);class zg{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class $g{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const f=a[c].split("="),g=f[0],v=f[1].replace(/"/gm,""),_=parseFloat(v),y=isNaN(_)?v:_;l[g]=y}i[o].push(l)}const r=new zg;return i.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class q0{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&null!==n.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const n=new zg,i=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<i.length;c++)n.info.push({face:i[c].getAttribute("face"),size:parseInt(i[c].getAttribute("size"),10)});for(let c=0;c<r.length;c++)n.common.push({lineHeight:parseInt(r[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const f=o[c];n.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class K0{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&q0.test(De.ADAPTER.parseXML(e))}static parse(e){return q0.parse(De.ADAPTER.parseXML(e))}}const Z0=[$g,q0,K0];function i7(t,e,n,i,r,s,o){const a=n.text,l=n.fontProperties;e.translate(i,r),e.scale(s,s);const c=o.strokeThickness/2,f=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function n7(t,e,n,i,r,s){const o=n.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,f=t.width/i-l-2*c,g=t.height/i-l-2*c,v=o.slice(),_=n.fillGradientStops.slice();if(!_.length){const y=v.length+1;for(let E=1;E<y;++E)_.push(E/y)}if(v.unshift(o[0]),_.unshift(0),v.push(o[o.length-1]),_.push(1),n.fillGradientType===Vg.LINEAR_VERTICAL){a=e.createLinearGradient(f/2,c,f/2,g+c);let y=0;const S=(s.fontProperties.fontSize+n.strokeThickness)/g;for(let T=0;T<r.length;T++){const M=s.lineHeight*T;for(let I=0;I<v.length;I++){let O=0;O="number"==typeof _[I]?_[I]:I/v.length;let q=Math.max(y,M/g+O*S);q=Math.min(q,1),a.addColorStop(q,v[I]),y=q}}}else{a=e.createLinearGradient(c,g/2,f+c,g/2);const y=v.length+1;let E=1;for(let S=0;S<v.length;S++){let T;T="number"==typeof _[S]?_[S]:E/y,a.addColorStop(T,v[S]),E++}}return a}(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const g=o.dropShadowColor,v=Qh("number"==typeof g?g:Qb(g)),_=o.dropShadowBlur*s,y=o.dropShadowDistance*s;e.shadowColor=`rgba(${255*v[0]},${255*v[1]},${255*v[2]},${o.dropShadowAlpha})`,e.shadowBlur=_,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,f+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,f+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function HM(t){return Array.from?Array.from(t):t.split("")}function Wg(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const bs=class{constructor(t,e,n){const[i]=t.info,[r]=t.common,[s]=t.page,[o]=t.distanceField,a=da(s.file),l={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<t.page.length;c++){const{id:f,file:g}=t.page[c];l[f]=e instanceof Array?e[c]:e[g],o?.fieldType&&"none"!==o.fieldType&&(l[f].baseTexture.alphaMode=fs.NO_PREMULTIPLIED_ALPHA,l[f].baseTexture.mipmap=Hs.OFF)}for(let c=0;c<t.char.length;c++){const{id:f,page:g}=t.char[c];let{x:v,y:_,width:y,height:E,xoffset:S,yoffset:T,xadvance:M}=t.char[c];v/=a,_/=a,y/=a,E/=a,S/=a,T/=a,M/=a;const I=new ln(v+l[g].frame.x/a,_+l[g].frame.y/a,y,E);this.chars[f]={xOffset:S,yOffset:T,xAdvance:M,kerning:{},texture:new at(l[g].baseTexture,I),page:g}}for(let c=0;c<t.kerning.length;c++){let{first:f,second:g,amount:v}=t.kerning[c];f/=a,g/=a,v/=a,this.chars[g]&&(this.chars[g].kerning[f]=v)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let i;if(t instanceof zg)i=t;else{const s=function t7(t){for(let e=0;e<Z0.length;e++)if(Z0[e].test(t))return Z0[e];return null}(t);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(t)}e instanceof at&&(e=[e]);const r=new bs(i,e,n);return bs.available[r.font]=r,r}static uninstall(t){const e=bs.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete bs.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:r,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},bs.defaultOptions,n),c=function r7(t){"string"==typeof t&&(t=[t]);const e=[];for(let n=0,i=t.length;n<i;n++){const r=t[n];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...HM(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i),f=e instanceof va?e:new va(e),g=o,v=new zg;v.info[0]={face:f.fontFamily,size:f.fontSize},v.common[0]={lineHeight:f.fontSize};let E,S,T,_=0,y=0,M=0;const I=[],O=[];for(let q=0;q<c.length;q++){E||(E=De.ADAPTER.createCanvas(),E.width=o,E.height=a,S=E.getContext("2d"),T=new mn(E,{resolution:s,...l}),I.push(T),O.push(new at(T)),v.page.push({id:O.length-1,file:""}));const Q=c[q],ie=$0.measureText(Q,f,!1,E),ve=ie.width,he=Math.ceil(ie.height),ee=Math.ceil(("italic"===f.fontStyle?2:1)*ve);if(y>=a-he*s){if(0===y)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${Q}')`);--q,E=null,S=null,T=null,y=0,_=0,M=0;continue}if(M=Math.max(he+ie.fontProperties.descent,M),ee*s+_>=g){if(0===_)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${Q}')`);--q,y+=M*s,y=Math.ceil(y),_=0,M=0;continue}i7(E,S,ie,_,y,s,f);const de=Wg(ie.text);v.char.push({id:de,page:O.length-1,x:_/s,y:y/s,width:ee,height:he,xoffset:0,yoffset:0,xadvance:Math.ceil(ve-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),_+=(ee+2*r)*s,_=Math.ceil(_)}for(let q=0,Q=c.length;q<Q;q++){const ie=c[q];for(let ve=0;ve<Q;ve++){const he=c[ve],ee=S.measureText(ie).width,de=S.measureText(he).width,ge=S.measureText(ie+he).width-(ee+de);ge&&v.kerning.push({first:Wg(ie),second:Wg(he),amount:ge})}}const V=new bs(v,O,!0);return void 0!==bs.available[t]&&bs.uninstall(t),bs.available[t]=V,V}};let ur=bs;ur.ALPHA=[["a","z"],["A","Z"]," "],ur.NUMERIC=[["0","9"]],ur.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ur.ASCII=[[" ","~"]],ur.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:bs.ALPHANUMERIC},ur.available={};const GM=[],zM=[],$M=[],WM=class extends zr{constructor(t,e={}){super(),this._tint=16777215;const{align:n,tint:i,maxWidth:r,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},WM.styleDefaults,e);if(!ur.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new ha(()=>{this.dirty=!0},this,0,0),this._roundPixels=De.ROUND_PIXELS,this.dirty=!0,this._resolution=De.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=ur.available[this._fontName],e=this.fontSize,n=e/t.size,i=new Qt,r=[],s=[],o=[],l=HM(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),c=this._maxWidth*t.size/e,f="none"===t.distanceFieldType?GM:zM;let g=null,v=0,_=0,y=0,E=-1,S=0,T=0,M=0,I=0;for(let he=0;he<l.length;he++){const ee=l[he],de=Wg(ee);if(/(?:\s)/.test(ee)&&(E=he,S=v,I++),"\r"===ee||"\n"===ee){s.push(v),o.push(-1),_=Math.max(_,v),++y,++T,i.x=0,i.y+=t.lineHeight,g=null,I=0;continue}const ue=t.chars[de];if(!ue)continue;g&&ue.kerning[g]&&(i.x+=ue.kerning[g]);const ge=$M.pop()||{texture:at.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Qt};ge.texture=ue.texture,ge.line=y,ge.charCode=de,ge.position.x=i.x+ue.xOffset+this._letterSpacing/2,ge.position.y=i.y+ue.yOffset,ge.prevSpaces=I,r.push(ge),v=ge.position.x+Math.max(ue.xAdvance-ue.xOffset,ue.texture.orig.width),i.x+=ue.xAdvance+this._letterSpacing,M=Math.max(M,ue.yOffset+ue.texture.height),g=de,-1!==E&&c>0&&i.x>c&&(++T,qc(r,1+E-T,1+he-E),he=E,E=-1,s.push(S),o.push(r.length>0?r[r.length-1].prevSpaces:0),_=Math.max(_,S),y++,i.x=0,i.y+=t.lineHeight,g=null,I=0)}const O=l[l.length-1];"\r"!==O&&"\n"!==O&&(/(?:\s)/.test(O)&&(v=S),s.push(v),_=Math.max(_,v),o.push(-1));const V=[];for(let he=0;he<=y;he++){let ee=0;"right"===this._align?ee=_-s[he]:"center"===this._align?ee=(_-s[he])/2:"justify"===this._align&&(ee=o[he]<0?0:(_-s[he])/o[he]),V.push(ee)}const q=r.length,Q={},ie=[],ve=this._activePagesMeshData;f.push(...ve);for(let he=0;he<q;he++){const ee=r[he].texture,de=ee.baseTexture.uid;if(!Q[de]){let ue=f.pop();if(!ue){const Ge=new P6;let st,Ze;"none"===t.distanceFieldType?(st=new RM(at.EMPTY),Ze=Tt.NORMAL):(st=new RM(at.EMPTY,{program:Eo.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),Ze=Tt.NORMAL_NPM);const pn=new V0(Ge,st);pn.blendMode=Ze,ue={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:pn,vertices:null,uvs:null,indices:null}}ue.index=0,ue.indexCount=0,ue.vertexCount=0,ue.uvsCount=0,ue.total=0;const{_textureCache:ge}=this;ge[de]=ge[de]||new at(ee.baseTexture),ue.mesh.texture=ge[de],ue.mesh.tint=this._tint,ie.push(ue),Q[de]=ue}Q[de].total++}for(let he=0;he<ve.length;he++)ie.includes(ve[he])||this.removeChild(ve[he].mesh);for(let he=0;he<ie.length;he++)ie[he].mesh.parent!==this&&this.addChild(ie[he].mesh);this._activePagesMeshData=ie;for(const he in Q){const ee=Q[he],de=ee.total;if(!(ee.indices?.length>6*de)||ee.vertices.length<2*V0.BATCHABLE_SIZE)ee.vertices=new Float32Array(8*de),ee.uvs=new Float32Array(8*de),ee.indices=new Uint16Array(6*de);else{const ge=ee.vertices;for(let Ge=4*ee.total*2;Ge<ge.length;Ge++)ge[Ge]=0}ee.mesh.size=6*de}for(let he=0;he<q;he++){const ee=r[he];let de=ee.position.x+V[ee.line]*("justify"===this._align?ee.prevSpaces:1);this._roundPixels&&(de=Math.round(de));const ue=de*n,ge=ee.position.y*n,Ge=ee.texture,st=Q[Ge.baseTexture.uid],Ze=Ge.frame,pn=Ge._uvs,sn=st.index++;st.indices[6*sn+0]=0+4*sn,st.indices[6*sn+1]=1+4*sn,st.indices[6*sn+2]=2+4*sn,st.indices[6*sn+3]=0+4*sn,st.indices[6*sn+4]=2+4*sn,st.indices[6*sn+5]=3+4*sn,st.vertices[8*sn+0]=ue,st.vertices[8*sn+1]=ge,st.vertices[8*sn+2]=ue+Ze.width*n,st.vertices[8*sn+3]=ge,st.vertices[8*sn+4]=ue+Ze.width*n,st.vertices[8*sn+5]=ge+Ze.height*n,st.vertices[8*sn+6]=ue,st.vertices[8*sn+7]=ge+Ze.height*n,st.uvs[8*sn+0]=pn.x0,st.uvs[8*sn+1]=pn.y0,st.uvs[8*sn+2]=pn.x1,st.uvs[8*sn+3]=pn.y1,st.uvs[8*sn+4]=pn.x2,st.uvs[8*sn+5]=pn.y2,st.uvs[8*sn+6]=pn.x3,st.uvs[8*sn+7]=pn.y3}this._textWidth=_*n,this._textHeight=(i.y+t.lineHeight)*n;for(const he in Q){const ee=Q[he];if(0!==this.anchor.x||0!==this.anchor.y){let Ge=0;const st=this._textWidth*this.anchor.x,Ze=this._textHeight*this.anchor.y;for(let pn=0;pn<ee.total;pn++)ee.vertices[Ge++]-=st,ee.vertices[Ge++]-=Ze,ee.vertices[Ge++]-=st,ee.vertices[Ge++]-=Ze,ee.vertices[Ge++]-=st,ee.vertices[Ge++]-=Ze,ee.vertices[Ge++]-=st,ee.vertices[Ge++]-=Ze}this._maxLineHeight=M*n;const de=ee.mesh.geometry.getBuffer("aVertexPosition"),ue=ee.mesh.geometry.getBuffer("aTextureCoord"),ge=ee.mesh.geometry.getIndex();de.data=ee.vertices,ue.data=ee.uvs,ge.data=ee.indices,de.update(),ue.update(),ge.update()}for(let he=0;he<r.length;he++)$M.push(r[he]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:i}=ur.available[this._fontName];if("none"!==n){const{a:r,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+s*s),c=Math.sqrt(o*o+a*a),f=(Math.abs(l)+Math.abs(c))/2,g=this.fontSize/i,v=t._view.resolution;for(const _ of this._activePagesMeshData)_.mesh.shader.uniforms.uFWidth=f*e*g*v}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ur.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ur.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ur.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i="none"===ur.available[this._fontName].distanceFieldType?GM:zM;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=at.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._textureCache=null,super.destroy(t)}};WM.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const l7=[".xml",".fnt"],c7={extension:{type:Ve.LoadParser,priority:Ws.Normal},test:t=>l7.includes(Ai.extname(t)),testParse:t=>Nt(function*(){return $g.test(t)||K0.test(t)})(),parse:(t,e,n)=>Nt(function*(){const i=$g.test(t)?$g.parse(t):K0.parse(t),{src:r}=e,{page:s}=i,o=[];for(let c=0;c<s.length;++c){const f=s[c].file,g=Ai.join(Ai.dirname(r),f);o.push(g)}const a=yield n.load(o),l=o.map(c=>a[c]);return ur.install(i,l,!0)})(),load:(t,e)=>Nt(function*(){return(yield De.ADAPTER.fetch(t)).text()})(),unload(t){t.destroy()}};ft.add(c7);var iu=ze(23);class XM extends gl{constructor(e=0,n=0){super(),this._gu_options={},this._bActivated=!1,this._bHover=!1,this._temp_status={},this._source=0,this._oWdith=0,this._oHeight=0,this._rg_canvas=null,this._graphics=new nu,this.interactive=!0,this.cursor="pointer",this._source=e,this.on("pointerup",()=>{this.onPointerup()}),this.on("pointerdown",()=>{this.onPointerdown()}),this.on("pointerupoutside",()=>{this.onPointerup()}),0==n?this._gu_options={width:"300",height:"300",units:"MPH",minValue:0,startAngle:60,ticksAngle:240,valueBox:!1,maxValue:"220",majorTicks:[0,20,40,60,80,100,120,140,160,180,200,220],minorTicks:2,strokeTicks:!0,highlights:[{from:160,to:220,color:"rgba(200, 50, 50, .75)"}],colorPlate:"#fff",borderShadowWidth:0,borders:!1,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:0,animationRule:"linear",listeners:{value:function(i,r){},render:[()=>{}]}}:1==n?this._gu_options={width:300,height:300,minValue:0,maxValue:360,majorTicks:["N","","E","","S","","W","","N"],minorTicks:10,ticksAngle:360,startAngle:180,strokeTicks:!1,highlights:!1,colorPlate:"#222",colorMajorTicks:"#f5f5f5",colorMinorTicks:"#ddd",colorNumbers:"#ccc",colorNeedle:"rgba(240, 128, 128, 1)",colorNeedleEnd:"rgba(255, 160, 122, .9)",numbersMargin:2,fontNumbersSize:30,colorNeedleShadowDown:!1,colorNeedleCircleOuter:"#444",colorNeedleCircleOuterEnd:"#111",colorNeedleCircleInner:"#444",colorNeedleCircleInnerEnd:"#111",colorCircleInner:!1,valueBox:!1,valueTextShadow:!1,needleCircleSize:7,animationRule:"linear",needleType:"line",needleStart:75,needleEnd:99,needleWidth:3,borders:!0,borderInnerWidth:3,borderMiddleWidth:1,borderOuterWidth:5,colorBorderInner:"#455",colorBorderMiddle:"#222",colorBorderOuter:"#888",colorBorderOuterEnd:"#caa",borderShadowWidth:0,animationDuration:1500,animationTarget:"plate",class:"gauge"}:2==n?this._gu_options={width:300,height:300,units:"RPM",minValue:0,maxValue:12e3,majorTicks:[0,1,2,3,4,5,6,7,8,9,10,11,12],minorTicks:0,strokeTicks:!0,highlights:[{from:9250,to:11995,color:"rgba(200, 50, 50, .75)"}],highlightsWidth:13,ticksAngle:270,startAngle:0,valueBox:!1,borderInnerWidth:10,borderMiddleWidth:1,borderOuterWidth:5,colorMajorTicks:"#888",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#bb1",colorPlate:"#000",colorPlateEnd:"#222",borderShadowWidth:0,borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:1500,animationRule:"linear",colorBorderOuter:"#111",colorBorderMiddle:"#888",colorBorderMiddleEnd:"#555",colorBorderInner:"#111",colorNeedleShadowDown:"#550",colorNeedleCircleOuter:"#333",colorNeedleCircleOuterEnd:"#111",class:"gauge"}:3==n&&(this._gu_options={units:"Fuel",width:"150",height:"150",minValue:"0",maxValue:"100",startAngle:"120",ticksAngle:"120",majorTicks:["E","","F"],minorTicks:2,strokeTicks:!1,highlights:[{from:0,to:15,color:"rgba(200, 10, 10, .5)"},{from:15,to:35,color:"rgba(200, 200, 50, .5)"},{from:80,to:100,color:"rgba(50, 200, 50, .3)"}],highlightsWidth:25,numbersMargin:5,colorPlate:"rgb(255,255,255)",valueBox:"false",borderShadowWidth:"0",borders:"false",needleType:"arrow",needleWidth:"2",needleCircleSize:"7",needleCircleOuter:"true",needleCircleInner:"false",borderInnerWidth:"0",borderMiddleWidth:"0",borderOuterWidth:"5",colorBorderOuter:"#000",colorBorderOuterEnd:"#555",colorNeedleShadowDown:"#222",fontNumbersSize:"50",fontUnitsSize:"50",animationRule:"linear",animationDuration:"1000",class:"gauge"}),this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new iu.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,this._canvas_texture=at.from(this._rg_canvas),this._radial_gauge.draw(),this._cell=new gl(this._canvas_texture),this._cell.width=150,this._cell.height=150,this._cell.anchor.set(.5,.5),this.anchor.set(.5,.5),this.addChild(this._cell),this.addChild(this._graphics),this._temp_status.texture_width=150,this._temp_status.texture_height=150,this._temp_status.texture_helf_width=75,this._temp_status.texture_helf_height=75,this._temp_status.spx=-this._temp_status.texture_width,this._temp_status.spy=-this._temp_status.texture_height,this._temp_status.epx=this._temp_status.texture_width,this._temp_status.epy=this._temp_status.texture_height}get cell(){return this._cell}set cell(e){this._cell=e}get bHover(){return this._bHover}set bHover(e){this._bHover=e}get graphics(){return this._graphics}set graphics(e){this._graphics=e}get temp_status(){return this._temp_status}set temp_status(e){this._temp_status=e}get source(){return this._source}set source(e){this._source=e}get rg_canvas(){return this._rg_canvas}set rg_canvas(e){this._rg_canvas=e}get canvas_texture(){return this._canvas_texture}set canvas_texture(e){this._canvas_texture=e}get radial_gauge(){return this._radial_gauge}set radial_gauge(e){this._radial_gauge=e}get oHeight(){return this._oHeight}set oHeight(e){this._oHeight=e}get oWdith(){return this._oWdith}set oWdith(e){this._oWdith=e}get bActivated(){return this._bActivated}set bActivated(e){this._bActivated=e}get gu_options(){return this._gu_options}set gu_options(e){this._gu_options=e}update(e){this._graphics.clear(),this._graphics.lineStyle(1,255,1),this._bActivated&&(this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.epy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.epy,10),this._graphics.endFill()),e&&(this._source=e),this._radial_gauge.value=this._source,this._canvas_texture.update()}onPointerdown(){this._temp_status.width=this.width,this._temp_status.height=this.height,this._temp_status.alpha=this.alpha,this.width*=1.1,this.height*=1.1,this._cell.alpha=.6,this._bActivated=!0}onPointerup(){this.width=this._temp_status.width,this.height=this._temp_status.height,this._cell.alpha=this._temp_status.alpha,this._bActivated=!1}}class Q0{constructor(e){this.x=e.x||0,this.y=e.y||0,this.height=e.height||0,this.width=e.width||0,this.ex=this.x+this.width,this.ey=this.y+this.height,this.center={x:this.x+this.width/2,y:this.y+this.height/2}}isInside(e){return e.x>=this.x&&e.x<=this.ex&&e.y>=this.y&&e.y<=this.ey}clone(){return new Q0({x:this.x,y:this.y,width:this.width,height:this.height})}}class u7{constructor(e,n,i,r){this.split=0,this.cells=[],this.cw=0,this.ch=0,this.range=e,this.ncx=n,this.ncy=i,this.ini()}isInside(e){return e.x>=this.range.x&&e.x<=this.range.width+this.range.x&&e.y>=this.range.y&&e.y<=this.range.height+this.range.y}getCell(e,n=0){return 1===arguments.length?this.cells[e]:this.cells[e+n*this.ncx]}getCellByPosition(e=0,n=0){for(var i,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:n})){i=this.cells[r];break}return i}getIndexByPosition(e=0,n=0){for(var i=-1,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:n})){i=r;break}return i}ini(){const e=this.range.x,n=this.range.y,i=this.range.width/this.ncx,r=this.range.height/this.ncy;this.cw=i,this.ch=r;for(let s=0;s<this.ncy;s++)for(let o=0;o<this.ncx;o++){const a=new Q0({x:o*i+e,y:s*r+n,width:i,height:r});this.cells.push(a)}this.first=this.cells[0]}}const YM={now:()=>(YM.delegate||Date).now(),delegate:void 0};class h7 extends z{constructor(e=1/0,n=1/0,i=YM){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}const d7=["addListener","removeListener"],f7=["addEventListener","removeEventListener"],p7=["on","off"];function Xg(t,e,n,i){if(Ne(n)&&(i=n,n=void 0),i)return Xg(t,e,n).pipe(v1(i));const[r,s]=function v7(t){return Ne(t.addEventListener)&&Ne(t.removeEventListener)}(t)?f7.map(o=>a=>t[o](e,a,n)):function g7(t){return Ne(t.addListener)&&Ne(t.removeListener)}(t)?d7.map(qM(t,e)):function m7(t){return Ne(t.on)&&Ne(t.off)}(t)?p7.map(qM(t,e)):[];if(!r&&to(t))return H(o=>Xg(o,e,n))(Ei(t));if(!r)throw new TypeError("Invalid event target");return new U(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function qM(t,e){return n=>i=>t[n](e,i)}function KM(){return fe((t,e)=>{let n,i=!1;t.subscribe(se(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))})}function x7(t,e){return t===e}function J0(t,e){return t=function E7(t,e){return typeof t>"u"?typeof e>"u"?t:e:t}(t,e),"function"==typeof t?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!t.apply(this,s)}:t?function(){return!0}:function(){return!1}}var ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},ZM=function(t){return null!=t&&"object"===(typeof t>"u"?"undefined":ew(t))&&1===t.nodeType&&"object"===ew(t.style)&&"object"===ew(t.ownerDocument)};function QM(t,e){if(e=nw(e,!0),!ZM(e))return-1;for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function tw(t,e){return-1!==QM(t,e)}function C7(t,e){for(var n=0;n<e.length;n++)tw(t,e[n])||t.push(e[n]);return e}function D7(t){for(var e=arguments,n=[],i=arguments.length-1;i-- >0;)n[i]=e[i+1];return C7(t,n=n.map(nw))}function S7(t){for(var e=arguments,n=[],i=arguments.length-1;i-- >0;)n[i]=e[i+1];return n.map(nw).reduce(function(r,s){var o=QM(t,s);return-1!==o?r.concat(t.splice(o,1)):r},[])}function nw(t,e){if("string"==typeof t)try{return document.querySelector(t)}catch(n){throw n}if(!ZM(t)&&!e)throw new TypeError(t+" is not a DOM element.");return t}function JM(t){if(t===window)return function A7(){var t={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},t);var e={};return Object.defineProperties(e,t),e}();try{var e=t.getBoundingClientRect();return void 0===e.x&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+t)}}var e,iw=void 0;"function"!=typeof Object.create?(e=function(){},iw=function(n,i){if(n!==Object(n)&&null!==n)throw TypeError("Argument must be an object, or null");e.prototype=n||{};var r=new e;return e.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===n&&(r.__proto__=null),r}):iw=Object.create;var M7=iw,yl=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function rw(t,e){e=e||{};for(var n=M7(t),i=0;i<yl.length;i++)void 0!==e[yl[i]]&&(n[yl[i]]=e[yl[i]]);return n}function sw(t,e){console.log("data ",e),t.data=e||{},t.dispatched="mousemove"}var pd=["webkit","moz","ms","o"],gd=function(){if(typeof window>"u")return function(){};for(var t=0,e=pd.length;t<e&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[pd[t]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-n),o=window.setTimeout(function(){return i(r+s)},s);return n=r+s,o}}return window.requestAnimationFrame.bind(window)}(),ru=function(){if(typeof window>"u")return function(){};for(var t=0,e=pd.length;t<e&&!window.cancelAnimationFrame;++t)window.cancelAnimationFrame=window[pd[t]+"CancelAnimationFrame"]||window[pd[t]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){window.clearTimeout(n)}),window.cancelAnimationFrame.bind(window)}();function P7(t,e){void 0===e&&(e={});var n=this,i=4,r=!1;if("object"!=typeof e.margin){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},a=function T7(t,e){var n=J0((e=e||{}).allowUpdate,!0);return function(r){if(r=r||window.event,t.target=r.target||r.srcElement||r.originalTarget,t.element=this,t.type=r.type,n(r)){if(r.targetTouches)t.x=r.targetTouches[0].clientX,t.y=r.targetTouches[0].clientY,t.pageX=r.targetTouches[0].pageX,t.pageY=r.targetTouches[0].pageY,t.screenX=r.targetTouches[0].screenX,t.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;t.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else t.pageX=r.pageX,t.pageY=r.pageY;t.x=r.clientX,t.y=r.clientY,t.screenX=r.screenX,t.screenY=r.screenY}t.clientX=t.x,t.clientY=t.y}}}(o),l=function R7(t){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function n(s){for(var o=0;o<yl.length;o++)e[yl[o]]=s[yl[o]]}return void 0!==t&&t.addEventListener("mousemove",n),{destroy:function r(){t&&t.removeEventListener("mousemove",n,!1),e=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",rw(e,a));return sw(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=rw(e,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),sw(f,l),o.dispatchEvent(f)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),f=rw(e,a);for(var g in f)c[g]=f[g];return sw(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(e.maxSpeed)||(i=e.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=J0(e.autoScroll),this.syncMove=J0(e.syncMove,!1),this.destroy=function(ee){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",E,!1),window.removeEventListener("touchstart",E,!1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("touchend",S,!1),window.removeEventListener("pointerup",S,!1),window.removeEventListener("mouseleave",M,!1),window.removeEventListener("mousemove",V,!1),window.removeEventListener("touchmove",V,!1),window.removeEventListener("scroll",y,!0),t=[],ee&&T()},this.add=function(){for(var ee=[],de=arguments.length;de--;)ee[de]=arguments[de];return D7.apply(void 0,[t].concat(ee)),this},this.remove=function(){for(var ee=[],de=arguments.length;de--;)ee[de]=arguments[de];return S7.apply(void 0,[t].concat(ee))};var g,ee,f=null;"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),ee=t,t=[],ee.forEach(function(de){de===window?f=window:n.add(de)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var _,v=null;function y(ee){for(var de=0;de<t.length;de++)if(t[de]===ee.target){r=!0;break}r&&gd(function(){return r=!1})}function E(){c=!0}function S(){c=!1,T()}function T(){ru(_),ru(g)}function M(){c=!1}function O(){for(var ee=null,de=0;de<t.length;de++)eR(o,t[de])&&(ee=t[de]);return ee}function V(ee){if(n.autoScroll()&&!ee.dispatched){var de=ee.target,ue=document.body;v&&!eR(o,v)&&(n.scrollWhenOutside||(v=null)),de&&de.parentNode===ue?de=O():(de=function I(ee){if(!ee)return null;if(v===ee||tw(t,ee))return ee;for(;ee=ee.parentNode;)if(tw(t,ee))return ee;return null}(de),de||(de=O())),de&&de!==v&&(v=de),f&&(ru(g),g=gd(q)),v&&(ru(_),_=gd(Q))}}function q(){ie(f),ru(g),g=gd(q)}function Q(){!v||(ie(v),ru(_),_=gd(Q))}function ie(ee){var ue,ge,de=JM(ee);ue=o.x<de.left+n.margin.left?Math.floor(Math.max(-1,(o.x-de.left)/n.margin.left-1)*n.maxSpeed.left):o.x>de.right-n.margin.right?Math.ceil(Math.min(1,(o.x-de.right)/n.margin.right+1)*n.maxSpeed.right):0,ge=o.y<de.top+n.margin.top?Math.floor(Math.max(-1,(o.y-de.top)/n.margin.top-1)*n.maxSpeed.top):o.y>de.bottom-n.margin.bottom?Math.ceil(Math.min(1,(o.y-de.bottom)/n.margin.bottom+1)*n.maxSpeed.bottom):0,n.syncMove()&&l.dispatch(ee,{pageX:o.pageX+ue,pageY:o.pageY+ge,clientX:o.x+ue,clientY:o.y+ge}),setTimeout(function(){ge&&function ve(ee,de){ee===window?window.scrollTo(ee.pageXOffset,ee.pageYOffset+de):ee.scrollTop+=de}(ee,ge),ue&&function he(ee,de){ee===window?window.scrollTo(ee.pageXOffset+de,ee.pageYOffset):ee.scrollLeft+=de}(ee,ue)})}window.addEventListener("mousedown",E,!1),window.addEventListener("touchstart",E,!1),window.addEventListener("mouseup",S,!1),window.addEventListener("touchend",S,!1),window.addEventListener("pointerup",S,!1),window.addEventListener("mousemove",V,!1),window.addEventListener("touchmove",V,!1),window.addEventListener("mouseleave",M,!1),window.addEventListener("scroll",y,!0)}function eR(t,e,n){return n?t.y>n.top&&t.y<n.bottom&&t.x>n.left&&t.x<n.right:function I7(t,e){var n=JM(e);return t.y>n.top&&t.y<n.bottom&&t.x>n.left&&t.x<n.right}(t,e)}function ow(t,e,n){n&&n.split(" ").forEach(i=>t.addClass(e.nativeElement,i))}function Yg(t,e,n){n&&n.split(" ").forEach(i=>t.removeClass(e.nativeElement,i))}let tR=(()=>{class t{constructor(){this.currentDrag=new z}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),nR=(()=>{class t{constructor(n){this.elementRef=n}}return t.\u0275fac=function(n){return new(n||t)(We(wi))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDraggableScrollContainer",""]]}),t})(),k7=(()=>{class t{constructor(n,i,r,s,o,a,l){this.element=n,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new Gn,this.dragStart=new Gn,this.ghostElementCreated=new Gn,this.dragging=new Gn,this.dragEnd=new Gn,this.pointerDown$=new z,this.pointerMove$=new z,this.pointerUp$=new z,this.eventListenerSubscriptions={},this.destroy$=new z,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const n=this.pointerDown$.pipe(ar(()=>this.canDrag()),H(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new U(_=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",E=>_.next(E))).pipe(w1(s),ce(()=>this.getScrollPosition())),a=new z,l=new h7;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=ut(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(Je()),f=lb([this.pointerMove$,o]).pipe(ce(([_,y])=>({currentDrag$:a,transformX:_.clientX-i.clientX,transformY:_.clientY-i.clientY,clientX:_.clientX,clientY:_.clientY,scrollLeft:y.left,scrollTop:y.top,target:_.event.target})),ce(_=>(this.dragSnapGrid.x&&(_.transformX=Math.round(_.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(_.transformY=Math.round(_.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),_)),ce(_=>(this.dragAxis.x||(_.transformX=0),this.dragAxis.y||(_.transformY=0),_)),ce(_=>{const y=_.scrollLeft-s.left,E=_.scrollTop-s.top;return{..._,x:_.transformX+y,y:_.transformY+E}}),ar(({x:_,y,transformX:E,transformY:S})=>!this.validateDrag||this.validateDrag({x:_,y,transform:{x:E,y:S}})),function _7(t){return fe((e,n)=>{Ei(t).subscribe(se(n,()=>n.complete(),Re)),!n.closed&&e.subscribe(n)})}(c),Je()),g=f.pipe(vo(1),Je()),v=f.pipe(Vp(1),Je());return g.subscribe(({clientX:_,clientY:y,x:E,y:S})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function O7(t,e){return new P7(t,e)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),ow(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const T=this.element.nativeElement.getBoundingClientRect(),M=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(M):this.element.nativeElement.parentNode.insertBefore(M,this.element.nativeElement.nextSibling),this.ghostElement=M,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(M,{position:"fixed",top:`${T.top}px`,left:`${T.left}px`,width:`${T.width}px`,height:`${T.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const I=this.vcr.createEmbeddedView(this.ghostElementTemplate);M.innerHTML="",I.rootNodes.filter(O=>O instanceof Node).forEach(O=>{M.appendChild(O)}),v.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(I))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:_-E,clientY:y-S,element:M})}),v.subscribe(()=>{M.parentElement.removeChild(M),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),v.pipe(H(_=>{const y=l.pipe(function b7(t){return function y7(t,e){return fe(E1(t,e,arguments.length>=2,!1,!0))}((e,n,i)=>!t||t(n,i)?e+1:e,0)}(),vo(1),ce(E=>({..._,dragCancelled:E>0})));return l.complete(),y})).subscribe(({x:_,y,dragCancelled:E})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:_,y,dragCancelled:E})}),Yg(this.renderer,this.element,this.dragActiveClass),a.complete()}),ut(c,v).pipe(vo(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),Je());ut(n.pipe(vo(1),ce(i=>[,i])),n.pipe(KM())).pipe(ar(([i,r])=>!i||i.x!==r.x||i.y!==r.y),ce(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const g=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:g,"-webkit-transform":g,"-ms-transform":g,"-moz-transform":g,"-o-transform":g})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(n){n.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const n=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;n&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!n&&i&&this.unsubscribeEventListeners()}onMouseDown(n){0===n.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onMouseUp(n){0===n.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onTouchStart(n){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=Xg(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Xg(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(n,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:n,clientX:n.touches[0].clientX,clientY:n.touches[0].clientY})}onTouchEnd(n){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:n,clientX:n.changedTouches[0].clientX,clientY:n.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(n){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",n)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(n=>{this.eventListenerSubscriptions[n](),delete this.eventListenerSubscriptions[n]})}setElementStyles(n,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(n,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(n,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-n.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-n.touches[0].clientY)-o_top,f=this.touchStartLongPress;return(a+l>f.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const n=this.getScrollElement();return n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight}}return t.\u0275fac=function(n){return new(n||t)(We(wi),We(pc),We(tR),We(Mn),We(Br),We(nR,8),We(Ji))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Rs]}),t})();function iR(t,e,n){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}let F7=(()=>{class t{constructor(n,i,r,s,o){this.element=n,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new Gn,this.dragLeave=new Gn,this.dragOver=new Gn,this.drop=new Gn}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(n=>{ow(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=n.pipe(ce(({clientX:c,clientY:f,dropData:g,target:v})=>{s={clientX:c,clientY:f,dropData:g,target:v},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const _=iR(c,f,i.rect),y=!this.validateDrop||this.validateDrop({clientX:c,clientY:f,target:v,dropData:g});return i.scrollContainerRect?_&&y&&iR(c,f,i.scrollContainerRect):_&&y})),a=o.pipe(function w7(t,e=fn){return t=t??x7,fe((n,i)=>{let r,s=!0;n.subscribe(se(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}());let l;a.pipe(ar(c=>c)).subscribe(()=>{l=!0,ow(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(ar(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(KM(),ar(([c,f])=>c&&!f)).subscribe(()=>{l=!1,Yg(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),n.subscribe({complete:()=>{r(),Yg(this.renderer,this.element,this.dragActiveClass),l&&(Yg(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(We(wi),We(tR),We(Mn),We(pc),We(nR,8))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),t})(),L7=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({}),t})();const B7=["container"];function U7(t,e){if(1&t&&(Ki(0,"div")(1,"span"),Qa(2),sr(),Ki(3,"span"),Qa(4),sr(),Ki(5,"span"),Qa(6),sr()()),2&t){const n=e.$implicit;na(2),uo("x : ",n.x," "),na(2),uo("y : ",n.y," "),na(2),uo(" val: ",n.source,"")}}class md{constructor(){this._option={},this._pos_frame_mouse=new Qt,this._pos_real_mouse=new Qt,this._pos_last_frame_mouse=new Qt,this._gauges=[],this._status={},this._gs_frame=new nu,this._gs_main=new nu,this._stages={},this._freams={},this._track_point=[],this._status.system_time=Date.now(),this._status.interactive_time=0,this._status.last_time=Date.now(),this._status.last_time2=Date.now(),this._status.frames={},this._status.pointerdown=!1}get pos_real_mouse(){return this._pos_real_mouse}set pos_real_mouse(e){this._pos_real_mouse=e}get track_point(){return this._track_point}set track_point(e){this._track_point=e}get gs_main(){return this._gs_main}set gs_main(e){this._gs_main=e}get gs_frame(){return this._gs_frame}set gs_frame(e){this._gs_frame=e}get status(){return this._status}set status(e){this._status=e}get freams(){return this._freams}set freams(e){this._freams=e}get stages(){return this._stages}set stages(e){this._stages=e}get gauges(){return this._gauges}set gauges(e){this._gauges=e}get view_container(){return this._view_container}set view_container(e){this._view_container=e}get pos_frame_mouse(){return this._pos_frame_mouse}set pos_frame_mouse(e){this._pos_frame_mouse=e}get pos_last_frame_mouse(){return this._pos_last_frame_mouse}set pos_last_frame_mouse(e){this._pos_last_frame_mouse=e}get option(){return this._option}set option(e){this._option=e}get application(){return this._application}set application(e){this._application=e}ngOnInit(){this.loadOption(),this._application=new S0(this._option.window),this._container.nativeElement.appendChild(this._application.view),this._view_container=this._application.stage,this.createStage("frame",0,0,this._option.window.width,this._option.window.height),this.createStage("main",0,0,this._option.window.width,this._option.window.height),this._stages.main.interactive=!0,this._stages.main.cursor="pointer",this._stages.main.on("pointerdown",()=>{this._status.pointerdown=!0}),this._stages.main.on("pointerup",()=>{this._status.pointerdown=!1}),this._stages.main.on("pointermove",e=>{let n=this._freams.main;new Qt;let r=n.getCellByPosition(e.global.x,e.global.y);0!=this._pos_frame_mouse.x&&0!=this._pos_frame_mouse.y&&this._pos_last_frame_mouse.set(this._pos_frame_mouse.x,this._pos_frame_mouse.y),r&&this._pos_frame_mouse.set(r.center.x,r.center.y),0!=this._pos_real_mouse.x&&0!=this._pos_real_mouse.y&&new Qt(this._pos_real_mouse.x,this._pos_real_mouse.y),this._pos_real_mouse.set(e.global.x,e.global.y)}),this._stages.main.addChild(this.gs_main),this._stages.frame.addChild(this._gs_frame),this._application.ticker.add(()=>{this.tick()})}cp(e,n){for(var s=[],o=e.x-n.x,a=e.y-n.y,l=Math.sqrt(o*o+a*a),c=Math.floor(l/50),f=0;f<c;f++){var g=f/c,v=n.x+g*o,_=n.y+g*a,E=5*Math.abs(v-n.x)*(_>n.y?1:-1);s.push(new Qt(v,_+E))}return s}createStage(e,n,i,r,s){this._freams[e]=new u7(new ln(n,i,r,s),10,8),this._stages[e]=new zr,this._status.frames[e]=!0,this._view_container.addChild(this._stages[e])}loadOption(){Object.keys(localStorage),this._option={window:{width:800,height:640,backgroundColor:8355711},frames:{area:{x:0,y:0,width:600,height:800,nw:34,nh:48},bumper:{x:75,y:200,width:400,height:300,nw:5,nh:5},bat2:{x:400,y:600,width:150,height:30,nw:5,nh:1,angle:-.76},bat3:{x:150,y:600,width:150,height:30,nw:5,nh:1,angle:.76},r1:{x:175,y:150,width:100,height:20,nw:5,nh:1},r2:{x:375,y:150,width:100,height:20,nw:5,nh:1},r3:{x:275,y:550,width:100,height:20,nw:5,nh:1}},debug:{map:!0,num:0,grid:{bumper:!1,area:!1}}}}tick(){let e=Date.now();this._status.update_time=Date.now(),this._status.gauges=this._gauges.length,this._track_point.push(new Qt(this._pos_real_mouse.x,this._pos_real_mouse.y)),this._track_point.length>20&&this._track_point.shift(),this._gs_frame.clear(),this._gs_main.clear(),this._gs_main.beginFill(16777215,.2),this._gs_main.drawRect(0,0,this._option.window.width,this._option.window.height),this._gs_main.endFill();for(let r in this._freams)this._status.frames[r]&&this.createGrid(this._freams[r],16777215);for(let r=0;r<this._track_point.length;r++){let s=this._track_point[r],o=r/20,a=5*(1-o);this._gs_main.beginFill(16711680,o),this._gs_main.drawCircle(s.x,s.y,a),this._gs_main.endFill()}this._gauges.forEach(r=>{r.update(),r.bActivated&&this._status.pointerdown&&(r.x=this._pos_frame_mouse.x,r.y=this._pos_frame_mouse.y)}),this._status.interactive_time=Date.now()-e,this._status.last_time2=Date.now()-this._status.last_time,this._status.last_time=Date.now()}createGrid(e,n){const i=e.first;if(this.gs_frame.lineStyle(1,n,.6),i){for(let r=0;r<=e.ncx;r++)this.gs_frame.moveTo(i.x+r*i.width,i.y),this.gs_frame.lineTo(i.x+r*i.width,i.y+e.range.height);for(let r=0;r<=e.ncy;r++)this.gs_frame.moveTo(i.x,i.y+r*i.height),this.gs_frame.lineTo(i.x+e.range.width,i.y+r*i.height)}}drop(e,n){var i=new XM(100,n);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i)}dragEnd(e,n){var i=new XM(100,n);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i),console.log("00",e)}btn_click(){}}md.\u0275fac=function(e){return new(e||md)},md.\u0275cmp=Jr({type:md,selectors:[["app-demo"]],viewQuery:function(e,n){if(1&e&&gy(B7,7),2&e){let i;pp(i=function gp(){return function tU(t,e){return t[19].queries[e].queryList}(me(),wf())}())&&(n._container=i.first)}},decls:27,vars:4,consts:[[2,"background-color","#F5F5DC"],[2,"display","flex"],["mwlDroppable",""],["container",""],[1,"div-container"],["mwlDraggable","",1,"div-block",3,"dragEnd","drop"],["i",""],["src","/assets/demo.png","width","100px","height","100px"],[1,"div-info"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(Ki(0,"div",0)(1,"div",1),os(2,"div",2,3),Ki(4,"div",4)(5,"div",5,6),Ka("dragEnd",function(r){return n.dragEnd(r,0)})("drop",function(r){return n.drop(r,0)}),os(7,"img",7),sr(),Ki(8,"div",5,6),Ka("dragEnd",function(r){return n.dragEnd(r,1)})("drop",function(r){return n.drop(r,1)}),os(10,"img",7),sr(),Ki(11,"div",5,6),Ka("dragEnd",function(r){return n.dragEnd(r,2)})("drop",function(r){return n.drop(r,2)}),os(13,"img",7),sr(),Ki(14,"div",5,6),Ka("dragEnd",function(r){return n.dragEnd(r,3)})("drop",function(r){return n.drop(r,2)}),os(16,"img",7),sr()(),Ki(17,"div",8)(18,"div")(19,"span"),Qa(20),sr(),Ki(21,"span"),Qa(22),sr()(),Ki(23,"div"),function kC(t,e,n,i,r,s,o,a){const l=me(),c=un(),f=t+22,g=c.firstCreatePass?function yL(t,e,n,i,r,s,o,a,l){const c=e.consts,f=_c(e,t,4,o||null,Ps(c,a));N_(e,n,f,Ps(c,l)),Ba(e,f);const g=f.tViews=O_(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,c,l,e,n,i,r,s,o):c.data[f];Nr(g,!1);const v=l[11].createComment("");jf(c,l,v,g),Ni(v,l),Qf(l,l[f]=gC(v,l,v,g)),ql(g)&&R_(c,l,g),null!=o&&P_(l,g,a)}(24,U7,7,3,"div",9),sr()()()(),Ki(25,"span"),Qa(26),sr()),2&e&&(na(20),uo("x : ",n.pos_frame_mouse.x,""),na(2),uo("y : ",n.pos_frame_mouse.y,""),na(2),z_("ngForOf",n.gauges),na(2),uo(" interacivate : ",n.status.interactive_time,"ms"))},dependencies:[VT,k7,F7],styles:[".div-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;background-color:#fff}.div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;margin:5px;width:150px;height:150px;border:2px solid black;border-radius:5px}.div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]:active{transform:translateY(2px)}"]});class vd{constructor(){this.title="demo_d"}}function To(){}vd.\u0275fac=function(e){return new(e||vd)},vd.\u0275cmp=Jr({type:vd,selectors:[["app-root"]],decls:1,vars:0,template:function(e,n){1&e&&os(0,"app-demo")},dependencies:[md]});const j7=function(){let t=0;return function(){return t++}}();function wn(t){return null===t||typeof t>"u"}function Bn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function hn(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const ii=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function $r(t,e){return ii(t)?t:e}function Jt(t,e){return typeof t>"u"?e:t}const rR=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Un(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function Sn(t,e,n,i){let r,s,o;if(Bn(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(hn(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function qg(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Kg(t){if(Bn(t))return t.map(Kg);if(hn(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Kg(t[n[r]]);return e}return t}function sR(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function H7(t,e,n,i){if(!sR(t))return;const r=e[t],s=n[t];hn(r)&&hn(s)?_d(r,s,i):e[t]=Kg(s)}function _d(t,e,n){const i=Bn(e)?e:[e],r=i.length;if(!hn(t))return t;const s=(n=n||{}).merger||H7;for(let o=0;o<r;++o){if(!hn(e=i[o]))continue;const a=Object.keys(e);for(let l=0,c=a.length;l<c;++l)s(a[l],t,e,n)}return t}function yd(t,e){return _d(t,e,{merger:G7})}function G7(t,e,n){if(!sR(t))return;const i=e[t],r=n[t];hn(i)&&hn(r)?yd(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Kg(r))}const oR={"":t=>t,x:t=>t.x,y:t=>t.y};function _a(t,e){return(oR[e]||(oR[e]=function z7(t){const e=function $7(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return n=>{for(const i of e){if(""===i)break;n=n&&n[i]}return n}}(e)))(t)}function aw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wr=t=>typeof t<"u",ya=t=>"function"==typeof t,aR=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},$n=Math.PI,Rn=2*$n,X7=Rn+$n,Zg=Number.POSITIVE_INFINITY,Y7=$n/180,Qn=$n/2,bd=$n/4,lR=2*$n/3,Xr=Math.log10,Xs=Math.sign;function cR(t){const e=Math.round(t);t=wd(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Xr(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function su(t){return!isNaN(parseFloat(t))&&isFinite(t)}function wd(t,e,n){return Math.abs(t-e)<n}function uR(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ws(t){return t*($n/180)}function lw(t){return t*(180/$n)}function hR(t){if(!ii(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function dR(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*$n&&(s+=Rn),{angle:s,distance:r}}function cw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Z7(t,e){return(t-e+X7)%Rn-$n}function Sr(t){return(t%Rn+Rn)%Rn}function xd(t,e,n,i){const r=Sr(t),s=Sr(e),o=Sr(n),a=Sr(s-r),l=Sr(o-r),c=Sr(r-s),f=Sr(r-o);return r===s||r===o||i&&s===o||a>l&&c<f}function xi(t,e,n){return Math.max(e,Math.min(n,t))}function Ao(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function uw(t,e,n){n=n||(o=>t[o]<e);let s,i=t.length-1,r=0;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Io=(t,e,n,i)=>uw(t,n,i?r=>t[r][e]<=n:r=>t[r][e]<n),J7=(t,e,n)=>uw(t,n,i=>t[i][e]>=n),fR=["push","pop","shift","splice","unshift"];function pR(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),!(i.length>0)&&(fR.forEach(s=>{delete t[s]}),delete t._chartjs)}function gR(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const mR=typeof window>"u"?function(t){return t()}:window.requestAnimationFrame;function vR(t,e,n){const i=n||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=i(o),r||(r=!0,mR.call(window,()=>{r=!1,t.apply(e,s)}))}}const hw=t=>"start"===t?"left":"end"===t?"right":"center",Li=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function _R(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:g,maxDefined:v}=o.getUserBounds();g&&(r=xi(Math.min(Io(a,o.axis,c).lo,n?i:Io(e,l,o.getPixelForValue(c)).lo),0,i-1)),s=v?xi(Math.max(Io(a,o.axis,f,!0).hi+1,n?0:Io(e,l,o.getPixelForValue(f),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function yR(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Qg=t=>0===t||1===t,bR=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Rn/n),wR=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Rn/n)+1,Ed={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Qn),easeOutSine:t=>Math.sin(t*Qn),easeInOutSine:t=>-.5*(Math.cos($n*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Qg(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Qg(t)?t:bR(t,.075,.3),easeOutElastic:t=>Qg(t)?t:wR(t,.075,.3),easeInOutElastic:t=>Qg(t)?t:t<.5?.5*bR(2*t,.1125,.45):.5+.5*wR(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Ed.easeOutBounce(1-t),easeOutBounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,easeInOutBounce:t=>t<.5?.5*Ed.easeInBounce(2*t):.5*Ed.easeOutBounce(2*t-1)+.5};function Cd(t){return t+.5|0}const ba=(t,e,n)=>Math.max(Math.min(t,n),e);function Dd(t){return ba(Cd(2.55*t),0,255)}function wa(t){return ba(Cd(255*t),0,255)}function Mo(t){return ba(Cd(t/2.55)/100,0,1)}function xR(t){return ba(Cd(100*t),0,100)}const Yr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},dw=[..."0123456789ABCDEF"],rX=t=>dw[15&t],sX=t=>dw[(240&t)>>4]+dw[15&t],Jg=t=>(240&t)>>4==(15&t);const uX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ER(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function hX(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function dX(t,e,n){const i=ER(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function fw(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=function fX(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(n,i,r,f,s),l=60*l+.5),[0|l,c||0,a]}function pw(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(wa)}function gw(t,e,n){return pw(ER,t,e,n)}function CR(t){return(t%360+360)%360}const DR={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},SR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let em;const wX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,mw=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,ou=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function tm(t,e,n){if(t){let i=fw(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=gw(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function TR(t,e){return t&&Object.assign(e||{},t)}function AR(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=wa(t[3]))):(e=TR(t,{r:0,g:0,b:0,a:1})).a=wa(e.a),e}function DX(t){return"r"===t.charAt(0)?function xX(t){const e=wX.exec(t);let i,r,s,n=255;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Dd(o):ba(255*o,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Dd(i):ba(i,0,255)),r=255&(e[4]?Dd(r):ba(r,0,255)),s=255&(e[6]?Dd(s):ba(s,0,255)),{r:i,g:r,b:s,a:n}}}(t):function mX(t){const e=uX.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?Dd(+e[5]):wa(+e[5]));const r=CR(+e[2]),s=+e[3]/100,o=+e[4]/100;return i="hwb"===e[1]?function pX(t,e,n){return pw(dX,t,e,n)}(r,s,o):"hsv"===e[1]?function gX(t,e,n){return pw(hX,t,e,n)}(r,s,o):gw(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}(t)}class nm{constructor(e){if(e instanceof nm)return e;const n=typeof e;let i;"object"===n?i=AR(e):"string"===n&&(i=function aX(t){var n,e=t.length;return"#"===t[0]&&(4===e||5===e?n={r:255&17*Yr[t[1]],g:255&17*Yr[t[2]],b:255&17*Yr[t[3]],a:5===e?17*Yr[t[4]]:255}:(7===e||9===e)&&(n={r:Yr[t[1]]<<4|Yr[t[2]],g:Yr[t[3]]<<4|Yr[t[4]],b:Yr[t[5]]<<4|Yr[t[6]],a:9===e?Yr[t[7]]<<4|Yr[t[8]]:255})),n}(e)||function bX(t){em||(em=function yX(){const t={},e=Object.keys(SR),n=Object.keys(DR);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,DR[s]);s=parseInt(SR[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),em.transparent=[0,0,0,0]);const e=em[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||DX(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=TR(this._rgb);return e&&(e.a=Mo(e.a)),e}set rgb(e){this._rgb=AR(e)}rgbString(){return this._valid?function EX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Mo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}(this._rgb):void 0}hexString(){return this._valid?function cX(t){var e=(t=>Jg(t.r)&&Jg(t.g)&&Jg(t.b)&&Jg(t.a))(t)?rX:sX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function _X(t){if(!t)return;const e=fw(t),n=e[0],i=xR(e[1]),r=xR(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Mo(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=function CX(t,e,n){const i=ou(Mo(t.r)),r=ou(Mo(t.g)),s=ou(Mo(t.b));return{r:wa(mw(i+n*(ou(Mo(e.r))-i))),g:wa(mw(r+n*(ou(Mo(e.g))-r))),b:wa(mw(s+n*(ou(Mo(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,e._rgb,n)),this}clone(){return new nm(this.rgb)}alpha(e){return this._rgb.a=wa(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,n=Cd(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=n,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return tm(this._rgb,2,e),this}darken(e){return tm(this._rgb,2,-e),this}saturate(e){return tm(this._rgb,1,e),this}desaturate(e){return tm(this._rgb,1,-e),this}rotate(e){return function vX(t,e){var n=fw(t);n[0]=CR(n[0]+e),n=gw(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,e),this}}function IR(t){return new nm(t)}function MR(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function RR(t){return MR(t)?t:IR(t)}function vw(t){return MR(t)?t:IR(t).saturate(.5).darken(.1).hexString()}const bl=Object.create(null),_w=Object.create(null);function Sd(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function yw(t,e,n){return"string"==typeof e?_d(Sd(t,e),n):_d(Sd(t,""),e)}var dn=new class SX{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>vw(i.backgroundColor),this.hoverBorderColor=(n,i)=>vw(i.borderColor),this.hoverColor=(n,i)=>vw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,n){return yw(this,e,n)}get(e){return Sd(this,e)}describe(e,n){return yw(_w,e,n)}override(e,n){return yw(bl,e,n)}route(e,n,i,r){const s=Sd(this,e),o=Sd(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return hn(l)?Object.assign({},c,l):Jt(l,c)},set(l){this[a]=l}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function im(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function AX(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,g,v;for(l=0;l<a;l++)if(g=n[l],null!=g&&!0!==Bn(g))o=im(t,r,s,o,g);else if(Bn(g))for(c=0,f=g.length;c<f;c++)v=g[c],null!=v&&!Bn(v)&&(o=im(t,r,s,o,v));t.restore();const _=s.length/2;if(_>n.length){for(l=0;l<_;l++)delete r[s[l]];s.splice(0,_)}return o}function wl(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function PR(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function bw(t,e,n,i){OR(t,e,n,i,null)}function OR(t,e,n,i,r){let s,o,a,l,c,f;const g=e.pointStyle,v=e.rotation,_=e.radius;let y=(v||0)*Y7;if(g&&"object"==typeof g&&(s=g.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),void t.restore();if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,_,0,0,Rn):t.arc(n,i,_,0,Rn),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(y)*_,i-Math.cos(y)*_),y+=lR,t.lineTo(n+Math.sin(y)*_,i-Math.cos(y)*_),y+=lR,t.lineTo(n+Math.sin(y)*_,i-Math.cos(y)*_),t.closePath();break;case"rectRounded":c=.516*_,l=_-c,o=Math.cos(y+bd)*l,a=Math.sin(y+bd)*l,t.arc(n-o,i-a,c,y-$n,y-Qn),t.arc(n+a,i-o,c,y-Qn,y),t.arc(n+o,i+a,c,y,y+Qn),t.arc(n-a,i+o,c,y+Qn,y+$n),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,f=r?r/2:l,t.rect(n-f,i-l,2*f,2*l);break}y+=bd;case"rectRot":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+a,i-o),t.lineTo(n+o,i+a),t.lineTo(n-a,i+o),t.closePath();break;case"crossRot":y+=bd;case"cross":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"star":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o),y+=bd,o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"line":o=r?r/2:Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*_,i+Math.sin(y)*_)}t.fill(),e.borderWidth>0&&t.stroke()}}function Td(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function rm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function sm(t){t.restore()}function IX(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function MX(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function xl(t,e,n,i,r,s={}){const o=Bn(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function RX(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),wn(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),wn(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),PX(t,n,i,c,s),i+=r.lineHeight;t.restore()}function PX(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function Ad(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-Qn,$n,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,$n,Qn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Qn,!0),t.lineTo(n+o.topLeft,i)}const OX=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),NX=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function kX(t,e){const n=(""+t).match(OX);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const FX=t=>+t||0;function ww(t,e){const n={},i=hn(e),r=i?Object.keys(e):e,s=hn(t)?i?o=>Jt(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=FX(s(o));return n}function NR(t){return ww(t,{top:"y",right:"x",bottom:"y",left:"x"})}function El(t){return ww(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Bi(t){const e=NR(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function mi(t,e){let n=Jt((t=t||{}).size,(e=e||dn.font).size);"string"==typeof n&&(n=parseInt(n,10));let i=Jt(t.style,e.style);i&&!(""+i).match(NX)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:Jt(t.family,e.family),lineHeight:kX(Jt(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Jt(t.weight,e.weight),string:""};return r.string=function TX(t){return!t||wn(t.size)||wn(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Id(t,e,n,i){let s,o,a,r=!0;for(s=0,o=t.length;s<o;++s)if(a=t[s],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),r=!1),void 0!==n&&Bn(a)&&(a=a[n%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function xa(t,e){return Object.assign(Object.create(t),e)}function xw(t,e=[""],n=t,i,r=(()=>t[0])){Wr(i)||(i=UR("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:o=>xw([o,...t],e,n,i)};return new Proxy(s,{deleteProperty:(o,a)=>(delete o[a],delete o._keys,delete t[0][a],!0),get:(o,a)=>FR(o,a,()=>function $X(t,e,n,i){let r;for(const s of e)if(r=UR(BX(s,t),n),Wr(r))return Ew(t,r)?Cw(n,i,t,r):r}(a,e,t,o)),getOwnPropertyDescriptor:(o,a)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],a),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(o,a)=>jR(o).includes(a),ownKeys:o=>jR(o),set(o,a,l){const c=o._storage||(o._storage=r());return o[a]=c[a]=l,delete o._keys,!0}})}function au(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:kR(t,i),setContext:s=>au(t,s,n,i),override:s=>au(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete t[o],!0),get:(s,o,a)=>FR(s,o,()=>function UX(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ya(a)&&o.isScriptable(e)&&(a=function jX(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(s,o||i),a.delete(t),Ew(t,e)&&(e=Cw(r._scopes,r,t,e)),e}(e,a,t,n)),Bn(a)&&a.length&&(a=function VX(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(Wr(s.index)&&i(t))e=e[s.index%e.length];else if(hn(e[0])){const l=e,c=r._scopes.filter(f=>f!==l);e=[];for(const f of l){const g=Cw(c,r,t,f);e.push(au(g,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable)),Ew(e,a)&&(a=au(a,r,s&&s[e],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(s,o)=>Reflect.has(t,o),ownKeys:()=>Reflect.ownKeys(t),set:(s,o,a)=>(t[o]=a,delete s[o],!0)})}function kR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ya(n)?n:()=>n,isIndexable:ya(i)?i:()=>i}}const BX=(t,e)=>t?t+aw(e):e,Ew=(t,e)=>hn(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function FR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function LR(t,e,n){return ya(t)?t(e,n):t}const HX=(t,e)=>!0===t?e:"string"==typeof t?_a(e,t):void 0;function GX(t,e,n,i,r){for(const s of e){const o=HX(n,s);if(o){t.add(o);const a=LR(o._fallback,n,r);if(Wr(a)&&a!==n&&a!==i)return a}else if(!1===o&&Wr(i)&&n!==i)return null}return!1}function Cw(t,e,n,i){const r=e._rootScopes,s=LR(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=BR(a,o,n,s||n,i);return!(null===l||Wr(s)&&s!==n&&(l=BR(a,o,s,l,i),null===l))&&xw(Array.from(a),[""],r,s,()=>function zX(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Bn(r)&&hn(n)?n:r}(e,n,i))}function BR(t,e,n,i,r){for(;n;)n=GX(t,e,n,i,r);return n}function UR(t,e){for(const n of e){if(!n)continue;const i=n[t];if(Wr(i))return i}}function jR(t){let e=t._keys;return e||(e=t._keys=function WX(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}(t._scopes)),e}function VR(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,f;for(a=0,l=i;a<l;++a)c=a+n,f=e[c],o[a]={r:r.parse(_a(f,s),c)};return o}const XX=Number.EPSILON||1e-14,lu=(t,e)=>e<t.length&&!t[e].skip&&t[e],HR=t=>"x"===t?"y":"x";function YX(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=cw(s,r),l=cw(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const g=i*c,v=i*f;return{previous:{x:s.x-g*(o.x-r.x),y:s.y-g*(o.y-r.y)},next:{x:s.x+v*(o.x-r.x),y:s.y+v*(o.y-r.y)}}}function om(t,e,n){return Math.max(Math.min(t,n),e)}function JX(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),"monotone"===e.cubicInterpolationMode)!function ZX(t,e="x"){const n=HR(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=lu(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=lu(t,o+1),l){if(c){const f=c[e]-l[e];r[o]=0!==f?(c[n]-l[n])/f:0}s[o]=a?c?Xs(r[o-1])!==Xs(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function qX(t,e,n){const i=t.length;let r,s,o,a,l,c=lu(t,0);for(let f=0;f<i-1;++f)if(l=c,c=lu(t,f+1),l&&c){if(wd(e[f],0,XX)){n[f]=n[f+1]=0;continue}r=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=r*o*e[f],n[f+1]=s*o*e[f])}})(t,r,s),function KX(t,e,n="x"){const i=HR(n),r=t.length;let s,o,a,l=lu(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=lu(t,c+1),!a)continue;const f=a[n],g=a[i];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${i}`]=g-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${i}`]=g+s*e[c])}}(t,s,e)}(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=YX(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&function QX(t,e){let n,i,r,s,o,a=Td(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Td(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=om(r.cp1x,e.left,e.right),r.cp1y=om(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=om(r.cp2x,e.left,e.right),r.cp2y=om(r.cp2y,e.top,e.bottom)))}(t,n)}function GR(){return typeof window<"u"&&typeof document<"u"}function Dw(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function am(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const lm=t=>window.getComputedStyle(t,null),t9=["top","right","bottom","left"];function Cl(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=t9[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Dl(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=lm(n),s="border-box"===r.boxSizing,o=Cl(r,"padding"),a=Cl(r,"border","width"),{x:l,y:c,box:f}=function i9(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let a,l,o=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(t,n),g=o.left+(f&&a.left),v=o.top+(f&&a.top);let{width:_,height:y}=e;return s&&(_-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-g)/_*n.width/i),y:Math.round((c-v)/y*n.height/i)}}const Sw=t=>Math.round(10*t)/10;function zR(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=r/i,t.width=s/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const o9=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function $R(t,e){const n=function e9(t,e){return lm(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Sl(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function a9(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function l9(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Sl(t,r,n),a=Sl(r,s,n),l=Sl(s,e,n),c=Sl(o,a,n),f=Sl(a,l,n);return Sl(c,f,n)}const WR=new Map;function Md(t,e,n){return function c9(t,e){e=e||{};const n=t+JSON.stringify(e);let i=WR.get(n);return i||(i=new Intl.NumberFormat(t,e),WR.set(n,i)),i}(e,n).format(t)}function cu(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(n){e=n},textAlign:n=>"center"===n?n:"right"===n?"left":"right",xPlus:(n,i)=>n-i,leftForLtr:(n,i)=>n-i}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function XR(t,e){let n,i;("ltr"===e||"rtl"===e)&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function YR(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function qR(t){return"angle"===t?{between:xd,compare:Z7,normalize:Sr}:{between:Ao,compare:(e,n)=>e-n,normalize:e=>e}}function KR({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function ZR(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=qR(i),{start:f,end:g,loop:v,style:_}=function d9(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=qR(i),l=e.length;let v,_,{start:c,end:f,loop:g}=t;if(g){for(c+=l,f+=l,v=0,_=l;v<_&&o(a(e[c%l][i]),r,s);++v)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:g,style:t.style}}(t,e,n),y=[];let T,M,I,E=!1,S=null;for(let ie=f,ve=f;ie<=g;++ie)M=e[ie%o],!M.skip&&(T=c(M[i]),T!==I&&(E=l(T,r,s),null===S&&(E||l(r,I,T)&&0!==a(r,I))&&(S=0===a(T,r)?ie:ve),null!==S&&(!E||0===a(s,T)||l(s,I,T))&&(y.push(KR({start:S,end:ie,loop:v,count:o,style:_})),S=null),ve=ie,I=T));return null!==S&&y.push(KR({start:S,end:g,loop:v,count:o,style:_})),y}function QR(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=ZR(i[r],t.points,e);s.length&&n.push(...s)}return n}function eP(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function v9(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Ro=new class _9{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const o=n.duration;n.listeners[r].forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=mR.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,0===n&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const tP="transparent",y9={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=RR(t||tP),r=i.valid&&RR(e||tP);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class b9{constructor(e,n,i,r){const s=n[i];r=Id([e.to,r,s,e.from]);const o=Id([e.from,s,r]);this._active=!0,this._fn=e.fn||y9[e.type||typeof o],this._easing=Ed[e.easing]||Ed.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Id([e.to,n,r,e.from]),this._from=Id([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active)return this._target[r]=a,void this._notify(!0);n<0?this._target[r]=s:(l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}dn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const E9=Object.keys(dn.animation);dn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),dn.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),dn.describe("animations",{_fallback:"animation"}),dn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class nP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!hn(e))return;const n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!hn(r))return;const s={};for(const o of E9)s[o]=r[o];(Bn(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,s)})})}_animateOptions(e,n){const i=n.options,r=function D9(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function C9(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(e,n));continue}const f=n[c];let g=s[c];const v=i.get(c);if(g){if(v&&g.active()){g.update(v,f,a);continue}g.cancel()}v&&v.duration?(s[c]=g=new b9(v,e,c,f),r.push(g)):e[c]=f}return r}update(e,n){if(0===this._properties.size)return void Object.assign(e,n);const i=this._createAnimations(e,n);return i.length?(Ro.add(this._chart,i),!0):void 0}}function iP(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function rP(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function sP(t,e,n,i={}){const r=t.keys,s="single"===i.mode;let o,a,l,c;if(null!==e){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=t.values[l],ii(c)&&(s||0===e||Xs(e)===Xs(c))&&(e+=c)}return e}}function oP(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function R9(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function aP(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function lP(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,f=function I9(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,i),g=e.length;let v;for(let _=0;_<g;++_){const y=e[_],{[l]:E,[c]:S}=y;v=(y._stacks||(y._stacks={}))[c]=R9(r,f,E),v[a]=S,v._top=aP(v,o,!0,i.type),v._bottom=aP(v,o,!1,i.type)}}function Tw(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Rd(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][n])return;delete s[i][n]}}}const Aw=t=>"reset"===t||"none"===t,cP=(t,e)=>e?t:Object.assign({},t);let Ys=(()=>{class t{constructor(n,i){this.chart=n,this._ctx=n.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=oP(n.vScale,n),this.addElements()}updateIndex(n){this.index!==n&&Rd(this._cachedMeta),this.index=n}linkScales(){const n=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(v,_,y,E)=>"x"===v?_:"r"===v?E:y,o=i.xAxisID=Jt(r.xAxisID,Tw(n,"x")),a=i.yAxisID=Jt(r.yAxisID,Tw(n,"y")),l=i.rAxisID=Jt(r.rAxisID,Tw(n,"r")),c=i.indexAxis,f=i.iAxisID=s(c,o,a,l),g=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(f),i.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){const i=this._cachedMeta;return n===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const n=this._cachedMeta;this._data&&pR(this._data,this),n._stacked&&Rd(n)}_dataCheck(){const n=this.getDataset(),i=n.data||(n.data=[]),r=this._data;if(hn(i))this._data=function A9(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}(i);else if(r!==i){if(r){pR(r,this);const s=this._cachedMeta;Rd(s),s._parsed=[]}i&&Object.isExtensible(i)&&function tX(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),fR.forEach(n=>{const i="_onData"+aw(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...s)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=oP(i.vScale,i),i.stack!==r.stack&&(s=!0,Rd(i),i.stack=r.stack),this._resyncElements(n),(s||o!==i._stacked)&&lP(this,i._parsed)}configure(){const n=this.chart.config,i=n.datasetScopeKeys(this._type),r=n.getOptionScopes(this.getDataset(),i,!0);this.options=n.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,i){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis;let g,v,_,c=0===n&&i===s.length||r._sorted,f=n>0&&r._parsed[n-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,_=s;else{_=Bn(s[n])?this.parseArrayData(r,s,n,i):hn(s[n])?this.parseObjectData(r,s,n,i):this.parsePrimitiveData(r,s,n,i);const y=()=>null===v[l]||f&&v[l]<f[l];for(g=0;g<i;++g)r._parsed[g+n]=v=_[g],c&&(y()&&(c=!1),f=v);r._sorted=c}a&&lP(this,_)}parsePrimitiveData(n,i,r,s){const{iScale:o,vScale:a}=n,l=o.axis,c=a.axis,f=o.getLabels(),g=o===a,v=new Array(s);let _,y,E;for(_=0,y=s;_<y;++_)E=_+r,v[_]={[l]:g||o.parse(f[E],E),[c]:a.parse(i[E],E)};return v}parseArrayData(n,i,r,s){const{xScale:o,yScale:a}=n,l=new Array(s);let c,f,g,v;for(c=0,f=s;c<f;++c)g=c+r,v=i[g],l[c]={x:o.parse(v[0],g),y:a.parse(v[1],g)};return l}parseObjectData(n,i,r,s){const{xScale:o,yScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f=new Array(s);let g,v,_,y;for(g=0,v=s;g<v;++g)_=g+r,y=i[_],f[g]={x:o.parse(_a(y,l),_),y:a.parse(_a(y,c),_)};return f}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,i,r){const o=this._cachedMeta,a=i[n.axis];return sP({keys:rP(this.chart,!0),values:i._stacks[n.axis]},a,o.index,{mode:r})}updateRangeFromParsed(n,i,r,s){const o=r[i.axis];let a=null===o?NaN:o;const l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=sP(s,o,this._cachedMeta.index)),n.min=Math.min(n.min,a),n.max=Math.max(n.max,a)}getMinMax(n,i){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&n===r.iScale,a=s.length,l=this._getOtherScale(n),c=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:rP(this.chart,!0),values:null})(i,r),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:v}=function M9(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(l);let _,y;function E(){y=s[_];const S=y[l.axis];return!ii(y[n.axis])||g>S||v<S}for(_=0;_<a&&(E()||(this.updateRangeFromParsed(f,n,y,c),!o));++_);if(o)for(_=a-1;_>=0;--_)if(!E()){this.updateRangeFromParsed(f,n,y,c);break}return f}getAllParsedValues(n){const i=this._cachedMeta._parsed,r=[];let s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][n.axis],ii(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(n){const i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(n);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(n){const i=this._cachedMeta;this.update(n||"default"),i._clip=function T9(t){let e,n,i,r;return hn(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(Jt(this.options.clip,function S9(t,e,n){if(!1===n)return!1;const i=iP(t,n),r=iP(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(n){}draw(){const n=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,f=this.options.drawActiveElementsOnTop;let g;for(r.dataset&&r.dataset.draw(n,o,l,c),g=l;g<l+c;++g){const v=s[g];v.hidden||(v.active&&f?a.push(v):v.draw(n,o))}for(g=0;g<a.length;++g)a[g].draw(n,o)}getStyle(n,i){const r=i?"active":"default";return void 0===n&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(n||0,r)}getContext(n,i,r){const s=this.getDataset();let o;if(n>=0&&n<this._cachedMeta.data.length){const a=this._cachedMeta.data[n];o=a.$context||(a.$context=function O9(t,e,n){return xa(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),n,a)),o.parsed=this.getParsed(n),o.raw=s.data[n],o.index=o.dataIndex=n}else o=this.$context||(this.$context=function P9(t,e){return xa(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,i){return this._resolveElementOptions(this.dataElementType.id,i,n)}_resolveElementOptions(n,i="default",r){const s="active"===i,o=this._cachedDataOpts,a=n+"-"+i,l=o[a],c=this.enableOptionSharing&&Wr(r);if(l)return cP(l,c);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,n),v=s?[`${n}Hover`,"hover",n,""]:[n,""],_=f.getOptionScopes(this.getDataset(),g),y=Object.keys(dn.elements[n]),S=f.resolveNamedOptions(_,y,()=>this.getContext(r,s),v);return S.$shared&&(S.$shared=c,o[a]=Object.freeze(cP(S,c))),S}_resolveAnimations(n,i,r){const s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==s.options.animation){const g=this.chart.config,v=g.datasetAnimationScopeKeys(this._type,i),_=g.getOptionScopes(this.getDataset(),v);c=g.createResolver(_,this.getContext(n,r,i))}const f=new nP(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(f)),f}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,i){return!i||Aw(n)||this.chart._animationsDisabled}_getSharedOptions(n,i){const r=this.resolveDataElementOptions(n,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(n,i,r,s){Aw(s)?Object.assign(n,r):this._resolveAnimations(i,s).update(n,r)}updateSharedOptions(n,i,r){n&&!Aw(i)&&this._resolveAnimations(void 0,i).update(n,r)}_setStyle(n,i,r,s){n.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(n,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(n,i,r){this._setStyle(n,r,"active",!1)}setHoverStyle(n,i,r){this._setStyle(n,r,"active",!0)}_removeDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){const i=this._data,r=this._cachedMeta.data;for(const[l,c,f]of this._syncList)this[l](c,f);this._syncList=[];const s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,n):o<s&&this._removeElements(o,s-o)}_insertElements(n,i,r=!0){const s=this._cachedMeta,o=s.data,a=n+i;let l;const c=f=>{for(f.length+=i,l=f.length-1;l>=a;l--)f[l]=f[l-i]};for(c(o),l=n;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(n,i),r&&this.updateElements(o,n,i,"reset")}updateElements(n,i,r,s){}_removeElements(n,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(n,i);r._stacked&&Rd(r,s)}r.data.splice(n,i)}_sync(n){if(this._parsing)this._syncList.push(n);else{const[i,r,s]=n;this[i](r,s)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){const n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,i){i&&this._sync(["_removeElements",n,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",n,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t.defaults={},t})();function F9(t){const e=t.iScale,n=function k9(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=gR(i.sort((r,s)=>r-s))}return t._cache.$bar}(e,t.type);let r,s,o,a,i=e._length;const l=()=>{32767===o||-32768===o||(Wr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function uP(t,e,n,i){return Bn(t)?function U9(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function hP(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,f,g,v;for(c=n,f=n+i;c<f;++c)v=e[c],g={},g[r.axis]=a||r.parse(o[c],c),l.push(uP(v,g,s,c));return l}function Iw(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function H9(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:f}=function V9(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=f:(s[dP(f,o,a,l)]=!0,r=c)),s[dP(r,o,a,l)]=!0,t.borderSkipped=s}function dP(t,e,n,i){return i?(t=function G9(t,e,n){return t===e?n:t===n?e:t}(t,e,n),t=fP(t,n,e)):t=fP(t,e,n),t}function fP(t,e,n){return"start"===t?e:"end"===t?n:t}function z9(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}Ys.prototype.datasetElementType=null,Ys.prototype.dataElementType=null;let $9=(()=>{class t extends Ys{parsePrimitiveData(n,i,r,s){return hP(n,i,r,s)}parseArrayData(n,i,r,s){return hP(n,i,r,s)}parseObjectData(n,i,r,s){const{iScale:o,vScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f="x"===o.axis?l:c,g="x"===a.axis?l:c,v=[];let _,y,E,S;for(_=r,y=r+s;_<y;++_)S=i[_],E={},E[o.axis]=o.parse(_a(S,f),_),v.push(uP(_a(S,g),E,a,_));return v}updateRangeFromParsed(n,i,r,s){super.updateRangeFromParsed(n,i,r,s);const o=r._custom;o&&i===this._cachedMeta.vScale&&(n.min=Math.min(n.min,o.min),n.max=Math.max(n.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(n){const i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(n),a=o._custom,l=Iw(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(n){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,n)}updateElements(n,i,r,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),f=l.isHorizontal(),g=this._getRuler(),{sharedOptions:v,includeOptions:_}=this._getSharedOptions(i,s);for(let y=i;y<i+r;y++){const E=this.getParsed(y),S=o||wn(E[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(y),T=this._calculateBarIndexPixels(y,g),M=(E._stacks||{})[l.axis],I={horizontal:f,base:S.base,enableBorderRadius:!M||Iw(E._custom)||a===M._top||a===M._bottom,x:f?S.head:T.center,y:f?T.center:S.head,height:f?T.size:Math.abs(S.size),width:f?Math.abs(S.size):T.size};_&&(I.options=v||this.resolveDataElementOptions(y,n[y].active?"active":s));const O=I.options||n[y].options;H9(I,O,M,a),z9(I,O,g.ratio),this.updateElement(n[y],y,I,s)}}_getStacks(n,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{const f=c.controller.getParsed(i),g=f&&f[c.vScale.axis];if(wn(g)||isNaN(g))return!0};for(const c of s)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===n))break;return a.length||a.push(void 0),a}_getStackCount(n){return this._getStacks(void 0,n).length}_getStackIndex(n,i,r){const s=this._getStacks(n,r),o=void 0!==i?s.indexOf(i):-1;return-1===o?s.length-1:o}_getRuler(){const n=this.options,i=this._cachedMeta,r=i.iScale,s=[];let o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=n.barThickness;return{min:l||F9(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:n.grouped,ratio:l?1:n.categoryPercentage*n.barPercentage}}_calculateBarValuePixels(n){const{_cachedMeta:{vScale:i,_stacked:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(n),c=l._custom,f=Iw(c);let y,E,g=l[i.axis],v=0,_=r?this.applyStack(i,l,r):g;_!==g&&(v=_-g,_=g),f&&(g=c.barStart,_=c.barEnd-c.barStart,0!==g&&Xs(g)!==Xs(c.barEnd)&&(v=0),v+=g);const S=wn(s)||f?v:s;let T=i.getPixelForValue(S);if(y=this.chart.getDataVisibility(n)?i.getPixelForValue(v+_):T,E=y-T,Math.abs(E)<o){E=function j9(t,e,n){return 0!==t?Xs(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(E,i,a)*o,g===a&&(T-=E/2);const M=i.getPixelForDecimal(0),I=i.getPixelForDecimal(1),O=Math.min(M,I),V=Math.max(M,I);T=Math.max(Math.min(T,V),O),y=T+E}if(T===i.getPixelForValue(a)){const M=Xs(E)*i.getLineWidthForValue(a)/2;T+=M,E-=M}return{size:E,base:T,head:y,center:y+E/2}}_calculateBarIndexPixels(n,i){const r=i.scale,s=this.options,o=s.skipNull,a=Jt(s.maxBarThickness,1/0);let l,c;if(i.grouped){const f=o?this._getStackCount(n):i.stackCount,g="flex"===s.barThickness?function B9(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(n,i,s,f):function L9(t,e,n,i){const r=n.barThickness;let s,o;return wn(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(n,i,s,f),v=this._getStackIndex(this.index,this._cachedMeta.stack,o?n:void 0);l=g.start+g.chunk*v+g.chunk/2,c=Math.min(a,g.chunk*g.ratio)}else l=r.getPixelForValue(this.getParsed(n)[r.axis],n),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const n=this._cachedMeta,i=n.vScale,r=n.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[i.axis]&&r[o].draw(this._ctx)}}return t.id="bar",t.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},t.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},t})(),W9=(()=>{class t extends Ys{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(n,i,r,s){const o=super.parsePrimitiveData(n,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(n,i,r,s){const o=super.parseArrayData(n,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=Jt(i[r+a][2],this.resolveDataElementOptions(a+r).radius);return o}parseObjectData(n,i,r,s){const o=super.parseObjectData(n,i,r,s);for(let a=0;a<o.length;a++){const l=i[r+a];o[a]._custom=Jt(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){const n=this._cachedMeta.data;let i=0;for(let r=n.length-1;r>=0;--r)i=Math.max(i,n[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(n){const i=this._cachedMeta,{xScale:r,yScale:s}=i,o=this.getParsed(n),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(n){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,n)}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(i,s),g=a.axis,v=l.axis;for(let _=i;_<i+r;_++){const y=n[_],E=!o&&this.getParsed(_),S={},T=S[g]=o?a.getPixelForDecimal(.5):a.getPixelForValue(E[g]),M=S[v]=o?l.getBasePixel():l.getPixelForValue(E[v]);S.skip=isNaN(T)||isNaN(M),f&&(S.options=c||this.resolveDataElementOptions(_,y.active?"active":s),o&&(S.options.radius=0)),this.updateElement(y,_,S,s)}}resolveDataElementOptions(n,i){const r=this.getParsed(n);let s=super.resolveDataElementOptions(n,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==i&&(s.radius=0),s.radius+=Jt(r&&r._custom,o),s}}return t.id="bubble",t.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},t.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},t})(),pP=(()=>{class t extends Ys{constructor(n,i){super(n,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(n,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let a,l,o=c=>+r[c];if(hn(r[n])){const{key:c="value"}=this._parsing;o=f=>+_a(r[f],c)}for(a=n,l=n+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return ws(this.options.rotation-90)}_getCircumference(){return ws(this.options.circumference)}_getRotationExtents(){let n=Rn,i=-Rn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();n=Math.min(n,o),i=Math.max(i,o+a)}return{rotation:n,circumference:i-n}}update(n){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(((t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e)(this.options.cutout,l),1),f=this._getRingWeight(this.index),{circumference:g,rotation:v}=this._getRotationExtents(),{ratioX:_,ratioY:y,offsetX:E,offsetY:S}=function X9(t,e,n){let i=1,r=1,s=0,o=0;if(e<Rn){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),g=Math.cos(l),v=Math.sin(l),_=(I,O,V)=>xd(I,a,l,!0)?1:Math.max(O,O*n,V,V*n),y=(I,O,V)=>xd(I,a,l,!0)?-1:Math.min(O,O*n,V,V*n),E=_(0,c,g),S=_(Qn,f,v),T=y($n,c,g),M=y($n+Qn,f,v);i=(E-T)/2,r=(S-M)/2,s=-(E+T)/2,o=-(S+M)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(v,g,c),I=Math.max(Math.min((r.width-a)/_,(r.height-a)/y)/2,0),O=rR(this.options.radius,I),q=(O-Math.max(O*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=E*O,this.offsetY=S*O,s.total=this.calculateTotal(),this.outerRadius=O-q*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-q*f,0),this.updateElements(o,0,o.length,n)}_circumference(n,i){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(n)||null===s._parsed[n]||s.data[n].hidden?0:this.calculateCircumference(s._parsed[n]*o/Rn)}updateElements(n,i,r,s){const o="reset"===s,a=this.chart,l=a.chartArea,g=(l.left+l.right)/2,v=(l.top+l.bottom)/2,_=o&&a.options.animation.animateScale,y=_?0:this.innerRadius,E=_?0:this.outerRadius,{sharedOptions:S,includeOptions:T}=this._getSharedOptions(i,s);let I,M=this._getRotation();for(I=0;I<i;++I)M+=this._circumference(I,o);for(I=i;I<i+r;++I){const O=this._circumference(I,o),V=n[I],q={x:g+this.offsetX,y:v+this.offsetY,startAngle:M,endAngle:M+O,circumference:O,outerRadius:E,innerRadius:y};T&&(q.options=S||this.resolveDataElementOptions(I,V.active?"active":s)),M+=O,this.updateElement(V,I,q,s)}}calculateTotal(){const n=this._cachedMeta,i=n.data;let s,r=0;for(s=0;s<i.length;s++){const o=n._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(n){const i=this._cachedMeta.total;return i>0&&!isNaN(n)?Rn*(Math.abs(n)/i):0}getLabelAndValue(n){const r=this.chart,s=r.data.labels||[],o=Md(this._cachedMeta._parsed[n],r.options.locale);return{label:s[n]||"",value:o}}getMaxBorderWidth(n){let i=0;const r=this.chart;let s,o,a,l,c;if(!n)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),n=a.data,l=a.controller;break}if(!n)return 0;for(s=0,o=n.length;s<o;++s)c=l.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(n){let i=0;for(let r=0,s=n.length;r<s;++r){const o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(n){let i=0;for(let r=0;r<n;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(n){return Math.max(Jt(this.chart.data.datasets[n].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t.id="doughnut",t.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},t.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},t.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return n.labels.map((r,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let n=e.label;const i=": "+e.formattedValue;return Bn(n)?(n=n.slice(),n[0]+=i):n+=i,n}}}}},t})(),Y9=(()=>{class t extends Ys{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(n){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=_R(i,s,a);this._drawStart=l,this._drawCount=c,yR(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const f=this.resolveDatasetElementOptions(n);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:f},n),this.updateElements(s,l,c,n)}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(i,s),_=a.axis,y=l.axis,{spanGaps:E,segment:S}=this.options,T=su(E)?E:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||o||"none"===s;let I=i>0&&this.getParsed(i-1);for(let O=i;O<i+r;++O){const V=n[O],q=this.getParsed(O),Q=M?V:{},ie=wn(q[y]),ve=Q[_]=a.getPixelForValue(q[_],O),he=Q[y]=o||ie?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,q,c):q[y],O);Q.skip=isNaN(ve)||isNaN(he)||ie,Q.stop=O>0&&Math.abs(q[_]-I[_])>T,S&&(Q.parsed=q,Q.raw=f.data[O]),v&&(Q.options=g||this.resolveDataElementOptions(O,V.active?"active":s)),M||this.updateElement(V,O,Q,s),I=q}}getMaxOverflow(){const n=this._cachedMeta,i=n.dataset,r=i.options&&i.options.borderWidth||0,s=n.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){const n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis),super.draw()}}return t.id="line",t.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},t.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},t})(),q9=(()=>{class t extends Ys{constructor(n,i){super(n,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(n){const r=this.chart,s=r.data.labels||[],o=Md(this._cachedMeta._parsed[n].r,r.options.locale);return{label:s[n]||"",value:o}}parseObjectData(n,i,r,s){return VR.bind(this)(n,i,r,s)}update(n){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,n)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const n=this.chart,i=n.chartArea,r=n.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),l=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/n.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(n,i,r,s){const o="reset"===s,a=this.chart,c=a.options.animation,f=this._cachedMeta.rScale,g=f.xCenter,v=f.yCenter,_=f.getIndexAngle(0)-.5*$n;let E,y=_;const S=360/this.countVisibleElements();for(E=0;E<i;++E)y+=this._computeAngle(E,s,S);for(E=i;E<i+r;E++){const T=n[E];let M=y,I=y+this._computeAngle(E,s,S),O=a.getDataVisibility(E)?f.getDistanceFromCenterForValue(this.getParsed(E).r):0;y=I,o&&(c.animateScale&&(O=0),c.animateRotate&&(M=I=_));const V={x:g,y:v,innerRadius:0,outerRadius:O,startAngle:M,endAngle:I,options:this.resolveDataElementOptions(E,T.active?"active":s)};this.updateElement(T,E,V,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(n,i,r){return this.chart.getDataVisibility(n)?ws(this.resolveDataElementOptions(n,i).angle||r):0}}return t.id="polarArea",t.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},t.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return n.labels.map((r,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},t})(),K9=(()=>{class t extends pP{}return t.id="pie",t.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},t})(),Z9=(()=>{class t extends Ys{getLabelAndValue(n){const i=this._cachedMeta.vScale,r=this.getParsed(n);return{label:i.getLabels()[n],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(n,i,r,s){return VR.bind(this)(n,i,r,s)}update(n){const i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,"resize"!==n){const a=this.resolveDatasetElementOptions(n);this.options.showLine||(a.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},n)}this.updateElements(s,0,s.length,n)}updateElements(n,i,r,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=i;l<i+r;l++){const c=n[l],f=this.resolveDataElementOptions(l,c.active?"active":s),g=o.getPointPositionForValue(l,this.getParsed(l).r),v=a?o.xCenter:g.x,_=a?o.yCenter:g.y,y={x:v,y:_,angle:g.angle,skip:isNaN(v)||isNaN(_),options:f};this.updateElement(c,l,y,s)}}}return t.id="radar",t.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},t.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},t})();class xs{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return su(this.x)&&su(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}xs.defaults={},xs.defaultRoutes=void 0;const gP={values:t=>Bn(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=function Q9(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const o=Xr(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Md(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(Xr(t)));return 1===i||2===i||5===i?gP.numeric.call(this,t,e,n):""}};var cm={formatters:gP};function um(t,e,n,i,r){const s=Jt(i,0),o=Math.min(Jt(r,t.length),t.length);let l,c,f,a=0;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}dn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:cm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),dn.route("scale.ticks","color","","color"),dn.route("scale.grid","color","","borderColor"),dn.route("scale.grid","borderColor","","borderColor"),dn.route("scale.title","color","","color"),dn.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),dn.describe("scales",{_fallback:"scale"}),dn.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const mP=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function vP(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function oY(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(r);if(!(n&&(c=1===i?Math.max(l-s,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Pd(t){return t.drawTicks?t.tickLength:0}function _P(t,e){if(!t.display)return 0;const n=mi(t.font,e),i=Bi(t.padding);return(Bn(t.text)?t.text.length:1)*n.lineHeight+i.height}function uY(t,e,n){let i=hw(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Tl extends xs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=$r(e,Number.POSITIVE_INFINITY),n=$r(n,Number.NEGATIVE_INFINITY),i=$r(i,Number.POSITIVE_INFINITY),r=$r(r,Number.NEGATIVE_INFINITY),{min:$r(e,i),max:$r(n,r),minDefined:ii(e),maxDefined:ii(n)}}getMinMax(e){let o,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:$r(n,$r(i,n)),max:$r(i,$r(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Un(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function LX(t,e,n){const{min:i,max:r}=t,s=rR(e,(r-i)/2),o=(a,l)=>n&&0===a?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?vP(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function J9(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function eY(t){const e=t.options.offset,n=t._tickSize();return Math.floor(Math.min(t._length/n+(e?0:1),t._maxLength/n))}(t),r=n.major.enabled?function nY(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],s=r.length,o=r[0],a=r[s-1],l=[];if(s>i)return function iY(t,e,n,i){let o,r=0,s=n[0];for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}(e,l,r,s/i),l;const c=function tY(t,e,n){const i=function rY(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function q7(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}(r,e,i);if(s>0){let f,g;const v=s>1?Math.round((a-o)/(s-1)):null;for(um(e,l,c,wn(v)?0:o-v,o),f=0,g=s-1;f<g;f++)um(e,l,c,r[f],r[f+1]);return um(e,l,c,a,wn(v)?e.length:a+v),l}return um(e,l,c),l}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n,i,e=this.options.reverse;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Un(this.options.afterUpdate,[this])}beforeSetDimensions(){Un(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Un(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Un(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Un(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Un(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Un(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Un(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,r=n.minRotation||0,s=n.maxRotation;let a,l,c,o=r;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const f=this._getLabelSizes(),g=f.widest.width,v=f.highest.height,_=xi(this.chart.width-g,0,this.maxWidth);a=e.offset?this.maxWidth/i:_/(i-1),g+6>a&&(a=_/(i-(e.offset?.5:1)),l=this.maxHeight-Pd(e.grid)-n.padding-_P(e.title,this.chart.options.font),c=Math.sqrt(g*g+v*v),o=lw(Math.min(Math.asin(xi((f.highest.height+6)/a,-1,1)),Math.asin(xi(l/c,-1,1))-Math.asin(xi(v/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Un(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Un(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=_P(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Pd(s)+l):(e.height=this.maxHeight,e.width=Pd(s)+l),i.display&&this.ticks.length){const{first:c,last:f,widest:g,highest:v}=this._getLabelSizes(),_=2*i.padding,y=ws(this.labelRotation),E=Math.cos(y),S=Math.sin(y);a?e.height=Math.min(this.maxHeight,e.height+(i.mirror?0:S*g.width+E*v.height)+_):e.width=Math.min(this.maxWidth,e.width+(i.mirror?0:E*g.width+S*v.height)+_),this._calculatePadding(c,f,S,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,_=0;l?c?(v=r*e.width,_=i*n.height):(v=i*e.height,_=r*n.width):"start"===s?_=n.width:"end"===s?v=e.width:"inner"!==s&&(v=e.width/2,_=n.width/2),this.paddingLeft=Math.max((v-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((_-g+o)*this.width/(this.width-g),0)}else{let f=n.height/2,g=e.height/2;"start"===s?(f=0,g=e.height):"end"===s&&(f=n.height,g=0),this.paddingTop=f+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Un(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return"top"===n||"bottom"===n||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let n,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),n=0,i=e.length;n<i;n++)wn(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=vP(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[];let c,f,g,v,_,y,E,S,T,M,I,a=0,l=0;for(c=0;c<n;++c){if(v=e[c].label,_=this._resolveTickFontOptions(c),i.font=y=_.string,E=r[y]=r[y]||{data:{},gc:[]},S=_.lineHeight,T=M=0,wn(v)||Bn(v)){if(Bn(v))for(f=0,g=v.length;f<g;++f)I=v[f],!wn(I)&&!Bn(I)&&(T=im(i,E.data,E.gc,T,I),M+=S)}else T=im(i,E.data,E.gc,T,v),M=S;s.push(T),o.push(M),a=Math.max(T,a),l=Math.max(M,l)}!function aY(t,e){Sn(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}(r,n);const O=s.indexOf(a),V=o.indexOf(l),q=Q=>({width:s[Q]||0,height:o[Q]||0});return{first:q(0),last:q(n-1),widest:q(O),highest:q(V),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return function Q7(t){return xi(t,-32768,32767)}(this._alignToPixels?wl(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=function cY(t,e,n){return xa(t,{tick:n,index:e,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=function lY(t,e){return xa(t,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ws(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o}=r,a=s.offset,l=this.isHorizontal(),f=this.ticks.length+(a?1:0),g=Pd(s),v=[],_=s.setContext(this.getContext()),y=_.drawBorder?_.borderWidth:0,E=y/2,S=function(Ge){return wl(i,Ge,y)};let T,M,I,O,V,q,Q,ie,ve,he,ee,de;if("top"===o)T=S(this.bottom),q=this.bottom-g,ie=T-E,he=S(e.top)+E,de=e.bottom;else if("bottom"===o)T=S(this.top),he=e.top,de=S(e.bottom)-E,q=T+E,ie=this.top+g;else if("left"===o)T=S(this.right),V=this.right-g,Q=T-E,ve=S(e.left)+E,ee=e.right;else if("right"===o)T=S(this.left),ve=e.left,ee=S(e.right)-E,V=T+E,Q=this.left+g;else if("x"===n){if("center"===o)T=S((e.top+e.bottom)/2+.5);else if(hn(o)){const Ge=Object.keys(o)[0];T=S(this.chart.scales[Ge].getPixelForValue(o[Ge]))}he=e.top,de=e.bottom,q=T+E,ie=q+g}else if("y"===n){if("center"===o)T=S((e.left+e.right)/2);else if(hn(o)){const Ge=Object.keys(o)[0];T=S(this.chart.scales[Ge].getPixelForValue(o[Ge]))}V=T-E,Q=V-g,ve=e.left,ee=e.right}const ue=Jt(r.ticks.maxTicksLimit,f),ge=Math.max(1,Math.ceil(f/ue));for(M=0;M<f;M+=ge){const Ge=s.setContext(this.getContext(M)),st=Ge.lineWidth,Ze=Ge.color,pn=Ge.borderDash||[],sn=Ge.borderDashOffset,qr=Ge.tickWidth,Zs=Ge.tickColor,Oo=Ge.tickBorderDash||[],Qs=Ge.tickBorderDashOffset;I=oY(this,M,a),void 0!==I&&(O=wl(i,I,st),l?V=Q=ve=ee=O:q=ie=he=de=O,v.push({tx1:V,ty1:q,tx2:Q,ty2:ie,x1:ve,y1:he,x2:ee,y2:de,width:st,color:Ze,borderDash:pn,borderDashOffset:sn,tickWidth:qr,tickColor:Zs,tickBorderDash:Oo,tickBorderDashOffset:Qs}))}return this._ticksLength=f,this._borderValue=T,v}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:g}=s,v=Pd(i.grid),_=v+f,y=g?-f:_,E=-ws(this.labelRotation),S=[];let T,M,I,O,V,q,Q,ie,ve,he,ee,de,ue="middle";if("top"===r)q=this.bottom-y,Q=this._getXAxisLabelAlignment();else if("bottom"===r)q=this.top+y,Q=this._getXAxisLabelAlignment();else if("left"===r){const Ge=this._getYAxisLabelAlignment(v);Q=Ge.textAlign,V=Ge.x}else if("right"===r){const Ge=this._getYAxisLabelAlignment(v);Q=Ge.textAlign,V=Ge.x}else if("x"===n){if("center"===r)q=(e.top+e.bottom)/2+_;else if(hn(r)){const Ge=Object.keys(r)[0];q=this.chart.scales[Ge].getPixelForValue(r[Ge])+_}Q=this._getXAxisLabelAlignment()}else if("y"===n){if("center"===r)V=(e.left+e.right)/2-_;else if(hn(r)){const Ge=Object.keys(r)[0];V=this.chart.scales[Ge].getPixelForValue(r[Ge])}Q=this._getYAxisLabelAlignment(v).textAlign}"y"===n&&("start"===l?ue="top":"end"===l&&(ue="bottom"));const ge=this._getLabelSizes();for(T=0,M=a.length;T<M;++T){I=a[T],O=I.label;const Ge=s.setContext(this.getContext(T));ie=this.getPixelForTick(T)+s.labelOffset,ve=this._resolveTickFontOptions(T),he=ve.lineHeight,ee=Bn(O)?O.length:1;const st=ee/2,Ze=Ge.color,pn=Ge.textStrokeColor,sn=Ge.textStrokeWidth;let Zs,qr=Q;if(o?(V=ie,"inner"===Q&&(qr=T===M-1?this.options.reverse?"left":"right":0===T?this.options.reverse?"right":"left":"center"),de="top"===r?"near"===c||0!==E?-ee*he+he/2:"center"===c?-ge.highest.height/2-st*he+he:he/2-ge.highest.height:"near"===c||0!==E?he/2:"center"===c?ge.highest.height/2-st*he:ge.highest.height-ee*he,g&&(de*=-1)):(q=ie,de=(1-ee)*he/2),Ge.showLabelBackdrop){const Oo=Bi(Ge.backdropPadding),Qs=ge.heights[T],No=ge.widths[T];let vu=q+de-Oo.top,_u=V-Oo.left;switch(ue){case"middle":vu-=Qs/2;break;case"bottom":vu-=Qs}switch(Q){case"center":_u-=No/2;break;case"right":_u-=No}Zs={left:_u,top:vu,width:No+Oo.width,height:Qs+Oo.height,color:Ge.backdropColor}}S.push({rotation:E,label:O,font:ve,color:Ze,strokeColor:pn,strokeWidth:sn,textOffset:de,textAlign:qr,textBaseline:ue,translation:[V,q],backdrop:Zs})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ws(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=e+s,l=this._getLabelSizes().widest.width;let c,f;return"left"===n?r?(f=this.right+s,"near"===i?c="left":"center"===i?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,"near"===i?c="right":"center"===i?(c="center",f-=l/2):(c="left",f=this.left)):"right"===n?r?(f=this.left+s,"near"===i?c="right":"center"===i?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,"near"===i?c="left":"center"===i?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;return"left"===n||"right"===n?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===n||"bottom"===n?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{grid:i}}=this,r=i.setContext(this.getContext()),s=i.drawBorder?r.borderWidth:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,f,g;this.isHorizontal()?(l=wl(e,this.left,s)-s/2,c=wl(e,this.right,o)+o/2,f=g=a):(f=wl(e,this.top,s)-s/2,g=wl(e,this.bottom,o)+o/2,l=c=a),n.save(),n.lineWidth=r.borderWidth,n.strokeStyle=r.borderColor,n.beginPath(),n.moveTo(l,f),n.lineTo(c,g),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&rm(i,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=s.length;o<a;++o){const l=s[o],c=l.font,f=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height)),xl(i,f,0,l.textOffset,c,l)}r&&sm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=mi(i.font),o=Bi(i.padding),a=i.align;let l=s.lineHeight/2;"bottom"===n||"center"===n||hn(n)?(l+=o.bottom,Bn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:g,rotation:v}=function hY(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let v,_,y,g=0;const E=o-r,S=a-s;if(t.isHorizontal()){if(_=Li(i,s,a),hn(n)){const T=Object.keys(n)[0];y=f[T].getPixelForValue(n[T])+E-e}else y="center"===n?(c.bottom+c.top)/2+E-e:mP(t,n,e);v=a-s}else{if(hn(n)){const T=Object.keys(n)[0];_=f[T].getPixelForValue(n[T])-S+e}else _="center"===n?(c.left+c.right)/2-S+e:mP(t,n,e);y=Li(i,o,r),g="left"===n?-Qn:Qn}return{titleX:_,titleY:y,maxWidth:v,rotation:g}}(this,l,n,a);xl(e,i.text,0,0,s,{color:i.color,maxWidth:g,rotation:v,textAlign:uY(a,n,r),textBaseline:"middle",translation:[c,f]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Jt(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===Tl.prototype.draw?[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]:[{z:n,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){return mi(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class hm{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;(function pY(t){return"id"in t&&"defaults"in t})(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function dY(t,e,n){const i=_d(Object.create(null),[n?dn.get(n):{},dn.get(e),t.defaults]);dn.set(e,i),t.defaultRoutes&&function fY(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");dn.route(s,r,l,a)})}(e,t.defaultRoutes),t.descriptors&&dn.describe(e,t.descriptors)}(e,o,i),this.override&&dn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in dn[r]&&(delete dn[r][i],this.override&&delete bl[i])}}var qs=new class gY{constructor(){this.controllers=new hm(Ys,"datasets",!0),this.elements=new hm(xs,"elements"),this.plugins=new hm(Object,"plugins"),this.scales=new hm(Tl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Sn(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=aw(e);Un(i["before"+r],[],i),n[e](i),Un(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+i+".");return r}},mY=Object.freeze({__proto__:null,BarController:$9,BubbleController:W9,DoughnutController:pP,LineController:Y9,PolarAreaController:q9,PieController:K9,RadarController:Z9,ScatterController:(()=>{class t extends Ys{update(n){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:a}=_R(i,r,s);if(this._drawStart=o,this._drawCount=a,yR(i)&&(o=0,a=r.length),this.options.showLine){const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const f=this.resolveDatasetElementOptions(n);f.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:f},n)}this.updateElements(r,o,a,n)}addElements(){const{showLine:n}=this.options;!this.datasetElementType&&n&&(this.datasetElementType=qs.getElement("line")),super.addElements()}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,g=this.resolveDataElementOptions(i,s),v=this.getSharedOptions(g),_=this.includeOptions(s,v),y=a.axis,E=l.axis,{spanGaps:S,segment:T}=this.options,M=su(S)?S:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||o||"none"===s;let O=i>0&&this.getParsed(i-1);for(let V=i;V<i+r;++V){const q=n[V],Q=this.getParsed(V),ie=I?q:{},ve=wn(Q[E]),he=ie[y]=a.getPixelForValue(Q[y],V),ee=ie[E]=o||ve?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,Q,c):Q[E],V);ie.skip=isNaN(he)||isNaN(ee)||ve,ie.stop=V>0&&Math.abs(Q[y]-O[y])>M,T&&(ie.parsed=Q,ie.raw=f.data[V]),_&&(ie.options=v||this.resolveDataElementOptions(V,q.active?"active":s)),I||this.updateElement(q,V,ie,s),O=Q}this.updateSharedOptions(v,s,g)}getMaxOverflow(){const n=this._cachedMeta,i=n.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=n.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return t.id="scatter",t.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},t.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},t})()});function Al(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var vY={_date:(()=>{class t{constructor(n){this.options=n||{}}init(n){}formats(){return Al()}parse(n,i){return Al()}format(n,i){return Al()}add(n,i,r){return Al()}diff(n,i,r){return Al()}startOf(n,i,r){return Al()}endOf(n,i){return Al()}}return t.override=function(e){Object.assign(t.prototype,e)},t})()};function _Y(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const l=a._reversePixels?J7:Io;if(!i)return l(s,e,n);if(r._sharedOptions){const c=s[0],f="function"==typeof c.getRange&&c.getRange(e);if(f){const g=l(s,e,n-f),v=l(s,e,n+f);return{lo:g.lo,hi:v.hi}}}}return{lo:0,hi:s.length-1}}function Od(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:g,hi:v}=_Y(s[a],e,o,r);for(let _=g;_<=v;++_){const y=f[_];y.skip||i(y,c,_)}}}function Mw(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Od(t,n,e,function(a,l,c){!r&&!Td(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Rw(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?function wY(t,e,n,i,r,s){let o=[];const a=function yY(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return Od(t,n,e,function c(f,g,v){const _=f.inRange(e.x,e.y,r);if(i&&!_)return;const y=f.getCenterPoint(r);if(!s&&!t.isPointInArea(y)&&!_)return;const S=a(e,y);S<l?(o=[{element:f,datasetIndex:g,index:v}],l=S):S===l&&o.push({element:f,datasetIndex:g,index:v})}),o}(t,e,n,i,r,s):function bY(t,e,n,i){let r=[];return Od(t,n,e,function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],i),{angle:g}=dR(o,{x:e.x,y:e.y});xd(g,c,f)&&r.push({element:o,datasetIndex:a,index:l})}),r}(t,e,n,r):[]}function yP(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Od(t,n,e,(l,c,f)=>{l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var xY={evaluateInteractionItems:Od,modes:{index(t,e,n,i){const r=Dl(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Mw(t,r,s,i,o):Rw(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,g=c.data[f];g&&!g.skip&&l.push({element:g,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,i){const r=Dl(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Mw(t,r,s,i,o):Rw(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point:(t,e,n,i)=>Mw(t,Dl(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest:(t,e,n,i)=>Rw(t,Dl(e,t),n.axis||"xy",n.intersect,i,n.includeInvisible||!1),x:(t,e,n,i)=>yP(t,Dl(e,t),"x",n.intersect,i),y:(t,e,n,i)=>yP(t,Dl(e,t),"y",n.intersect,i)}};const bP=["left","top","right","bottom"];function Nd(t,e){return t.filter(n=>n.pos===e)}function wP(t,e){return t.filter(n=>-1===bP.indexOf(n.pos)&&n.box.axis===e)}function kd(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function xP(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function EP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function TY(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!hn(r)){n.size&&(t[r]-=n.size);const g=i[n.stack]||{size:0,count:1};g.size=Math.max(g.size,n.horizontal?s.height:s.width),n.size=g.size/g.count,t[r]+=n.size}s.getPadding&&EP(o,s.getPadding());const a=Math.max(0,e.outerWidth-xP(o,t,"left","right")),l=Math.max(0,e.outerHeight-xP(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function IY(t,e){const n=e.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}(t?["left","right"]:["top","bottom"])}function Fd(t,e,n,i){const r=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,IY(a.horizontal,e));const{same:g,other:v}=TY(e,n,a,i);c|=g&&r.length,f=f||v,l.fullSize||r.push(a)}return c&&Fd(r,e,n,i)||f}function dm(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function CP(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const g=e.w*f,v=c.size||l.height;Wr(c.start)&&(o=c.start),l.fullSize?dm(l,r.left,o,n.outerWidth-r.right-r.left,v):dm(l,e.left+c.placed,o,g,v),c.start=o,c.placed+=g,o=l.bottom}else{const g=e.h*f,v=c.size||l.width;Wr(c.start)&&(s=c.start),l.fullSize?dm(l,s,r.top,v,n.outerHeight-r.bottom-r.top):dm(l,s,e.top+c.placed,v,g),c.start=s,c.placed+=g,s=l.right}}e.x=s,e.y=o}dn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Ui={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Bi(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function SY(t){const e=function EY(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=kd(e.filter(c=>c.box.fullSize),!0),i=kd(Nd(e,"left"),!0),r=kd(Nd(e,"right")),s=kd(Nd(e,"top"),!0),o=kd(Nd(e,"bottom")),a=wP(e,"x"),l=wP(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Nd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;Sn(t.boxes,E=>{"function"==typeof E.beforeLayout&&E.beforeLayout()});const f=l.reduce((E,S)=>S.box.options&&!1===S.box.options.display?E:E+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),v=Object.assign({},r);EP(v,Bi(i));const _=Object.assign({maxPadding:v,w:s,h:o,x:r.left,y:r.top},r),y=function DY(t,e){const n=function CY(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!bP.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=f?f*r:l&&e.availableHeight)}return n}(l.concat(c),g);Fd(a.fullSize,_,g,y),Fd(l,_,g,y),Fd(c,_,g,y)&&Fd(l,_,g,y),function AY(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(_),CP(a.leftAndTop,_,g,y),_.x+=_.w,_.y+=_.h,CP(a.rightAndBottom,_,g,y),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},Sn(a.chartArea,E=>{const S=E.box;Object.assign(S,t.chartArea),S.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class DP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class MY extends DP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const fm="$chartjs",RY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},SP=t=>null===t||""===t,TP=!!o9&&{passive:!0};function NY(t,e,n){t.canvas.removeEventListener(e,n,TP)}function pm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function FY(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||pm(a.addedNodes,i),o=o&&!pm(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function LY(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||pm(a.removedNodes,i),o=o&&!pm(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ld=new Map;let AP=0;function IP(){const t=window.devicePixelRatio;t!==AP&&(AP=t,Ld.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jY(t,e,n){const i=t.canvas,r=i&&Dw(i);if(!r)return;const s=vR((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;0===c&&0===f||s(c,f)});return o.observe(r),function BY(t,e){Ld.size||window.addEventListener("resize",IP),Ld.set(t,e)}(t,s),o}function Pw(t,e,n){n&&n.disconnect(),"resize"===e&&function UY(t){Ld.delete(t),Ld.size||window.removeEventListener("resize",IP)}(t)}function VY(t,e,n){const i=t.canvas,r=vR(s=>{null!==t.ctx&&n(function kY(t,e){const n=RY[t.type]||t.type,{x:i,y:r}=Dl(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,t))},t,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function OY(t,e,n){t.addEventListener(e,n,TP)}(i,e,r),r}class HY extends DP{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function PY(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[fm]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",SP(r)){const s=$R(t,"width");void 0!==s&&(t.width=s)}if(SP(i))if(""===t.style.height)t.height=t.width/(e||2);else{const s=$R(t,"height");void 0!==s&&(t.height=s)}}(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[fm])return!1;const i=n[fm].initial;["height","width"].forEach(s=>{const o=i[s];wn(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[fm],!0}addEventListener(e,n,i){this.removeEventListener(e,n),(e.$proxies||(e.$proxies={}))[n]=({attach:FY,detach:LY,resize:jY}[n]||VY)(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];r&&(({attach:Pw,detach:Pw,resize:Pw}[n]||NY)(e,n,r),i[n]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return function s9(t,e,n,i){const r=lm(t),s=Cl(r,"margin"),o=am(r.maxWidth,t,"clientWidth")||Zg,a=am(r.maxHeight,t,"clientHeight")||Zg,l=function r9(t,e,n){let i,r;if(void 0===e||void 0===n){const s=Dw(t);if(s){const o=s.getBoundingClientRect(),a=lm(s),l=Cl(a,"border","width"),c=Cl(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=am(a.maxWidth,s,"clientWidth"),r=am(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Zg,maxHeight:r||Zg}}(t,e,n);let{width:c,height:f}=l;if("content-box"===r.boxSizing){const g=Cl(r,"border","width"),v=Cl(r,"padding");c-=v.width+g.width,f-=v.height+g.height}return c=Math.max(0,c-s.width),f=Math.max(0,i?Math.floor(c/i):f-s.height),c=Sw(Math.min(c,o,l.maxWidth)),f=Sw(Math.min(f,a,l.maxHeight)),c&&!f&&(f=Sw(c/2)),{width:c,height:f}}(e,n,i,r)}isAttached(e){const n=Dw(e);return!(!n||!n.isConnected)}}class zY{constructor(){this._init=[]}notify(e,n,i,r){"beforeInit"===n&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return"afterDestroy"===n&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin;if(!1===Un(o[i],[n,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){wn(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Jt(i.options&&i.options.plugins,{}),s=function $Y(t){const e={},n=[],i=Object.keys(qs.plugins.items);for(let s=0;s<i.length;s++)n.push(qs.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===n.indexOf(o)&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}(i);return!1!==r||n?function XY(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=WY(i[l],r);null!==c&&s.push({plugin:a,options:YY(t.config,{plugin:a,local:n[l]},c,o)})}return s}(e,s,r,n):[]}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function WY(t,e){return e||!1!==t?!0===t?{}:t:null}function YY(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ow(t,e){return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||(dn.datasets[t]||{}).indexAxis||"x"}function Nw(t,e){return"x"===t||"y"===t?t:e.axis||function ZY(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}(e.position)||t.charAt(0).toLowerCase()}function MP(t){const e=t.options||(t.options={});e.plugins=Jt(e.plugins,{}),e.scales=function QY(t,e){const n=bl[t.type]||{scales:{}},i=e.scales||{},r=Ow(t.type,e),s=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!hn(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Nw(a,l),f=function KY(t,e){return t===e?"_index_":"_value_"}(c,r),g=n.scales||{};s[c]=s[c]||a,o[a]=yd(Object.create(null),[{axis:c},l,g[c],g[f]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||Ow(l,e),g=(bl[l]||{}).scales||{};Object.keys(g).forEach(v=>{const _=function qY(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(v,c),y=a[_+"AxisID"]||s[_]||_;o[y]=o[y]||Object.create(null),yd(o[y],[{axis:_},i[y],g[v]])})}),Object.keys(o).forEach(a=>{const l=o[a];yd(l,[dn.scales[l.type],dn.scale])}),o}(t,e)}function RP(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const PP=new Map,OP=new Set;function gm(t,e){let n=PP.get(t);return n||(n=e(),PP.set(t,n),OP.add(n)),n}const Bd=(t,e,n)=>{const i=_a(e,n);void 0!==i&&t.add(i)};class eq{constructor(e){this._config=function JY(t){return(t=t||{}).data=RP(t.data),MP(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=RP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),MP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return gm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return gm(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return gm(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id;return gm(`${this.type}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(g=>Bd(l,e,g))),f.forEach(g=>Bd(l,r,g)),f.forEach(g=>Bd(l,bl[s]||{},g)),f.forEach(g=>Bd(l,dn,g)),f.forEach(g=>Bd(l,_w,g))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),OP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,bl[n]||{},dn.datasets[n]||{},{type:n},dn,_w]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=NP(this._resolverCache,e,r);let l=o;(function nq(t,e){const{isScriptable:n,isIndexable:i}=kR(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ya(a)||tq(a))||o&&Bn(a))return!0}return!1})(o,n)&&(s.$shared=!1,l=au(o,i=ya(i)?i():i,this.createResolver(e,i,a)));for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=NP(this._resolverCache,e,i);return hn(n)?au(s,n,void 0,r):s}}function NP(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:xw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const tq=t=>hn(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||ya(t[n]),!1),rq=["top","bottom","left","right","chartArea"];function kP(t,e){return"top"===t||"bottom"===t||-1===rq.indexOf(t)&&"x"===e}function FP(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function LP(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Un(n&&n.onComplete,[t],e)}function sq(t){const e=t.chart,n=e.options.animation;Un(n&&n.onProgress,[t],e)}function BP(t){return GR()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const mm={},UP=t=>{const e=BP(t);return Object.values(mm).filter(n=>n.canvas===e).pop()};function oq(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}class vm{constructor(e,n){const i=this.config=new eq(n),r=BP(e),s=UP(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function GY(t){return!GR()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?MY:HY}(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;this.id=j7(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new zY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function nX(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],mm[this.id]=this,a&&l?(Ro.listen(this,"complete",LP),Ro.listen(this,"progress",sq),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return wn(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():zR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return PR(this.canvas,this.ctx),this}stop(){return Ro.stop(this),this}resize(e,n){Ro.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,o=this.platform.getMaximumSize(this.canvas,e,n,i.maintainAspectRatio&&this.aspectRatio),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,zR(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Un(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){Sn(this.options.scales||{},(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Nw(o,a),c="r"===l,f="x"===l;return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),Sn(s,o=>{const a=o.options,l=a.id,c=Nw(l,a),f=Jt(a.type,o.dtype);(void 0===a.position||kP(a.position,c)!==kP(o.dposition))&&(a.position=o.dposition),r[l]=!0;let g=null;l in i&&i[l].type===f?g=i[l]:(g=new(qs.getScale(f))({id:l,type:f,ctx:this.ctx,chart:this}),i[g.id]=g),g.init(a,e)}),Sn(r,(o,a)=>{o||delete i[a]}),Sn(i,o=>{Ui.configure(this,o,o.options),Ui.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(FP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{0===n.filter(s=>s===i._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Ow(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=qs.getController(a),{datasetElementType:c,dataElementType:f}=dn.datasets[a];Object.assign(l.prototype,{dataElementType:qs.getElement(f),datasetElementType:c&&qs.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Sn(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:g}=this.getDatasetMeta(c),v=!r&&-1===s.indexOf(g);g.buildOrUpdateElements(v),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Sn(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(FP("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Sn(this.scales,e=>{Ui.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!aR(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n)oq(e,r,"_removeElements"===i?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!aR(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ui.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Sn(this.boxes,r=>{i&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ya(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ro.has(this)?this.attached&&!Ro.running(this)&&Ro.start(this):(this.draw(),LP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&rm(n,{left:!1===i.left?0:s.left-i.left,right:!1===i.right?this.width:s.right+i.right,top:!1===i.top?0:s.top-i.top,bottom:!1===i.bottom?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&sm(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Td(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=xY.modes[n];return"function"==typeof s?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=xa(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!n.hidden}setDatasetVisibility(e,n){this.getDatasetMeta(e).hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Wr(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Ro.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),PR(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete mm[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Sn(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Sn(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Sn(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for("dataset"===n&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!qg(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,a=this._getActiveElements(e,r,i,n),l=function W7(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(e),c=function aq(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Un(s.onHover,[e,a,this],this),l&&Un(s.onClick,[e,a,this],this));const f=!qg(a,r);return(f||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,f}_getActiveElements(e,n,i,r){if("mouseout"===e.type)return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}const jP=()=>Sn(vm.instances,t=>t._plugins.invalidate()),Ea=!0;function VP(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Qn,i-Qn),t.closePath(),t.clip()}function uu(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function kw(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,g=Math.max(e.outerRadius+i+n-c,0),v=f>0?f+i+n+c:0;let _=0;const y=r-l;if(i){const Ze=((f>0?f-i:0)+(g>0?g-i:0))/2;_=(y-(0!==Ze?y*Ze/(Ze+i):y))/2}const S=(y-Math.max(.001,y*g-n/$n)/g)/2,T=l+S+_,M=r-S-_,{outerStart:I,outerEnd:O,innerStart:V,innerEnd:q}=function cq(t,e,n,i){const r=function lq(t){return ww(t,["outerStart","outerEnd","innerStart","innerEnd"])}(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return xi(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:xi(r.innerStart,0,o),innerEnd:xi(r.innerEnd,0,o)}}(e,v,g,M-T),Q=g-I,ie=g-O,ve=T+I/Q,he=M-O/ie,ee=v+V,de=v+q,ue=T+V/ee,ge=M-q/de;if(t.beginPath(),s){if(t.arc(o,a,g,ve,he),O>0){const Ze=uu(ie,he,o,a);t.arc(Ze.x,Ze.y,O,he,M+Qn)}const Ge=uu(de,M,o,a);if(t.lineTo(Ge.x,Ge.y),q>0){const Ze=uu(de,ge,o,a);t.arc(Ze.x,Ze.y,q,M+Qn,ge+Math.PI)}if(t.arc(o,a,v,M-q/v,T+V/v,!0),V>0){const Ze=uu(ee,ue,o,a);t.arc(Ze.x,Ze.y,V,ue+Math.PI,T-Qn)}const st=uu(Q,T,o,a);if(t.lineTo(st.x,st.y),I>0){const Ze=uu(Q,ve,o,a);t.arc(Ze.x,Ze.y,I,T-Qn,ve)}}else{t.moveTo(o,a);const Ge=Math.cos(ve)*g+o,st=Math.sin(ve)*g+a;t.lineTo(Ge,st);const Ze=Math.cos(he)*g+o,pn=Math.sin(he)*g+a;t.lineTo(Ze,pn)}t.closePath()}Object.defineProperties(vm,{defaults:{enumerable:Ea,value:dn},instances:{enumerable:Ea,value:mm},overrides:{enumerable:Ea,value:bl},registry:{enumerable:Ea,value:qs},version:{enumerable:Ea,value:"3.9.1"},getChart:{enumerable:Ea,value:UP},register:{enumerable:Ea,value:(...t)=>{qs.add(...t),jP()}},unregister:{enumerable:Ea,value:(...t)=>{qs.remove(...t),jP()}}});class _m extends xs{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=dR(r,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=this.options.spacing/2,y=Jt(g,l-a)>=Rn||xd(s,a,l),E=Ao(o,c+v,f+v);return y&&E}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,f=(r+s)/2,g=(o+a+c+l)/2;return{x:n+Math.cos(f)*g,y:i+Math.sin(f)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/2,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin="inner"===n.borderAlign?.33:0,this.fullCircles=i>Rn?Math.floor(i/Rn):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(r){a=r/2;const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=$n&&(a=r)}e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor;const l=function uq(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){kw(t,e,n,i,o+Rn,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+a%Rn,a%Rn==0&&(l+=Rn))}return kw(t,e,n,i,l,r),t.fill(),l}(e,this,a,s,o);(function dq(t,e,n,i,r,s){const{options:o}=e,{borderWidth:a,borderJoinStyle:l}=o,c="inner"===o.borderAlign;!a||(c?(t.lineWidth=2*a,t.lineJoin=l||"round"):(t.lineWidth=a,t.lineJoin=l||"bevel"),e.fullCircles&&function hq(t,e,n){const{x:i,y:r,startAngle:s,pixelMargin:o,fullCircles:a}=e,l=Math.max(e.outerRadius-o,0),c=e.innerRadius+o;let f;for(n&&VP(t,e,s+Rn),t.beginPath(),t.arc(i,r,c,s+Rn,s,!0),f=0;f<a;++f)t.stroke();for(t.beginPath(),t.arc(i,r,l,s,s+Rn),f=0;f<a;++f)t.stroke()}(t,e,c),c&&VP(t,e,r),kw(t,e,n,i,r,s),t.stroke())})(e,this,a,s,l,o),e.restore()}}function HP(t,e,n=e){t.lineCap=Jt(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Jt(n.borderDash,e.borderDash)),t.lineDashOffset=Jt(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Jt(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Jt(n.borderWidth,e.borderWidth),t.strokeStyle=Jt(n.borderColor,e.borderColor)}function fq(t,e,n){t.lineTo(n.x,n.y)}function GP(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(r<o&&s<o||r>a&&s>a)?i+c-l:c-l}}function gq(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=GP(r,n,i),f=function pq(t){return t.stepped?IX:t.tension||"monotone"===t.cubicInterpolationMode?MX:fq}(s);let _,y,E,{move:g=!0,reverse:v}=i||{};for(_=0;_<=c;++_)y=r[(a+(v?c-_:_))%o],!y.skip&&(g?(t.moveTo(y.x,y.y),g=!1):f(t,E,y,v,s.stepped),E=y);return l&&(y=r[(a+(v?c:0))%o],f(t,E,y,v,s.stepped)),!!l}function mq(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=GP(r,n,i),{move:l=!0,reverse:c}=i||{};let v,_,y,E,S,T,f=0,g=0;const M=O=>(o+(c?a-O:O))%s,I=()=>{E!==S&&(t.lineTo(f,S),t.lineTo(f,E),t.lineTo(f,T))};for(l&&(_=r[M(0)],t.moveTo(_.x,_.y)),v=0;v<=a;++v){if(_=r[M(v)],_.skip)continue;const O=_.x,V=_.y,q=0|O;q===y?(V<E?E=V:V>S&&(S=V),f=(g*f+O)/++g):(I(),t.lineTo(O,V),y=q,g=0,E=S=V),T=V}I()}function Fw(t){const e=t.options;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?gq:mq}_m.id="arc",_m.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},_m.defaultRoutes={backgroundColor:"backgroundColor"};const bq="function"==typeof Path2D;let ym=(()=>{class t extends xs{constructor(n){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,n&&Object.assign(this,n)}updateControlPoints(n,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(JX(this._points,r,n,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(n){this._points=n,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function g9(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function f9(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return function JR(t,e,n,i){return i&&i.setContext&&n?function m9(t,e,n,i){const r=t._chart.getContext(),s=eP(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,g=e[0].start,v=g;function _(y,E,S,T){const M=a?-1:1;if(y!==E){for(y+=l;n[y%l].skip;)y-=M;for(;n[E%l].skip;)E+=M;y%l!=E%l&&(c.push({start:y%l,end:E%l,loop:S,style:T}),f=T,g=E%l)}}for(const y of e){g=a?g:y.start;let S,E=n[g%l];for(v=g+1;v<=y.end;v++){const T=n[v%l];S=eP(i.setContext(xa(r,{type:"segment",p0:E,p1:T,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),v9(S,f)&&_(g,v-1,y.loop,f),E=T,f=S}g<v-1&&_(g,v-1,y.loop,f)}return c}(t,e,n,i):e}(t,!0===i?[{start:o,end:a,loop:s}]:function p9(t,e,n,i){const r=t.length,s=[];let l,o=e,a=t[e];for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s.push({start:e%r,end:(l-1)%r,loop:i=!1}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return null!==o&&s.push({start:e%r,end:o%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const n=this.segments;return n.length&&this.points[n[0].start]}last(){const n=this.segments,r=n.length;return r&&this.points[n[r-1].end]}interpolate(n,i){const r=this.options,s=n[i],o=this.points,a=QR(this,{property:i,start:s,end:s});if(!a.length)return;const l=[],c=function vq(t){return t.stepped?a9:t.tension||"monotone"===t.cubicInterpolationMode?l9:Sl}(r);let f,g;for(f=0,g=a.length;f<g;++f){const{start:v,end:_}=a[f],y=o[v],E=o[_];if(y===E){l.push(y);continue}const T=c(y,E,Math.abs((s-y[i])/(E[i]-y[i])),r.stepped);T[i]=n[i],l.push(T)}return 1===l.length?l[0]:l}pathSegment(n,i,r){return Fw(this)(n,this,i,r)}path(n,i,r){const s=this.segments,o=Fw(this);let a=this._loop;i=i||0,r=r||this.points.length-i;for(const l of s)a&=o(n,this,l,{start:i,end:i+r-1});return!!a}draw(n,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(n.save(),function wq(t,e,n,i){bq&&!e.options.segment?function _q(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),HP(t,e.options),t.stroke(r)}(t,e,n,i):function yq(t,e,n,i){const{segments:r,options:s}=e,o=Fw(e);for(const a of r)HP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(n,this,r,s),n.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t.id="line",t.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},t.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},t.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e},t})();function zP(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}let xq=(()=>{class t extends xs{constructor(n){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return zP(this,n,"x",i)}inYRange(n,i){return zP(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){let i=(n=n||this.options||{}).radius||0;return i=Math.max(i,i&&n.hoverRadius||0),2*(i+(i&&n.borderWidth||0))}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Td(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,bw(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}return t.id="point",t.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},t.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},t})();function $P(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,g;return t.horizontal?(g=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-g,f=i+g):(g=s/2,a=n-g,l=n+g,c=Math.min(i,r),f=Math.max(i,r)),{left:a,top:c,right:l,bottom:f}}function Ca(t,e,n,i){return t?0:xi(e,n,i)}function Lw(t,e,n,i){const r=null===e,s=null===n,a=t&&!(r&&s)&&$P(t,i);return a&&(r||Ao(e,a.left,a.right))&&(s||Ao(n,a.top,a.bottom))}function Tq(t,e){t.rect(e.x,e.y,e.w,e.h)}function Bw(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0;return{x:t.x+i,y:t.y+r,w:t.w+((t.x+t.w!==n.x+n.w?e:0)-i),h:t.h+((t.y+t.h!==n.y+n.h?e:0)-r),radius:t.radius}}class bm extends xs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=function Dq(t){const e=$P(t),n=e.right-e.left,i=e.bottom-e.top,r=function Eq(t,e,n){const r=t.borderSkipped,s=NR(t.options.borderWidth);return{t:Ca(r.top,s.top,0,n),r:Ca(r.right,s.right,0,e),b:Ca(r.bottom,s.bottom,0,n),l:Ca(r.left,s.left,0,e)}}(t,n/2,i/2),s=function Cq(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=El(r),o=Math.min(e,n),a=t.borderSkipped,l=i||hn(r);return{topLeft:Ca(!l||a.top||a.left,s.topLeft,0,o),topRight:Ca(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ca(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ca(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),a=function Sq(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}(o.radius)?Ad:Tq;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,Bw(o,n,s)),e.clip(),a(e,Bw(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Bw(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Lw(this,e,n,i)}inXRange(e,n){return Lw(this,e,null,n)}inYRange(e,n){return Lw(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}bm.id="bar",bm.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},bm.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Aq=Object.freeze({__proto__:null,ArcElement:_m,LineElement:ym,PointElement:xq,BarElement:bm});function WP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function XP(t){t.data.datasets.forEach(e=>{WP(e)})}var Pq={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void XP(t);const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if("y"===Id([a,t.options.indexAxis])||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if("linear"!==f.type&&"time"!==f.type||t.options.parsing)return;let y,{start:g,count:v}=function Rq(t,e){const n=e.length;let r,i=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=xi(Io(e,s.axis,o).lo,0,n-1)),r=c?xi(Io(e,s.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(l,c);if(v<=(n.threshold||4*i))WP(r);else{switch(wn(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}})),n.algorithm){case"lttb":y=function Iq(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let g,v,_,y,E,f=e;for(o[l++]=t[f],g=0;g<s-2;g++){let M,S=0,T=0;const I=Math.floor((g+1)*a)+1+e,O=Math.min(Math.floor((g+2)*a)+1,n)+e,V=O-I;for(M=I;M<O;M++)S+=t[M].x,T+=t[M].y;S/=V,T/=V;const q=Math.floor(g*a)+1+e,Q=Math.min(Math.floor((g+1)*a)+1,n)+e,{x:ie,y:ve}=t[f];for(_=y=-1,M=q;M<Q;M++)y=.5*Math.abs((ie-S)*(t[M].y-ve)-(ie-t[M].x)*(T-ve)),y>_&&(_=y,v=t[M],E=M);o[l++]=v,f=E}return o[l++]=t[c],o}(c,g,v,i,n);break;case"min-max":y=function Mq(t,e,n,i){let o,a,l,c,f,g,v,_,y,E,r=0,s=0;const S=[],M=t[e].x,O=t[e+n-1].x-M;for(o=e;o<e+n;++o){a=t[o],l=(a.x-M)/O*i,c=a.y;const V=0|l;if(V===f)c<y?(y=c,g=o):c>E&&(E=c,v=o),r=(s*r+a.x)/++s;else{const q=o-1;if(!wn(g)&&!wn(v)){const Q=Math.min(g,v),ie=Math.max(g,v);Q!==_&&Q!==q&&S.push({...t[Q],x:r}),ie!==_&&ie!==q&&S.push({...t[ie],x:r})}o>0&&q!==_&&S.push(t[q]),S.push(a),f=V,s=0,y=E=c,g=v=_=o}}return S}(c,g,v,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=y}})},destroy(t){XP(t)}};function Uw(t,e,n,i){if(i)return;let r=e[t],s=n[t];return"angle"===t&&(r=Sr(r),s=Sr(s)),{property:t,start:r,end:s}}function jw(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function YP(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function qP(t,e){let n=[],i=!1;return Bn(t)?(i=!0,n=t):n=function Nq(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=jw(o,a,r);const l=r[o],c=r[a];null!==i?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):null!==n&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}(t,e),n.length?new ym({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function KP(t){return t&&!1!==t.fill}function kq(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!ii(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function Fq(t,e,n){const i=function jq(t){const e=t.options,n=e.fill;let i=Jt(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(hn(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return ii(r)&&Math.floor(r)===r?function Lq(t,e,n,i){return("-"===t||"+"===t)&&(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Gq(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=zq(s,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function zq(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],g=o[f.start][n],v=o[f.end][n];if(Ao(r,g,v)){a=r===g,l=r===v;break}}return{first:a,last:l,point:i}}class ZP{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return e.arc(r,s,o,(n=n||{start:0,end:Rn}).end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function Vw(t,e,n){const i=function $q(t){const{chart:e,fill:n,line:i}=t;if(ii(n))return function Wq(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function Vq(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=function Hq(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}(e,n);a.push(qP({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)Gq(r,o[f],a)}return new ym({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function Xq(t){return(t.scale||{}).getPointPositionForValue?function qq(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=function Uq(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:hn(t)?t.value:e.getBaseValue(),i}(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new ZP({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}(t):function Yq(t){const{scale:e={},fill:n}=t,i=function Bq(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:hn(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(ii(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(t)}(t);return r instanceof ZP?r:qP(r,i)}(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:g=c}=l||{};i&&r.points.length&&(rm(t,n),function Kq(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&s!==r&&(QP(t,i,o.top),JP(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),QP(t,i,o.bottom)),JP(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}(t,{line:r,target:i,above:f,below:g,area:n,scale:s,axis:o}),sm(t))}function QP(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,f=r[l],g=r[jw(l,c,r)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(g.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function JP(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=function Oq(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=jw(l,c,r);const f=Uw(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:r[l],end:r[c]});continue}const g=QR(e,f);for(const v of g){const _=Uw(n,s[v.start],s[v.end],v.loop),y=ZR(a,r,_);for(const E of y)o.push({source:E,target:v,start:{[n]:YP(f,_,"start",Math.max)},end:{[n]:YP(f,_,"end",Math.min)}})}}return o}(n,i,r);for(const{source:l,target:c,start:f,end:g}of a){const{style:{backgroundColor:v=s}={}}=l,_=!0!==i;t.save(),t.fillStyle=v,Zq(t,o,_&&Uw(r,f,g)),t.beginPath();const y=!!n.pathSegment(t,l);let E;if(_){y?t.closePath():eO(t,i,g,r);const S=!!i.pathSegment(t,c,{move:y,reverse:!0});E=y&&S,E||eO(t,i,f,r)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Zq(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};"x"===s&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function eO(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var Qq={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ym&&(l={visible:t.isDatasetVisible(o),index:o,fill:Fq(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=kq(r,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;!a||(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Vw(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;KP(s)&&Vw(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!KP(i)||"beforeDatasetDraw"!==n.drawTime||Vw(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const tO=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class nO extends xs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Un(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,r=mi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=tO(i,s);let c,f;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=r+a;let g=e;s.textAlign="left",s.textBaseline="middle";let v=-1,_=-f;return this.legendItems.forEach((y,E)=>{const S=i+n/2+s.measureText(y.text).width;(0===E||c[c.length-1]+S+2*a>o)&&(g+=f,c[c.length-(E>0?0:1)]=0,_+=f,v++),l[E]={left:0,top:_,row:v,width:S,height:r},c[c.length-1]+=S+a}),g}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let g=a,v=0,_=0,y=0,E=0;return this.legendItems.forEach((S,T)=>{const M=i+n/2+s.measureText(S.text).width;T>0&&_+r+2*a>f&&(g+=v+a,c.push({width:v,height:_}),y+=v+a,E++,v=_=0),l[T]={left:y,top:_,col:E,width:M,height:r},v=Math.max(v,M),_+=r+a}),g+=v,c.push({width:v,height:_}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=cu(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Li(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Li(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Li(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Li(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;rm(e,this),this._draw(),sm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=dn.color,l=cu(e.rtl,this.left,this.width),c=mi(o.font),{color:f,padding:g}=o,v=c.size,_=v/2;let y;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:E,boxHeight:S,itemHeight:T}=tO(o,v),O=this.isHorizontal(),V=this._computeTitleHeight();y=O?{x:Li(s,this.left+g,this.right-i[0]),y:this.top+g+V,line:0}:{x:this.left+g,y:Li(s,this.top+V+g,this.bottom-n[0].height),line:0},XR(this.ctx,e.textDirection);const q=T+g;this.legendItems.forEach((Q,ie)=>{r.strokeStyle=Q.fontColor||f,r.fillStyle=Q.fontColor||f;const ve=r.measureText(Q.text).width,he=l.textAlign(Q.textAlign||(Q.textAlign=o.textAlign)),ee=E+_+ve;let de=y.x,ue=y.y;l.setWidth(this.width),O?ie>0&&de+ee+g>this.right&&(ue=y.y+=q,y.line++,de=y.x=Li(s,this.left+g,this.right-i[y.line])):ie>0&&ue+q>this.bottom&&(de=y.x=de+n[y.line].width+g,y.line++,ue=y.y=Li(s,this.top+V+g,this.bottom-n[y.line].height)),function(Q,ie,ve){if(isNaN(E)||E<=0||isNaN(S)||S<0)return;r.save();const he=Jt(ve.lineWidth,1);if(r.fillStyle=Jt(ve.fillStyle,a),r.lineCap=Jt(ve.lineCap,"butt"),r.lineDashOffset=Jt(ve.lineDashOffset,0),r.lineJoin=Jt(ve.lineJoin,"miter"),r.lineWidth=he,r.strokeStyle=Jt(ve.strokeStyle,a),r.setLineDash(Jt(ve.lineDash,[])),o.usePointStyle){const ee={radius:S*Math.SQRT2/2,pointStyle:ve.pointStyle,rotation:ve.rotation,borderWidth:he},de=l.xPlus(Q,E/2);OR(r,ee,de,ie+_,o.pointStyleWidth&&E)}else{const ee=ie+Math.max((v-S)/2,0),de=l.leftForLtr(Q,E),ue=El(ve.borderRadius);r.beginPath(),Object.values(ue).some(ge=>0!==ge)?Ad(r,{x:de,y:ee,w:E,h:S,radius:ue}):r.rect(de,ee,E,S),r.fill(),0!==he&&r.stroke()}r.restore()}(l.x(de),ue,Q),de=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(he,de+E+_,O?de+ee:this.right,e.rtl),function(Q,ie,ve){xl(r,ve.text,Q,ie+T/2,c,{strikethrough:ve.hidden,textAlign:l.textAlign(ve.textAlign)})}(l.x(de),ue,Q),O?y.x+=ee+g:y.y+=q}),YR(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=mi(n.font),r=Bi(n.padding);if(!n.display)return;const s=cu(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=r.top+i.size/2;let f,g=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),f=this.top+c,g=Li(e.align,g,this.right-v);else{const y=this.columnSizes.reduce((E,S)=>Math.max(E,S.height),0);f=c+Li(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const _=Li(a,g,g+v);o.textAlign=s.textAlign(hw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,xl(o,n.text,_,f,i)}_computeTitleHeight(){const e=this.options.title,n=mi(e.font),i=Bi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Ao(e,this.left,this.right)&&Ao(n,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ao(e,r.left,r.left+r.width)&&Ao(n,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(e){const n=this.options;if(!function eK(t,e){return!(("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==t&&"mouseup"!==t))}(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(r,i);r&&!s&&Un(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Un(n.onHover,[e,i,this],this)}else i&&Un(n.onClick,[e,i,this],this)}}var tK={id:"legend",_element:nO,start(t,e,n){const i=t.legend=new nO({ctx:t.ctx,options:n,chart:t});Ui.configure(t,i,n),Ui.addBox(t,i)},stop(t){Ui.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Ui.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(n?0:void 0),l=Bi(a.borderWidth);return{text:e[o.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Hw extends xs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=n;const r=Bn(i.text)?i.text.length:1;this._padding=Bi(i.padding);const s=r*mi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c,f,g,l=0;return this.isHorizontal()?(f=Li(a,i,s),g=n+e,c=s-i):("left"===o.position?(f=i+e,g=Li(a,r,n),l=-.5*$n):(f=s-e,g=Li(a,n,r),l=.5*$n),c=r-n),{titleX:f,titleY:g,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=mi(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);xl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:hw(n.align),textBaseline:"middle",translation:[o,a]})}}var iK={id:"title",_element:Hw,start(t,e,n){!function nK(t,e){const n=new Hw({ctx:t.ctx,options:e,chart:t});Ui.configure(t,n,e),Ui.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){Ui.removeBox(t,t.titleBlock),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Ui.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const wm=new WeakMap;var rK={id:"subtitle",start(t,e,n){const i=new Hw({ctx:t.ctx,options:n,chart:t});Ui.configure(t,i,n),Ui.addBox(t,i),wm.set(t,i)},stop(t){Ui.removeBox(t,wm.get(t)),wm.delete(t)},beforeUpdate(t,e,n){const i=wm.get(t);Ui.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ud={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let s,o,a,n=e.x,i=e.y,r=Number.POSITIVE_INFINITY;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const f=cw(e,l.getCenterPoint());f<r&&(r=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Ks(t,e){return e&&(Bn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Po(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function sK(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iO(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=mi(e.bodyFont),c=mi(e.titleFont),f=mi(e.footerFont),g=s.length,v=r.length,_=i.length,y=Bi(e.padding);let E=y.height,S=0,T=i.reduce((O,V)=>O+V.before.length+V.lines.length+V.after.length,0);T+=t.beforeBody.length+t.afterBody.length,g&&(E+=g*c.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),T&&(E+=_*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(T-_)*l.lineHeight+(T-1)*e.bodySpacing),v&&(E+=e.footerMarginTop+v*f.lineHeight+(v-1)*e.footerSpacing);let M=0;const I=function(O){S=Math.max(S,n.measureText(O).width+M)};return n.save(),n.font=c.string,Sn(t.title,I),n.font=l.string,Sn(t.beforeBody.concat(t.afterBody),I),M=e.displayColors?o+2+e.boxPadding:0,Sn(i,O=>{Sn(O.before,I),Sn(O.lines,I),Sn(O.after,I)}),M=0,n.font=f.string,Sn(t.footer,I),n.restore(),S+=y.width,{width:S,height:E}}function lK(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function aK(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if("left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0)return!0}(c,t,e,n)&&(c="center"),c}function rO(t,e,n){const i=n.yAlign||e.yAlign||function oK(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||lK(t,e,n,i),yAlign:i}}function sO(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:f,topRight:g,bottomLeft:v,bottomRight:_}=El(o);let y=function cK(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const E=function uK(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?y+=c:"right"===a&&(y-=c):"left"===a?y-=Math.max(f,v)+r:"right"===a&&(y+=Math.max(g,_)+r),{x:xi(y,0,i.width-e.width),y:xi(E,0,i.height-e.height)}}function xm(t,e,n){const i=Bi(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function oO(t){return Ks([],Po(t))}function aO(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}let lO=(()=>{class t extends xs{constructor(n){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=n.chart||n._chart,this._chart=this.chart,this.options=n.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(n){this.options=n,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const n=this._cachedAnimations;if(n)return n;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new nP(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function hK(t,e,n){return xa(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(n,i){const{callbacks:r}=i,s=r.beforeTitle.apply(this,[n]),o=r.title.apply(this,[n]),a=r.afterTitle.apply(this,[n]);let l=[];return l=Ks(l,Po(s)),l=Ks(l,Po(o)),l=Ks(l,Po(a)),l}getBeforeBody(n,i){return oO(i.callbacks.beforeBody.apply(this,[n]))}getBody(n,i){const{callbacks:r}=i,s=[];return Sn(n,o=>{const a={before:[],lines:[],after:[]},l=aO(r,o);Ks(a.before,Po(l.beforeLabel.call(this,o))),Ks(a.lines,l.label.call(this,o)),Ks(a.after,Po(l.afterLabel.call(this,o))),s.push(a)}),s}getAfterBody(n,i){return oO(i.callbacks.afterBody.apply(this,[n]))}getFooter(n,i){const{callbacks:r}=i,s=r.beforeFooter.apply(this,[n]),o=r.footer.apply(this,[n]),a=r.afterFooter.apply(this,[n]);let l=[];return l=Ks(l,Po(s)),l=Ks(l,Po(o)),l=Ks(l,Po(a)),l}_createItems(n){const i=this._active,r=this.chart.data,s=[],o=[],a=[];let c,f,l=[];for(c=0,f=i.length;c<f;++c)l.push(sK(this.chart,i[c]));return n.filter&&(l=l.filter((g,v,_)=>n.filter(g,v,_,r))),n.itemSort&&(l=l.sort((g,v)=>n.itemSort(g,v,r))),Sn(l,g=>{const v=aO(n.callbacks,g);s.push(v.labelColor.call(this,g)),o.push(v.labelPointStyle.call(this,g)),a.push(v.labelTextColor.call(this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(n,i){const r=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=Ud[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=iO(this,r),f=Object.assign({},l,c),g=rO(this.chart,r,f),v=sO(r,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:v.x,y:v.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),n&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(n,i,r,s){const o=this.getCaretPosition(n,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(n,i,r){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:f,bottomLeft:g,bottomRight:v}=El(l),{x:_,y}=n,{width:E,height:S}=i;let T,M,I,O,V,q;return"center"===o?(V=y+S/2,"left"===s?(T=_,M=T-a,O=V+a,q=V-a):(T=_+E,M=T+a,O=V-a,q=V+a),I=T):(M="left"===s?_+Math.max(c,g)+a:"right"===s?_+E-Math.max(f,v)-a:this.caretX,"top"===o?(O=y,V=O-a,T=M-a,I=M+a):(O=y+S,V=O+a,T=M+a,I=M-a),q=O),{x1:T,x2:M,x3:I,y1:O,y2:V,y3:q}}drawTitle(n,i,r){const s=this.title,o=s.length;let a,l,c;if(o){const f=cu(r.rtl,this.x,this.width);for(n.x=xm(this,r.titleAlign,r),i.textAlign=f.textAlign(r.titleAlign),i.textBaseline="middle",a=mi(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],f.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+l,c+1===o&&(n.y+=r.titleMarginBottom-l)}}_drawColorBox(n,i,r,s,o){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:f,boxPadding:g}=o,v=mi(o.bodyFont),_=xm(this,"left",o),y=s.x(_),S=i.y+(c<v.lineHeight?(v.lineHeight-c)/2:0);if(o.usePointStyle){const T={radius:Math.min(f,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},M=s.leftForLtr(y,f)+f/2,I=S+c/2;n.strokeStyle=o.multiKeyBackground,n.fillStyle=o.multiKeyBackground,bw(n,T,M,I),n.strokeStyle=a.borderColor,n.fillStyle=a.backgroundColor,bw(n,T,M,I)}else{n.lineWidth=hn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,n.strokeStyle=a.borderColor,n.setLineDash(a.borderDash||[]),n.lineDashOffset=a.borderDashOffset||0;const T=s.leftForLtr(y,f-g),M=s.leftForLtr(s.xPlus(y,1),f-g-2),I=El(a.borderRadius);Object.values(I).some(O=>0!==O)?(n.beginPath(),n.fillStyle=o.multiKeyBackground,Ad(n,{x:T,y:S,w:f,h:c,radius:I}),n.fill(),n.stroke(),n.fillStyle=a.backgroundColor,n.beginPath(),Ad(n,{x:M,y:S+1,w:f-2,h:c-2,radius:I}),n.fill()):(n.fillStyle=o.multiKeyBackground,n.fillRect(T,S,f,c),n.strokeRect(T,S,f,c),n.fillStyle=a.backgroundColor,n.fillRect(M,S+1,f-2,c-2))}n.fillStyle=this.labelTextColors[r]}drawBody(n,i,r){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:f,boxPadding:g}=r,v=mi(r.bodyFont);let _=v.lineHeight,y=0;const E=cu(r.rtl,this.x,this.width),S=function(ve){i.fillText(ve,E.x(n.x+y),n.y+_/2),n.y+=_+o},T=E.textAlign(a);let M,I,O,V,q,Q,ie;for(i.textAlign=a,i.textBaseline="middle",i.font=v.string,n.x=xm(this,T,r),i.fillStyle=r.bodyColor,Sn(this.beforeBody,S),y=l&&"right"!==T?"center"===a?f/2+g:f+2+g:0,V=0,Q=s.length;V<Q;++V){for(M=s[V],I=this.labelTextColors[V],i.fillStyle=I,Sn(M.before,S),O=M.lines,l&&O.length&&(this._drawColorBox(i,n,V,E,r),_=Math.max(v.lineHeight,c)),q=0,ie=O.length;q<ie;++q)S(O[q]),_=v.lineHeight;Sn(M.after,S)}y=0,_=v.lineHeight,Sn(this.afterBody,S),n.y-=o}drawFooter(n,i,r){const s=this.footer,o=s.length;let a,l;if(o){const c=cu(r.rtl,this.x,this.width);for(n.x=xm(this,r.footerAlign,r),n.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=mi(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+r.footerSpacing}}drawBackground(n,i,r,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=n,{width:f,height:g}=r,{topLeft:v,topRight:_,bottomLeft:y,bottomRight:E}=El(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+v,c),"top"===a&&this.drawCaret(n,i,r,s),i.lineTo(l+f-_,c),i.quadraticCurveTo(l+f,c,l+f,c+_),"center"===a&&"right"===o&&this.drawCaret(n,i,r,s),i.lineTo(l+f,c+g-E),i.quadraticCurveTo(l+f,c+g,l+f-E,c+g),"bottom"===a&&this.drawCaret(n,i,r,s),i.lineTo(l+y,c+g),i.quadraticCurveTo(l,c+g,l,c+g-y),"center"===a&&"left"===o&&this.drawCaret(n,i,r,s),i.lineTo(l,c+v),i.quadraticCurveTo(l,c,l+v,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(n){const i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const a=Ud[n.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=iO(this,n),c=Object.assign({},a,this._size),f=rO(i,n,c),g=sO(n,c,f,i);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(n){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Bi(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(n.save(),n.globalAlpha=r,this.drawBackground(o,n,s,i),XR(n,i.textDirection),o.y+=a.top,this.drawTitle(o,n,i),this.drawBody(o,n,i),this.drawFooter(o,n,i),YR(n,i.textDirection),n.restore())}getActiveElements(){return this._active||[]}setActiveElements(n,i){const r=this._active,s=n.map(({datasetIndex:l,index:c})=>{const f=this.chart.getDatasetMeta(l);if(!f)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:f.data[c],index:c}}),o=!qg(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(n,o,i,r),l=this._positionChanged(a,n),c=i||!qg(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,i))),c}_getActiveElements(n,i,r,s){const o=this.options;if("mouseout"===n.type)return[];if(!s)return i;const a=this.chart.getElementsAtEventForMode(n,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(n,i){const{caretX:r,caretY:s,options:o}=this,a=Ud[o.position].call(this,n,i);return!1!==a&&(r!==a.x||s!==a.y)}}return t.positioners=Ud,t})();var dK={id:"tooltip",_element:lO,positioners:Ud,afterInit(t,e,n){n&&(t.tooltip=new lO({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",n))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){t.tooltip&&t.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:To,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:To,beforeBody:To,beforeLabel:To,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return wn(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:To,afterBody:To,beforeFooter:To,footer:To,afterFooter:To}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},fK=Object.freeze({__proto__:null,Decimation:Pq,Filler:Qq,Legend:tK,SubTitle:rK,Title:iK,Tooltip:dK});class Em extends Tl{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(wn(e))return null;const i=this.getLabels();return((t,e)=>null===t?null:xi(Math.round(t),0,e))(n=isFinite(n)&&i[n]===e?n:function gK(t,e,n,i){const r=t.indexOf(e);return-1===r?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):r!==t.lastIndexOf(e)?n:r}(i,e,Jt(n,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=0===e&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){const n=this.getLabels();return e>=0&&e<n.length?n[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cO(t,e,{horizontal:n,minRotation:i}){const r=ws(i),s=(n?Math.sin(r):Math.cos(r))||.001;return Math.min(e/s,.75*e*(""+t).length)}Em.id="category",Em.defaults={ticks:{callback:Em.prototype.getLabelForValue}};class Cm extends Tl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return wn(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Xs(r),c=Xs(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*s)),a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let r,{maxTicksLimit:n,stepSize:i}=e;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function vK(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:g,includeBounds:v}=t,_=s||1,y=f-1,{min:E,max:S}=e,T=!wn(o),M=!wn(a),I=!wn(c),O=(S-E)/(g+1);let q,Q,ie,ve,V=cR((S-E)/y/_)*_;if(V<1e-14&&!T&&!M)return[{value:E},{value:S}];ve=Math.ceil(S/V)-Math.floor(E/V),ve>y&&(V=cR(ve*V/y/_)*_),wn(l)||(q=Math.pow(10,l),V=Math.ceil(V*q)/q),"ticks"===r?(Q=Math.floor(E/V)*V,ie=Math.ceil(S/V)*V):(Q=E,ie=S),T&&M&&s&&function K7(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/s,V/1e3)?(ve=Math.round(Math.min((a-o)/V,f)),V=(a-o)/ve,Q=o,ie=a):I?(Q=T?o:Q,ie=M?a:ie,ve=c-1,V=(ie-Q)/ve):(ve=(ie-Q)/V,ve=wd(ve,Math.round(ve),V/1e3)?Math.round(ve):Math.ceil(ve));const he=Math.max(hR(V),hR(Q));q=Math.pow(10,wn(l)?he:l),Q=Math.round(Q*q)/q,ie=Math.round(ie*q)/q;let ee=0;for(T&&(v&&Q!==o?(n.push({value:o}),Q<o&&ee++,wd(Math.round((Q+ee*V)*q)/q,o,cO(o,O,t))&&ee++):Q<o&&ee++);ee<ve;++ee)n.push({value:Math.round((Q+ee*V)*q)/q});return M&&v&&ie!==a?n.length&&wd(n[n.length-1].value,a,cO(a,O,t))?n[n.length-1].value=a:n.push({value:a}):(!M||ie===a)&&n.push({value:ie}),n}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:!1!==n.includeBounds},this._range||this);return"ticks"===e.bounds&&uR(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Md(e,this.chart.options.locale,this.options.ticks.format)}}class Gw extends Cm{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ii(e)?e:0,this.max=ii(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ws(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function uO(t){return t/Math.pow(10,Math.floor(Xr(t)))==1}Gw.id="linear",Gw.defaults={ticks:{callback:cm.formatters.numeric}};class zw extends Tl{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Cm.prototype.parse.apply(this,[e,n]);if(0!==i)return ii(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ii(e)?Math.max(0,e):null,this.max=ii(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=l=>i=e?i:l,o=l=>r=n?r:l,a=(l,c)=>Math.pow(10,Math.floor(Xr(l))+c);i===r&&(i<=0?(s(1),o(10)):(s(a(i,-1)),o(a(r,1)))),i<=0&&s(a(r,-1)),r<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&s(a(i,-1)),this.min=i,this.max=r}buildTicks(){const e=this.options,i=function _K(t,e){const n=Math.floor(Xr(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let s=$r(t.min,Math.pow(10,Math.floor(Xr(e.min)))),o=Math.floor(Xr(s)),a=Math.floor(s/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:uO(s)}),++a,10===a&&(a=1,++o,l=o>=0?1:l),s=Math.round(a*Math.pow(10,o)*l)/l}while(o<n||o===n&&a<i);const c=$r(t.max,s);return r.push({value:c,major:uO(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&uR(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":Md(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Xr(e),this._valueRange=Xr(this.max)-Xr(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Xr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function $w(t){const e=t.ticks;if(e.display&&t.display){const n=Bi(e.backdropPadding);return Jt(e.font&&e.font.size,dn.font.size)+n.height}return 0}function yK(t,e,n){return n=Bn(n)?n:[n],{w:AX(t,e.string,n),h:n.length*e.lineHeight}}function hO(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function wK(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function EK(t){return 0===t||180===t?"center":t<180?"left":"right"}function CK(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function DK(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function dO(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Rn);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}zw.id="logarithmic",zw.defaults={ticks:{callback:cm.formatters.logarithmic,major:{enabled:!0}}};class jd extends Cm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Bi($w(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ii(e)&&!isNaN(e)?e:0,this.max=ii(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/$w(this.options))}generateTickLabels(e){Cm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Un(this.options.pointLabels.callback,[n,i],this);return r||0===r?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?function bK(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?$n/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+r[l],a),g=mi(c.font),v=yK(t.ctx,g,t._pointLabels[l]);i[l]=v;const _=Sr(t.getIndexAngle(l)+a),y=Math.round(lw(_));wK(n,e,_,hO(y,f.x,v.w,0,180),hO(y,f.y,v.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function xK(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,o=$w(s)/2,a=t.drawingArea,l=s.pointLabels.centerPointLabels?$n/r:0;for(let c=0;c<r;c++){const f=t.getPointPosition(c,a+o+n[c],l),g=Math.round(lw(Sr(f.angle+Qn))),v=e[c],_=DK(f.y,v.h,g),y=EK(g),E=CK(f.x,v.w,y);i.push({x:f.x,y:_,textAlign:y,left:E,top:_,right:E+v.w,bottom:_+v.h})}return i}(t,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){return Sr(e*(Rn/(this._pointLabels.length||1))+ws(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(wn(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(wn(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return function AK(t,e,n){return xa(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Qn+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),dO(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r}=n,s=this._pointLabels.length;let o,a,l;if(n.pointLabels.display&&function SK(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=i.setContext(t.getPointLabelContext(r)),o=mi(s.font),{x:a,y:l,textAlign:c,left:f,top:g,right:v,bottom:_}=t._pointLabelItems[r],{backdropColor:y}=s;if(!wn(y)){const E=El(s.borderRadius),S=Bi(s.backdropPadding);n.fillStyle=y;const T=f-S.left,M=g-S.top,I=v-f+S.width,O=_-g+S.height;Object.values(E).some(V=>0!==V)?(n.beginPath(),Ad(n,{x:T,y:M,w:I,h:O,radius:E}),n.fill()):n.fillRect(T,M,I,O)}xl(n,t._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((c,f)=>{0!==f&&(a=this.getDistanceFromCenterForValue(c.value),function TK(t,e,n,i){const r=t.ctx,s=e.circular,{color:o,lineWidth:a}=e;!s&&!i||!o||!a||n<0||(r.save(),r.strokeStyle=o,r.lineWidth=a,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),dO(t,n,s,i),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(f-1)),a,s))}),i.display){for(e.save(),o=s-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:g}=c;!g||!f||(e.lineWidth=g,e.strokeStyle=f,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&!n.reverse)return;const c=i.setContext(this.getContext(l)),f=mi(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const g=Bi(c.backdropPadding);e.fillRect(-o/2-g.left,-s-f.size/2-g.top,o+g.width,f.size+g.height)}xl(e,a.label,0,-s,f,{color:c.color})}),e.restore()}drawTitle(){}}jd.id="radialLinear",jd.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:cm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},jd.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},jd.descriptors={angleLines:{_fallback:"grid"}};const Dm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hr=Object.keys(Dm);function IK(t,e){return t-e}function fO(t,e){if(wn(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),ii(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!su(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function pO(t,e,n,i){const r=hr.length;for(let s=hr.indexOf(t);s<r-1;++s){const o=Dm[hr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return hr[s]}return hr[r-1]}function gO(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=uw(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function mO(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function PK(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}let Ww=(()=>{class t extends Tl{constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,i){const r=n.time||(n.time={}),s=this._adapter=new vY._date(n.adapters.date);s.init(i),yd(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(n),this._normalized=i.normalized}parse(n,i){return void 0===n?null:fO(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const n=this.options,i=this._adapter,r=n.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(f){!a&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!l&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==n.bounds||"labels"!==n.ticks.source)&&c(this.getMinMax(!1))),s=ii(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=ii(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const n=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return n.length&&(i=n[0],r=n[n.length-1]),{min:i,max:r}}buildTicks(){const n=this.options,i=n.time,r=n.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===n.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function eX(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(s,o,this.max);return this._unit=i.unit||(r.autoSkip?pO(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function MK(t,e,n,i,r){for(let s=hr.length-1;s>=hr.indexOf(n);s--){const o=hr[s];if(Dm[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return hr[n?hr.indexOf(n):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function RK(t){for(let e=hr.indexOf(t)+1,n=hr.length;e<n;++e)if(Dm[hr[e]].common)return hr[e]}(this._unit):void 0,this.initOffsets(s),n.reverse&&l.reverse(),mO(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n){let s,o,i=0,r=0;this.options.offset&&n.length&&(s=this.getDecimalForValue(n[0]),i=1===n.length?1-s:(this.getDecimalForValue(n[1])-s)/2,o=this.getDecimalForValue(n[n.length-1]),r=1===n.length?o:(o-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;i=xi(i,0,a),r=xi(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const n=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||pO(o.minUnit,i,r,this._getLabelCapacity(i)),l=Jt(o.stepSize,1),c="week"===a&&o.isoWeekday,f=su(c)||!0===c,g={};let _,y,v=i;if(f&&(v=+n.startOf(v,"isoWeek",c)),v=+n.startOf(v,f?"day":a),n.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);const E="data"===s.ticks.source&&this.getDataTimestamps();for(_=v,y=0;_<r;_=+n.add(_,l,a),y++)gO(g,_,E);return(_===r||"ticks"===s.bounds||1===y)&&gO(g,_,E),Object.keys(g).sort((S,T)=>S-T).map(S=>+S)}getLabelForValue(n){const r=this.options.time;return this._adapter.format(n,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(n,i,r,s){const o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,g=c&&a[c],v=r[i],y=this._adapter.format(n,s||(c&&g&&v&&v.major?g:l&&a[l])),E=o.ticks.callback;return E?Un(E,[y,i,r],this):y}generateTickLabels(n){let i,r,s;for(i=0,r=n.length;i<r;++i)s=n[i],s.label=this._tickFormatFunction(s.value,i,n)}getDecimalForValue(n){return null===n?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){const i=this._offsets,r=this.getDecimalForValue(n);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(n){const i=this._offsets,r=this.getDecimalForPixel(n)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(n){const i=this.options.ticks,r=this.ctx.measureText(n).width,s=ws(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(n){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(n,0,mO(this,[n],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,r,n=this._cache.data||[];if(n.length)return n;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)n=n.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const n=this._cache.labels||[];let i,r;if(n.length)return n;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)n.push(fO(this,s[i]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return gR(n.sort(IK))}}return t.id="time",t.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},t})();function Sm(t,e,n){let s,o,a,l,i=0,r=t.length-1;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Io(t,"pos",e)),({pos:s,time:a}=t[i]),({pos:o,time:l}=t[r])):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Io(t,"time",e)),({time:s,pos:a}=t[i]),({time:o,pos:l}=t[r]));const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Xw extends Ww{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Sm(n,this.min),this._tableRange=Sm(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)f=r[o+1],l=r[o-1],c=r[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=n.length&&i.length?this.normalize(n.concat(i)):n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Sm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Sm(this._table,i*this._tableRange+this._minPos,!0)}}Xw.id="timeseries",Xw.defaults=Ww.defaults;const NK=[mY,Aq,fK,Object.freeze({__proto__:null,CategoryScale:Em,LinearScale:Gw,LogarithmicScale:zw,RadialLinearScale:jd,TimeScale:Ww,TimeSeriesScale:Xw})],Tm=function LK(t,e){return t===e||t!=t&&e!=e},Am=function BK(t,e){for(var n=t.length;n--;)if(Tm(t[n][0],e))return n;return-1};var jK=Array.prototype.splice;function hu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}hu.prototype.clear=function kK(){this.__data__=[],this.size=0},hu.prototype.delete=function VK(t){var e=this.__data__,n=Am(e,t);return!(n<0||(n==e.length-1?e.pop():jK.call(e,n,1),--this.size,0))},hu.prototype.get=function GK(t){var e=this.__data__,n=Am(e,t);return n<0?void 0:e[n][1]},hu.prototype.has=function $K(t){return Am(this.__data__,t)>-1},hu.prototype.set=function XK(t,e){var n=this.__data__,i=Am(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const Im=hu,vO="object"==typeof global&&global&&global.Object===Object&&global;var rZ="object"==typeof self&&self&&self.Object===Object&&self;const du=vO||rZ||Function("return this")();var oZ=du.Symbol,_O=Object.prototype,aZ=_O.hasOwnProperty,lZ=_O.toString,Vd=oZ?oZ.toStringTag:void 0;var dZ=Object.prototype.toString;var yO=oZ?oZ.toStringTag:void 0;const Rm=function vZ(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":yO&&yO in Object(t)?function cZ(t){var e=aZ.call(t,Vd),n=t[Vd];try{t[Vd]=void 0;var i=!0}catch{}var r=lZ.call(t);return i&&(e?t[Vd]=n:delete t[Vd]),r}(t):function fZ(t){return dZ.call(t)}(t)},Il=function _Z(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Yw=function EZ(t){if(!Il(t))return!1;var e=Rm(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},qw=du["__core-js_shared__"];var bO=function(){var t=/[^.]+$/.exec(qw&&qw.keys&&qw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var AZ=Function.prototype.toString;var PZ=/^\[object .+?Constructor\]$/,LZ=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const UZ=function BZ(t){return!(!Il(t)||function DZ(t){return!!bO&&bO in t}(t))&&(Yw(t)?LZ:PZ).test(function IZ(t){if(null!=t){try{return AZ.call(t)}catch{}try{return t+""}catch{}}return""}(t))},Kw=function HZ(t,e){var n=function jZ(t,e){return t?.[e]}(t,e);return UZ(n)?n:void 0},wO=Kw(du,"Map"),Hd=Kw(Object,"create");var ZZ=Object.prototype.hasOwnProperty;var tQ=Object.prototype.hasOwnProperty;function fu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}fu.prototype.clear=function $Z(){this.__data__=Hd?Hd(null):{},this.size=0},fu.prototype.delete=function XZ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},fu.prototype.get=function QZ(t){var e=this.__data__;if(Hd){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return ZZ.call(e,t)?e[t]:void 0},fu.prototype.has=function nQ(t){var e=this.__data__;return Hd?void 0!==e[t]:tQ.call(e,t)},fu.prototype.set=function sQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Hd&&void 0===e?"__lodash_hash_undefined__":e,this};const xO=fu,Pm=function hQ(t,e){var n=t.__data__;return function cQ(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function pu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}pu.prototype.clear=function aQ(){this.size=0,this.__data__={hash:new xO,map:new(wO||Im),string:new xO}},pu.prototype.delete=function dQ(t){var e=Pm(this,t).delete(t);return this.size-=e?1:0,e},pu.prototype.get=function pQ(t){return Pm(this,t).get(t)},pu.prototype.has=function mQ(t){return Pm(this,t).has(t)},pu.prototype.set=function _Q(t,e){var n=Pm(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const bQ=pu;function gu(t){var e=this.__data__=new Im(t);this.size=e.size}gu.prototype.clear=function qK(){this.__data__=new Im,this.size=0},gu.prototype.delete=function ZK(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},gu.prototype.get=function JK(t){return this.__data__.get(t)},gu.prototype.has=function tZ(t){return this.__data__.has(t)},gu.prototype.set=function xQ(t,e){var n=this.__data__;if(n instanceof Im){var i=n.__data__;if(!wO||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new bQ(i)}return n.set(t,e),this.size=n.size,this};const CQ=gu;var DQ=function(){try{var t=Kw(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Om=DQ,Zw=function SQ(t,e,n){"__proto__"==e&&Om?Om(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Qw=function TQ(t,e,n){(void 0!==n&&!Tm(t[e],n)||void 0===n&&!(e in t))&&Zw(t,e,n)};var IQ=function AQ(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(!1===n(s[l],l,s))break}return e}}();const MQ=IQ;var EO="object"==typeof exports&&exports&&!exports.nodeType&&exports,CO=EO&&"object"==typeof module&&module&&!module.nodeType&&module,DO=CO&&CO.exports===EO?du.Buffer:void 0,SO=DO?DO.allocUnsafe:void 0;const TO=du.Uint8Array,BQ=function LQ(t,e){var n=e?function kQ(t){var e=new t.constructor(t.byteLength);return new TO(e).set(new TO(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var AO=Object.create,VQ=function(){function t(){}return function(e){if(!Il(e))return{};if(AO)return AO(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const HQ=VQ;var zQ=function GQ(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object);const IO=zQ;var $Q=Object.prototype;const MO=function WQ(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||$Q)},Gd=function qQ(t){return null!=t&&"object"==typeof t},RO=function ZQ(t){return Gd(t)&&"[object Arguments]"==Rm(t)};var PO=Object.prototype,QQ=PO.hasOwnProperty,JQ=PO.propertyIsEnumerable,eJ=RO(function(){return arguments}())?RO:function(t){return Gd(t)&&QQ.call(t,"callee")&&!JQ.call(t,"callee")};const Jw=eJ,ex=Array.isArray,OO=function iJ(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},tx=function rJ(t){return null!=t&&OO(t.length)&&!Yw(t)};var NO="object"==typeof exports&&exports&&!exports.nodeType&&exports,kO=NO&&"object"==typeof module&&module&&!module.nodeType&&module,FO=kO&&kO.exports===NO?du.Buffer:void 0;const LO=(FO?FO.isBuffer:void 0)||function aJ(){return!1};var BO=Function.prototype.toString,gJ=Object.prototype.hasOwnProperty,mJ=BO.call(Object);var Vn={};Vn["[object Float32Array]"]=Vn["[object Float64Array]"]=Vn["[object Int8Array]"]=Vn["[object Int16Array]"]=Vn["[object Int32Array]"]=Vn["[object Uint8Array]"]=Vn["[object Uint8ClampedArray]"]=Vn["[object Uint16Array]"]=Vn["[object Uint32Array]"]=!0,Vn["[object Arguments]"]=Vn["[object Array]"]=Vn["[object ArrayBuffer]"]=Vn["[object Boolean]"]=Vn["[object DataView]"]=Vn["[object Date]"]=Vn["[object Error]"]=Vn["[object Function]"]=Vn["[object Map]"]=Vn["[object Number]"]=Vn["[object Object]"]=Vn["[object RegExp]"]=Vn["[object Set]"]=Vn["[object String]"]=Vn["[object WeakMap]"]=!1;var UO="object"==typeof exports&&exports&&!exports.nodeType&&exports,zd=UO&&"object"==typeof module&&module&&!module.nodeType&&module,nx=zd&&zd.exports===UO&&vO.process,YJ=function(){try{return zd&&zd.require&&zd.require("util").types||nx&&nx.binding&&nx.binding("util")}catch{}}(),VO=YJ&&YJ.isTypedArray;const HO=VO?function $J(t){return function(e){return t(e)}}(VO):function GJ(t){return Gd(t)&&OO(t.length)&&!!Vn[Rm(t)]},ix=function KJ(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var QJ=Object.prototype.hasOwnProperty;const eee=function JJ(t,e,n){var i=t[e];(!QJ.call(t,e)||!Tm(i,n)||void 0===n&&!(e in t))&&Zw(t,e,n)};var oee=/^(?:0|[1-9]\d*)$/;const GO=function aee(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&oee.test(t))&&t>-1&&t%1==0&&t<e};var cee=Object.prototype.hasOwnProperty;const hee=function uee(t,e){var n=ex(t),i=!n&&Jw(t),r=!n&&!i&&LO(t),s=!n&&!i&&!r&&HO(t),o=n||i||r||s,a=o?function iee(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)(e||cee.call(t,c))&&(!o||!("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||GO(c,l)))&&a.push(c);return a};var gee=Object.prototype.hasOwnProperty;const vee=function mee(t){if(!Il(t))return function dee(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=MO(t),n=[];for(var i in t)"constructor"==i&&(e||!gee.call(t,i))||n.push(i);return n},zO=function _ee(t){return tx(t)?hee(t,!0):vee(t)},bee=function yee(t){return function tee(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?Zw(n,a,l):eee(n,a,l)}return n}(t,zO(t))},xee=function wee(t,e,n,i,r,s,o){var a=ix(t,n),l=ix(e,n),c=o.get(l);if(c)Qw(t,n,c);else{var f=s?s(a,l,n+"",t,e,o):void 0,g=void 0===f;if(g){var v=ex(l),_=!v&&LO(l),y=!v&&!_&&HO(l);f=l,v||_||y?ex(a)?f=a:function sJ(t){return Gd(t)&&tx(t)}(a)?f=function UQ(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(a):_?(g=!1,f=function PQ(t,e){if(e)return t.slice();var n=t.length,i=SO?SO(n):new t.constructor(n);return t.copy(i),i}(l,!0)):y?(g=!1,f=BQ(l,!0)):f=[]:function vJ(t){if(!Gd(t)||"[object Object]"!=Rm(t))return!1;var e=IO(t);if(null===e)return!0;var n=gJ.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&BO.call(n)==mJ}(l)||Jw(l)?(f=a,Jw(a)?f=bee(a):(!Il(a)||Yw(a))&&(f=function XQ(t){return"function"!=typeof t.constructor||MO(t)?{}:HQ(IO(t))}(l))):g=!1}g&&(o.set(l,f),r(f,l,i,s,o),o.delete(l)),Qw(t,n,f)}},Eee=function $O(t,e,n,i,r){t!==e&&MQ(e,function(s,o){if(r||(r=new CQ),Il(s))xee(t,e,o,n,$O,i,r);else{var a=i?i(ix(t,o),s,o+"",t,e,r):void 0;void 0===a&&(a=s),Qw(t,o,a)}},zO)},WO=function Cee(t){return t},See=function Dee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var XO=Math.max;const Mee=function Iee(t){return function(){return t}};var Ree=Om?function(t,e){return Om(t,"toString",{configurable:!0,enumerable:!1,value:Mee(e),writable:!0})}:WO,kee=Date.now,Lee=function Fee(t){var e=0,n=0;return function(){var i=kee(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Ree);const Bee=Lee,jee=function Uee(t,e){return Bee(function Tee(t,e,n){return e=XO(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=XO(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),See(t,this,a)}}(t,e,WO),t+"")};var zee=function Gee(t){return jee(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(r--,s):void 0,o&&function Vee(t,e,n){if(!Il(n))return!1;var i=typeof e;return!!("number"==i?tx(n)&&GO(e,n.length):"string"==i&&e in n)&&Tm(n[e],t)}(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}(function(t,e,n){Eee(t,e,n)});const $ee=zee,Wee=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],Xee={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:t=>Da(Sa(t.datasetIndex),.4),borderColor:t=>Da(Sa(t.datasetIndex),1),pointBackgroundColor:t=>Da(Sa(t.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:t=>Da(Sa(t.datasetIndex),.6),borderColor:t=>Da(Sa(t.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:t=>Da(Sa(t.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:t=>Da(Sa(t.dataIndex),.6),borderColor:t=>Da(Sa(t.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Da(t,e){return"rgba("+t.concat(e).join(",")+")"}function rx(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Sa(t=0){return Wee[t]||function Yee(){return[rx(0,255),rx(0,255),rx(0,255)]}()}let YO=(()=>{class t{constructor(){this.generateColors=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=vt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();vm.register(...NK);let qee=(()=>{class t{constructor(n){n?.plugins&&vm.register(...n?.plugins);const i=$ee(n?.generateColors?Xee:{},n?.defaults||{});dn.set(i)}static forRoot(n){return{ngModule:t,providers:[{provide:YO,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(_t(YO,8))},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({}),t})();ze(578);let ete=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pr({type:t}),t.\u0275inj=zi({}),t})();class mu{}mu.\u0275fac=function(e){return new(e||mu)},mu.\u0275mod=Pr({type:mu,bootstrap:[vd]}),mu.\u0275inj=zi({imports:[ete,OV,zc,L7,qee]}),PV().bootstrapModule(mu).catch(t=>console.error(t))},23:qt=>{!function(Ye){"use strict";function ze(x){if(Array.isArray(x)){for(var w=0,D=Array(x.length);w<x.length;w++)D[w]=x[w];return D}return Array.from(x)}function Ne(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?x:w}function mt(x,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}function ot(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function pt(x,w){if(w||(w=typeof window>"u"?global:window),void 0!==w[x])return w[x];for(var D=["webkit","moz","ms","o"],R=0,F=D.length,j=x.charAt(0).toUpperCase()+x.substr(1);R<F;R++){var H=w[D[R]+j];if(void 0!==H)return H}return null}function Pe(x,w,D,R,F,j,H){if("function"!=typeof R)throw new TypeError("Invalid animation rule:",R);var ne=x-D,K=ne/F,oe=0;K>1&&(K=1),1!==K&&(oe=R(K),isFinite(oe)&&!isNaN(oe)&&(K=oe)),w&&w(K),ne<F?H.frame=xu(function(P){return Pe(P,w,D,R,F,j,H)}):(j&&j(),H.inProgress=!1)}function ht(){Array.prototype.constructor.apply(this,arguments)}function jt(x,w,D,R,F,j){x.beginPath(),x.moveTo(w+j,D),x.lineTo(w+R-j,D),x.quadraticCurveTo(w+R,D,w+R,D+j),x.lineTo(w+R,D+F-j),x.quadraticCurveTo(w+R,D+F,w+R-j,D+F),x.lineTo(w+j,D+F),x.quadraticCurveTo(w,D+F,w,D+F-j),x.lineTo(w,D+j),x.quadraticCurveTo(w,D,w+j,D),x.closePath()}function en(x,w){var ne,D=w.valueDec,R=w.valueInt,F=0,j=void 0,H=void 0;if(ne=(x=parseFloat(x))<0,x=Math.abs(x),D>0){for(j=R-(H=x.toFixed(D).toString().split("."))[0].length;F<j;++F)H[0]="0"+H[0];H=(ne?"-":"")+H[0]+"."+H[1]}else{for(j=R-(H=Math.round(x).toString()).length;F<j;++F)H="0"+H;H=(ne?"-":"")+H}return H}function It(x,w,D){return x["font"+w+"Style"]+" "+x["font"+w+"Weight"]+" "+x["font"+w+"Size"]*D+"px "+x["font"+w]}function Pn(x){x.shadowOffsetX=null,x.shadowOffsetY=null,x.shadowBlur=null,x.shadowColor="",x.strokeStyle=null,x.lineWidth=0,x.save()}function Kn(x,w,D,R){w.valueTextShadow&&(x.shadowOffsetX=D,x.shadowOffsetY=D,x.shadowBlur=R,x.shadowColor=w.colorValueTextShadow)}function Cn(x,w,D,R,F){D.beginPath(),D.arc(0,0,Mi(x),0,2*Cs,!0),D.lineWidth=w,D.strokeStyle=F?Oe.linearGradient(D,R,F,x):R,D.stroke(),D.closePath()}function B(x,w){var D=er.pixelRatio;return x.maxRadius||(x.maxRadius=x.max-w.borderShadowWidth-w.borderOuterWidth*D-w.borderMiddleWidth*D-w.borderInnerWidth*D+(w.borderOuterWidth?.5:0)+(w.borderMiddleWidth?.5:0)+(w.borderInnerWidth?.5:0)),x.maxRadius}function Ut(x,w){var D=er.pixelRatio,F=x.max-w.borderShadowWidth*D-w.borderOuterWidth*D/2,j=F-w.borderOuterWidth*D/2-w.borderMiddleWidth*D/2+.5,H=j-w.borderMiddleWidth*D/2-w.borderInnerWidth*D/2+.5,ne=B(x,w),K=void 0,oe=!1;x.save(),w.borderOuterWidth&&(oe=Oe.drawShadow(x,w,oe),Cn(F,w.borderOuterWidth*D,x,w.colorBorderOuter,w.colorBorderOuterEnd)),w.borderMiddleWidth&&(oe=Oe.drawShadow(x,w,oe),Cn(j,w.borderMiddleWidth*D,x,w.colorBorderMiddle,w.colorBorderMiddleEnd)),w.borderInnerWidth&&(oe=Oe.drawShadow(x,w,oe),Cn(H,w.borderInnerWidth*D,x,w.colorBorderInner,w.colorBorderInnerEnd)),Oe.drawShadow(x,w,oe),x.beginPath(),x.arc(0,0,Mi(ne),0,2*Cs,!0),w.colorPlateEnd?((K=x.createRadialGradient(0,0,ne/2,0,0,ne)).addColorStop(0,w.colorPlate),K.addColorStop(1,w.colorPlateEnd)):K=w.colorPlate,x.fillStyle=K,x.fill(),x.closePath(),x.restore()}function L(x,w){var D=x.max*(parseFloat(w.highlightsWidth)||0)/100;if(D){var R=Mi(Kt(x,w)-D/2),F=0,j=w.highlights.length,H=(w.maxValue-w.minValue)/w.ticksAngle;for(x.save();F<j;F++){var ne=w.highlights[F];x.beginPath(),x.rotate(Ds),x.arc(0,0,R,Oe.radians(w.startAngle+(ne.from-w.minValue)/H),Oe.radians(w.startAngle+(ne.to-w.minValue)/H),!1),x.strokeStyle=ne.color,x.lineWidth=D,x.lineCap=w.highlightsLineCap,x.stroke(),x.closePath(),x.restore(),x.save()}}}function Pt(x,w){var D=Kt(x,w),R=void 0,j=void 0,H=0,ne=0,K=Math.abs(w.minorTicks)||0,oe=w.ticksAngle/(w.maxValue-w.minValue);for(x.lineWidth=er.pixelRatio,x.strokeStyle=w.colorMinorTicks||w.colorStrokeTicks,x.save(),w.exactTicks?(R=K?(w.maxValue-w.minValue)/K:0,ne=(ji.mod(w.majorTicks[0],K)||0)*oe):R=K*(w.majorTicks.length-1);H<R;++H)(j=w.startAngle+ne+H*(w.ticksAngle/R))<=w.ticksAngle+w.startAngle&&(x.rotate(Oe.radians(j)),x.beginPath(),x.moveTo(0,D),x.lineTo(0,D-.075*x.max),N(x))}function Kt(x,w){var D=x.max/100;return B(x,w)-5*D-(w.barWidth?2*(parseFloat(w.barStrokeWidth)||0)+((parseFloat(w.barWidth)||0)+5)*D:0)}function An(x,w){Oe.prepareTicks(w);var F,D=Mi(Kt(x,w)),R=void 0,j=w.majorTicks.length;for(x.lineWidth=2*er.pixelRatio,x.save(),F=w.colorMajorTicks instanceof Array?w.colorMajorTicks:new Array(j).fill(w.colorStrokeTicks||w.colorMajorTicks),R=0;R<j;++R)x.strokeStyle=F[R],x.rotate(Oe.radians(fn(w,w.exactTicks?w.majorTicks[R]:R,j))),x.beginPath(),x.moveTo(0,D),x.lineTo(0,D-.15*x.max),N(x);w.strokeTicks&&(x.strokeStyle=w.colorStrokeTicks||F[0],x.rotate(Ds),x.beginPath(),x.arc(0,0,D,Oe.radians(w.startAngle),Oe.radians(w.startAngle+w.ticksAngle),!1),N(x))}function fn(x,w,D){return x.exactTicks?x.startAngle+x.ticksAngle/(x.maxValue-x.minValue)*(w-x.minValue):x.startAngle+w*(x.ticksAngle/(D-1))}function N(x){x.stroke(),x.restore(),x.closePath(),x.save()}function $(x,w){var D=Kt(x,w)-.15*x.max,R={},F=0,j=w.majorTicks.length,H="needle"!==w.animationTarget,ne=w.colorNumbers instanceof Array?w.colorNumbers:new Array(j).fill(w.colorNumbers),K=H?-(w.value-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle:0;for(H&&(x.save(),x.rotate(-Oe.radians(K))),x.font=Oe.font(w,"Numbers",x.max/200),x.lineWidth=0,x.textAlign="center",x.textBaseline="middle";F<j;++F){var oe=K+fn(w,w.exactTicks?w.majorTicks[F]:F,j),P=x.measureText(w.majorTicks[F]).width,Ae=w.fontNumbersSize,nt=Math.sqrt(P*P+Ae*Ae)/2,yt=Oe.radialPoint(D-nt-w.numbersMargin/100*x.max,Oe.radians(oe));360===oe&&(oe=0),R[oe]||(R[oe]=!0,x.fillStyle=ne[F],x.fillText(w.majorTicks[F],yt.x,yt.y))}H&&x.restore()}function U(x,w){w.title&&(x.save(),x.font=Oe.font(w,"Title",x.max/200),x.fillStyle=w.colorTitle,x.textAlign="center",x.fillText(w.title,0,-x.max/4.25,.8*x.max),x.restore())}function ae(x,w){w.units&&(x.save(),x.font=Oe.font(w,"Units",x.max/200),x.fillStyle=w.colorUnits,x.textAlign="center",x.fillText(Oe.formatContext(w,w.units),0,x.max/3.25,.8*x.max),x.restore())}function le(x,w){if(w.needle){var D=w.ticksAngle<360?Oe.normalizedValue(w).indented:w.value,R=nt?w.startAngle:w.startAngle+(D-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle;"right"===w.barStartPosition&&(R=w.startAngle+w.ticksAngle-(D-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle);var F=B(x,w),j=Mi(F/100*w.needleCircleSize),H=Mi(F/100*w.needleCircleSize*.75),ne=Mi(F/100*w.needleEnd),K=Mi(w.needleStart?F/100*w.needleStart:0),oe=F/100*w.needleWidth,P=F/100*w.needleWidth/2,Ae=er.pixelRatio,nt="needle"!==w.animationTarget;x.save(),Oe.drawNeedleShadow(x,w),x.rotate(Oe.radians(R)),x.fillStyle=Oe.linearGradient(x,w.colorNeedle,w.colorNeedleEnd,ne-K),"arrow"===w.needleType?(x.beginPath(),x.moveTo(-P,-K),x.lineTo(-oe,0),x.lineTo(-1*Ae,ne),x.lineTo(Ae,ne),x.lineTo(oe,0),x.lineTo(P,-K),x.closePath(),x.fill(),x.beginPath(),x.lineTo(-.5*Ae,ne),x.lineTo(-1*Ae,ne),x.lineTo(-oe,0),x.lineTo(-P,-K),x.lineTo(P/2*Ae-2*Ae,-K),x.closePath(),x.fillStyle=w.colorNeedleShadowUp,x.fill()):(x.beginPath(),x.moveTo(-P,ne),x.lineTo(-P,K),x.lineTo(P,K),x.lineTo(P,ne),x.closePath(),x.fill()),w.needleCircleSize&&(x.restore(),Oe.drawNeedleShadow(x,w),w.needleCircleOuter&&(x.beginPath(),x.arc(0,0,j,0,2*Cs,!0),x.fillStyle=Oe.linearGradient(x,w.colorNeedleCircleOuter,w.colorNeedleCircleOuterEnd,j),x.fill(),x.closePath()),w.needleCircleInner&&(x.beginPath(),x.arc(0,0,H,0,2*Cs,!0),x.fillStyle=Oe.linearGradient(x,w.colorNeedleCircleInner,w.colorNeedleCircleInnerEnd,H),x.fill(),x.closePath()),x.restore())}}function W(x,w,D){Oe.drawValueBox(x,w,D,0,x.max-.33*x.max,x.max)}function z(x,w){var D=x.max/100,R=B(x,w)-5*D,F=parseFloat(w.barStrokeWidth+"")||0,j=(parseFloat(w.barWidth+"")||0)*D,H=R-2*F-j,ne=(R-H)/2,K=H+ne,oe=F/K,P=w.startAngle,Ae=w.startAngle+w.ticksAngle;if(x.save(),x.rotate(Ds),F&&(x.beginPath(),x.arc(0,0,K,Oe.radians(P)-oe,Oe.radians(Ae)+oe,!1),x.strokeStyle=w.colorBarStroke,x.lineWidth=2*ne,x.stroke(),x.closePath()),j&&(x.beginPath(),x.arc(0,0,K,Oe.radians(P),Oe.radians(Ae),!1),x.strokeStyle=w.colorBar,x.lineWidth=j,x.stroke(),x.closePath(),w.barShadow&&(x.beginPath(),x.arc(0,0,R,Oe.radians(P),Oe.radians(Ae),!1),x.clip(),x.beginPath(),x.strokeStyle=w.colorBar,x.lineWidth=1,x.shadowBlur=w.barShadow,x.shadowColor=w.colorBarShadow,x.shadowOffsetX=0,x.shadowOffsetY=0,x.arc(0,0,R,Oe.radians(w.startAngle),Oe.radians(w.startAngle+w.ticksAngle),!1),x.stroke(),x.closePath(),x.restore(),x.rotate(Ds)),w.barProgress)){var nt=function Y(x){var w=x.startAngle,D=x.startAngle+x.ticksAngle,R=w,F=w+(Oe.normalizedValue(x).normal-x.minValue)/(x.maxValue-x.minValue)*x.ticksAngle;if("middle"===x.barStartPosition){var j=.5*(x.minValue+x.maxValue);x.value<j?(R=180-(j-Oe.normalizedValue(x).normal)/(x.maxValue-x.minValue)*x.ticksAngle,F=180):(R=180,F=180+(Oe.normalizedValue(x).normal-j)/(x.maxValue-x.minValue)*x.ticksAngle)}else"right"===x.barStartPosition&&(R=D-F+w,F=D);return{startAngle:R,endAngle:F}}(w),yt=nt.startAngle,bt=nt.endAngle;x.beginPath(),x.arc(0,0,K,Oe.radians(yt),Oe.radians(bt),!1),x.strokeStyle=w.colorBarProgress,x.lineWidth=j,x.stroke(),x.closePath()}x.restore()}function te(x){return x.options.animatedValue?x.options.value:x.value}function fe(x,w,D,R,F,j,H,ne,K){x.beginPath(),x.lineWidth=w,x.strokeStyle=K?Oe.linearGradient(x,ne,K,H,!0,F):ne,D>0?Oe.roundRect(x,R,F,j,H,D):x.rect(R,F,j,H),x.stroke(),x.closePath()}function ce(x,w,D,R,F,j,H){var ne=function be(x,w,D,R,F,j){var H=er.pixelRatio,ne=j>=F,K=ne?.85*F:j,oe=ne?j:F;D=ne?Ft(D+(F-K)/2):D;var P=!!w.title,Ae=!!w.units,nt=!!w.valueBox,yt=void 0,bt=void 0,tn=void 0;ne?(bt=Ft(.05*oe),yt=Ft(.075*oe),tn=Ft(.11*oe),P&&(oe-=yt,R+=yt),Ae&&(oe-=bt),nt&&(oe-=tn)):(bt=yt=Ft(.15*K),P&&(K-=yt,R+=yt),Ae&&(K-=bt));var Ct=2*w.barStrokeWidth,it=w.barBeginCircle?Ft(K*w.barBeginCircle/200-Ct/2):0,Wt=Ft(K*w.barWidth/100-Ct),zt=Ft(oe*w.barLength/100-Ct),Ot=Ft((oe-zt)/2),je=Ft(D+(ne?K/2:Ot+it)),lt=Ft(R+(ne?oe-Ot-it+Ct/2:K/2)),Fe=!ne||w.hasLeft&&w.hasRight?0:(w.hasRight?-1:1)*w.ticksWidth/100*K,Vt=ne||w.hasLeft&&w.hasRight?0:(w.hasRight?-1:1)*w.ticksWidth/100*K;return x.barDimensions={isVertical:ne,width:K,length:oe,barWidth:Wt,barLength:zt,strokeWidth:Ct,barMargin:Ot,radius:it,pixelRatio:H,barOffset:null,titleMargin:P?yt:0,unitsMargin:Ae?bt:0,get ticksLength(){return this.barLength-this.barOffset-this.strokeWidth},X:D+Fe,Y:R+Vt,x0:je+Fe,y0:lt+Vt,baseX:D,baseY:R,ticksPadding:w.ticksPadding/100},x.barDimensions}(x,w,R,F,j,H),K=ne.isVertical,oe=ne.width,P=ne.barWidth,Ae=ne.barLength,nt=ne.strokeWidth,yt=ne.barMargin,bt=ne.radius,tn=ne.x0,Ct=ne.y0,it=ne.X,Wt=ne.Y,zt=Ae;if(x.save(),x.beginPath(),w.barBeginCircle){var Ot=Oe.radians(K?270:0),je=Math.asin(P/2/bt),lt=Math.cos(je),Fe=Math.sin(je),Vt=tn+(K?bt*Fe:bt*lt-nt/2),_e=K?Ct-bt*lt:Ct+bt*Fe,ut=Mi(K?_e-Ct:Vt-tn);x.barDimensions.barOffset=Ft(ut+bt);var Je=K?Ft(tn-bt*Fe):Vt,On=K?_e:Ft(Ct-bt*Fe);"progress"===D&&(Ae=x.barDimensions.barOffset+(Ae-x.barDimensions.barOffset)*(Oe.normalizedValue(w).normal-w.minValue)/(w.maxValue-w.minValue));var Lt=Ft(Vt+Ae-x.barDimensions.barOffset+nt/2),Ir=Ft(_e-Ae+x.barDimensions.barOffset-nt/2);x.arc(tn,Ct,bt,Ot+je,Ot-je),K?(x.moveTo(Vt,On),x.lineTo(Vt,Ir),x.lineTo(Je,Ir),x.lineTo(Je,On)):(x.moveTo(Vt,On),x.lineTo(Lt,On),x.lineTo(Lt,_e),x.lineTo(Vt,_e))}else{var on=Ft(K?it+(oe-P)/2:it+yt),pr=Ft(K?Wt+Ae+yt:Wt+(oe-P)/2);"progress"===D&&(Ae*=(w.value-w.minValue)/(w.maxValue-w.minValue)),K?x.rect(on,pr,P,-Ae):x.rect(on,pr,Ae,P)}"progress"!==D&&w.barStrokeWidth&&(x.lineWidth=nt,x.strokeStyle=w.colorBarStroke,x.stroke()),"progress"!==D&&w.colorBar?(x.fillStyle=w.colorBarEnd?Oe.linearGradient(x,w.colorBar,w.colorBarEnd,Ae,K,K?Wt:it):w.colorBar,x.fill()):"progress"===D&&w.colorBarProgress&&(x.fillStyle=w.colorBarProgressEnd?Oe.linearGradient(x,w.colorBarProgress,w.colorBarProgressEnd,zt,K,K?Wt:it):w.colorBarProgress,x.fill()),x.closePath(),w.barBeginCircle&&(x.barDimensions.radius+=nt),x.barDimensions.barWidth+=nt,x.barDimensions.barLength+=nt}function we(x,w,D,R,F,j){ce(x,w,"",D,R,F,j)}function Ue(x,w){return w.needleSide!==x||w.tickSide!==x||w.numberSide!==x}function tt(x,w,D,R,F,j){w.barProgress&&ce(x,w,"progress",D,R,F,j)}function Et(x,w,D,R,F){x.beginPath(),x.moveTo(w,D),x.lineTo(R,F),x.stroke(),x.closePath(),x.save()}function ke(x,w,D,R,F,j,H,ne,K){var oe=x.barDimensions,P=oe.isVertical,Ae=oe.length,nt=oe.barWidth,yt=oe.barOffset,bt=oe.barMargin,tn=oe.pixelRatio,Ct=oe.width,it=oe.X,Wt=oe.Y,zt=oe.ticksLength,Ot=oe.ticksPadding,je=(Ct-nt)/2,lt=void 0,Fe=void 0,Vt=0,_e=D.length,ut=void 0,Je=K*Ct,On=je-Ot*Ct,Lt=je+nt+Je+Ot*Ct,Ir=w instanceof Array?w:new Array(D.length).fill(w);x.lineWidth=ne*tn,x.save();for(var on=zt/(F-R);Vt<_e;Vt++)ut=D[Vt],x.strokeStyle=Ir[Vt],P?(Fe=Wt+Ae-bt-yt+(R-ut)*on,j&&Et(x,lt=it+On,Fe,Ft(lt-Je),Fe),H&&Et(x,lt=it+Lt,Fe,Ft(lt-Je),Fe)):(lt=it+bt+yt-(R-ut)*on,j&&Et(x,lt,Fe=Wt+On,lt,Ft(Fe-Je)),H&&Et(x,lt,Ft(Fe=Wt+Lt),lt,Fe-Je))}function dr(x,w,D,R,F){x.beginPath(),x.moveTo(w,D),x.lineTo(R,F),x.stroke(),x.closePath()}function yu(x,w,D,R){return w.colorNeedleEnd?Oe.linearGradient(x,R?w.colorNeedleEnd:w.colorNeedle,R?w.colorNeedle:w.colorNeedleEnd,D,!x.barDimensions.isVertical):w.colorNeedle}function $d(x,w,D,R,F,j,H,ne){x.lineWidth=w.needleWidth,x.strokeStyle=yu(x,w,H,ne),x.beginPath(),x.moveTo(D,R),x.lineTo(F,j),x.stroke(),x.closePath()}function bu(x,w,D,R,F,j,H,ne){var oe=H-Ft(.4*H),P=D===F,Ae=w.needleWidth/2;x.fillStyle=yu(x,w,H,ne),x.beginPath(),P?(R>j&&(oe*=-1),x.moveTo(D-Ae,R),x.lineTo(D+Ae,R),x.lineTo(D+Ae,R+oe),x.lineTo(D,j),x.lineTo(D-Ae,R+oe),x.lineTo(D-Ae,R)):(D>F&&(oe*=-1),x.moveTo(D,R-Ae),x.lineTo(D,R+Ae),x.lineTo(D+oe,R+Ae),x.lineTo(F,R),x.lineTo(D+oe,R-Ae),x.lineTo(D,R-Ae)),x.fill(),x.closePath()}function Ii(x,w,D,R,F,j,H){var ne=(parseFloat(w.fontValueSize)||0)*j/200;x.barDimensions.isVertical&&Oe.drawValueBox(x,w,D,R+j/2,F+H-ne-(.11*H-ne)/2,j)}var Ta=function(w,D){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return function x(w,D){var R=[],F=!0,j=!1,H=void 0;try{for(var ne,K=w[Symbol.iterator]();!(F=(ne=K.next()).done)&&(R.push(ne.value),!D||R.length!==D);F=!0);}catch(oe){j=!0,H=oe}finally{try{!F&&K.return&&K.return()}finally{if(j)throw H}}return R}(w,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Nl=function x(w,D,R){null===w&&(w=Function.prototype);var F=Object.getOwnPropertyDescriptor(w,D);if(void 0===F){var j=Object.getPrototypeOf(w);return null===j?void 0:x(j,D,R)}if("value"in F)return F.value;var H=F.get;return void 0!==H?H.call(R):void 0},kl=function x(w,D,R,F){var j=Object.getOwnPropertyDescriptor(w,D);if(void 0===j){var H=Object.getPrototypeOf(w);null!==H&&x(H,D,R,F)}else if("value"in j&&j.writable)j.value=R;else{var ne=j.set;void 0!==ne&&ne.call(F,R)}return R},Es=function(){function x(w,D){for(var R=0;R<D.length;R++){var F=D[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(w,F.key,F)}}return function(w,D,R){return D&&x(w.prototype,D),R&&x(w,R),w}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(x,w){if(null==x)throw new TypeError("Cannot convert first argument to object");for(var D=Object(x),R=1;R<arguments.length;R++){var F=arguments[R];if(null!=F)for(var j=Object.keys(Object(F)),H=0,ne=j.length;H<ne;H++){var K=j[H],oe=Object.getOwnPropertyDescriptor(F,K);void 0!==oe&&oe.enumerable&&(D[K]=F[K])}}return D}}),Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(x,w){var D;if(null===this)throw new TypeError('"this" is null or not defined');var R=Object(this),F=R.length>>>0;if(0===F)return-1;var j=+w||0;if(Math.abs(j)===1/0&&(j=0),j>=F)return-1;for(D=Math.max(j>=0?j:F-Math.abs(j),0);D<F;){if(D in R&&R[D]===x)return D;D++}return-1}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(x){if(null===this)throw new TypeError("this is null or not defined");for(var w=Object(this),D=w.length>>>0,R=arguments[1],F=R>>0,j=F<0?Math.max(D+F,0):Math.min(F,D),H=arguments[2],ne=void 0===H?D:H>>0,K=ne<0?Math.max(D+ne,0):Math.min(ne,D);j<K;)w[j]=x,j++;return w}}),typeof window>"u"&&(window=typeof global>"u"?{}:global);var wu=function(){function x(){ot(this,x),this._events={},this.addListener=this.on,this.removeListener=this.off}return Es(x,[{key:"emit",value:function(w){if(this._events[w]){for(var D=0,R=this._events[w].length,F=arguments.length,j=Array(F>1?F-1:0),H=1;H<F;H++)j[H-1]=arguments[H];for(;D<R;D++)this._events[w][D]&&this._events[w][D].apply(this,j)}}},{key:"once",value:function(w){for(var D=arguments.length,R=Array(D>1?D-1:0),F=1;F<D;F++)R[F-1]=arguments[F];for(var j=0,H=R.length,ne=this;j<H;j++)!function(){var K=R[j];R[j]=function P(){ne.off(w,P),K.apply(ne,arguments)}}();this.on.apply(this,[w].concat(R))}},{key:"on",value:function(w){this._events[w]||(this._events[w]=[]);for(var D=0,R=arguments.length<=1?0:arguments.length-1;D<R;D++)this._events[w].push(arguments.length<=D+1?void 0:arguments[D+1])}},{key:"off",value:function(w){if(this._events[w])for(var D=0,R=arguments.length<=1?0:arguments.length-1;D<R;D++)for(var F=arguments.length<=D+1?void 0:arguments[D+1],j=void 0;~(j=this._events[w].indexOf(F));)this._events[w].splice(j,1)}},{key:"removeAllListeners",value:function(w){delete this._events[w]}},{key:"listeners",get:function(){return this._events}}]),x}(),xu=pt("requestAnimationFrame")||function(x){return setTimeout(function(){return x((new Date).getTime())},1e3/60)},Fo={linear:function(x){return x},quad:function(x){return Math.pow(x,2)},dequad:function(x){return 1-Fo.quad(1-x)},quint:function(x){return Math.pow(x,5)},dequint:function(x){return 1-Math.pow(1-x,5)},cycle:function(x){return 1-Math.sin(Math.acos(x))},decycle:function(x){return Math.sin(Math.acos(1-x))},bounce:function(x){return 1-Fo.debounce(1-x)},debounce:function(x){for(var w=0,D=1;;w+=D,D/=2)if(x>=(7-4*w)/11)return-Math.pow((11-6*w-11*x)/4,2)+Math.pow(D,2)},elastic:function(x){return 1-Fo.delastic(1-x)},delastic:function(x){return Math.pow(2,10*(x-1))*Math.cos(20*Math.PI*1.5/3*x)}},Fl=function(){function x(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear",D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},F=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(ot(this,x),this.duration=D,this.rule=w,this.draw=R,this.end=F,"function"!=typeof this.draw)throw new TypeError("Invalid animation draw callback:",R);if("function"!=typeof this.end)throw new TypeError("Invalid animation end callback:",F)}return Es(x,[{key:"animate",value:function(w,D){var R=this;this.frame&&this.cancel();var F=window.performance&&window.performance.now?window.performance.now():pt("animationStartTime")||Date.now();D=D||this.end,this.draw=w=w||this.draw,this.end=D,this.frame=xu(function(j){return Pe(j,w,F,Fo[R.rule]||R.rule,R.duration,D,R)})}},{key:"cancel",value:function(){this.frame&&((pt("cancelAnimationFrame")||function(w){})(this.frame),this.frame=null)}},{key:"destroy",value:function(){this.cancel(),this.draw=null,this.end=null}}]),x}();Fl.rules=Fo;var eo=function(){function x(w,D,R){ot(this,x),this.options=w,this.element=D.toLowerCase(),this.type=x.toDashed(R),this.Type=Ye[R],this.mutationsObserved=!1,this.isObservable=!!window.MutationObserver,window.GAUGES_NO_AUTO_INIT||x.domReady(this.traverse.bind(this))}return Es(x,[{key:"isValidNode",value:function(w){return!(!w.tagName||w.tagName.toLowerCase()!==this.element||w.getAttribute("data-type")!==this.type)}},{key:"traverse",value:function(){for(var w=document.getElementsByTagName(this.element),D=0,R=w.length;D<R;D++)this.process(w[D]);this.isObservable&&!this.mutationsObserved&&(new MutationObserver(this.observe.bind(this)).observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.mutationsObserved=!0)}},{key:"observe",value:function(w){for(var D=0,R=w.length;D<R;D++){var F=w[D];if("attributes"===F.type&&"data-type"===F.attributeName&&this.isValidNode(F.target)&&F.oldValue!==this.type)setTimeout(this.process.bind(this,F.target));else if(F.addedNodes&&F.addedNodes.length)for(var j=0,H=F.addedNodes.length;j<H;j++)setTimeout(this.process.bind(this,F.addedNodes[j]))}}},{key:"process",value:function(w){var D=this;if(!this.isValidNode(w))return null;var R=void 0,F=JSON.parse(JSON.stringify(this.options)),j=null;for(R in F)if(F.hasOwnProperty(R)){var H=x.toAttributeName(R),ne=x.parse(w.getAttribute(H));null!=ne&&(F[R]=ne)}return F.renderTo=w,(j=new this.Type(F)).draw&&j.draw(),this.isObservable&&(j.observer=new MutationObserver(function(K){K.forEach(function(oe){if("attributes"===oe.type){var P=oe.attributeName.toLowerCase(),Ae=w.getAttribute(P).toLowerCase();if("data-type"===P&&Ae&&Ae!==D.type)j.observer.disconnect(),delete j.observer,j.destroy&&j.destroy();else if("data-"===P.substr(0,5)){var nt=P.substr(5).split("-").map(function(bt,tn){return tn?bt.charAt(0).toUpperCase()+bt.substr(1):bt}).join(""),yt={};yt[nt]=x.parse(w.getAttribute(oe.attributeName)),"value"===nt?j&&(j.value=yt[nt]):j.update&&j.update(yt)}}})}),j.observer.observe(w,{attributes:!0})),j}}],[{key:"parse",value:function(w){if("true"===w)return!0;if("false"===w)return!1;if("undefined"!==w){if("null"===w)return null;if(/^[-+#.\w\d\s]+(?:,[-+#.\w\d\s]*)+$/.test(w))return w.split(",");try{return JSON.parse(w)}catch{}return w}}},{key:"toDashed",value:function(w){for(var D=w.split(/(?=[A-Z])/),R=1,F=D.length,j=D[0].toLowerCase();R<F;R++)j+="-"+D[R].toLowerCase();return j}},{key:"toCamelCase",value:function(w){for(var D=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],R=w.split(/-/),F=0,j=R.length,H="";F<j;F++)H+=F||D?R[F][0].toUpperCase()+R[F].substr(1).toLowerCase():R[F].toLowerCase();return H}},{key:"toAttributeName",value:function(w){return"data-"+x.toDashed(w)}},{key:"domReady",value:function(w){if(/comp|inter|loaded/.test((window.document||{}).readyState+""))return w();window.addEventListener?window.addEventListener("DOMContentLoaded",w,!1):window.attachEvent&&window.attachEvent("onload",w)}}]),x}(),er=function(){function x(w,D,R){ot(this,x),x.collection.push(this),this.width=D||0,this.height=R||0,this.element=w,this.init()}return Es(x,[{key:"init",value:function(){var w=x.pixelRatio;this.element.width=this.width*w,this.element.height=this.height*w,this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.elementClone=this.element.cloneNode(!0),this.context=this.element.getContext("2d"),this.contextClone=this.elementClone.getContext("2d"),this.drawWidth=this.element.width,this.drawHeight=this.element.height,this.drawX=this.drawWidth/2,this.drawY=this.drawHeight/2,this.minSide=this.drawX<this.drawY?this.drawX:this.drawY,this.elementClone.initialized=!1,this.contextClone.translate(this.drawX,this.drawY),this.contextClone.save(),this.context.translate(this.drawX,this.drawY),this.context.save(),this.context.max=this.contextClone.max=this.minSide,this.context.maxRadius=this.contextClone.maxRadius=null}},{key:"destroy",value:function(){var w=x.collection.indexOf(this);~w&&x.collection.splice(w,1),this.context.clearRect(-this.drawX,-this.drawY,this.drawWidth,this.drawHeight),this.context.max=null,delete this.context.max,this.context.maxRadius=null,delete this.context.maxRadius,this.context=null,this.contextClone=null,this.elementClone=null,this.element=null,this.onRedraw=null}},{key:"commit",value:function(){var w=x.pixelRatio;return 1!==w&&(this.contextClone.scale(w,w),this.contextClone.save()),this}},{key:"redraw",value:function(){return this.init(),this.onRedraw&&this.onRedraw(),this}}],[{key:"redraw",value:function(){for(var w=0,D=x.collection.length;w<D;w++)x.collection[w].redraw()}},{key:"pixelRatio",get:function(){return window.devicePixelRatio||1}}]),x}();er.collection=[],window.matchMedia&&window.matchMedia("screen and (min-resolution: 2dppx)").addListener(er.redraw);var to={renderTo:null,width:0,height:0,minValue:0,maxValue:100,value:0,units:!1,exactTicks:!1,majorTicks:[0,20,40,60,80,100],minorTicks:10,strokeTicks:!0,animatedValue:!1,animateOnInit:!1,title:!1,borders:!0,numbersMargin:1,listeners:null,valueInt:3,valueDec:2,majorTicksInt:1,majorTicksDec:0,animation:!0,animationDuration:500,animationRule:"cycle",colorPlate:"#fff",colorPlateEnd:"",colorMajorTicks:"#444",colorMinorTicks:"#666",colorStrokeTicks:"",colorTitle:"#888",colorUnits:"#888",colorNumbers:"#444",colorNeedle:"rgba(240,128,128,1)",colorNeedleEnd:"rgba(255,160,122,.9)",colorValueText:"#444",colorValueTextShadow:"rgba(0,0,0,0.3)",colorBorderShadow:"rgba(0,0,0,0.5)",colorBorderOuter:"#ddd",colorBorderOuterEnd:"#aaa",colorBorderMiddle:"#eee",colorBorderMiddleEnd:"#f0f0f0",colorBorderInner:"#fafafa",colorBorderInnerEnd:"#ccc",colorValueBoxRect:"#888",colorValueBoxRectEnd:"#666",colorValueBoxBackground:"#babab2",colorValueBoxShadow:"rgba(0,0,0,1)",colorNeedleShadowUp:"rgba(2,255,255,0.2)",colorNeedleShadowDown:"rgba(188,143,143,0.45)",colorBarStroke:"#222",colorBar:"#ccc",colorBarProgress:"#888",colorBarShadow:"#000",fontNumbers:"Arial",fontTitle:"Arial",fontUnits:"Arial",fontValue:"Arial",fontNumbersSize:20,fontTitleSize:24,fontUnitsSize:22,fontValueSize:26,fontNumbersStyle:"normal",fontTitleStyle:"normal",fontUnitsStyle:"normal",fontValueStyle:"normal",fontNumbersWeight:"normal",fontTitleWeight:"normal",fontUnitsWeight:"normal",fontValueWeight:"normal",needle:!0,needleShadow:!0,needleType:"arrow",needleStart:5,needleEnd:85,needleWidth:4,borderOuterWidth:3,borderMiddleWidth:3,borderInnerWidth:3,borderShadowWidth:3,valueBox:!0,valueBoxStroke:5,valueBoxWidth:0,valueText:"",valueTextShadow:!0,valueBoxBorderRadius:2.5,highlights:[{from:20,to:60,color:"#eee"},{from:60,to:80,color:"#ccc"},{from:80,to:100,color:"#999"}],highlightsWidth:15,highlightsLineCap:"butt",barWidth:20,barStrokeWidth:0,barProgress:!0,barShadow:0};(ht.prototype=Object.create(Array.prototype)).constructor=ht,ht.prototype.get=function(x){if("string"==typeof x){for(var w=0,D=this.length;w<D;w++)if((this[w].options.renderTo.tagName?this[w].options.renderTo:document.getElementById(this[w].options.renderTo||"")).getAttribute("id")===x)return this[w]}else if("number"==typeof x)return this[x];return null};var Lo="2.1.7",Ft=Math.round,Mi=Math.abs,vn=new ht;vn.version=Lo;var ji=function(x){function w(D){ot(this,w);var R=Ne(this,(w.__proto__||Object.getPrototypeOf(w)).call(this)),F=R.constructor.name;if("BaseGauge"===F)throw new TypeError("Attempt to instantiate abstract class!");if(vn.push(R),D.listeners&&Object.keys(D.listeners).forEach(function(H){(D.listeners[H]instanceof Array?D.listeners[H]:[D.listeners[H]]).forEach(function(ne){R.on(H,ne)})}),R.version=Lo,R.type=Ye[F]||w,R.initialized=!1,D.minValue=parseFloat(D.minValue),D.maxValue=parseFloat(D.maxValue),D.value=parseFloat(D.value)||0,D.borders||(D.borderInnerWidth=D.borderMiddleWidth=D.borderOuterWidth=0),!D.renderTo)throw TypeError("Canvas element was not specified when creating the Gauge object!");var j=D.renderTo.tagName?D.renderTo:document.getElementById(D.renderTo);if(!(j instanceof HTMLCanvasElement))throw TypeError("Given gauge canvas element is invalid!");return D.width=parseFloat(D.width)||0,D.height=parseFloat(D.height)||0,D.width&&D.height||(D.width||(D.width=j.parentNode?j.parentNode.offsetWidth:j.offsetWidth),D.height||(D.height=j.parentNode?j.parentNode.offsetHeight:j.offsetHeight)),R.options=D||{},R.options.animateOnInit&&(R._value=R.options.value,R.options.value=R.options.minValue),R.canvas=new er(j,D.width,D.height),R.canvas.onRedraw=R.draw.bind(R),R.animation=new Fl(D.animationRule,D.animationDuration),R}return mt(w,x),Es(w,[{key:"update",value:function(D){return Object.assign(this.options,this.type.configure(D||{})),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.animation.rule=this.options.animationRule,this.animation.duration=this.options.animationDuration,this.canvas.redraw(),this}},{key:"destroy",value:function(){var D=vn.indexOf(this);~D&&vn.splice(D,1),this.canvas.destroy(),this.canvas=null,this.animation.destroy(),this.animation=null,this.emit("destroy")}},{key:"draw",value:function(){return this.options.animateOnInit&&!this.initialized&&(this.value=this._value,this.initialized=!0,this.emit("init")),this.emit("render"),this}},{key:"value",set:function(D){var R=this;D=w.ensureValue(D,this.options.minValue);var F=this.options.value;if(D!==F)if(this.options.animation){if(this.animation.frame&&(this.options.value=this._value,this._value===D))return this.animation.cancel(),void delete this._value;void 0===this._value&&(this._value=D),this.emit("animationStart"),this.animation.animate(function(j){var H=F+(D-F)*j;R.options.animatedValue&&R.emit("value",H,R.value),R.options.value=H,R.draw(),R.emit("animate",j,R.options.value)},function(){void 0!==R._value&&(R.emit("value",R._value,R.value),R.options.value=R._value,delete R._value),R.draw(),R.emit("animationEnd")})}else this.emit("value",D,this.value),this.options.value=D,this.draw()},get:function(){return void 0===this._value?this.options.value:this._value}}],[{key:"configure",value:function(D){return D}},{key:"initialize",value:function(D,R){return new eo(R,"canvas",D)}},{key:"fromElement",value:function(D){var R=eo.toCamelCase(D.getAttribute("data-type")),F=D.attributes,j=0,H=F.length,ne={};if(R){for(/Gauge$/.test(R)||(R+="Gauge");j<H;j++)ne[eo.toCamelCase(F[j].name.replace(/^data-/,""),!1)]=eo.parse(F[j].value);new eo(ne,D.tagName,R).process(D)}}},{key:"ensureValue",value:function(D){var R=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return D=parseFloat(D),!isNaN(D)&&isFinite(D)||(D=parseFloat(R)||0),D}},{key:"mod",value:function(D,R){return(D%R+R)%R}},{key:"version",get:function(){return Lo}}]),w}(wu);void 0!==Ye&&(Ye.BaseGauge=ji,Ye.gauges=(window.document||{}).gauges=vn);var Bo=/{([_a-zA-Z]+[_a-zA-Z0-9]*)}/g,Oe={roundRect:jt,padValue:en,formatMajorTickNumber:function Re(x,w){var D=void 0,R=!1;return D=0===w.majorTicksDec?Math.round(x).toString():x.toFixed(w.majorTicksDec),w.majorTicksInt>1?(R=~D.indexOf("."),~D.indexOf("-")?"-"+[w.majorTicksInt+w.majorTicksDec+2+(R?1:0)-D.length].join("0")+D.replace("-",""):[w.majorTicksInt+w.majorTicksDec+1+(R?1:0)-D.length].join("0")+D):D},radians:function pe(x){return x*Math.PI/180},radialPoint:function Se(x,w){return{x:-x*Math.sin(w),y:x*Math.cos(w)}},linearGradient:function gn(x,w,D,R){var F=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],j=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,H=x.createLinearGradient(F?0:j,F?j:0,F?0:R,F?R:0);return H.addColorStop(0,w),H.addColorStop(1,D),H},drawNeedleShadow:function kt(x,w){w.needleShadow&&(x.shadowOffsetX=2,x.shadowOffsetY=2,x.shadowBlur=10,x.shadowColor=w.colorNeedleShadowDown)},drawValueBox:function qe(x,w,D,R,F,j){if(w.valueBox){Pn(x);var H=w.valueDec?1+w.valueDec:0,ne="9".repeat(Math.max.apply(null,[String(parseInt(D)).length+H].concat(w.majorTicks.map(function(_e){return String(parseInt(_e,10)).length+H})))),K=w.valueText||en(D,w),oe=j/200,P=j/100,Ae=.4*P,nt=1.2*P;x.font=It(w,"Value",oe),Kn(x,w,Ae,nt);var yt=x.measureText(w.valueText?K:"-"+en(Number(ne),w)).width;Pn(x);var bt=parseFloat(w.fontValueSize)*oe+Ae+nt,tn=P*parseFloat(w.valueBoxStroke),Ct=2*j-2*tn,it=yt+10*P,Wt=1.1*bt+Ae+nt,zt=P*w.valueBoxBorderRadius,Ot=(parseFloat(w.valueBoxWidth)||0)/100*Ct;Ot>it&&(it=Ot),it>Ct&&(it=Ct);var je=R-it/2,lt=F-Wt/2,Fe=F-5.75*P;if(x.beginPath(),zt?jt(x,je,lt,it,Wt,zt):x.rect(je,lt,it,Wt),tn){var Vt=x.createRadialGradient(R,Fe,10*P,R,Fe,20*P);Vt.addColorStop(0,w.colorValueBoxRect),Vt.addColorStop(1,w.colorValueBoxRectEnd),x.strokeStyle=Vt,x.lineWidth=tn,x.stroke()}w.colorValueBoxShadow&&(x.shadowBlur=1.2*P,x.shadowColor=w.colorValueBoxShadow),w.colorValueBoxBackground&&(x.fillStyle=w.colorValueBoxBackground,x.fill()),x.closePath(),x.restore(),Kn(x,w,Ae,nt),x.fillStyle=w.colorValueText,x.textAlign="center",x.textBaseline="alphabetic",x.fillText(K,je+it/2,F+Wt/2-bt/3),x.restore()}},verifyError:function et(x){if(!(x instanceof DOMException&&2152923147===x.result))throw x},prepareTicks:function Qe(x){return x.majorTicks instanceof Array||(x.majorTicks=x.majorTicks?[x.majorTicks]:[]),x.majorTicks.length||(x.majorTicks.push(Oe.formatMajorTickNumber(x.minValue,x)),x.majorTicks.push(Oe.formatMajorTickNumber(x.maxValue,x))),["right"!==x.tickSide,"left"!==x.tickSide]},drawShadow:function Tn(x,w){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return x.restore(),!0;x.save();var D=w.borderShadowWidth;return D&&(x.shadowBlur=D,x.shadowColor=w.colorBorderShadow),!0},font:It,normalizedValue:function Be(x){var w=x.value,D=x.minValue,R=x.maxValue,F=.01*(R-D);return{normal:w<D?D:w>R?R:w,indented:w<D?D-F:w>R?R+F:w}},formatContext:function $e(x,w){return w.replace(Bo,function(D,R){var F=x[R];return void 0!==F?F:D})}},Cs=Math.PI,Ds=Cs/2,Ei=Object.assign({},to,{ticksAngle:270,startAngle:45,colorNeedleCircleOuter:"#f0f0f0",colorNeedleCircleOuterEnd:"#ccc",colorNeedleCircleInner:"#e8e8e8",colorNeedleCircleInnerEnd:"#f5f5f5",needleCircleSize:10,needleCircleInner:!0,needleCircleOuter:!0,needleStart:20,animationTarget:"needle",useMinPath:!1,barWidth:0,barStartPosition:"left"}),Eu=function(x){function w(D){return ot(this,w),D=Object.assign({},Ei,D||{}),Ne(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w.configure(D)))}return mt(w,x),Es(w,[{key:"draw",value:function(){try{var D=this.canvas,R=[-D.drawX,-D.drawY,D.drawWidth,D.drawHeight],F=R[0],j=R[1],H=R[2],ne=R[3],K=this.options;if("needle"===K.animationTarget){if(!D.elementClone.initialized){var oe=D.contextClone;oe.clearRect(F,j,H,ne),oe.save(),this.emit("beforePlate"),Ut(oe,K),this.emit("beforeHighlights"),L(oe,K),this.emit("beforeMinorTicks"),Pt(oe,K),this.emit("beforeMajorTicks"),An(oe,K),this.emit("beforeNumbers"),$(oe,K),this.emit("beforeTitle"),U(oe,K),this.emit("beforeUnits"),ae(oe,K),D.elementClone.initialized=!0}this.canvas.commit(),D.context.clearRect(F,j,H,ne),D.context.save(),D.context.drawImage(D.elementClone,F,j,H,ne),D.context.save(),this.emit("beforeProgressBar"),z(D.context,K),this.emit("beforeValueBox"),W(D.context,K,te(this)),this.emit("beforeNeedle"),le(D.context,K)}else{var P=-Oe.radians((K.value-K.minValue)/(K.maxValue-K.minValue)*K.ticksAngle);if(D.context.clearRect(F,j,H,ne),D.context.save(),this.emit("beforePlate"),Ut(D.context,K),D.context.rotate(P),this.emit("beforeHighlights"),L(D.context,K),this.emit("beforeMinorTicks"),Pt(D.context,K),this.emit("beforeMajorTicks"),An(D.context,K),this.emit("beforeNumbers"),$(D.context,K),this.emit("beforeProgressBar"),z(D.context,K),D.context.rotate(-P),D.context.save(),!D.elementClone.initialized){var Ae=D.contextClone;Ae.clearRect(F,j,H,ne),Ae.save(),this.emit("beforeTitle"),U(Ae,K),this.emit("beforeUnits"),ae(Ae,K),this.emit("beforeNeedle"),le(Ae,K),D.elementClone.initialized=!0}D.context.drawImage(D.elementClone,F,j,H,ne)}this.emit("beforeValueBox"),W(D.context,K,te(this)),Nl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"draw",this).call(this)}catch(nt){Oe.verifyError(nt)}return this}},{key:"value",set:function(D){D=ji.ensureValue(D,this.options.minValue),this.options.animation&&360===this.options.ticksAngle&&this.options.useMinPath&&(this._value=D,D=this.options.value+((D-this.options.value)%360+540)%360-180),kl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",D,this)},get:function(){return Nl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this)}}],[{key:"configure",value:function(D){return D.barWidth>50&&(D.barWidth=50),isNaN(D.startAngle)&&(D.startAngle=45),isNaN(D.ticksAngle)&&(D.ticksAngle=270),D.ticksAngle>360&&(D.ticksAngle=360),D.ticksAngle<0&&(D.ticksAngle=0),D.startAngle<0&&(D.startAngle=0),D.startAngle>360&&(D.startAngle=360),D}}]),w}(ji);void 0!==Ye&&(Ye.RadialGauge=Eu),ji.initialize("RadialGauge",Ei);var Uo=Object.assign({},to,{borderRadius:0,barBeginCircle:30,colorBarEnd:"",colorBarProgressEnd:"",needleWidth:6,tickSide:"both",needleSide:"both",numberSide:"both",ticksWidth:10,ticksWidthMinor:5,ticksPadding:5,barLength:85,fontTitleSize:26,highlightsWidth:10}),Ll=function(x){function w(D){return ot(this,w),D=Object.assign({},Uo,D||{}),Ne(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w.configure(D)))}return mt(w,x),Es(w,[{key:"draw",value:function(){try{var D=this.canvas,R=[-D.drawX,-D.drawY,D.drawWidth,D.drawHeight],F=R[0],j=R[1],H=R[2],ne=R[3],K=this.options;if(!D.elementClone.initialized){var oe=D.contextClone;oe.clearRect(F,j,H,ne),oe.save(),this.emit("beforePlate"),this.drawBox=function se(x,w,D,R,F,j){var H=er.pixelRatio;x.save();var ne=w.borderRadius*H,K=F-w.borderShadowWidth-w.borderOuterWidth*H,oe=K-w.borderOuterWidth*H-w.borderMiddleWidth*H,P=oe-w.borderMiddleWidth*H-w.borderInnerWidth*H,Ae=P-w.borderInnerWidth*H,nt=j-w.borderShadowWidth-w.borderOuterWidth*H,yt=nt-w.borderOuterWidth*H-w.borderMiddleWidth*H,bt=yt-w.borderMiddleWidth*H-w.borderInnerWidth*H,tn=bt-w.borderInnerWidth*H,Ct=D-(oe-K)/2,it=Ct-(P-oe)/2,Wt=it-(Ae-P)/2,zt=R-(yt-nt)/2,Ot=zt-(bt-yt)/2,je=Ot-(tn-bt)/2,lt=0,Fe=!1;return w.borderOuterWidth&&(Fe=Oe.drawShadow(x,w,Fe),fe(x,w.borderOuterWidth*H,ne,D+w.borderOuterWidth*H/2-lt,R+w.borderOuterWidth*H/2-lt,K,nt,w.colorBorderOuter,w.colorBorderOuterEnd),lt+=.5*H),w.borderMiddleWidth&&(Fe=Oe.drawShadow(x,w,Fe),fe(x,w.borderMiddleWidth*H,ne-=1+2*lt,Ct+w.borderMiddleWidth*H/2-lt,zt+w.borderMiddleWidth*H/2-lt,oe+2*lt,yt+2*lt,w.colorBorderMiddle,w.colorBorderMiddleEnd),lt+=.5*H),w.borderInnerWidth&&(Fe=Oe.drawShadow(x,w,Fe),fe(x,w.borderInnerWidth*H,ne-=1+2*lt,it+w.borderInnerWidth*H/2-lt,Ot+w.borderInnerWidth*H/2-lt,P+2*lt,bt+2*lt,w.colorBorderInner,w.colorBorderInnerEnd),lt+=.5*H),Oe.drawShadow(x,w,Fe),function re(x,w,D,R,F,j,H,ne){x.beginPath(),x.fillStyle=ne?Oe.linearGradient(x,H,ne,F>j?F:j,j>F,F>j?D:R):H,w>0?Oe.roundRect(x,D,R,F,j,w):x.rect(D,R,F,j),x.fill(),x.closePath()}(x,ne,Wt,je,Ae+2*lt,tn+2*lt,w.colorPlate,w.colorPlateEnd),x.restore(),[Wt,je,Ae,tn]}(oe,K,F,j,H,ne),this.emit("beforeBar"),we.apply(void 0,[oe,K].concat(ze(this.drawBox))),D.context.barDimensions=oe.barDimensions,this.emit("beforeHighlights"),function Mt(x,w){var D=x.barDimensions,R=D.isVertical,F=D.width,j=D.length,H=D.barWidth,ne=D.barOffset,K=D.barMargin,oe=D.X,P=D.Y,Ae=D.ticksLength,nt=D.ticksPadding,yt=F*(parseFloat(w.highlightsWidth)||0)/100;if(w.highlights&&yt){var bt="right"!==w.tickSide,tn="left"!==w.tickSide,Ct=0,it=w.highlights.length,Wt=(F-H)/2,zt=w.maxValue-w.minValue,Ot=Ft(R?oe+Wt:oe+K+ne),je=yt,lt=R?P+j-K-ne:P+Wt,Fe=Ft((w.ticksWidth/100+nt)*F)+(yt-w.ticksWidth/100*F),Vt=Ft(H+nt*F);for(x.save();Ct<it;Ct++){var _e=w.highlights[Ct],ut=Ae*Mi(w.minValue-_e.from)/zt,Je=Ae*Mi((_e.to-_e.from)/zt);x.beginPath(),x.fillStyle=_e.color,R?(bt&&x.rect(Ot-Fe,lt-ut,je,-Je),tn&&x.rect(Ot+Vt,lt-ut,je,-Je)):(bt&&x.rect(Ot+ut,lt-Fe,Je,je),tn&&x.rect(Ot+ut,lt+Vt,Je,je)),x.fill(),x.closePath()}}}(oe,K),this.emit("beforeMinorTicks"),function Tr(x,w){var D=Oe.prepareTicks(w),R=Ta(D,2),F=R[0],j=R[1],H=[],ne=w.minValue,K=Math.abs(w.minorTicks)||0,oe=K?(w.maxValue-w.minValue)/(K*(w.majorTicks.length-1)):0;if(K)if(w.exactTicks)for(var P=ji.mod(w.majorTicks[0],K)||0;ne<w.maxValue;ne+=K)P+ne<w.maxValue&&H.push(P+ne);else for(;ne<w.maxValue;ne+=oe)H.push(ne);ke(x,w.colorMinorTicks||w.colorStrokeTicks,H,w.minValue,w.maxValue,F,j,1,w.ticksWidthMinor/100)}(oe,K),this.emit("beforeMajorTicks"),function gt(x,w){var D=Oe.prepareTicks(w),R=Ta(D,2),F=R[0],j=R[1],H=2,ne=(w.maxValue-w.minValue)/(w.majorTicks.length-1),K=w.colorMajorTicks instanceof Array?w.colorMajorTicks:new Array(w.majorTicks.length).fill(w.colorStrokeTicks||w.colorMajorTicks);if(ke(x,K,w.exactTicks?w.majorTicks:w.majorTicks.map(function(Je,On){return w.minValue+ne*On}),w.minValue,w.maxValue,F,j,H,w.ticksWidth/100),w.strokeTicks){var oe=x.barDimensions,P=oe.isVertical,Ae=oe.length,nt=oe.width,yt=oe.barWidth,bt=oe.barMargin,tn=oe.barOffset,Ct=oe.X,it=oe.Y,Wt=oe.ticksLength,zt=oe.pixelRatio,Ot=oe.ticksPadding,je=(nt-yt)/2+yt+Ot*nt,lt=(nt-yt)/2-Ot*nt,Fe=void 0,Vt=void 0,_e=void 0,ut=void 0;x.strokeStyle=w.colorStrokeTicks||K[0],H*=zt,P?(ut=(Vt=it+Ae-bt-tn+H/2)-Wt-H,F&&(_e=Fe=Ft(Ct+lt),dr(x,Fe,Vt,_e,ut)),j&&(_e=Fe=Ft(Ct+je),dr(x,Fe,Vt,_e,ut))):(_e=(Fe=Ct+bt+tn-H/2)+Wt+H,F&&(ut=Vt=Ft(it+lt),dr(x,Fe,Vt,_e,ut)),j&&(ut=Vt=Ft(it+je),dr(x,Fe,Vt,_e,ut)))}}(oe,K),this.emit("beforeNumbers"),function fr(x,w){var D=x.barDimensions,R=D.isVertical,F=D.length,j=D.width,H=D.barWidth,ne=D.barMargin,K=D.barOffset,oe=D.X,P=D.Y,Ae=D.ticksLength,nt=D.ticksPadding,yt=w.maxValue-w.minValue,bt=yt/(w.majorTicks.length-1),tn=w.exactTicks?w.majorTicks:w.majorTicks.map(function(Ir,on){return w.minValue+bt*on}),Ct=tn.length,it="right"!==w.numberSide,Wt="left"!==w.numberSide,zt=w.fontNumbersSize*j/200,Ot=0,je=(w.ticksWidth/100+2*nt)*j,lt=(j-H)/2-je,Fe=(j-H)/2+H+je,Vt=void 0,_e=void 0,ut=void 0,Je=void 0,On=w.colorNumbers instanceof Array?w.colorNumbers:new Array(Ct).fill(w.colorNumbers),Lt=w.numbersMargin/100*j;for(x.font=Oe.font(w,"Numbers",j/200),x.lineWidth=0,x.textAlign="center";Ot<Ct;Ot++)x.fillStyle=On[Ot],Je=w.majorTicks[Ot],ut=w.exactTicks?Ae*((tn[Ot]-w.minValue)/yt):Ot*Ae/(Ct-1),R?(_e=P+F-ne-K-ut+zt/3,it&&(x.textAlign="right",x.fillText(Je,oe+lt-Lt,_e)),Wt&&(x.textAlign="left",x.fillText(Je,oe+Fe+Lt,_e))):(x.measureText(Je),Vt=oe+ne+K+ut,it&&x.fillText(Je,Vt,P+lt-Lt),Wt&&x.fillText(Je,Vt,P+Fe+zt+Lt))}(oe,K),this.emit("beforeTitle"),function Js(x,w){if(w.title){var D=x.barDimensions,R=D.isVertical,F=D.width,j=D.length,ne=D.baseY,K=D.titleMargin,oe=w.fontTitleSize*F/200,P=Ft(D.baseX+(R?F:j)/2),Ae=Ft(ne+K/2-(R?oe:oe/2)-.025*(R?j:F));x.save(),x.textAlign="center",x.fillStyle=w.colorTitle,x.font=Oe.font(w,"Title",F/200),x.lineWidth=0,x.fillText(w.title,P,Ae,R?F:j)}}(oe,K),this.emit("beforeUnits"),function Ar(x,w){if(w.units){var D=x.barDimensions,R=D.isVertical,F=D.width,j=D.length,ne=D.baseY,K=D.unitsMargin,oe=w.fontUnitsSize*F/200,P=Ft(D.baseX+(R?F:j)/2),Ae=Ft(ne+(R?j:F)+K/2-oe/2);x.save(),x.textAlign="center",x.fillStyle=w.colorUnits,x.font=Oe.font(w,"Units",F/200),x.lineWidth=0,x.fillText(Oe.formatContext(w,w.units),P,Ae,R?F:j)}}(oe,K),D.elementClone.initialized=!0}this.canvas.commit(),D.context.clearRect(F,j,H,ne),D.context.save(),D.context.drawImage(D.elementClone,F,j,H,ne),D.context.save(),this.emit("beforeProgressBar"),tt.apply(void 0,[D.context,K].concat(ze(this.drawBox))),this.emit("beforeNeedle"),function ko(x,w){if(w.needle){var D=x.barDimensions,R=D.isVertical,F=D.width,j=D.length,H=D.barWidth,ne=D.barOffset,K=D.barMargin,P=D.X,Ae=D.Y,nt=D.ticksPadding,yt="right"!==w.needleSide,bt="left"!==w.needleSide,tn=D.ticksLength*(Oe.normalizedValue(w).indented-w.minValue)/(w.maxValue-w.minValue),Ct=(w.ticksWidth/100+nt)*F,it=H/2+Ct,Wt=it*(w.needleEnd/100),zt=void 0,je=void 0,Fe="arrow"===w.needleType.toLowerCase()?bu:$d,Vt=(F-H)/2,_e=it*(w.needleStart/100),ut=Vt-Ct-_e,Je=Vt+H+Ct+_e;x.save(),Oe.drawNeedleShadow(x,w),R?(je=Ft(Ae+j-K-ne-tn),yt&&Fe(x,w,zt=Ft(P+ut),je,zt+Wt,je,Wt),bt&&Fe(x,w,zt=Ft(P+Je),je,zt-Wt,je,Wt,!0)):(zt=Ft(P+K+ne+tn),yt&&Fe(x,w,zt,je=Ft(Ae+ut),zt,je+Wt,Wt),bt&&Fe(x,w,zt,je=Ft(Ae+Je),zt,je-Wt,Wt,!0)),x.restore()}}(D.context,K),this.emit("beforeValueBox"),Ii.apply(void 0,[D.context,K,K.animatedValue?this.options.value:this.value].concat(ze(this.drawBox))),Nl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"draw",this).call(this)}catch(P){Oe.verifyError(P)}return this}}],[{key:"configure",value:function(D){return D.barStrokeWidth>=D.barWidth&&(D.barStrokeWidth=Ft(D.barWidth/2)),D.hasLeft=Ue("right",D),D.hasRight=Ue("left",D),D.value>D.maxValue&&(D.value=D.maxValue),D.value<D.minValue&&(D.value=D.minValue),ji.configure(D)}}]),w}(ji);void 0!==Ye&&(Ye.LinearGauge=Ll),ji.initialize("LinearGauge",Uo),Object.assign(Ye,{Collection:ht,GenericOptions:to,Animation:Fl,BaseGauge:ji,drawings:Oe,SmartCanvas:er,DomObserver:eo,vendorize:pt})}(qt.exports)},469:qt=>{"use strict";function Ye(N,$,U){U=U||2;var z,te,re,fe,se,be,ce,ae=$&&$.length,le=ae?$[0]*U:N.length,W=ze(N,0,le,U,!0),Y=[];if(!W||W.next===W.prev)return Y;if(ae&&(W=function et(N,$,U,ae){var W,Y,re,le=[];for(W=0,Y=$.length;W<Y;W++)(re=ze(N,$[W]*ae,W<Y-1?$[W+1]*ae:N.length,ae,!1))===re.next&&(re.steiner=!0),le.push(gn(re));for(le.sort($e),W=0;W<le.length;W++)U=Qe(le[W],U);return U}(N,$,W,U)),N.length>80*U){z=re=N[0],te=fe=N[1];for(var we=U;we<le;we+=U)(se=N[we])<z&&(z=se),(be=N[we+1])<te&&(te=be),se>re&&(re=se),be>fe&&(fe=be);ce=0!==(ce=Math.max(re-z,fe-te))?32767/ce:0}return mt(W,Y,U,z,te,ce,0),Y}function ze(N,$,U,ae,le){var W,Y;if(le===fn(N,$,U,ae)>0)for(W=$;W<U;W+=ae)Y=Pt(W,N[W],N[W+1],Y);else for(W=U-ae;W>=$;W-=ae)Y=Pt(W,N[W],N[W+1],Y);return Y&&Pn(Y,Y.next)&&(Kt(Y),Y=Y.next),Y}function Ne(N,$){if(!N)return N;$||($=N);var ae,U=N;do{if(ae=!1,U.steiner||!Pn(U,U.next)&&0!==It(U.prev,U,U.next))U=U.next;else{if(Kt(U),(U=$=U.prev)===U.next)break;ae=!0}}while(ae||U!==$);return $}function mt(N,$,U,ae,le,W,Y){if(N){!Y&&W&&function Re(N,$,U,ae){var le=N;do{0===le.z&&(le.z=Se(le.x,le.y,$,U,ae)),le.prevZ=le.prev,le.nextZ=le.next,le=le.next}while(le!==N);le.prevZ.nextZ=null,le.prevZ=null,function pe(N){var $,U,ae,le,W,Y,z,te,re=1;do{for(U=N,N=null,W=null,Y=0;U;){for(Y++,ae=U,z=0,$=0;$<re&&(z++,ae=ae.nextZ);$++);for(te=re;z>0||te>0&&ae;)0!==z&&(0===te||!ae||U.z<=ae.z)?(le=U,U=U.nextZ,z--):(le=ae,ae=ae.nextZ,te--),W?W.nextZ=le:N=le,le.prevZ=W,W=le;U=ae}W.nextZ=null,re*=2}while(Y>1)}(le)}(N,ae,le,W);for(var te,re,z=N;N.prev!==N.next;)if(te=N.prev,re=N.next,W?pt(N,ae,le,W):ot(N))$.push(te.i/U|0),$.push(N.i/U|0),$.push(re.i/U|0),Kt(N),N=re.next,z=re.next;else if((N=re)===z){Y?1===Y?mt(N=Pe(Ne(N),$,U),$,U,ae,le,W,2):2===Y&&ht(N,$,U,ae,le,W):mt(Ne(N),$,U,ae,le,W,1);break}}}function ot(N){var $=N.prev,U=N,ae=N.next;if(It($,U,ae)>=0)return!1;for(var le=$.x,W=U.x,Y=ae.x,z=$.y,te=U.y,re=ae.y,fe=le<W?le<Y?le:Y:W<Y?W:Y,se=z<te?z<re?z:re:te<re?te:re,be=le>W?le>Y?le:Y:W>Y?W:Y,ce=z>te?z>re?z:re:te>re?te:re,we=ae.next;we!==$;){if(we.x>=fe&&we.x<=be&&we.y>=se&&we.y<=ce&&Tn(le,z,W,te,Y,re,we.x,we.y)&&It(we.prev,we,we.next)>=0)return!1;we=we.next}return!0}function pt(N,$,U,ae){var le=N.prev,W=N,Y=N.next;if(It(le,W,Y)>=0)return!1;for(var z=le.x,te=W.x,re=Y.x,fe=le.y,se=W.y,be=Y.y,ce=z<te?z<re?z:re:te<re?te:re,we=fe<se?fe<be?fe:be:se<be?se:be,Ue=z>te?z>re?z:re:te>re?te:re,tt=fe>se?fe>be?fe:be:se>be?se:be,Mt=Se(ce,we,$,U,ae),Et=Se(Ue,tt,$,U,ae),ke=N.prevZ,gt=N.nextZ;ke&&ke.z>=Mt&&gt&&gt.z<=Et;){if(ke.x>=ce&&ke.x<=Ue&&ke.y>=we&&ke.y<=tt&&ke!==le&&ke!==Y&&Tn(z,fe,te,se,re,be,ke.x,ke.y)&&It(ke.prev,ke,ke.next)>=0||(ke=ke.prevZ,gt.x>=ce&&gt.x<=Ue&&gt.y>=we&&gt.y<=tt&&gt!==le&&gt!==Y&&Tn(z,fe,te,se,re,be,gt.x,gt.y)&&It(gt.prev,gt,gt.next)>=0))return!1;gt=gt.nextZ}for(;ke&&ke.z>=Mt;){if(ke.x>=ce&&ke.x<=Ue&&ke.y>=we&&ke.y<=tt&&ke!==le&&ke!==Y&&Tn(z,fe,te,se,re,be,ke.x,ke.y)&&It(ke.prev,ke,ke.next)>=0)return!1;ke=ke.prevZ}for(;gt&&gt.z<=Et;){if(gt.x>=ce&&gt.x<=Ue&&gt.y>=we&&gt.y<=tt&&gt!==le&&gt!==Y&&Tn(z,fe,te,se,re,be,gt.x,gt.y)&&It(gt.prev,gt,gt.next)>=0)return!1;gt=gt.nextZ}return!0}function Pe(N,$,U){var ae=N;do{var le=ae.prev,W=ae.next.next;!Pn(le,W)&&Kn(le,ae,ae.next,W)&&B(le,W)&&B(W,le)&&($.push(le.i/U|0),$.push(ae.i/U|0),$.push(W.i/U|0),Kt(ae),Kt(ae.next),ae=N=W),ae=ae.next}while(ae!==N);return Ne(ae)}function ht(N,$,U,ae,le,W){var Y=N;do{for(var z=Y.next.next;z!==Y.prev;){if(Y.i!==z.i&&kt(Y,z)){var te=L(Y,z);return Y=Ne(Y,Y.next),te=Ne(te,te.next),mt(Y,$,U,ae,le,W,0),void mt(te,$,U,ae,le,W,0)}z=z.next}Y=Y.next}while(Y!==N)}function $e(N,$){return N.x-$.x}function Qe(N,$){var U=function jt(N,$){var Y,U=$,ae=N.x,le=N.y,W=-1/0;do{if(le<=U.y&&le>=U.next.y&&U.next.y!==U.y){var z=U.x+(le-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(z<=ae&&z>W&&(W=z,Y=U.x<U.next.x?U:U.next,z===ae))return Y}U=U.next}while(U!==$);if(!Y)return null;var be,te=Y,re=Y.x,fe=Y.y,se=1/0;U=Y;do{ae>=U.x&&U.x>=re&&ae!==U.x&&Tn(le<fe?ae:W,le,re,fe,le<fe?W:ae,le,U.x,U.y)&&(be=Math.abs(le-U.y)/(ae-U.x),B(U,N)&&(be<se||be===se&&(U.x>Y.x||U.x===Y.x&&en(Y,U)))&&(Y=U,se=be)),U=U.next}while(U!==te);return Y}(N,$);if(!U)return $;var ae=L(U,N);return Ne(ae,ae.next),Ne(U,U.next)}function en(N,$){return It(N.prev,N,$.prev)<0&&It($.next,N,N.next)<0}function Se(N,$,U,ae,le){return(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=(N-U)*le|0)|N<<8))|N<<4))|N<<2))|N<<1))|($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=($-ae)*le|0)|$<<8))|$<<4))|$<<2))|$<<1))<<1}function gn(N){var $=N,U=N;do{($.x<U.x||$.x===U.x&&$.y<U.y)&&(U=$),$=$.next}while($!==N);return U}function Tn(N,$,U,ae,le,W,Y,z){return(le-Y)*($-z)>=(N-Y)*(W-z)&&(N-Y)*(ae-z)>=(U-Y)*($-z)&&(U-Y)*(W-z)>=(le-Y)*(ae-z)}function kt(N,$){return N.next.i!==$.i&&N.prev.i!==$.i&&!function Cn(N,$){var U=N;do{if(U.i!==N.i&&U.next.i!==N.i&&U.i!==$.i&&U.next.i!==$.i&&Kn(U,U.next,N,$))return!0;U=U.next}while(U!==N);return!1}(N,$)&&(B(N,$)&&B($,N)&&function Ut(N,$){var U=N,ae=!1,le=(N.x+$.x)/2,W=(N.y+$.y)/2;do{U.y>W!=U.next.y>W&&U.next.y!==U.y&&le<(U.next.x-U.x)*(W-U.y)/(U.next.y-U.y)+U.x&&(ae=!ae),U=U.next}while(U!==N);return ae}(N,$)&&(It(N.prev,N,$.prev)||It(N,$.prev,$))||Pn(N,$)&&It(N.prev,N,N.next)>0&&It($.prev,$,$.next)>0)}function It(N,$,U){return($.y-N.y)*(U.x-$.x)-($.x-N.x)*(U.y-$.y)}function Pn(N,$){return N.x===$.x&&N.y===$.y}function Kn(N,$,U,ae){var le=Be(It(N,$,U)),W=Be(It(N,$,ae)),Y=Be(It(U,ae,N)),z=Be(It(U,ae,$));return!!(le!==W&&Y!==z||0===le&&qe(N,U,$)||0===W&&qe(N,ae,$)||0===Y&&qe(U,N,ae)||0===z&&qe(U,$,ae))}function qe(N,$,U){return $.x<=Math.max(N.x,U.x)&&$.x>=Math.min(N.x,U.x)&&$.y<=Math.max(N.y,U.y)&&$.y>=Math.min(N.y,U.y)}function Be(N){return N>0?1:N<0?-1:0}function B(N,$){return It(N.prev,N,N.next)<0?It(N,$,N.next)>=0&&It(N,N.prev,$)>=0:It(N,$,N.prev)<0||It(N,N.next,$)<0}function L(N,$){var U=new An(N.i,N.x,N.y),ae=new An($.i,$.x,$.y),le=N.next,W=$.prev;return N.next=$,$.prev=N,U.next=le,le.prev=U,ae.next=U,U.prev=ae,W.next=ae,ae.prev=W,ae}function Pt(N,$,U,ae){var le=new An(N,$,U);return ae?(le.next=ae.next,le.prev=ae,ae.next.prev=le,ae.next=le):(le.prev=le,le.next=le),le}function Kt(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function An(N,$,U){this.i=N,this.x=$,this.y=U,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function fn(N,$,U,ae){for(var le=0,W=$,Y=U-ae;W<U;W+=ae)le+=(N[Y]-N[W])*(N[W+1]+N[Y+1]),Y=W;return le}qt.exports=Ye,qt.exports.default=Ye,Ye.deviation=function(N,$,U,ae){var le=$&&$.length,Y=Math.abs(fn(N,0,le?$[0]*U:N.length,U));if(le)for(var z=0,te=$.length;z<te;z++)Y-=Math.abs(fn(N,$[z]*U,z<te-1?$[z+1]*U:N.length,U));var se=0;for(z=0;z<ae.length;z+=3){var be=ae[z]*U,ce=ae[z+1]*U,we=ae[z+2]*U;se+=Math.abs((N[be]-N[we])*(N[ce+1]-N[be+1])-(N[be]-N[ce])*(N[we+1]-N[be+1]))}return 0===Y&&0===se?0:Math.abs((se-Y)/Y)},Ye.flatten=function(N){for(var $=N[0][0].length,U={vertices:[],holes:[],dimensions:$},ae=0,le=0;le<N.length;le++){for(var W=0;W<N[le].length;W++)for(var Y=0;Y<$;Y++)U.vertices.push(N[le][W][Y]);le>0&&U.holes.push(ae+=N[le-1].length)}return U}},5:qt=>{"use strict";var Ye=Object.prototype.hasOwnProperty,ze="~";function Ne(){}function mt(ht,et,$e){this.fn=ht,this.context=et,this.once=$e||!1}function ot(ht,et,$e,Qe,jt){if("function"!=typeof $e)throw new TypeError("The listener must be a function");var en=new mt($e,Qe||ht,jt),Re=ze?ze+et:et;return ht._events[Re]?ht._events[Re].fn?ht._events[Re]=[ht._events[Re],en]:ht._events[Re].push(en):(ht._events[Re]=en,ht._eventsCount++),ht}function pt(ht,et){0==--ht._eventsCount?ht._events=new Ne:delete ht._events[et]}function Pe(){this._events=new Ne,this._eventsCount=0}Object.create&&(Ne.prototype=Object.create(null),(new Ne).__proto__||(ze=!1)),Pe.prototype.eventNames=function(){var $e,Qe,et=[];if(0===this._eventsCount)return et;for(Qe in $e=this._events)Ye.call($e,Qe)&&et.push(ze?Qe.slice(1):Qe);return Object.getOwnPropertySymbols?et.concat(Object.getOwnPropertySymbols($e)):et},Pe.prototype.listeners=function(et){var Qe=this._events[ze?ze+et:et];if(!Qe)return[];if(Qe.fn)return[Qe.fn];for(var jt=0,en=Qe.length,Re=new Array(en);jt<en;jt++)Re[jt]=Qe[jt].fn;return Re},Pe.prototype.listenerCount=function(et){var Qe=this._events[ze?ze+et:et];return Qe?Qe.fn?1:Qe.length:0},Pe.prototype.emit=function(et,$e,Qe,jt,en,Re){var pe=ze?ze+et:et;if(!this._events[pe])return!1;var Tn,kt,Se=this._events[pe],gn=arguments.length;if(Se.fn){switch(Se.once&&this.removeListener(et,Se.fn,void 0,!0),gn){case 1:return Se.fn.call(Se.context),!0;case 2:return Se.fn.call(Se.context,$e),!0;case 3:return Se.fn.call(Se.context,$e,Qe),!0;case 4:return Se.fn.call(Se.context,$e,Qe,jt),!0;case 5:return Se.fn.call(Se.context,$e,Qe,jt,en),!0;case 6:return Se.fn.call(Se.context,$e,Qe,jt,en,Re),!0}for(kt=1,Tn=new Array(gn-1);kt<gn;kt++)Tn[kt-1]=arguments[kt];Se.fn.apply(Se.context,Tn)}else{var Pn,It=Se.length;for(kt=0;kt<It;kt++)switch(Se[kt].once&&this.removeListener(et,Se[kt].fn,void 0,!0),gn){case 1:Se[kt].fn.call(Se[kt].context);break;case 2:Se[kt].fn.call(Se[kt].context,$e);break;case 3:Se[kt].fn.call(Se[kt].context,$e,Qe);break;case 4:Se[kt].fn.call(Se[kt].context,$e,Qe,jt);break;default:if(!Tn)for(Pn=1,Tn=new Array(gn-1);Pn<gn;Pn++)Tn[Pn-1]=arguments[Pn];Se[kt].fn.apply(Se[kt].context,Tn)}}return!0},Pe.prototype.on=function(et,$e,Qe){return ot(this,et,$e,Qe,!1)},Pe.prototype.once=function(et,$e,Qe){return ot(this,et,$e,Qe,!0)},Pe.prototype.removeListener=function(et,$e,Qe,jt){var en=ze?ze+et:et;if(!this._events[en])return this;if(!$e)return pt(this,en),this;var Re=this._events[en];if(Re.fn)Re.fn===$e&&(!jt||Re.once)&&(!Qe||Re.context===Qe)&&pt(this,en);else{for(var pe=0,Se=[],gn=Re.length;pe<gn;pe++)(Re[pe].fn!==$e||jt&&!Re[pe].once||Qe&&Re[pe].context!==Qe)&&Se.push(Re[pe]);Se.length?this._events[en]=1===Se.length?Se[0]:Se:pt(this,en)}return this},Pe.prototype.removeAllListeners=function(et){var $e;return et?this._events[$e=ze?ze+et:et]&&pt(this,$e):(this._events=new Ne,this._eventsCount=0),this},Pe.prototype.off=Pe.prototype.removeListener,Pe.prototype.addListener=Pe.prototype.on,Pe.prefixed=ze,Pe.EventEmitter=Pe,qt.exports=Pe},516:qt=>{"use strict";function Ye(ze,Ne){return Object.prototype.hasOwnProperty.call(ze,Ne)}qt.exports=function(ze,Ne,mt,ot){mt=mt||"=";var pt={};if("string"!=typeof ze||0===ze.length)return pt;var Pe=/\+/g;ze=ze.split(Ne=Ne||"&");var ht=1e3;ot&&"number"==typeof ot.maxKeys&&(ht=ot.maxKeys);var et=ze.length;ht>0&&et>ht&&(et=ht);for(var $e=0;$e<et;++$e){var en,Re,pe,Se,Qe=ze[$e].replace(Pe,"%20"),jt=Qe.indexOf(mt);jt>=0?(en=Qe.substr(0,jt),Re=Qe.substr(jt+1)):(en=Qe,Re=""),pe=decodeURIComponent(en),Se=decodeURIComponent(Re),Ye(pt,pe)?Array.isArray(pt[pe])?pt[pe].push(Se):pt[pe]=[pt[pe],Se]:pt[pe]=Se}return pt}},776:qt=>{"use strict";var Ye=function(ze){switch(typeof ze){case"string":return ze;case"boolean":return ze?"true":"false";case"number":return isFinite(ze)?ze:"";default:return""}};qt.exports=function(ze,Ne,mt,ot){return Ne=Ne||"&",mt=mt||"=",null===ze&&(ze=void 0),"object"==typeof ze?Object.keys(ze).map(function(pt){var Pe=encodeURIComponent(Ye(pt))+mt;return Array.isArray(ze[pt])?ze[pt].map(function(ht){return Pe+encodeURIComponent(Ye(ht))}).join(Ne):Pe+encodeURIComponent(Ye(ze[pt]))}).join(Ne):ot?encodeURIComponent(Ye(ot))+mt+encodeURIComponent(Ye(ze)):""}},137:(qt,Ye,ze)=>{"use strict";Ye.decode=Ye.parse=ze(516),Ye.encode=Ye.stringify=ze(776)},578:function(qt,Ye,ze){var Ne,mt;qt=ze.nmd(qt),function(ot){var pt={function:!0,object:!0};function Pe(Se){return Se&&Se.Object===Object?Se:null}var $e=Pe((pt[typeof Ye]&&Ye&&!Ye.nodeType?Ye:null)&&(pt.object&&qt&&!qt.nodeType?qt:null)&&"object"==typeof global&&global),Qe=Pe(pt[typeof self]&&self),jt=Pe(pt[typeof window]&&window),Re=Pe(pt[typeof this]&&this),pe=$e||jt!==(Re&&Re.window)&&jt||Qe||Re||Function("return this")();Ne=[ze(149)],void 0!==(mt=function(Se,gn){return ot(pe,gn,Se)}.apply(Ye,Ne))&&(qt.exports=mt)}.call(this,function(ot,pt,Pe,ht){var $e=Pe.ObservableBase,Qe=Pe.internals.AbstractObserver,kt=Pe.Subject,Pn=Pe.DOM={},Cn=Pe.internals.inherits;function Kt(z,te,re,fe){z&&(te&&(te.onNext(),te.onCompleted()),re?z.close(re,fe):z.close())}var An=function(z){function te(we,Ue,tt,Mt,Et){this._state=we,this._url=Ue,this._protocol=tt,this._open=Mt,this._close=Et,z.call(this)}function ce(we,Ue,tt,Mt,Et){this._socket=we,this._msgFn=Ue,this._errFn=tt,this._closeFn=Mt,this._close=Et,this.isDisposed=!1}return Cn(te,z),ce.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Kt(this._socket,this._close),this._socket.removeEventListener("message",this._msgFn,!1),this._socket.removeEventListener("error",this._errFn,!1),this._socket.removeEventListener("close",this._closeFn,!1))},te.prototype.subscribeCore=function(we){this._state.socket=this._protocol?new WebSocket(this._url,this._protocol):new WebSocket(this._url);var Ue=function re(we,Ue){return function tt(Mt){we.onNext(Mt),we.onCompleted(),Ue.removeEventListener("open",tt,!1)}}(this._open,this._state.socket),tt=function fe(we){return function(tt){we.onNext(tt)}}(we),Mt=function se(we){return function(tt){we.onError(tt)}}(we),Et=function be(we){return function(tt){if(1e3!==tt.code||!tt.wasClean)return we.onError(tt);we.onCompleted()}}(we);return this._open&&this._state.socket.addEventListener("open",Ue,!1),this._state.socket.addEventListener("message",tt,!1),this._state.socket.addEventListener("error",Mt,!1),this._state.socket.addEventListener("close",Et,!1),new ce(this._state.socket,tt,Mt,Et,this._close)},te}($e),fn=function(z){function te(re,fe){this._state=re,this._close=fe,z.call(this)}return Cn(te,z),te.prototype.next=function(re){this._state.socket&&this._state.socket.readyState===WebSocket.OPEN&&this._state.socket.send(re)},te.prototype.error=function(re){if(!re.code)throw new Error('no code specified. be sure to pass { code: ###, reason: "" } to onError()');Kt(this._state.socket,this._close,re.code,re.reason||"")},te.prototype.completed=function(){Kt(this._state.socket,this._close,1e3,"")},te}(Qe);Pn.fromWebSocket=function(z,te,re,fe){if(!WebSocket)throw new TypeError("WebSocket not implemented in your runtime.");var se={socket:null};return kt.create(new fn(se,fe),new An(se,z,te,re,fe))};var N=function(z){function te(re){this._state=re,z.call(this)}return Cn(te,z),te.prototype.next=function(re){this._state.worker&&this._state.worker.postMessage(re)},te.prototype.error=function(re){throw re},te.prototype.completed=function(){},te}(Qe),$=function(z){function te(be,ce){this._state=be,this._url=ce,z.call(this)}function se(be,ce,we){this._w=be,this._msgFn=ce,this._errFn=we,this.isDisposed=!1}return Cn(te,z),se.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._w.terminate(),this._w.removeEventListener("message",this._msgFn,!1),this._w.removeEventListener("error",this._errFn,!1))},te.prototype.subscribeCore=function(be){this._state.worker=new ot.Worker(this._url);var ce=function re(be){return function(we){be.onNext(we)}}(be),we=function fe(be){return function(we){be.onError(we)}}(be);return this._state.worker.addEventListener("message",ce,!1),this._state.worker.addEventListener("error",we,!1),new se(this._state.worker,ce,we)},te}($e);Pn.fromWorker=function(z){if(!ot.Worker)throw new TypeError("Worker not implemented in your runtime.");var te={worker:null};return kt.create(new N(te),new $(te,z))};var ae=function(z){function te(fe,se){this._target=fe,this._options=se,z.call(this)}function re(fe){this._m=fe,this.isDisposed=!1}return Cn(te,z),re.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._m.disconnect())},te.prototype.subscribeCore=function(fe){var se=function U(z){return new(ot.MutationObserver||ot.WebKitMutationObserver)(z)}(function(be){fe.onNext(be)});return se.observe(this._target,this._options),new re(se)},te}($e);Pn.fromMutationObserver=function(z,te){if(!ot.MutationObserver&&!ot.WebKitMutationObserver)throw new TypeError("MutationObserver not implemented in your runtime.");return new ae(z,te)};var le=function(z){function te(re){this._opts=re,z.call(this)}return Cn(te,z),te.prototype.subscribeCore=function(re){ot.navigator.geolocation.getCurrentPosition(function(fe){re.onNext(fe),re.onCompleted()},function(fe){re.onError(fe)},this._opts)},te}($e),W=function(z){function te(fe){this._opts=fe,z.call(this)}function re(fe){this._id=fe,this.isDisposed=!1}return Cn(te,z),re.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,ot.navigator.geolocation.clearWatch(this._id))},te.prototype.subscribeCore=function(fe){return new re(ot.navigator.geolocation.watchPosition(function(be){fe.onNext(be)},function(be){fe.onError(be)},this._opts))},te}($e);Pe.DOM.geolocation={getCurrentPosition:function(z){if(!ot.navigator&&!ot.navigation.geolocation)throw new TypeError("geolocation not available");return new le(z)},watchPosition:function(z){if(!ot.navigator&&!ot.navigation.geolocation)throw new TypeError("geolocation not available");return new W(z).publish().refCount()}};var Y=function(z){function te(ce,we,Ue,tt){this._readerFn=ce,this._file=we,this._progressObserver=Ue,this._encoding=tt,z.call(this)}function be(ce,we,Ue,tt,Mt){this._r=ce,this._po=we,this._lFn=Ue,this._eFn=tt,this._pFn=Mt,this.isDisposed=!1}return Cn(te,z),be.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._r.readyState===ot.FileReader.LOADING&&this._r.abort(),this._r.removeEventListener("load",this._lFn,!1),this._r.removeEventListener("error",this._eFn,!1),this._po&&this._r.removeEventListener("progress",this._pFn,!1))},te.prototype.subscribeCore=function(ce){var we=new ot.FileReader,Ue=function re(ce,we){return function(tt){we&&we.onCompleted(),ce.onNext(tt.target.result),ce.onCompleted()}}(ce,this._progressObserver),tt=function fe(ce){return function(Ue){ce.onError(Ue.target.error)}}(ce),Mt=function se(ce){return function(Ue){ce.onNext(Ue)}}(this._progressObserver);return we.addEventListener("load",Ue,!1),we.addEventListener("error",tt,!1),this._progressObserver&&we.addEventListener("progress",Mt,!1),we[this._readerFn](this._file,this._encoding),new be(we,this._progressObserver,Ue,tt,Mt)},te}($e);return Pn.fromReader=function(z,te){if(!ot.FileReader)throw new TypeError("FileReader not implemented in your runtime.");return{asArrayBuffer:function(){return new Y("readAsArrayBuffer",z,te)},asBinaryString:function(){return new Y("readAsBinaryString",z,te)},asDataURL:function(){return new Y("readAsDataURL",z,te)},asText:function(re){return new Y("readAsText",z,te,re)}}},Pe})},149:function(qt,Ye,ze){var Ne;qt=ze.nmd(qt),function(mt){var ot={function:!0,object:!0};function pt(h){return h&&h.Object===Object?h:null}var h,Pe=ot[typeof Ye]&&Ye&&!Ye.nodeType?Ye:null,ht=ot.object&&qt&&!qt.nodeType?qt:null,et=pt(Pe&&ht&&"object"==typeof global&&global),$e=pt(ot[typeof self]&&self),Qe=pt(ot[typeof window]&&window),jt=ht&&ht.exports===Pe?Pe:null,en=pt(ot[typeof this]&&this),Re=et||Qe!==(en&&en.window)&&Qe||$e||en||Function("return this")(),pe={internals:{},config:{Promise:Re.Promise},helpers:{}},Se=pe.helpers.noop=function(){},gn=pe.helpers.identity=function(h){return h},Tn=pe.helpers.defaultNow=Date.now,kt=pe.helpers.defaultComparer=function(h,u){return ne(h,u)},It=pe.helpers.defaultSubComparer=function(h,u){return h>u?1:h<u?-1:0},Kn=(pe.helpers.defaultKeySerializer=function(h){return h.toString()},pe.helpers.defaultError=function(h){throw h}),qe=pe.helpers.isPromise=function(h){return!!h&&"function"!=typeof h.subscribe&&"function"==typeof h.then},Be=pe.helpers.isFunction=((h=function(u){return"function"==typeof u||!1})(/x/)&&(h=function(u){return"function"==typeof u&&"[object Function]"==toString.call(u)}),h);function Cn(h){for(var u=[],d=0,p=h.length;d<p;d++)u.push(h[d]);return u}var B={e:{}},L=pe.internals.tryCatch=function(u){if(!Be(u))throw new TypeError("fn must be a function");return function Ut(h){return function(){try{return h.apply(this,arguments)}catch(d){return B.e=d,B}}}(u)};function Pt(h){throw h}pe.config.longStackSupport=!1;var Kt,An=L(function(){throw new Error})();Kt=!!An.e&&!!An.e.stack;var N,fn=Y(),$="From previous event:";function le(h){var u=z(h);if(!u)return!1;var p=u[1];return u[0]===N&&p>=fn&&p<=ea}function W(h){return-1!==h.indexOf("(module.js:")||-1!==h.indexOf("(node.js:")}function Y(){if(Kt)try{throw new Error}catch(p){var h=p.stack.split("\n"),d=z(h[0].indexOf("@")>0?h[1]:h[2]);return d?(N=d[0],d[1]):void 0}}function z(h){var u=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(h);if(u)return[u[1],Number(u[2])];var d=/at ([^ ]+):(\d+):(?:\d+)$/.exec(h);if(d)return[d[1],Number(d[2])];var p=/.*@(.+):(\d+)$/.exec(h);return p?[p[1],Number(p[2])]:void 0}var te=pe.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};te.prototype=Object.create(Error.prototype),te.prototype.name="EmptyError";var re=pe.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};re.prototype=Object.create(Error.prototype),re.prototype.name="ObjectDisposedError";var fe=pe.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};fe.prototype=Object.create(Error.prototype),fe.prototype.name="ArgumentOutOfRangeError";var se=pe.NotSupportedError=function(h){this.message=h||"This operation is not supported",Error.call(this)};se.prototype=Object.create(Error.prototype),se.prototype.name="NotSupportedError";var be=pe.NotImplementedError=function(h){this.message=h||"This operation is not implemented",Error.call(this)};be.prototype=Object.create(Error.prototype),be.prototype.name="NotImplementedError";var ce=pe.helpers.notImplemented=function(){throw new be},Ue=(pe.helpers.notSupported=function(){throw new se},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Re.Set&&"function"==typeof(new Re.Set)["@@iterator"]&&(Ue="@@iterator");var tt=pe.doneEnumerator={done:!0,value:mt},Mt=pe.helpers.isIterable=function(h){return h&&h[Ue]!==mt},Et=pe.helpers.isArrayLike=function(h){return h&&h.length!==mt};pe.helpers.iterator=Ue;var ke=pe.internals.bindCallback=function(h,u,d){if(typeof u>"u")return h;switch(d){case 0:return function(){return h.call(u)};case 1:return function(p){return h.call(u,p)};case 2:return function(p,m){return h.call(u,p,m)};case 3:return function(p,m,b){return h.call(u,p,m,b)}}return function(){return h.apply(u,arguments)}},Tr="[object Arguments]",fr="[object Array]",Js="[object Boolean]",Ar="[object Date]",ko="[object Error]",bu="[object Number]",Ii="[object Object]",Ta="[object RegExp]",kl="[object String]",vn={};vn["[object Float32Array]"]=vn["[object Float64Array]"]=vn["[object Int8Array]"]=vn["[object Int16Array]"]=vn["[object Int32Array]"]=vn["[object Uint8Array]"]=vn["[object Uint8ClampedArray]"]=vn["[object Uint16Array]"]=vn["[object Uint32Array]"]=!0,vn[Tr]=vn[fr]=vn["[object ArrayBuffer]"]=vn[Js]=vn[Ar]=vn[ko]=vn["[object Function]"]=vn["[object Map]"]=vn[bu]=vn[Ii]=vn[Ta]=vn["[object Set]"]=vn[kl]=vn["[object WeakMap]"]=!1;var ji=Object.prototype,Bo=ji.hasOwnProperty,Oe=ji.toString,Cs=Math.pow(2,53)-1,Ds=Object.keys||function(){var h=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=d.length;return function(m){if("object"!=typeof m&&("function"!=typeof m||null===m))throw new TypeError("Object.keys called on non-object");var C,A,b=[];for(C in m)h.call(m,C)&&b.push(C);if(u)for(A=0;A<p;A++)h.call(m,d[A])&&b.push(d[A]);return b}}();function Ei(h,u,d,p,m,b){var C=Ds(h),A=C.length;if(A!==Ds(u).length&&!p)return!1;for(var J,G=A;G--;)if(J=C[G],!(p?J in u:Bo.call(u,J)))return!1;for(var ye=p;++G<A;){if(J=C[G],void 0!==mt||!d(h[J],u[J],p,m,b))return!1;ye||(ye="constructor"===J)}if(!ye){var dt=h.constructor,Ke=u.constructor;if(dt!==Ke&&"constructor"in h&&"constructor"in u&&!("function"==typeof dt&&dt instanceof dt&&"function"==typeof Ke&&Ke instanceof Ke))return!1}return!0}var Jl=pe.internals.isObject=function(h){var u=typeof h;return!!h&&("object"===u||"function"===u)};function Uo(h){return!!h&&"object"==typeof h}function Ll(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=Cs}var x=function(){try{Object({toString:0}+"")}catch{return function(){return!1}}return function(h){return"function"!=typeof h.toString&&"string"==typeof(h+"")}}(),D=Array.isArray||function(h){return Uo(h)&&Ll(h.length)&&Oe.call(h)===fr};function R(h,u){for(var d=-1,p=h.length;++d<p;)if(u(h[d],d,h))return!0;return!1}function F(h,u,d,p,m,b){var C=-1,A=h.length,k=u.length;if(A!==k&&!(p&&k>A))return!1;for(;++C<A;){var X=h[C],G=u[C];if(undefined!==mt)return!1;if(p){if(!R(u,function(ye){return X===ye||d(X,ye,p,m,b)}))return!1}else if(X!==G&&!d(X,G,p,m,b))return!1}return!0}function j(h,u,d,p,m,b){var C=D(h),A=D(u),k=fr,X=fr;C||((k=Oe.call(h))===Tr?k=Ii:k!==Ii&&(C=function w(h){return Uo(h)&&Ll(h.length)&&!!vn[Oe.call(h)]}(h))),A||(X=Oe.call(u))===Tr&&(X=Ii);var G=k===Ii&&!x(h),J=X===Ii&&!x(u),ye=k===X;if(ye&&!C&&!G)return function Eu(h,u,d){switch(d){case Js:case Ar:return+h==+u;case ko:return h.name===u.name&&h.message===u.message;case bu:return h!==+h?u!==+u:h===+u;case Ta:case kl:return h===u+""}return!1}(h,u,k);if(!p){var rt=G&&Bo.call(h,"__wrapped__"),Xe=J&&Bo.call(u,"__wrapped__");if(rt||Xe)return d(rt?h.value():h,Xe?u.value():u,p,m,b)}if(!ye)return!1;m||(m=[]),b||(b=[]);for(var ct=m.length;ct--;)if(m[ct]===h)return b[ct]===u;m.push(h),b.push(u);var dt=(C?F:Ei)(h,u,d,p,m,b);return m.pop(),b.pop(),dt}function H(h,u,d,p,m){return h===u||(null==h||null==u||!Jl(h)&&!Uo(u)?h!=h&&u!=u:j(h,u,H,d,p,m))}var ne=pe.internals.isEqual=function(h,u){return H(h,u)},P=pe.internals.inherits=function(h,u){function d(){this.constructor=h}d.prototype=u.prototype,h.prototype=new d},Ae=pe.internals.addProperties=function(h){for(var u=[],d=1,p=arguments.length;d<p;d++)u.push(arguments[d]);for(var m=0,b=u.length;m<b;m++){var C=u[m];for(var A in C)h[A]=C[A]}},nt=pe.internals.addRef=function(h,u){return new Yt(function(d){return new Je(u.getDisposable(),h.subscribe(d))})};function yt(h,u){for(var d=new Array(h),p=0;p<h;p++)d[p]=u();return d}function bt(h,u){this.id=h,this.value=u}bt.prototype.compareTo=function(h){var u=this.value.compareTo(h.value);return 0===u&&(u=this.id-h.id),u};var tn=pe.internals.PriorityQueue=function(h){this.items=new Array(h),this.length=0},Ct=tn.prototype;Ct.isHigherPriority=function(h,u){return this.items[h].compareTo(this.items[u])<0},Ct.percolate=function(h){if(!(h>=this.length||h<0)){var u=h-1>>1;if(!(u<0||u===h)&&this.isHigherPriority(h,u)){var d=this.items[h];this.items[h]=this.items[u],this.items[u]=d,this.percolate(u)}}},Ct.heapify=function(h){if(+h||(h=0),!(h>=this.length||h<0)){var u=2*h+1,d=2*h+2,p=h;if(u<this.length&&this.isHigherPriority(u,p)&&(p=u),d<this.length&&this.isHigherPriority(d,p)&&(p=d),p!==h){var m=this.items[h];this.items[h]=this.items[p],this.items[p]=m,this.heapify(p)}}},Ct.peek=function(){return this.items[0].value},Ct.removeAt=function(h){this.items[h]=this.items[--this.length],this.items[this.length]=mt,this.heapify()},Ct.dequeue=function(){var h=this.peek();return this.removeAt(0),h},Ct.enqueue=function(h){var u=this.length++;this.items[u]=new bt(tn.count++,h),this.percolate(u)},Ct.remove=function(h){for(var u=0;u<this.length;u++)if(this.items[u].value===h)return this.removeAt(u),!0;return!1},tn.count=0;var it=pe.CompositeDisposable=function(){var u,d,h=[];if(Array.isArray(arguments[0]))h=arguments[0];else for(d=arguments.length,h=new Array(d),u=0;u<d;u++)h[u]=arguments[u];this.disposables=h,this.isDisposed=!1,this.length=h.length},Wt=it.prototype;Wt.add=function(h){this.isDisposed?h.dispose():(this.disposables.push(h),this.length++)},Wt.remove=function(h){var u=!1;if(!this.isDisposed){var d=this.disposables.indexOf(h);-1!==d&&(u=!0,this.disposables.splice(d,1),this.length--,h.dispose())}return u},Wt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var h=this.disposables.length,u=new Array(h),d=0;d<h;d++)u[d]=this.disposables[d];for(this.disposables=[],this.length=0,d=0;d<h;d++)u[d].dispose()}};var zt=pe.Disposable=function(h){this.isDisposed=!1,this.action=h||Se};zt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ot=zt.create=function(h){return new zt(h)},je=zt.empty={dispose:Se},lt=zt.isDisposable=function(h){return h&&Be(h.dispose)},Fe=zt.checkDisposed=function(h){if(h.isDisposed)throw new re},Vt=zt._fixup=function(h){return lt(h)?h:je},_e=pe.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};_e.prototype.getDisposable=function(){return this.current},_e.prototype.setDisposable=function(h){if(this.current)throw new Error("Disposable has already been assigned");var u=this.isDisposed;!u&&(this.current=h),u&&h&&h.dispose()},_e.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this.current;this.current=null,h&&h.dispose()}};var ut=pe.SerialDisposable=function(){this.isDisposed=!1,this.current=null};ut.prototype.getDisposable=function(){return this.current},ut.prototype.setDisposable=function(h){var u=this.isDisposed;if(!u){var d=this.current;this.current=h}d&&d.dispose(),u&&h&&h.dispose()},ut.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this.current;this.current=null}h&&h.dispose()};var Je=pe.BinaryDisposable=function(h,u){this._first=h,this._second=u,this.isDisposed=!1};Je.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this._first;this._first=null,h&&h.dispose();var u=this._second;this._second=null,u&&u.dispose()}};var On=pe.NAryDisposable=function(h){this._disposables=h,this.isDisposed=!1};On.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var h=0,u=this._disposables.length;h<u;h++)this._disposables[h].dispose();this._disposables.length=0}};var Lt=pe.RefCountDisposable=function(){function h(d){this.disposable=d,this.disposable.count++,this.isInnerDisposed=!1}function u(d){this.underlyingDisposable=d,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return h.prototype.dispose=function(){!this.disposable.isDisposed&&!this.isInnerDisposed&&(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},u.prototype.dispose=function(){!this.isDisposed&&!this.isPrimaryDisposed&&(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},u.prototype.getDisposable=function(){return this.isDisposed?je:new h(this)},u}();function Ir(h,u){this.scheduler=h,this.disposable=u,this.isDisposed=!1}function on(h,u){u.isDisposed||(u.isDisposed=!0,u.disposable.dispose())}Ir.prototype.dispose=function(){this.scheduler.schedule(this,on)};var pr=pe.internals.ScheduledItem=function(h,u,d,p,m){this.scheduler=h,this.state=u,this.action=d,this.dueTime=p,this.comparer=m||It,this.disposable=new _e};pr.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},pr.prototype.compareTo=function(h){return this.comparer(this.dueTime,h.dueTime)},pr.prototype.isCancelled=function(){return this.disposable.isDisposed},pr.prototype.invokeCore=function(){return Vt(this.action(this.scheduler,this.state))};var Ri=pe.Scheduler=function(){function h(){}h.isScheduler=function(d){return d instanceof h};var u=h.prototype;return u.schedule=function(d,p){throw new be},u.scheduleFuture=function(d,p,m){var b=p;return b instanceof Date&&(b-=this.now()),0===(b=h.normalize(b))?this.schedule(d,m):this._scheduleFuture(d,b,m)},u._scheduleFuture=function(d,p,m){throw new be},h.now=Tn,h.prototype.now=Tn,h.normalize=function(d){return d<0&&(d=0),d},h}(),Bl=Ri.normalize,Ee=Ri.isScheduler;(function(h){function u(p,m){var b=m[0],C=m[1],A=new it;return C(b,function k(X){var G=!1,J=!1,ye=p.schedule(X,function rt(Xe,ct){return G?A.remove(ye):J=!0,C(ct,k),je});J||(A.add(ye),G=!0)}),A}function d(p,m){var b=m[0],C=m[1],A=new it;return C(b,function k(X,G){var J=!1,ye=!1,rt=p.scheduleFuture(X,G,function Xe(ct,dt){return J?A.remove(rt):ye=!0,C(dt,k),je});ye||(A.add(rt),J=!0)}),A}h.scheduleRecursive=function(p,m){return this.schedule([p,m],u)},h.scheduleRecursiveFuture=function(p,m,b){return this.scheduleFuture([p,b],m,d)}})(Ri.prototype),function(h){h.schedulePeriodic=function(u,d,p){if(typeof Re.setInterval>"u")throw new se;d=Bl(d);var m=u,b=Re.setInterval(function(){m=p(m)},d);return Ot(function(){Re.clearInterval(b)})}}(Ri.prototype),function(h){h.catchError=h.catch=function(u){return new Hi(this,u)}}(Ri.prototype);var gr,Rt,Cu=pe.internals.SchedulePeriodicRecursive=function(){function u(d,p,m,b){this._scheduler=d,this._state=p,this._period=m,this._action=b}return u.prototype.start=function(){var d=new _e;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,function h(d){return function(m,b){b(0,d._period);var C=L(d._action)(d._state);C===B&&(d._cancel.dispose(),Pt(C.e)),d._state=C}}(this))),d},u}(),Du=function(h){function u(){h.call(this)}return P(u,h),u.prototype.schedule=function(d,p){return Vt(p(this,d))},u}(Ri),Vi=Ri.immediate=new Du,Wd=function(h){var u;function d(){for(;u.length>0;){var m=u.dequeue();!m.isCancelled()&&m.invoke()}}function p(){h.call(this)}return P(p,h),p.prototype.schedule=function(m,b){var C=new pr(this,m,b,this.now());if(u)u.enqueue(C);else{(u=new tn(4)).enqueue(C);var A=L(d)();u=null,A===B&&Pt(A.e)}return C.disposable},p.prototype.scheduleRequired=function(){return!u},p}(Ri),xe=Ri.currentThread=new Wd,_n=function(){var h,u=Se;if(Re.setTimeout)h=Re.setTimeout,u=Re.clearTimeout;else{if(!Re.WScript)throw new se;h=function(d,p){Re.WScript.Sleep(p),d()}}return{setTimeout:h,clearTimeout:u}}(),Su=_n.setTimeout,ox=_n.clearTimeout;!function(){var h=1,u={},d=!1;function p(G){if(d)Su(function(){p(G)},0);else{var J=u[G];if(J){d=!0;var ye=L(J)();Rt(G),d=!1,ye===B&&Pt(ye.e)}}}Rt=function(G){delete u[G]};var m=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),b="function"==typeof(b=et&&jt&&et.setImmediate)&&!m.test(b)&&b;if(Be(b))gr=function(G){var J=h++;return u[J]=G,b(function(){p(J)}),J};else if(typeof process<"u"&&"[object process]"==={}.toString.call(process))gr=function(G){var J=h++;return u[J]=G,process.nextTick(function(){p(J)}),J};else if(function C(){if(!Re.postMessage||Re.importScripts)return!1;var G=!1,J=Re.onmessage;return Re.onmessage=function(){G=!0},Re.postMessage("","*"),Re.onmessage=J,G}()){var A="ms.rx.schedule"+Math.random();Re.addEventListener("message",function(G){"string"==typeof G.data&&G.data.substring(0,A.length)===A&&p(G.data.substring(A.length))},!1),gr=function(G){var J=h++;return u[J]=G,Re.postMessage(A+J,"*"),J}}else if(Re.MessageChannel){var X=new Re.MessageChannel;X.port1.onmessage=function(G){p(G.data)},gr=function(G){var J=h++;return u[J]=G,X.port2.postMessage(J),J}}else gr="document"in Re&&"onreadystatechange"in Re.document.createElement("script")?function(G){var J=Re.document.createElement("script"),ye=h++;return u[ye]=G,J.onreadystatechange=function(){p(ye),J.onreadystatechange=null,J.parentNode.removeChild(J),J=null},Re.document.documentElement.appendChild(J),ye}:function(G){var J=h++;return u[J]=G,Su(function(){p(J)},0),J}}();var Fm=function(h){function u(){h.call(this)}function d(C,A,k,X){return function(){C.setDisposable(zt._fixup(A(k,X)))}}function p(C){this._id=C,this.isDisposed=!1}function m(C){this._id=C,this.isDisposed=!1}return P(u,h),p.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Rt(this._id))},m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,ox(this._id))},u.prototype.schedule=function(C,A){var k=new _e,X=gr(d(k,A,this,C));return new Je(k,new p(X))},u.prototype._scheduleFuture=function(C,A,k){if(0===A)return this.schedule(C,k);var X=new _e,G=Su(d(X,k,this,C),A);return new Je(X,new m(G))},u.prototype.scheduleLongRunning=function(C,A){var k=Ot(Se);return gr(function b(C,A,k){return function(){A(C,k)}}(C,A,k)),k},u}(Ri),xn=Ri.default=Ri.async=new Fm,Hi=function(h){function u(d,p){this._scheduler=d,this._handler=p,this._recursiveOriginal=null,this._recursiveWrapper=null,h.call(this)}return P(u,h),u.prototype.schedule=function(d,p){return this._scheduler.schedule(d,this._wrap(p))},u.prototype._scheduleFuture=function(d,p,m){return this._scheduler.schedule(d,p,this._wrap(m))},u.prototype.now=function(){return this._scheduler.now()},u.prototype._clone=function(d){return new u(d,this._handler)},u.prototype._wrap=function(d){var p=this;return function(m,b){var C=L(d)(p._getRecursiveWrapper(m),b);return C===B?(p._handler(C.e)||Pt(C.e),je):Vt(C)}},u.prototype._getRecursiveWrapper=function(d){if(this._recursiveOriginal!==d){this._recursiveOriginal=d;var p=this._clone(d);p._recursiveOriginal=d,p._recursiveWrapper=p,this._recursiveWrapper=p}return this._recursiveWrapper},u.prototype.schedulePeriodic=function(d,p,m){var b=this,C=!1,A=new _e;return A.setDisposable(this._scheduler.schedulePeriodic(d,p,function(k){if(C)return null;var X=L(m)(k);return X===B?(C=!0,b._handler(X.e)||Pt(X.e),A.dispose(),null):X})),A},u}(Ri),Pi=pe.Notification=function(){function h(){}return h.prototype._accept=function(u,d,p){throw new be},h.prototype._acceptObserver=function(u,d,p){throw new be},h.prototype.accept=function(u,d,p){return u&&"object"==typeof u?this._acceptObserver(u):this._accept(u,d,p)},h.prototype.toObservable=function(u){var d=this;return Ee(u)||(u=Vi),new Yt(function(p){return u.schedule(d,function(m,b){b._acceptObserver(p),"N"===b.kind&&p.onCompleted()})})},h}(),Lm=function(h){function u(d){this.value=d,this.kind="N"}return P(u,h),u.prototype._accept=function(d){return d(this.value)},u.prototype._acceptObserver=function(d){return d.onNext(this.value)},u.prototype.toString=function(){return"OnNext("+this.value+")"},u}(Pi),ax=function(h){function u(d){this.error=d,this.kind="E"}return P(u,h),u.prototype._accept=function(d,p){return p(this.error)},u.prototype._acceptObserver=function(d){return d.onError(this.error)},u.prototype.toString=function(){return"OnError("+this.error+")"},u}(Pi),Ss=function(h){function u(){this.kind="C"}return P(u,h),u.prototype._accept=function(d,p,m){return m()},u.prototype._acceptObserver=function(d){return d.onCompleted()},u.prototype.toString=function(){return"OnCompleted()"},u}(Pi),Bm=Pi.createOnNext=function(h){return new Lm(h)},Um=Pi.createOnError=function(h){return new ax(h)},jm=Pi.createOnCompleted=function(){return new Ss},vi=pe.Observer=function(){};vi.prototype.toNotifier=function(){var h=this;return function(u){return u.accept(h)}},vi.prototype.asObserver=function(){var h=this;return new Tu(function(u){h.onNext(u)},function(u){h.onError(u)},function(){h.onCompleted()})},vi.prototype.checked=function(){return new lx(this)};var Ts=vi.create=function(h,u,d){return h||(h=Se),u||(u=Kn),d||(d=Se),new Tu(h,u,d)};vi.fromNotifier=function(h,u){var d=ke(h,u,1);return new Tu(function(p){return d(Bm(p))},function(p){return d(Um(p))},function(){return d(jm())})},vi.prototype.notifyOn=function(h){return new yn(h,this)},vi.prototype.makeSafe=function(h){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,h)};var Z,Te=pe.internals.AbstractObserver=function(h){function u(){this.isStopped=!1}return P(u,h),u.prototype.next=ce,u.prototype.error=ce,u.prototype.completed=ce,u.prototype.onNext=function(d){!this.isStopped&&this.next(d)},u.prototype.onError=function(d){this.isStopped||(this.isStopped=!0,this.error(d))},u.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},u.prototype.dispose=function(){this.isStopped=!0},u.prototype.fail=function(d){return!this.isStopped&&(this.isStopped=!0,this.error(d),!0)},u}(vi),Tu=pe.AnonymousObserver=function(h){function u(d,p,m){h.call(this),this._onNext=d,this._onError=p,this._onCompleted=m}return P(u,h),u.prototype.next=function(d){this._onNext(d)},u.prototype.error=function(d){this._onError(d)},u.prototype.completed=function(){this._onCompleted()},u}(Te),lx=function(h){function u(p){h.call(this),this._observer=p,this._state=0}P(u,h);var d=u.prototype;return d.onNext=function(p){this.checkAccess();var m=L(this._observer.onNext).call(this._observer,p);this._state=0,m===B&&Pt(m.e)},d.onError=function(p){this.checkAccess();var m=L(this._observer.onError).call(this._observer,p);this._state=2,m===B&&Pt(m.e)},d.onCompleted=function(){this.checkAccess();var p=L(this._observer.onCompleted).call(this._observer);this._state=2,p===B&&Pt(p.e)},d.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},u}(vi),Gi=pe.internals.ScheduledObserver=function(h){function u(C,A){h.call(this),this.scheduler=C,this.observer=A,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new ut}function b(C,A){var k;if(C.queue.length>0){k=C.queue.shift();var X=L(k)();if(X===B)return C.queue=[],C.hasFaulted=!0,Pt(X.e);A(C)}else C.isAcquired=!1}return P(u,h),u.prototype.next=function(C){this.queue.push(function d(C,A){return function(){C.onNext(A)}}(this.observer,C))},u.prototype.error=function(C){this.queue.push(function p(C,A){return function(){C.onError(A)}}(this.observer,C))},u.prototype.completed=function(){this.queue.push(function m(C){return function(){C.onCompleted()}}(this.observer))},u.prototype.ensureActive=function(){var C=!1;!this.hasFaulted&&this.queue.length>0&&(C=!this.isAcquired,this.isAcquired=!0),C&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,b))},u.prototype.dispose=function(){h.prototype.dispose.call(this),this.disposable.dispose()},u}(Te),yn=function(h){function u(d,p,m){h.call(this,d,p),this._cancel=m}return P(u,h),u.prototype.next=function(d){h.prototype.next.call(this,d),this.ensureActive()},u.prototype.error=function(d){h.prototype.error.call(this,d),this.ensureActive()},u.prototype.completed=function(){h.prototype.completed.call(this),this.ensureActive()},u.prototype.dispose=function(){h.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},u}(Gi),Ie=pe.Observable=function(){function u(){if(pe.config.longStackSupport&&Kt){var d=this._subscribe,p=L(Pt)(new Error).e;this.stack=p.stack.substring(p.stack.indexOf("\n")+1),this._subscribe=function h(d,p){return function(m){var b=m.onError;return m.onError=function(C){(function U(h,u){if(Kt&&u.stack&&"object"==typeof h&&null!==h&&h.stack&&-1===h.stack.indexOf($)){for(var d=[],p=u;p;p=p.source)p.stack&&d.unshift(p.stack);d.unshift(h.stack);var m=d.join("\n"+$+"\n");h.stack=function ae(h){for(var u=h.split("\n"),d=[],p=0,m=u.length;p<m;p++){var b=u[p];!le(b)&&!W(b)&&b&&d.push(b)}return d.join("\n")}(m)}})(C,d),b.call(m,C)},p.call(d,m)}}(this,d)}}return Z=u.prototype,u.isObservable=function(d){return d&&Be(d.subscribe)},Z.subscribe=Z.forEach=function(d,p,m){return this._subscribe("object"==typeof d?d:Ts(d,p,m))},Z.subscribeOnNext=function(d,p){return this._subscribe(Ts(typeof p<"u"?function(m){d.call(p,m)}:d))},Z.subscribeOnError=function(d,p){return this._subscribe(Ts(null,typeof p<"u"?function(m){d.call(p,m)}:d))},Z.subscribeOnCompleted=function(d,p){return this._subscribe(Ts(null,null,typeof p<"u"?function(){d.call(p)}:d))},u}(),Ce=pe.ObservableBase=function(h){function d(m,b){var C=b[0],A=b[1],k=L(A.subscribeCore).call(A,C);k===B&&!C.fail(B.e)&&Pt(B.e),C.setDisposable(function u(m){return m&&Be(m.dispose)?m:Be(m)?Ot(m):je}(k))}function p(){h.call(this)}return P(p,h),p.prototype._subscribe=function(m){var b=new so(m),C=[b,this];return xe.scheduleRequired()?xe.schedule(C,d):d(0,C),b},p.prototype.subscribeCore=ce,p}(Ie),vt=pe.FlatMapObservable=function(h){function u(p,m,b,C){this.resultSelector=Be(b)?b:null,this.selector=ke(Be(m)?m:function(){return m},C,3),this.source=p,h.call(this)}function d(p,m,b,C){this.i=0,this.selector=m,this.resultSelector=b,this.source=C,this.o=p,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this.selector,this.resultSelector,this))},P(d,Te),d.prototype._wrapResult=function(p,m,b){return this.resultSelector?p.map(function(C,A){return this.resultSelector(m,C,b,A)},this):p},d.prototype.next=function(p){var m=this.i++,b=L(this.selector)(p,m,this.source);if(b===B)return this.o.onError(b.e);qe(b)&&(b=Ht(b)),(Et(b)||Mt(b))&&(b=Ie.from(b)),this.o.onNext(this._wrapResult(b,p,m))},d.prototype.error=function(p){this.o.onError(p)},d.prototype.completed=function(){this.o.onCompleted()},u}(Ce),jo=pe.internals.Enumerable=function(){};function zi(h){this._s=h,this.isDisposed=!1}zi.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var Ul=function(h){function u(m){this.sources=m,h.call(this)}function d(m,b){if(!m.isDisposed){var C=L(m.e.next).call(m.e);if(C===B)return m.o.onError(C.e);if(C.done)return m.o.onCompleted();var A=C.value;qe(A)&&(A=Ht(A));var k=new _e;m.subscription.setDisposable(k),k.setDisposable(A.subscribe(new p(m,b)))}}function p(m,b){this._state=m,this._recurse=b,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(m){var b=new ut,C={isDisposed:!1,o:m,subscription:b,e:this.sources[Ue]()},A=xe.scheduleRecursive(C,d);return new On([b,A,new zi(C)])},P(p,Te),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.o.onError(m)},p.prototype.completed=function(){this._recurse(this._state)},u}(Ce);jo.prototype.concat=function(){return new Ul(this)};var Vm=function(h){function u(m){this.sources=m,h.call(this)}function d(m,b){if(!m.isDisposed){var C=L(m.e.next).call(m.e);if(C===B)return m.o.onError(C.e);if(C.done)return null!==m.lastError?m.o.onError(m.lastError):m.o.onCompleted();var A=C.value;qe(A)&&(A=Ht(A));var k=new _e;m.subscription.setDisposable(k),k.setDisposable(A.subscribe(new p(m,b)))}}function p(m,b){this._state=m,this._recurse=b,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(m){var b=new ut,C={isDisposed:!1,e:this.sources[Ue](),subscription:b,lastError:null,o:m},A=xe.scheduleRecursive(C,d);return new On([b,A,new zi(C)])},P(p,Te),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.lastError=m,this._recurse(this._state)},p.prototype.completed=function(){this._state.o.onCompleted()},u}(Ce);jo.prototype.catchError=function(){return new Vm(this)};var Xd=function(h){function u(p,m){this.v=p,this.c=m??-1}function d(p){this.v=p.v,this.l=p.c}return P(u,h),u.prototype[Ue]=function(){return new d(this)},d.prototype.next=function(){return 0===this.l?tt:(this.l>0&&this.l--,{done:!1,value:this.v})},u}(jo),Yd=jo.repeat=function(h,u){return new Xd(h,u)},Hm=function(h){function u(p,m,b){this.s=p,this.fn=m?ke(m,b,3):null}function d(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return P(u,h),u.prototype[Ue]=function(){return new d(this)},d.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:tt},u}(jo),Au=jo.of=function(h,u,d){return new Hm(h,u,d)},jl=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new yn(this._s,d))},u}(Ce);Z.observeOn=function(h){return new jl(this,h)};var Iu=function(h){function u(p,m){this.source=p,this._s=m,h.call(this)}function d(p,m){m[1].setDisposable(new Ir(p,m[0].subscribe(m[2])))}return P(u,h),u.prototype.subscribeCore=function(p){var m=new _e,b=new ut;return b.setDisposable(m),m.setDisposable(this._s.schedule([this.source,b,p],d)),b},u}(Ce);Z.subscribeOn=function(h){return new Iu(this,h)};var qd=function(h){function u(m,b){this._p=m,this._s=b,h.call(this)}function d(m,b){var C=b[0];C.onNext(b[1]),C.onCompleted()}function p(m,b){b[0].onError(b[1])}return P(u,h),u.prototype.subscribeCore=function(m){var b=new _e,C=this,A=this._p;return Be(A)&&(A=L(A)())===B?(m.onError(A.e),b):(A.then(function(k){b.setDisposable(C._s.schedule([m,k],d))},function(k){b.setDisposable(C._s.schedule([m,k],p))}),b)},u}(Ce),Ht=Ie.fromPromise=function(h,u){return u||(u=xn),new qd(h,u)};Z.toPromise=function(h){if(h||(h=pe.config.Promise),!h)throw new se("Promise type not provided nor in Rx.config.Promise");var u=this;return new h(function(d,p){var m;u.subscribe(function(b){m=b},p,function(){d(m)})})};var wt=function(h){function u(p){this.source=p,h.call(this)}function d(p){this.o=p,this.a=[],Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p))},P(d,Te),d.prototype.next=function(p){this.a.push(p)},d.prototype.error=function(p){this.o.onError(p)},d.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},u}(Ce);Z.toArray=function(){return new wt(this)},Ie.create=function(h,u){return new Yt(h,u)};var Mu=function(h){function u(d){this._f=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=L(this._f)();return p===B?Ms(p.e).subscribe(d):(qe(p)&&(p=Ht(p)),p.subscribe(d))},u}(Ce),Aa=Ie.defer=function(h){return new Mu(h)},$i=function(h){function u(m){this.scheduler=m,h.call(this)}function d(m,b){this.observer=m,this.scheduler=b}function p(m,b){return b.onCompleted(),je}return P(u,h),u.prototype.subscribeCore=function(m){return new d(m,this.scheduler).run()},d.prototype.run=function(){var m=this.observer;return this.scheduler===Vi?p(0,m):this.scheduler.schedule(m,p)},u}(Ce),Kd=new $i(Vi),Ia=Ie.empty=function(h){return Ee(h)||(h=Vi),h===Vi?Kd:new $i(h)},In=function(h){function u(p,m,b){this._iterable=p,this._fn=m,this._scheduler=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){var b=function $m(h){var u=h[Ue];if(!u&&"string"==typeof h)return new zm(h)[Ue]();if(!u&&h.length!==mt)return new Vo(h)[Ue]();if(!u)throw new TypeError("Object is not iterable");return h[Ue]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,k){var X=L(m.next).call(m);if(X===B)return p.onError(X.e);if(X.done)return p.onCompleted();var G=X.value;if(Be(b)&&(G=L(b)(G,A))===B)return p.onError(G.e);p.onNext(G),k(A+1)}}(p,b,this._fn))},u}(Ce),Gm=Math.pow(2,53)-1;function zm(h){this._s=h}function Zd(h){this._s=h,this._l=h.length,this._i=0}function Vo(h){this._a=h}function Ma(h){this._a=h,this._l=function Qd(h){var u=+h.length;return isNaN(u)?0:0!==u&&function Vl(h){return"number"==typeof h&&Re.isFinite(h)}(u)?(u=function Wm(h){var u=+h;return 0===u||isNaN(u)?u:u<0?-1:1}(u)*Math.floor(Math.abs(u)))<=0?0:u>Gm?Gm:u:u}(h),this._i=0}zm.prototype[Ue]=function(){return new Zd(this._s)},Zd.prototype[Ue]=function(){return this},Zd.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:tt},Vo.prototype[Ue]=function(){return new Ma(this._a)},Ma.prototype[Ue]=function(){return this},Ma.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:tt};var As=Ie.from=function(h,u,d,p){if(null==h)throw new Error("iterable cannot be null.");if(u&&!Be(u))throw new Error("mapFn when provided must be a function");if(u)var m=ke(u,d,2);return Ee(p)||(p=xe),new In(h,m,p)},Kr=function(h){function u(p,m){this._args=p,this._scheduler=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this._scheduler.scheduleRecursive(0,function d(p,m){var b=m.length;return function(A,k){A<b?(p.onNext(m[A]),k(A+1)):p.onCompleted()}}(p,this._args))},u}(Ce),Xm=Ie.fromArray=function(h,u){return Ee(u)||(u=xe),new Kr(h,u)},_t=function(h){function u(p,m,b,C,A){this._initialState=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._s=A,h.call(this)}function d(p,m){if(p.first)p.first=!1;else if(p.newState=L(p.self._itrFn)(p.newState),p.newState===B)return p.o.onError(p.newState.e);var b=L(p.self._cndFn)(p.newState);if(b===B)return p.o.onError(b.e);if(b){var C=L(p.self._resFn)(p.newState);if(C===B)return p.o.onError(C.e);p.o.onNext(C),m(p)}else p.o.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursive({o:p,self:this,first:!0,newState:this._initialState},d)},u}(Ce);function Ru(h,u){return Ee(h)||(h=xe),new Kr(u,h)}Ie.generate=function(h,u,d,p,m){return Ee(m)||(m=xe),new _t(h,u,d,p,m)},Ie.of=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return new Kr(u,xe)},Ie.ofWithScheduler=function(h){for(var u=arguments.length,d=new Array(u-1),p=1;p<u;p++)d[p-1]=arguments[p];return new Kr(d,h)},Ie.ofArrayChanges=function(h){if(!Array.isArray(h))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Yt(function(u){function d(p){for(var m=0,b=p.length;m<b;m++)u.onNext(p[m])}return Array.observe(h,d),function(){Array.unobserve(h,d)}})},Ie.ofObjectChanges=function(h){if(null==h)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Yt(function(u){function d(p){for(var m=0,b=p.length;m<b;m++)u.onNext(p[m])}return Object.observe(h,d),function(){Object.unobserve(h,d)}})};var cn=function(h){function u(){h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return je},u}(Ce),Hl=new cn,Ra=Ie.never=function(){return Hl},Pa=function(h){function u(p,m){this._o=p,this._keys=Object.keys(p),this._scheduler=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this._scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,k){if(A<b.length){var X=b[A];p.onNext([X,m[X]]),k(A+1)}else p.onCompleted()}}(p,this._o,this._keys))},u}(Ce);Ie.pairs=function(h,u){return u||(u=xe),new Pa(h,u)};var Ym=function(h){function u(p,m,b){this.start=p,this.rangeCount=m,this.scheduler=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,k){A<m?(b.onNext(p+A),k(A+1)):b.onCompleted()}}(this.start,this.rangeCount,p))},u}(Ce);Ie.range=function(h,u,d){return Ee(d)||(d=xe),new Ym(h,u,d)};var qm=function(h){function u(d,p,m){this.value=d,this.repeatCount=p??-1,this.scheduler=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return new Jd(d,this).run()},u}(Ce);function Jd(h,u){this.observer=h,this.parent=u}Jd.prototype.run=function(){var h=this.observer,u=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function d(p,m){if((-1===p||p>0)&&(h.onNext(u),p>0&&p--),0===p)return h.onCompleted();m(p)})},Ie.repeat=function(h,u,d){return Ee(d)||(d=xe),new qm(h,u,d)};var Is=function(h){function u(p,m){this._value=p,this._scheduler=m,h.call(this)}function d(p,m){var C=m[1];return C.onNext(m[0]),C.onCompleted(),je}return P(u,h),u.prototype.subscribeCore=function(p){var m=[this._value,p];return this._scheduler===Vi?d(0,m):this._scheduler.schedule(m,d)},u}(Ce),ux=(Ie.return=Ie.just=function(h,u){return Ee(u)||(u=Vi),new Is(h,u)},function(h){function u(p,m){this._error=p,this._scheduler=m,h.call(this)}function d(p,m){return m[1].onError(m[0]),je}return P(u,h),u.prototype.subscribeCore=function(p){var m=[this._error,p];return this._scheduler===Vi?d(0,m):this._scheduler.schedule(m,d)},u}(Ce)),Ms=Ie.throw=function(h,u){return Ee(u)||(u=Vi),new ux(h,u)},Rr=function(h){function u(d,p){this._resFn=d,this._obsFn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=je,m=L(this._resFn)();if(m===B)return new Je(Ms(m.e).subscribe(d),p);m&&(p=m);var b=L(this._obsFn)(m);return new Je(b===B?Ms(b.e).subscribe(d):b.subscribe(d),p)},u}(Ce);function Zr(h,u){return h.amb(u)}Ie.using=function(h,u){return new Rr(h,u)},Z.amb=function(h){var u=this;return new Yt(function(d){var p,m="L",b="R",C=new _e,A=new _e;function k(){p||(p=m,A.dispose())}function X(){p||(p=b,C.dispose())}qe(h)&&(h=Ht(h));var G=Ts(function(ye){k(),p===m&&d.onNext(ye)},function(ye){k(),p===m&&d.onError(ye)},function(){k(),p===m&&d.onCompleted()}),J=Ts(function(ye){X(),p===b&&d.onNext(ye)},function(ye){X(),p===b&&d.onError(ye)},function(){X(),p===b&&d.onCompleted()});return C.setDisposable(u.subscribe(G)),A.setDisposable(h.subscribe(J)),new Je(C,A)})},Ie.amb=function(){var u,h=Ra();if(Array.isArray(arguments[0]))u=arguments[0];else{var d=arguments.length;u=new Array(u);for(var p=0;p<d;p++)u[p]=arguments[p]}for(p=0,d=u.length;p<d;p++)h=Zr(h,u[p]);return h};var bn=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new _e,m=new ut;return m.setDisposable(p),p.setDisposable(this.source.subscribe(new Gl(d,m,this._fn))),m},u}(Ce),Gl=function(h){function u(d,p,m){this._o=d,this._s=p,this._fn=m,h.call(this)}return P(u,h),u.prototype.next=function(d){this._o.onNext(d)},u.prototype.completed=function(){return this._o.onCompleted()},u.prototype.error=function(d){var p=L(this._fn)(d);if(p===B)return this._o.onError(p.e);qe(p)&&(p=Ht(p));var m=new _e;this._s.setDisposable(m),m.setDisposable(p.subscribe(this._o))},u}(Te);Z.catch=function(h){return Be(h)?new bn(this,h):Pu([this,h])};var Pu=Ie.catch=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}return Au(h).catchError()};Z.combineLatest=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return Array.isArray(u[0])?u[0].unshift(this):u.unshift(this),Qr.apply(this,u)};var Ou=function(h){function u(d,p){this._params=d,this._cb=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){for(var p=this._params.length,m=new Array(p),b={hasValue:yt(p,vr),hasValueAll:!1,isDone:yt(p,vr),values:new Array(p)},C=0;C<p;C++){var A=this._params[C],k=new _e;m[C]=k,qe(A)&&(A=Ht(A)),k.setDisposable(A.subscribe(new ef(d,C,this._cb,b)))}return new On(m)},u}(Ce),ef=function(h){function u(p,m,b,C){this._o=p,this._i=m,this._cb=b,this._state=C,h.call(this)}return P(u,h),u.prototype.next=function(p){if(this._state.values[this._i]=p,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(gn))){var m=L(this._cb).apply(null,this._state.values);if(m===B)return this._o.onError(m.e);this._o.onNext(m)}else this._state.isDone.filter(function d(p){return function(m,b){return b!==p}}(this._i)).every(gn)&&this._o.onCompleted()},u.prototype.error=function(p){this._o.onError(p)},u.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(gn)&&this._o.onCompleted()},u}(Te),Qr=Ie.combineLatest=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Be(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new Ou(u,p)};Z.concat=function(){for(var h=[],u=0,d=arguments.length;u<d;u++)h.push(arguments[u]);return h.unshift(this),Jr.apply(null,h)};var Oa=function(h){function u(d,p){this._s=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._s.o.onNext(d)},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.i++,this._fn(this._s)},u}(Te),Km=function(h){function u(p){this._sources=p,h.call(this)}function d(p,m){if(!p.disposable.isDisposed){if(p.i===p.sources.length)return p.o.onCompleted();var b=p.sources[p.i];qe(b)&&(b=Ht(b));var C=new _e;p.subscription.setDisposable(C),C.setDisposable(b.subscribe(new Oa(p,m)))}}return P(u,h),u.prototype.subscribeCore=function(p){var m=new ut,b=Ot(Se),A=Vi.scheduleRecursive({o:p,i:0,subscription:m,disposable:b,sources:this._sources},d);return new On([m,b,A])},u}(Ce),Jr=Ie.concat=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{h=new Array(arguments.length);for(var u=0,d=arguments.length;u<d;u++)h[u]=arguments[u]}return new Km(h)};Z.concatAll=function(){return this.merge(1)};var Zm=function(h){function u(d,p){this.source=d,this.maxConcurrent=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new it;return p.add(this.source.subscribe(new tf(d,this.maxConcurrent,p))),p},u}(Ce),tf=function(h){function u(p,m,b){this.o=p,this.max=m,this.g=b,this.done=!1,this.q=[],this.activeCount=0,h.call(this)}function d(p,m){this.parent=p,this.sad=m,h.call(this)}return P(u,h),u.prototype.handleSubscribe=function(p){var m=new _e;this.g.add(m),qe(p)&&(p=Ht(p)),m.setDisposable(p.subscribe(new d(this,m)))},u.prototype.next=function(p){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(p)):this.q.push(p)},u.prototype.error=function(p){this.o.onError(p)},u.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},P(d,h),d.prototype.next=function(p){this.parent.o.onNext(p)},d.prototype.error=function(p){this.parent.o.onError(p)},d.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},u}(Te);Z.merge=function(h){return"number"!=typeof h?nf(this,h):new Zm(this,h)};var nf=Ie.merge=function(){var h,d,u=[],p=arguments.length;if(arguments[0])if(Ee(arguments[0]))for(h=arguments[0],d=1;d<p;d++)u.push(arguments[d]);else for(h=Vi,d=0;d<p;d++)u.push(arguments[d]);else for(h=Vi,d=1;d<p;d++)u.push(arguments[d]);return Array.isArray(u[0])&&(u=u[0]),Ru(h,u).mergeAll()},Pr=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new it,m=new _e;return p.add(m),m.setDisposable(this.source.subscribe(new Qm(d,p))),p},u}(Ce),Qm=function(h){function u(p,m){this.o=p,this.g=m,this.done=!1,h.call(this)}function d(p,m){this.parent=p,this.sad=m,h.call(this)}return P(u,h),u.prototype.next=function(p){var m=new _e;this.g.add(m),qe(p)&&(p=Ht(p)),m.setDisposable(p.subscribe(new d(this,m)))},u.prototype.error=function(p){this.o.onError(p)},u.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},P(d,h),d.prototype.next=function(p){this.parent.o.onNext(p)},d.prototype.error=function(p){this.parent.o.onError(p)},d.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},u}(Te);Z.mergeAll=function(){return new Pr(this)};var zl=pe.CompositeError=function(h){this.innerErrors=h,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};zl.prototype=Object.create(Error.prototype),zl.prototype.name="CompositeError";var Jn=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new it,m=new _e,b={isStopped:!1,errors:[],o:d};return p.add(m),m.setDisposable(this.source.subscribe(new Oi(p,b))),p},u}(Ce),Oi=function(h){function u(m,b){this._group=m,this._state=b,h.call(this)}function d(m,b){0===b.length?m.onCompleted():m.onError(1===b.length?b[0]:new zl(b))}function p(m,b,C){this._inner=m,this._group=b,this._state=C,h.call(this)}return P(u,h),u.prototype.next=function(m){var b=new _e;this._group.add(b),qe(m)&&(m=Ht(m)),b.setDisposable(m.subscribe(new p(b,this._group,this._state)))},u.prototype.error=function(m){this._state.errors.push(m),this._state.isStopped=!0,1===this._group.length&&d(this._state.o,this._state.errors)},u.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&d(this._state.o,this._state.errors)},P(p,h),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.errors.push(m),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&d(this._state.o,this._state.errors)},p.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&d(this._state.o,this._state.errors)},u}(Te);Ie.mergeDelayError=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}var p=Ru(null,h);return new Jn(p)},Z.onErrorResumeNext=function(h){if(!h)throw new Error("Second observable is required");return Ci([this,h])};var En=function(h){function u(p){this.sources=p,h.call(this)}function d(p,m){if(p.pos<p.sources.length){var b=p.sources[p.pos++];qe(b)&&(b=Ht(b));var C=new _e;p.subscription.setDisposable(C),C.setDisposable(b.subscribe(new _i(p,m)))}else p.o.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){var m=new ut,C=Vi.scheduleRecursive({pos:0,subscription:m,o:p,sources:this.sources},d);return new Je(m,C)},u}(Ce),_i=function(h){function u(d,p){this._state=d,this._recurse=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._state.o.onNext(d)},u.prototype.error=function(){this._recurse(this._state)},u.prototype.completed=function(){this._recurse(this._state)},u}(Te),Ci=Ie.onErrorResumeNext=function(){var h=[];if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}return new En(h)},Ho=function(h){function u(d,p){this._s=d,this._o=qe(p)?Ht(p):p,this._open=!1,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new _e;p.setDisposable(this._s.subscribe(new Wi(d,this))),qe(this._o)&&(this._o=Ht(this._o));var m=new _e;return m.setDisposable(this._o.subscribe(new es(d,this,m))),new Je(p,m)},u}(Ce),Wi=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},u}(Te),es=function(h){function u(d,p,m){this._o=d,this._p=p,this._r=m,h.call(this)}return P(u,h),u.prototype.next=function(){this._p._open=!0,this._r.dispose()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=function(){this._r.dispose()},u}(Te);Z.skipUntil=function(h){return new Ho(this,h)};var He=function(h){function u(m){this.source=m,h.call(this)}function d(m,b){this.o=m,this.inner=b,this.stopped=!1,this.latest=0,this.hasLatest=!1,Te.call(this)}function p(m,b){this.parent=m,this.id=b,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(m){var b=new ut,C=this.source.subscribe(new d(m,b));return new Je(C,b)},P(d,Te),d.prototype.next=function(m){var b=new _e,C=++this.latest;this.hasLatest=!0,this.inner.setDisposable(b),qe(m)&&(m=Ht(m)),b.setDisposable(m.subscribe(new p(this,C)))},d.prototype.error=function(m){this.o.onError(m)},d.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},P(p,Te),p.prototype.next=function(m){this.parent.latest===this.id&&this.parent.o.onNext(m)},p.prototype.error=function(m){this.parent.latest===this.id&&this.parent.o.onError(m)},p.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},u}(Ce);Z.switch=Z.switchLatest=function(){return new He(this)};var $t=function(h){function u(d,p){this.source=d,this.other=qe(p)?Ht(p):p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return new Je(this.source.subscribe(d),this.other.subscribe(new Hn(d)))},u}(Ce),Hn=function(h){function u(d){this._o=d,h.call(this)}return P(u,h),u.prototype.next=function(){this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=Se,u}(Te);Z.takeUntil=function(h){return new $t(this,h)};var mr=function(h){function u(d,p,m){this._s=d,this._ss=p,this._cb=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){for(var p=this._ss.length,m={hasValue:yt(p,vr),hasValueAll:!1,values:new Array(p)},b=this._ss.length,C=new Array(b+1),A=0;A<b;A++){var k=this._ss[A],X=new _e;qe(k)&&(k=Ht(k)),X.setDisposable(k.subscribe(new no(d,A,m))),C[A]=X}var G=new _e;return G.setDisposable(this._s.subscribe(new yi(d,this._cb,m))),C[b]=G,new On(C)},u}(Ce),no=function(h){function u(d,p,m){this._o=d,this._i=p,this._state=m,h.call(this)}return P(u,h),u.prototype.next=function(d){this._state.values[this._i]=d,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(gn)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=Se,u}(Te),yi=function(h){function u(d,p,m){this._o=d,this._cb=p,this._state=m,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=[d].concat(this._state.values);if(this._state.hasValueAll){var m=L(this._cb).apply(null,p);if(m===B)return this._o.onError(m.e);this._o.onNext(m)}},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Be(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new mr(this,u,p)};var Go=function(h){function u(d,p){this._s=d,this._cb=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){for(var p=this._s.length,m=new Array(p),b=yt(p,vr),C=yt(p,zo),A=0;A<p;A++){var k=this._s[A],X=new _e;m[A]=X,qe(k)&&(k=Ht(k)),X.setDisposable(k.subscribe(new Wn(d,A,this,C,b)))}return new On(m)},u}(Ce),Wn=function(h){function u(b,C,A,k,X){this._o=b,this._i=C,this._p=A,this._q=k,this._d=X,h.call(this)}function d(b){return b.length>0}function p(b){return b.shift()}return P(u,h),u.prototype.next=function(b){if(this._q[this._i].push(b),this._q.every(d)){var C=this._q.map(p),A=L(this._p._cb).apply(null,C);if(A===B)return this._o.onError(A.e);this._o.onNext(A)}else this._d.filter(function m(b){return function(C,A){return A!==b}}(this._i)).every(gn)&&this._o.onCompleted()},u.prototype.error=function(b){this._o.onError(b)},u.prototype.completed=function(){this._d[this._i]=!0,this._d.every(gn)&&this._o.onCompleted()},u}(Te);function vr(){return!1}function zo(){return[]}Z.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Be(u[h-1])?u.pop():is;Array.isArray(u[0])&&(u=u[0]);var m=this;return u.unshift(m),new Go(u,p)},Ie.zip=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];Array.isArray(u[0])&&(u=Be(u[1])?u[0].concat(u[1]):u[0]);var p=u.shift();return p.zip.apply(p,u)};var Xt=function(h){function u(d,p){this.sources=d,this._cb=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){for(var p=this.sources,m=p.length,b=new Array(m),C={q:yt(m,zo),done:yt(m,vr),cb:this._cb,o:d},A=0;A<m;A++)X=void 0,G=void 0,X=p[k=A],G=new _e,(Et(X)||Mt(X))&&(X=As(X)),b[k]=G,G.setDisposable(X.subscribe(new Nu(C,k)));var k,X,G;return new On(b)},u}(Ce),Nu=function(h){function u(b,C){this._s=b,this._i=C,h.call(this)}function d(b){return b.length>0}function p(b){return b.shift()}return P(u,h),u.prototype.next=function(b){if(this._s.q[this._i].push(b),this._s.q.every(d)){var C=this._s.q.map(p),A=L(this._s.cb).apply(null,C);if(A===B)return this._s.o.onError(A.e);this._s.o.onNext(A)}else this._s.done.filter(function m(b){return function(C,A){return A!==b}}(this._i)).every(gn)&&this._s.o.onCompleted()},u.prototype.error=function(b){this._s.o.onError(b)},u.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(gn)&&this._s.o.onCompleted()},u}(Te);function rf(h){return h.length>0}Z.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Be(u[h-1])?u.pop():is,m=this;return u.unshift(m),new Xt(u,p)},Z.asObservable=function(){return new Yt(function Na(h){return function(d){return h.subscribe(d)}}(this),this)},Z.bufferWithCount=Z.bufferCount=function(h,u){return"number"!=typeof u&&(u=h),this.windowWithCount(h,u).flatMap(rs).filter(rf)};var $o=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new bi(d))},u}(Ce),bi=function(h){function u(d){this._o=d,h.call(this)}return P(u,h),u.prototype.next=function(d){d.accept(this._o)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.dematerialize=function(){return new $o(this)};var ka=function(h){function u(d,p,m){this.source=d,this.keyFn=p,this.comparer=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Wo(d,this.keyFn,this.comparer))},u}(Ce),Wo=function(h){function u(d,p,m){this.o=d,this.keyFn=p,this.comparer=m,this.hasCurrentKey=!1,this.currentKey=null,h.call(this)}return P(u,h),u.prototype.next=function(d){var m,p=d;return Be(this.keyFn)&&(p=L(this.keyFn)(d))===B?this.o.onError(p.e):this.hasCurrentKey&&(m=L(this.comparer)(this.currentKey,p))===B?this.o.onError(m.e):void((!this.hasCurrentKey||!m)&&(this.hasCurrentKey=!0,this.currentKey=p,this.o.onNext(d)))},u.prototype.error=function(d){this.o.onError(d)},u.prototype.completed=function(){this.o.onCompleted()},u}(Te);Z.distinctUntilChanged=function(h,u){return u||(u=kt),new ka(this,h,u)};var Or=function(h){function u(p,m,b,C){this.source=p,this._oN=m,this._oE=b,this._oC=C,h.call(this)}function d(p,m){this.o=p,this.t=!m._oN||Be(m._oN)?Ts(m._oN||Se,m._oE||Se,m._oC||Se):m._oN,this.isStopped=!1,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this))},P(d,Te),d.prototype.next=function(p){var m=L(this.t.onNext).call(this.t,p);m===B&&this.o.onError(m.e),this.o.onNext(p)},d.prototype.error=function(p){var m=L(this.t.onError).call(this.t,p);if(m===B)return this.o.onError(m.e);this.o.onError(p)},d.prototype.completed=function(){var p=L(this.t.onCompleted).call(this.t);if(p===B)return this.o.onError(p.e);this.o.onCompleted()},u}(Ce);Z.do=Z.tap=Z.doAction=function(h,u,d){return new Or(this,h,u,d)},Z.doOnNext=Z.tapOnNext=function(h,u){return this.tap(typeof u<"u"?function(d){h.call(u,d)}:h)},Z.doOnError=Z.tapOnError=function(h,u){return this.tap(Se,typeof u<"u"?function(d){h.call(u,d)}:h)},Z.doOnCompleted=Z.tapOnCompleted=function(h,u){return this.tap(Se,null,typeof u<"u"?function(){h.call(u)}:h)};var Fa=function(h){function u(p,m,b){this.source=p,this._fn=ke(m,b,0),h.call(this)}function d(p,m){this.isDisposed=!1,this._s=p,this._fn=m}return P(u,h),u.prototype.subscribeCore=function(p){var m=L(this.source.subscribe).call(this.source,p);return m===B&&(this._fn(),Pt(m.e)),new d(m,this._fn)},d.prototype.dispose=function(){if(!this.isDisposed){var p=L(this._s.dispose).call(this._s);this._fn(),p===B&&Pt(p.e)}},u}(Ce);Z.finally=function(h,u){return new Fa(this,h,u)};var sf=function(h){function u(p){this.source=p,h.call(this)}function d(p){this.o=p,this.isStopped=!1}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p))},d.prototype.onNext=Se,d.prototype.onError=function(p){this.isStopped||(this.isStopped=!0,this.o.onError(p))},d.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},d.prototype.dispose=function(){this.isStopped=!0},d.prototype.fail=function(p){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(p),!0)},u}(Ce);Z.ignoreElements=function(){return new sf(this)};var Nn=function(h){function u(d,p){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new hx(d))},u}(Ce),hx=function(h){function u(d){this._o=d,h.call(this)}return P(u,h),u.prototype.next=function(d){this._o.onNext(Bm(d))},u.prototype.error=function(d){this._o.onNext(Um(d)),this._o.onCompleted()},u.prototype.completed=function(){this._o.onNext(jm()),this._o.onCompleted()},u}(Te);Z.materialize=function(){return new Nn(this)},Z.repeat=function(h){return Yd(this,h).concat()},Z.retry=function(h){return Yd(this,h).catchError()};var ku=function(h){function u(p){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,p.isDisposed=!0)}}}function d(p,m){this.source=p,this._notifier=m,h.call(this)}return P(d,h),d.prototype.subscribeCore=function(p){var m=new Fn,b=new Fn,A=this._notifier(m).subscribe(b),k=this.source["@@iterator"](),X={isDisposed:!1},J=new ut,ye=xe.scheduleRecursive(null,function(rt,Xe){if(!X.isDisposed){var ct=k.next();if(ct.done)return void p.onCompleted();var dt=ct.value;qe(dt)&&(dt=Ht(dt));var Ke=new _e,kn=new _e;J.setDisposable(new Je(kn,Ke)),Ke.setDisposable(dt.subscribe(function(Dn){p.onNext(Dn)},function(Dn){kn.setDisposable(b.subscribe(Xe,function(Uv){p.onError(Uv)},function(){p.onCompleted()})),m.onNext(Dn),Ke.dispose()},function(){p.onCompleted()}))}});return new On([A,J,ye,u(X)])},d}(Ce);function $l(h){return{"@@iterator":function(){return{next:function(){return{done:!1,value:h}}}}}}Z.retryWhen=function(h){return new ku($l(this),h)};var Wl=function(h){function u(p){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,p.isDisposed=!0)}}}function d(p,m){this.source=p,this._notifier=m,h.call(this)}return P(d,h),d.prototype.subscribeCore=function(p){var m=new Fn,b=new Fn,A=this._notifier(m).subscribe(b),k=this.source["@@iterator"](),X={isDisposed:!1},J=new ut,ye=xe.scheduleRecursive(null,function(rt,Xe){if(!X.isDisposed){var ct=k.next();if(ct.done)return void p.onCompleted();var dt=ct.value;qe(dt)&&(dt=Ht(dt));var Ke=new _e,kn=new _e;J.setDisposable(new Je(kn,Ke)),Ke.setDisposable(dt.subscribe(function(Dn){p.onNext(Dn)},function(Dn){p.onError(Dn)},function(){kn.setDisposable(b.subscribe(Xe,function(Dn){p.onError(Dn)},function(){p.onCompleted()})),m.onNext(null),Ke.dispose()}))}});return new On([A,J,ye,u(X)])},d}(Ce);Z.repeatWhen=function(h){return new Wl($l(this),h)};var Xl=function(h){function u(d,p,m,b){this.source=d,this.accumulator=p,this.hasSeed=m,this.seed=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Xo(d,this))},u}(Ce),Xo=function(h){function u(d,p){this._o=d,this._p=p,this._fn=p.accumulator,this._hs=p.hasSeed,this._s=p.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(!this._hv&&(this._hv=!0),this._ha?this._a=L(this._fn)(this._a,d,this._i,this._p):(this._a=this._hs?L(this._fn)(this._s,d,this._i,this._p):d,this._ha=!0),this._a===B)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},u}(Te);Z.scan=function(){var u,h=!1,d=arguments[0];return 2===arguments.length&&(h=!0,u=arguments[1]),new Xl(this,d,h,u)};var Di=function(h){function u(d,p){this.source=d,this._c=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new dx(d,this._c))},u}(Ce),dx=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return P(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._o.onNext(this._q.shift())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.skipLast=function(h){if(h<0)throw new fe;return new Di(this,h)},Z.startWith=function(){var u,d=0;arguments.length&&Ee(arguments[0])?(u=arguments[0],d=1):u=Vi;for(var p=[],m=d,b=arguments.length;m<b;m++)p.push(arguments[m]);return Jr.apply(null,[Xm(p,u),this])};var Xi=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return P(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},u}(Te);Z.takeLast=function(h){if(h<0)throw new fe;var u=this;return new Yt(function(d){return u.subscribe(new Xi(d,h))},u)};var _r=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return P(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},u}(Te);function Yl(h,u,d){var p=ke(u,d,3);return h.map(function(m,b){var C=p(m,b,h);return qe(C)&&(C=Ht(C)),(Et(C)||Mt(C))&&(C=As(C)),C}).concatAll()}Z.takeLastBuffer=function(h){if(h<0)throw new fe;var u=this;return new Yt(function(d){return u.subscribe(new _r(d,h))},u)},Z.windowWithCount=Z.windowCount=function(h,u){var d=this;if(+h||(h=0),Math.abs(h)===1/0&&(h=0),h<=0)throw new fe;if(null==u&&(u=h),+u||(u=0),Math.abs(u)===1/0&&(u=0),u<=0)throw new fe;return new Yt(function(p){var m=new _e,b=new Lt(m),C=0,A=[];function k(){var X=new Fn;A.push(X),p.onNext(nt(X,b))}return k(),m.setDisposable(d.subscribe(function(X){for(var G=0,J=A.length;G<J;G++)A[G].onNext(X);var ye=C-h+1;ye>=0&&ye%u==0&&A.shift().onCompleted(),++C%u==0&&k()},function(X){for(;A.length>0;)A.shift().onError(X);p.onError(X)},function(){for(;A.length>0;)A.shift().onCompleted();p.onCompleted()})),b},d)},Z.selectConcat=Z.concatMap=function(h,u,d){return Be(h)&&Be(u)?this.concatMap(function(p,m){var b=h(p,m);return qe(b)&&(b=Ht(b)),(Et(b)||Mt(b))&&(b=As(b)),b.map(function(C,A){return u(p,C,m,A)})}):Be(h)?Yl(this,h,d):Yl(this,function(){return h})},Z.concatMapObserver=Z.selectConcatObserver=function(h,u,d,p){var m=this,b=ke(h,p,2),C=ke(u,p,1),A=ke(d,p,0);return new Yt(function(k){var X=0;return m.subscribe(function(G){var J;try{J=b(G,X++)}catch(ye){return void k.onError(ye)}qe(J)&&(J=Ht(J)),k.onNext(J)},function(G){var J;try{J=C(G)}catch(ye){return void k.onError(ye)}qe(J)&&(J=Ht(J)),k.onNext(J),k.onCompleted()},function(){var G;try{G=A()}catch(J){return void k.onError(J)}qe(G)&&(G=Ht(G)),k.onNext(G),k.onCompleted()})},this).concatAll()};var La=function(h){function u(d,p){this._o=d,this._d=p,this._f=!1,h.call(this)}return P(u,h),u.prototype.next=function(d){this._f=!0,this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},u}(Te);function tr(h){this.comparer=h,this.set=[]}Z.defaultIfEmpty=function(h){var u=this;return h===mt&&(h=null),new Yt(function(d){return u.subscribe(new La(d,h))},u)},tr.prototype.push=function(h){var u=-1===function ql(h,u,d){for(var p=0,m=h.length;p<m;p++)if(d(h[p],u))return p;return-1}(this.set,h,this.comparer);return u&&this.set.push(h),u};var Jm=function(h){function u(d,p,m){this.source=d,this._keyFn=p,this._cmpFn=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new fx(d,this._keyFn,this._cmpFn))},u}(Ce),fx=function(h){function u(d,p,m){this._o=d,this._keyFn=p,this._h=new tr(m),h.call(this)}return P(u,h),u.prototype.next=function(d){var p=d;if(Be(this._keyFn)&&(p=L(this._keyFn)(d))===B)return this._o.onError(p.e);this._h.push(p)&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.distinct=function(h,u){return u||(u=kt),new Jm(this,h,u)},Z.groupBy=function(h,u){return this.groupByUntil(h,u,Ra)},Z.groupByUntil=function(h,u,d){var p=this;return new Yt(function(m){var b=new ro,C=new it,A=new Lt(C),k=function(X){return function(G){G.onError(X)}};return C.add(p.subscribe(function(X){var G=L(h)(X);if(G===B)return b.forEach(k(G.e)),m.onError(G.e);var J=!1,ye=b.get(G);if(ye===mt&&(ye=new Fn,b.set(G,ye),J=!0),J){var rt=new eh(G,ye,A),Xe=new eh(G,ye),ct=L(d)(Xe);if(ct===B)return b.forEach(k(ct.e)),m.onError(ct.e);m.onNext(rt);var dt=new _e;C.add(dt),dt.setDisposable(ct.take(1).subscribe(Se,function(kn){b.forEach(k(kn)),m.onError(kn)},function(){b.delete(G)&&ye.onCompleted(),C.remove(dt)}))}var Ke=X;if(Be(u)&&(Ke=L(u)(X))===B)return b.forEach(k(Ke.e)),m.onError(Ke.e);ye.onNext(Ke)},function(X){b.forEach(k(X)),m.onError(X)},function(){b.forEach(function(X){X.onCompleted()}),m.onCompleted()})),A},p)};var af=function(h){function u(m,b,C){this.source=m,this.selector=ke(b,C,3),h.call(this)}function p(m,b,C){this.o=m,this.selector=b,this.source=C,this.i=0,Te.call(this)}return P(u,h),u.prototype.internalMap=function(m,b){return new u(this.source,function d(m,b){return function(C,A,k){return m.call(this,b.selector(C,A,k),A,k)}}(m,this),b)},u.prototype.subscribeCore=function(m){return this.source.subscribe(new p(m,this.selector,this))},P(p,Te),p.prototype.next=function(m){var b=L(this.selector)(m,this.i++,this.source);if(b===B)return this.o.onError(b.e);this.o.onNext(b)},p.prototype.error=function(m){this.o.onError(m)},p.prototype.completed=function(){this.o.onCompleted()},u}(Ce);function ev(h,u){return function(p){for(var m=p,b=0;b<u;b++){var C=m[h[b]];if(!(typeof C<"u"))return mt;m=C}return m}}Z.map=Z.select=function(h,u){var d="function"==typeof h?h:function(){return h};return this instanceof af?this.internalMap(d,u):new af(this,d,u)},Z.pluck=function(){var h=arguments.length,u=new Array(h);if(0===h)throw new Error("List of properties cannot be empty.");for(var d=0;d<h;d++)u[d]=arguments[d];return this.map(ev(u,h))},Z.flatMap=Z.selectMany=Z.mergeMap=function(h,u,d){return new vt(this,h,u,d).mergeAll()},Z.flatMapObserver=Z.selectManyObserver=function(h,u,d,p){var m=this;return new Yt(function(b){var C=0;return m.subscribe(function(A){var k;try{k=h.call(p,A,C++)}catch(X){return void b.onError(X)}qe(k)&&(k=Ht(k)),b.onNext(k)},function(A){var k;try{k=u.call(p,A)}catch(X){return void b.onError(X)}qe(k)&&(k=Ht(k)),b.onNext(k),b.onCompleted()},function(){var A;try{A=d.call(p)}catch(k){return void b.onError(k)}qe(A)&&(A=Ht(A)),b.onNext(A),b.onCompleted()})},m).mergeAll()},Z.flatMapLatest=Z.switchMap=function(h,u,d){return new vt(this,h,u,d).switchLatest()};var px=function(h){function u(p,m){this.source=p,this._count=m,h.call(this)}function d(p,m){this._o=p,this._r=m,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this._count))},P(d,Te),d.prototype.next=function(p){this._r<=0?this._o.onNext(p):this._r--},d.prototype.error=function(p){this._o.onError(p)},d.prototype.completed=function(){this._o.onCompleted()},u}(Ce);Z.skip=function(h){if(h<0)throw new fe;return new px(this,h)};var gx=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new mx(d,this))},u}(Ce),mx=function(h){function u(d,p){this._o=d,this._p=p,this._i=0,this._r=!1,h.call(this)}return P(u,h),u.prototype.next=function(d){if(!this._r){var p=L(this._p._fn)(d,this._i++,this._p);if(p===B)return this._o.onError(p.e);this._r=!p}this._r&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.skipWhile=function(h,u){var d=ke(h,u,3);return new gx(this,d)};var vx=function(h){function u(p,m){this.source=p,this._count=m,h.call(this)}function d(p,m){this._o=p,this._c=m,this._r=m,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this._count))},P(d,Te),d.prototype.next=function(p){this._r-- >0&&(this._o.onNext(p),this._r<=0&&this._o.onCompleted())},d.prototype.error=function(p){this._o.onError(p)},d.prototype.completed=function(){this._o.onCompleted()},u}(Ce);Z.take=function(h,u){if(h<0)throw new fe;return 0===h?Ia(u):new vx(this,h)};var _x=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new yx(d,this))},u}(Ce),yx=function(h){function u(d,p){this._o=d,this._p=p,this._i=0,this._r=!0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(this._r&&(this._r=L(this._p._fn)(d,this._i++,this._p),this._r===B))return this._o.onError(this._r.e);this._r?this._o.onNext(d):this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.takeWhile=function(h,u){var d=ke(h,u,3);return new _x(this,d)};var tv=function(h){function u(m,b,C){this.source=m,this.predicate=ke(b,C,3),h.call(this)}function p(m,b,C){this.o=m,this.predicate=b,this.source=C,this.i=0,Te.call(this)}return P(u,h),u.prototype.subscribeCore=function(m){return this.source.subscribe(new p(m,this.predicate,this))},u.prototype.internalFilter=function(m,b){return new u(this.source,function d(m,b){return function(C,A,k){return b.predicate(C,A,k)&&m.call(this,C,A,k)}}(m,this),b)},P(p,Te),p.prototype.next=function(m){var b=L(this.predicate)(m,this.i++,this.source);if(b===B)return this.o.onError(b.e);b&&this.o.onNext(m)},p.prototype.error=function(m){this.o.onError(m)},p.prototype.completed=function(){this.o.onCompleted()},u}(Ce);Z.filter=Z.where=function(h,u){return this instanceof tv?this.internalFilter(h,u):new tv(this,h,u)};var nv=function(h){function u(d,p,m){this.source=d,this._k=p,this._c=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new bx(d,this._k,this._c))},u}(Ce),bx=function(h){function u(d,p,m){this._o=d,this._k=p,this._c=m,this._v=null,this._hv=!1,this._l=[],h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._k)(d);if(p===B)return this._o.onError(p.e);var m=0;if(this._hv){if((m=L(this._c)(p,this._v))===B)return this._o.onError(m.e)}else this._hv=!0,this._v=p;m>0&&(this._v=p,this._l=[]),m>=0&&this._l.push(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},u}(Te);function iv(h){if(0===h.length)throw new te;return h[0]}var wx=function(h){function u(d,p,m,b){this.source=d,this.accumulator=p,this.hasSeed=m,this.seed=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new xx(d,this))},u}(Ce),xx=function(h){function u(d,p){this._o=d,this._p=p,this._fn=p.accumulator,this._hs=p.hasSeed,this._s=p.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(!this._hv&&(this._hv=!0),this._ha?this._a=L(this._fn)(this._a,d,this._i,this._p):(this._a=this._hs?L(this._fn)(this._s,d,this._i,this._p):d,this._ha=!0),this._a===B)return this._o.onError(this._a.e);this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new te),this._o.onCompleted()},u}(Te);Z.reduce=function(){var u,h=!1,d=arguments[0];return 2===arguments.length&&(h=!0,u=arguments[1]),new wx(this,d,h,u)};var lf=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new cf(d,this._fn,this.source))},u}(Ce),cf=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._fn)(d,this._i++,this._s);if(p===B)return this._o.onError(p.e);Boolean(p)&&(this._o.onNext(!0),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},u}(Te);Z.some=function(h,u){var d=ke(h,u,3);return new lf(this,d)};var Ex=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Cx(d))},u}(Ce),Cx=function(h){function u(d){this._o=d,h.call(this)}return P(u,h),u.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},u}(Te);Z.isEmpty=function(){return new Ex(this)};var Dx=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new io(d,this._fn,this.source))},u}(Ce),io=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._fn)(d,this._i++,this._s);if(p===B)return this._o.onError(p.e);Boolean(p)||(this._o.onNext(!1),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},u}(Te);Z.every=function(h,u){var d=ke(h,u,3);return new Dx(this,d)};var rv=function(h){function u(d,p,m){var b=+m||0;Math.abs(b)===1/0&&(b=0),this.source=d,this._elem=p,this._n=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(!1),d.onCompleted(),je):this.source.subscribe(new Rs(d,this._elem,this._n))},u}(Ce),Rs=function(h){function u(p,m,b){this._o=p,this._elem=m,this._n=b,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(p){this._i++>=this._n&&function d(p,m){return 0===p&&0===m||p===m||isNaN(p)&&isNaN(m)}(p,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},u.prototype.error=function(p){this._o.onError(p)},u.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},u}(Te);Z.includes=function(h,u){return new rv(this,h,u)};var uf=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new sv(d,this._fn,this.source))},u}(Ce),sv=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,this._c=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(this._fn){var p=L(this._fn)(d,this._i++,this._s);if(p===B)return this._o.onError(p.e);Boolean(p)&&this._c++}else this._c++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},u}(Te);Z.count=function(h,u){var d=ke(h,u,3);return new uf(this,d)};var ov=function(h){function u(d,p,m){this.source=d,this._e=p,this._n=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(-1),d.onCompleted(),je):this.source.subscribe(new hf(d,this._e,this._n))},u}(Ce),hf=function(h){function u(d,p,m){this._o=d,this._e=p,this._n=m,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){this._i>=this._n&&d===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},u}(Te);Z.indexOf=function(h,u){var d=+u||0;return Math.abs(d)===1/0&&(d=0),new ov(this,h,d)};var df=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new av(d,this._fn,this.source))},u}(Ce),av=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,this._c=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(this._fn){var p=L(this._fn)(d,this._i++,this._s);if(p===B)return this._o.onError(p.e);this._c+=p}else this._c+=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},u}(Te);Z.sum=function(h,u){var d=ke(h,u,3);return new df(this,d)},Z.minBy=function(h,u){return u||(u=It),new nv(this,h,function(d,p){return-1*u(d,p)})},Z.min=function(h){return this.minBy(gn,h).map(iv)},Z.maxBy=function(h,u){return u||(u=It),new nv(this,h,u)},Z.max=function(h){return this.maxBy(gn,h).map(iv)};var Fu=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new lv(d,this._fn,this.source))},u}(Ce),lv=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._c=0,this._t=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(this._fn){var p=L(this._fn)(d,this._c++,this._s);if(p===B)return this._o.onError(p.e);this._t+=p}else this._c++,this._t+=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){if(0===this._c)return this._o.onError(new te);this._o.onNext(this._t/this._c),this._o.onCompleted()},u}(Te);Z.average=function(h,u){var p;return Be(h)&&(p=ke(h,u,3)),new Fu(this,p)},Z.sequenceEqual=function(h,u){var d=this;return u||(u=kt),new Yt(function(p){var m=!1,b=!1,C=[],A=[],k=d.subscribe(function(G){if(A.length>0){var J=A.shift(),ye=L(u)(J,G);if(ye===B)return p.onError(ye.e);ye||(p.onNext(!1),p.onCompleted())}else b?(p.onNext(!1),p.onCompleted()):C.push(G)},function(G){p.onError(G)},function(){m=!0,0===C.length&&(A.length>0?(p.onNext(!1),p.onCompleted()):b&&(p.onNext(!0),p.onCompleted()))});(Et(h)||Mt(h))&&(h=As(h)),qe(h)&&(h=Ht(h));var X=h.subscribe(function(G){if(C.length>0){var J=C.shift(),ye=L(u)(J,G);if(ye===B)return p.onError(ye.e);ye||(p.onNext(!1),p.onCompleted())}else m?(p.onNext(!1),p.onCompleted()):A.push(G)},function(G){p.onError(G)},function(){b=!0,0===A.length&&(C.length>0?(p.onNext(!1),p.onCompleted()):m&&(p.onNext(!0),p.onCompleted()))});return new Je(k,X)},d)};var nr=function(h){function u(d,p,m){this.source=d,this._i=p,this._d=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new ff(d,this._i,this._d))},u}(Ce),ff=function(h){function u(d,p,m){this._o=d,this._i=p,this._d=m,h.call(this)}return P(u,h),u.prototype.next=function(d){0==this._i--&&(this._o.onNext(d),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._d===mt?this._o.onError(new fe):(this._o.onNext(this._d),this._o.onCompleted())},u}(Te);Z.elementAt=function(h,u){if(h<0)throw new fe;return new nr(this,h,u)};var pf=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,this._hv=!1,this._v=null,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=!1;if(this._obj.predicate){var m=L(this._obj.predicate)(d,this._i++,this._s);if(m===B)return this._o.onError(m.e);Boolean(m)&&(p=!0)}else this._obj.predicate||(p=!0);if(p){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=d}},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===mt?this._o.onError(new te):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Te);Z.single=function(h,u){var d={},p=this;if(Be((d="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var m=d.predicate;d.predicate=ke(m,d.thisArg,3)}return new Yt(function(b){return p.subscribe(new pf(b,d,p))},p)};var ci=function(h){function u(d,p){this.source=d,this._obj=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new cv(d,this._obj,this.source))},u}(Ce),cv=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){if(this._obj.predicate){var p=L(this._obj.predicate)(d,this._i++,this._s);if(p===B)return this._o.onError(p.e);Boolean(p)&&(this._o.onNext(d),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(d),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._obj.defaultValue===mt?this._o.onError(new te):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Te);Z.first=function(){var h={};if(Be((h="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var d=h.predicate;h.predicate=ke(d,h.thisArg,3)}return new ci(this,h)};var Kl=function(h){function u(d,p){this.source=d,this._obj=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Yi(d,this._obj,this.source))},u}(Ce),Yi=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,this._hv=!1,this._v=null,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=!1;if(this._obj.predicate){var m=L(this._obj.predicate)(d,this._i++,this._s);if(m===B)return this._o.onError(m.e);Boolean(m)&&(p=!0)}else this._obj.predicate||(p=!0);p&&(this._hv=!0,this._v=d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===mt?this._o.onError(new te):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Te);Z.last=function(){var h={};if(Be((h="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var d=h.predicate;h.predicate=ke(d,h.thisArg,3)}return new Kl(this,h)};var uv=function(h){function u(d,p,m,b){this._o=d,this._s=p,this._cb=m,this._y=b,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._cb)(d,this._i,this._s);if(p===B)return this._o.onError(p.e);p?(this._o.onNext(this._y?this._i:d),this._o.onCompleted()):this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},u}(Te);function Lu(h,u,d,p){var m=ke(u,d,3);return new Yt(function(b){return h.subscribe(new uv(b,h,m,p))},h)}Z.find=function(h,u){return Lu(this,h,u,!1)},Z.findIndex=function(h,u){return Lu(this,h,u,!0)};var Yo=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new qi(d))},u}(Ce),qi=function(h){function u(d){this._o=d,this._s=new Re.Set,h.call(this)}return P(u,h),u.prototype.next=function(d){this._s.add(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},u}(Te);Z.toSet=function(){if(typeof Re.Set>"u")throw new TypeError;return new Yo(this)};var hv=function(h){function u(d,p,m){this.source=d,this._k=p,this._e=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Zl(d,this._k,this._e))},u}(Ce),Zl=function(h){function u(d,p,m){this._o=d,this._k=p,this._e=m,this._m=new Re.Map,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._k)(d);if(p===B)return this._o.onError(p.e);var m=d;if(this._e&&(m=L(this._e)(d))===B)return this._o.onError(m.e);this._m.set(p,m)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},u}(Te);Z.toMap=function(h,u){if(typeof Re.Map>"u")throw new TypeError;return new hv(this,h,u)};var dv=function(h){function u(d,p,m){this.source=d,this._b=p,this._e=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Ps(d,this._b,this._e))},u}(Ce),Ps=function(h){function u(d,p,m){this._o=d,this._b=p,this._e=m,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(d)),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.slice=function(h,u){var d=h||0;if(d<0)throw new pe.ArgumentOutOfRangeError;if("number"==typeof u&&u<d)throw new pe.ArgumentOutOfRangeError;return new dv(this,d,u)};var gf=function(h){function u(d,p,m){this.source=d,this._e=p,this._n=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(-1),d.onCompleted(),je):this.source.subscribe(new Bu(d,this._e,this._n))},u}(Ce),Bu=function(h){function u(d,p,m){this._o=d,this._e=p,this._n=m,this._v=0,this._hv=!1,this._i=0,h.call(this)}return P(u,h),u.prototype.next=function(d){this._i>=this._n&&d===this._e&&(this._hv=!0,this._v=this._i),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._hv?this._v:-1),this._o.onCompleted()},u}(Te);Z.lastIndexOf=function(h,u){var d=+u||0;return Math.abs(d)===1/0&&(d=0),new gf(this,h,d)},Ie.wrap=function(h){function u(){return Ie.spawn.call(this,h.apply(this,arguments))}return u.__generatorFunction__=h,u};var Bt=Ie.spawn=function(){for(var h=arguments[0],u=this,d=[],p=1,m=arguments.length;p<m;p++)d.push(arguments[p]);return new Yt(function(b){var C=new it;if(Be(h)&&(h=h.apply(u,d)),!h||!Be(h.next))return b.onNext(h),b.onCompleted();function A(G){var J=L(h.next).call(h,G);if(J===B)return b.onError(J.e);X(J)}function k(G){var J=L(h.next).call(h,G);if(J===B)return b.onError(J.e);X(J)}function X(G){if(G.done)return b.onNext(G.value),void b.onCompleted();var J=Ql.call(u,G.value),ye=null,rt=!1;Ie.isObservable(J)?C.add(J.subscribe(function(Xe){rt=!0,ye=Xe},k,function(){rt&&A(ye)})):k(new TypeError("type not supported"))}return A(),C})};function Ql(h){return!h||Ie.isObservable(h)?h:qe(h)?Ie.fromPromise(h):function vf(h){var u=h.constructor;return!!u&&("GeneratorFunction"===u.name||"GeneratorFunction"===u.displayName||mf(u.prototype))}(h)||mf(h)?Bt.call(this,h):Be(h)?pv.call(this,h):Et(h)||Mt(h)?Sx.call(this,h):Jl(h)?fv.call(this,h):h}function Sx(h){return Ie.from(h).concatMap(function(u){return Ie.isObservable(u)||Jl(u)?Ql.call(null,u):pe.Observable.just(u)}).toArray()}function fv(h){for(var u=new h.constructor,d=Object.keys(h),p=[],m=0,b=d.length;m<b;m++){var C=d[m],A=Ql.call(this,h[C]);A&&Ie.isObservable(A)?k(A,C):u[C]=h[C]}return Ie.forkJoin.apply(Ie,p).map(function(){return u});function k(X,G){u[G]=mt,p.push(X.map(function(J){u[G]=J}))}}function pv(h){var u=this;return new Yt(function(d){h.call(u,function(){var p=arguments[0],m=arguments[1];if(p)return d.onError(p);if(arguments.length>2){for(var b=[],C=1,A=arguments.length;C<A;C++)b.push(arguments[C]);m=b}d.onNext(m),d.onCompleted()})})}function mf(h){return Be(h.next)&&Be(h.throw)}function Jl(h){return Object==h.constructor}Ie.start=function(h,u,d){return gv(h,u,d)()};var gv=Ie.toAsync=function(h,u,d){return Ee(d)||(d=xn),function(){var p=arguments,m=new Qo;return d.schedule(null,function(){var b;try{b=h.apply(u,p)}catch(C){return void m.onError(C)}m.onNext(b),m.onCompleted()}),m.asObservable()}};function me(h,u,d,p){var m=new Qo;return p.push(function un(h,u,d){return function(){for(var m=arguments.length,b=new Array(m),C=0;C<m;C++)b[C]=arguments[C];if(Be(d)){if((b=L(d).apply(u,b))===B)return h.onError(b.e);h.onNext(b)}else h.onNext(b.length<=1?b[0]:b);h.onCompleted()}}(m,u,d)),h.apply(u,p),m.asObservable()}function mv(h,u,d,p){var m=new Qo;return p.push(function vv(h,u,d){return function(){var m=arguments[0];if(m)return h.onError(m);for(var b=arguments.length,C=[],A=1;A<b;A++)C[A-1]=arguments[A];if(Be(d)){if((C=L(d).apply(u,C))===B)return h.onError(C.e);h.onNext(C)}else h.onNext(C.length<=1?C[0]:C);h.onCompleted()}}(m,u,d)),h.apply(u,p),m.asObservable()}function Uu(h,u,d){this._e=h,this._n=u,this._fn=d,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function qo(h,u,d){var p=new it,m=Object.prototype.toString.call(h);if(function ui(h){return Re.StaticNodeList?h instanceof Re.StaticNodeList||h instanceof Re.NodeList:"[object NodeList]"===Object.prototype.toString.call(h)}(h)||"[object HTMLCollection]"===m)for(var b=0,C=h.length;b<C;b++)p.add(qo(h.item(b),u,d));else h&&p.add(new Uu(h,u,d));return p}Ie.fromCallback=function(h,u,d){return function(){typeof u>"u"&&(u=this);for(var p=arguments.length,m=new Array(p),b=0;b<p;b++)m[b]=arguments[b];return me(h,u,d,m)}},Ie.fromNodeCallback=function(h,u,d){return function(){typeof u>"u"&&(u=this);for(var p=arguments.length,m=new Array(p),b=0;b<p;b++)m[b]=arguments[b];return mv(h,u,d,m)}},Uu.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},pe.config.useNativeEvents=!1;var Nr=function(h){function u(p,m,b){this._el=p,this._n=m,this._fn=b,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(p){return qo(this._el,this._n,function d(p,m){return function(){var C=arguments[0];if(Be(m)&&(C=L(m).apply(null,arguments))===B)return p.onError(C.e);p.onNext(C)}}(p,this._fn))},u}(Ce);Ie.fromEvent=function(h,u,d){return h.addListener?ec(function(p){h.addListener(u,p)},function(p){h.removeListener(u,p)},d):pe.config.useNativeEvents||"function"!=typeof h.on||"function"!=typeof h.off?new Nr(h,u,d).publish().refCount():ec(function(p){h.on(u,p)},function(p){h.off(u,p)},d)};var ju=function(h){function u(m,b,C){this._add=m,this._del=b,this._fn=C,h.call(this)}function p(m,b,C){this._del=m,this._fn=b,this._ret=C,this.isDisposed=!1}return P(u,h),u.prototype.subscribeCore=function(m){var b=function d(m,b){return function(){var A=arguments[0];if(Be(b)&&(A=L(b).apply(null,arguments))===B)return m.onError(A.e);m.onNext(A)}}(m,this._fn),C=this._add(b);return new p(this._del,b,C)},p.prototype.dispose=function(){this.isDisposed||(Be(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},u}(Ce),ec=Ie.fromEventPattern=function(h,u,d){return new ju(h,u,d).publish().refCount()};Ie.startAsync=function(h){var u=L(h)();return u===B?Ms(u.e):Ht(u)};var _v=function(h){function u(d,p){this.source=d,this.controller=new Fn,this.paused=!0,this.pauser=p&&p.subscribe?this.controller.merge(p):this.controller,h.call(this)}return P(u,h),u.prototype._subscribe=function(d){var p=this.source.publish(),m=p.subscribe(d),b=je,C=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(A){A?b=p.connect():(b.dispose(),b=je)});return new On([m,b,C])},u.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},u.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},u}(Ie);Z.pausable=function(h){return new _v(this,h)};var _f=function(h){function u(d,p){this.source=d,this.controller=new Fn,this.paused=!0,this.pauser=p&&p.subscribe?this.controller.merge(p):this.controller,h.call(this)}return P(u,h),u.prototype._subscribe=function(d){var m,p=[];function b(){for(;p.length>0;)d.onNext(p.shift())}var C=function Tx(h,u,d){return new Yt(function(p){var k,m=[!1,!1],b=!1,C=!1,A=new Array(2);function X(G,J){if(A[J]=G,m[J]=!0,b||(b=m.every(gn))){if(k)return p.onError(k);var ye=L(d).apply(null,A);if(ye===B)return p.onError(ye.e);p.onNext(ye)}C&&A[1]&&p.onCompleted()}return new Je(h.subscribe(function(G){X(G,0)},function(G){A[1]?p.onError(G):k=G},function(){C=!0,A[1]&&p.onCompleted()}),u.subscribe(function(G){X(G,1)},function(G){p.onError(G)},function(){C=!0,X(!0,1)}))},h)}(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(A,k){return{data:A,shouldFire:k}}).subscribe(function(A){m!==mt&&A.shouldFire!==m?(m=A.shouldFire,A.shouldFire&&b()):(m=A.shouldFire,A.shouldFire?d.onNext(A.data):p.push(A.data))},function(A){b(),d.onError(A)},function(){b(),d.onCompleted()});return C},u.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},u.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},u}(Ie);Z.pausableBuffered=function(h){return new _f(this,h)};var hi=function(h){function u(d,p,m){h.call(this),this.subject=new ts(p,m),this.source=d.multicast(this.subject).refCount()}return P(u,h),u.prototype._subscribe=function(d){return this.source.subscribe(d)},u.prototype.request=function(d){return this.subject.request(d??-1)},u}(Ie),ts=function(h){function u(d,p){null==d&&(d=!0),h.call(this),this.subject=new Fn,this.enableQueue=d,this.queue=d?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=p||xe}return P(u,h),Ae(u.prototype,vi,{_subscribe:function(d){return this.subject.subscribe(d)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Pi.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(d){this.hasFailed=!0,this.error=d,this.enableQueue&&0!==this.queue.length?this.queue.push(Pi.createOnError(d)):(this.subject.onError(d),this.disposeCurrentRequest())},onNext:function(d){this.requestedCount<=0?this.enableQueue&&this.queue.push(Pi.createOnNext(d)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(d))},_processRequest:function(d){if(this.enableQueue)for(;this.queue.length>0&&(d>0||"N"!==this.queue[0].kind);){var p=this.queue.shift();p.accept(this.subject),"N"===p.kind?d--:(this.disposeCurrentRequest(),this.queue=[])}return d},request:function(d){this.disposeCurrentRequest();var p=this;return this.requestedDisposable=this.scheduler.schedule(d,function(m,b){var C=p._processRequest(b);if(!p.hasCompleted&&!p.hasFailed&&C>0)return p.requestedCount=C,Ot(function(){p.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),u}(Ie);Z.controlled=function(h,u){return h&&Ee(h)&&(u=h,h=!0),null==h&&(h=!0),new hi(this,h,u)};var yf=function(h){function u(m){h.call(this),this.source=m}function d(m,b){return b.source.request(1)}P(u,h),u.prototype._subscribe=function(m){return this.subscription=this.source.subscribe(new p(m,this,this.subscription)),new Je(this.subscription,xn.schedule(this,d))};var p=function(m){function b(A,k,X){m.call(this),this.observer=A,this.observable=k,this.cancel=X,this.scheduleDisposable=null}function C(A,k){return k.observable.source.request(1)}return P(b,m),b.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},b.prototype.error=function(A){this.observer.onError(A),this.dispose()},b.prototype.next=function(A){this.observer.onNext(A),this.scheduleDisposable=xn.schedule(this,C)},b.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),m.prototype.dispose.call(this)},b}(Te);return u}(Ie);hi.prototype.stopAndWait=function(){return new yf(this)};var Ko=function(h){function u(m,b){h.call(this),this.source=m,this.windowSize=b}function d(m,b){return b.source.request(b.windowSize)}P(u,h),u.prototype._subscribe=function(m){return this.subscription=this.source.subscribe(new p(m,this,this.subscription)),new Je(this.subscription,xn.schedule(this,d))};var p=function(m){function b(A,k,X){this.observer=A,this.observable=k,this.cancel=X,this.received=0,this.scheduleDisposable=null,m.call(this)}function C(A,k){return k.observable.source.request(k.observable.windowSize)}return P(b,m),b.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},b.prototype.error=function(A){this.observer.onError(A),this.dispose()},b.prototype.next=function(A){this.observer.onNext(A),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=xn.schedule(this,C))},b.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),m.prototype.dispose.call(this)},b}(Te);return u}(Ie);hi.prototype.windowed=function(h){return new Ko(this,h)},Z.pipe=function(h){var u=this.pausableBuffered();function d(){u.resume()}return h.addListener("drain",d),u.subscribe(function(p){!h.write(p)&&u.pause()},function(p){h.emit("error",p)},function(){!h._isStdio&&h.end(),h.removeListener("drain",d)}),u.resume(),h};var ns=function(h){function u(d,p,m){this.source=d,this._fn1=p,this._fn2=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=this.source.multicast(this._fn1());return new Je(this._fn2(p).subscribe(d),p.connect())},u}(Ce);Z.multicast=function(h,u){return Be(h)?new ns(this,h,u):new yv(this,h)},Z.publish=function(h){return h&&Be(h)?this.multicast(function(){return new Fn},h):this.multicast(new Fn)},Z.share=function(){return this.publish().refCount()},Z.publishLast=function(h){return h&&Be(h)?this.multicast(function(){return new Qo},h):this.multicast(new Qo)},Z.publishValue=function(h,u){return 2===arguments.length?this.multicast(function(){return new th(u)},h):this.multicast(new th(h))},Z.shareValue=function(h){return this.publishValue(h).refCount()},Z.replay=function(h,u,d,p){return h&&Be(h)?this.multicast(function(){return new Ga(u,d,p)},h):this.multicast(new Ga(u,d,p))},Z.shareReplay=function(h,u,d){return this.replay(null,h,u,d).refCount()};var tc=function(h,u){this._s=h,this._o=u};tc.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var h=this._s.observers.indexOf(this._o);this._s.observers.splice(h,1),this._o=null}};var bf=function(h){function u(p){this.source=p,this._count=0,this._connectableSubscription=null,h.call(this)}function d(p,m){this._p=p,this._s=m,this.isDisposed=!1}return P(u,h),u.prototype.subscribeCore=function(p){var m=this.source.subscribe(p);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new d(this,m)},d.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},u}(Ce),yv=pe.ConnectableObservable=function(h){function u(p,m){this.source=p,this._connection=null,this._source=p.asObservable(),this._subject=m,h.call(this)}function d(p,m){this._p=p,this._s=m}return P(u,h),d.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},u.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return je;var p=this._source.subscribe(this._subject);this._connection=new d(this,p)}return this._connection},u.prototype._subscribe=function(p){return this._subject.subscribe(p)},u.prototype.refCount=function(){return new bf(this)},u}(Ie);function bv(h,u){return h.groupJoin(this,u,Ia,function(d,p){return p})}function Vu(h){var u=this;return new Yt(function(d){var p=new Fn,m=new it,b=new Lt(m);return d.onNext(nt(p,b)),m.add(u.subscribe(function(C){p.onNext(C)},function(C){p.onError(C),d.onError(C)},function(){p.onCompleted(),d.onCompleted()})),qe(h)&&(h=Ht(h)),m.add(h.subscribe(function(C){p.onCompleted(),p=new Fn,d.onNext(nt(p,b))},function(C){p.onError(C),d.onError(C)},function(){p.onCompleted(),d.onCompleted()})),b},u)}function Hu(h){var u=this;return new Yt(function(d){var p=new ut,m=new it(p),b=new Lt(m),C=new Fn;return d.onNext(nt(C,b)),m.add(u.subscribe(function(k){C.onNext(k)},function(k){C.onError(k),d.onError(k)},function(){C.onCompleted(),d.onCompleted()})),function A(){var k;try{k=h()}catch(G){return void d.onError(G)}qe(k)&&(k=Ht(k));var X=new _e;p.setDisposable(X),X.setDisposable(k.take(1).subscribe(Se,function(G){C.onError(G),d.onError(G)},function(){C.onCompleted(),C=new Fn,d.onNext(nt(C,b)),A()}))}(),b},u)}Z.singleInstance=function(){var d,h=this,u=!1;return new Yt(function(m){return function p(){return u||(u=!0,d=h.finally(function(){u=!1}).publish().refCount()),d}().subscribe(m)})},Z.join=function(h,u,d,p){var m=this;return new Yt(function(b){var C=new it,A=!1,k=!1,X=0,G=0,J=new ro,ye=new ro,rt=function(Xe){b.onError(Xe)};return C.add(m.subscribe(function(Xe){var ct=X++,dt=new _e;J.set(ct,Xe),C.add(dt);var Ke=L(u)(Xe);if(Ke===B)return b.onError(Ke.e);dt.setDisposable(Ke.take(1).subscribe(Se,rt,function(){J.delete(ct)&&0===J.size&&A&&b.onCompleted(),C.remove(dt)})),ye.forEach(function(kn){var Dn=L(p)(Xe,kn);if(Dn===B)return b.onError(Dn.e);b.onNext(Dn)})},rt,function(){A=!0,(k||0===J.size)&&b.onCompleted()})),C.add(h.subscribe(function(Xe){var ct=G++,dt=new _e;ye.set(ct,Xe),C.add(dt);var Ke=L(d)(Xe);if(Ke===B)return b.onError(Ke.e);dt.setDisposable(Ke.take(1).subscribe(Se,rt,function(){ye.delete(ct)&&0===ye.size&&k&&b.onCompleted(),C.remove(dt)})),J.forEach(function(kn){var Dn=L(p)(kn,Xe);if(Dn===B)return b.onError(Dn.e);b.onNext(Dn)})},rt,function(){k=!0,(A||0===ye.size)&&b.onCompleted()})),C},m)},Z.groupJoin=function(h,u,d,p){var m=this;return new Yt(function(b){var C=new it,A=new Lt(C),k=new ro,X=new ro,G=0,J=0;return C.add(m.subscribe(function(rt){var Xe=new Fn,ct=G++;k.set(ct,Xe);var dt=L(p)(rt,nt(Xe,A));if(dt===B)return k.forEach(void 0),b.onError(dt.e);b.onNext(dt),X.forEach(function(Dn){Xe.onNext(Dn)});var Ke=new _e;C.add(Ke);var kn=L(u)(rt);if(kn===B)return k.forEach(void 0),b.onError(kn.e);Ke.setDisposable(kn.take(1).subscribe(Se,function(Dn){k.forEach(void 0),b.onError(Dn)},function(){k.delete(ct)&&Xe.onCompleted(),C.remove(Ke)}))},function(rt){k.forEach(void 0),b.onError(rt)},function(){b.onCompleted()})),C.add(h.subscribe(function(rt){var Xe=J++;X.set(Xe,rt);var ct=new _e;C.add(ct);var dt=L(d)(rt);if(dt===B)return k.forEach(void 0),b.onError(dt.e);ct.setDisposable(dt.take(1).subscribe(Se,function(Ke){k.forEach(void 0),b.onError(Ke)},function(){X.delete(Xe),C.remove(ct)})),k.forEach(function(Ke){Ke.onNext(rt)})},function(rt){k.forEach(void 0),b.onError(rt)})),A},m)},Z.buffer=function(){return this.window.apply(this,arguments).flatMap(rs)},Z.window=function(h,u){return 1===arguments.length&&"function"!=typeof arguments[0]?Vu.call(this,h):"function"==typeof h?Hu.call(this,h):bv.call(this,h,u)};var wf=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Gu(d))},u}(Ce),Gu=function(h){function u(d){this._o=d,this._p=null,this._hp=!1,h.call(this)}return P(u,h),u.prototype.next=function(d){this._hp?this._o.onNext([this._p,d]):this._hp=!0,this._p=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.pairwise=function(){return new wf(this)},Z.partition=function(h,u){var d=ke(h,u,3);return[this.filter(h,u),this.filter(function(p,m,b){return!d(p,m,b)})]};var wv=function(h){function u(d,p){this.c=d,this.s=p}return P(u,h),u.prototype[Ue]=function(){var d=this;return{next:function(){return d.c()?{done:!1,value:d.s}:{done:!0,value:void 0}}}},u}(jo);Z.letBind=Z.let=function(h){return h(this)},Ie.if=function(h,u,d){return Aa(function(){return d||(d=Ia()),qe(u)&&(u=Ht(u)),qe(d)&&(d=Ht(d)),"function"==typeof d.now&&(d=Ia(d)),h()?u:d})},Ie.for=Ie.forIn=function(h,u,d){return Au(h,u,d).concat()};var zu=Ie.while=Ie.whileDo=function(h,u){return qe(u)&&(u=Ht(u)),function xf(h,u){return new wv(h,u)}(h,u).concat()};Z.doWhile=function(h){return Jr([this,zu(h,this)])},Ie.case=function(h,u,d){return Aa(function(){qe(d)&&(d=Ht(d)),d||(d=Ia()),Ee(d)&&(d=Ia(d));var p=u[h()];return qe(p)&&(p=Ht(p)),p||d})};var Ef=function(h){function u(p,m,b){this.source=p,this._fn=m,this._scheduler=b,h.call(this)}function d(p,m){var A,b=p[0],C=p[1];if(b.q.length>0){A=b.q.shift();var k=new _e;b.d.add(k),k.setDisposable(A.subscribe(new Cf(b,C,k))),m([b,C])}else b.isAcquired=!1}return P(u,h),u.prototype._ensureActive=function(p){var m=!1;p.q.length>0&&(m=!p.isAcquired,p.isAcquired=!0),m&&p.m.setDisposable(this._scheduler.scheduleRecursive([p,this],d))},u.prototype.subscribeCore=function(p){var m=new ut,b=new it(m),C={q:[],m,d:b,activeCount:0,isAcquired:!1,o:p};return C.q.push(this.source),C.activeCount++,this._ensureActive(C),b},u}(Ce),Cf=function(h){function u(d,p,m){this._s=d,this._p=p,this._m1=m,h.call(this)}return P(u,h),u.prototype.next=function(d){this._s.o.onNext(d);var p=L(this._p._fn)(d);if(p===B)return this._s.o.onError(p.e);this._s.q.push(p),this._s.activeCount++,this._p._ensureActive(this._s)},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},u}(Te);function is(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return u}Z.expand=function(h,u){return Ee(u)||(u=xe),new Ef(this,h,u)};var Df=function(h){function u(d,p){this._sources=d,this._cb=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){if(0===this._sources.length)return d.onCompleted(),je;for(var p=this._sources.length,m={finished:!1,hasResults:new Array(p),hasCompleted:new Array(p),results:new Array(p)},b=new it,C=0,A=this._sources.length;C<A;C++){var k=this._sources[C];qe(k)&&(k=Ht(k)),b.add(k.subscribe(new $u(d,m,C,this._cb,b)))}return b},u}(Ce),$u=function(h){function u(d,p,m,b,C){this._o=d,this._s=p,this._i=m,this._cb=b,this._subs=C,h.call(this)}return P(u,h),u.prototype.next=function(d){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=d)},u.prototype.error=function(d){this._s.finished=!0,this._o.onError(d),this._subs.dispose()},u.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var d=0;d<this._s.results.length;d++)if(!this._s.hasCompleted[d])return;this._s.finished=!0;var p=L(this._cb).apply(null,this._s.results);if(p===B)return this._o.onError(p.e);this._o.onNext(p),this._o.onCompleted()}},u}(Te);Ie.forkJoin=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Be(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new Df(u,p)},Z.forkJoin=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return Array.isArray(u[0])?u[0].unshift(this):u.unshift(this),Ie.forkJoin.apply(null,u)},Z.manySelect=Z.extend=function(h,u){Ee(u)||(u=pe.Scheduler.immediate);var d=this;return Aa(function(){var p;return d.map(function(m){var b=new xv(m);return p&&p.onNext(m),p=b,b}).tap(Se,function(m){p&&p.onError(m)},function(){p&&p.onCompleted()}).observeOn(u).map(h)},d)};var xv=function(h){function u(d){h.call(this),this.head=d,this.tail=new Qo}return P(u,h),Ae(u.prototype,vi,{_subscribe:function(d){var p=new it;return p.add(xe.schedule(this,function(m,b){d.onNext(b.head),p.add(b.tail.mergeAll().subscribe(d))})),p},onCompleted:function(){this.onNext(Ie.empty())},onError:function(d){this.onNext(Ie.throw(d))},onNext:function(d){this.tail.onNext(d),this.tail.onCompleted()}}),u}(Ie),ro=Re.Map||function(){function h(){this.size=0,this._values=[],this._keys=[]}return h.prototype.delete=function(u){var d=this._keys.indexOf(u);return-1!==d&&(this._values.splice(d,1),this._keys.splice(d,1),this.size--,!0)},h.prototype.get=function(u){var d=this._keys.indexOf(u);return-1===d?mt:this._values[d]},h.prototype.set=function(u,d){var p=this._keys.indexOf(u);return-1===p?(this._keys.push(u),this._values.push(d),this.size++):this._values[p]=d,this},h.prototype.forEach=function(u,d){for(var p=0;p<this.size;p++)u.call(d,this._values[p],this._keys[p])},h}();function ei(h){this.patterns=h}function Os(h,u){this.expression=h,this.selector=u}function Cv(h,u,d){var p=h.get(u);if(!p){var m=new Dv(u,d);return h.set(u,m),m}return p}function Wu(h,u,d){this.joinObserverArray=h,this.onNext=u,this.onCompleted=d,this.joinObservers=new ro;for(var p=0,m=this.joinObserverArray.length;p<m;p++){var b=this.joinObserverArray[p];this.joinObservers.set(b,b)}}ei.prototype.and=function(h){return new ei(this.patterns.concat(h))},ei.prototype.thenDo=function(h){return new Os(this,h)},Os.prototype.activate=function(h,u,d){for(var p=[],m=function jn(h){return function(u){h.onError(u)}}(u),b=0,C=this.expression.patterns.length;b<C;b++)p.push(Cv(h,this.expression.patterns[b],m));var A=new Wu(p,function Ev(h,u){return function(){var p=L(h.selector).apply(h,arguments);if(p===B)return u.onError(p.e);u.onNext(p)}}(this,u),function(){for(var k=0,X=p.length;k<X;k++)p[k].removeActivePlan(A);d(A)});for(b=0,C=p.length;b<C;b++)p[b].addActivePlan(A);return A},Wu.prototype.dequeue=function(){this.joinObservers.forEach(function(h){h.queue.shift()})},Wu.prototype.match=function(){var h,u,d=!0;for(h=0,u=this.joinObserverArray.length;h<u;h++)if(0===this.joinObserverArray[h].queue.length){d=!1;break}if(d){var p=[],m=!1;for(h=0,u=this.joinObserverArray.length;h<u;h++)p.push(this.joinObserverArray[h].queue[0]),"C"===this.joinObserverArray[h].queue[0].kind&&(m=!0);if(m)this.onCompleted();else{this.dequeue();var b=[];for(h=0,u=p.length;h<p.length;h++)b.push(p[h].value);this.onNext.apply(this,b)}}};var Dv=function(h){function u(p,m){h.call(this),this.source=p,this.onError=m,this.queue=[],this.activePlans=[],this.subscription=new _e,this.isDisposed=!1}P(u,h);var d=u.prototype;return d.next=function(p){if(!this.isDisposed){if("E"===p.kind)return this.onError(p.error);this.queue.push(p);for(var m=this.activePlans.slice(0),b=0,C=m.length;b<C;b++)m[b].match()}},d.error=Se,d.completed=Se,d.addActivePlan=function(p){this.activePlans.push(p)},d.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},d.removeActivePlan=function(p){this.activePlans.splice(this.activePlans.indexOf(p),1),0===this.activePlans.length&&this.dispose()},d.dispose=function(){h.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},u}(Te);Z.and=function(h){return new ei([this,h])},Z.thenDo=function(h){return new ei([this]).thenDo(h)},Ie.when=function(){var u,h=arguments.length;if(Array.isArray(arguments[0]))u=arguments[0];else{u=new Array(h);for(var d=0;d<h;d++)u[d]=arguments[d]}return new Yt(function(p){var m=[],b=new ro,C=Ts(function(G){p.onNext(G)},function(G){b.forEach(function(J){J.onError(G)}),p.onError(G)},function(G){p.onCompleted()});try{for(var A=0,k=u.length;A<k;A++)m.push(u[A].activate(b,C,function(G){var J=m.indexOf(G);m.splice(J,1),0===m.length&&p.onCompleted()}))}catch(G){return Ms(G).subscribe(p)}var X=new it;return b.forEach(function(G){G.subscribe(),X.add(G)}),X})};var Sv=function(h){function u(p,m){this._dt=p,this._s=m,h.call(this)}function d(p,m){m.onNext(0),m.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleFuture(p,this._dt,d)},u}(Ce);function Ba(h,u,d){return new Yt(function(p){var m=h,b=Bl(u);return d.scheduleRecursiveFuture(0,m,function(C,A){if(b>0){var k=d.now();(m=new Date(m.getTime()+b)).getTime()<=k&&(m=new Date(k+b))}p.onNext(C),A(C+1,new Date(m))})})}function Ua(h,u,d){return h===u?new Yt(function(p){return d.schedulePeriodic(0,u,function(m){return p.onNext(m),m+1})}):Aa(function(){return Ba(new Date(d.now()+h),u,d)})}var nc=Ie.interval=function(h,u){return Ua(h,h,Ee(u)?u:xn)};function Xu(h,u,d){return new Yt(function(p){var X,m=!1,b=new ut,C=null,A=[],k=!1;return X=h.materialize().timestamp(d).subscribe(function(G){var J,ye;"E"===G.value.kind?((A=[]).push(G),C=G.value.error,ye=!k):(A.push({value:G.value,timestamp:G.timestamp+u}),ye=!m,m=!0),ye&&(null!==C?p.onError(C):(J=new _e,b.setDisposable(J),J.setDisposable(d.scheduleRecursiveFuture(null,u,function(rt,Xe){var ct,dt,Ke,kn;if(null===C){k=!0;do{Ke=null,A.length>0&&A[0].timestamp-d.now()<=0&&(Ke=A.shift().value),null!==Ke&&Ke.accept(p)}while(null!==Ke);kn=!1,dt=0,A.length>0?(kn=!0,dt=Math.max(0,A[0].timestamp-d.now())):m=!1,k=!1,null!==(ct=C)?p.onError(ct):kn&&Xe(null,dt)}}))))}),new Je(X,b)},h)}function Av(h,u,d){return Aa(function(){return Xu(h,u-d.now(),d)})}function Zo(h,u,d){var p,m;return Be(u)?m=u:(p=u,m=d),new Yt(function(b){var C=new it,A=!1,k=new ut;function X(){k.setDisposable(h.subscribe(function(J){var ye=L(m)(J);if(ye===B)return b.onError(ye.e);var rt=new _e;C.add(rt),rt.setDisposable(ye.subscribe(function(){b.onNext(J),C.remove(rt),G()},function(Xe){b.onError(Xe)},function(){b.onNext(J),C.remove(rt),G()}))},function(J){b.onError(J)},function(){A=!0,k.dispose(),G()}))}function G(){A&&0===C.length&&b.onCompleted()}return p?k.setDisposable(p.subscribe(X,function(J){b.onError(J)},X)):X(),new Je(k,C)},h)}Ie.timer=function(h,u,d){var p;return Ee(d)||(d=xn),null!=u&&"number"==typeof u?p=u:Ee(u)&&(d=u),(h instanceof Date||"number"==typeof h)&&p===mt?function Tv(h,u){return new Sv(h,u)}(h,d):h instanceof Date&&p!==mt?Ba(h,u,d):Ua(h,p,d)},Z.delay=function(){var h=arguments[0];if("number"==typeof h||h instanceof Date){var u=h,d=arguments[1];return Ee(d)||(d=xn),u instanceof Date?Av(this,u,d):Xu(this,u,d)}if(Ie.isObservable(h)||Be(h))return Zo(this,h,arguments[1]);throw new Error("Invalid arguments")};var ja=function(h){function u(d,p,m){Ee(m)||(m=xn),this.source=d,this._dt=p,this._s=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new ut;return new Je(this.source.subscribe(new Iv(d,this._dt,this._s,p)),p)},u}(Ce),Iv=function(h){function u(p,m,b,C){this._o=p,this._d=m,this._scheduler=b,this._c=C,this._v=null,this._hv=!1,this._id=0,h.call(this)}return P(u,h),u.prototype.next=function(p){this._hv=!0,this._v=p;var m=++this._id,b=new _e;this._c.setDisposable(b),b.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(C,A){A._hv&&A._id===m&&A._o.onNext(p),A._hv=!1}))},u.prototype.error=function(p){this._c.dispose(),this._o.onError(p),this._hv=!1,this._id++},u.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},u}(Te);function Ax(h,u){return new Yt(function(d){var p,m=!1,b=new ut,C=0,A=h.subscribe(function(k){var X=L(u)(k);if(X===B)return d.onError(X.e);qe(X)&&(X=Ht(X)),m=!0,p=k;var G=++C,J=new _e;b.setDisposable(J),J.setDisposable(X.subscribe(function(){m&&C===G&&d.onNext(p),m=!1,J.dispose()},function(ye){d.onError(ye)},function(){m&&C===G&&d.onNext(p),m=!1,J.dispose()}))},function(k){b.dispose(),d.onError(k),m=!1,C++},function(){b.dispose(),m&&d.onNext(p),d.onCompleted(),m=!1,C++});return new Je(A,b)},h)}function rs(h){return h.toArray()}Z.debounce=function(){if(Be(arguments[0]))return Ax(this,arguments[0]);if("number"==typeof arguments[0])return new ja(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},Z.windowWithTime=Z.windowTime=function(h,u,d){var m,p=this;return null==u&&(m=h),Ee(d)||(d=xn),"number"==typeof u?m=u:Ee(u)&&(m=h,d=u),new Yt(function(b){var C,G,A=m,k=h,X=[],J=new ut,ye=0;return C=new it(J),G=new Lt(C),X.push(new Fn),b.onNext(nt(X[0],G)),function rt(){var Xe=new _e,ct=!1,dt=!1;J.setDisposable(Xe),k===A?(ct=!0,dt=!0):k<A?ct=!0:dt=!0;var Ke=ct?k:A,kn=Ke-ye;ye=Ke,ct&&(k+=m),dt&&(A+=m),Xe.setDisposable(d.scheduleFuture(null,kn,function(){if(dt){var Dn=new Fn;X.push(Dn),b.onNext(nt(Dn,G))}ct&&X.shift().onCompleted(),rt()}))}(),C.add(p.subscribe(function(Xe){for(var ct=0,dt=X.length;ct<dt;ct++)X[ct].onNext(Xe)},function(Xe){for(var ct=0,dt=X.length;ct<dt;ct++)X[ct].onError(Xe);b.onError(Xe)},function(){for(var Xe=0,ct=X.length;Xe<ct;Xe++)X[Xe].onCompleted();b.onCompleted()})),G},p)},Z.windowWithTimeOrCount=Z.windowTimeOrCount=function(h,u,d){var p=this;return Ee(d)||(d=xn),new Yt(function(m){var b=new ut,C=new it(b),A=new Lt(C),k=0,X=0,G=new Fn;function J(ye){var rt=new _e;b.setDisposable(rt),rt.setDisposable(d.scheduleFuture(null,h,function(){if(ye===X){k=0;var Xe=++X;G.onCompleted(),G=new Fn,m.onNext(nt(G,A)),J(Xe)}}))}return m.onNext(nt(G,A)),J(0),C.add(p.subscribe(function(ye){var rt=0,Xe=!1;G.onNext(ye),++k===u&&(Xe=!0,k=0,rt=++X,G.onCompleted(),G=new Fn,m.onNext(nt(G,A))),Xe&&J(rt)},function(ye){G.onError(ye),m.onError(ye)},function(){G.onCompleted(),m.onCompleted()})),A},p)},Z.bufferWithTime=Z.bufferTime=function(h,u,d){return this.windowWithTime(h,u,d).flatMap(rs)},Z.bufferWithTimeOrCount=Z.bufferTimeOrCount=function(h,u,d){return this.windowWithTimeOrCount(h,u,d).flatMap(rs)};var Ix=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Mv(d,this._s))},u}(Ce),Mv=function(h){function u(d,p){this._o=d,this._s=p,this._l=p.now(),h.call(this)}return P(u,h),u.prototype.next=function(d){var p=this._s.now(),m=p-this._l;this._l=p,this._o.onNext({value:d,interval:m})},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.timeInterval=function(h){return Ee(h)||(h=xn),new Ix(this,h)};var Rv=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Mx(d,this._s))},u}(Ce),Mx=function(h){function u(d,p){this._o=d,this._s=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._o.onNext({value:d,timestamp:this._s.now()})},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.timestamp=function(h){return Ee(h)||(h=xn),new Rv(this,h)};var Pv=function(h){function u(d,p){this.source=d,this._sampler=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p={o:d,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new _e};return p.sourceSubscription.setDisposable(this.source.subscribe(new Tf(p))),new Je(p.sourceSubscription,this._sampler.subscribe(new Yu(p)))},u}(Ce),Yu=function(h){function u(d){this._s=d,h.call(this)}return P(u,h),u.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},u.prototype.next=function(){this._handleMessage()},u.prototype.error=function(d){this._s.onError(d)},u.prototype.completed=function(){this._handleMessage()},u}(Te),Tf=function(h){function u(d){this._s=d,h.call(this)}return P(u,h),u.prototype.next=function(d){this._s.hasValue=!0,this._s.value=d},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},u}(Te);Z.sample=function(h,u){return Ee(u)||(u=xn),new Pv(this,"number"==typeof h?nc(h,u):h)};var Va=pe.TimeoutError=function(h){this.message=h||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};function Ha(h,u,d,p){return Be(u)&&(p=d,d=u,u=Ra()),Ie.isObservable(p)||(p=Ms(new Va)),new Yt(function(m){var b=new ut,C=new ut,A=new _e;b.setDisposable(A);var k=0,X=!1;function G(ye){var rt=k,Xe=new _e;function ct(){return X=rt===k}C.setDisposable(Xe),Xe.setDisposable(ye.subscribe(function(){ct()&&b.setDisposable(p.subscribe(m)),Xe.dispose()},function(dt){ct()&&m.onError(dt)},function(){ct()&&b.setDisposable(p.subscribe(m))}))}function J(){var ye=!X;return ye&&k++,ye}return G(u),A.setDisposable(h.subscribe(function(ye){if(J()){m.onNext(ye);var rt=L(d)(ye);if(rt===B)return m.onError(rt.e);G(qe(rt)?Ht(rt):rt)}},function(ye){J()&&m.onError(ye)},function(){J()&&m.onCompleted()})),new Je(b,C)},h)}function Af(h,u,d,p){return Ee(d)&&(p=d,d=Ms(new Va)),d instanceof Error&&(d=Ms(d)),Ee(p)||(p=xn),Ie.isObservable(d)||(d=Ms(new Va)),new Yt(function(m){var b=0,C=new _e,A=new ut,k=!1,X=new ut;function G(){var J=b;X.setDisposable(p.scheduleFuture(null,u,function(){(k=b===J)&&(qe(d)&&(d=Ht(d)),A.setDisposable(d.subscribe(m)))}))}return A.setDisposable(C),G(),C.setDisposable(h.subscribe(function(J){k||(b++,m.onNext(J),G())},function(J){k||(b++,m.onError(J))},function(){k||(b++,m.onCompleted())})),new Je(A,X)},h)}Va.prototype=Object.create(Error.prototype),Z.timeout=function(){var h=arguments[0];if(h instanceof Date||"number"==typeof h)return Af(this,h,arguments[1],arguments[2]);if(Ie.isObservable(h)||Be(h))return Ha(this,h,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var If=function(h){function u(p,m,b,C,A,k){this._state=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._timeFn=A,this._s=k,h.call(this)}function d(p,m){if(p.hasResult&&p.o.onNext(p.result),p.first)p.first=!1;else if(p.newState=L(p.self._itrFn)(p.newState),p.newState===B)return p.o.onError(p.newState.e);if(p.hasResult=L(p.self._cndFn)(p.newState),p.hasResult===B)return p.o.onError(p.hasResult.e);if(p.hasResult){if(p.result=L(p.self._resFn)(p.newState),p.result===B)return p.o.onError(p.result.e);var b=L(p.self._timeFn)(p.newState);if(b===B)return p.o.onError(b.e);m(p,b)}else p.o.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursiveFuture({o:p,self:this,newState:this._state,first:!0,hasResult:!1},new Date(this._s.now()),d)},u}(Ce);Ie.generateWithAbsoluteTime=function(h,u,d,p,m,b){return Ee(b)||(b=xn),new If(h,u,d,p,m,b)};var ic=function(h){function u(p,m,b,C,A,k){this._state=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._timeFn=A,this._s=k,h.call(this)}function d(p,m){if(p.hasResult&&p.o.onNext(p.result),p.first)p.first=!1;else if(p.newState=L(p.self._itrFn)(p.newState),p.newState===B)return p.o.onError(p.newState.e);if(p.hasResult=L(p.self._cndFn)(p.newState),p.hasResult===B)return p.o.onError(p.hasResult.e);if(p.hasResult){if(p.result=L(p.self._resFn)(p.newState),p.result===B)return p.o.onError(p.result.e);var b=L(p.self._timeFn)(p.newState);if(b===B)return p.o.onError(b.e);m(p,b)}else p.o.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursiveFuture({o:p,self:this,newState:this._state,first:!0,hasResult:!1},0,d)},u}(Ce);Ie.generateWithRelativeTime=function(h,u,d,p,m,b){return Ee(b)||(b=xn),new ic(h,u,d,p,m,b)};var Ov=function(h){function u(p,m,b){this.source=p,this._dt=m,this._s=b,h.call(this)}function d(p,m){m[2].setDisposable(m[0].subscribe(m[1]))}return P(u,h),u.prototype.subscribeCore=function(p){var m=new ut;return m.setDisposable(this._s.scheduleFuture([this.source,p,m],this._dt,d)),m},u}(Ce);Z.delaySubscription=function(h,u){return Ee(u)||(u=xn),new Ov(this,h,u)};var rc=function(h){function u(d,p,m){this.source=d,this._d=p,this._s=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new qu(d,this))},u}(Ce),qu=function(h){function u(d,p){this._o=d,this._s=p._s,this._d=p._d,this._q=[],h.call(this)}return P(u,h),u.prototype.next=function(d){var p=this._s.now();for(this._q.push({interval:p,value:d});this._q.length>0&&p-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(var d=this._s.now();this._q.length>0&&d-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},u}(Te);Z.skipLastWithTime=function(h,u){return Ee(u)||(u=xn),new rc(this,h,u)};var sc=function(h){function u(d,p,m){this.source=d,this._d=p,this._s=m,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Rx(d,this._d,this._s))},u}(Ce),Rx=function(h){function u(d,p,m){this._o=d,this._d=p,this._s=m,this._q=[],h.call(this)}return P(u,h),u.prototype.next=function(d){var p=this._s.now();for(this._q.push({interval:p,value:d});this._q.length>0&&p-this._q[0].interval>=this._d;)this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(var d=this._s.now();this._q.length>0;){var p=this._q.shift();d-p.interval<=this._d&&this._o.onNext(p.value)}this._o.onCompleted()},u}(Te);Z.takeLastWithTime=function(h,u){return Ee(u)||(u=xn),new sc(this,h,u)},Z.takeLastBufferWithTime=function(h,u){var d=this;return Ee(u)||(u=xn),new Yt(function(p){var m=[];return d.subscribe(function(b){var C=u.now();for(m.push({interval:C,value:b});m.length>0&&C-m[0].interval>=h;)m.shift()},function(b){p.onError(b)},function(){for(var b=u.now(),C=[];m.length>0;){var A=m.shift();b-A.interval<=h&&C.push(A.value)}p.onNext(C),p.onCompleted()})},d)};var Mf=function(h){function u(p,m,b){this.source=p,this._d=m,this._s=b,h.call(this)}function d(p,m){m.onCompleted()}return P(u,h),u.prototype.subscribeCore=function(p){return new Je(this._s.scheduleFuture(p,this._d,d),this.source.subscribe(p))},u}(Ce);Z.takeWithTime=function(h,u){return Ee(u)||(u=xn),new Mf(this,h,u)};var Rf=function(h){function u(p,m,b){this.source=p,this._d=m,this._s=b,this._open=!1,h.call(this)}function d(p,m){m._open=!0}return P(u,h),u.prototype.subscribeCore=function(p){return new Je(this._s.scheduleFuture(this,this._d,d),this.source.subscribe(new Nv(p,this)))},u}(Ce),Nv=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.skipWithTime=function(h,u){return Ee(u)||(u=xn),new Rf(this,h,u)};var kr=function(h){function u(p,m,b){this.source=p,this._st=m,this._s=b,h.call(this)}function d(p,m){m._open=!0}return P(u,h),u.prototype.subscribeCore=function(p){return this._open=!1,new Je(this._s.scheduleFuture(this,this._st,d),this.source.subscribe(new kv(p,this)))},u}(Ce),kv=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return P(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Te);Z.skipUntilWithTime=function(h,u){return Ee(u)||(u=xn),new kr(this,h,u)},Z.takeUntilWithTime=function(h,u){Ee(u)||(u=xn);var d=this;return new Yt(function(p){return new Je(u.scheduleFuture(p,h,function(m,b){b.onCompleted()}),d.subscribe(p))},d)},Z.throttle=function(h,u){Ee(u)||(u=xn);var d=+h||0;if(d<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var p=this;return new Yt(function(m){var b=0;return p.subscribe(function(C){var A=u.now();(0===b||A-b>=d)&&(b=A,m.onNext(C))},function(C){m.onError(C)},function(){m.onCompleted()})},p)};var oc=function(h){function u(d,p){this._o=d,this._xform=p,h.call(this)}return P(u,h),u.prototype.next=function(d){var p=L(this._xform["@@transducer/step"]).call(this._xform,this._o,d);p===B&&this._o.onError(p.e)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},u}(Te);Z.transduce=function(h){var u=this;return new Yt(function(d){var p=h(function Ku(h){return{"@@transducer/init":function(){return h},"@@transducer/step":function(u,d){return u.onNext(d)},"@@transducer/result":function(u){return u.onCompleted()}}}(d));return u.subscribe(new oc(d,p))},u)};var Pf=function(h){function u(d){this.source=d,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){var p=new _e,m=new it,b={hasCurrent:!1,isStopped:!1,o:d,g:m};return m.add(p),p.setDisposable(this.source.subscribe(new Zu(b))),m},u}(Ce),Zu=function(h){function u(p){this._s=p,h.call(this)}function d(p,m){this._s=p,this._i=m,h.call(this)}return P(u,h),u.prototype.next=function(p){if(!this._s.hasCurrent){this._s.hasCurrent=!0,qe(p)&&(p=Ht(p));var m=new _e;this._s.g.add(m),m.setDisposable(p.subscribe(new d(this._s,m)))}},u.prototype.error=function(p){this._s.o.onError(p)},u.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},P(d,h),d.prototype.next=function(p){this._s.o.onNext(p)},d.prototype.error=function(p){this._s.o.onError(p)},d.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},u}(Te);Z.switchFirst=function(){return new Pf(this)},Z.flatMapFirst=Z.exhaustMap=function(h,u,d){return new vt(this,h,u,d).switchFirst()},Z.flatMapWithMaxConcurrent=Z.flatMapMaxConcurrent=function(h,u,d,p){return new vt(this,u,d,p).merge(h)};var Qu=pe.VirtualTimeScheduler=function(h){function u(p,m){this.clock=p,this.comparer=m,this.isEnabled=!1,this.queue=new tn(1024),h.call(this)}P(u,h);var d=u.prototype;return d.now=function(){return this.toAbsoluteTime(this.clock)},d.schedule=function(p,m){return this.scheduleAbsolute(p,this.clock,m)},d.scheduleFuture=function(p,m,b){var C=m instanceof Date?this.toRelativeTime(m-this.now()):this.toRelativeTime(m);return this.scheduleRelative(p,C,b)},d.add=ce,d.toAbsoluteTime=ce,d.toRelativeTime=ce,d.schedulePeriodic=function(p,m,b){return new Cu(this,p,m,b).start()},d.scheduleRelative=function(p,m,b){var C=this.add(this.clock,m);return this.scheduleAbsolute(p,C,b)},d.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var p=this.getNext();null!==p?(this.comparer(p.dueTime,this.clock)>0&&(this.clock=p.dueTime),p.invoke()):this.isEnabled=!1}while(this.isEnabled)}},d.stop=function(){this.isEnabled=!1},d.advanceTo=function(p){var m=this.comparer(this.clock,p);if(this.comparer(this.clock,p)>0)throw new fe;if(0!==m&&!this.isEnabled){this.isEnabled=!0;do{var b=this.getNext();null!==b&&this.comparer(b.dueTime,p)<=0?(this.comparer(b.dueTime,this.clock)>0&&(this.clock=b.dueTime),b.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=p}},d.advanceBy=function(p){var m=this.add(this.clock,p),b=this.comparer(this.clock,m);if(b>0)throw new fe;0!==b&&this.advanceTo(m)},d.sleep=function(p){var m=this.add(this.clock,p);if(this.comparer(this.clock,m)>=0)throw new fe;this.clock=m},d.getNext=function(){for(;this.queue.length>0;){var p=this.queue.peek();if(!p.isCancelled())return p;this.queue.dequeue()}return null},d.scheduleAbsolute=function(p,m,b){var C=this,k=new pr(this,p,function A(X,G){return C.queue.remove(k),b(X,G)},m,this.comparer);return this.queue.enqueue(k),k.disposable},u}(Ri);function Of(h){this.predicate=h}function Ju(h){this.predicate=h}pe.HistoricalScheduler=function(h){function u(p,m){h.call(this,p??0,m||It)}P(u,h);var d=u.prototype;return d.add=function(p,m){return p+m},d.toAbsoluteTime=function(p){return new Date(p).getTime()},d.toRelativeTime=function(p){return p},u}(pe.VirtualTimeScheduler),Of.prototype.equals=function(h){return h===this||null!=h&&"N"===h.kind&&this.predicate(h.value)},Ju.prototype.equals=function(h){return h===this||null!=h&&"E"===h.kind&&this.predicate(h.error)};var ac=pe.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(h,u){return new yr(h,"function"==typeof u?new Of(u):Pi.createOnNext(u))},onError:function(h,u){return new yr(h,"function"==typeof u?new Ju(u):Pi.createOnError(u))},onCompleted:function(h){return new yr(h,Pi.createOnCompleted())},subscribe:function(h,u){return new br(h,u)}},yr=pe.Recorded=function(h,u,d){this.time=h,this.value=u,this.comparer=d||kt};yr.prototype.equals=function(h){return this.time===h.time&&this.comparer(this.value,h.value)},yr.prototype.toString=function(){return this.value.toString()+"@"+this.time};var br=pe.Subscription=function(h,u){this.subscribe=h,this.unsubscribe=u||Number.MAX_VALUE};br.prototype.equals=function(h){return this.subscribe===h.subscribe&&this.unsubscribe===h.unsubscribe},br.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var Fv=pe.MockDisposable=function(h){this.scheduler=h,this.disposes=[],this.disposes.push(this.scheduler.clock)};Fv.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var lc=function(h){function u(p){h.call(this),this.scheduler=p,this.messages=[]}P(u,h);var d=u.prototype;return d.onNext=function(p){this.messages.push(new yr(this.scheduler.clock,Pi.createOnNext(p)))},d.onError=function(p){this.messages.push(new yr(this.scheduler.clock,Pi.createOnError(p)))},d.onCompleted=function(){this.messages.push(new yr(this.scheduler.clock,Pi.createOnCompleted()))},u}(vi);function wr(h,u){var d=this;this.scheduler=h,this.messages=u,this.subscriptions=[],this.observers=[];for(var p=0,m=this.messages.length;p<m;p++){var b=this.messages[p];!function(A){h.scheduleAbsolute(null,b.time,function(){for(var k=d.observers.slice(0),X=0,G=k.length;X<G;X++)A.accept(k[X]);return je})}(b.value)}}wr.prototype.then=function(h,u){var d=this;this.subscriptions.push(new br(this.scheduler.clock));var m,p=this.subscriptions.length-1,b=pe.Observer.create(function(C){var A=h(C);if(A&&"function"==typeof A.then)m=A;else{var k=d.scheduler.clock;m=new wr(d.scheduler,[pe.ReactiveTest.onNext(k,mt),pe.ReactiveTest.onCompleted(k)])}var X=d.observers.indexOf(b);d.observers.splice(X,1),d.subscriptions[p]=new br(d.subscriptions[p].subscribe,d.scheduler.clock)},function(C){u(C);var A=d.observers.indexOf(b);d.observers.splice(A,1),d.subscriptions[p]=new br(d.subscriptions[p].subscribe,d.scheduler.clock)});return this.observers.push(b),m||new wr(this.scheduler,this.messages)};var Lv=function(h){function u(d,p){h.call(this);var m,C=this;this.scheduler=d,this.messages=p,this.subscriptions=[],this.observers=[];for(var A=0,k=this.messages.length;A<k;A++)!function(X){d.scheduleAbsolute(null,m.time,function(){for(var G=C.observers.slice(0),J=0,ye=G.length;J<ye;J++)X.accept(G[J]);return je})}((m=this.messages[A]).value)}return P(u,h),u.prototype._subscribe=function(d){var p=this;this.observers.push(d),this.subscriptions.push(new br(this.scheduler.clock));var m=this.subscriptions.length-1;return Ot(function(){var b=p.observers.indexOf(d);p.observers.splice(b,1),p.subscriptions[m]=new br(p.subscriptions[m].subscribe,p.scheduler.clock)})},u}(Ie),Nf=function(h){function u(d,p){h.call(this),this.scheduler=d,this.messages=p,this.subscriptions=[]}return P(u,h),u.prototype._subscribe=function(d){var p,b=this;this.subscriptions.push(new br(this.scheduler.clock));for(var C=this.subscriptions.length-1,A=new it,k=0,X=this.messages.length;k<X;k++)!function(G){A.add(b.scheduler.scheduleRelative(null,p.time,function(){return G.accept(d),je}))}((p=this.messages[k]).value);return Ot(function(){b.subscriptions[C]=new br(b.subscriptions[C].subscribe,b.scheduler.clock),A.dispose()})},u}(Ie);pe.TestScheduler=function(h){function u(p,m){return p>m?1:p<m?-1:0}function d(){h.call(this,0,u)}return P(d,h),d.prototype.scheduleAbsolute=function(p,m,b){return m<=this.clock&&(m=this.clock+1),h.prototype.scheduleAbsolute.call(this,p,m,b)},d.prototype.add=function(p,m){return p+m},d.prototype.toAbsoluteTime=function(p){return new Date(p).getTime()},d.prototype.toRelativeTime=function(p){return p},d.prototype.startScheduler=function(p,m){m||(m={}),null==m.created&&(m.created=ac.created),null==m.subscribed&&(m.subscribed=ac.subscribed),null==m.disposed&&(m.disposed=ac.disposed);var C,A,b=this.createObserver();return this.scheduleAbsolute(null,m.created,function(){return C=p(),je}),this.scheduleAbsolute(null,m.subscribed,function(){return A=C.subscribe(b),je}),this.scheduleAbsolute(null,m.disposed,function(){return A.dispose(),je}),this.start(),b},d.prototype.createHotObservable=function(){var m,p=arguments.length;if(Array.isArray(arguments[0]))m=arguments[0];else{m=new Array(p);for(var b=0;b<p;b++)m[b]=arguments[b]}return new Lv(this,m)},d.prototype.createColdObservable=function(){var m,p=arguments.length;if(Array.isArray(arguments[0]))m=arguments[0];else{m=new Array(p);for(var b=0;b<p;b++)m[b]=arguments[b]}return new Nf(this,m)},d.prototype.createResolvedPromise=function(p,m){return new wr(this,[pe.ReactiveTest.onNext(p,m),pe.ReactiveTest.onCompleted(p)])},d.prototype.createRejectedPromise=function(p,m){return new wr(this,[pe.ReactiveTest.onError(p,m)])},d.prototype.createObserver=function(){return new lc(this)},d}(Qu);var Yt=pe.AnonymousObservable=function(h){function d(m,b){var C=b[0],A=b[1],k=L(A.__subscribe).call(A,C);k===B&&!C.fail(B.e)&&Pt(B.e),C.setDisposable(function u(m){return m&&Be(m.dispose)?m:Be(m)?Ot(m):je}(k))}function p(m,b){this.source=b,this.__subscribe=m,h.call(this)}return P(p,h),p.prototype._subscribe=function(m){var b=new so(m),C=[b,this];return xe.scheduleRequired()?xe.schedule(C,d):d(0,C),b},p}(Ie),so=function(h){function u(p){h.call(this),this.observer=p,this.m=new _e}P(u,h);var d=u.prototype;return d.next=function(p){var m=L(this.observer.onNext).call(this.observer,p);m===B&&(this.dispose(),Pt(m.e))},d.error=function(p){var m=L(this.observer.onError).call(this.observer,p);this.dispose(),m===B&&Pt(m.e)},d.completed=function(){var p=L(this.observer.onCompleted).call(this.observer);this.dispose(),p===B&&Pt(p.e)},d.setDisposable=function(p){this.m.setDisposable(p)},d.getDisposable=function(){return this.m.getDisposable()},d.dispose=function(){h.prototype.dispose.call(this),this.m.dispose()},u}(Te),Bv=function(h){function u(d,p){this._m=d,this._u=p,h.call(this)}return P(u,h),u.prototype.subscribeCore=function(d){return new Je(this._m.getDisposable(),this._u.subscribe(d))},u}(Ce),eh=function(h){function u(d,p,m){h.call(this),this.key=d,this.underlyingObservable=m?new Bv(m,p):p}return P(u,h),u.prototype._subscribe=function(d){return this.underlyingObservable.subscribe(d)},u}(Ie),Fn=pe.Subject=function(h){function u(){h.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return P(u,h),Ae(u.prototype,vi.prototype,{_subscribe:function(d){return Fe(this),this.isStopped?this.hasError?(d.onError(this.error),je):(d.onCompleted(),je):(this.observers.push(d),new tc(this,d))},hasObservers:function(){return Fe(this),this.observers.length>0},onCompleted:function(){if(Fe(this),!this.isStopped){this.isStopped=!0;for(var d=0,p=Cn(this.observers),m=p.length;d<m;d++)p[d].onCompleted();this.observers.length=0}},onError:function(d){if(Fe(this),!this.isStopped){this.isStopped=!0,this.error=d,this.hasError=!0;for(var p=0,m=Cn(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){if(Fe(this),!this.isStopped)for(var p=0,m=Cn(this.observers),b=m.length;p<b;p++)m[p].onNext(d)},dispose:function(){this.isDisposed=!0,this.observers=null}}),u.create=function(d,p){return new Jo(d,p)},u}(Ie),Qo=pe.AsyncSubject=function(h){function u(){h.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return P(u,h),Ae(u.prototype,vi.prototype,{_subscribe:function(d){return Fe(this),this.isStopped?(this.hasError?d.onError(this.error):(this.hasValue&&d.onNext(this.value),d.onCompleted()),je):(this.observers.push(d),new tc(this,d))},hasObservers:function(){return Fe(this),this.observers.length>0},onCompleted:function(){var d;if(Fe(this),!this.isStopped){this.isStopped=!0;var m=Cn(this.observers),p=m.length;if(this.hasValue)for(d=0;d<p;d++){var b=m[d];b.onNext(this.value),b.onCompleted()}else for(d=0;d<p;d++)m[d].onCompleted();this.observers.length=0}},onError:function(d){if(Fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=d;for(var p=0,m=Cn(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){Fe(this),!this.isStopped&&(this.value=d,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),u}(Ie),th=pe.BehaviorSubject=function(h){function u(d){h.call(this),this.value=d,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return P(u,h),Ae(u.prototype,vi.prototype,{_subscribe:function(d){return Fe(this),this.isStopped?(this.hasError?d.onError(this.error):d.onCompleted(),je):(this.observers.push(d),d.onNext(this.value),new tc(this,d))},getValue:function(){return Fe(this),this.hasError&&Pt(this.error),this.value},hasObservers:function(){return Fe(this),this.observers.length>0},onCompleted:function(){if(Fe(this),!this.isStopped){this.isStopped=!0;for(var d=0,p=Cn(this.observers),m=p.length;d<m;d++)p[d].onCompleted();this.observers.length=0}},onError:function(d){if(Fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=d;for(var p=0,m=Cn(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){if(Fe(this),!this.isStopped){this.value=d;for(var p=0,m=Cn(this.observers),b=m.length;p<b;p++)m[p].onNext(d)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),u}(Ie),Ga=pe.ReplaySubject=function(h){var u=Math.pow(2,53)-1;function p(m,b,C){this.bufferSize=m??u,this.windowSize=b??u,this.scheduler=C||xe,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,h.call(this)}return P(p,h),Ae(p.prototype,vi.prototype,{_subscribe:function(m){Fe(this);var b=new Gi(this.scheduler,m),C=function d(m,b){return Ot(function(){b.dispose(),!m.isDisposed&&m.observers.splice(m.observers.indexOf(b),1)})}(this,b);this._trim(this.scheduler.now()),this.observers.push(b);for(var A=0,k=this.q.length;A<k;A++)b.onNext(this.q[A].value);return this.hasError?b.onError(this.error):this.isStopped&&b.onCompleted(),b.ensureActive(),C},hasObservers:function(){return Fe(this),this.observers.length>0},_trim:function(m){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&m-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(m){if(Fe(this),!this.isStopped){var b=this.scheduler.now();this.q.push({interval:b,value:m}),this._trim(b);for(var C=0,A=Cn(this.observers),k=A.length;C<k;C++){var X=A[C];X.onNext(m),X.ensureActive()}}},onError:function(m){if(Fe(this),!this.isStopped){this.isStopped=!0,this.error=m,this.hasError=!0;var b=this.scheduler.now();this._trim(b);for(var C=0,A=Cn(this.observers),k=A.length;C<k;C++){var X=A[C];X.onError(m),X.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Fe(this),!this.isStopped){this.isStopped=!0;var m=this.scheduler.now();this._trim(m);for(var b=0,C=Cn(this.observers),A=C.length;b<A;b++){var k=C[b];k.onCompleted(),k.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),p}(Ie),Jo=pe.AnonymousSubject=function(h){function u(d,p){this.observer=d,this.observable=p,h.call(this)}return P(u,h),Ae(u.prototype,vi.prototype,{_subscribe:function(d){return this.observable.subscribe(d)},onCompleted:function(){this.observer.onCompleted()},onError:function(d){this.observer.onError(d)},onNext:function(d){this.observer.onNext(d)}}),u}(Ie);pe.Pauser=function(h){function u(){h.call(this)}return P(u,h),u.prototype.pause=function(){this.onNext(!1)},u.prototype.resume=function(){this.onNext(!0)},u}(Fn),Re.Rx=pe,(Ne=function(){return pe}.call(Ye,ze,Ye,qt))!==mt&&(qt.exports=Ne);var ea=Y()}.call(this)},308:function(qt,Ye,ze){var Ne;qt=ze.nmd(qt),function(mt){"object"==typeof global&&global;var ht,et=2147483647,Tn=/^xn--/,kt=/[^\x20-\x7E]/,It=/[\x2E\u3002\uFF0E\uFF61]/g,Pn={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},qe=Math.floor,Be=String.fromCharCode;function B(W){throw RangeError(Pn[W])}function Ut(W,Y){for(var z=W.length,te=[];z--;)te[z]=Y(W[z]);return te}function L(W,Y){var z=W.split("@"),te="";return z.length>1&&(te=z[0]+"@",W=z[1]),te+Ut((W=W.replace(It,".")).split("."),Y).join(".")}function Pt(W){for(var re,fe,Y=[],z=0,te=W.length;z<te;)(re=W.charCodeAt(z++))>=55296&&re<=56319&&z<te?56320==(64512&(fe=W.charCodeAt(z++)))?Y.push(((1023&re)<<10)+(1023&fe)+65536):(Y.push(re),z--):Y.push(re);return Y}function Kt(W){return Ut(W,function(Y){var z="";return Y>65535&&(z+=Be((Y-=65536)>>>10&1023|55296),Y=56320|1023&Y),z+Be(Y)}).join("")}function An(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:36}function fn(W,Y){return W+22+75*(W<26)-((0!=Y)<<5)}function N(W,Y,z){var te=0;for(W=z?qe(W/700):W>>1,W+=qe(W/Y);W>455;te+=36)W=qe(W/35);return qe(te+36*W/(W+38))}function $(W){var te,be,ce,we,Ue,tt,Mt,Et,ke,gt,Y=[],z=W.length,re=0,fe=128,se=72;for((be=W.lastIndexOf("-"))<0&&(be=0),ce=0;ce<be;++ce)W.charCodeAt(ce)>=128&&B("not-basic"),Y.push(W.charCodeAt(ce));for(we=be>0?be+1:0;we<z;){for(Ue=re,tt=1,Mt=36;we>=z&&B("invalid-input"),((Et=An(W.charCodeAt(we++)))>=36||Et>qe((et-re)/tt))&&B("overflow"),re+=Et*tt,!(Et<(ke=Mt<=se?1:Mt>=se+26?26:Mt-se));Mt+=36)tt>qe(et/(gt=36-ke))&&B("overflow"),tt*=gt;se=N(re-Ue,te=Y.length+1,0==Ue),qe(re/te)>et-fe&&B("overflow"),fe+=qe(re/te),re%=te,Y.splice(re++,0,fe)}return Kt(Y)}function U(W){var Y,z,te,re,fe,se,be,ce,we,Ue,tt,Et,ke,gt,dr,Mt=[];for(Et=(W=Pt(W)).length,Y=128,z=0,fe=72,se=0;se<Et;++se)(tt=W[se])<128&&Mt.push(Be(tt));for(te=re=Mt.length,re&&Mt.push("-");te<Et;){for(be=et,se=0;se<Et;++se)(tt=W[se])>=Y&&tt<be&&(be=tt);for(be-Y>qe((et-z)/(ke=te+1))&&B("overflow"),z+=(be-Y)*ke,Y=be,se=0;se<Et;++se)if((tt=W[se])<Y&&++z>et&&B("overflow"),tt==Y){for(ce=z,we=36;!(ce<(Ue=we<=fe?1:we>=fe+26?26:we-fe));we+=36)Mt.push(Be(fn(Ue+(dr=ce-Ue)%(gt=36-Ue),0))),ce=qe(dr/gt);Mt.push(Be(fn(ce,0))),fe=N(z,ke,te==re),z=0,++te}++z,++Y}return Mt.join("")}ht={version:"1.3.2",ucs2:{decode:Pt,encode:Kt},decode:$,encode:U,toASCII:function le(W){return L(W,function(Y){return kt.test(Y)?"xn--"+U(Y):Y})},toUnicode:function ae(W){return L(W,function(Y){return Tn.test(Y)?$(Y.slice(4).toLowerCase()):Y})}},void 0!==(Ne=function(){return ht}.call(Ye,ze,Ye,qt))&&(qt.exports=Ne)}()},762:(qt,Ye,ze)=>{"use strict";var mt=ze(308),ot=ze(796);function pt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Ye.Qc=Kn,Ye.DB=function Be(B,Ut){return Kn(B,!1,!0).resolve(Ut)},Ye.WU=function qe(B){return ot.isString(B)&&(B=Kn(B)),B instanceof pt?B.format():pt.prototype.format.call(B)};var Pe=/^([a-z0-9.+-]+:)/i,ht=/:[0-9]*$/,et=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qe=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),jt=["'"].concat(Qe),en=["%","/","?",";","#"].concat(jt),Re=["/","?","#"],Se=/^[+a-z0-9A-Z_-]{0,63}$/,gn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tn={javascript:!0,"javascript:":!0},kt={javascript:!0,"javascript:":!0},It={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Pn=ze(137);function Kn(B,Ut,L){if(B&&ot.isObject(B)&&B instanceof pt)return B;var Pt=new pt;return Pt.parse(B,Ut,L),Pt}pt.prototype.parse=function(B,Ut,L){if(!ot.isString(B))throw new TypeError("Parameter 'url' must be a string, not "+typeof B);var Pt=B.indexOf("?"),Kt=-1!==Pt&&Pt<B.indexOf("#")?"?":"#",An=B.split(Kt);An[0]=An[0].replace(/\\/g,"/");var N=B=An.join(Kt);if(N=N.trim(),!L&&1===B.split("#").length){var $=et.exec(N);if($)return this.path=N,this.href=N,this.pathname=$[1],$[2]?(this.search=$[2],this.query=Ut?Pn.parse(this.search.substr(1)):this.search.substr(1)):Ut&&(this.search="",this.query={}),this}var U=Pe.exec(N);if(U){var ae=(U=U[0]).toLowerCase();this.protocol=ae,N=N.substr(U.length)}if(L||U||N.match(/^\/\/[^@\/]+@[^@\/]+/)){var le="//"===N.substr(0,2);le&&(!U||!kt[U])&&(N=N.substr(2),this.slashes=!0)}if(!kt[U]&&(le||U&&!It[U])){for(var W=-1,Y=0;Y<Re.length;Y++)-1!==(z=N.indexOf(Re[Y]))&&(-1===W||z<W)&&(W=z);var te,re;for(-1!==(re=-1===W?N.lastIndexOf("@"):N.lastIndexOf("@",W))&&(te=N.slice(0,re),N=N.slice(re+1),this.auth=decodeURIComponent(te)),W=-1,Y=0;Y<en.length;Y++){var z;-1!==(z=N.indexOf(en[Y]))&&(-1===W||z<W)&&(W=z)}-1===W&&(W=N.length),this.host=N.slice(0,W),N=N.slice(W),this.parseHost(),this.hostname=this.hostname||"";var fe="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!fe)for(var se=this.hostname.split(/\./),be=(Y=0,se.length);Y<be;Y++){var ce=se[Y];if(ce&&!ce.match(Se)){for(var we="",Ue=0,tt=ce.length;Ue<tt;Ue++)ce.charCodeAt(Ue)>127?we+="x":we+=ce[Ue];if(!we.match(Se)){var Mt=se.slice(0,Y),Et=se.slice(Y+1),ke=ce.match(gn);ke&&(Mt.push(ke[1]),Et.unshift(ke[2])),Et.length&&(N="/"+Et.join(".")+N),this.hostname=Mt.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),fe||(this.hostname=mt.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,fe&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==N[0]&&(N="/"+N))}if(!Tn[ae])for(Y=0,be=jt.length;Y<be;Y++){var Tr=jt[Y];if(-1!==N.indexOf(Tr)){var fr=encodeURIComponent(Tr);fr===Tr&&(fr=escape(Tr)),N=N.split(Tr).join(fr)}}var Js=N.indexOf("#");-1!==Js&&(this.hash=N.substr(Js),N=N.slice(0,Js));var Ar=N.indexOf("?");return-1!==Ar?(this.search=N.substr(Ar),this.query=N.substr(Ar+1),Ut&&(this.query=Pn.parse(this.query)),N=N.slice(0,Ar)):Ut&&(this.search="",this.query={}),N&&(this.pathname=N),It[ae]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},pt.prototype.format=function(){var B=this.auth||"";B&&(B=(B=encodeURIComponent(B)).replace(/%3A/i,":"),B+="@");var Ut=this.protocol||"",L=this.pathname||"",Pt=this.hash||"",Kt=!1,An="";this.host?Kt=B+this.host:this.hostname&&(Kt=B+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Kt+=":"+this.port)),this.query&&ot.isObject(this.query)&&Object.keys(this.query).length&&(An=Pn.stringify(this.query));var fn=this.search||An&&"?"+An||"";return Ut&&":"!==Ut.substr(-1)&&(Ut+=":"),this.slashes||(!Ut||It[Ut])&&!1!==Kt?(Kt="//"+(Kt||""),L&&"/"!==L.charAt(0)&&(L="/"+L)):Kt||(Kt=""),Pt&&"#"!==Pt.charAt(0)&&(Pt="#"+Pt),fn&&"?"!==fn.charAt(0)&&(fn="?"+fn),Ut+Kt+(L=L.replace(/[?#]/g,function(N){return encodeURIComponent(N)}))+(fn=fn.replace("#","%23"))+Pt},pt.prototype.resolve=function(B){return this.resolveObject(Kn(B,!1,!0)).format()},pt.prototype.resolveObject=function(B){if(ot.isString(B)){var Ut=new pt;Ut.parse(B,!1,!0),B=Ut}for(var L=new pt,Pt=Object.keys(this),Kt=0;Kt<Pt.length;Kt++){var An=Pt[Kt];L[An]=this[An]}if(L.hash=B.hash,""===B.href)return L.href=L.format(),L;if(B.slashes&&!B.protocol){for(var fn=Object.keys(B),N=0;N<fn.length;N++){var $=fn[N];"protocol"!==$&&(L[$]=B[$])}return It[L.protocol]&&L.hostname&&!L.pathname&&(L.path=L.pathname="/"),L.href=L.format(),L}if(B.protocol&&B.protocol!==L.protocol){if(!It[B.protocol]){for(var U=Object.keys(B),ae=0;ae<U.length;ae++){var le=U[ae];L[le]=B[le]}return L.href=L.format(),L}if(L.protocol=B.protocol,B.host||kt[B.protocol])L.pathname=B.pathname;else{for(var be=(B.pathname||"").split("/");be.length&&!(B.host=be.shift()););B.host||(B.host=""),B.hostname||(B.hostname=""),""!==be[0]&&be.unshift(""),be.length<2&&be.unshift(""),L.pathname=be.join("/")}return L.search=B.search,L.query=B.query,L.host=B.host||"",L.auth=B.auth,L.hostname=B.hostname||B.host,L.port=B.port,(L.pathname||L.search)&&(L.path=(L.pathname||"")+(L.search||"")),L.slashes=L.slashes||B.slashes,L.href=L.format(),L}var z=L.pathname&&"/"===L.pathname.charAt(0),te=B.host||B.pathname&&"/"===B.pathname.charAt(0),re=te||z||L.host&&B.pathname,fe=re,se=L.pathname&&L.pathname.split("/")||[],ce=(be=B.pathname&&B.pathname.split("/")||[],L.protocol&&!It[L.protocol]);if(ce&&(L.hostname="",L.port=null,L.host&&(""===se[0]?se[0]=L.host:se.unshift(L.host)),L.host="",B.protocol&&(B.hostname=null,B.port=null,B.host&&(""===be[0]?be[0]=B.host:be.unshift(B.host)),B.host=null),re=re&&(""===be[0]||""===se[0])),te)L.host=B.host||""===B.host?B.host:L.host,L.hostname=B.hostname||""===B.hostname?B.hostname:L.hostname,L.search=B.search,L.query=B.query,se=be;else if(be.length)se||(se=[]),se.pop(),se=se.concat(be),L.search=B.search,L.query=B.query;else if(!ot.isNullOrUndefined(B.search))return ce&&(L.hostname=L.host=se.shift(),(we=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=we.shift(),L.host=L.hostname=we.shift())),L.search=B.search,L.query=B.query,(!ot.isNull(L.pathname)||!ot.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.href=L.format(),L;if(!se.length)return L.pathname=null,L.path=L.search?"/"+L.search:null,L.href=L.format(),L;for(var Ue=se.slice(-1)[0],tt=(L.host||B.host||se.length>1)&&("."===Ue||".."===Ue)||""===Ue,Mt=0,Et=se.length;Et>=0;Et--)"."===(Ue=se[Et])?se.splice(Et,1):".."===Ue?(se.splice(Et,1),Mt++):Mt&&(se.splice(Et,1),Mt--);if(!re&&!fe)for(;Mt--;Mt)se.unshift("..");re&&""!==se[0]&&(!se[0]||"/"!==se[0].charAt(0))&&se.unshift(""),tt&&"/"!==se.join("/").substr(-1)&&se.push("");var we,ke=""===se[0]||se[0]&&"/"===se[0].charAt(0);return ce&&(L.hostname=L.host=ke?"":se.length?se.shift():"",(we=!!(L.host&&L.host.indexOf("@")>0)&&L.host.split("@"))&&(L.auth=we.shift(),L.host=L.hostname=we.shift())),(re=re||L.host&&se.length)&&!ke&&se.unshift(""),se.length?L.pathname=se.join("/"):(L.pathname=null,L.path=null),(!ot.isNull(L.pathname)||!ot.isNull(L.search))&&(L.path=(L.pathname?L.pathname:"")+(L.search?L.search:"")),L.auth=B.auth||L.auth,L.slashes=L.slashes||B.slashes,L.href=L.format(),L},pt.prototype.parseHost=function(){var B=this.host,Ut=ht.exec(B);Ut&&(":"!==(Ut=Ut[0])&&(this.port=Ut.substr(1)),B=B.substr(0,B.length-Ut.length)),B&&(this.hostname=B)}},796:qt=>{"use strict";qt.exports={isString:function(Ye){return"string"==typeof Ye},isObject:function(Ye){return"object"==typeof Ye&&null!==Ye},isNull:function(Ye){return null===Ye},isNullOrUndefined:function(Ye){return null==Ye}}}},qt=>{qt(qt.s=518)}]);