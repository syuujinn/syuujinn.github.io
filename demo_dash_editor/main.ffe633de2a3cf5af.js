(self.webpackChunkeditor=self.webpackChunkeditor||[]).push([[179],{940:($t,ke,Se)=>{"use strict";function ge(n){return"function"==typeof n}function Wt(n){const t=n(i=>{Error.call(i),i.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Et=Wt(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function nt(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class Me{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:i}=this;if(ge(i))try{i()}catch(s){e=s instanceof Et?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ae(s)}catch(o){e=e??[],o instanceof Et?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Et(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Ae(e);else{if(e instanceof Me){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&nt(t,e)}remove(e){const{_finalizers:t}=this;t&&nt(t,e),e instanceof Me&&e._removeParent(this)}}Me.EMPTY=(()=>{const n=new Me;return n.closed=!0,n})();const Ge=Me.EMPTY;function Ne(n){return n instanceof Me||n&&"closed"in n&&ge(n.remove)&&ge(n.add)&&ge(n.unsubscribe)}function Ae(n){ge(n)?n():n.unsubscribe()}const De={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Je={setTimeout(n,e,...t){const{delegate:i}=Je;return i?.setTimeout?i.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Je;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Tt(n){Je.setTimeout(()=>{const{onUnhandledError:e}=De;if(!e)throw n;e(n)})}function ht(){}const qt=ln("C",void 0,void 0);function ln(n,e,t){return{kind:n,value:e,error:t}}let ut=null;function rt(n){if(De.useDeprecatedSynchronousErrorHandling){const e=!ut;if(e&&(ut={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:i}=ut;if(ut=null,t)throw i}}else n()}class Tn extends Me{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Ne(e)&&e.add(this)):this.destination=dt}static create(e,t,i){return new x(e,t,i)}next(e){this.isStopped?Ke(function Sn(n){return ln("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ke(function Pe(n){return ln("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ke(qt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const dn=Function.prototype.bind;function xn(n,e){return dn.call(n,e)}class rn{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(i){Y(i)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(i){Y(i)}else Y(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Y(t)}}}class x extends Tn{constructor(e,t,i){let r;if(super(),ge(e)||!e)r={next:e??void 0,error:t??void 0,complete:i??void 0};else{let s;this&&De.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&xn(e.next,s),error:e.error&&xn(e.error,s),complete:e.complete&&xn(e.complete,s)}):r=e}this.destination=new rn(r)}}function Y(n){De.useDeprecatedSynchronousErrorHandling?function mn(n){De.useDeprecatedSynchronousErrorHandling&&ut&&(ut.errorThrown=!0,ut.error=n)}(n):Tt(n)}function Ke(n,e){const{onStoppedNotification:t}=De;t&&Je.setTimeout(()=>t(n,e))}const dt={closed:!0,next:ht,error:function N(n){throw n},complete:ht},zt="function"==typeof Symbol&&Symbol.observable||"@@observable";function Lt(n){return n}function P(n){return 0===n.length?Lt:1===n.length?n[0]:function(t){return n.reduce((i,r)=>r(i),t)}}let T=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const i=new n;return i.source=this,i.operator=t,i}subscribe(t,i,r){const s=function O(n){return n&&n instanceof Tn||function G(n){return n&&ge(n.next)&&ge(n.error)&&ge(n.complete)}(n)&&Ne(n)}(t)?t:new x(t,i,r);return rt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(i){t.error(i)}}forEach(t,i){return new(i=H(i))((r,s)=>{const o=new x({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(t){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(t)}[zt](){return this}pipe(...t){return P(t)(this)}toPromise(t){return new(t=H(t))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return n.create=e=>new n(e),n})();function H(n){var e;return null!==(e=n??De.Promise)&&void 0!==e?e:Promise}const F=Wt(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let R=(()=>{class n extends T{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const i=new X(this,this);return i.operator=t,i}_throwIfClosed(){if(this.closed)throw new F}next(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(t)}})}error(t){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:i}=this;for(;i.length;)i.shift().error(t)}})}complete(){rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:i,isStopped:r,observers:s}=this;return i||r?Ge:(this.currentObservers=null,s.push(t),new Me(()=>{this.currentObservers=null,nt(s,t)}))}_checkFinalizedStatuses(t){const{hasError:i,thrownError:r,isStopped:s}=this;i?t.error(r):s&&t.complete()}asObservable(){const t=new T;return t.source=this,t}}return n.create=(e,t)=>new X(e,t),n})();class X extends R{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)}error(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Ge}}function z(n){return ge(n?.lift)}function Z(n){return e=>{if(z(e))return e.lift(function(t){try{return n(t,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(n,e,t,i,r){return new ce(n,e,t,i,r)}class ce extends Tn{constructor(e,t,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function $(n,e){return Z((t,i)=>{let r=0;t.subscribe(U(i,s=>{i.next(n.call(e,s,r++))}))})}function ns(n){return this instanceof ns?(this.v=n,this):new ns(n)}function Rc(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t.apply(n,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(d){i[d]&&(r[d]=function(g){return new Promise(function(m,y){s.push([d,g,m,y])>1||a(d,g)})})}function a(d,g){try{!function l(d){d.value instanceof ns?Promise.resolve(d.value.v).then(u,c):h(s[0][2],d)}(i[d](g))}catch(m){h(s[0][3],m)}}function u(d){a("next",d)}function c(d){a("throw",d)}function h(d,g){d(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function np(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function ts(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=n[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=n[s](o)).done,o.value)})}}}const mo=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function ca(n){return ge(n?.then)}function st(n){return ge(n[zt])}function Ci(n){return Symbol.asyncIterator&&ge(n?.[Symbol.asyncIterator])}function Vs(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Nc=function Xi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ye(n){return ge(n?.[Nc])}function Hs(n){return Rc(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:i,done:r}=yield ns(t.read());if(r)return yield ns(void 0);yield yield ns(i)}}finally{t.releaseLock()}})}function _o(n){return ge(n?.getReader)}function Jn(n){if(n instanceof T)return n;if(null!=n){if(st(n))return function sp(n){return new T(e=>{const t=n[zt]();if(ge(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(mo(n))return function Fc(n){return new T(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(ca(n))return function op(n){return new T(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Tt)})}(n);if(Ci(n))return f(n);if(ye(n))return function p(n){return new T(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(_o(n))return function _(n){return f(Hs(n))}(n)}throw Vs(n)}function f(n){return new T(e=>{(function E(n,e){var t,i,r,s;return function Wi(n,e,t,i){return new(t||(t=Promise))(function(s,o){function a(c){try{u(i.next(c))}catch(h){o(h)}}function l(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):function r(s){return s instanceof t?s:new t(function(o){o(s)})}(c.value).then(a,l)}u((i=i.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){try{for(t=np(n);!(i=yield t.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=t.return)&&(yield s.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function S(n,e,t,i=0,r=!1){const s=e.schedule(function(){t(),r?n.add(this.schedule(null,i)):this.unsubscribe()},i);if(n.add(s),!r)return s}function I(n,e,t=1/0){return ge(e)?I((i,r)=>$((s,o)=>e(i,s,r,o))(Jn(n(i,r))),t):("number"==typeof e&&(t=e),Z((i,r)=>function D(n,e,t,i,r,s,o,a){const l=[];let u=0,c=0,h=!1;const d=()=>{h&&!l.length&&!u&&e.complete()},g=y=>u<i?m(y):l.push(y),m=y=>{s&&e.next(y),u++;let v=!1;Jn(t(y,c++)).subscribe(U(e,b=>{r?.(b),s?g(b):e.next(b)},()=>{v=!0},void 0,()=>{if(v)try{for(u--;l.length&&u<i;){const b=l.shift();o?S(e,o,()=>m(b)):m(b)}d()}catch(b){e.error(b)}}))};return n.subscribe(U(e,g,()=>{h=!0,d()})),()=>{a?.()}}(i,r,n,t)))}function k(n=1/0){return I(Lt,n)}const L=new T(n=>n.complete());function $e(n){return n[n.length-1]}function tt(n){return ge($e(n))?n.pop():void 0}function Ze(n){return function he(n){return n&&ge(n.schedule)}($e(n))?n.pop():void 0}function ct(n,e=0){return Z((t,i)=>{t.subscribe(U(i,r=>S(i,n,()=>i.next(r),e),()=>S(i,n,()=>i.complete(),e),r=>S(i,n,()=>i.error(r),e)))})}function wt(n,e=0){return Z((t,i)=>{i.add(n.schedule(()=>t.subscribe(i),e))})}function Fe(n,e){if(!n)throw new Error("Iterable cannot be null");return new T(t=>{S(t,e,()=>{const i=n[Symbol.asyncIterator]();S(t,e,()=>{i.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function We(n,e){return e?function yt(n,e){if(null!=n){if(st(n))return function Dt(n,e){return Jn(n).pipe(wt(e),ct(e))}(n,e);if(mo(n))return function Rt(n,e){return new T(t=>{let i=0;return e.schedule(function(){i===n.length?t.complete():(t.next(n[i++]),t.closed||this.schedule())})})}(n,e);if(ca(n))return function Bt(n,e){return Jn(n).pipe(wt(e),ct(e))}(n,e);if(Ci(n))return Fe(n,e);if(ye(n))return function ft(n,e){return new T(t=>{let i;return S(t,e,()=>{i=n[Nc](),S(t,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void t.error(o)}s?t.complete():t.next(r)},0,!0)}),()=>ge(i?.return)&&i.return()})}(n,e);if(_o(n))return function Ue(n,e){return Fe(Hs(n),e)}(n,e)}throw Vs(n)}(n,e):Jn(n)}function Yt(...n){const e=Ze(n),t=function Gt(n,e){return"number"==typeof $e(n)?n.pop():e}(n,1/0),i=n;return i.length?1===i.length?Jn(i[0]):k(t)(We(i,e)):L}function jt(n={}){const{connector:e=(()=>new R),resetOnError:t=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=n;return s=>{let o,a,l,u=0,c=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},g=()=>{d(),o=l=void 0,c=h=!1},m=()=>{const y=o;g(),y?.unsubscribe()};return Z((y,v)=>{u++,!h&&!c&&d();const b=l=l??e();v.add(()=>{u--,0===u&&!h&&!c&&(a=di(m,r))}),b.subscribe(v),!o&&u>0&&(o=new x({next:A=>b.next(A),error:A=>{h=!0,d(),a=di(g,t,A),b.error(A)},complete:()=>{c=!0,d(),a=di(g,i),b.complete()}}),Jn(y).subscribe(o))})(s)}}function di(n,e,...t){if(!0===e)return void n();if(!1===e)return;const i=new x({next:()=>{i.unsubscribe(),n()}});return e(...t).subscribe(i)}function At(n){for(let e in n)if(n[e]===At)return e;throw Error("Could not find renamed property on target object.")}function kt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(kt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function ha(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const lR=At({__forward_ref__:At});function sn(n){return n.__forward_ref__=sn,n.toString=function(){return kt(this())},n}function ze(n){return ap(n)?n():n}function ap(n){return"function"==typeof n&&n.hasOwnProperty(lR)&&n.__forward_ref__===sn}function lp(n){return n&&!!n.\u0275providers}const ub="https://g.co/ng/security#xss";class j extends Error{constructor(e,t){super(function Lc(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function ot(n){return"string"==typeof n?n:null==n?"":String(n)}function kc(n,e){throw new j(-201,!1)}function qi(n,e){null==n&&function Zt(n,e,t,i){throw new Error(`ASSERTION ERROR: ${n}`+(null==i?"":` [Expected=> ${t} ${i} ${e} <=Actual]`))}(e,n,null,"!=")}function we(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Dn(n){return{providers:n.providers||[],imports:n.imports||[]}}function Bc(n){return cb(n,Uc)||cb(n,db)}function cb(n,e){return n.hasOwnProperty(e)?n[e]:null}function hb(n){return n&&(n.hasOwnProperty(up)||n.hasOwnProperty(_R))?n[up]:null}const Uc=At({\u0275prov:At}),up=At({\u0275inj:At}),db=At({ngInjectableDef:At}),_R=At({ngInjectorDef:At});var Xe=(()=>((Xe=Xe||{})[Xe.Default=0]="Default",Xe[Xe.Host=1]="Host",Xe[Xe.Self=2]="Self",Xe[Xe.SkipSelf=4]="SkipSelf",Xe[Xe.Optional=8]="Optional",Xe))();let cp;function Yi(n){const e=cp;return cp=n,e}function fb(n,e,t){const i=Bc(n);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:t&Xe.Optional?null:void 0!==e?e:void kc(kt(n))}const un=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ml={},hp="__NG_DI_FLAG__",Vc="ngTempTokenPath",bR=/\n/gm,pb="__source";let Rl;function da(n){const e=Rl;return Rl=n,e}function wR(n,e=Xe.Default){if(void 0===Rl)throw new j(-203,!1);return null===Rl?fb(n,void 0,e):Rl.get(n,e&Xe.Optional?null:void 0,e)}function de(n,e=Xe.Default){return(function yR(){return cp}()||wR)(ze(n),e)}function It(n,e=Xe.Default){return de(n,Hc(e))}function Hc(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function dp(n){const e=[];for(let t=0;t<n.length;t++){const i=ze(n[t]);if(Array.isArray(i)){if(0===i.length)throw new j(900,!1);let r,s=Xe.Default;for(let o=0;o<i.length;o++){const a=i[o],l=CR(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(de(r,s))}else e.push(de(i))}return e}function Pl(n,e){return n[hp]=e,n.prototype[hp]=e,n}function CR(n){return n[hp]}function js(n){return{toString:n}.toString()}var fr=(()=>((fr=fr||{})[fr.OnPush=0]="OnPush",fr[fr.Default=1]="Default",fr))(),pr=(()=>{return(n=pr||(pr={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",pr;var n})();const rs={},Xt=[],Gc=At({\u0275cmp:At}),fp=At({\u0275dir:At}),pp=At({\u0275pipe:At}),mb=At({\u0275mod:At}),ss=At({\u0275fac:At}),Ol=At({__NG_ELEMENT_ID__:At});let xR=0;function os(n){return js(()=>{const t=!0===n.standalone,i={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===fr.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Xt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||pr.Emulated,id:"c"+xR++,styles:n.styles||Xt,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=n.dependencies,o=n.features;return r.inputs=vb(n.inputs,i),r.outputs=vb(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(_b).filter(yb):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(pi).filter(yb):null,r})}function _b(n){return Qt(n)||ei(n)}function yb(n){return null!==n}function Nn(n){return js(()=>({type:n.type,bootstrap:n.bootstrap||Xt,declarations:n.declarations||Xt,imports:n.imports||Xt,exports:n.exports||Xt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function vb(n,e){if(null==n)return rs;const t={};for(const i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),t[r]=i,e&&(e[r]=s)}return t}const Be=os;function fi(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Qt(n){return n[Gc]||null}function ei(n){return n[fp]||null}function pi(n){return n[pp]||null}function Oi(n,e){const t=n[mb]||null;if(!t&&!0===e)throw new Error(`Type ${kt(n)} does not have '\u0275mod' property.`);return t}function Ni(n){return Array.isArray(n)&&"object"==typeof n[1]}function mr(n){return Array.isArray(n)&&!0===n[1]}function _p(n){return 0!=(4&n.flags)}function kl(n){return n.componentOffset>-1}function Xc(n){return 1==(1&n.flags)}function _r(n){return null!==n.template}function IR(n){return 0!=(256&n[2])}function vo(n,e){return n.hasOwnProperty(ss)?n[ss]:null}class PR{constructor(e,t,i){this.previousValue=e,this.currentValue=t,this.firstChange=i}isFirstChange(){return this.firstChange}}function Si(){return Tb}function Tb(n){return n.type.prototype.ngOnChanges&&(n.setInput=NR),OR}function OR(){const n=Db(this),e=n?.current;if(e){const t=n.previous;if(t===rs)n.previous=e;else for(let i in e)t[i]=e[i];n.current=null,this.ngOnChanges(e)}}function NR(n,e,t,i){const r=this.declaredInputs[t],s=Db(n)||function FR(n,e){return n[xb]=e}(n,{previous:rs,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new PR(l&&l.currentValue,e,a===rs),n[i]=e}Si.ngInherit=!0;const xb="__ngSimpleChanges__";function Db(n){return n[xb]||null}function qn(n){for(;Array.isArray(n);)n=n[0];return n}function qc(n,e){return qn(e[n])}function Fi(n,e){return qn(e[n.index])}function Mb(n,e){return n.data[e]}function ya(n,e){return n[e]}function Li(n,e){const t=e[n];return Ni(t)?t:t[0]}function Yc(n){return 64==(64&n[2])}function $s(n,e){return null==e?null:n[e]}function Rb(n){n[18]=0}function vp(n,e){n[5]+=e;let t=n,i=n[3];for(;null!==i&&(1===e&&1===t[5]||-1===e&&0===t[5]);)i[5]+=e,t=i,i=i[3]}const at={lFrame:Hb(null),bindingsEnabled:!0};function Ob(){return at.bindingsEnabled}function K(){return at.lFrame.lView}function Ut(){return at.lFrame.tView}function Zi(n){return at.lFrame.contextLView=n,n[8]}function Qi(n){return at.lFrame.contextLView=null,n}function Yn(){let n=Nb();for(;null!==n&&64===n.type;)n=n.parent;return n}function Nb(){return at.lFrame.currentTNode}function Lr(n,e){const t=at.lFrame;t.currentTNode=n,t.isParent=e}function bp(){return at.lFrame.isParent}function Ep(){at.lFrame.isParent=!1}function mi(){const n=at.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function va(){return at.lFrame.bindingIndex++}function qR(n,e){const t=at.lFrame;t.bindingIndex=t.bindingRootIndex=n,wp(e)}function wp(n){at.lFrame.currentDirectiveIndex=n}function Bb(){return at.lFrame.currentQueryIndex}function Sp(n){at.lFrame.currentQueryIndex=n}function KR(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Ub(n,e,t){if(t&Xe.SkipSelf){let r=e,s=n;for(;!(r=r.parent,null!==r||t&Xe.Host||(r=KR(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,n=s}const i=at.lFrame=Vb();return i.currentTNode=e,i.lView=n,!0}function Tp(n){const e=Vb(),t=n[1];at.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Vb(){const n=at.lFrame,e=null===n?null:n.child;return null===e?Hb(n):e}function Hb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Gb(){const n=at.lFrame;return at.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jb=Gb;function xp(){const n=Gb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _i(){return at.lFrame.selectedIndex}function bo(n){at.lFrame.selectedIndex=n}function _n(){const n=at.lFrame;return Mb(n.tView,n.selectedIndex)}function Kc(n,e){for(let t=e.directiveStart,i=e.directiveEnd;t<i;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),l&&(n.viewHooks||(n.viewHooks=[])).push(-t,l),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=c&&(n.destroyHooks||(n.destroyHooks=[])).push(t,c)}}function Zc(n,e,t){$b(n,e,3,t)}function Qc(n,e,t,i){(3&n[2])===t&&$b(n,e,t,i)}function Dp(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function $b(n,e,t,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&n[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(n[18]+=65536),(a<s||-1==s)&&(sP(n,t,e,l),n[18]=(4294901760&n[18])+l+2),l++}function sP(n,e,t,i){const r=t[i]<0,s=t[i+1],a=n[r?-t[i]:t[i]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Ul{constructor(e,t,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=i}}function Ip(n,e,t){let i=0;for(;i<t.length;){const r=t[i];if("number"==typeof r){if(0!==r)break;i++;const s=t[i++],o=t[i++],a=t[i++];n.setAttribute(e,o,a,s)}else{const s=r,o=t[++i];zb(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),i++}}return i}function Wb(n){return 3===n||4===n||6===n}function zb(n){return 64===n.charCodeAt(0)}function Vl(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?t=r:0===t||Xb(n,t,r,null,-1===t||2===t?e[++i]:null)}}return n}function Xb(n,e,t,i,r){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===i)return void(null!==r&&(n[s+1]=r));if(i===n[s+1])return void(n[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==i&&n.splice(s++,0,i),null!==r&&n.splice(s++,0,r)}function qb(n){return-1!==n}function Jc(n){return 32767&n}function eh(n,e){let t=function uP(n){return n>>16}(n),i=e;for(;t>0;)i=i[15],t--;return i}let Mp=!0;function th(n){const e=Mp;return Mp=n,e}let cP=0;const kr={};function nh(n,e){const t=Zb(n,e);if(-1!==t)return t;const i=e[1];i.firstCreatePass&&(n.injectorIndex=e.length,Rp(i.data,n),Rp(e,null),Rp(i.blueprint,null));const r=Pp(n,e),s=n.injectorIndex;if(qb(r)){const o=Jc(r),a=eh(r,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=r,s}function Rp(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Zb(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function Pp(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,i=null,r=e;for(;null!==r;){if(i=s0(r),null===i)return-1;if(t++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|t<<16}return-1}function Op(n,e,t){!function hP(n,e,t){let i;"string"==typeof t?i=t.charCodeAt(0)||0:t.hasOwnProperty(Ol)&&(i=t[Ol]),null==i&&(i=t[Ol]=cP++);const r=255&i;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function Qb(n,e,t){if(t&Xe.Optional||void 0!==n)return n;kc()}function Jb(n,e,t,i){if(t&Xe.Optional&&void 0===i&&(i=null),0==(t&(Xe.Self|Xe.Host))){const r=n[9],s=Yi(void 0);try{return r?r.get(e,i,t&Xe.Optional):fb(e,i,t&Xe.Optional)}finally{Yi(s)}}return Qb(i,0,t)}function e0(n,e,t,i=Xe.Default,r){if(null!==n){if(1024&e[2]){const o=function mP(n,e,t,i,r){let s=n,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=t0(s,o,t,i|Xe.Self,kr);if(a!==kr)return a;let l=s.parent;if(!l){const u=o[21];if(u){const c=u.get(t,kr,i);if(c!==kr)return c}l=s0(o),o=o[15]}s=l}return r}(n,e,t,i,kr);if(o!==kr)return o}const s=t0(n,e,t,i,kr);if(s!==kr)return s}return Jb(e,t,i,r)}function t0(n,e,t,i,r){const s=function pP(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ol)?n[Ol]:void 0;return"number"==typeof e?e>=0?255&e:gP:e}(t);if("function"==typeof s){if(!Ub(e,n,i))return i&Xe.Host?Qb(r,0,i):Jb(e,t,i,r);try{const o=s(i);if(null!=o||i&Xe.Optional)return o;kc()}finally{jb()}}else if("number"==typeof s){let o=null,a=Zb(n,e),l=-1,u=i&Xe.Host?e[16][6]:null;for((-1===a||i&Xe.SkipSelf)&&(l=-1===a?Pp(n,e):e[a+8],-1!==l&&r0(i,!1)?(o=e[1],a=Jc(l),e=eh(l,e)):a=-1);-1!==a;){const c=e[1];if(n0(s,a,c.data)){const h=fP(a,e,t,o,i,u);if(h!==kr)return h}l=e[a+8],-1!==l&&r0(i,e[1].data[a+8]===u)&&n0(s,a,e)?(o=c,a=Jc(l),e=eh(l,e)):a=-1}}return r}function fP(n,e,t,i,r,s){const o=e[1],a=o.data[n+8],c=ih(a,o,t,null==i?kl(a)&&Mp:i!=o&&0!=(3&a.type),r&Xe.Host&&s===a);return null!==c?Eo(e,o,c,a):kr}function ih(n,e,t,i,r){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,c=s>>20,d=r?a+c:n.directiveEnd;for(let g=i?a:a+c;g<d;g++){const m=o[g];if(g<l&&t===m||g>=l&&m.type===t)return g}if(r){const g=o[l];if(g&&_r(g)&&g.type===t)return l}return null}function Eo(n,e,t,i){let r=n[t];const s=e.data;if(function oP(n){return n instanceof Ul}(r)){const o=r;o.resolving&&function uR(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new j(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Kt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():ot(n)}(s[t]));const a=th(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Yi(o.injectImpl):null;Ub(n,i,Xe.Default);try{r=n[t]=o.factory(void 0,s,n,i),e.firstCreatePass&&t>=i.directiveStart&&function rP(n,e,t){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=Tb(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),s&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,s),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,s))}(t,s[t],e)}finally{null!==l&&Yi(l),th(a),o.resolving=!1,jb()}}return r}function n0(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function r0(n,e){return!(n&Xe.Self||n&Xe.Host&&e)}class Ea{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,i){return e0(this._tNode,this._lView,e,Hc(i),t)}}function gP(){return new Ea(Yn(),K())}function Fn(n){return js(()=>{const e=n.prototype.constructor,t=e[ss]||Np(e),i=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==i;){const s=r[ss]||Np(r);if(s&&s!==t)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function Np(n){return ap(n)?()=>{const e=Np(ze(n));return e&&e()}:vo(n)}function s0(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const Ca="__parameters__";function Ta(n,e,t){return js(()=>{const i=function Fp(n){return function(...t){if(n){const i=n(...t);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,u,c){const h=l.hasOwnProperty(Ca)?l[Ca]:Object.defineProperty(l,Ca,{value:[]})[Ca];for(;h.length<=c;)h.push(null);return(h[c]=h[c]||[]).push(o),l}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Te{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=we({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function wo(n,e){n.forEach(t=>Array.isArray(t)?wo(t,e):e(t))}function a0(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function sh(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function jl(n,e){const t=[];for(let i=0;i<n;i++)t.push(e);return t}function ki(n,e,t){let i=xa(n,e);return i>=0?n[1|i]=t:(i=~i,function bP(n,e,t,i){let r=n.length;if(r==e)n.push(t,i);else if(1===r)n.push(i,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=i}}(n,i,e,t)),i}function kp(n,e){const t=xa(n,e);if(t>=0)return n[1|t]}function xa(n,e){return function l0(n,e,t){let i=0,r=n.length>>t;for(;r!==i;){const s=i+(r-i>>1),o=n[s<<t];if(e===o)return s<<t;o>e?r=s:i=s+1}return~(r<<t)}(n,e,1)}const $l=Pl(Ta("Optional"),8),Wl=Pl(Ta("SkipSelf"),4);var Ti=(()=>((Ti=Ti||{})[Ti.Important=1]="Important",Ti[Ti.DashCase=2]="DashCase",Ti))();const jp=new Map;let GP=0;const Wp="__ngContext__";function ii(n,e){Ni(e)?(n[Wp]=e[20],function $P(n){jp.set(n[20],n)}(e)):n[Wp]=e}function Xp(n,e){return undefined(n,e)}function Yl(n){const e=n[3];return mr(e)?e[3]:e}function qp(n){return A0(n[13])}function Yp(n){return A0(n[4])}function A0(n){for(;null!==n&&!mr(n);)n=n[4];return n}function Aa(n,e,t,i,r){if(null!=i){let s,o=!1;mr(i)?s=i:Ni(i)&&(o=!0,i=i[0]);const a=qn(i);0===n&&null!==t?null==r?N0(e,t,a):Co(e,t,a,r||null,!0):1===n&&null!==t?Co(e,t,a,r||null,!0):2===n?function ng(n,e,t){const i=uh(n,e);i&&function cO(n,e,t,i){n.removeChild(e,t,i)}(n,i,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function fO(n,e,t,i,r){const s=t[7];s!==qn(t)&&Aa(e,n,i,s,r);for(let a=10;a<t.length;a++){const l=t[a];Kl(l[1],l,n,e,i,s)}}(e,n,s,t,r)}}function Zp(n,e,t){return n.createElement(e,t)}function M0(n,e){const t=n[9],i=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,vp(r,-1)),t.splice(i,1)}function Qp(n,e){if(n.length<=10)return;const t=10+e,i=n[t];if(i){const r=i[17];null!==r&&r!==n&&M0(r,i),e>0&&(n[t-1][4]=i[4]);const s=sh(n,10+e);!function nO(n,e){Kl(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function R0(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&Kl(n,e,t,3,null,null),function sO(n){let e=n[13];if(!e)return Jp(n[1],n);for(;e;){let t=null;if(Ni(e))t=e[13];else{const i=e[10];i&&(t=i)}if(!t){for(;e&&!e[4]&&e!==n;)Ni(e)&&Jp(e[1],e),e=e[3];null===e&&(e=n),Ni(e)&&Jp(e[1],e),t=e&&e[4]}e=t}}(e)}}function Jp(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function uO(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let i=0;i<t.length;i+=2){const r=e[t[i]];if(!(r instanceof Ul)){const s=t[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(n,e),function lO(n,e){const t=n.cleanup,i=e[7];let r=-1;if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=t[s+1]];t[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&mr(e[3])){t!==e[3]&&M0(t,e);const i=e[19];null!==i&&i.detachView(n)}!function WP(n){jp.delete(n[20])}(e)}}function P0(n,e,t){return function O0(n,e,t){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return t[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=n.data[i.directiveStart+r];if(s===pr.None||s===pr.Emulated)return null}return Fi(i,t)}}(n,e.parent,t)}function Co(n,e,t,i,r){n.insertBefore(e,t,i,r)}function N0(n,e,t){n.appendChild(e,t)}function F0(n,e,t,i,r){null!==i?Co(n,e,t,i,r):N0(n,e,t)}function uh(n,e){return n.parentNode(e)}function L0(n,e,t){return B0(n,e,t)}let dh,sg,fh,B0=function k0(n,e,t){return 40&n.type?Fi(n,t):null};function ch(n,e,t,i){const r=P0(n,i,e),s=e[11],a=L0(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(t))for(let l=0;l<t.length;l++)F0(s,r,t[l],a,!1);else F0(s,r,t,a,!1)}function hh(n,e){if(null!==e){const t=e.type;if(3&t)return Fi(e,n);if(4&t)return tg(-1,n[e.index]);if(8&t){const i=e.child;if(null!==i)return hh(n,i);{const r=n[e.index];return mr(r)?tg(-1,r):qn(r)}}if(32&t)return Xp(e,n)()||qn(n[e.index]);{const i=V0(n,e);return null!==i?Array.isArray(i)?i[0]:hh(Yl(n[16]),i):hh(n,e.next)}}return null}function V0(n,e){return null!==e?n[16][6].projection[e.projection]:null}function tg(n,e){const t=10+n+1;if(t<e.length){const i=e[t],r=i[1].firstChild;if(null!==r)return hh(i,r)}return e[7]}function ig(n,e,t,i,r,s,o){for(;null!=t;){const a=i[t.index],l=t.type;if(o&&0===e&&(a&&ii(qn(a),i),t.flags|=2),32!=(32&t.flags))if(8&l)ig(n,e,t.child,i,r,s,!1),Aa(e,n,r,a,s);else if(32&l){const u=Xp(t,i);let c;for(;c=u();)Aa(e,n,r,c,s);Aa(e,n,r,a,s)}else 16&l?H0(n,e,i,t,r,s):Aa(e,n,r,a,s);t=o?t.projectionNext:t.next}}function Kl(n,e,t,i,r,s){ig(t,i,n.firstChild,e,r,s,!1)}function H0(n,e,t,i,r,s){const o=t[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Aa(e,n,r,l[u],s);else ig(n,e,l,o[3],r,s,!0)}function G0(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function j0(n,e,t){const{mergedAttrs:i,classes:r,styles:s}=t;null!==i&&Ip(n,e,i),null!==r&&G0(n,e,r),null!==s&&function gO(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function So(n){return function rg(){if(void 0===dh&&(dh=null,un.trustedTypes))try{dh=un.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return dh}()?.createHTML(n)||n}function og(){if(void 0===fh&&(fh=null,un.trustedTypes))try{fh=un.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return fh}function W0(n){return og()?.createHTML(n)||n}function X0(n){return og()?.createScriptURL(n)||n}class q0{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ub})`}}function Ws(n){return n instanceof q0?n.changingThisBreaksApplicationSecurity:n}function Zl(n,e){const t=function TO(n){return n instanceof q0&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${ub})`)}return t===e}class xO{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(So(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch{return null}}}class DO{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const i=this.inertDocument.createElement("body");t.appendChild(i)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=So(e),t;const i=this.inertDocument.createElement("body");return i.innerHTML=So(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(i),i}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const o=t.item(r).name;("xmlns:ns1"===o||0===o.indexOf("ns1:"))&&e.removeAttribute(o)}let i=e.firstChild;for(;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}const IO=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function ag(n){return(n=String(n)).match(IO)?n:"unsafe:"+n}function cs(n){const e={};for(const t of n.split(","))e[t]=!0;return e}function Ql(...n){const e={};for(const t of n)for(const i in t)t.hasOwnProperty(i)&&(e[i]=!0);return e}const K0=cs("area,br,col,hr,img,wbr"),Z0=cs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Q0=cs("rp,rt"),lg=Ql(K0,Ql(Z0,cs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Ql(Q0,cs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ql(Q0,Z0)),ug=cs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),J0=Ql(ug,cs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),cs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),MO=cs("script,style,template");class RO{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,i=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?i=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,i&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!lg.hasOwnProperty(t))return this.sanitizedSomething=!0,!MO.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const i=e.attributes;for(let r=0;r<i.length;r++){const s=i.item(r),o=s.name,a=o.toLowerCase();if(!J0.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;ug[a]&&(l=ag(l)),this.buf.push(" ",o,'="',eE(l),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();lg.hasOwnProperty(t)&&!K0.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(eE(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const PO=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OO=/([^\#-~ |!])/g;function eE(n){return n.replace(/&/g,"&amp;").replace(PO,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(OO,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ph;function cg(n){return"content"in n&&function FO(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Ln=(()=>((Ln=Ln||{})[Ln.NONE=0]="NONE",Ln[Ln.HTML=1]="HTML",Ln[Ln.STYLE=2]="STYLE",Ln[Ln.SCRIPT=3]="SCRIPT",Ln[Ln.URL=4]="URL",Ln[Ln.RESOURCE_URL=5]="RESOURCE_URL",Ln))();function Jl(n){const e=eu();return e?W0(e.sanitize(Ln.HTML,n)||""):Zl(n,"HTML")?W0(Ws(n)):function NO(n,e){let t=null;try{ph=ph||function Y0(n){const e=new DO(n);return function AO(){try{return!!(new window.DOMParser).parseFromString(So(""),"text/html")}catch{return!1}}()?new xO(e):e}(n);let i=e?String(e):"";t=ph.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=t.innerHTML,t=ph.getInertBodyElement(i)}while(i!==s);return So((new RO).sanitizeChildren(cg(t)||t))}finally{if(t){const i=cg(t)||t;for(;i.firstChild;)i.removeChild(i.firstChild)}}}(function $0(){return void 0!==sg?sg:typeof document<"u"?document:void 0}(),ot(n))}function gh(n){const e=eu();return e?e.sanitize(Ln.URL,n)||"":Zl(n,"URL")?Ws(n):ag(ot(n))}function tE(n){const e=eu();if(e)return X0(e.sanitize(Ln.RESOURCE_URL,n)||"");if(Zl(n,"ResourceURL"))return X0(Ws(n));throw new j(904,!1)}function eu(){const n=K();return n&&n[12]}const mh=new Te("ENVIRONMENT_INITIALIZER"),iE=new Te("INJECTOR",-1),rE=new Te("INJECTOR_DEF_TYPES");class sE{get(e,t=Ml){if(t===Ml){const i=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw i.name="NullInjectorError",i}return t}}function GO(...n){return{\u0275providers:oE(0,n),\u0275fromNgModule:!0}}function oE(n,...e){const t=[],i=new Set;let r;return wo(e,s=>{const o=s;hg(o,t,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&aE(r,t),t}function aE(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];dg(r,s=>{e.push(s)})}}function hg(n,e,t,i){if(!(n=ze(n)))return!1;let r=null,s=hb(n);const o=!s&&Qt(n);if(s||o){if(o&&!o.standalone)return!1;r=n}else{const l=n.ngModule;if(s=hb(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)hg(u,e,t,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;i.add(r);try{wo(s.imports,c=>{hg(c,e,t,i)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&aE(u,e)}if(!a){const u=vo(r)||(()=>new r);e.push({provide:r,useFactory:u,deps:Xt},{provide:rE,useValue:r,multi:!0},{provide:mh,useValue:()=>de(r),multi:!0})}const l=s.providers;null==l||a||dg(l,c=>{e.push(c)})}}return r!==n&&void 0!==n.providers}function dg(n,e){for(let t of n)lp(t)&&(t=t.\u0275providers),Array.isArray(t)?dg(t,e):e(t)}const jO=At({provide:String,useValue:At});function fg(n){return null!==n&&"object"==typeof n&&jO in n}function To(n){return"function"==typeof n}const pg=new Te("Set Injector scope."),_h={},WO={};let gg;function yh(){return void 0===gg&&(gg=new sE),gg}class Br{}class cE extends Br{constructor(e,t,i,r){super(),this.parent=t,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_g(e,o=>this.processProvider(o)),this.records.set(iE,Ia(void 0,this)),r.has("environment")&&this.records.set(Br,Ia(void 0,this));const s=this.records.get(pg);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(rE.multi,Xt,Xe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=da(this),i=Yi(void 0);try{return e()}finally{da(t),Yi(i)}}get(e,t=Ml,i=Xe.Default){this.assertNotDestroyed(),i=Hc(i);const r=da(this),s=Yi(void 0);try{if(!(i&Xe.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function KO(n){return"function"==typeof n||"object"==typeof n&&n instanceof Te}(e)&&Bc(e);a=l&&this.injectableDefInScope(l)?Ia(mg(e),_h):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Xe.Self?yh():this.parent).get(e,t=i&Xe.Optional&&t===Ml?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Vc]=o[Vc]||[]).unshift(kt(e)),r)throw o;return function SR(n,e,t,i){const r=n[Vc];throw e[pb]&&r.unshift(e[pb]),n.message=function TR(n,e,t,i=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=kt(e);if(Array.isArray(e))r=e.map(kt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):kt(a)))}r=`{${s.join(", ")}}`}return`${t}${i?"("+i+")":""}[${r}]: ${n.replace(bR,"\n  ")}`}("\n"+n.message,r,t,i),n.ngTokenPath=r,n[Vc]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Yi(s),da(r)}}resolveInjectorInitializers(){const e=da(this),t=Yi(void 0);try{const i=this.get(mh.multi,Xt,Xe.Self);for(const r of i)r()}finally{da(e),Yi(t)}}toString(){const e=[],t=this.records;for(const i of t.keys())e.push(kt(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){let t=To(e=ze(e))?e:ze(e&&e.provide);const i=function XO(n){return fg(n)?Ia(void 0,n.useValue):Ia(function hE(n,e,t){let i;if(To(n)){const r=ze(n);return vo(r)||mg(r)}if(fg(n))i=()=>ze(n.useValue);else if(function uE(n){return!(!n||!n.useFactory)}(n))i=()=>n.useFactory(...dp(n.deps||[]));else if(function lE(n){return!(!n||!n.useExisting)}(n))i=()=>de(ze(n.useExisting));else{const r=ze(n&&(n.useClass||n.provide));if(!function qO(n){return!!n.deps}(n))return vo(r)||mg(r);i=()=>new r(...dp(n.deps))}return i}(n),_h)}(e);if(To(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Ia(void 0,_h,!0),r.factory=()=>dp(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,i)}hydrate(e,t){return t.value===_h&&(t.value=WO,t.value=t.factory()),"object"==typeof t.value&&t.value&&function YO(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=ze(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function mg(n){const e=Bc(n),t=null!==e?e.factory:vo(n);if(null!==t)return t;if(n instanceof Te)throw new j(204,!1);if(n instanceof Function)return function zO(n){const e=n.length;if(e>0)throw jl(e,"?"),new j(204,!1);const t=function gR(n){const e=n&&(n[Uc]||n[db]);if(e){const t=function mR(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new j(204,!1)}function Ia(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function _g(n,e){for(const t of n)Array.isArray(t)?_g(t,e):t&&lp(t)?_g(t.\u0275providers,e):e(t)}class ZO{}class dE{}class JO{resolveComponentFactory(e){throw function QO(n){const e=Error(`No component factory found for ${kt(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let tu=(()=>{class n{}return n.NULL=new JO,n})();function eN(){return Ma(Yn(),K())}function Ma(n,e){return new In(Fi(n,e))}let In=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=eN,n})();function tN(n){return n instanceof In?n.nativeElement:n}class nu{}let Di=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function nN(){const n=K(),t=Li(Yn().index,n);return(Ni(t)?t:n)[11]}(),n})(),iN=(()=>{class n{}return n.\u0275prov=we({token:n,providedIn:"root",factory:()=>null}),n})();class iu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rN=new iu("15.0.4"),yg={};function bg(n){return n.ngOriginalError}class Ra{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&bg(e);for(;t&&bg(t);)t=bg(t);return t||null}}function hs(n){return n instanceof Function?n():n}function gE(n,e,t){let i=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||n.charCodeAt(r+s)<=32)return r}t=r+1}}const mE="ng-template";function gN(n,e,t){let i=0;for(;i<n.length;){let r=n[i++];if(t&&"class"===r){if(r=n[i],-1!==gE(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<n.length&&"string"==typeof(r=n[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function _E(n){return 4===n.type&&n.value!==mE}function mN(n,e,t){return e===(4!==n.type||t?n.value:mE)}function _N(n,e,t){let i=4;const r=n.attrs||[],s=function bN(n){for(let e=0;e<n.length;e++)if(Wb(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!mN(n,l,t)||""===l&&1===e.length){if(yr(i))return!1;o=!0}}else{const u=8&i?l:e[++a];if(8&i&&null!==n.attrs){if(!gN(n.attrs,u,t)){if(yr(i))return!1;o=!0}continue}const h=yN(8&i?"class":l,r,_E(n),t);if(-1===h){if(yr(i))return!1;o=!0;continue}if(""!==u){let d;d=h>s?"":r[h+1].toLowerCase();const g=8&i?d:null;if(g&&-1!==gE(g,u,0)||2&i&&u!==d){if(yr(i))return!1;o=!0}}}}else{if(!o&&!yr(i)&&!yr(l))return!1;if(o&&yr(l))continue;o=!1,i=l|1&i}}return yr(i)||o}function yr(n){return 0==(1&n)}function yN(n,e,t,i){if(null===e)return-1;let r=0;if(i||!t){let s=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function EN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const i=n[t];if("number"==typeof i)return-1;if(i===e)return t;t++}return-1}(e,n)}function yE(n,e,t=!1){for(let i=0;i<e.length;i++)if(_N(n,e[i],t))return!0;return!1}function wN(n,e){e:for(let t=0;t<e.length;t++){const i=e[t];if(n.length===i.length){for(let r=0;r<n.length;r++)if(n[r]!==i[r])continue e;return!0}}return!1}function vE(n,e){return n?":not("+e.trim()+")":e}function CN(n){let e=n[0],t=1,i=2,r="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&i){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!yr(o)&&(e+=vE(s,r),r=""),i=o,s=s||!yr(i);t++}return""!==r&&(e+=vE(s,r)),e}const lt={};function qe(n){bE(Ut(),K(),_i()+n,!1)}function bE(n,e,t,i){if(!i)if(3==(3&e[2])){const s=n.preOrderCheckHooks;null!==s&&Zc(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Qc(e,s,0,t)}bo(t)}function SE(n,e=null,t=null,i){const r=TE(n,e,t,i);return r.resolveInjectorInitializers(),r}function TE(n,e=null,t=null,i,r=new Set){const s=[t||Xt,GO(n)];return i=i||("object"==typeof n?void 0:kt(n)),new cE(s,e||yh(),i||null,r)}let vr=(()=>{class n{static create(t,i){if(Array.isArray(t))return SE({name:""},i,t,"");{const r=t.name??"";return SE({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Ml,n.NULL=new sE,n.\u0275prov=we({token:n,providedIn:"any",factory:()=>de(iE)}),n.__NG_ELEMENT_ID__=-1,n})();function B(n,e=Xe.Default){const t=K();return null===t?de(n,e):e0(Yn(),t,ze(n),e)}function OE(n,e){const t=n.contentQueries;if(null!==t)for(let i=0;i<t.length;i+=2){const r=t[i],s=t[i+1];if(-1!==s){const o=n.data[s];Sp(r),o.contentQueries(2,e[s],s)}}}function bh(n,e,t,i,r,s,o,a,l,u,c){const h=e.blueprint.slice();return h[0]=r,h[2]=76|i,(null!==c||n&&1024&n[2])&&(h[2]|=1024),Rb(h),h[3]=h[15]=n,h[8]=t,h[10]=o||n&&n[10],h[11]=a||n&&n[11],h[12]=l||n&&n[12]||null,h[9]=u||n&&n[9]||null,h[6]=s,h[20]=function jP(){return GP++}(),h[21]=c,h[16]=2==e.type?n[16]:h,h}function Na(n,e,t,i,r){let s=n.data[e];if(null===s)s=function Tg(n,e,t,i,r){const s=Nb(),o=bp(),l=n.data[e]=function YN(n,e,t,i,r,s){return{type:t,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,i,r);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(n,e,t,i,r),function XR(){return at.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=i,s.attrs=r;const o=function Bl(){const n=at.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return Lr(s,!0),s}function ru(n,e,t,i){if(0===t)return-1;const r=e.length;for(let s=0;s<t;s++)e.push(i),n.blueprint.push(i),n.data.push(null);return r}function xg(n,e,t){Tp(e);try{const i=n.viewQuery;null!==i&&Lg(1,i,t);const r=n.template;null!==r&&NE(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&OE(n,e),n.staticViewQueries&&Lg(2,n.viewQuery,t);const s=n.components;null!==s&&function zN(n,e){for(let t=0;t<e.length;t++)pF(n,e[t])}(e,s)}catch(i){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),i}finally{e[2]&=-5,xp()}}function Eh(n,e,t,i){const r=e[2];if(128!=(128&r)){Tp(e);try{Rb(e),function Lb(n){return at.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&NE(n,e,t,2,i);const o=3==(3&r);if(o){const u=n.preOrderCheckHooks;null!==u&&Zc(e,u,null)}else{const u=n.preOrderHooks;null!==u&&Qc(e,u,0,null),Dp(e,0)}if(function dF(n){for(let e=qp(n);null!==e;e=Yp(e)){if(!e[2])continue;const t=e[9];for(let i=0;i<t.length;i++){const r=t[i],s=r[3];0==(512&r[2])&&vp(s,1),r[2]|=512}}}(e),function hF(n){for(let e=qp(n);null!==e;e=Yp(e))for(let t=10;t<e.length;t++){const i=e[t],r=i[1];Yc(i)&&Eh(r,i,r.template,i[8])}}(e),null!==n.contentQueries&&OE(n,e),o){const u=n.contentCheckHooks;null!==u&&Zc(e,u)}else{const u=n.contentHooks;null!==u&&Qc(e,u,1),Dp(e,1)}!function $N(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let i=0;i<t.length;i++){const r=t[i];if(r<0)bo(~r);else{const s=r,o=t[++i],a=t[++i];qR(o,s),a(2,e[s])}}}finally{bo(-1)}}(n,e);const a=n.components;null!==a&&function WN(n,e){for(let t=0;t<e.length;t++)fF(n,e[t])}(e,a);const l=n.viewQuery;if(null!==l&&Lg(2,l,i),o){const u=n.viewCheckHooks;null!==u&&Zc(e,u)}else{const u=n.viewHooks;null!==u&&Qc(e,u,2),Dp(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,vp(e[3],-1))}finally{xp()}}}function NE(n,e,t,i,r){const s=_i(),o=2&i;try{bo(-1),o&&e.length>22&&bE(n,e,22,!1),t(i,r)}finally{bo(s)}}function Dg(n,e,t){if(_p(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=n.data[s];o.contentQueries&&o.contentQueries(1,t[s],s)}}}function Ag(n,e,t){!Ob()||(function tF(n,e,t,i){const r=t.directiveStart,s=t.directiveEnd;kl(t)&&function lF(n,e,t){const i=Fi(e,n),r=FE(t),s=n[10],o=wh(n,bh(n,r,null,t.onPush?32:16,i,e,s,s.createRenderer(i,t),null,null,null));n[e.index]=o}(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||nh(t,e),ii(i,e);const o=t.initialInputs;for(let a=r;a<s;a++){const l=n.data[a],u=Eo(e,n,a,t);ii(u,e),null!==o&&uF(0,a-r,u,l,0,o),_r(l)&&(Li(t.index,e)[8]=Eo(e,n,a,t))}}(n,e,t,Fi(t,e)),64==(64&t.flags)&&HE(n,e,t))}function Ig(n,e,t=Fi){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function FE(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Mg(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Mg(n,e,t,i,r,s,o,a,l,u){const c=22+i,h=c+r,d=function XN(n,e){const t=[];for(let i=0;i<e;i++)t.push(i<n?null:lt);return t}(c,h),g="function"==typeof u?u():u;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:g,incompleteFirstPass:!1}}function LE(n,e,t,i){const r=jE(e);null===t?r.push(i):(r.push(t),n.firstCreatePass&&$E(n).push(i,r.length-1))}function kE(n,e,t,i){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const s=n[r];null===i?BE(t,e,r,s):i.hasOwnProperty(r)&&BE(t,e,i[r],s)}return t}function BE(n,e,t,i){n.hasOwnProperty(t)?n[t].push(e,i):n[t]=[e,i]}function UE(n,e){const t=Li(e,n);16&t[2]||(t[2]|=32)}function Rg(n,e,t,i){let r=!1;if(Ob()){const s=null===i?null:{"":-1},o=function iF(n,e){const t=n.directiveRegistry;let i=null,r=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(yE(e,o.selectors,!1))if(i||(i=[]),_r(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),Pg(n,e,a.length)}else i.unshift(o),Pg(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(n,t);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&(r=!0,VE(n,e,t,a,s,l)),s&&function rF(n,e,t){if(e){const i=n.localNames=[];for(let r=0;r<e.length;r+=2){const s=t[e[r+1]];if(null==s)throw new j(-301,!1);i.push(e[r],s)}}}(t,i,s)}return t.mergedAttrs=Vl(t.mergedAttrs,t.attrs),r}function VE(n,e,t,i,r,s){for(let u=0;u<i.length;u++)Op(nh(t,e),n,i[u].type);!function oF(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,i.length);for(let u=0;u<i.length;u++){const c=i[u];c.providersResolver&&c.providersResolver(c)}let o=!1,a=!1,l=ru(n,e,i.length,null);for(let u=0;u<i.length;u++){const c=i[u];t.mergedAttrs=Vl(t.mergedAttrs,c.hostAttrs),aF(n,t,e,l,c),sF(l,c,r),null!==c.contentQueries&&(t.flags|=4),(null!==c.hostBindings||null!==c.hostAttrs||0!==c.hostVars)&&(t.flags|=64);const h=c.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),l++}!function KN(n,e,t){const r=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,u=null;for(let c=e.directiveStart;c<r;c++){const h=s[c],d=t?t.get(h):null,m=d?d.outputs:null;l=kE(h.inputs,c,l,d?d.inputs:null),u=kE(h.outputs,c,u,m);const y=null===l||null===o||_E(e)?null:cF(l,c,o);a.push(y)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}(n,t,s)}function HE(n,e,t){const i=t.directiveStart,r=t.directiveEnd,s=t.index,o=function YR(){return at.lFrame.currentDirectiveIndex}();try{bo(s);for(let a=i;a<r;a++){const l=n.data[a],u=e[a];wp(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&nF(l,u)}}finally{bo(-1),wp(o)}}function nF(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Pg(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function sF(n,e,t){if(t){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)t[e.exportAs[i]]=n;_r(e)&&(t[""]=n)}}function aF(n,e,t,i,r){n.data[i]=r;const s=r.factory||(r.factory=vo(r.type)),o=new Ul(s,_r(r),B);n.blueprint[i]=o,t[i]=o,function JN(n,e,t,i,r){const s=r.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function eF(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,i,s)}}(n,e,i,ru(n,t,r.hostVars,lt),r)}function Ur(n,e,t,i,r,s){const o=Fi(n,e);!function Og(n,e,t,i,r,s,o){if(null==s)n.removeAttribute(e,r,t);else{const a=null==o?ot(s):o(s,i||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,s,n.value,t,i,r)}function uF(n,e,t,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],h=o[l++];null!==a?i.setInput(t,h,u,c):t[c]=h}}}function cF(n,e,t){let i=null,r=0;for(;r<t.length;){const s=t[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===i&&(i=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function GE(n,e,t,i){return[n,!0,!1,e,null,0,i,t,null,null]}function fF(n,e){const t=Li(e,n);if(Yc(t)){const i=t[1];48&t[2]?Eh(i,t,i.template,t[8]):t[5]>0&&Ng(t)}}function Ng(n){for(let i=qp(n);null!==i;i=Yp(i))for(let r=10;r<i.length;r++){const s=i[r];if(Yc(s))if(512&s[2]){const o=s[1];Eh(o,s,o.template,s[8])}else s[5]>0&&Ng(s)}const t=n[1].components;if(null!==t)for(let i=0;i<t.length;i++){const r=Li(t[i],n);Yc(r)&&r[5]>0&&Ng(r)}}function pF(n,e){const t=Li(e,n),i=t[1];(function gF(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(i,t),xg(i,t,t[8])}function wh(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Fg(n){for(;n;){n[2]|=32;const e=Yl(n);if(IR(n)&&!e)return n;n=e}return null}function Ch(n,e,t,i=!0){const r=e[10];r.begin&&r.begin();try{Eh(n,e,n.template,t)}catch(o){throw i&&zE(e,o),o}finally{r.end&&r.end()}}function Lg(n,e,t){Sp(0),e(n,t)}function jE(n){return n[7]||(n[7]=[])}function $E(n){return n.cleanup||(n.cleanup=[])}function zE(n,e){const t=n[9],i=t?t.get(Ra,null):null;i&&i.handleError(e)}function kg(n,e,t,i,r){for(let s=0;s<t.length;){const o=t[s++],a=t[s++],l=e[o],u=n.data[o];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function Sh(n,e,t){let i=t?n.styles:null,r=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=ha(r,a):2==s&&(i=ha(i,a+": "+e[++o]+";"))}t?n.styles=i:n.stylesWithoutHost=i,t?n.classes=r:n.classesWithoutHost=r}function Th(n,e,t,i,r=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&i.push(qn(s)),mr(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&Th(l[1],l,u,i)}const o=t.type;if(8&o)Th(n,e,t.child,i);else if(32&o){const a=Xp(t,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=V0(e,t);if(Array.isArray(a))i.push(...a);else{const l=Yl(e[16]);Th(l[1],l,a,i,!0)}}t=r?t.projectionNext:t.next}return i}class su{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Th(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(mr(e)){const t=e[8],i=t?t.indexOf(this):-1;i>-1&&(Qp(e,i),sh(t,i))}this._attachedToViewContainer=!1}R0(this._lView[1],this._lView)}onDestroy(e){LE(this._lView[1],this._lView,null,e)}markForCheck(){Fg(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Ch(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function rO(n,e){Kl(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e}}class mF extends su{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Ch(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class XE extends tu{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Qt(e);return new ou(t,this.ngModule)}}function qE(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class yF{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,i){i=Hc(i);const r=this.injector.get(e,yg,i);return r!==yg||t===yg?r:this.parentInjector.get(e,t,i)}}class ou extends dE{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function SN(n){return n.map(CN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return qE(this.componentDef.inputs)}get outputs(){return qE(this.componentDef.outputs)}create(e,t,i,r){let s=(r=r||this.ngModule)instanceof Br?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new yF(e,s):e,a=o.get(nu,null);if(null===a)throw new j(407,!1);const l=o.get(iN,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",h=i?function qN(n,e,t){return n.selectRootElement(e,t===pr.ShadowDom)}(u,i,this.componentDef.encapsulation):Zp(u,c,function _F(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),d=this.componentDef.onPush?288:272,g=Mg(0,null,null,1,0,null,null,null,null,null),m=bh(null,g,null,d,null,null,a,u,l,o,null);let y,v;Tp(m);try{const b=this.componentDef;let A,w=null;b.findHostDirectiveDefs?(A=[],w=new Map,b.findHostDirectiveDefs(b,A,w),A.push(b)):A=[b];const M=function bF(n,e){const t=n[1];return n[22]=e,Na(t,22,2,"#host",null)}(m,h),J=function EF(n,e,t,i,r,s,o,a){const l=r[1];!function wF(n,e,t,i){for(const r of n)e.mergedAttrs=Vl(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Sh(e,e.mergedAttrs,!0),null!==t&&j0(i,t,e))}(i,n,e,o);const u=s.createRenderer(e,t),c=bh(r,FE(t),null,t.onPush?32:16,r[n.index],n,s,u,a||null,null,null);return l.firstCreatePass&&Pg(l,n,i.length-1),wh(r,c),r[n.index]=c}(M,h,b,A,m,a,u);v=Mb(g,22),h&&function SF(n,e,t,i){if(i)Ip(n,t,["ng-version",rN.full]);else{const{attrs:r,classes:s}=function TN(n){const e=[],t=[];let i=1,r=2;for(;i<n.length;){let s=n[i];if("string"==typeof s)2===r?""!==s&&e.push(s,n[++i]):8===r&&t.push(s);else{if(!yr(r))break;r=s}i++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Ip(n,t,r),s&&s.length>0&&G0(n,t,s.join(" "))}}(u,b,h,i),void 0!==t&&function TF(n,e,t){const i=n.projection=[];for(let r=0;r<e.length;r++){const s=t[r];i.push(null!=s?Array.from(s):null)}}(v,this.ngContentSelectors,t),y=function CF(n,e,t,i,r,s){const o=Yn(),a=r[1],l=Fi(o,r);VE(a,r,o,t,null,i);for(let c=0;c<t.length;c++)ii(Eo(r,a,o.directiveStart+c,o),r);HE(a,r,o),l&&ii(l,r);const u=Eo(r,a,o.directiveStart+o.componentOffset,o);if(n[8]=r[8]=u,null!==s)for(const c of s)c(u,e);return Dg(a,o,n),u}(J,b,A,w,m,[xF]),xg(g,m,null)}finally{xp()}return new vF(this.componentType,y,Ma(v,m),m,v)}}class vF extends ZO{constructor(e,t,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=t,this.hostView=this.changeDetectorRef=new mF(r),this.componentType=e}setInput(e,t){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;kg(s[1],s,r,e,t),UE(s,this._tNode.index)}}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function xF(){const n=Yn();Kc(K()[1],n)}let xh=null;function xo(){if(!xh){const n=un.Symbol;if(n&&n.iterator)xh=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const i=e[t];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(xh=i)}}}return xh}function au(n){return!!Ug(n)&&(Array.isArray(n)||!(n instanceof Map)&&xo()in n)}function Ug(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Vr(n,e,t){return n[e]=t}function ri(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function si(n,e,t,i){const r=K();return ri(r,va(),e)&&(Ut(),Ur(_n(),r,n,e,t,i)),si}function Ct(n,e,t,i,r,s,o,a){const l=K(),u=Ut(),c=n+22,h=u.firstCreatePass?function VF(n,e,t,i,r,s,o,a,l){const u=e.consts,c=Na(e,n,4,o||null,$s(u,a));Rg(e,t,c,$s(u,l)),Kc(e,c);const h=c.tViews=Mg(2,c,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,t,i,r,s,o):u.data[c];Lr(h,!1);const d=l[11].createComment("");ch(u,l,d,h),ii(d,l),wh(l,l[c]=GE(d,l,d,h)),Xc(h)&&Ag(u,l,h),null!=o&&Ig(l,h,a)}function fs(n){return ya(function zR(){return at.lFrame.contextLView}(),22+n)}function Ce(n,e,t){const i=K();return ri(i,va(),e)&&function Bi(n,e,t,i,r,s,o,a){const l=Fi(e,t);let c,u=e.inputs;!a&&null!=u&&(c=u[i])?(kg(n,t,c,i,r),kl(e)&&UE(t,e.index)):3&e.type&&(i=function ZN(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(Ut(),_n(),i,n,e,i[11],t,!1),Ce}function Vg(n,e,t,i,r){const o=r?"class":"style";kg(n,t,e.inputs[o],o,i)}function Nt(n,e,t,i){const r=K(),s=Ut(),o=22+n,a=r[11],l=r[o]=Zp(a,e,function iP(){return at.lFrame.currentNamespace}()),u=s.firstCreatePass?function GF(n,e,t,i,r,s,o){const a=e.consts,u=Na(e,n,2,r,$s(a,s));return Rg(e,t,u,$s(a,o)),null!==u.attrs&&Sh(u,u.attrs,!1),null!==u.mergedAttrs&&Sh(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,r,0,e,t,i):s.data[o];return Lr(u,!0),j0(a,l,u),32!=(32&u.flags)&&ch(s,r,l,u),0===function HR(){return at.lFrame.elementDepthCount}()&&ii(l,r),function GR(){at.lFrame.elementDepthCount++}(),Xc(u)&&(Ag(s,r,u),Dg(s,u,r)),null!==i&&Ig(r,u),Nt}function Ft(){let n=Yn();bp()?Ep():(n=n.parent,Lr(n,!1));const e=n;!function jR(){at.lFrame.elementDepthCount--}();const t=Ut();return t.firstCreatePass&&(Kc(t,n),_p(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function aP(n){return 0!=(8&n.flags)}(e)&&Vg(t,e,K(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function lP(n){return 0!=(16&n.flags)}(e)&&Vg(t,e,K(),e.stylesWithoutHost,!1),Ft}function yn(n,e,t,i){return Nt(n,e,t,i),Ft(),yn}function Hg(n,e,t){const i=K(),r=Ut(),s=n+22,o=r.firstCreatePass?function jF(n,e,t,i,r){const s=e.consts,o=$s(s,i),a=Na(e,n,8,"ng-container",o);return null!==o&&Sh(a,o,!0),Rg(e,t,a,$s(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,t):r.data[s];Lr(o,!0);const a=i[s]=i[11].createComment("");return ch(r,i,a,o),ii(a,i),Xc(o)&&(Ag(r,i,o),Dg(r,o,i)),null!=t&&Ig(i,o),Hg}function Gg(){let n=Yn();const e=Ut();return bp()?Ep():(n=n.parent,Lr(n,!1)),e.firstCreatePass&&(Kc(e,n),_p(n)&&e.queries.elementEnd(n)),Gg}function Ah(n,e,t){return Hg(n,e,t),Gg(),Ah}function ps(){return K()}function uu(n){return!!n&&"function"==typeof n.then}const jg=function lw(n){return!!n&&"function"==typeof n.subscribe};function on(n,e,t,i){const r=K(),s=Ut(),o=Yn();return function cw(n,e,t,i,r,s,o){const a=Xc(i),u=n.firstCreatePass&&$E(n),c=e[8],h=jE(e);let d=!0;if(3&i.type||o){const y=Fi(i,e),v=o?o(y):y,b=h.length,A=o?M=>o(qn(M[i.index])):i.index;let w=null;if(!o&&a&&(w=function $F(n,e,t,i){const r=n.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===t&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,r,i.index)),null!==w)(w.__ngLastListenerFn__||w).__ngNextListenerFn__=s,w.__ngLastListenerFn__=s,d=!1;else{s=dw(i,e,c,s,!1);const M=t.listen(v,r,s);h.push(s,M),u&&u.push(r,A,b,b+1)}}else s=dw(i,e,c,s,!1);const g=i.outputs;let m;if(d&&null!==g&&(m=g[r])){const y=m.length;if(y)for(let v=0;v<y;v+=2){const J=e[m[v]][m[v+1]].subscribe(s),te=h.length;h.push(s,J),u&&u.push(r,i.index,te,-(te+1))}}}(s,r,r[11],o,n,e,i),on}function hw(n,e,t,i){try{return!1!==t(i)}catch(r){return zE(n,r),!1}}function dw(n,e,t,i,r){return function s(o){if(o===Function)return i;Fg(n.componentOffset>-1?Li(n.index,e):e);let l=hw(e,0,i,o),u=s.__ngNextListenerFn__;for(;u;)l=hw(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Re(n=1){return function ZR(n){return(at.lFrame.contextLView=function QR(n,e){for(;n>0;)e=e[15],n--;return e}(n,at.lFrame.contextLView))[8]}(n)}function WF(n,e){let t=null;const i=function vN(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(n);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?yE(n,s,!0):wN(i,s))return r}else t=r}return t}function Ih(n,e){return n<<17|e<<2}function zs(n){return n>>17&32767}function Wg(n){return 2|n}function Ao(n){return(131068&n)>>2}function zg(n,e){return-131069&n|e<<2}function Xg(n){return 1|n}function Sw(n,e,t,i,r){const s=n[t+1],o=null===e;let a=i?zs(s):Ao(s),l=!1;for(;0!==a&&(!1===l||o);){const c=n[a+1];ZF(n[a],e)&&(l=!0,n[a+1]=i?Xg(c):Wg(c)),a=i?zs(c):Ao(c)}l&&(n[t+1]=i?Wg(s):Xg(s))}function ZF(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&xa(n,e)>=0}const jn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Tw(n){return n.substring(jn.key,jn.keyEnd)}function xw(n,e){const t=jn.textEnd;return t===e?-1:(e=jn.keyEnd=function tL(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}(n,jn.key=e,t),$a(n,e,t))}function $a(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function cu(n){!function Er(n,e,t,i){const r=Ut(),s=function us(n){const e=at.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);r.firstUpdatePass&&function Ow(n,e,t,i){const r=n.data;if(null===r[t+1]){const s=r[_i()],o=Pw(n,t);kw(s,i)&&null===e&&!o&&(e=!1),e=function sL(n,e,t,i){const r=function Cp(n){const e=at.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(t=hu(t=qg(null,n,e,t,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=qg(r,n,e,t,i),null===s){let l=function oL(n,e,t){const i=t?e.classBindings:e.styleBindings;if(0!==Ao(i))return n[zs(i)]}(n,e,i);void 0!==l&&Array.isArray(l)&&(l=qg(null,n,e,l[1],i),l=hu(l,e.attrs,i),function aL(n,e,t,i){n[zs(t?e.classBindings:e.styleBindings)]=i}(n,e,i,l))}else s=function lL(n,e,t){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=hu(i,n[s].hostAttrs,t);return hu(i,e.attrs,t)}(n,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),t}(r,s,e,i),function YF(n,e,t,i,r,s){let o=s?e.classBindings:e.styleBindings,a=zs(o),l=Ao(o);n[i]=t;let c,u=!1;if(Array.isArray(t)){const h=t;c=h[1],(null===c||xa(h,c)>0)&&(u=!0)}else c=t;if(r)if(0!==l){const d=zs(n[a+1]);n[i+1]=Ih(d,a),0!==d&&(n[d+1]=zg(n[d+1],i)),n[a+1]=function XF(n,e){return 131071&n|e<<17}(n[a+1],i)}else n[i+1]=Ih(a,0),0!==a&&(n[a+1]=zg(n[a+1],i)),a=i;else n[i+1]=Ih(l,0),0===a?a=i:n[l+1]=zg(n[l+1],i),l=i;u&&(n[i+1]=Wg(n[i+1])),Sw(n,c,i,!0),Sw(n,c,i,!1),function KF(n,e,t,i,r){const s=r?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&xa(s,e)>=0&&(t[i+1]=Xg(t[i+1]))}(e,c,n,i,s),o=Ih(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,t,o,i)}}(r,null,s,i);const o=K();if(t!==lt&&ri(o,s,t)){const a=r.data[_i()];if(kw(a,i)&&!Pw(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;null!==l&&(t=ha(l,t||"")),Vg(r,a,o,t,i)}else!function cL(n,e,t,i,r,s,o,a){r===lt&&(r=Xt);let l=0,u=0,c=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const d=l<r.length?r[l+1]:void 0,g=u<s.length?s[u+1]:void 0;let y,m=null;c===h?(l+=2,u+=2,d!==g&&(m=h,y=g)):null===h||null!==c&&c<h?(l+=2,m=c):(u+=2,m=h,y=g),null!==m&&Fw(n,e,t,i,m,y,o,a),c=l<r.length?r[l]:null,h=u<s.length?s[u]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function uL(n,e,t){if(null==t||""===t)return Xt;const i=[],r=Ws(t);if(Array.isArray(r))for(let s=0;s<r.length;s++)n(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&n(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(n,e,t),i,s)}}(ki,Gr,n,!0)}function Gr(n,e){for(let t=function JF(n){return function Aw(n){jn.key=0,jn.keyEnd=0,jn.value=0,jn.valueEnd=0,jn.textEnd=n.length}(n),xw(n,$a(n,0,jn.textEnd))}(e);t>=0;t=xw(e,t))ki(n,Tw(e),!0)}function Pw(n,e){return e>=n.expandoStartIndex}function qg(n,e,t,i,r){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],i=hu(i,s.hostAttrs,r),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),i}function hu(n,e,t){const i=t?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),ki(n,o,!!t||e[++s]))}return void 0===n?null:n}function Fw(n,e,t,i,r,s,o,a){if(!(3&e.type))return;const l=n.data,u=l[a+1],c=function qF(n){return 1==(1&n)}(u)?Lw(l,e,t,r,Ao(u),o):void 0;Rh(c)||(Rh(s)||function zF(n){return 2==(2&n)}(u)&&(s=Lw(l,null,t,r,a,o)),function pO(n,e,t,i,r){if(e)r?n.addClass(t,i):n.removeClass(t,i);else{let s=-1===i.indexOf("-")?void 0:Ti.DashCase;null==r?n.removeStyle(t,i,s):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=Ti.Important),n.setStyle(t,i,r,s))}}(i,o,qc(_i(),t),r,s))}function Lw(n,e,t,i,r,s){const o=null===e;let a;for(;r>0;){const l=n[r],u=Array.isArray(l),c=u?l[1]:l,h=null===c;let d=t[r+1];d===lt&&(d=h?Xt:void 0);let g=h?kp(d,i):c===i?d:void 0;if(u&&!Rh(g)&&(g=kp(l,i)),Rh(g)&&(a=g,o))return a;const m=n[r+1];r=o?zs(m):Ao(m)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=kp(l,i))}return a}function Rh(n){return void 0!==n}function kw(n,e){return 0!=(n.flags&(e?8:16))}function yi(n,e=""){const t=K(),i=Ut(),r=n+22,s=i.firstCreatePass?Na(i,r,1,e,null):i.data[r],o=t[r]=function Kp(n,e){return n.createText(e)}(t[11],e);ch(i,t,o,s),Lr(s,!1)}function jr(n){return gs("",n,""),jr}function gs(n,e,t){const i=K(),r=function La(n,e,t,i){return ri(n,va(),t)?e+ot(t)+i:lt}(i,n,e,t);return r!==lt&&function ds(n,e,t){const i=qc(e,n);!function I0(n,e,t){n.setValue(e,t)}(n[11],i,t)}(i,_i(),r),gs}const za="en-US";let sC=za;class Xa{}class RC{}class PC extends Xa{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new XE(this);const i=Oi(e);this._bootstrapComponents=hs(i.bootstrap),this._r3Injector=TE(e,t,[{provide:Xa,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class tm extends RC{constructor(e){super(),this.moduleType=e}create(e){return new PC(this.moduleType,e)}}class Rk extends Xa{constructor(e,t,i){super(),this.componentFactoryResolver=new XE(this),this.instance=null;const r=new cE([...e,{provide:Xa,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],t||yh(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Lh(n,e,t=null){return new Rk(n,e,t).injector}let Pk=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const i=oE(0,t.type),r=i.length>0?Lh([i],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=we({token:n,providedIn:"environment",factory:()=>new n(de(Br))}),n})();function OC(n){n.getStandaloneInjector=e=>e.get(Pk).getOrCreateStandaloneInjector(n)}function im(n,e,t){const i=mi()+n,r=K();return r[i]===lt?Vr(r,i,t?e.call(t):e()):function lu(n,e){return n[e]}(r,i)}function ms(n,e,t,i){return VC(K(),mi(),n,e,t,i)}function qa(n,e,t,i,r){return function HC(n,e,t,i,r,s,o){const a=e+t;return function Do(n,e,t,i){const r=ri(n,e,t);return ri(n,e+1,i)||r}(n,a,r,s)?Vr(n,a+2,o?i.call(o,r,s):i(r,s)):_u(n,a+2)}(K(),mi(),n,e,t,i,r)}function _u(n,e){const t=n[e];return t===lt?void 0:t}function VC(n,e,t,i,r,s){const o=e+t;return ri(n,o,r)?Vr(n,o+1,s?i.call(s,r):i(r)):_u(n,o+1)}function Mo(n,e){const t=Ut();let i;const r=n+22;t.firstCreatePass?(i=function qk(n,e){if(e)for(let t=e.length-1;t>=0;t--){const i=e[t];if(n===i.name)return i}}(e,t.pipeRegistry),t.data[r]=i,i.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,i.onDestroy)):i=t.data[r];const s=i.factory||(i.factory=vo(i.type)),o=Yi(B);try{const a=th(!1),l=s();return th(a),function HF(n,e,t,i){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=i}(t,K(),r,l),l}finally{Yi(o)}}function Ro(n,e,t){const i=n+22,r=K(),s=ya(r,i);return function yu(n,e){return n[1].data[e].pure}(r,i)?VC(r,mi(),e,s.transform,t,s):s.transform(t)}function rm(n){return e=>{setTimeout(n,void 0,e)}}const gt=class Jk extends R{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,i){let r=e,s=t||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=rm(s),r&&(r=rm(r)),o&&(o=rm(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Me&&e.add(a),a}};function eB(){return this._results[xo()]()}class sm{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=xo(),i=sm.prototype;i[t]||(i[t]=eB)}get changes(){return this._changes||(this._changes=new gt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const i=this;i.dirty=!1;const r=function Ji(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function yP(n,e,t){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++){let r=n[i],s=e[i];if(t&&(r=t(r),s=t(s)),s!==r)return!1}return!0}(i._results,r,t))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let $r=(()=>{class n{}return n.__NG_ELEMENT_ID__=iB,n})();const tB=$r,nB=class extends tB{constructor(e,t,i){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=i}createEmbeddedView(e,t){const i=this._declarationTContainer.tViews,r=bh(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),xg(i,r,e),new su(r)}};function iB(){return kh(Yn(),K())}function kh(n,e){return 4&n.type?new nB(e,n,Ma(n,e)):null}let tr=(()=>{class n{}return n.__NG_ELEMENT_ID__=rB,n})();function rB(){return XC(Yn(),K())}const sB=tr,WC=class extends sB{constructor(e,t,i){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=i}get element(){return Ma(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){const e=Pp(this._hostTNode,this._hostLView);if(qb(e)){const t=eh(e,this._hostLView),i=Jc(e);return new Ea(t[1].data[i+8],t)}return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=zC(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(t||{},s);return this.insert(o,r),o}createComponent(e,t,i,r,s){const o=e&&!function Gl(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,i=h.injector,r=h.projectableNodes,s=h.environmentInjector||h.ngModuleRef}const l=o?e:new ou(Qt(e)),u=i||this.parentInjector;if(!s&&null==l.ngModule){const d=(o?u:this.parentInjector).get(Br,null);d&&(s=d)}const c=l.create(u,r,void 0,s);return this.insert(c.hostView,a),c}insert(e,t){const i=e._lView,r=i[1];if(function VR(n){return mr(n[3])}(i)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const h=i[3],d=new WC(h,h[6],h[3]);d.detach(d.indexOf(e))}}const s=this._adjustIndex(t),o=this._lContainer;!function oO(n,e,t,i){const r=10+i,s=t.length;i>0&&(t[r-1][4]=e),i<s-10?(e[4]=t[r],a0(t,10+i,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function aO(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,i,o,s);const a=tg(s,o),l=i[11],u=uh(l,o[7]);return null!==u&&function iO(n,e,t,i,r,s){i[0]=r,i[6]=e,Kl(n,i,t,1,r,s)}(r,o[6],l,i,u,a),e.attachToViewContainerRef(),a0(om(o),s,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=zC(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),i=Qp(this._lContainer,t);i&&(sh(om(this._lContainer),t),R0(i[1],i))}detach(e){const t=this._adjustIndex(e,-1),i=Qp(this._lContainer,t);return i&&null!=sh(om(this._lContainer),t)?new su(i):null}_adjustIndex(e,t=0){return e??this.length+t}};function zC(n){return n[8]}function om(n){return n[8]||(n[8]=[])}function XC(n,e){let t;const i=e[n.index];if(mr(i))t=i;else{let r;if(8&n.type)r=qn(i);else{const s=e[11];r=s.createComment("");const o=Fi(n,e);Co(s,uh(s,o),r,function hO(n,e){return n.nextSibling(e)}(s,o),!1)}e[n.index]=t=GE(i,e,r,n),wh(e,t)}return new WC(t,n,e)}class am{constructor(e){this.queryList=e,this.matches=null}clone(){return new am(this.queryList)}setDirty(){this.queryList.setDirty()}}class lm{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const i=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let s=0;s<i;s++){const o=t.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new lm(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==QC(e,t).matches&&this.queries[t].setDirty()}}class qC{constructor(e,t,i=null){this.predicate=e,this.flags=t,this.read=i}}class um{constructor(e=[]){this.queries=e}elementStart(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let i=0;i<this.length;i++){const r=null!==t?t.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==t?t.push(s):t=[s])}return null!==t?new um(t):null}template(e,t){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class cm{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new cm(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==t;)i=i.parent;return t===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,t,oB(t,s)),this.matchTNodeWithReadOption(e,t,ih(t,e,s,!1,!1))}else i===$r?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ih(t,e,i,!1,!1))}matchTNodeWithReadOption(e,t,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===In||r===tr||r===$r&&4&t.type)this.addMatch(t.index,-2);else{const s=ih(t,e,r,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,i)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function oB(n,e){const t=n.localNames;if(null!==t)for(let i=0;i<t.length;i+=2)if(t[i]===e)return t[i+1];return null}function lB(n,e,t,i){return-1===t?function aB(n,e){return 11&n.type?Ma(n,e):4&n.type?kh(n,e):null}(e,n):-2===t?function uB(n,e,t){return t===In?Ma(e,n):t===$r?kh(e,n):t===tr?XC(e,n):void 0}(n,e,i):Eo(n,n[1],t,e)}function YC(n,e,t,i){const r=e[19].queries[i];if(null===r.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const u=o[l];a.push(u<0?null:lB(e,s[u],o[l+1],t.metadata.read))}r.matches=a}return r.matches}function hm(n,e,t,i){const r=n.queries.getByIndex(t),s=r.matches;if(null!==s){const o=YC(n,e,r,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const u=s[a+1],c=e[-l];for(let h=10;h<c.length;h++){const d=c[h];d[17]===d[3]&&hm(d[1],d,u,i)}if(null!==c[9]){const h=c[9];for(let d=0;d<h.length;d++){const g=h[d];hm(g[1],g,u,i)}}}}}return i}function _s(n){const e=K(),t=Ut(),i=Bb();Sp(i+1);const r=QC(t,i);if(n.dirty&&function UR(n){return 4==(4&n[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)n.reset([]);else{const s=r.crossesNgTemplate?hm(t,e,i,[]):YC(t,e,r,i);n.reset(s,tN),n.notifyOnChanges()}return!0}return!1}function Po(n,e,t){const i=Ut();i.firstCreatePass&&(ZC(i,new qC(n,e,t),-1),2==(2&e)&&(i.staticViewQueries=!0)),KC(i,K(),e)}function dm(n,e,t,i){const r=Ut();if(r.firstCreatePass){const s=Yn();ZC(r,new qC(e,t,i),s.index),function hB(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(r,n),2==(2&t)&&(r.staticContentQueries=!0)}KC(r,K(),t)}function ys(){return function cB(n,e){return n[19].queries[e].queryList}(K(),Bb())}function KC(n,e,t){const i=new sm(4==(4&t));LE(n,e,i,i.destroy),null===e[19]&&(e[19]=new lm),e[19].queries.push(new am(i))}function ZC(n,e,t){null===n.queries&&(n.queries=new um),n.queries.track(new cm(e,t))}function QC(n,e){return n.queries.getByIndex(e)}function Ya(n,e){return kh(n,e)}function Uh(...n){}const Vh=new Te("Application Initializer");let Hh=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Uh,this.reject=Uh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(uu(s))t.push(s);else if(jg(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}Promise.all(t).then(()=>{i()}).catch(r=>{this.reject(r)}),0===t.length&&i(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(de(Vh,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bu=new Te("AppId",{providedIn:"root",factory:function _S(){return`${_m()}${_m()}${_m()}`}});function _m(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const yS=new Te("Platform Initializer"),ym=new Te("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),vS=new Te("appBootstrapListener"),bS=new Te("AnimationModuleType");let RB=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const vs=new Te("LocaleId",{providedIn:"root",factory:()=>It(vs,Xe.Optional|Xe.SkipSelf)||function PB(){return typeof $localize<"u"&&$localize.locale||za}()});class NB{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let ES=(()=>{class n{compileModuleSync(t){return new tm(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const i=this.compileModuleSync(t),s=hs(Oi(t).declarations).reduce((o,a)=>{const l=Qt(a);return l&&o.push(new ou(l)),o},[]);return new NB(i,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kB=(()=>Promise.resolve(0))();function vm(n){typeof Zone>"u"?kB.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class an{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new gt(!1),this.onMicrotaskEmpty=new gt(!1),this.onStable=new gt(!1),this.onError=new gt(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&t,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function BB(){let n=un.requestAnimationFrame,e=un.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function HB(n){const e=()=>{!function VB(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(un,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Em(n),n.isCheckStableRunning=!0,bm(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Em(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,i,r,s,o,a)=>{try{return SS(n),t.invokeTask(r,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),TS(n)}},onInvoke:(t,i,r,s,o,a,l)=>{try{return SS(n),t.invoke(r,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),TS(n)}},onHasTask:(t,i,r,s)=>{t.hasTask(r,s),i===r&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,Em(n),bm(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,i,r,s)=>(t.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!an.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(an.isInAngularZone())throw new j(909,!1)}run(e,t,i){return this._inner.run(e,t,i)}runTask(e,t,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,UB,Uh,Uh);try{return s.runTask(o,t,i)}finally{s.cancelTask(o)}}runGuarded(e,t,i){return this._inner.runGuarded(e,t,i)}runOutsideAngular(e){return this._outer.run(e)}}const UB={};function bm(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Em(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function SS(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function TS(n){n._nesting--,bm(n)}class GB{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new gt,this.onMicrotaskEmpty=new gt,this.onStable=new gt,this.onError=new gt}run(e,t,i){return e.apply(t,i)}runGuarded(e,t,i){return e.apply(t,i)}runOutsideAngular(e){return e()}runTask(e,t,i,r){return e.apply(t,i)}}const xS=new Te(""),Gh=new Te("");let Sm,wm=(()=>{class n{constructor(t,i,r){this._ngZone=t,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Sm||(function jB(n){Sm=n}(r),r.addToWindow(i)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{an.assertNotInAngularZone(),vm(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vm(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(t)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:r})}whenStable(t,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,i,r){return[]}}return n.\u0275fac=function(t){return new(t||n)(de(an),de(Cm),de(Gh))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Cm=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,i){this._applications.set(t,i)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,i=!0){return Sm?.findTestabilityInTree(this,t,i)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Xs=null;const DS=new Te("AllowMultipleToken"),Tm=new Te("PlatformDestroyListeners");class AS{constructor(e,t){this.name=e,this.token=t}}function MS(n,e,t=[]){const i=`Platform: ${e}`,r=new Te(i);return(s=[])=>{let o=xm();if(!o||o.injector.get(DS,!1)){const a=[...t,...s,{provide:r,useValue:!0}];n?n(a):function zB(n){if(Xs&&!Xs.get(DS,!1))throw new j(400,!1);Xs=n;const e=n.get(PS);(function IS(n){const e=n.get(yS,null);e&&e.forEach(t=>t())})(n)}(function RS(n=[],e){return vr.create({name:e,providers:[{provide:pg,useValue:"platform"},{provide:Tm,useValue:new Set([()=>Xs=null])},...n]})}(a,i))}return function qB(n){const e=xm();if(!e)throw new j(401,!1);return e}()}}function xm(){return Xs?.get(PS)??null}let PS=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,i){const r=function NS(n,e){let t;return t="noop"===n?new GB:("zone.js"===n?void 0:n)||new an(e),t}(i?.ngZone,function OS(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:an,useValue:r}];return r.run(()=>{const o=vr.create({providers:s,parent:this.injector,name:t.moduleType.name}),a=t.create(o),l=a.injector.get(Ra,null);if(!l)throw new j(402,!1);return r.runOutsideAngular(()=>{const u=r.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{jh(this._modules,a),u.unsubscribe()})}),function FS(n,e,t){try{const i=t();return uu(i)?i.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>n.handleError(i)),i}}(l,r,()=>{const u=a.injector.get(Hh);return u.runInitializers(),u.donePromise.then(()=>(function oC(n){qi(n,"Expected localeId to be defined"),"string"==typeof n&&(sC=n.toLowerCase().replace(/_/g,"-"))}(a.injector.get(vs,za)||za),this._moduleDoBootstrap(a),a))})})}bootstrapModule(t,i=[]){const r=LS({},i);return function $B(n,e,t){const i=new tm(t);return Promise.resolve(i)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(t){const i=t.injector.get(Eu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!t.instance.ngDoBootstrap)throw new j(403,!1);t.instance.ngDoBootstrap(i)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const t=this._injector.get(Tm,null);t&&(t.forEach(i=>i()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(de(vr))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function LS(n,e){return Array.isArray(e)?e.reduce(LS,n):{...n,...e}}let Eu=(()=>{class n{constructor(t,i,r){this._zone=t,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new T(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new T(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{an.assertNotInAngularZone(),vm(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{an.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),u.unsubscribe()}});this.isStable=Yt(s,o.pipe(jt()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,i){const r=t instanceof dE;if(!this._injector.get(Hh).done)throw!r&&function fa(n){const e=Qt(n)||ei(n)||pi(n);return null!==e&&e.standalone}(t),new j(405,false);let o;o=r?t:this._injector.get(tu).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function WB(n){return n.isBoundToModule}(o)?void 0:this._injector.get(Xa),u=o.create(vr.NULL,[],i||o.selector,a),c=u.location.nativeElement,h=u.injector.get(xS,null);return h?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),jh(this.components,u),h?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new j(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const i=t;this._views.push(i),i.attachToAppRef(this)}detachView(t){const i=t;jh(this._views,i),i.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const i=this._injector.get(vS,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>jh(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new j(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(de(an),de(Br),de(Ra))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function jh(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let qs=(()=>{class n{}return n.__NG_ELEMENT_ID__=KB,n})();function KB(n){return function ZB(n,e,t){if(kl(n)&&!t){const i=Li(n.index,e);return new su(i,i)}return 47&n.type?new su(e[16],e):null}(Yn(),K(),16==(16&n))}class HS{constructor(){}supports(e){return au(e)}create(e){return new r2(e)}}const n2=(n,e)=>e;class r2{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||n2}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,i=this._removalsHead,r=0,s=null;for(;t||i;){const o=!i||t&&t.currentIndex<jS(i,r,s)?t:i,a=jS(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{s||(s=[]);const u=a-r,c=l-r;if(u!=c){for(let d=0;d<u;d++){const g=d<s.length?s[d]:s[d]=0,m=g+d;c<=m&&m<u&&(s[d]=g+1)}s[o.previousIndex]=c-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!au(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,t=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),i=!0),t=t._next}else r=0,function kF(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[xo()]();let i;for(;!(i=t.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(i&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),i=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,r)):e=this._addAfter(new s2(t,i),s,r),e}_verifyReinsertion(e,t,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,t,i),this._addToMoves(e,i),e}_moveAfter(e,t,i){return this._unlink(e),this._insertAfter(e,t,i),this._addToMoves(e,i),e}_addAfter(e,t,i){return this._insertAfter(e,t,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,i){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new GS),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,i=e._next;return null===t?this._itHead=i:t._next=i,null===i?this._itTail=t:i._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new GS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class s2{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class o2{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===t||t<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const t=e._prevDup,i=e._nextDup;return null===t?this._head=i:t._nextDup=i,null===i?this._tail=t:i._prevDup=t,null===this._head}}class GS{constructor(){this.map=new Map}put(e){const t=e.trackById;let i=this.map.get(t);i||(i=new o2,this.map.set(t,i)),i.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function jS(n,e,t){const i=n.previousIndex;if(null===i)return i;let r=0;return t&&i<t.length&&(r=t[i]),i+e+r}class $S{constructor(){}supports(e){return e instanceof Map||Ug(e)}create(){return new a2}}class a2{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ug(e)))throw new j(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,i),this._appendAfter=t,t=t._next;else{const s=this._getOrCreateRecordForKey(r,i);t=this._insertBeforeOrAppend(t,s)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let i=t;null!==i;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const i=e._prev;return t._next=e,t._prev=i,e._prev=t,i&&(i._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}const i=new l2(e);return this._records.set(e,i),i.currentValue=t,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(i=>t(e[i],i))}}class l2{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WS(){return new zh([new HS])}let zh=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(null!=i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||WS()),deps:[[n,new Wl,new $l]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(null!=i)return i;throw new j(901,!1)}}return n.\u0275prov=we({token:n,providedIn:"root",factory:WS}),n})();function zS(){return new wu([new $S])}let wu=(()=>{class n{constructor(t){this.factories=t}static create(t,i){if(i){const r=i.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:i=>n.create(t,i||zS()),deps:[[n,new Wl,new $l]]}}find(t){const i=this.factories.find(r=>r.supports(t));if(i)return i;throw new j(901,!1)}}return n.\u0275prov=we({token:n,providedIn:"root",factory:zS}),n})();const h2=MS(null,"core",[]);let d2=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(de(Eu))},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({}),n})();function Qa(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let Rm=null;function Wr(){return Rm}class g2{}const Xn=new Te("DocumentToken");let Pm=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return function m2(){return de(XS)}()},providedIn:"platform"}),n})();const _2=new Te("Location Initialized");let XS=(()=>{class n extends Pm{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Wr().getBaseHref(this._doc)}onPopState(t){const i=Wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=Wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){qS()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){qS()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(de(Xn))},n.\u0275prov=we({token:n,factory:function(){return function y2(){return new XS(de(Xn))}()},providedIn:"platform"}),n})();function qS(){return!!window.history.pushState}function Om(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function YS(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Es(n){return n&&"?"!==n[0]?"?"+n:n}let No=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return It(ZS)},providedIn:"root"}),n})();const KS=new Te("appBaseHref");let ZS=(()=>{class n extends No{constructor(t,i){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??It(Xn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Om(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Es(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const o=this.prepareExternalUrl(r+Es(s));this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){const o=this.prepareExternalUrl(r+Es(s));this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(de(Pm),de(KS,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),v2=(()=>{class n extends No{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Om(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let o=this.prepareExternalUrl(r+Es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,i,o)}replaceState(t,i,r,s){let o=this.prepareExternalUrl(r+Es(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(de(Pm),de(KS,8))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Nm=(()=>{class n{constructor(t){this._subject=new gt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const i=this._locationStrategy.getBaseHref();this._basePath=function w2(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(YS(QS(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Es(i))}normalize(t){return n.stripTrailingSlash(function E2(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._basePath,QS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._locationStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Es(i)),r)}replaceState(t,i="",r=null){this._locationStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Es(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Es,n.joinWithSlash=Om,n.stripTrailingSlash=YS,n.\u0275fac=function(t){return new(t||n)(de(No))},n.\u0275prov=we({token:n,factory:function(){return function b2(){return new Nm(de(No))}()},providedIn:"root"}),n})();function QS(n){return n.replace(/\/index.html$/,"")}function aT(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}let Tu=(()=>{class n{constructor(t,i,r,s){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(au(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${kt(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(t){return new(t||n)(B(zh),B(wu),B(In),B(Di))},n.\u0275dir=Be({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class oU{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $m=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new oU(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),cT(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{cT(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(B(tr),B($r),B(zh))},n.\u0275dir=Be({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function cT(n,e){n.context.$implicit=e.item}let nd=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new lU,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hT("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hT("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(B(tr),B($r))},n.\u0275dir=Be({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class lU{constructor(){this.$implicit=null,this.ngIf=null}}function hT(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${kt(e)}'.`)}let xu=(()=>{class n{constructor(t,i,r){this._ngEl=t,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,i){const[r,s]=t.split("."),o=-1===r.indexOf("-")?void 0:Ti.DashCase;null!=i?this._renderer.setStyle(this._ngEl.nativeElement,r,s?`${i}${s}`:i,o):this._renderer.removeStyle(this._ngEl.nativeElement,r,o)}_applyChanges(t){t.forEachRemovedItem(i=>this._setStyle(i.key,null)),t.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),t.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(wu),B(Di))},n.\u0275dir=Be({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),fT=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const i=this._viewContainerRef;if(this._viewRef&&i.remove(i.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:r,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=i.createEmbeddedView(r,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(B(tr))},n.\u0275dir=Be({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Si]}),n})(),Fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({}),n})();let BU=(()=>{class n{}return n.\u0275prov=we({token:n,providedIn:"root",factory:()=>new UU(de(Xn),window)}),n})();class UU{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function VU(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=mT(this.window.history)||mT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function mT(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class _T{}class fV extends g2{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Zm extends fV{static makeCurrent(){!function p2(n){Rm||(Rm=n)}(new Zm)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function pV(){return Au=Au||document.querySelector("base"),Au?Au.getAttribute("href"):null}();return null==t?null:function gV(n){rd=rd||document.createElement("a"),rd.setAttribute("href",n);const e=rd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Au=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return aT(document.cookie,e)}}let rd,Au=null;const CT=new Te("TRANSITION_ID"),_V=[{provide:Vh,useFactory:function mV(n,e,t){return()=>{t.get(Hh).donePromise.then(()=>{const i=Wr(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[CT,Xn,vr],multi:!0}];let vV=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const sd=new Te("EventManagerPlugins");let od=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(de(sd),de(an))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class ST{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=Wr().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let TT=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Iu=(()=>{class n extends TT{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(xT),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(xT))}}return n.\u0275fac=function(t){return new(t||n)(de(Xn))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();function xT(n){Wr().remove(n)}const Qm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Jm=/%COMP%/g;function e_(n,e){return e.flat(100).map(t=>t.replace(Jm,n))}function IT(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ad=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new t_(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case pr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new TV(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case pr.ShadowDom:return new xV(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=e_(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(de(od),de(Iu),de(bu))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class t_{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qm[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(RT(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(RT(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=Qm[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=Qm[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Ti.DashCase|Ti.Important)?e.style.setProperty(t,i,r&Ti.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Ti.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,IT(i)):this.eventManager.addEventListener(e,t,IT(i))}}function RT(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class TV extends t_{constructor(e,t,i,r){super(e),this.component=i;const s=e_(r+"-"+i.id,i.styles);t.addStyles(s),this.contentAttr=function wV(n){return"_ngcontent-%COMP%".replace(Jm,n)}(r+"-"+i.id),this.hostAttr=function CV(n){return"_nghost-%COMP%".replace(Jm,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class xV extends t_{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=e_(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let DV=(()=>{class n extends ST{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(de(Xn))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const PT=["alt","control","meta","shift"],AV={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let MV=(()=>{class n extends ST{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),o=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Wr().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),PT.forEach(u=>{const c=i.indexOf(u);c>-1&&(i.splice(c,1),o+=u+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(t,i){let r=AV[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(r=t.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),PT.forEach(o=>{o!==r&&(0,IV[o])(t)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(t,i,r){return s=>{n.matchEventFullKeyCode(s,t)&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(de(Xn))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const NT=[{provide:ym,useValue:"browser"},{provide:yS,useValue:function RV(){Zm.makeCurrent()},multi:!0},{provide:Xn,useFactory:function OV(){return function vO(n){sg=n}(document),document},deps:[]}],NV=MS(h2,"browser",NT),FT=new Te(""),LT=[{provide:Gh,useClass:class yV{addToWindow(e){un.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},un.getAllAngularTestabilities=()=>e.getAllTestabilities(),un.getAllAngularRootElements=()=>e.getAllRootElements(),un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(i=>{const r=un.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?Wr().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:xS,useClass:wm,deps:[an,Cm,Gh]},{provide:wm,useClass:wm,deps:[an,Cm,Gh]}],kT=[{provide:pg,useValue:"root"},{provide:Ra,useFactory:function PV(){return new Ra},deps:[]},{provide:sd,useClass:DV,multi:!0,deps:[Xn,an,ym]},{provide:sd,useClass:MV,multi:!0,deps:[Xn]},{provide:ad,useClass:ad,deps:[od,Iu,bu]},{provide:nu,useExisting:ad},{provide:TT,useExisting:Iu},{provide:Iu,useClass:Iu,deps:[Xn]},{provide:od,useClass:od,deps:[sd,an]},{provide:_T,useClass:vV,deps:[]},[]];let BT=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:bu,useValue:t.appId},{provide:CT,useExisting:bu},_V]}}}return n.\u0275fac=function(t){return new(t||n)(de(FT,12))},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({providers:[...kT,...LT],imports:[Fo,d2]}),n})(),UT=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(de(Xn))},n.\u0275prov=we({token:n,factory:function(t){let i=null;return i=t?new t:function LV(){return new UT(de(Xn))}(),i},providedIn:"root"}),n})();typeof window<"u"&&window;const{isArray:$V}=Array,{getPrototypeOf:WV,prototype:zV,keys:XV}=Object;function GT(n){if(1===n.length){const e=n[0];if($V(e))return{args:e,keys:null};if(function qV(n){return n&&"object"==typeof n&&WV(n)===zV}(e)){const t=XV(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}const{isArray:YV}=Array;function r_(n){return $(e=>function KV(n,e){return YV(e)?n(...e):n(e)}(n,e))}function jT(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}const Pu=new Te("CallSetDisabledState",{providedIn:"root",factory:()=>g_}),g_="always";let Rx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({}),n})(),Z3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Rx]}),n})(),Q3=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Pu,useValue:t.callSetDisabledState??g_}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Z3]}),n})();class Yx{}class eH{}const Cs="*";function Kx(n,e=null){return{type:2,steps:n,options:e}}function Zx(n){return{type:6,styles:n,offset:null}}function Qx(n){Promise.resolve().then(n)}class Fu{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Qx(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class Jx{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?Qx(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}function eD(n){return new j(3e3,!1)}function FH(){return typeof window<"u"&&typeof window.document<"u"}function A_(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Js(n){switch(n.length){case 0:return new Fu;case 1:return n[0];default:return new Jx(n)}}function tD(n,e,t,i,r=new Map,s=new Map){const o=[],a=[];let l=-1,u=null;if(i.forEach(c=>{const h=c.get("offset"),d=h==l,g=d&&u||new Map;c.forEach((m,y)=>{let v=y,b=m;if("offset"!==y)switch(v=e.normalizePropertyName(v,o),b){case"!":b=r.get(y);break;case Cs:b=s.get(y);break;default:b=e.normalizeStyleValue(y,v,b,o)}g.set(v,b)}),d||a.push(g),u=g,l=h}),o.length)throw function CH(n){return new j(3502,!1)}();return a}function I_(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&M_(t,"start",n)));break;case"done":n.onDone(()=>i(t&&M_(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&M_(t,"destroy",n)))}}function M_(n,e,t){const s=R_(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function R_(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Ui(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function nD(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let P_=(n,e)=>!1,iD=(n,e,t)=>[],rD=null;function O_(n){const e=n.parentNode||n.host;return e===rD?null:e}(A_()||typeof Element<"u")&&(FH()?(rD=(()=>document.documentElement)(),P_=(n,e)=>{for(;e;){if(e===n)return!0;e=O_(e)}return!1}):P_=(n,e)=>n.contains(e),iD=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let Bo=null,sD=!1;const oD=P_,aD=iD;let lD=(()=>{class n{validateStyleProperty(t){return function kH(n){Bo||(Bo=function BH(){return typeof document<"u"?document.body:null}()||{},sD=!!Bo.style&&"WebkitAppearance"in Bo.style);let e=!0;return Bo.style&&!function LH(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Bo.style,!e&&sD&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Bo.style)),e}(t)}matchesElement(t,i){return!1}containsElement(t,i){return oD(t,i)}getParentElement(t){return O_(t)}query(t,i,r){return aD(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new Fu(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),N_=(()=>{class n{}return n.NOOP=new lD,n})();const F_="ng-enter",_d="ng-leave",yd="ng-trigger",vd=".ng-trigger",cD="ng-animating",L_=".ng-animating";function Ss(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:k_(parseFloat(e[1]),e[2])}function k_(n,e){return"s"===e?1e3*n:n}function bd(n,e,t){return n.hasOwnProperty("duration")?n:function HH(n,e,t){let r,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(eD()),{duration:0,delay:0,easing:""};r=k_(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=k_(parseFloat(l),a[4]));const u=a[5];u&&(o=u)}else r=n;if(!t){let a=!1,l=e.length;r<0&&(e.push(function tH(){return new j(3100,!1)}()),a=!0),s<0&&(e.push(function nH(){return new j(3101,!1)}()),a=!0),a&&e.splice(l,0,eD())}return{duration:r,delay:s,easing:o}}(n,e,t)}function Lu(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function hD(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function eo(n,e=new Map,t){if(t)for(let[i,r]of t)e.set(i,r);for(let[i,r]of n)e.set(i,r);return e}function fD(n,e,t){return t?e+":"+t+";":""}function pD(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=fD(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=fD(0,WH(t),n.style[t]));n.setAttribute("style",e)}function Xr(n,e,t){n.style&&(e.forEach((i,r)=>{const s=U_(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i}),A_()&&pD(n))}function Uo(n,e){n.style&&(e.forEach((t,i)=>{const r=U_(i);n.style[r]=""}),A_()&&pD(n))}function ku(n){return Array.isArray(n)?1==n.length?n[0]:Kx(n):n}const B_=new RegExp("{{\\s*(.+?)\\s*}}","g");function gD(n){let e=[];if("string"==typeof n){let t;for(;t=B_.exec(n);)e.push(t[1]);B_.lastIndex=0}return e}function Bu(n,e,t){const i=n.toString(),r=i.replace(B_,(s,o)=>{let a=e[o];return null==a&&(t.push(function rH(n){return new j(3003,!1)}()),a=""),a.toString()});return r==i?n:r}function Ed(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const $H=/-+([a-z0-9])/g;function U_(n){return n.replace($H,(...e)=>e[1].toUpperCase())}function WH(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Vi(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function sH(n){return new j(3004,!1)}()}}function mD(n,e){return window.getComputedStyle(n)[e]}function ZH(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function QH(n,e,t){if(":"==n[0]){const l=function JH(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function vH(n){return new j(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function yH(n){return new j(3015,!1)}()),e;const r=i[1],s=i[2],o=i[3];e.push(_D(r,o));"<"==s[0]&&!("*"==r&&"*"==o)&&e.push(_D(o,r))}(i,t,e)):t.push(n),t}const Td=new Set(["true","1"]),xd=new Set(["false","0"]);function _D(n,e){const t=Td.has(n)||xd.has(n),i=Td.has(e)||xd.has(e);return(r,s)=>{let o="*"==n||n==r,a="*"==e||e==s;return!o&&t&&"boolean"==typeof r&&(o=r?Td.has(n):xd.has(n)),!a&&i&&"boolean"==typeof s&&(a=s?Td.has(e):xd.has(e)),o&&a}}const eG=new RegExp("s*:selfs*,?","g");function V_(n,e,t,i){return new tG(n).build(e,t,i)}class tG{constructor(e){this._driver=e}build(e,t,i){const r=new rG(t);return this._resetContextStyleTimingState(r),Vi(this,ku(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function aH(){return new j(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(c=>{l.name=c,s.push(this.visitState(l,t))}),l.name=u}else if(1==a.type){const l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(function lH(){return new j(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{gD(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&(Ed(s.values()),t.errors.push(function uH(n,e){return new j(3008,!1)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Vi(this,ku(e.animation),t);return{type:1,matchers:ZH(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Vo(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Vi(this,i,t)),options:Vo(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(o=>{t.currentTime=i;const a=Vi(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:3,steps:s,options:Vo(e.options)}}visitAnimate(e,t){const i=function oG(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return H_(bd(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=H_(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=bd(t,e);return H_(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Zx({});if(5==s.type)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const u={};i.easing&&(u.easing=i.easing),o=Zx(u)}t.currentTime+=i.duration+i.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)"string"==typeof a?a===Cs?i.push(a):t.errors.push(new j(3002,!1)):i.push(hD(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const u=t.collectedStyles.get(t.currentQuerySelector),c=u.get(l);let h=!0;c&&(s!=r&&s>=c.startTime&&r<=c.endTime&&(t.errors.push(function hH(n,e,t,i,r){return new j(3010,!1)}()),h=!1),s=c.startTime),h&&u.set(l,{startTime:s,endTime:r}),t.options&&function jH(n,e,t){const i=e.params||{},r=gD(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function iH(n){return new j(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function dH(){return new j(3011,!1)}()),i;let s=0;const o=[];let a=!1,l=!1,u=0;const c=e.steps.map(b=>{const A=this._makeStyleAst(b,t);let w=null!=A.offset?A.offset:function sG(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(A.styles),M=0;return null!=w&&(s++,M=A.offset=w),l=l||M<0||M>1,a=a||M<u,u=M,o.push(M),A});l&&t.errors.push(function fH(){return new j(3012,!1)}()),a&&t.errors.push(function pH(){return new j(3200,!1)}());const h=e.steps.length;let d=0;s>0&&s<h?t.errors.push(function gH(){return new j(3202,!1)}()):0==s&&(d=1/(h-1));const g=h-1,m=t.currentTime,y=t.currentAnimateTimings,v=y.duration;return c.forEach((b,A)=>{const w=d>0?A==g?1:d*A:o[A],M=w*v;t.currentTime=m+y.delay+M,y.duration=M,this._validateStyleAst(b,t),b.offset=w,i.styles.push(b)}),i}visitReference(e,t){return{type:8,animation:Vi(this,ku(e.animation),t),options:Vo(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Vo(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Vo(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function nG(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(eG,"")),n=n.replace(/@\*/g,vd).replace(/@\w+/g,t=>vd+"-"+t.slice(1)).replace(/:animating/g,L_),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ui(t.collectedStyles,t.currentQuerySelector,new Map);const a=Vi(this,ku(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Vo(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function mH(){return new j(3013,!1)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:bd(e.timings,t.errors,!0);return{type:12,animation:Vi(this,ku(e.animation),t),timings:i,options:null}}}class rG{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Vo(n){return n?(n=Lu(n)).params&&(n.params=function iG(n){return n?Lu(n):null}(n.params)):n={},n}function H_(n,e,t){return{duration:n,delay:e,easing:t}}function G_(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Dd{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const uG=new RegExp(":enter","g"),hG=new RegExp(":leave","g");function j_(n,e,t,i,r,s=new Map,o=new Map,a,l,u=[]){return(new dG).buildKeyframes(n,e,t,i,r,s,o,a,l,u)}class dG{buildKeyframes(e,t,i,r,s,o,a,l,u,c=[]){u=u||new Dd;const h=new $_(e,t,u,r,s,c,[]);h.options=l;const d=l.delay?Ss(l.delay):0;h.currentTimeline.delayNextStep(d),h.currentTimeline.setStyles([o],null,h.errors,l),Vi(this,i,h);const g=h.timelines.filter(m=>m.containsAnimation());if(g.length&&a.size){let m;for(let y=g.length-1;y>=0;y--){const v=g[y];if(v.element===t){m=v;break}}m&&!m.allowOnlyTimelineStyles()&&m.setStyles([a],null,h.errors,l)}return g.length?g.map(m=>m.buildKeyframes()):[G_(t,[],[],[],0,d,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Ss(Bu(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const o=null!=i.duration?Ss(i.duration):null,a=null!=i.delay?Ss(i.delay):null;return 0!==o&&e.forEach(l=>{const u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Vi(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Ad);const o=Ss(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Vi(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ss(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Vi(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return bd(t.params?Bu(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?Ss(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ad);let o=i;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,c)=>{t.currentQueryIndex=c;const h=t.createSubContext(e.options,u);s&&h.delayNextStep(s),u===t.element&&(l=h.currentTimeline),Vi(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,h.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime}const c=t.currentTimeline;l&&c.delayNextStep(l);const h=c.currentTime;Vi(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}}const Ad={};class $_{constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ad,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Id(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=Ss(i.duration)),null!=i.delay&&(r.delay=Ss(i.delay));const s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Bu(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new $_(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ad,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new fG(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=(e=e.replace(uG,"."+this._enterClassName)).replace(hG,"."+this._leaveClassName);let u=this._driver.query(this.element,e,1!=i);0!==i&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!s&&0==a.length&&o.push(function _H(n){return new j(3014,!1)}()),a}}class Id{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new Id(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||Cs),this._currentKeyframe.set(t,Cs);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);const s=r&&r.params||{},o=function pG(n,e){const t=new Map;let i;return n.forEach(r=>{if("*"===r){i=i||e.keys();for(let s of i)t.set(s,Cs)}else eo(r,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const u=Bu(l,s,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Cs),this._updateStyle(a,u)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{const r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((a,l)=>{const u=eo(a,new Map,this._backFill);u.forEach((c,h)=>{"!"===c?e.add(h):c===Cs&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});const s=e.size?Ed(e.values()):[],o=t.size?Ed(t.values()):[];if(i){const a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return G_(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class fG extends Id{constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=i+t,a=t/o,l=eo(e[0]);l.set("offset",0),s.push(l);const u=eo(e[0]);u.set("offset",bD(a)),s.push(u);const c=e.length-1;for(let h=1;h<=c;h++){let d=eo(e[h]);const g=d.get("offset");d.set("offset",bD((t+g*i)/o)),s.push(d)}i=o,t=0,r="",e=s}return G_(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function bD(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class W_{}const gG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class mG extends W_{normalizePropertyName(e,t){return U_(e)}normalizeStyleValue(e,t,i,r){let s="";const o=i.toString().trim();if(gG.has(t)&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&r.push(function oH(n,e){return new j(3005,!1)}())}return o+s}}function ED(n,e,t,i,r,s,o,a,l,u,c,h,d){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const z_={};class wD{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function _G(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,u,c){const h=[],d=this.ast.options&&this.ast.options.params||z_,m=this.buildStyles(i,a&&a.params||z_,h),y=l&&l.params||z_,v=this.buildStyles(r,y,h),b=new Set,A=new Map,w=new Map,M="void"===r,J={params:yG(y,d),delay:this.ast.options?.delay},te=c?[]:j_(e,t,this.ast.animation,s,o,m,v,J,u,h);let ie=0;if(te.forEach(Oe=>{ie=Math.max(Oe.duration+Oe.delay,ie)}),h.length)return ED(t,this._triggerName,i,r,M,m,v,[],[],A,w,ie,h);te.forEach(Oe=>{const re=Oe.element,W=Ui(A,re,new Set);Oe.preStyleProps.forEach(q=>W.add(q));const ae=Ui(w,re,new Set);Oe.postStyleProps.forEach(q=>ae.add(q)),re!==t&&b.add(re)});const oe=Ed(b.values());return ED(t,this._triggerName,i,r,M,m,v,te,oe,A,w,ie)}}function yG(n,e){const t=Lu(e);for(const i in n)n.hasOwnProperty(i)&&null!=n[i]&&(t[i]=n[i]);return t}class vG{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i=new Map,r=Lu(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Bu(o,r,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}}class EG{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states=new Map,t.states.forEach(r=>{this.states.set(r.name,new vG(r.style,r.options&&r.options.params||{},i))}),CD(this.states,"true","1"),CD(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new wD(e,r,this.states))}),this.fallbackTransition=function wG(n,e,t){return new wD(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function CD(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const CG=new Dd;class SG{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const i=[],s=V_(this._driver,t,i,[]);if(i.length)throw function SH(n){return new j(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,i){const r=e.element,s=tD(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=j_(this._driver,t,s,F_,_d,new Map,new Map,i,CG,r),o.forEach(c=>{const h=Ui(a,c.element,new Map);c.postStyleProps.forEach(d=>h.set(d,null))})):(r.push(function TH(){return new j(3300,!1)}()),o=[]),r.length)throw function xH(n){return new j(3504,!1)}();a.forEach((c,h)=>{c.forEach((d,g)=>{c.set(g,this._driver.computeStyle(h,g,Cs))})});const u=Js(o.map(c=>{const h=a.get(c.element);return this._buildPlayer(c,new Map,h)}));return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function DH(n){return new j(3301,!1)}();return t}listen(e,t,i,r){const s=R_(t,"","","");return I_(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const SD="ng-animate-queued",X_="ng-animate-disabled",IG=[],TD={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},MG={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},rr="__ng_removed";class q_{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function NG(n){return n??null}(i?e.value:e),i){const s=Lu(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Uu="void",Y_=new q_(Uu);class RG{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,sr(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw function AH(n,e){return new j(3302,!1)}();if(null==i||0==i.length)throw function IH(n){return new j(3303,!1)}();if(!function FG(n){return"start"==n||"done"==n}(i))throw function MH(n,e){return new j(3400,!1)}();const s=Ui(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);const a=Ui(this._engine.statesByElement,e,new Map);return a.has(t)||(sr(e,yd),sr(e,yd+"-"+t),a.set(t,Y_)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function RH(n){return new j(3401,!1)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),o=new K_(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(sr(e,yd),sr(e,yd+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const u=new q_(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=Y_),u.value!==Uu&&l.value===u.value){if(!function BG(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,u.params)){const y=[],v=s.matchStyles(l.value,l.params,y),b=s.matchStyles(u.value,u.params,y);y.length?this._engine.reportError(y):this._engine.afterFlush(()=>{Uo(e,v),Xr(e,b)})}return}const d=Ui(this._engine.playersByElement,e,[]);d.forEach(y=>{y.namespaceId==this.id&&y.triggerName==t&&y.queued&&y.destroy()});let g=s.matchTransition(l.value,u.value,e,u.params),m=!1;if(!g){if(!r)return;g=s.fallbackTransition,m=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:g,fromState:l,toState:u,player:o,isFallbackTransition:m}),m||(sr(e,SD),o.onStart(()=>{el(e,SD)})),o.onDone(()=>{let y=this.players.indexOf(o);y>=0&&this.players.splice(y,1);const v=this._engine.playersByElement.get(e);if(v){let b=v.indexOf(o);b>=0&&v.splice(b,1)}}),this.players.push(o),d.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,vd,!0);i.forEach(r=>{if(r[rr])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){const c=this.trigger(e,u,Uu,r);c&&a.push(c)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Js(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const l=this._triggers.get(o).fallbackTransition,u=i.get(o)||Y_,c=new q_(Uu),h=new K_(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:c,player:h,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[rr];(!s||s===TD)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){sr(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){const l=R_(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,I_(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class PG{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new RG(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=r.get(a);if(l){const u=i.indexOf(l);i.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i)for(let r of i.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}return t}trigger(e,t,i,r){if(Md(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!Md(t))return;const s=t[rr];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),sr(e,X_)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),el(e,X_))}removeNode(e,t,i,r){if(Md(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const o=this.namespacesByHostElement.get(t);o&&o.id!==e&&o.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[rr]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return Md(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,vd,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,L_,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Js(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[rr];if(t&&t.setForRemoval){if(e[rr]=TD,t.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(X_)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)sr(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?Js(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function PH(n){return new j(3402,!1)}()}_flushAnimations(e,t){const i=new Dd,r=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,c=new Set;this.disabledNodes.forEach(Q=>{c.add(Q);const ne=this.driver.query(Q,".ng-animate-queued",!0);for(let fe=0;fe<ne.length;fe++)c.add(ne[fe])});const h=this.bodyNode,d=Array.from(this.statesByElement.keys()),g=AD(d,this.collectedEnterElements),m=new Map;let y=0;g.forEach((Q,ne)=>{const fe=F_+y++;m.set(ne,fe),Q.forEach(Ee=>sr(Ee,fe))});const v=[],b=new Set,A=new Set;for(let Q=0;Q<this.collectedLeaveElements.length;Q++){const ne=this.collectedLeaveElements[Q],fe=ne[rr];fe&&fe.setForRemoval&&(v.push(ne),b.add(ne),fe.hasAnimation?this.driver.query(ne,".ng-star-inserted",!0).forEach(Ee=>b.add(Ee)):A.add(ne))}const w=new Map,M=AD(d,Array.from(b));M.forEach((Q,ne)=>{const fe=_d+y++;w.set(ne,fe),Q.forEach(Ee=>sr(Ee,fe))}),e.push(()=>{g.forEach((Q,ne)=>{const fe=m.get(ne);Q.forEach(Ee=>el(Ee,fe))}),M.forEach((Q,ne)=>{const fe=w.get(ne);Q.forEach(Ee=>el(Ee,fe))}),v.forEach(Q=>{this.processLeaveNode(Q)})});const J=[],te=[];for(let Q=this._namespaceList.length-1;Q>=0;Q--)this._namespaceList[Q].drainQueuedTransitions(t).forEach(fe=>{const Ee=fe.player,gn=fe.element;if(J.push(Ee),this.collectedEnterElements.length){const On=gn[rr];if(On&&On.setForMove){if(On.previousTriggersValues&&On.previousTriggersValues.has(fe.triggerName)){const hr=On.previousTriggersValues.get(fe.triggerName),hi=this.statesByElement.get(fe.element);if(hi&&hi.has(fe.triggerName)){const dr=hi.get(fe.triggerName);dr.value=hr,hi.set(fe.triggerName,dr)}}return void Ee.destroy()}}const ui=!h||!this.driver.containsElement(h,gn),ci=w.get(gn),$i=m.get(gn),nn=this._buildInstruction(fe,i,$i,ci,ui);if(nn.errors&&nn.errors.length)return void te.push(nn);if(ui)return Ee.onStart(()=>Uo(gn,nn.fromStyles)),Ee.onDestroy(()=>Xr(gn,nn.toStyles)),void r.push(Ee);if(fe.isFallbackTransition)return Ee.onStart(()=>Uo(gn,nn.fromStyles)),Ee.onDestroy(()=>Xr(gn,nn.toStyles)),void r.push(Ee);const Mc=[];nn.timelines.forEach(On=>{On.stretchStartingKeyframe=!0,this.disabledNodes.has(On.element)||Mc.push(On)}),nn.timelines=Mc,i.append(gn,nn.timelines),o.push({instruction:nn,player:Ee,element:gn}),nn.queriedElements.forEach(On=>Ui(a,On,[]).push(Ee)),nn.preStyleProps.forEach((On,hr)=>{if(On.size){let hi=l.get(hr);hi||l.set(hr,hi=new Set),On.forEach((dr,Nr)=>hi.add(Nr))}}),nn.postStyleProps.forEach((On,hr)=>{let hi=u.get(hr);hi||u.set(hr,hi=new Set),On.forEach((dr,Nr)=>hi.add(Nr))})});if(te.length){const Q=[];te.forEach(ne=>{Q.push(function OH(n,e){return new j(3505,!1)}())}),J.forEach(ne=>ne.destroy()),this.reportError(Q)}const ie=new Map,oe=new Map;o.forEach(Q=>{const ne=Q.element;i.has(ne)&&(oe.set(ne,ne),this._beforeAnimationBuild(Q.player.namespaceId,Q.instruction,ie))}),r.forEach(Q=>{const ne=Q.element;this._getPreviousPlayers(ne,!1,Q.namespaceId,Q.triggerName,null).forEach(Ee=>{Ui(ie,ne,[]).push(Ee),Ee.destroy()})});const Oe=v.filter(Q=>MD(Q,l,u)),re=new Map;DD(re,this.driver,A,u,Cs).forEach(Q=>{MD(Q,l,u)&&Oe.push(Q)});const ae=new Map;g.forEach((Q,ne)=>{DD(ae,this.driver,new Set(Q),l,"!")}),Oe.forEach(Q=>{const ne=re.get(Q),fe=ae.get(Q);re.set(Q,new Map([...Array.from(ne?.entries()??[]),...Array.from(fe?.entries()??[])]))});const q=[],ee=[],Jt={};o.forEach(Q=>{const{element:ne,player:fe,instruction:Ee}=Q;if(i.has(ne)){if(c.has(ne))return fe.onDestroy(()=>Xr(ne,Ee.toStyles)),fe.disabled=!0,fe.overrideTotalTime(Ee.totalTime),void r.push(fe);let gn=Jt;if(oe.size>1){let ci=ne;const $i=[];for(;ci=ci.parentNode;){const nn=oe.get(ci);if(nn){gn=nn;break}$i.push(ci)}$i.forEach(nn=>oe.set(nn,gn))}const ui=this._buildAnimation(fe.namespaceId,Ee,ie,s,ae,re);if(fe.setRealPlayer(ui),gn===Jt)q.push(fe);else{const ci=this.playersByElement.get(gn);ci&&ci.length&&(fe.parentPlayer=Js(ci)),r.push(fe)}}else Uo(ne,Ee.fromStyles),fe.onDestroy(()=>Xr(ne,Ee.toStyles)),ee.push(fe),c.has(ne)&&r.push(fe)}),ee.forEach(Q=>{const ne=s.get(Q.element);if(ne&&ne.length){const fe=Js(ne);Q.setRealPlayer(fe)}}),r.forEach(Q=>{Q.parentPlayer?Q.syncPlayerEvents(Q.parentPlayer):Q.destroy()});for(let Q=0;Q<v.length;Q++){const ne=v[Q],fe=ne[rr];if(el(ne,_d),fe&&fe.hasAnimation)continue;let Ee=[];if(a.size){let ui=a.get(ne);ui&&ui.length&&Ee.push(...ui);let ci=this.driver.query(ne,L_,!0);for(let $i=0;$i<ci.length;$i++){let nn=a.get(ci[$i]);nn&&nn.length&&Ee.push(...nn)}}const gn=Ee.filter(ui=>!ui.destroyed);gn.length?LG(this,ne,gn):this.processLeaveNode(ne)}return v.length=0,q.forEach(Q=>{this.players.push(Q),Q.onDone(()=>{Q.destroy();const ne=this.players.indexOf(Q);this.players.splice(ne,1)}),Q.play()}),q}elementContainsData(e,t){let i=!1;const r=t[rr];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Uu;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||o.push(u)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const u=l.element,c=u!==s,h=Ui(i,u,[]);this._getPreviousPlayers(u,c,o,a,t.toState).forEach(g=>{const m=g.getRealPlayer();m.beforeDestroy&&m.beforeDestroy(),g.destroy(),h.push(g)})}Uo(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){const a=t.triggerName,l=t.element,u=[],c=new Set,h=new Set,d=t.timelines.map(m=>{const y=m.element;c.add(y);const v=y[rr];if(v&&v.removedBeforeQueried)return new Fu(m.duration,m.delay);const b=y!==l,A=function kG(n){const e=[];return ID(n,e),e}((i.get(y)||IG).map(ie=>ie.getRealPlayer())).filter(ie=>!!ie.element&&ie.element===y),w=s.get(y),M=o.get(y),J=tD(0,this._normalizer,0,m.keyframes,w,M),te=this._buildPlayer(m,J,A);if(m.subTimeline&&r&&h.add(y),b){const ie=new K_(e,a,y);ie.setRealPlayer(te),u.push(ie)}return te});u.forEach(m=>{Ui(this.playersByQueriedElement,m.element,[]).push(m),m.onDone(()=>function OG(n,e,t){let i=n.get(e);if(i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}return i}(this.playersByQueriedElement,m.element,m))}),c.forEach(m=>sr(m,cD));const g=Js(d);return g.onDestroy(()=>{c.forEach(m=>el(m,cD)),Xr(l,t.toStyles)}),h.forEach(m=>{Ui(r,m,[]).push(g)}),g}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Fu(e.duration,e.delay)}}class K_{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Fu,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>I_(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ui(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Md(n){return n&&1===n.nodeType}function xD(n,e){const t=n.style.display;return n.style.display=e??"none",t}function DD(n,e,t,i,r){const s=[];t.forEach(l=>s.push(xD(l)));const o=[];i.forEach((l,u)=>{const c=new Map;l.forEach(h=>{const d=e.computeStyle(u,h,r);c.set(h,d),(!d||0==d.length)&&(u[rr]=MG,o.push(u))}),n.set(u,c)});let a=0;return t.forEach(l=>xD(l,s[a++])),o}function AD(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const r=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const u=a.parentNode;return l=t.has(u)?u:r.has(u)?1:o(u),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function sr(n,e){n.classList?.add(e)}function el(n,e){n.classList?.remove(e)}function LG(n,e,t){Js(t).onDone(()=>n.processLeaveNode(e))}function ID(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof Jx?ID(i.players,e):e.push(i)}}function MD(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class Rd{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new PG(e,t,i),this._timelineEngine=new SG(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const o=e+"-"+r;let a=this._triggerCache[o];if(!a){const l=[],c=V_(this._driver,s,l,[]);if(l.length)throw function wH(n,e){return new j(3404,!1)}();a=function bG(n,e,t){return new EG(n,e,t)}(r,c,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,o]=nD(i);this._timelineEngine.command(s,t,o,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[o,a]=nD(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let VG=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Xr(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xr(this._element,this._initialStyles),this._endStyles&&(Xr(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Uo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Uo(this._element,this._endStyles),this._endStyles=null),Xr(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Z_(n){let e=null;return n.forEach((t,i)=>{(function HG(n){return"display"===n||"position"===n})(i)&&(e=e||new Map,e.set(i,t))}),e}class RD{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{"offset"!==r&&e.set(r,this._finished?i:mD(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class GG{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return oD(e,t)}getParentElement(e){return O_(e)}query(e,t,i){return aD(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,o=[]){const l={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(l.easing=s);const u=new Map,c=o.filter(g=>g instanceof RD);(function zH(n,e){return 0===n||0===e})(i,r)&&c.forEach(g=>{g.currentSnapshot.forEach((m,y)=>u.set(y,m))});let h=function GH(n){return n.length?n[0]instanceof Map?n:n.map(e=>hD(e)):[]}(t).map(g=>eo(g));h=function XH(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,mD(n,a)))}}return e}(e,h,u);const d=function UG(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=Z_(e[0]),e.length>1&&(i=Z_(e[e.length-1]))):e instanceof Map&&(t=Z_(e)),t||i?new VG(n,t,i):null}(e,h);return new RD(e,h,l,d)}}let jG=(()=>{class n extends Yx{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:pr.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?Kx(t):t;return PD(this._renderer,null,i,"register",[r]),new $G(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(de(nu),de(Xn))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class $G extends eH{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new WG(this._id,e,t||{},this._renderer)}}class WG{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return PD(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function PD(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const OD="@.disabled";let zG=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let c=this._rendererCache.get(s);return c||(c=new ND("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,c)),c}const o=i.id,a=i.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=c=>{Array.isArray(c)?c.forEach(l):this.engine.registerTrigger(o,a,t,c.name,c)};return i.data.animation.forEach(l),new XG(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(de(nu),de(Rd),de(an))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class ND{constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==OD?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class XG extends ND{constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==OD?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function qG(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function YG(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,i,a)})}return this.delegate.listen(e,t,i)}}let KG=(()=>{class n extends Rd{constructor(t,i,r,s){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(de(Xn),de(N_),de(W_),de(Eu))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const FD=[{provide:Yx,useClass:jG},{provide:W_,useFactory:function ZG(){return new mG}},{provide:Rd,useClass:KG},{provide:nu,useFactory:function QG(n,e,t){return new zG(n,e,t)},deps:[ad,Rd,an]}],Q_=[{provide:N_,useFactory:()=>new GG},{provide:bS,useValue:"BrowserAnimations"},...FD],LD=[{provide:N_,useClass:lD},{provide:bS,useValue:"NoopAnimations"},...FD];let JG=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?LD:Q_}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({providers:Q_,imports:[BT]}),n})();function Ie(...n){return We(n,Ze(n))}function Ts(n,e){return ge(e)?I(n,e,1):I(n,1)}function wi(n,e){return Z((t,i)=>{let r=0;t.subscribe(U(i,s=>n.call(e,s,r++)&&i.next(s)))})}class Od{}class J_{}class xs{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof xs?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new xs;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof xs?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class ej{encodeKey(e){return kD(e)}encodeValue(e){return kD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const nj=/%(\d[a-f0-9])/gi,ij={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function kD(n){return encodeURIComponent(n).replace(nj,(e,t)=>ij[t]??e)}function Nd(n){return`${n}`}class to{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ej,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function tj(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,a]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t],r=Array.isArray(i)?i.map(Nd):[Nd(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new to({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Nd(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(Nd(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class rj{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function BD(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function UD(n){return typeof Blob<"u"&&n instanceof Blob}function VD(n){return typeof FormData<"u"&&n instanceof FormData}class Vu{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function sj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new xs),this.context||(this.context=new rj),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new to,this.urlWithParams=t}serializeBody(){return null===this.body?null:BD(this.body)||UD(this.body)||VD(this.body)||function oj(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof to?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||VD(this.body)?null:UD(this.body)?this.body.type||null:BD(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof to?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,u=e.params||this.params;const c=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((h,d)=>h.set(d,e.setHeaders[d]),l)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,d)=>h.set(d,e.setParams[d]),u)),new Vu(t,i,s,{params:u,headers:l,context:c,reportProgress:a,responseType:r,withCredentials:o})}}var Un=(()=>((Un=Un||{})[Un.Sent=0]="Sent",Un[Un.UploadProgress=1]="UploadProgress",Un[Un.ResponseHeader=2]="ResponseHeader",Un[Un.DownloadProgress=3]="DownloadProgress",Un[Un.Response=4]="Response",Un[Un.User=5]="User",Un))();class ey{constructor(e,t=200,i="OK"){this.headers=e.headers||new xs,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ty extends ey{constructor(e={}){super(e),this.type=Un.ResponseHeader}clone(e={}){return new ty({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Fd extends ey{constructor(e={}){super(e),this.type=Un.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Fd({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class HD extends ey{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function ny(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let GD=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof Vu)s=t;else{let l,u;l=r.headers instanceof xs?r.headers:new xs(r.headers),r.params&&(u=r.params instanceof to?r.params:new to({fromObject:r.params})),s=new Vu(t,i,void 0!==r.body?r.body:null,{headers:l,context:r.context,params:u,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const o=Ie(s).pipe(Ts(l=>this.handler.handle(l)));if(t instanceof Vu||"events"===r.observe)return o;const a=o.pipe(wi(l=>l instanceof Fd));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe($(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe($(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe($(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe($(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new to).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,ny(r,i))}post(t,i,r={}){return this.request("POST",t,ny(r,i))}put(t,i,r={}){return this.request("PUT",t,ny(r,i))}}return n.\u0275fac=function(t){return new(t||n)(de(Od))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();function jD(n,e){return e(n)}function aj(n,e){return(t,i)=>e.intercept(t,{handle:r=>n(r,i)})}const uj=new Te("HTTP_INTERCEPTORS"),Hu=new Te("HTTP_INTERCEPTOR_FNS");function cj(){let n=null;return(e,t)=>(null===n&&(n=(It(uj,{optional:!0})??[]).reduceRight(aj,jD)),n(e,t))}let $D=(()=>{class n extends Od{constructor(t,i){super(),this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=Array.from(new Set(this.injector.get(Hu)));this.chain=i.reduceRight((r,s)=>function lj(n,e,t){return(i,r)=>t.runInContext(()=>e(i,s=>n(s,r)))}(r,s,this.injector),jD)}return this.chain(t,i=>this.backend.handle(i))}}return n.\u0275fac=function(t){return new(t||n)(de(J_),de(Br))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const pj=/^\)\]\}',?\n/;let zD=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new T(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((g,m)=>r.setRequestHeader(g,m.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const g=t.detectContentTypeHeader();null!==g&&r.setRequestHeader("Content-Type",g)}if(t.responseType){const g=t.responseType.toLowerCase();r.responseType="json"!==g?g:"text"}const s=t.serializeBody();let o=null;const a=()=>{if(null!==o)return o;const g=r.statusText||"OK",m=new xs(r.getAllResponseHeaders()),y=function gj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return o=new ty({headers:m,status:r.status,statusText:g,url:y}),o},l=()=>{let{headers:g,status:m,statusText:y,url:v}=a(),b=null;204!==m&&(b=typeof r.response>"u"?r.responseText:r.response),0===m&&(m=b?200:0);let A=m>=200&&m<300;if("json"===t.responseType&&"string"==typeof b){const w=b;b=b.replace(pj,"");try{b=""!==b?JSON.parse(b):null}catch(M){b=w,A&&(A=!1,b={error:M,text:b})}}A?(i.next(new Fd({body:b,headers:g,status:m,statusText:y,url:v||void 0})),i.complete()):i.error(new HD({error:b,headers:g,status:m,statusText:y,url:v||void 0}))},u=g=>{const{url:m}=a(),y=new HD({error:g,status:r.status||0,statusText:r.statusText||"Unknown Error",url:m||void 0});i.error(y)};let c=!1;const h=g=>{c||(i.next(a()),c=!0);let m={type:Un.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),"text"===t.responseType&&!!r.responseText&&(m.partialText=r.responseText),i.next(m)},d=g=>{let m={type:Un.UploadProgress,loaded:g.loaded};g.lengthComputable&&(m.total=g.total),i.next(m)};return r.addEventListener("load",l),r.addEventListener("error",u),r.addEventListener("timeout",u),r.addEventListener("abort",u),t.reportProgress&&(r.addEventListener("progress",h),null!==s&&r.upload&&r.upload.addEventListener("progress",d)),r.send(s),i.next({type:Un.Sent}),()=>{r.removeEventListener("error",u),r.removeEventListener("abort",u),r.removeEventListener("load",l),r.removeEventListener("timeout",u),t.reportProgress&&(r.removeEventListener("progress",h),null!==s&&r.upload&&r.upload.removeEventListener("progress",d)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(de(_T))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();const iy=new Te("XSRF_ENABLED"),XD="XSRF-TOKEN",qD=new Te("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>XD}),YD="X-XSRF-TOKEN",KD=new Te("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>YD});class ZD{}let mj=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=aT(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(de(Xn),de(ym),de(qD))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();function _j(n,e){const t=n.url.toLowerCase();if(!It(iy)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const i=It(ZD).getToken(),r=It(KD);return null!=i&&!n.headers.has(r)&&(n=n.clone({headers:n.headers.set(r,i)})),e(n)}var Rn=(()=>((Rn=Rn||{})[Rn.Interceptors=0]="Interceptors",Rn[Rn.LegacyInterceptors=1]="LegacyInterceptors",Rn[Rn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",Rn[Rn.NoXsrfProtection=3]="NoXsrfProtection",Rn[Rn.JsonpSupport=4]="JsonpSupport",Rn[Rn.RequestsMadeViaParent=5]="RequestsMadeViaParent",Rn))();function tl(n,e){return{\u0275kind:n,\u0275providers:e}}function yj(...n){const e=[GD,zD,$D,{provide:Od,useExisting:$D},{provide:J_,useExisting:zD},{provide:Hu,useValue:_j,multi:!0},{provide:iy,useValue:!0},{provide:ZD,useClass:mj}];for(const t of n)e.push(...t.\u0275providers);return function HO(n){return{\u0275providers:n}}(e)}const QD=new Te("LEGACY_INTERCEPTOR_FN");function bj({cookieName:n,headerName:e}){const t=[];return void 0!==n&&t.push({provide:qD,useValue:n}),void 0!==e&&t.push({provide:KD,useValue:e}),tl(Rn.CustomXsrfConfiguration,t)}let Ej=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({providers:[yj(tl(Rn.LegacyInterceptors,[{provide:QD,useFactory:cj},{provide:Hu,useExisting:QD,multi:!0}]),bj({cookieName:XD,headerName:YD}))]}),n})();class Tr extends R{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Ld=Wt(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ry(...n){const e=Ze(n),t=tt(n),{args:i,keys:r}=GT(n);if(0===i.length)return We([],e);const s=new T(function wj(n,e,t=Lt){return i=>{JD(e,()=>{const{length:r}=n,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)JD(e,()=>{const u=We(n[l],e);let c=!1;u.subscribe(U(i,h=>{s[l]=h,c||(c=!0,a--),a||i.next(t(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>jT(r,o):Lt));return t?s.pipe(r_(t)):s}function JD(n,e,t){n?S(t,n,e):e()}function Gu(...n){return function Cj(){return k(1)}()(We(n,Ze(n)))}function kd(n){return new T(e=>{Jn(n()).subscribe(e)})}function ju(n,e){const t=ge(n)?n:()=>n,i=r=>r.error(t());return new T(e?r=>e.schedule(i,0,r):i)}function sy(){return Z((n,e)=>{let t=null;n._refCount++;const i=U(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class eA extends T{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,z(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Me;const t=this.getSubject();e.add(this.source.subscribe(U(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Me.EMPTY)}return e}refCount(){return sy()(this)}}function or(n,e){return Z((t,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();t.subscribe(U(i,l=>{r?.unsubscribe();let u=0;const c=s++;Jn(n(l,c)).subscribe(r=U(i,h=>i.next(e?e(l,h,c,u++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Hi(n){return n<=0?()=>L:Z((e,t)=>{let i=0;e.subscribe(U(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function tA(...n){const e=Ze(n);return Z((t,i)=>{(e?Gu(n,t,e):Gu(n,t)).subscribe(i)})}function Bd(n){return Z((e,t)=>{let i=!1;e.subscribe(U(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function nA(n=Sj){return Z((e,t)=>{let i=!1;e.subscribe(U(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Sj(){return new Ld}function no(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wi((r,s)=>n(r,s,i)):Lt,Hi(1),t?Bd(e):nA(()=>new Ld))}function ai(n,e,t){const i=ge(n)||e||t?{next:n,error:e,complete:t}:n;return i?Z((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(U(s,l=>{var u;null===(u=i.next)||void 0===u||u.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var u;a=!1,null===(u=i.error)||void 0===u||u.call(i,l),s.error(l)},()=>{var l,u;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(u=i.finalize)||void 0===u||u.call(i)}))}):Lt}function io(n){return Z((e,t)=>{let s,i=null,r=!1;i=e.subscribe(U(t,void 0,void 0,o=>{s=Jn(n(o,io(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}function iA(n,e,t,i,r){return(s,o)=>{let a=t,l=e,u=0;s.subscribe(U(o,c=>{const h=u++;l=a?n(l,c,h):(a=!0,c),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function rA(n,e){return Z(iA(n,e,arguments.length>=2,!0))}function Ud(n){return n<=0?()=>L:Z((e,t)=>{let i=[];e.subscribe(U(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function sA(n,e){const t=arguments.length>=2;return i=>i.pipe(n?wi((r,s)=>n(r,s,i)):Lt,Ud(1),t?Bd(e):nA(()=>new Ld))}function oy(n){return Z((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const St="primary",$u=Symbol("RouteTitle");class Dj{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function nl(n){return new Dj(n)}function Aj(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function qr(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!oA(n[r],e[r]))return!1;return!0}function oA(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function aA(n){return Array.prototype.concat.apply([],n)}function lA(n){return n.length>0?n[n.length-1]:null}function Kn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ro(n){return jg(n)?n:uu(n)?We(Promise.resolve(n)):Ie(n)}const Vd=!1,Mj={exact:function hA(n,e,t){if(!Go(n.segments,e.segments)||!Hd(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!hA(n.children[i],e.children[i],t))return!1;return!0},subset:dA},uA={exact:function Rj(n,e){return qr(n,e)},subset:function Pj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>oA(n[t],e[t]))},ignored:()=>!0};function cA(n,e,t){return Mj[t.paths](n.root,e.root,t.matrixParams)&&uA[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function dA(n,e,t){return fA(n,e,e.segments,t)}function fA(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!Go(r,t)||e.hasChildren()||!Hd(r,t,i))}if(n.segments.length===t.length){if(!Go(n.segments,t)||!Hd(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!dA(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Go(n.segments,r)&&Hd(n.segments,r,i)&&n.children[St])&&fA(n.children[St],e,s,i)}}function Hd(n,e,t){return e.every((i,r)=>uA[t](n[r].parameters,i.parameters))}class Ho{constructor(e=new Mt([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return Fj.serialize(this)}}class Mt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Kn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gd(this)}}class Wu{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=nl(this.parameters)),this._parameterMap}toString(){return mA(this)}}function Go(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}let zu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return new ay},providedIn:"root"}),n})();class ay{parse(e){const t=new $j(e);return new Ho(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Xu(e.root,!0)}`,i=function Bj(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${jd(t)}=${jd(r)}`).join("&"):`${jd(t)}=${jd(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function Lj(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Fj=new ay;function Gd(n){return n.segments.map(e=>mA(e)).join("/")}function Xu(n,e){if(!n.hasChildren())return Gd(n);if(e){const t=n.children[St]?Xu(n.children[St],!1):"",i=[];return Kn(n.children,(r,s)=>{s!==St&&i.push(`${s}:${Xu(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function Nj(n,e){let t=[];return Kn(n.children,(i,r)=>{r===St&&(t=t.concat(e(i,r)))}),Kn(n.children,(i,r)=>{r!==St&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===St?[Xu(n.children[St],!1)]:[`${r}:${Xu(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[St]?`${Gd(n)}/${t[0]}`:`${Gd(n)}/(${t.join("//")})`}}function pA(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jd(n){return pA(n).replace(/%3B/gi,";")}function ly(n){return pA(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $d(n){return decodeURIComponent(n)}function gA(n){return $d(n.replace(/\+/g,"%20"))}function mA(n){return`${ly(n.path)}${function kj(n){return Object.keys(n).map(e=>`;${ly(e)}=${ly(n[e])}`).join("")}(n.parameters)}`}const Uj=/^[^\/()?;=#]+/;function Wd(n){const e=n.match(Uj);return e?e[0]:""}const Vj=/^[^=?&#]+/,Gj=/^[^&#]+/;class $j{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Mt([],{}):new Mt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[St]=new Mt(e,t)),i}parseSegment(){const e=Wd(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new j(4009,Vd);return this.capture(e),new Wu($d(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Wd(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=Wd(this.remaining);r&&(i=r,this.capture(i))}e[$d(t)]=$d(i)}parseQueryParam(e){const t=function Hj(n){const e=n.match(Vj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const o=function jj(n){const e=n.match(Gj);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=gA(t),s=gA(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Wd(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new j(4010,Vd);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=St);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[St]:new Mt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new j(4011,Vd)}}function uy(n){return n.segments.length>0?new Mt([],{[St]:n}):n}function zd(n){const e={};for(const i of Object.keys(n.children)){const s=zd(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Wj(n){if(1===n.numberOfChildren&&n.children[St]){const e=n.children[St];return new Mt(n.segments.concat(e.segments),e.children)}return n}(new Mt(n.segments,e))}function jo(n){return n instanceof Ho}function qj(n,e,t,i,r){if(0===t.length)return il(e.root,e.root,e.root,i,r);const s=function vA(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yA(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Kn(s.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new yA(t,e,i)}(t);return s.toRoot()?il(e.root,e.root,new Mt([],{}),i,r):function o(l){const u=function Kj(n,e,t,i){if(n.isAbsolute)return new rl(e.root,!0,0);if(-1===i)return new rl(t,t===e.root,0);return function bA(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new j(4005,!1);r=i.segments.length}return new rl(i,!1,r-s)}(t,i+(qu(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,l),c=u.processChildren?Ku(u.segmentGroup,u.index,s.commands):hy(u.segmentGroup,u.index,s.commands);return il(e.root,u.segmentGroup,c,i,r)}(n.snapshot?._lastPathIndex)}function qu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yu(n){return"object"==typeof n&&null!=n&&n.outlets}function il(n,e,t,i,r){let o,s={};i&&Kn(i,(l,u)=>{s[u]=Array.isArray(l)?l.map(c=>`${c}`):`${l}`}),o=n===e?t:_A(n,e,t);const a=uy(zd(o));return new Ho(a,s,r)}function _A(n,e,t){const i={};return Kn(n.children,(r,s)=>{i[s]=r===e?t:_A(r,e,t)}),new Mt(n.segments,i)}class yA{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&qu(i[0]))throw new j(4003,!1);const r=i.find(Yu);if(r&&r!==lA(i))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class rl{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function hy(n,e,t){if(n||(n=new Mt([],{})),0===n.segments.length&&n.hasChildren())return Ku(n,e,t);const i=function Qj(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const o=n.segments[r],a=t[i];if(Yu(a))break;const l=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!wA(l,u,o))return s;i+=2}else{if(!wA(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Mt(n.segments.slice(0,i.pathIndex),{});return s.children[St]=new Mt(n.segments.slice(i.pathIndex),n.children),Ku(s,0,r)}return i.match&&0===r.length?new Mt(n.segments,{}):i.match&&!n.hasChildren()?dy(n,e,t):i.match?Ku(n,0,r):dy(n,e,t)}function Ku(n,e,t){if(0===t.length)return new Mt(n.segments,{});{const i=function Zj(n){return Yu(n[0])?n[0].outlets:{[St]:n}}(t),r={};return Kn(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=hy(n.children[o],e,s))}),Kn(n.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new Mt(n.segments,r)}}function dy(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(Yu(s)){const l=Jj(s.outlets);return new Mt(i,l)}if(0===r&&qu(t[0])){i.push(new Wu(n.segments[e].path,EA(t[0]))),r++;continue}const o=Yu(s)?s.outlets[St]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&qu(a)?(i.push(new Wu(o,EA(a))),r+=2):(i.push(new Wu(o,{})),r++)}return new Mt(i,{})}function Jj(n){const e={};return Kn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=dy(new Mt([],{}),0,t))}),e}function EA(n){const e={};return Kn(n,(t,i)=>e[i]=`${t}`),e}function wA(n,e,t){return n==t.path&&qr(e,t.parameters)}class Ds{constructor(e,t){this.id=e,this.url=t}}class fy extends Ds{constructor(e,t,i="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class $o extends Ds{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xd extends Ds{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class CA extends Ds{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class e4 extends Ds{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class t4 extends Ds{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class n4 extends Ds{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class i4 extends Ds{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r4 extends Ds{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class s4{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class o4{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class a4{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class l4{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class u4{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class c4{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SA{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let d4=(()=>{class n{createUrlTree(t,i,r,s,o,a){return qj(t||i.root,r,s,o,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),f4=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(e){return d4.\u0275fac(e)},providedIn:"root"}),n})();class TA{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=py(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=py(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=gy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return gy(e,this._root).map(t=>t.value)}}function py(n,e){if(n===e.value)return e;for(const t of e.children){const i=py(n,t);if(i)return i}return null}function gy(n,e){if(n===e.value)return[e];for(const t of e.children){const i=gy(n,t);if(i.length)return i.unshift(e),i}return[]}class As{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function sl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class xA extends TA{constructor(e,t){super(e),this.snapshot=t,my(this,e)}toString(){return this.snapshot.toString()}}function DA(n,e){const t=function p4(n,e){const o=new qd([],{},{},"",{},St,e,null,n.root,-1,{});return new IA("",new As(o,[]))}(n,e),i=new Tr([new Wu("",{})]),r=new Tr({}),s=new Tr({}),o=new Tr({}),a=new Tr(""),l=new ol(i,r,o,a,s,St,e,t.root);return l.snapshot=t.root,new xA(new As(l,[]),t)}class ol{constructor(e,t,i,r,s,o,a,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe($(u=>u[$u]))??Ie(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe($(e=>nl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe($(e=>nl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function AA(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function g4(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(i))}class qd{constructor(e,t,i,r,s,o,a,l,u,c,h){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._resolve=h}get title(){return this.data?.[$u]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=nl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=nl(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class IA extends TA{constructor(e,t){super(t),this.url=e,my(this,t)}toString(){return MA(this._root)}}function my(n,e){e.value._routerState=n,e.children.forEach(t=>my(n,t))}function MA(n){const e=n.children.length>0?` { ${n.children.map(MA).join(", ")} } `:"";return`${n.value}${e}`}function _y(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qr(e.params,t.params)||n.params.next(t.params),function Ij(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yy(n,e){const t=qr(n.params,e.params)&&function Oj(n,e){return Go(n,e)&&n.every((t,i)=>qr(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yy(n.parent,e.parent))}function Zu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function _4(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Zu(n,i,r);return Zu(n,i)})}(n,e,t);return new As(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zu(n,a)),o}}const i=function y4(n){return new ol(new Tr(n.url),new Tr(n.params),new Tr(n.queryParams),new Tr(n.fragment),new Tr(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Zu(n,s));return new As(i,r)}}const vy="ngNavigationCancelingError";function RA(n,e){const{redirectTo:t,navigationBehaviorOptions:i}=jo(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=PA(!1,0,e);return r.url=t,r.navigationBehaviorOptions=i,r}function PA(n,e,t){const i=new Error("NavigationCancelingError: "+(n||""));return i[vy]=!0,i.cancellationCode=e,t&&(i.url=t),i}function OA(n){return NA(n)&&jo(n.url)}function NA(n){return n&&n[vy]}class v4{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Qu,this.attachRef=null}}let Qu=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,i){const r=this.getOrCreateContext(t);r.outlet=i,this.contexts.set(t,r)}onChildOutletDestroyed(t){const i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new v4,this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Yd=!1;let FA=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=St,this.activateEvents=new gt,this.deactivateEvents=new gt,this.attachEvents=new gt,this.detachEvents=new gt,this.parentContexts=It(Qu),this.location=It(tr),this.changeDetector=It(qs),this.environmentInjector=It(Br)}ngOnChanges(t){if(t.name){const{firstChange:i,previousValue:r}=t.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,Yd);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,Yd);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,Yd);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new j(4013,Yd);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new b4(t,a,r.injector);if(i&&function E4(n){return!!n.resolveComponentFactory}(i)){const u=i.resolveComponentFactory(o);this.activated=r.createComponent(u,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=Be({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Si]}),n})();class b4{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===ol?this.route:e===Qu?this.childContexts:this.parent.get(e,t)}}let by=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=os({type:n,selectors:[["ng-component"]],standalone:!0,features:[OC],decls:1,vars:0,template:function(t,i){1&t&&yn(0,"router-outlet")},dependencies:[FA],encapsulation:2}),n})();function LA(n,e){return n.providers&&!n._injector&&(n._injector=Lh(n.providers,e,`Route: ${n.path}`)),n._injector??e}function wy(n){const e=n.children&&n.children.map(wy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==St&&(t.component=by),t}function ar(n){return n.outlet||St}function kA(n,e){const t=n.filter(i=>ar(i)===e);return t.push(...n.filter(i=>ar(i)!==e)),t}function Ju(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class x4{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),_y(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=sl(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Kn(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=sl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=sl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=sl(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new c4(s.value.snapshot))}),e.children.length&&this.forwardEvent(new l4(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(_y(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),_y(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Ju(r.snapshot),l=a?.get(tu)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class BA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Kd{constructor(e,t){this.component=e,this.route=t}}function D4(n,e,t){const i=n._root;return ec(i,e?e._root:null,t,[i.value])}function al(n,e){const t=Symbol(),i=e.get(n,t);return i===t?"function"!=typeof n||function pR(n){return null!==Bc(n)}(n)?e.get(n):n:i}function ec(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=sl(e);return n.children.forEach(o=>{(function I4(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function M4(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Go(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Go(n.url,e.url)||!qr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yy(n,e)||!qr(n.queryParams,e.queryParams);default:return!yy(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new BA(i)):(s.data=o.data,s._resolvedData=o._resolvedData),ec(n,e,s.component?a?a.children:null:t,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Kd(a.outlet.component,o))}else o&&tc(e,a,r),r.canActivateChecks.push(new BA(i)),ec(n,null,s.component?a?a.children:null:t,i,r)})(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Kn(s,(o,a)=>tc(o,t.getContext(a),r)),r}function tc(n,e,t){const i=sl(n),r=n.value;Kn(i,(s,o)=>{tc(s,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new Kd(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function nc(n){return"function"==typeof n}function Cy(n){return n instanceof Ld||"EmptyError"===n?.name}const Zd=Symbol("INITIAL_VALUE");function ll(){return or(n=>ry(n.map(e=>e.pipe(Hi(1),tA(Zd)))).pipe($(e=>{for(const t of e)if(!0!==t){if(t===Zd)return Zd;if(!1===t||t instanceof Ho)return t}return!0}),wi(e=>e!==Zd),Hi(1)))}function UA(n){return function C(...n){return P(n)}(ai(e=>{if(jo(e))throw RA(0,e)}),$(e=>!0===e))}const Sy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function VA(n,e,t,i,r){const s=Ty(n,e,t);return s.matched?function X4(n,e,t,i){const r=e.canMatch;return r&&0!==r.length?Ie(r.map(o=>{const a=al(o,n);return ro(function L4(n){return n&&nc(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(ll(),UA()):Ie(!0)}(i=LA(e,i),e,t).pipe($(o=>!0===o?s:{...Sy})):Ie(s)}function Ty(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Sy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Aj)(t,n,e);if(!r)return{...Sy};const s={};Kn(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Qd(n,e,t,i){if(t.length>0&&function K4(n,e,t){return t.some(i=>Jd(n,e,i)&&ar(i)!==St)}(n,t,i)){const s=new Mt(e,function Y4(n,e,t,i){const r={};r[St]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&ar(s)!==St){const o=new Mt([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[ar(s)]=o}return r}(n,e,i,new Mt(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function Z4(n,e,t){return t.some(i=>Jd(n,e,i))}(n,t,i)){const s=new Mt(n.segments,function q4(n,e,t,i,r){const s={};for(const o of i)if(Jd(n,t,o)&&!r[ar(o)]){const a=new Mt([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,s[ar(o)]=a}return{...r,...s}}(n,e,t,i,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const r=new Mt(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Jd(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function HA(n,e,t,i){return!!(ar(n)===i||i!==St&&Jd(e,t,n))&&("**"===n.path||Ty(e,n,t).matched)}function GA(n,e,t){return 0===e.length&&!n.children[t]}const ef=!1;class tf{constructor(e){this.segmentGroup=e||null}}class jA{constructor(e){this.urlTree=e}}function ic(n){return ju(new tf(n))}function $A(n){return ju(new jA(n))}class t${constructor(e,t,i,r,s){this.injector=e,this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=Qd(this.urlTree.root,[],[],this.config).segmentGroup,t=new Mt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,St).pipe($(s=>this.createUrlTree(zd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(io(s=>{if(s instanceof jA)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof tf?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,St).pipe($(r=>this.createUrlTree(zd(r),e.queryParams,e.fragment))).pipe(io(r=>{throw r instanceof tf?this.noMatchError(r):r}))}noMatchError(e){return new j(4002,ef)}createUrlTree(e,t,i){const r=uy(e);return new Ho(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe($(s=>new Mt([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return We(r).pipe(Ts(s=>{const o=i.children[s],a=kA(t,s);return this.expandSegmentGroup(e,a,o,s).pipe($(l=>({segment:l,outlet:s})))}),rA((s,o)=>(s[o.outlet]=o.segment,s),{}),sA())}expandSegment(e,t,i,r,s,o){return We(i).pipe(Ts(a=>this.expandSegmentAgainstRoute(e,t,i,a,r,s,o).pipe(io(u=>{if(u instanceof tf)return Ie(null);throw u}))),no(a=>!!a),io((a,l)=>{if(Cy(a))return GA(t,r,s)?Ie(new Mt([],{})):ic(t);throw a}))}expandSegmentAgainstRoute(e,t,i,r,s,o,a){return HA(r,t,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o):ic(t):ic(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?$A(s):this.lineralizeSegments(i,s).pipe(I(o=>{const a=new Mt(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:c}=Ty(t,r,s);if(!a)return ic(t);const h=this.applyRedirectCommands(l,r.redirectTo,c);return r.redirectTo.startsWith("/")?$A(h):this.lineralizeSegments(r,h).pipe(I(d=>this.expandSegment(e,t,i,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){return"**"===i.path?(e=LA(i,e),i.loadChildren?(i._loadedRoutes?Ie({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe($(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new Mt(r,{})))):Ie(new Mt(r,{}))):VA(t,i,r,e).pipe(or(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(I(c=>{const h=c.injector??e,d=c.routes,{segmentGroup:g,slicedSegments:m}=Qd(t,a,l,d),y=new Mt(g.segments,g.children);if(0===m.length&&y.hasChildren())return this.expandChildren(h,d,y).pipe($(w=>new Mt(a,w)));if(0===d.length&&0===m.length)return Ie(new Mt(a,{}));const v=ar(i)===s;return this.expandSegment(h,y,d,m,v?St:s,!0).pipe($(A=>new Mt(a.concat(A.segments),A.children)))})):ic(t)))}getChildConfig(e,t,i){return t.children?Ie({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Ie({routes:t._loadedRoutes,injector:t._loadedInjector}):function z4(n,e,t,i){const r=e.canLoad;return void 0===r||0===r.length?Ie(!0):Ie(r.map(o=>{const a=al(o,n);return ro(function P4(n){return n&&nc(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(ll(),UA())}(e,t,i).pipe(I(r=>r?this.configLoader.loadChildren(e,t).pipe(ai(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function J4(n){return ju(PA(ef,3))}())):Ie({routes:[],injector:e})}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return Ie(i);if(r.numberOfChildren>1||!r.children[St])return ju(new j(4e3,ef));r=r.children[St]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreateUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Ho(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Kn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=t[a]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let o={};return Kn(t.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new Mt(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new j(4001,ef);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}class i${}class o${constructor(e,t,i,r,s,o,a){this.injector=e,this.rootComponentType=t,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Qd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,St).pipe($(t=>{if(null===t)return null;const i=new qd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},St,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new As(i,t),s=new IA(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,i=AA(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r)}processChildren(e,t,i){return We(Object.keys(i.children)).pipe(Ts(r=>{const s=i.children[r],o=kA(t,r);return this.processSegmentGroup(e,o,s,r)}),rA((r,s)=>r&&s?(r.push(...s),r):null),function Tj(n,e=!1){return Z((t,i)=>{let r=0;t.subscribe(U(i,s=>{const o=n(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),Bd(null),sA(),$(r=>{if(null===r)return null;const s=zA(r);return function a$(n){n.sort((e,t)=>e.value.outlet===St?-1:t.value.outlet===St?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,i,r,s){return We(t).pipe(Ts(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),no(o=>!!o),io(o=>{if(Cy(o))return GA(i,r,s)?Ie([]):Ie(null);throw o}))}processSegmentAgainstRoute(e,t,i,r,s){if(t.redirectTo||!HA(t,i,r,s))return Ie(null);let o;if("**"===t.path){const a=r.length>0?lA(r).parameters:{},l=qA(i)+r.length;o=Ie({snapshot:new qd(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YA(t),ar(t),t.component??t._loadedComponent??null,t,XA(i),l,KA(t)),consumedSegments:[],remainingSegments:[]})}else o=VA(i,t,r,e).pipe($(({matched:a,consumedSegments:l,remainingSegments:u,parameters:c})=>{if(!a)return null;const h=qA(i)+l.length;return{snapshot:new qd(l,c,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,YA(t),ar(t),t.component??t._loadedComponent??null,t,XA(i),h,KA(t)),consumedSegments:l,remainingSegments:u}}));return o.pipe(or(a=>{if(null===a)return Ie(null);const{snapshot:l,consumedSegments:u,remainingSegments:c}=a;e=t._injector??e;const h=t._loadedInjector??e,d=function l$(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:g,slicedSegments:m}=Qd(i,u,c,d.filter(v=>void 0===v.redirectTo));if(0===m.length&&g.hasChildren())return this.processChildren(h,d,g).pipe($(v=>null===v?null:[new As(l,v)]));if(0===d.length&&0===m.length)return Ie([new As(l,[])]);const y=ar(t)===s;return this.processSegment(h,d,g,m,y?St:s).pipe($(v=>null===v?null:[new As(l,v)]))}))}}function u$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function zA(n){const e=[],t=new Set;for(const i of n){if(!u$(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=zA(i.children);e.push(new As(i.value,r))}return e.filter(i=>!t.has(i))}function XA(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function qA(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function YA(n){return n.data||{}}function KA(n){return n.resolve||{}}function ZA(n){return"string"==typeof n.title||null===n.title}function xy(n){return or(e=>{const t=n(e);return t?We(t).pipe($(()=>e)):Ie(e)})}const ul=new Te("ROUTES");let Dy=(()=>{class n{constructor(t,i){this.injector=t,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Ie(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const i=ro(t.loadComponent()).pipe($(JA),ai(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),oy(()=>{this.componentLoaders.delete(t)})),r=new eA(i,()=>new R).pipe(sy());return this.componentLoaders.set(t,r),r}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Ie({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe($(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,u,c=!1;Array.isArray(a)?u=a:(l=a.create(t).injector,u=aA(l.get(ul,[],Xe.Self|Xe.Optional)));return{routes:u.map(wy),injector:l}}),oy(()=>{this.childrenLoaders.delete(i)})),o=new eA(s,()=>new R).pipe(sy());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(t){return ro(t()).pipe($(JA),I(r=>r instanceof RC||Array.isArray(r)?Ie(r):We(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(de(vr),de(ES))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JA(n){return function y$(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let Ay=(()=>{class n{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new R,this.configLoader=It(Dy),this.environmentInjector=It(Br),this.urlSerializer=It(zu),this.rootContexts=It(Qu),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new o4(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new s4(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(t){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:i})}setupNavigations(t){return this.transitions=new Tr({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(wi(i=>0!==i.id),$(i=>({...i,extractedUrl:t.urlHandlingStrategy.extract(i.rawUrl)})),or(i=>{let r=!1,s=!1;return Ie(i).pipe(ai(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),or(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||l)&&t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return tI(o.source)&&(t.browserUrlTree=o.extractedUrl),Ie(o).pipe(or(c=>{const h=this.transitions?.getValue();return this.events.next(new fy(c.id,this.urlSerializer.serialize(c.extractedUrl),c.source,c.restoredState)),h!==this.transitions?.getValue()?L:Promise.resolve(c)}),function n$(n,e,t,i){return or(r=>function e$(n,e,t,i,r){return new t$(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe($(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),ai(c=>{this.currentNavigation={...this.currentNavigation,finalUrl:c.urlAfterRedirects},i.urlAfterRedirects=c.urlAfterRedirects}),function h$(n,e,t,i,r){return I(s=>function s$(n,e,t,i,r,s,o="emptyOnly"){return new o$(n,e,t,i,r,o,s).recognize().pipe(or(a=>null===a?function r$(n){return new T(e=>e.error(n))}(new i$):Ie(a)))}(n,e,t,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe($(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,t.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),ai(c=>{if(i.targetSnapshot=c.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!c.extras.skipLocationChange){const d=t.urlHandlingStrategy.merge(c.urlAfterRedirects,c.rawUrl);t.setBrowserUrl(d,c)}t.browserUrlTree=c.urlAfterRedirects}const h=new e4(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}));if(l&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:h,extractedUrl:d,source:g,restoredState:m,extras:y}=o,v=new fy(h,this.urlSerializer.serialize(d),g,m);this.events.next(v);const b=DA(d,t.rootComponentType).snapshot;return Ie(i={...o,targetSnapshot:b,urlAfterRedirects:d,extras:{...y,skipLocationChange:!1,replaceUrl:!1}})}return t.rawUrlTree=o.rawUrl,o.resolve(null),L}),ai(o=>{const a=new t4(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),$(o=>i={...o,guards:D4(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function B4(n,e){return I(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?Ie({...t,guardsResult:!0}):function U4(n,e,t,i){return We(n).pipe(I(r=>function W4(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Ie(s.map(a=>{const l=Ju(e)??r,u=al(a,l);return ro(function F4(n){return n&&nc(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,i):l.runInContext(()=>u(n,e,t,i))).pipe(no())})).pipe(ll()):Ie(!0)}(r.component,r.route,t,e,i)),no(r=>!0!==r,!0))}(o,i,r,n).pipe(I(a=>a&&function R4(n){return"boolean"==typeof n}(a)?function V4(n,e,t,i){return We(e).pipe(Ts(r=>Gu(function G4(n,e){return null!==n&&e&&e(new a4(n)),Ie(!0)}(r.route.parent,i),function H4(n,e){return null!==n&&e&&e(new u4(n)),Ie(!0)}(r.route,i),function $4(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function A4(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>kd(()=>Ie(o.guards.map(l=>{const u=Ju(o.node)??t,c=al(l,u);return ro(function N4(n){return n&&nc(n.canActivateChild)}(c)?c.canActivateChild(i,n):u.runInContext(()=>c(i,n))).pipe(no())})).pipe(ll())));return Ie(s).pipe(ll())}(n,r.path,t),function j4(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return Ie(!0);const r=i.map(s=>kd(()=>{const o=Ju(e)??t,a=al(s,o);return ro(function O4(n){return n&&nc(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(no())}));return Ie(r).pipe(ll())}(n,r.route,t))),no(r=>!0!==r,!0))}(i,s,n,e):Ie(a)),$(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),ai(o=>{if(i.guardsResult=o.guardsResult,jo(o.guardsResult))throw RA(0,o.guardsResult);const a=new n4(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),wi(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3,t),!1)),xy(o=>{if(o.guards.canActivateChecks.length)return Ie(o).pipe(ai(a=>{const l=new i4(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),or(a=>{let l=!1;return Ie(a).pipe(function d$(n,e){return I(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Ie(t);let s=0;return We(r).pipe(Ts(o=>function f$(n,e,t,i){const r=n.routeConfig,s=n._resolve;return void 0!==r?.title&&!ZA(r)&&(s[$u]=r.title),function p$(n,e,t,i){const r=function g$(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Ie({});const s={};return We(r).pipe(I(o=>function m$(n,e,t,i){const r=Ju(e)??i,s=al(n,r);return ro(s.resolve?s.resolve(e,t):r.runInContext(()=>s(e,t)))}(n[o],e,t,i).pipe(no(),ai(a=>{s[o]=a}))),Ud(1),function xj(n){return $(()=>n)}(s),io(o=>Cy(o)?L:ju(o)))}(s,n,e,i).pipe($(o=>(n._resolvedData=o,n.data=AA(n,t).resolve,r&&ZA(r)&&(n.data[$u]=r.title),null)))}(o.route,i,n,e)),ai(()=>s++),Ud(1),I(o=>s===r.length?Ie(t):L))})}(t.paramsInheritanceStrategy,this.environmentInjector),ai({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2,t))}}))}),ai(a=>{const l=new r4(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),xy(o=>{const a=l=>{const u=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(l.routeConfig).pipe(ai(c=>{l.component=c}),$(()=>{})));for(const c of l.children)u.push(...a(c));return u};return ry(a(o.targetSnapshot.root)).pipe(Bd(),Hi(1))}),xy(()=>t.afterPreactivation()),$(o=>{const a=function m4(n,e,t){const i=Zu(n,e._root,t?t._root:void 0);return new xA(i,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),ai(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>$(i=>(new x4(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o)),ai({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new $o(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),oy(()=>{r||s||this.cancelNavigationTransition(i,"",1,t),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),io(o=>{if(s=!0,NA(o)){OA(o)||(t.navigated=!0,t.restoreHistory(i,!0));const a=new Xd(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),OA(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),u={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||tI(i.source)};t.scheduleNavigation(l,"imperative",null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{t.restoreHistory(i,!0);const a=new CA(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(t.errorHandler(o))}catch(l){i.reject(l)}}return L}))}))}cancelNavigationTransition(t,i,r,s){const o=new Xd(t.id,this.urlSerializer.serialize(t.extractedUrl),i,r);this.events.next(o),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function tI(n){return"imperative"!==n}let nI=(()=>{class n{buildTitle(t){let i,r=t.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===St);return i}getResolvedTitleForRoute(t){return t.data[$u]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return It(v$)},providedIn:"root"}),n})(),v$=(()=>{class n extends nI{constructor(t){super(),this.title=t}updateTitle(t){const i=this.buildTitle(t);void 0!==i&&this.title.setTitle(i)}}return n.\u0275fac=function(t){return new(t||n)(de(UT))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),b$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return It(w$)},providedIn:"root"}),n})();class E${shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let w$=(()=>{class n extends E${}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const nf=new Te("",{providedIn:"root",factory:()=>({})});let S$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:function(){return It(T$)},providedIn:"root"}),n})(),T$=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function x$(n){throw n}function D$(n,e,t){return e.parse("/")}const A$={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},I$={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Gi=(()=>{class n{constructor(){this.disposed=!1,this.currentPageId=0,this.console=It(RB),this.isNgZoneEnabled=!1,this.options=It(nf,{optional:!0})||{},this.errorHandler=this.options.errorHandler||x$,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||D$,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Ie(void 0),this.urlHandlingStrategy=It(S$),this.routeReuseStrategy=It(b$),this.urlCreationStrategy=It(f4),this.titleStrategy=It(nI),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=aA(It(ul,{optional:!0})??[]),this.navigationTransitions=It(Ay),this.urlSerializer=It(zu),this.location=It(Nm),this.rootComponentType=null,this.isNgZoneEnabled=It(an)instanceof an&&an.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Ho,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=DA(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(wy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,u=l?this.currentUrlTree.fragment:o;let c=null;switch(a){case"merge":c={...this.currentUrlTree.queryParams,...s};break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=s||null}return null!==c&&(c=this.removeEmptyProps(c)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,t,c,u??null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=jo(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function M$(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new j(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?{...A$}:!1===i?{...I$}:i,jo(t))return cA(this.currentUrlTree,t,r);const s=this.parseUrl(t);return cA(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(t,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u,c;return o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,d)=>{a=h,l=d}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),c=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):c=0,this.navigationTransitions.handleNavigationRequest({targetPageId:c,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rc=(()=>{class n{constructor(t,i,r,s,o,a){this.router=t,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new R;const l=o.nativeElement.tagName;this.isAnchorElement="A"===l||"AREA"===l,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof $o&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=Qa(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=Qa(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=Qa(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,i,r,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||i||r||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function nE(n,e,t){return function VO(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?tE:gh}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,i){const r=this.renderer,s=this.el.nativeElement;null!==i?r.setAttribute(s,t,i):r.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(B(Gi),B(ol),function rh(n){return function dP(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const i=t.length;let r=0;for(;r<i;){const s=t[r];if(Wb(s))break;if(0===s)r+=2;else if("number"==typeof s)for(r++;r<i&&"string"==typeof t[r];)r++;else{if(s===e)return t[r+1];r+=2}}}return null}(Yn(),n)}("tabindex"),B(Di),B(In),B(No))},n.\u0275dir=Be({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,i){1&t&&on("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&si("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Si]}),n})(),Iy=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.element=i,this.renderer=r,this.cdr=s,this.link=o,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new gt,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof $o&&this.update()})}ngAfterContentInit(){Ie(this.links.changes,Ie(null)).pipe(k()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=We(t).pipe(k()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const i=Array.isArray(t)?t:t.split(" ");this.classes=i.filter(r=>!!r)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(i=>{t?this.renderer.addClass(this.element.nativeElement,i):this.renderer.removeClass(this.element.nativeElement,i)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const i=function R$(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return r=>!!r.urlTree&&t.isActive(r.urlTree,i)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(B(Gi),B(In),B(Di),B(qs),B(rc,8))},n.\u0275dir=Be({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,i,r){if(1&t&&dm(r,rc,5),2&t){let s;_s(s=ys())&&(i.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Si]}),n})();class rI{}let P$=(()=>{class n{constructor(t,i,r,s,o){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(wi(t=>t instanceof $o),Ts(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=Lh(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return We(r).pipe(k())}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(t,i):Ie(null);const s=r.pipe(I(o=>null===o?Ie(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return i.loadComponent&&!i._loadedComponent?We([s,this.loader.loadComponent(i)]).pipe(k()):s})}}return n.\u0275fac=function(t){return new(t||n)(de(Gi),de(ES),de(Br),de(rI),de(Dy))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const My=new Te("");let sI=(()=>{class n{constructor(t,i,r,s,o={}){this.urlSerializer=t,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof fy?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof $o&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof SA&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new SA(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){!function PE(){throw new Error("invalid")}()},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();function hl(n,e){return{\u0275kind:n,\u0275providers:e}}function aI(){const n=It(vr);return e=>{const t=n.get(Eu);if(e!==t.components[0])return;const i=n.get(Gi),r=n.get(lI);1===n.get(Py)&&i.initialNavigation(),n.get(uI,null,Xe.Optional)?.setUpPreloading(),n.get(My,null,Xe.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const lI=new Te("",{factory:()=>new R}),Py=new Te("",{providedIn:"root",factory:()=>1});const uI=new Te("");function k$(n){return hl(0,[{provide:uI,useExisting:P$},{provide:rI,useExisting:n}])}const cI=new Te("ROUTER_FORROOT_GUARD"),B$=[Nm,{provide:zu,useClass:ay},Gi,Qu,{provide:ol,useFactory:function oI(n){return n.routerState.root},deps:[Gi]},Dy,[]];function U$(){return new AS("Router",Gi)}let dl=(()=>{class n{constructor(t){}static forRoot(t,i){return{ngModule:n,providers:[B$,[],{provide:ul,multi:!0,useValue:t},{provide:cI,useFactory:j$,deps:[[Gi,new $l,new Wl]]},{provide:nf,useValue:i||{}},i?.useHash?{provide:No,useClass:v2}:{provide:No,useClass:ZS},{provide:My,useFactory:()=>{const n=It(BU),e=It(an),t=It(nf),i=It(Ay),r=It(zu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new sI(r,i,n,e,t)}},i?.preloadingStrategy?k$(i.preloadingStrategy).\u0275providers:[],{provide:AS,multi:!0,useFactory:U$},i?.initialNavigation?$$(i):[],[{provide:hI,useFactory:aI},{provide:vS,multi:!0,useExisting:hI}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ul,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(de(cI,8))},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[by]}),n})();function j$(n){return"guarded"}function $$(n){return["disabled"===n.initialNavigation?hl(3,[{provide:Vh,multi:!0,useFactory:()=>{const e=It(Gi);return()=>{e.setUpLocationChangeListener()}}},{provide:Py,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hl(2,[{provide:Py,useValue:0},{provide:Vh,multi:!0,deps:[vr],useFactory:e=>{const t=e.get(_2,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Gi),o=e.get(lI);(function i(r){e.get(Gi).events.pipe(wi(o=>o instanceof $o||o instanceof Xd||o instanceof CA),$(o=>o instanceof $o||o instanceof Xd&&(0===o.code||1===o.code)&&null),wi(o=>null!==o),Hi(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?Ie(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const hI=new Te("");class fl{}fl.\u0275fac=function(e){return new(e||fl)},fl.\u0275mod=Nn({type:fl}),fl.\u0275inj=Dn({imports:[dl.forRoot([]),dl]});class Wo{constructor(){this._keydown=new R,this.keydown$=this._keydown.asObservable()}onMenuStateChange(e){this._keydown.next(e)}}Wo.\u0275fac=function(e){return new(e||Wo)},Wo.\u0275prov=we({token:Wo,factory:Wo.\u0275fac,providedIn:"root"});const dI={Copy:["ctrl+c"],Paste:["ctrl+v"],Group:["ctrl+g"],Select_All:["ctrl+a"]};var fI=Se(521);class oc{constructor(e,t,i,r,s,o){this.combo=e,this.callback=t,this.allowIn=i,this.description=r,this.action=s,this.persistent=o,this.combo=Array.isArray(e)?e:[e],this.allowIn=i||[],this.description=r||""}static symbolize(e){const t={command:"\u2318",shift:"\u21e7",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193",return:"\u23ce",backspace:"\u232b"},i=e.split("+");for(let r=0;r<i.length;r++)"mod"===i[r]&&(i[r]=window.navigator&&window.navigator.platform.indexOf("Mac")>=0?"command":"ctrl"),i[r]=t[i[r]]||i[r];return i.join(" + ")}get formatted(){if(!this.formattedHotkey){const e=this.combo;for(let t=0;t<e.length;t++)e[t]=oc.symbolize(e[t]);this.formattedHotkey=e}return this.formattedHotkey}}const pI=new Te("HotkeyOptions");let gI=(()=>{class n{constructor(t){this.options=t,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new R,this.preventIn=["INPUT","SELECT","TEXTAREA"],fI.prototype.stopCallback=(i,r,s,o)=>!((" "+r.className+" ").indexOf(" mousetrap ")>-1)&&r.contentEditable&&"true"===r.contentEditable,this.mousetrap=new fI,this.initCheatSheet()}initCheatSheet(){this.options.disableCheatSheet||this.add(new oc(this.options.cheatSheetHotkey||"?",function(t){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new oc("esc",function(t){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription||"Hide this help menu"))}add(t,i){if(Array.isArray(t)){const r=[];for(const s of t)r.push(this.add(s,i));return r}return this.remove(t),this.hotkeys.push(t),this.mousetrap.bind(t.combo,(r,s)=>{let o=!0;if(r){const a=r.target||r.srcElement,l=a.nodeName.toUpperCase();(" "+a.className+" ").indexOf(" mousetrap ")>-1?o=!0:this.preventIn.indexOf(l)>-1&&-1===t.allowIn.map(u=>u.toUpperCase()).indexOf(l)&&(o=!1)}if(o)return t.callback.apply(this,[r,s])},i),t}remove(t,i){const r=[];if(!t){for(const o of this.hotkeys)r.push(this.remove(o,i));return r}if(Array.isArray(t)){for(const o of t)r.push(this.remove(o));return r}const s=this.findHotkey(t);return s>-1?(this.hotkeys.splice(s,1),this.mousetrap.unbind(t.combo,i),t):null}get(t){if(!t)return this.hotkeys;if(Array.isArray(t)){const i=[];for(const r of t)i.push(this.get(r));return i}for(const i of this.hotkeys)if(i.combo.indexOf(t)>-1)return i;return null}pause(t){if(!t)return this.pause(this.hotkeys);if(Array.isArray(t)){const i=[];for(const r of t)i.push(this.pause(r));return i}return this.remove(t),this.pausedHotkeys.push(t),t}unpause(t){if(!t)return this.unpause(this.pausedHotkeys);if(Array.isArray(t)){const r=[];for(const s of t)r.push(this.unpause(s));return r}const i=this.pausedHotkeys.indexOf(t);return i>-1?(this.add(t),this.pausedHotkeys.splice(i,1)):null}reset(){this.mousetrap.reset(),this.hotkeys=[],this.pausedHotkeys=[],this.initCheatSheet()}findHotkey(t){return this.hotkeys.indexOf(t)}}return n.\u0275fac=function(t){return new(t||n)(de(pI))},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),q$=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[gI,{provide:pI,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[[Fo]]}),n})();function zo(n){return!!n&&(n instanceof T||ge(n.lift)&&ge(n.subscribe))}const mI={now:()=>(mI.delegate||Date).now(),delegate:void 0};class _I extends R{constructor(e=1/0,t=1/0,i=mI){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;t||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=t.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}function yI(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=n??1/0,jt({connector:()=>new _I(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}class ac{}let vI=(()=>{class n extends ac{getTranslation(t){return Ie({})}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class Oy{}let bI=(()=>{class n{handle(t){return t.key}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();function rf(n,e){if(n===e)return!0;if(null===n||null===e)return!1;if(n!=n&&e!=e)return!0;let r,s,o,t=typeof n;if(t==typeof e&&"object"==t){if(!Array.isArray(n)){if(Array.isArray(e))return!1;for(s in o=Object.create(null),n){if(!rf(n[s],e[s]))return!1;o[s]=!0}for(s in e)if(!(s in o)&&typeof e[s]<"u")return!1;return!0}if(!Array.isArray(e))return!1;if((r=n.length)==e.length){for(s=0;s<r;s++)if(!rf(n[s],e[s]))return!1;return!0}}return!1}function so(n){return typeof n<"u"&&null!==n}function Ny(n){return n&&"object"==typeof n&&!Array.isArray(n)}function EI(n,e){let t=Object.assign({},n);return Ny(n)&&Ny(e)&&Object.keys(e).forEach(i=>{Ny(e[i])?i in n?t[i]=EI(n[i],e[i]):Object.assign(t,{[i]:e[i]}):Object.assign(t,{[i]:e[i]})}),t}class sf{}let wI=(()=>{class n extends sf{constructor(){super(...arguments),this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}interpolate(t,i){let r;return r="string"==typeof t?this.interpolateString(t,i):"function"==typeof t?this.interpolateFunction(t,i):t,r}getValue(t,i){let r="string"==typeof i?i.split("."):[i];i="";do{i+=r.shift(),!so(t)||!so(t[i])||"object"!=typeof t[i]&&r.length?r.length?i+=".":t=void 0:(t=t[i],i="")}while(r.length);return t}interpolateFunction(t,i){return t(i)}interpolateString(t,i){return i?t.replace(this.templateMatcher,(r,s)=>{let o=this.getValue(i,s);return so(o)?o:r}):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class af{}let CI=(()=>{class n extends af{compile(t,i){return t}compileTranslations(t,i){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=Fn(n)))(i||n)}}(),n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})();class SI{constructor(){this.currentLang=this.defaultLang,this.translations={},this.langs=[],this.onTranslationChange=new gt,this.onLangChange=new gt,this.onDefaultLangChange=new gt}}const Fy=new Te("USE_STORE"),Ly=new Te("USE_DEFAULT_LANG"),ky=new Te("DEFAULT_LANGUAGE"),By=new Te("USE_EXTEND");let lc=(()=>{class n{constructor(t,i,r,s,o,a=!0,l=!1,u=!1,c){this.store=t,this.currentLoader=i,this.compiler=r,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.isolate=l,this.extend=u,this.pending=!1,this._onTranslationChange=new gt,this._onLangChange=new gt,this._onDefaultLangChange=new gt,this._langs=[],this._translations={},this._translationRequests={},c&&this.setDefaultLang(c)}get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(t){this.isolate?this._defaultLang=t:this.store.defaultLang=t}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(t){this.isolate?this._currentLang=t:this.store.currentLang=t}get langs(){return this.isolate?this._langs:this.store.langs}set langs(t){this.isolate?this._langs=t:this.store.langs=t}get translations(){return this.isolate?this._translations:this.store.translations}set translations(t){this.isolate?this._translations=t:this.store.translations=t}setDefaultLang(t){if(t===this.defaultLang)return;let i=this.retrieveTranslations(t);typeof i<"u"?(null==this.defaultLang&&(this.defaultLang=t),i.pipe(Hi(1)).subscribe(r=>{this.changeDefaultLang(t)})):this.changeDefaultLang(t)}getDefaultLang(){return this.defaultLang}use(t){if(t===this.currentLang)return Ie(this.translations[t]);let i=this.retrieveTranslations(t);return typeof i<"u"?(this.currentLang||(this.currentLang=t),i.pipe(Hi(1)).subscribe(r=>{this.changeLang(t)}),i):(this.changeLang(t),Ie(this.translations[t]))}retrieveTranslations(t){let i;return(typeof this.translations[t]>"u"||this.extend)&&(this._translationRequests[t]=this._translationRequests[t]||this.getTranslation(t),i=this._translationRequests[t]),i}getTranslation(t){this.pending=!0;const i=this.currentLoader.getTranslation(t).pipe(yI(1),Hi(1));return this.loadingTranslations=i.pipe($(r=>this.compiler.compileTranslations(r,t)),yI(1),Hi(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[t]=this.extend&&this.translations[t]?{...r,...this.translations[t]}:r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),i}setTranslation(t,i,r=!1){i=this.compiler.compileTranslations(i,t),this.translations[t]=(r||this.extend)&&this.translations[t]?EI(this.translations[t],i):i,this.updateLangs(),this.onTranslationChange.emit({lang:t,translations:this.translations[t]})}getLangs(){return this.langs}addLangs(t){t.forEach(i=>{-1===this.langs.indexOf(i)&&this.langs.push(i)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(t,i,r){let s;if(i instanceof Array){let o={},a=!1;for(let l of i)o[l]=this.getParsedResult(t,l,r),zo(o[l])&&(a=!0);return a?function $T(...n){const e=tt(n),{args:t,keys:i}=GT(n),r=new T(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,u=o;for(let c=0;c<o;c++){let h=!1;Jn(t[c]).subscribe(U(s,d=>{h||(h=!0,u--),a[c]=d},()=>l--,void 0,()=>{(!l||!h)&&(u||s.next(i?jT(i,a):a),s.complete())}))}});return e?r.pipe(r_(e)):r}(i.map(u=>zo(o[u])?o[u]:Ie(o[u]))).pipe($(u=>{let c={};return u.forEach((h,d)=>{c[i[d]]=h}),c})):o}if(t&&(s=this.parser.interpolate(this.parser.getValue(t,i),r)),typeof s>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],i),r)),typeof s>"u"){let o={key:i,translateService:this};typeof r<"u"&&(o.interpolateParams=r),s=this.missingTranslationHandler.handle(o)}return typeof s<"u"?s:i}get(t,i){if(!so(t)||!t.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe(Ts(r=>zo(r=this.getParsedResult(r,t,i))?r:Ie(r)));{let r=this.getParsedResult(this.translations[this.currentLang],t,i);return zo(r)?r:Ie(r)}}getStreamOnTranslationChange(t,i){if(!so(t)||!t.length)throw new Error('Parameter "key" required');return Gu(kd(()=>this.get(t,i)),this.onTranslationChange.pipe(or(r=>{const s=this.getParsedResult(r.translations,t,i);return"function"==typeof s.subscribe?s:Ie(s)})))}stream(t,i){if(!so(t)||!t.length)throw new Error('Parameter "key" required');return Gu(kd(()=>this.get(t,i)),this.onLangChange.pipe(or(r=>{const s=this.getParsedResult(r.translations,t,i);return zo(s)?s:Ie(s)})))}instant(t,i){if(!so(t)||!t.length)throw new Error('Parameter "key" required');let r=this.getParsedResult(this.translations[this.currentLang],t,i);if(zo(r)){if(t instanceof Array){let s={};return t.forEach((o,a)=>{s[t[a]]=t[a]}),s}return t}return r}set(t,i,r=this.currentLang){this.translations[r][t]=this.compiler.compile(i,r),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeLang(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]}),null==this.defaultLang&&this.changeDefaultLang(t)}changeDefaultLang(t){this.defaultLang=t,this.onDefaultLangChange.emit({lang:t,translations:this.translations[t]})}reloadLang(t){return this.resetLang(t),this.getTranslation(t)}resetLang(t){this._translationRequests[t]=void 0,this.translations[t]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof t>"u"?void 0:(-1!==t.indexOf("-")&&(t=t.split("-")[0]),-1!==t.indexOf("_")&&(t=t.split("_")[0]),t)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let t=window.navigator.languages?window.navigator.languages[0]:null;return t=t||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,t}}return n.\u0275fac=function(t){return new(t||n)(de(SI),de(ac),de(af),de(sf),de(Oy),de(Ly),de(Fy),de(By),de(ky))},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),Y$=(()=>{class n{constructor(t,i){this.translate=t,this._ref=i,this.value="",this.lastKey=null,this.lastParams=[]}updateValue(t,i,r){let s=o=>{this.value=void 0!==o?o:t,this.lastKey=t,this._ref.markForCheck()};if(r){let o=this.translate.getParsedResult(r,t,i);zo(o.subscribe)?o.subscribe(s):s(o)}this.translate.get(t,i).subscribe(s)}transform(t,...i){if(!t||!t.length)return t;if(rf(t,this.lastKey)&&rf(i,this.lastParams))return this.value;let r;if(so(i[0])&&i.length)if("string"==typeof i[0]&&i[0].length){let s=i[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{r=JSON.parse(s)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${i[0]}`)}}else"object"==typeof i[0]&&!Array.isArray(i[0])&&(r=i[0]);return this.lastKey=t,this.lastParams=i,this.updateValue(t,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(t,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}}return n.\u0275fac=function(t){return new(t||n)(B(lc,16),B(qs,16))},n.\u0275pipe=fi({name:"translate",type:n,pure:!1}),n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),K$=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[t.loader||{provide:ac,useClass:vI},t.compiler||{provide:af,useClass:CI},t.parser||{provide:sf,useClass:wI},t.missingTranslationHandler||{provide:Oy,useClass:bI},SI,{provide:Fy,useValue:t.isolate},{provide:Ly,useValue:t.useDefaultLang},{provide:By,useValue:t.extend},{provide:ky,useValue:t.defaultLanguage},lc]}}static forChild(t={}){return{ngModule:n,providers:[t.loader||{provide:ac,useClass:vI},t.compiler||{provide:af,useClass:CI},t.parser||{provide:sf,useClass:wI},t.missingTranslationHandler||{provide:Oy,useClass:bI},{provide:Fy,useValue:t.isolate},{provide:Ly,useValue:t.useDefaultLang},{provide:By,useValue:t.extend},{provide:ky,useValue:t.defaultLanguage},lc]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({}),n})();var Is=function Z$(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0;return{get:r,set:(s,o,a)=>{o&&(o.style.zIndex=String(((s,o)=>{let a=n.length>0?n[n.length-1]:{key:s,value:o},l=a.value+(a.key===s?0:o)+1;return n.push({key:s,value:l}),l})(s,a)))},clear:s=>{s&&((s=>{n=n.filter(o=>o.value!==s)})(r(s)),s.style.zIndex="")},getCurrent:()=>n.length>0?n[n.length-1].value:0}}();let DI=(()=>{class n{constructor(){this.activeItemKeyChange=new R,this.activeItemKeyChange$=this.activeItemKeyChange.asObservable()}changeKey(t){this.activeItemKey=t,this.activeItemKeyChange.next(this.activeItemKey)}reset(){this.activeItemKey=null,this.activeItemKeyChange.next(this.activeItemKey)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac}),n})(),li=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),lf=(()=>{class n{constructor(){this.ripple=!1,this.overlayOptions={},this.filterMatchModeOptions={text:[li.STARTS_WITH,li.CONTAINS,li.NOT_CONTAINS,li.ENDS_WITH,li.EQUALS,li.NOT_EQUALS],numeric:[li.EQUALS,li.NOT_EQUALS,li.LESS_THAN,li.LESS_THAN_OR_EQUAL_TO,li.GREATER_THAN,li.GREATER_THAN_OR_EQUAL_TO],date:[li.DATE_IS,li.DATE_IS_NOT,li.DATE_BEFORE,li.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new R,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation={...this.translation,...t},this.translationSource.next(this.translation)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q$=(()=>{class n{constructor(t){this.template=t}getType(){return this.name}}return n.\u0275fac=function(t){return new(t||n)(B($r))},n.\u0275dir=Be({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),AI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Fo]}),n})(),pe=(()=>{class n{static addClass(t,i){t&&i&&(t.classList?t.classList.add(i):t.className+=" "+i)}static addMultipleClasses(t,i){if(t&&i)if(t.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)t.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)t.className+=" "+r[s]}}static removeClass(t,i){t&&i&&(t.classList?t.classList.remove(i):t.className=t.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," "))}static hasClass(t,i){return!(!t||!i)&&(t.classList?t.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(t.className))}static siblings(t){return Array.prototype.filter.call(t.parentNode.children,function(i){return i!==t})}static find(t,i){return Array.from(t.querySelectorAll(i))}static findSingle(t,i){return t?t.querySelector(i):null}static index(t){let i=t.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==t)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(t,i){let r=t.parentNode?t.parentNode.childNodes:[],s=0;for(var o=0;o<r.length;o++){if(r[o]==t)return s;r[o].attributes&&r[o].attributes[i]&&1==r[o].nodeType&&s++}return-1}static appendOverlay(t,i,r="self"){"self"!==r&&t&&i&&this.appendChild(t,i)}static alignOverlay(t,i,r="self",s=!0){t&&i&&(s&&(t.style.minWidth||(t.style.minWidth=n.getOuterWidth(i)+"px")),"self"===r?this.relativePosition(t,i):this.absolutePosition(t,i))}static relativePosition(t,i){const r=y=>{if(y)return"relative"===getComputedStyle(y).getPropertyValue("position")?y:r(y.parentElement)},s=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),o=i.offsetHeight,a=i.getBoundingClientRect(),l=this.getWindowScrollTop(),u=this.getWindowScrollLeft(),c=this.getViewport(),d=r(t)?.getBoundingClientRect()||{top:-1*l,left:-1*u};let g,m;a.top+o+s.height>c.height?(g=a.top-d.top-s.height,t.style.transformOrigin="bottom",a.top+g<0&&(g=-1*a.top)):(g=o+a.top-d.top,t.style.transformOrigin="top"),m=s.width>c.width?-1*(a.left-d.left):a.left-d.left+s.width>c.width?-1*(a.left-d.left+s.width-c.width):a.left-d.left,t.style.top=g+"px",t.style.left=m+"px"}static absolutePosition(t,i){const r=t.offsetParent?{width:t.offsetWidth,height:t.offsetHeight}:this.getHiddenElementDimensions(t),s=r.height,o=r.width,a=i.offsetHeight,l=i.offsetWidth,u=i.getBoundingClientRect(),c=this.getWindowScrollTop(),h=this.getWindowScrollLeft(),d=this.getViewport();let g,m;u.top+a+s>d.height?(g=u.top+c-s,t.style.transformOrigin="bottom",g<0&&(g=c)):(g=a+u.top+c,t.style.transformOrigin="top"),m=u.left+o>d.width?Math.max(0,u.left+h+l-o):u.left+h,t.style.top=g+"px",t.style.left=m+"px"}static getParents(t,i=[]){return null===t.parentNode?i:this.getParents(t.parentNode,i.concat([t.parentNode]))}static getScrollableParents(t){let i=[];if(t){let r=this.getParents(t);const s=/(auto|scroll)/,o=a=>{let l=window.getComputedStyle(a,null);return s.test(l.getPropertyValue("overflow"))||s.test(l.getPropertyValue("overflowX"))||s.test(l.getPropertyValue("overflowY"))};for(let a of r){let l=1===a.nodeType&&a.dataset.scrollselectors;if(l){let u=l.split(",");for(let c of u){let h=this.findSingle(a,c);h&&o(h)&&i.push(h)}}9!==a.nodeType&&o(a)&&i.push(a)}}return i}static getHiddenElementOuterHeight(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetHeight;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementOuterWidth(t){t.style.visibility="hidden",t.style.display="block";let i=t.offsetWidth;return t.style.display="none",t.style.visibility="visible",i}static getHiddenElementDimensions(t){let i={};return t.style.visibility="hidden",t.style.display="block",i.width=t.offsetWidth,i.height=t.offsetHeight,t.style.display="none",t.style.visibility="visible",i}static scrollInView(t,i){let r=getComputedStyle(t).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,o=getComputedStyle(t).getPropertyValue("paddingTop"),a=o?parseFloat(o):0,l=t.getBoundingClientRect(),c=i.getBoundingClientRect().top+document.body.scrollTop-(l.top+document.body.scrollTop)-s-a,h=t.scrollTop,d=t.clientHeight,g=this.getOuterHeight(i);c<0?t.scrollTop=h+c:c+g>d&&(t.scrollTop=h+c-d+g)}static fadeIn(t,i){t.style.opacity=0;let r=+new Date,s=0,o=function(){s=+t.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,t.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(o)||setTimeout(o,16))};o()}static fadeOut(t,i){var r=1,a=50/i;let l=setInterval(()=>{(r-=a)<=0&&(r=0,clearInterval(l)),t.style.opacity=r},50)}static getWindowScrollTop(){let t=document.documentElement;return(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}static getWindowScrollLeft(){let t=document.documentElement;return(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}static matches(t,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(o){return-1!==[].indexOf.call(document.querySelectorAll(o),this)}).call(t,i)}static getOuterWidth(t,i){let r=t.offsetWidth;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(t){let i=getComputedStyle(t);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(t){let i=getComputedStyle(t);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(t,i){let r=t.offsetHeight;if(i){let s=getComputedStyle(t);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(t){let i=t.offsetHeight,r=getComputedStyle(t);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(t){let i=t.offsetWidth,r=getComputedStyle(t);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let t=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:t.innerWidth||r.clientWidth||s.clientWidth,height:t.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(t){var i=t.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(t,i){let r=t.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,t)}static getUserAgent(){return navigator.userAgent}static isIE(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||(t.indexOf("Trident/")>0?(t.indexOf("rv:"),!0):t.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(t,i){if(this.isElement(i))i.appendChild(t);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+t;i.el.nativeElement.appendChild(t)}}static removeChild(t,i){if(this.isElement(i))i.removeChild(t);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+t+" from "+i;i.el.nativeElement.removeChild(t)}}static removeElement(t){"remove"in Element.prototype?t.remove():t.parentNode.removeChild(t)}static isElement(t){return"object"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof t&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}static calculateScrollbarWidth(t){if(t){let i=getComputedStyle(t);return t.offsetWidth-t.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let t=document.createElement("div");t.className="p-scrollbar-measure",document.body.appendChild(t);let i=t.offsetHeight-t.clientHeight;return document.body.removeChild(t),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(t,i,r){t[i].apply(t,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch{}}static getBrowser(){if(!this.browser){let t=this.resolveUserAgent();this.browser={},t.browser&&(this.browser[t.browser]=!0,this.browser.version=t.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let t=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(t){return Number.isInteger?Number.isInteger(t):"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}static isHidden(t){return!t||null===t.offsetParent}static isVisible(t){return t&&null!=t.offsetParent}static isExist(t){return null!==t&&typeof t<"u"&&t.nodeName&&t.parentNode}static focus(t,i){t&&document.activeElement!==t&&t.focus(i)}static getFocusableElements(t){let i=n.find(t,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static getNextFocusableElement(t,i=!1){const r=n.getFocusableElements(t);let s=0;if(r&&r.length>0){const o=r.indexOf(r[0].ownerDocument.activeElement);i?s=-1==o||0===o?r.length-1:o-1:-1!=o&&o!==r.length-1&&(s=o+1)}return r[s]}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}static getSelection(){return window.getSelection?window.getSelection().toString():document.getSelection?document.getSelection().toString():document.selection?document.selection.createRange().text:null}static getTargetElement(t,i){if(!t)return null;switch(t){case"document":return document;case"window":return window;case"@next":return i?.nextElementSibling;case"@prev":return i?.previousElementSibling;case"@parent":return i?.parentElement;case"@grandparent":return i?.parentElement.parentElement;default:const r=typeof t;if("string"===r)return document.querySelector(t);if("object"===r&&t.hasOwnProperty("nativeElement"))return this.isExist(t.nativeElement)?t.nativeElement:void 0;const o=(a=t)&&a.constructor&&a.call&&a.apply?t():t;return o&&9===o.nodeType||this.isExist(o)?o:null}var a}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})();class J${constructor(e,t=(()=>{})){this.element=e,this.listener=t}bindScrollListener(){this.scrollableParents=pe.getScrollableParents(this.element);for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].addEventListener("scroll",this.listener)}unbindScrollListener(){if(this.scrollableParents)for(let e=0;e<this.scrollableParents.length;e++)this.scrollableParents[e].removeEventListener("scroll",this.listener)}destroy(){this.unbindScrollListener(),this.element=null,this.listener=null,this.scrollableParents=null}}let II=(()=>{class n{constructor(t,i,r){this.el=t,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(t){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(pe.removeClass(i,"p-ink-active"),!pe.getHeight(i)&&!pe.getWidth(i)){let a=Math.max(pe.getOuterWidth(this.el.nativeElement),pe.getOuterHeight(this.el.nativeElement));i.style.height=a+"px",i.style.width=a+"px"}let r=pe.getOffset(this.el.nativeElement),s=t.pageX-r.left+document.body.scrollTop-pe.getWidth(i)/2,o=t.pageY-r.top+document.body.scrollLeft-pe.getHeight(i)/2;i.style.top=o+"px",i.style.left=s+"px",pe.addClass(i,"p-ink-active"),this.timeout=setTimeout(()=>{let a=this.getInk();a&&pe.removeClass(a,"p-ink-active")},401)}getInk(){const t=this.el.nativeElement.children;for(let i=0;i<t.length;i++)if("string"==typeof t[i].className&&-1!==t[i].className.indexOf("p-ink"))return t[i];return null}resetInk(){let t=this.getInk();t&&pe.removeClass(t,"p-ink-active")}onAnimationEnd(t){this.timeout&&clearTimeout(this.timeout),pe.removeClass(t.currentTarget,"p-ink-active")}create(){let t=document.createElement("span");t.className="p-ink",this.el.nativeElement.appendChild(t),this.animationListener=this.onAnimationEnd.bind(this),t.addEventListener("animationend",this.animationListener)}remove(){let t=this.getInk();t&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),t.removeEventListener("animationend",this.animationListener),pe.removeElement(t))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(an),B(lf,8))},n.\u0275dir=Be({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),MI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Fo]}),n})(),RI=(()=>{class n{constructor(t,i,r){this.el=t,this.zone=i,this.config=r,this.escape=!0,this.fitContent=!0,this._tooltipOptions={tooltipPosition:"right",tooltipEvent:"hover",appendTo:"body",tooltipZIndex:"auto",escape:!0,positionTop:0,positionLeft:0}}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this.deactivate()}ngAfterViewInit(){this.zone.runOutsideAngular(()=>{if("hover"===this.getOption("tooltipEvent"))this.mouseEnterListener=this.onMouseEnter.bind(this),this.mouseLeaveListener=this.onMouseLeave.bind(this),this.clickListener=this.onClick.bind(this),this.el.nativeElement.addEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.addEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.addEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){this.focusListener=this.onFocus.bind(this),this.blurListener=this.onBlur.bind(this);let t=this.getTarget(this.el.nativeElement);t.addEventListener("focus",this.focusListener),t.addEventListener("blur",this.blurListener)}})}ngOnChanges(t){t.tooltipPosition&&this.setOption({tooltipPosition:t.tooltipPosition.currentValue}),t.tooltipEvent&&this.setOption({tooltipEvent:t.tooltipEvent.currentValue}),t.appendTo&&this.setOption({appendTo:t.appendTo.currentValue}),t.positionStyle&&this.setOption({positionStyle:t.positionStyle.currentValue}),t.tooltipStyleClass&&this.setOption({tooltipStyleClass:t.tooltipStyleClass.currentValue}),t.tooltipZIndex&&this.setOption({tooltipZIndex:t.tooltipZIndex.currentValue}),t.escape&&this.setOption({escape:t.escape.currentValue}),t.showDelay&&this.setOption({showDelay:t.showDelay.currentValue}),t.hideDelay&&this.setOption({hideDelay:t.hideDelay.currentValue}),t.life&&this.setOption({life:t.life.currentValue}),t.positionTop&&this.setOption({positionTop:t.positionTop.currentValue}),t.positionLeft&&this.setOption({positionLeft:t.positionLeft.currentValue}),t.disabled&&this.setOption({disabled:t.disabled.currentValue}),t.text&&(this.setOption({tooltipLabel:t.text.currentValue}),this.active&&(t.text.currentValue?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide())),t.tooltipOptions&&(this._tooltipOptions={...this._tooltipOptions,...t.tooltipOptions.currentValue},this.deactivate(),this.active&&(this.getOption("tooltipLabel")?this.container&&this.container.offsetParent?(this.updateText(),this.align()):this.show():this.hide()))}onMouseEnter(t){!this.container&&!this.showTimeout&&this.activate()}onMouseLeave(t){this.deactivate()}onFocus(t){this.activate()}onBlur(t){this.deactivate()}onClick(t){this.deactivate()}activate(){if(this.active=!0,this.clearHideTimeout(),this.getOption("showDelay")?this.showTimeout=setTimeout(()=>{this.show()},this.getOption("showDelay")):this.show(),this.getOption("life")){let t=this.getOption("showDelay")?this.getOption("life")+this.getOption("showDelay"):this.getOption("life");this.hideTimeout=setTimeout(()=>{this.hide()},t)}}deactivate(){this.active=!1,this.clearShowTimeout(),this.getOption("hideDelay")?(this.clearHideTimeout(),this.hideTimeout=setTimeout(()=>{this.hide()},this.getOption("hideDelay"))):this.hide()}create(){this.container&&(this.clearHideTimeout(),this.remove()),this.container=document.createElement("div");let t=document.createElement("div");t.className="p-tooltip-arrow",this.container.appendChild(t),this.tooltipText=document.createElement("div"),this.tooltipText.className="p-tooltip-text",this.updateText(),this.getOption("positionStyle")&&(this.container.style.position=this.getOption("positionStyle")),this.container.appendChild(this.tooltipText),"body"===this.getOption("appendTo")?document.body.appendChild(this.container):"target"===this.getOption("appendTo")?pe.appendChild(this.container,this.el.nativeElement):pe.appendChild(this.container,this.getOption("appendTo")),this.container.style.display="inline-block",this.fitContent&&(this.container.style.width="fit-content")}show(){!this.getOption("tooltipLabel")||this.getOption("disabled")||(this.create(),this.align(),pe.fadeIn(this.container,250),"auto"===this.getOption("tooltipZIndex")?Is.set("tooltip",this.container,this.config.zIndex.tooltip):this.container.style.zIndex=this.getOption("tooltipZIndex"),this.bindDocumentResizeListener(),this.bindScrollListener())}hide(){"auto"===this.getOption("tooltipZIndex")&&Is.clear(this.container),this.remove()}updateText(){this.getOption("escape")?(this.tooltipText.innerHTML="",this.tooltipText.appendChild(document.createTextNode(this.getOption("tooltipLabel")))):this.tooltipText.innerHTML=this.getOption("tooltipLabel")}align(){switch(this.getOption("tooltipPosition")){case"top":this.alignTop(),this.isOutOfBounds()&&(this.alignBottom(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"bottom":this.alignBottom(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&this.alignLeft()));break;case"left":this.alignLeft(),this.isOutOfBounds()&&(this.alignRight(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()));break;case"right":this.alignRight(),this.isOutOfBounds()&&(this.alignLeft(),this.isOutOfBounds()&&(this.alignTop(),this.isOutOfBounds()&&this.alignBottom()))}}getHostOffset(){if("body"===this.getOption("appendTo")||"target"===this.getOption("appendTo")){let t=this.el.nativeElement.getBoundingClientRect();return{left:t.left+pe.getWindowScrollLeft(),top:t.top+pe.getWindowScrollTop()}}return{left:0,top:0}}alignRight(){this.preAlign("right");let t=this.getHostOffset(),i=t.left+pe.getOuterWidth(this.el.nativeElement),r=t.top+(pe.getOuterHeight(this.el.nativeElement)-pe.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignLeft(){this.preAlign("left");let t=this.getHostOffset(),i=t.left-pe.getOuterWidth(this.container),r=t.top+(pe.getOuterHeight(this.el.nativeElement)-pe.getOuterHeight(this.container))/2;this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignTop(){this.preAlign("top");let t=this.getHostOffset(),i=t.left+(pe.getOuterWidth(this.el.nativeElement)-pe.getOuterWidth(this.container))/2,r=t.top-pe.getOuterHeight(this.container);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}alignBottom(){this.preAlign("bottom");let t=this.getHostOffset(),i=t.left+(pe.getOuterWidth(this.el.nativeElement)-pe.getOuterWidth(this.container))/2,r=t.top+pe.getOuterHeight(this.el.nativeElement);this.container.style.left=i+this.getOption("positionLeft")+"px",this.container.style.top=r+this.getOption("positionTop")+"px"}setOption(t){this._tooltipOptions={...this._tooltipOptions,...t}}getOption(t){return this._tooltipOptions[t]}getTarget(t){return pe.hasClass(t,"p-inputwrapper")?pe.findSingle(t,"input"):t}preAlign(t){this.container.style.left="-999px",this.container.style.top="-999px";let i="p-tooltip p-component p-tooltip-"+t;this.container.className=this.getOption("tooltipStyleClass")?i+" "+this.getOption("tooltipStyleClass"):i}isOutOfBounds(){let t=this.container.getBoundingClientRect(),i=t.top,r=t.left,s=pe.getOuterWidth(this.container),o=pe.getOuterHeight(this.container),a=pe.getViewport();return r+s>a.width||r<0||i<0||i+o>a.height}onWindowResize(t){this.hide()}bindDocumentResizeListener(){this.zone.runOutsideAngular(()=>{this.resizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.resizeListener)})}unbindDocumentResizeListener(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)}bindScrollListener(){this.scrollHandler||(this.scrollHandler=new J$(this.el.nativeElement,()=>{this.container&&this.hide()})),this.scrollHandler.bindScrollListener()}unbindScrollListener(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()}unbindEvents(){if("hover"===this.getOption("tooltipEvent"))this.el.nativeElement.removeEventListener("mouseenter",this.mouseEnterListener),this.el.nativeElement.removeEventListener("mouseleave",this.mouseLeaveListener),this.el.nativeElement.removeEventListener("click",this.clickListener);else if("focus"===this.getOption("tooltipEvent")){let t=this.getTarget(this.el.nativeElement);t.removeEventListener("focus",this.focusListener),t.removeEventListener("blur",this.blurListener)}this.unbindDocumentResizeListener()}remove(){this.container&&this.container.parentElement&&("body"===this.getOption("appendTo")?document.body.removeChild(this.container):"target"===this.getOption("appendTo")?this.el.nativeElement.removeChild(this.container):pe.removeChild(this.container,this.getOption("appendTo"))),this.unbindDocumentResizeListener(),this.unbindScrollListener(),this.clearTimeouts(),this.container=null,this.scrollHandler=null}clearShowTimeout(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=null)}clearHideTimeout(){this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout()}ngOnDestroy(){this.unbindEvents(),this.container&&Is.clear(this.container),this.remove(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(an),B(lf))},n.\u0275dir=Be({type:n,selectors:[["","pTooltip",""]],hostAttrs:[1,"p-element"],inputs:{tooltipPosition:"tooltipPosition",tooltipEvent:"tooltipEvent",appendTo:"appendTo",positionStyle:"positionStyle",tooltipStyleClass:"tooltipStyleClass",tooltipZIndex:"tooltipZIndex",escape:"escape",showDelay:"showDelay",hideDelay:"hideDelay",life:"life",positionTop:"positionTop",positionLeft:"positionLeft",fitContent:"fitContent",text:["pTooltip","text"],disabled:["tooltipDisabled","disabled"],tooltipOptions:"tooltipOptions"},features:[Si]}),n})(),uf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Fo]}),n})();const e8=function(n){return{"p-hidden":n}};function t8(n,e){if(1&n&&yn(0,"li",4),2&n){const t=Re().$implicit;Ce("ngClass",ms(1,e8,!1===t.visible))}}function n8(n,e){if(1&n&&yn(0,"span",16),2&n){const t=Re(3).$implicit;Ce("ngClass",t.icon)("ngStyle",t.iconStyle)}}function i8(n,e){if(1&n&&(Nt(0,"span",17),yi(1),Ft()),2&n){const t=Re(3).$implicit;qe(1),jr(t.label)}}function r8(n,e){1&n&&yn(0,"span",18),2&n&&Ce("innerHTML",Re(3).$implicit.label,Jl)}function s8(n,e){if(1&n&&(Nt(0,"span",19),yi(1),Ft()),2&n){const t=Re(3).$implicit;Ce("ngClass",t.badgeStyleClass),qe(1),jr(t.badge)}}const PI=function(n,e){return{"pi-angle-down":n,"pi-angle-right":e}};function o8(n,e){if(1&n&&yn(0,"span",20),2&n){const t=Re(4);Ce("ngClass",qa(1,PI,t.root,!t.root))}}const OI=function(n){return{"p-menuitem-link":!0,"p-disabled":n}};function a8(n,e){if(1&n){const t=ps();Nt(0,"a",10),on("click",function(r){Zi(t);const s=Re(2).$implicit;return Qi(Re().onItemClick(r,s))})("mouseenter",function(r){Zi(t);const s=Re(2).$implicit;return Qi(Re().onItemMouseEnter(r,s))}),Ct(1,n8,1,2,"span",11),Ct(2,i8,2,1,"span",12),Ct(3,r8,1,1,"ng-template",null,13,Ya),Ct(5,s8,2,2,"span",14),Ct(6,o8,1,4,"span",15),Ft()}if(2&n){const t=fs(4),i=Re(2).$implicit,r=Re();Ce("target",i.target)("ngClass",ms(14,OI,i.disabled)),si("href",i.url,gh)("data-automationid",i.automationId)("title",i.title)("id",i.id)("tabindex",i.disabled?null:"0")("aria-haspopup",null!=r.item.items)("aria-expanded",r.item===r.activeItem),qe(1),Ce("ngIf",i.icon),qe(1),Ce("ngIf",!1!==i.escape)("ngIfElse",t),qe(3),Ce("ngIf",i.badge),qe(1),Ce("ngIf",i.items)}}function l8(n,e){if(1&n&&yn(0,"span",16),2&n){const t=Re(3).$implicit;Ce("ngClass",t.icon)("ngStyle",t.iconStyle)}}function u8(n,e){if(1&n&&(Nt(0,"span",17),yi(1),Ft()),2&n){const t=Re(3).$implicit;qe(1),jr(t.label)}}function c8(n,e){1&n&&yn(0,"span",18),2&n&&Ce("innerHTML",Re(3).$implicit.label,Jl)}function h8(n,e){if(1&n&&(Nt(0,"span",19),yi(1),Ft()),2&n){const t=Re(3).$implicit;Ce("ngClass",t.badgeStyleClass),qe(1),jr(t.badge)}}function d8(n,e){if(1&n&&yn(0,"span",20),2&n){const t=Re(4);Ce("ngClass",qa(1,PI,t.root,!t.root))}}const f8=function(){return{exact:!1}};function p8(n,e){if(1&n){const t=ps();Nt(0,"a",21),on("click",function(r){Zi(t);const s=Re(2).$implicit;return Qi(Re().onItemClick(r,s))})("mouseenter",function(r){Zi(t);const s=Re(2).$implicit;return Qi(Re().onItemMouseEnter(r,s))}),Ct(1,l8,1,2,"span",11),Ct(2,u8,2,1,"span",12),Ct(3,c8,1,1,"ng-template",null,22,Ya),Ct(5,h8,2,2,"span",14),Ct(6,d8,1,4,"span",15),Ft()}if(2&n){const t=fs(4),i=Re(2).$implicit;Ce("routerLink",i.routerLink)("queryParams",i.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.routerLinkActiveOptions||im(21,f8))("target",i.target)("ngClass",ms(22,OI,i.disabled))("fragment",i.fragment)("queryParamsHandling",i.queryParamsHandling)("preserveFragment",i.preserveFragment)("skipLocationChange",i.skipLocationChange)("replaceUrl",i.replaceUrl)("state",i.state),si("data-automationid",i.automationId)("title",i.title)("id",i.id)("tabindex",i.disabled?null:"0"),qe(1),Ce("ngIf",i.icon),qe(1),Ce("ngIf",!1!==i.escape)("ngIfElse",t),qe(3),Ce("ngIf",i.badge),qe(1),Ce("ngIf",i.items)}}function g8(n,e){if(1&n){const t=ps();Nt(0,"p-menubarSub",23),on("leafClick",function(){return Zi(t),Qi(Re(3).onLeafClick())}),Ft()}if(2&n){const t=Re(2).$implicit,i=Re();Ce("parentActive",t===i.activeItem)("item",t)("mobileActive",i.mobileActive)("autoDisplay",i.autoDisplay)}}const m8=function(n,e){return{"p-menuitem":!0,"p-menuitem-active":n,"p-hidden":e}};function _8(n,e){if(1&n&&(Nt(0,"li",5,6),Ct(2,a8,7,16,"a",7),Ct(3,p8,7,24,"a",8),Ct(4,g8,1,4,"p-menubarSub",9),Ft()),2&n){const t=Re().$implicit,i=Re();cu(t.styleClass),Ce("ngClass",qa(8,m8,t===i.activeItem,!1===t.visible))("ngStyle",t.style)("tooltipOptions",t.tooltipOptions),qe(2),Ce("ngIf",!t.routerLink),qe(1),Ce("ngIf",t.routerLink),qe(1),Ce("ngIf",t.items)}}function y8(n,e){if(1&n&&(Ct(0,t8,1,3,"li",2),Ct(1,_8,5,11,"li",3)),2&n){const t=e.$implicit;Ce("ngIf",t.separator),qe(1),Ce("ngIf",!t.separator)}}const v8=function(n,e){return{"p-submenu-list":n,"p-menubar-root-list":e}},b8=["menubutton"],E8=["rootmenu"];function w8(n,e){1&n&&Ah(0)}function C8(n,e){if(1&n&&(Nt(0,"div",7),Ct(1,w8,1,0,"ng-container",8),Ft()),2&n){const t=Re();qe(1),Ce("ngTemplateOutlet",t.startTemplate)}}function S8(n,e){if(1&n){const t=ps();Nt(0,"a",9,10),on("click",function(r){return Zi(t),Qi(Re().toggle(r))}),yn(2,"i",11),Ft()}}function T8(n,e){1&n&&Ah(0)}function x8(n,e){if(1&n&&(Nt(0,"div",12),Ct(1,T8,1,0,"ng-container",8),Ft()),2&n){const t=Re();qe(1),Ce("ngTemplateOutlet",t.endTemplate)}}function D8(n,e){1&n&&(Nt(0,"div",12),function pw(n,e=0,t){const i=K(),r=Ut(),s=Na(r,22+n,16,null,t||null);null===s.projection&&(s.projection=e),Ep(),32!=(32&s.flags)&&function dO(n,e,t){H0(e[11],0,e,t,P0(n,t,e),L0(t.parent||e[6],t,e))}(r,i,s)}(1),Ft())}const A8=function(n){return{"p-menubar p-component":!0,"p-menubar-mobile-active":n}},I8=["*"];let M8=(()=>{class n{constructor(t,i,r){this.el=t,this.renderer=i,this.cd=r,this.autoZIndex=!0,this.baseZIndex=0,this.leafClick=new gt,this.menuHoverActive=!1}get parentActive(){return this._parentActive}set parentActive(t){this.root||(this._parentActive=t,t||(this.activeItem=null))}onItemClick(t,i){i.disabled?t.preventDefault():(!i.url&&!i.routerLink&&t.preventDefault(),i.command&&i.command({originalEvent:t,item:i}),i.items&&(this.activeItem&&i===this.activeItem?(this.activeItem=null,this.unbindDocumentClickListener()):(this.activeItem=i,this.root&&this.bindDocumentClickListener())),i.items||this.onLeafClick())}onItemMouseEnter(t,i){i.disabled||this.mobileActive?t.preventDefault():this.root?(this.activeItem||this.autoDisplay)&&(this.activeItem=i,this.bindDocumentClickListener()):(this.activeItem=i,this.bindDocumentClickListener())}onLeafClick(){this.activeItem=null,this.root&&this.unbindDocumentClickListener(),this.leafClick.emit()}bindDocumentClickListener(){this.documentClickListener||(this.documentClickListener=t=>{this.el&&!this.el.nativeElement.contains(t.target)&&(this.activeItem=null,this.cd.markForCheck(),this.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))}unbindDocumentClickListener(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)}ngOnDestroy(){this.unbindDocumentClickListener()}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(Di),B(qs))},n.\u0275cmp=os({type:n,selectors:[["p-menubarSub"]],hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",mobileActive:"mobileActive",autoDisplay:"autoDisplay",parentActive:"parentActive"},outputs:{leafClick:"leafClick"},decls:2,vars:6,consts:[[3,"ngClass"],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["role","none","pTooltip","",3,"ngClass","ngStyle","class","tooltipOptions",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["role","none","pTooltip","",3,"ngClass","ngStyle","tooltipOptions"],["listItem",""],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter",4,"ngIf"],[3,"parentActive","item","mobileActive","autoDisplay","leafClick",4,"ngIf"],["role","menuitem","pRipple","",3,"target","ngClass","click","mouseenter"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi",3,"ngClass"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click","mouseenter"],["htmlRouteLabel",""],[3,"parentActive","item","mobileActive","autoDisplay","leafClick"]],template:function(t,i){1&t&&(Nt(0,"ul",0),Ct(1,y8,2,2,"ng-template",1),Ft()),2&t&&(Ce("ngClass",qa(3,v8,!i.root,i.root)),si("role",i.root?"menubar":"menu"),qe(1),Ce("ngForOf",i.root?i.item:i.item.items))},dependencies:[Tu,$m,nd,xu,rc,Iy,II,RI,n],encapsulation:2}),n})(),R8=(()=>{class n{constructor(t,i,r,s){this.el=t,this.renderer=i,this.cd=r,this.config=s,this.autoZIndex=!0,this.baseZIndex=0}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"start":this.startTemplate=t.template;break;case"end":this.endTemplate=t.template}})}toggle(t){this.mobileActive?(this.hide(),Is.clear(this.rootmenu.el.nativeElement)):(this.mobileActive=!0,Is.set("menu",this.rootmenu.el.nativeElement,this.config.zIndex.menu)),this.bindOutsideClickListener(),t.preventDefault()}bindOutsideClickListener(){this.outsideClickListener||(this.outsideClickListener=t=>{this.mobileActive&&this.rootmenu.el.nativeElement!==t.target&&!this.rootmenu.el.nativeElement.contains(t.target)&&this.menubutton.nativeElement!==t.target&&!this.menubutton.nativeElement.contains(t.target)&&this.hide()},document.addEventListener("click",this.outsideClickListener))}hide(){this.mobileActive=!1,this.cd.markForCheck(),Is.clear(this.rootmenu.el.nativeElement),this.unbindOutsideClickListener()}onLeafClick(){this.hide()}unbindOutsideClickListener(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)}ngOnDestroy(){this.unbindOutsideClickListener()}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(Di),B(qs),B(lf))},n.\u0275cmp=os({type:n,selectors:[["p-menubar"]],contentQueries:function(t,i,r){if(1&t&&dm(r,Q$,4),2&t){let s;_s(s=ys())&&(i.templates=s)}},viewQuery:function(t,i){if(1&t&&(Po(b8,5),Po(E8,5)),2&t){let r;_s(r=ys())&&(i.menubutton=r.first),_s(r=ys())&&(i.rootmenu=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",style:"style",styleClass:"styleClass",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",autoDisplay:"autoDisplay"},ngContentSelectors:I8,decls:8,vars:15,consts:[[3,"ngClass","ngStyle"],["class","p-menubar-start",4,"ngIf"],["tabindex","0","class","p-menubar-button",3,"click",4,"ngIf"],["root","root",3,"item","baseZIndex","autoZIndex","mobileActive","autoDisplay","leafClick"],["rootmenu",""],["class","p-menubar-end",4,"ngIf","ngIfElse"],["legacy",""],[1,"p-menubar-start"],[4,"ngTemplateOutlet"],["tabindex","0",1,"p-menubar-button",3,"click"],["menubutton",""],[1,"pi","pi-bars"],[1,"p-menubar-end"]],template:function(t,i){if(1&t&&(function fw(n){const e=K()[16][6];if(!e.projection){const i=e.projection=jl(n?n.length:1,null),r=i.slice();let s=e.child;for(;null!==s;){const o=n?WF(s,n):0;null!==o&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}(),Nt(0,"div",0),Ct(1,C8,2,1,"div",1),Ct(2,S8,3,0,"a",2),Nt(3,"p-menubarSub",3,4),on("leafClick",function(){return i.onLeafClick()}),Ft(),Ct(5,x8,2,1,"div",5),Ct(6,D8,2,0,"ng-template",null,6,Ya),Ft()),2&t){const r=fs(7);cu(i.styleClass),Ce("ngClass",ms(13,A8,i.mobileActive))("ngStyle",i.style),qe(1),Ce("ngIf",i.startTemplate),qe(1),Ce("ngIf",i.model&&i.model.length>0),qe(1),Ce("item",i.model)("baseZIndex",i.baseZIndex)("autoZIndex",i.autoZIndex)("mobileActive",i.mobileActive)("autoDisplay",i.autoDisplay),qe(2),Ce("ngIf",i.endTemplate)("ngIfElse",r)}},dependencies:[Tu,nd,fT,xu,M8],styles:[".p-menubar{display:flex;align-items:center}.p-menubar ul{margin:0;padding:0;list-style:none}.p-menubar .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-menubar .p-menuitem-text{line-height:1}.p-menubar .p-menuitem{position:relative}.p-menubar-root-list{display:flex;align-items:center}.p-menubar-root-list>li ul{display:none;z-index:1}.p-menubar-root-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block}.p-menubar .p-submenu-list{display:none;position:absolute;z-index:2}.p-menubar .p-submenu-list>.p-menuitem-active>p-menubarsub>.p-submenu-list{display:block;left:100%;top:0}.p-menubar .p-submenu-list .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-menubar .p-menubar-custom,.p-menubar .p-menubar-end{margin-left:auto;align-self:center}.p-menubar-button{display:none;cursor:pointer;align-items:center;justify-content:center}\n"],encapsulation:2,changeDetection:0}),n})(),P8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({imports:[Fo,dl,MI,uf,AI,dl,uf,AI]}),n})();var Xo=(n=>(n[n.WEBGL_LEGACY=0]="WEBGL_LEGACY",n[n.WEBGL=1]="WEBGL",n[n.WEBGL2=2]="WEBGL2",n))(Xo||{}),Uy=(n=>(n[n.COLOR=16384]="COLOR",n[n.DEPTH=256]="DEPTH",n[n.STENCIL=1024]="STENCIL",n))(Uy||{}),Ye=(n=>(n[n.NORMAL=0]="NORMAL",n[n.ADD=1]="ADD",n[n.MULTIPLY=2]="MULTIPLY",n[n.SCREEN=3]="SCREEN",n[n.OVERLAY=4]="OVERLAY",n[n.DARKEN=5]="DARKEN",n[n.LIGHTEN=6]="LIGHTEN",n[n.COLOR_DODGE=7]="COLOR_DODGE",n[n.COLOR_BURN=8]="COLOR_BURN",n[n.HARD_LIGHT=9]="HARD_LIGHT",n[n.SOFT_LIGHT=10]="SOFT_LIGHT",n[n.DIFFERENCE=11]="DIFFERENCE",n[n.EXCLUSION=12]="EXCLUSION",n[n.HUE=13]="HUE",n[n.SATURATION=14]="SATURATION",n[n.COLOR=15]="COLOR",n[n.LUMINOSITY=16]="LUMINOSITY",n[n.NORMAL_NPM=17]="NORMAL_NPM",n[n.ADD_NPM=18]="ADD_NPM",n[n.SCREEN_NPM=19]="SCREEN_NPM",n[n.NONE=20]="NONE",n[n.SRC_OVER=0]="SRC_OVER",n[n.SRC_IN=21]="SRC_IN",n[n.SRC_OUT=22]="SRC_OUT",n[n.SRC_ATOP=23]="SRC_ATOP",n[n.DST_OVER=24]="DST_OVER",n[n.DST_IN=25]="DST_IN",n[n.DST_OUT=26]="DST_OUT",n[n.DST_ATOP=27]="DST_ATOP",n[n.ERASE=26]="ERASE",n[n.SUBTRACT=28]="SUBTRACT",n[n.XOR=29]="XOR",n))(Ye||{}),Yr=(n=>(n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n))(Yr||{}),le=(n=>(n[n.RGBA=6408]="RGBA",n[n.RGB=6407]="RGB",n[n.RG=33319]="RG",n[n.RED=6403]="RED",n[n.RGBA_INTEGER=36249]="RGBA_INTEGER",n[n.RGB_INTEGER=36248]="RGB_INTEGER",n[n.RG_INTEGER=33320]="RG_INTEGER",n[n.RED_INTEGER=36244]="RED_INTEGER",n[n.ALPHA=6406]="ALPHA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n))(le||{}),pl=(n=>(n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n))(pl||{}),Ve=(n=>(n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",n[n.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",n[n.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",n[n.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",n[n.BYTE=5120]="BYTE",n[n.SHORT=5122]="SHORT",n[n.INT=5124]="INT",n[n.FLOAT=5126]="FLOAT",n[n.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",n[n.HALF_FLOAT=36193]="HALF_FLOAT",n))(Ve||{}),Vy=(n=>(n[n.FLOAT=0]="FLOAT",n[n.INT=1]="INT",n[n.UINT=2]="UINT",n))(Vy||{}),Ms=(n=>(n[n.NEAREST=0]="NEAREST",n[n.LINEAR=1]="LINEAR",n))(Ms||{}),oo=(n=>(n[n.CLAMP=33071]="CLAMP",n[n.REPEAT=10497]="REPEAT",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n))(oo||{}),Kr=(n=>(n[n.OFF=0]="OFF",n[n.POW2=1]="POW2",n[n.ON=2]="ON",n[n.ON_MANUAL=3]="ON_MANUAL",n))(Kr||{}),xr=(n=>(n[n.NPM=0]="NPM",n[n.UNPACK=1]="UNPACK",n[n.PMA=2]="PMA",n[n.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",n[n.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",n[n.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",n))(xr||{}),Zr=(n=>(n[n.NO=0]="NO",n[n.YES=1]="YES",n[n.AUTO=2]="AUTO",n[n.BLEND=0]="BLEND",n[n.CLEAR=1]="CLEAR",n[n.BLIT=2]="BLIT",n))(Zr||{}),Hy=(n=>(n[n.AUTO=0]="AUTO",n[n.MANUAL=1]="MANUAL",n))(Hy||{}),lr=(n=>(n.LOW="lowp",n.MEDIUM="mediump",n.HIGH="highp",n))(lr||{}),zn=(n=>(n[n.NONE=0]="NONE",n[n.SCISSOR=1]="SCISSOR",n[n.STENCIL=2]="STENCIL",n[n.SPRITE=3]="SPRITE",n[n.COLOR=4]="COLOR",n))(zn||{}),Vn=(n=>(n[n.NONE=0]="NONE",n[n.LOW=2]="LOW",n[n.MEDIUM=4]="MEDIUM",n[n.HIGH=8]="HIGH",n))(Vn||{}),Qr=(n=>(n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",n))(Qr||{});const F8={createCanvas:(n,e)=>{const t=document.createElement("canvas");return t.width=n,t.height=e,t},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(n,e)=>fetch(n,e),parseXML:n=>(new DOMParser).parseFromString(n,"text/xml")};var Gy=/iPhone/i,NI=/iPod/i,FI=/iPad/i,LI=/\biOS-universal(?:.+)Mac\b/i,jy=/\bAndroid(?:.+)Mobile\b/i,kI=/Android/i,gl=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,cf=/Silk/i,Rs=/Windows Phone/i,BI=/\bWindows(?:.+)ARM\b/i,UI=/BlackBerry/i,VI=/BB10/i,HI=/Opera Mini/i,GI=/\b(CriOS|Chrome)(?:.+)Mobile/i,jI=/Mobile(?:.+)Firefox\b/i,$I=function(n){return typeof n<"u"&&"MacIntel"===n.platform&&"number"==typeof n.maxTouchPoints&&n.maxTouchPoints>1&&typeof MSStream>"u"};const Ps=function k8(n){var e={userAgent:"",platform:"",maxTouchPoints:0};!n&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof n?e.userAgent=n:n&&n.userAgent&&(e={userAgent:n.userAgent,platform:n.platform,maxTouchPoints:n.maxTouchPoints||0});var t=e.userAgent,i=t.split("[FBAN");typeof i[1]<"u"&&(t=i[0]),typeof(i=t.split("Twitter"))[1]<"u"&&(t=i[0]);var r=function L8(n){return function(e){return e.test(n)}}(t),s={apple:{phone:r(Gy)&&!r(Rs),ipod:r(NI),tablet:!r(Gy)&&(r(FI)||$I(e))&&!r(Rs),universal:r(LI),device:(r(Gy)||r(NI)||r(FI)||r(LI)||$I(e))&&!r(Rs)},amazon:{phone:r(gl),tablet:!r(gl)&&r(cf),device:r(gl)||r(cf)},android:{phone:!r(Rs)&&r(gl)||!r(Rs)&&r(jy),tablet:!r(Rs)&&!r(gl)&&!r(jy)&&(r(cf)||r(kI)),device:!r(Rs)&&(r(gl)||r(cf)||r(jy)||r(kI))||r(/\bokhttp\b/i)},windows:{phone:r(Rs),tablet:r(BI),device:r(Rs)||r(BI)},other:{blackberry:r(UI),blackberry10:r(VI),opera:r(HI),firefox:r(jI),chrome:r(GI),device:r(UI)||r(VI)||r(HI)||r(jI)||r(GI)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator),se={ADAPTER:F8,MIPMAP_TEXTURES:Kr.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:Vn.NONE,SPRITE_MAX_TEXTURES:function U8(n){let e=!0;if(Ps.tablet||Ps.phone){if(Ps.apple.device){const t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);t&&parseInt(t[1],10)<11&&(e=!1)}if(Ps.android.device){const t=navigator.userAgent.match(/Android\s([0-9.]*)/);t&&parseInt(t[1],10)<7&&(e=!1)}}return e?n:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:Hy.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:oo.CLAMP,SCALE_MODE:Ms.LINEAR,PRECISION_VERTEX:lr.HIGH,PRECISION_FRAGMENT:Ps.apple.device?lr.HIGH:lr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:function B8(){return!Ps.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};se.PREFER_ENV=Xo.WEBGL2,se.STRICT_TEXTURE_CACHE=!1;var ve=(n=>(n.Renderer="renderer",n.Application="application",n.RendererSystem="renderer-webgl-system",n.RendererPlugin="renderer-webgl-plugin",n.CanvasRendererSystem="renderer-canvas-system",n.CanvasRendererPlugin="renderer-canvas-plugin",n.Asset="asset",n.LoadParser="load-parser",n.ResolveParser="resolve-parser",n.CacheParser="cache-parser",n.DetectionParser="detection-parser",n))(ve||{});const $y=n=>{if("function"==typeof n||"object"==typeof n&&n.extension){if(!n.extension)throw new Error("Extension class must have an extension object");n={..."object"!=typeof n.extension?{type:n.extension}:n.extension,ref:n}}if("object"!=typeof n)throw new Error("Invalid extension type");return"string"==typeof(n={...n}).type&&(n.type=[n.type]),n},WI=(n,e)=>$y(n).priority??e,Le={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...n){return n.map($y).forEach(e=>{e.type.forEach(t=>this._removeHandlers[t]?.(e))}),this},add(...n){return n.map($y).forEach(e=>{e.type.forEach(t=>{const i=this._addHandlers,r=this._queue;i[t]?i[t](e):(r[t]=r[t]||[],r[t].push(e))})}),this},handle(n,e,t){const i=this._addHandlers,r=this._removeHandlers;if(i[n]||r[n])throw new Error(`Extension type ${n} already has a handler`);i[n]=e,r[n]=t;const s=this._queue;return s[n]&&(s[n].forEach(o=>e(o)),delete s[n]),this},handleByMap(n,e){return this.handle(n,t=>{e[t.name]=t.ref},t=>{delete e[t.name]})},handleByList(n,e,t=-1){return this.handle(n,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>WI(s,t)-WI(r,t)))},i=>{const r=e.indexOf(i.ref);-1!==r&&e.splice(r,1)})}},hf=2*Math.PI,V8=180/Math.PI,H8=Math.PI/180;var Zn=(n=>(n[n.POLY=0]="POLY",n[n.RECT=1]="RECT",n[n.CIRC=2]="CIRC",n[n.ELIP=3]="ELIP",n[n.RREC=4]="RREC",n))(Zn||{});class bt{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}clone(){return new bt(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,t=e){return this.x=e,this.y=t,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const df=[new bt,new bt,new bt,new bt];class Ot{constructor(e=0,t=0,i=0,r=0){this.x=Number(e),this.y=Number(t),this.width=Number(i),this.height=Number(r),this.type=Zn.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ot(0,0,0,0)}clone(){return new Ot(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,t){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height}intersects(e,t){if(!t)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=df[0].set(e.left,e.top),l=df[1].set(e.left,e.bottom),u=df[2].set(e.right,e.top),c=df[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(t.a*t.d-t.b*t.c);if(0===h||(t.apply(a,a),t.apply(l,l),t.apply(u,u),t.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=i||Math.min(a.x,l.x,u.x,c.x)>=r||Math.max(a.y,l.y,u.y,c.y)<=s||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;const d=h*(l.y-a.y),g=h*(a.x-l.x),m=d*i+g*s,y=d*r+g*s,v=d*i+g*o,b=d*r+g*o;if(Math.max(m,y,v,b)<=d*a.x+g*a.y||Math.min(m,y,v,b)>=d*c.x+g*c.y)return!1;const A=h*(a.y-u.y),w=h*(u.x-a.x),M=A*i+w*s,J=A*r+w*s,te=A*i+w*o,ie=A*r+w*o;return!(Math.max(M,J,te,ie)<=A*a.x+w*a.y||Math.min(M,J,te,ie)>=A*c.x+w*c.y)}pad(e=0,t=e){return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}fit(e){const t=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(i-t,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,t=.001){const i=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const t=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=i-t,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Wy{constructor(e=0,t=0,i=0){this.x=e,this.y=t,this.radius=i,this.type=Zn.CIRC}clone(){return new Wy(this.x,this.y,this.radius)}contains(e,t){if(this.radius<=0)return!1;let r=this.x-e,s=this.y-t;return r*=r,s*=s,r+s<=this.radius*this.radius}getBounds(){return new Ot(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class zy{constructor(e=0,t=0,i=0,r=0){this.x=e,this.y=t,this.width=i,this.height=r,this.type=Zn.ELIP}clone(){return new zy(this.x,this.y,this.width,this.height)}contains(e,t){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,r=(t-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new Ot(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class ml{constructor(...e){let t=Array.isArray(e[0])?e[0]:e;if("number"!=typeof t[0]){const i=[];for(let r=0,s=t.length;r<s;r++)i.push(t[r].x,t[r].y);t=i}this.points=t,this.type=Zn.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),t=new ml(e);return t.closeStroke=this.closeStroke,t}contains(e,t){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[2*s],l=this.points[2*s+1],u=this.points[2*o],c=this.points[2*o+1];l>t!=c>t&&e<(t-l)/(c-l)*(u-a)+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,t)=>`${e}, ${t}`,"")}]`}}class Xy{constructor(e=0,t=0,i=0,r=0,s=20){this.x=e,this.y=t,this.width=i,this.height=r,this.radius=s,this.type=Zn.RREC}clone(){return new Xy(this.x,this.y,this.width,this.height,this.radius)}contains(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+i&&t<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=t-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=t-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class ao{constructor(e,t,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=t}clone(e=this.cb,t=this.scope){return new ao(e,t,this._x,this._y)}set(e=0,t=e){return(this._x!==e||this._y!==t)&&(this._x=e,this._y=t,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class pn{constructor(e=1,t=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,t,i,r,s,o){return this.a=e,this.b=t,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,t){this.array||(this.array=new Float32Array(9));const i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,t){t=t||new bt;const i=e.x,r=e.y;return t.x=this.a*i+this.c*r+this.tx,t.y=this.b*i+this.d*r+this.ty,t}applyInverse(e,t){t=t||new bt;const i=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return t.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,t}translate(e,t){return this.tx+=e,this.ty+=t,this}scale(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*t-this.b*i,this.b=r*i+this.b*t,this.c=s*t-this.d*i,this.d=s*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this}append(e){const t=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*t+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,t,i,r,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=t-(i*this.b+r*this.d),this}prepend(e){const t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}decompose(e){const t=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,t),u=Math.abs(a+l);return u<1e-5||Math.abs(hf-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(t*t+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,t=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-t*i;return this.a=r/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-t*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new pn;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new pn}static get TEMP_MATRIX(){return new pn}}const qo=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Yo=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ko=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Zo=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qy=[],zI=[],ff=Math.sign;!function G8(){for(let n=0;n<16;n++){const e=[];qy.push(e);for(let t=0;t<16;t++){const i=ff(qo[n]*qo[t]+Ko[n]*Yo[t]),r=ff(Yo[n]*qo[t]+Zo[n]*Yo[t]),s=ff(qo[n]*Ko[t]+Ko[n]*Zo[t]),o=ff(Yo[n]*Ko[t]+Zo[n]*Zo[t]);for(let a=0;a<16;a++)if(qo[a]===i&&Yo[a]===r&&Ko[a]===s&&Zo[a]===o){e.push(a);break}}}for(let n=0;n<16;n++){const e=new pn;e.set(qo[n],Yo[n],Ko[n],Zo[n],0,0),zI.push(e)}}();const bn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:n=>qo[n],uY:n=>Yo[n],vX:n=>Ko[n],vY:n=>Zo[n],inv:n=>8&n?15&n:7&-n,add:(n,e)=>qy[n][e],sub:(n,e)=>qy[n][bn.inv(e)],rotate180:n=>4^n,isVertical:n=>2==(3&n),byDirection:(n,e)=>2*Math.abs(n)<=Math.abs(e)?e>=0?bn.S:bn.N:2*Math.abs(e)<=Math.abs(n)?n>0?bn.E:bn.W:e>0?n>0?bn.SE:bn.SW:n>0?bn.NE:bn.NW,matrixAppendRotationInv:(n,e,t=0,i=0)=>{const r=zI[bn.inv(e)];r.tx=t,r.ty=i,n.append(r)}},XI=class{constructor(){this.worldTransform=new pn,this.localTransform=new pn,this.position=new ao(this.onChange,this,0,0),this.scale=new ao(this.onChange,this,1,1),this.pivot=new ao(this.onChange,this,0,0),this.skew=new ao(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const n=this.localTransform;this._localID!==this._currentLocalID&&(n.a=this._cx*this.scale.x,n.b=this._sx*this.scale.x,n.c=this._cy*this.scale.y,n.d=this._sy*this.scale.y,n.tx=this.position.x-(this.pivot.x*n.a+this.pivot.y*n.c),n.ty=this.position.y-(this.pivot.x*n.b+this.pivot.y*n.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(n){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==n._worldID){const t=n.worldTransform,i=this.worldTransform;i.a=e.a*t.a+e.b*t.c,i.b=e.a*t.b+e.b*t.d,i.c=e.c*t.a+e.d*t.c,i.d=e.c*t.b+e.d*t.d,i.tx=e.tx*t.a+e.ty*t.c+t.tx,i.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=n._worldID,this._worldID++}}setFromMatrix(n){n.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(n){this._rotation!==n&&(this._rotation=n,this.updateSkew())}};let Yy=XI;Yy.IDENTITY=new XI;class Dr{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,t,i,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][u](e,t,i,r,s,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(Dr.prototype,{dispatch:{value:Dr.prototype.emit},run:{value:Dr.prototype.emit}}),se.TARGET_FPMS=.06;var _l=(n=>(n[n.HIGH=25]="HIGH",n[n.NORMAL=0]="NORMAL",n[n.LOW=-25]="LOW",n[n.UTILITY=-50]="UTILITY",n))(_l||{});class Ky{constructor(e,t=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=t,this.priority=i,this.once=r}match(e,t=null){return this.fn===e&&this.context===t}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const t=this.next;return this.next=e?null:t,this.previous=null,t}}class Hn{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ky(null,null,1/0),this.deltaMS=1/se.TARGET_FPMS,this.elapsedMS=1/se.TARGET_FPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=_l.NORMAL){return this._addListener(new Ky(e,t,i))}addOnce(e,t,i=_l.NORMAL){return this._addListener(new Ky(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i=i.match(e,t)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*se.TARGET_FPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,se.TARGET_FPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Hn._shared){const e=Hn._shared=new Hn;e.autoStart=!0,e._protected=!0}return Hn._shared}static get system(){if(!Hn._system){const e=Hn._system=new Hn;e.autoStart=!0,e._protected=!0}return Hn._system}}class qI{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,_l.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Hn.shared:new Hn,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}qI.extension=ve.Application,Le.add(qI);var uc=Se(5),j8=Se(469),Zy=Se(762);const $8={parse:Zy.Qc,format:Zy.WU,resolve:Zy.DB};function Ar(n){if("string"!=typeof n)throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function YI(n){return n.split("?")[0].split("#")[0]}const Qn={toPosix:n=>function z8(n,e,t){return n.replace(new RegExp(function W8(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),t)}(n,"\\","/"),isUrl(n){return/^https?:/.test(this.toPosix(n))},isDataUrl:n=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(n),hasProtocol(n){return/^[^/:]+:\//.test(this.toPosix(n))},getProtocol(n){Ar(n),n=this.toPosix(n);let e="";const t=/^file:\/\/\//.exec(n),i=/^[^/:]+:\/\//.exec(n),r=/^[^/:]+:\//.exec(n);if(t||i||r){const s=t?.[0]||i?.[0]||r?.[0];e=s,n=n.slice(s.length)}return e},toAbsolute(n,e,t){if(this.isDataUrl(n))return n;const i=YI(this.toPosix(e??se.ADAPTER.getBaseUrl())),r=YI(this.toPosix(t??this.rootname(i)));return Ar(n),(n=this.toPosix(n)).startsWith("/")?Qn.join(r,n.slice(1)):this.isAbsolute(n)?n:this.join(i,n)},normalize(n){if(Ar(n=this.toPosix(n)),0===n.length)return".";let e="";const t=n.startsWith("/");this.hasProtocol(n)&&(e=this.rootname(n),n=n.slice(e.length));const i=n.endsWith("/");return n=function X8(n,e){let o,t="",i=0,r=-1,s=0;for(let a=0;a<=n.length;++a){if(a<n.length)o=n.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(r!==a-1&&1!==s)if(r!==a-1&&2===s){if(t.length<2||2!==i||46!==t.charCodeAt(t.length-1)||46!==t.charCodeAt(t.length-2))if(t.length>2){const l=t.lastIndexOf("/");if(l!==t.length-1){-1===l?(t="",i=0):(t=t.slice(0,l),i=t.length-1-t.lastIndexOf("/")),r=a,s=0;continue}}else if(2===t.length||1===t.length){t="",i=0,r=a,s=0;continue}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+=`/${n.slice(r+1,a)}`:t=n.slice(r+1,a),i=a-r-1;r=a,s=0}else 46===o&&-1!==s?++s:s=-1}return t}(n,!1),n.length>0&&i&&(n+="/"),t?`/${n}`:e+n},isAbsolute(n){return Ar(n),n=this.toPosix(n),!!this.hasProtocol(n)||n.startsWith("/")},join(...n){if(0===n.length)return".";let e;for(let t=0;t<n.length;++t){const i=n[t];Ar(i),i.length>0&&(void 0===e?e=i:this.extname(n[t-1]??"")?e+=`/../${i}`:e+=`/${i}`)}return void 0===e?".":this.normalize(e)},dirname(n){if(Ar(n),0===n.length)return".";let e=(n=this.toPosix(n)).charCodeAt(0);const t=47===e;let i=-1,r=!0;const s=this.getProtocol(n),o=n;for(let a=(n=n.slice(s.length)).length-1;a>=1;--a)if(e=n.charCodeAt(a),47===e){if(!r){i=a;break}}else r=!1;return-1===i?t?"/":this.isUrl(o)?s+n:s:t&&1===i?"//":s+n.slice(0,i)},rootname(n){Ar(n);let e="";if(e=(n=this.toPosix(n)).startsWith("/")?"/":this.getProtocol(n),this.isUrl(n)){const t=n.indexOf("/",e.length);e=-1!==t?n.slice(0,t):n,e.endsWith("/")||(e+="/")}return e},basename(n,e){Ar(n),e&&Ar(e),n=this.toPosix(n);let s,t=0,i=-1,r=!0;if(void 0!==e&&e.length>0&&e.length<=n.length){if(e.length===n.length&&e===n)return"";let o=e.length-1,a=-1;for(s=n.length-1;s>=0;--s){const l=n.charCodeAt(s);if(47===l){if(!r){t=s+1;break}}else-1===a&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?-1==--o&&(i=s):(o=-1,i=a))}return t===i?i=a:-1===i&&(i=n.length),n.slice(t,i)}for(s=n.length-1;s>=0;--s)if(47===n.charCodeAt(s)){if(!r){t=s+1;break}}else-1===i&&(r=!1,i=s+1);return-1===i?"":n.slice(t,i)},extname(n){Ar(n);let e=-1,t=0,i=-1,r=!0,s=0;for(let o=(n=this.toPosix(n)).length-1;o>=0;--o){const a=n.charCodeAt(o);if(47!==a)-1===i&&(r=!1,i=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){t=o+1;break}}return-1===e||-1===i||0===s||1===s&&e===i-1&&e===t+1?"":n.slice(e,i)},parse(n){Ar(n);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===n.length)return e;let t=(n=this.toPosix(n)).charCodeAt(0);const i=this.isAbsolute(n);let r;e.root=this.rootname(n),r=i||this.hasProtocol(n)?1:0;let o=-1,a=0,l=-1,u=!0,c=n.length-1,h=0;for(;c>=r;--c)if(t=n.charCodeAt(c),47!==t)-1===l&&(u=!1,l=c+1),46===t?-1===o?o=c:1!==h&&(h=1):-1!==o&&(h=-1);else if(!u){a=c+1;break}return-1===o||-1===l||0===h||1===h&&o===l-1&&o===a+1?-1!==l&&(e.base=e.name=n.slice(0===a&&i?1:a,l)):(0===a&&i?(e.name=n.slice(1,o),e.base=n.slice(1,l)):(e.name=n.slice(a,o),e.base=n.slice(a,l)),e.ext=n.slice(o,l)),e.dir=this.dirname(n),e},sep:"/",delimiter:":"};se.RETINA_PREFIX=/@([0-9\.]+)x/,se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;const KI={};function Ii(n,e,t=3){if(KI[e])return;let i=(new Error).stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${n}`):(i=i.split("\n").splice(t).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${n}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${n}`),console.warn(i))),KI[e]=!0}let Qy;var Fz={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function cc(n,e=[]){return e[0]=(n>>16&255)/255,e[1]=(n>>8&255)/255,e[2]=(255&n)/255,e}function ZI(n){let e=n.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function Jy(n){if("string"==typeof n&&("#"===(n=Fz[n.toLowerCase()]||n)[0]&&(n=n.slice(1)),3===n.length)){const[e,t,i]=n;n=e+e+t+t+i+i}return parseInt(n,16)}const QI=function Lz(){const n=[],e=[];for(let i=0;i<32;i++)n[i]=i,e[i]=i;n[Ye.NORMAL_NPM]=Ye.NORMAL,n[Ye.ADD_NPM]=Ye.ADD,n[Ye.SCREEN_NPM]=Ye.SCREEN,e[Ye.NORMAL]=Ye.NORMAL_NPM,e[Ye.ADD]=Ye.ADD_NPM,e[Ye.SCREEN]=Ye.SCREEN_NPM;const t=[];return t.push(e),t.push(n),t}();function JI(n,e){return QI[e?1:0][n]}function ev(n,e){if(1===e)return(255*e<<24)+n;if(0===e)return 0;let t=n>>16&255,i=n>>8&255,r=255&n;return t=t*e+.5|0,i=i*e+.5|0,r=r*e+.5|0,(255*e<<24)+(t<<16)+(i<<8)+r}function e1(n,e,t,i){return(t=t||new Float32Array(4))[0]=(n>>16&255)/255,t[1]=(n>>8&255)/255,t[2]=(255&n)/255,(i||void 0===i)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t}function tv(n){if(4===n.BYTES_PER_ELEMENT)return n instanceof Float32Array?"Float32Array":n instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===n.BYTES_PER_ELEMENT){if(n instanceof Uint16Array)return"Uint16Array"}else if(1===n.BYTES_PER_ELEMENT&&n instanceof Uint8Array)return"Uint8Array";return null}function pf(n){return n+=0===n?1:0,--n,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,1+(n|=n>>>16)}function t1(n){return!(n&n-1||!n)}function n1(n){let e=(n>65535?1:0)<<4,t=((n>>>=e)>255?1:0)<<3;return e|=t,t=((n>>>=t)>15?1:0)<<2,e|=t,t=((n>>>=t)>3?1:0)<<1,e|=t,e|(n>>>=t)>>1}function yl(n,e,t){const i=n.length;let r;if(e>=i||0===t)return;const s=i-(t=e+t>i?i-e:t);for(r=e;r<s;++r)n[r]=n[r+t];n.length=s}function vl(n){return 0===n?0:n<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let Vz=0;function Qo(){return++Vz}const i1={},Mi=Object.create(null),ur=Object.create(null);class r1{constructor(e,t,i){this.canvas=se.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||se.RESOLUTION,this.resize(e,t)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,t){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(t*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(e){this.canvas.width=Math.round(e)}get height(){return this.canvas.height}set height(e){this.canvas.height=Math.round(e)}}function s1(n,e,t){for(let i=0,r=4*t*e;i<e;++i,r+=4)if(0!==n[r+3])return!1;return!0}function o1(n,e,t,i,r){const s=4*e;for(let o=i,a=i*s+4*t;o<=r;++o,a+=s)if(0!==n[a+3])return!1;return!0}let gf;function lo(n,e=1){const t=se.RETINA_PREFIX.exec(n);return t?parseFloat(t[1]):e}const nv=[];function a1(n,e){if(!n)return null;let t="";if("string"==typeof n){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(n);i&&(t=i[1].toLowerCase())}for(let i=nv.length-1;i>=0;--i){const r=nv[i];if(r.test&&r.test(n,t))return new r(n,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class hc{constructor(e=0,t=0){this._width=e,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Dr("setRealSize"),this.onUpdate=new Dr("update"),this.onError=new Dr("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,t){(e!==this._width||t!==this._height)&&(this._width=e,this._height=t,this.onResize.emit(e,t))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,t,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,t){return!1}}class dc extends hc{constructor(e,t){const{width:i,height:r}=t||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e}upload(e,t,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===xr.UNPACK);const s=t.realWidth,o=t.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(t.target,0,0,0,s,o,t.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const $z={scaleMode:Ms.NEAREST,format:le.RGBA,alphaMode:xr.NPM},fc=class extends uc{constructor(n=null,e=null){super(),e=e||{};const{alphaMode:t,mipmap:i,anisotropicLevel:r,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:c,target:h,resolution:d,resourceOptions:g}=e;n&&!(n instanceof hc)&&((n=a1(n,g)).internal=!0),this.resolution=d||se.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i??se.MIPMAP_TEXTURES,this.anisotropicLevel=r??se.ANISOTROPIC_LEVEL,this._wrapMode=l||se.WRAP_MODE,this._scaleMode=s??se.SCALE_MODE,this.format=u||le.RGBA,this.type=c||Ve.UNSIGNED_BYTE,this.target=h||pl.TEXTURE_2D,this.alphaMode=t??xr.UNPACK,this.uid=Qo(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(n)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(n){this._mipmap!==n&&(this._mipmap=n,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(n){this._scaleMode!==n&&(this._scaleMode=n,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(n){this._wrapMode!==n&&(this._wrapMode=n,this.dirtyStyleId++)}setStyle(n,e){let t;return void 0!==n&&n!==this.scaleMode&&(this.scaleMode=n,t=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,t=!0),t&&this.dirtyStyleId++,this}setSize(n,e,t){return this.setRealSize(n*(t=t||this.resolution),e*t,t)}setRealSize(n,e,t){return this.resolution=t||this.resolution,this.width=Math.round(n)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=t1(this.realWidth)&&t1(this.realHeight)}setResolution(n){const e=this.resolution;return e===n||(this.resolution=n,this.valid&&(this.width=Math.round(this.width*e)/n,this.height=Math.round(this.height*e)/n,this.emit("update",this)),this._refreshPOT()),this}setResource(n){if(this.resource===n)return this;if(this.resource)throw new Error("Resource can be set only once");return n.bind(this),this.resource=n,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(n){this.emit("error",this,n)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ur[this.cacheId],delete Mi[this.cacheId],this.cacheId=null),this.dispose(),fc.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(n,e,t=se.STRICT_TEXTURE_CACHE){const i="string"==typeof n;let r=null;i?r=n:(n._pixiId||(n._pixiId=`${e?.pixiIdPrefix||"pixiid"}_${Qo()}`),r=n._pixiId);let s=ur[r];if(i&&t&&!s)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return s||(s=new fc(n,e),s.cacheId=r,fc.addToCache(s,r)),s}static fromBuffer(n,e,t,i){n=n||new Float32Array(e*t*4);const r=new dc(n,{width:e,height:t}),s=n instanceof Float32Array?Ve.FLOAT:Ve.UNSIGNED_BYTE;return new fc(r,Object.assign({},$z,i||{width:e,height:t,type:s}))}static addToCache(n,e){e&&(n.textureCacheIds.includes(e)||n.textureCacheIds.push(e),ur[e]&&ur[e]!==n&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),ur[e]=n)}static removeFromCache(n){if("string"==typeof n){const e=ur[n];if(e){const t=e.textureCacheIds.indexOf(n);return t>-1&&e.textureCacheIds.splice(t,1),delete ur[n],e}}else if(n?.textureCacheIds){for(let e=0;e<n.textureCacheIds.length;++e)delete ur[n.textureCacheIds[e]];return n.textureCacheIds.length=0,n}return null}};let Vt=fc;Vt._globalBatch=0;class l1 extends hc{constructor(e,t){const{width:i,height:r}=t||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Vt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,t){for(let i=0;i<this.length;i++)!e[i]||(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):this.addResourceAt(e[i]instanceof hc?e[i]:a1(e[i],t),i))}dispose(){for(let e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,t){if(!this.items[t])throw new Error(`Index ${t} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}unbind(e){super.unbind(e);for(let t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}load(){if(this._load)return this._load;const t=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(t).then(()=>{const{realWidth:i,realHeight:r}=this.items[0];return this.resize(i,r),Promise.resolve(this)}),this._load}}class uo extends hc{constructor(e){super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,t,i){void 0!==i||t.startsWith("data:")?!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous"):e.crossOrigin=function jz(n,e=globalThis.location){if(n.startsWith("data:"))return"";e=e||globalThis.location,gf||(gf=document.createElement("a")),gf.href=n;const t=$8.parse(gf.href);return t.hostname!==e.hostname||(t.port||""!==e.port)&&t.port!==e.port||t.protocol!==e.protocol?"anonymous":""}(t)}upload(e,t,i,r){const s=e.gl,o=t.realWidth,a=t.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===xr.UNPACK),this.noSubImage||t.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(t.target,0,i.internalFormat,t.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,t.format,i.type,r),!0}update(){if(this.destroyed)return;const e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),super.update()}dispose(){this.source=null}}const pc=class extends l1{constructor(n,e){const{width:t,height:i,autoLoad:r,linkBaseTexture:s}=e||{};if(n&&n.length!==pc.SIDES)throw new Error(`Invalid length. Got ${n.length}, expected 6`);super(6,{width:t,height:i});for(let o=0;o<pc.SIDES;o++)this.items[o].target=pl.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,n&&this.initFromArray(n,e),!1!==r&&this.load()}bind(n){super.bind(n),n.target=pl.TEXTURE_CUBE_MAP}addBaseTextureAt(n,e,t){if(void 0===t&&(t=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||n.parentTextureArray||Object.keys(n._glTextures).length>0){if(!n.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(n.resource,e)}else n.target=pl.TEXTURE_CUBE_MAP_POSITIVE_X+e,n.parentTextureArray=this.baseTexture,this.items[e]=n;return n.valid&&!this.valid&&this.resize(n.realWidth,n.realHeight),this.items[e]=n,this}upload(n,e,t){const i=this.itemDirtyIds;for(let r=0;r<pc.SIDES;r++){const s=this.items[r];(i[r]<s.dirtyId||t.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(n,s,t),i[r]=s.dirtyId):i[r]<-1&&(n.gl.texImage2D(s.target,0,t.internalFormat,e.realWidth,e.realHeight,0,e.format,t.type,null),i[r]=-1))}return!0}static test(n){return Array.isArray(n)&&n.length===pc.SIDES}};let u1=pc;u1.SIDES=6;class c1 extends uo{constructor(e,t){if(t=t||{},"string"==typeof e){const i=new Image;uo.crossOrigin(i,e,t.crossorigin),i.src=e,e=i}super(e),!e.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(t.createBitmap??se.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this.bitmap=null,this._load=null,!1!==t.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((t,i)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,t(this.createBitmap?this.process():this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{i(o),this.onError.emit(o)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const t=globalThis.createImageBitmap;return this._process=fetch(e.src,{mode:e.crossOrigin&&"anonymous"!==e.crossOrigin?"no-cors":"cors"}).then(r=>r.blob()).then(r=>t(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===xr.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,t,i){if("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,t,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,t,i,this.bitmap),!this.preserveBitmap){let r=!0;const s=t._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==t.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}const mf=class extends uo{constructor(n,e){e=e||{},super(se.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=n,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(n=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),n(this)},mf.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const n=new Image;uo.crossOrigin(n,this.svg,this._crossorigin),n.src=this.svg,n.onerror=e=>{!this._resolve||(n.onerror=null,this.onError.emit(e))},n.onload=()=>{if(!this._resolve)return;const e=n.width,t=n.height;if(!e||!t)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,r=t*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/t*e,r=this._overrideHeight||this._overrideWidth/e*t),i=Math.round(i),r=Math.round(r);const s=this.source;s.width=i,s.height=r,s._pixiId=`canvas_${Qo()}`,s.getContext("2d").drawImage(n,0,0,e,t,0,0,i,r),this._resolve(),this._resolve=null}}static getSize(n){const e=mf.SVG_SIZE.exec(n),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(n,e){return"svg"===e||"string"==typeof n&&n.startsWith("data:image/svg+xml")||"string"==typeof n&&mf.SVG_XML.test(n)}};let gc=mf;gc.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,gc.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const iv=class extends uo{constructor(n,e){if(e=e||{},!(n instanceof HTMLVideoElement)){const t=document.createElement("video");t.setAttribute("preload","auto"),t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline",""),"string"==typeof n&&(n=[n]),uo.crossOrigin(t,n[0].src||n[0],e.crossorigin);for(let r=0;r<n.length;++r){const s=document.createElement("source");let{src:o,mime:a}=n[r];o=o||n[r];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||iv.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,t.appendChild(s)}n=t}super(n),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(n=0){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-Hn.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}load(){if(this._load)return this._load;const n=this.source;return(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0),n.addEventListener("play",this._onPlayStart.bind(this)),n.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(n.addEventListener("canplay",this._onCanPlay),n.addEventListener("canplaythrough",this._onCanPlay),n.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,n.load())}),this._load}_onError(n){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(n)}_isSourcePlaying(){const n=this.source;return!n.paused&&!n.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Hn.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Hn.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const n=this.source;n.removeEventListener("canplay",this._onCanPlay),n.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(n.videoWidth,n.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&n.play()}dispose(){this._isConnectedToTicker&&(Hn.shared.remove(this.update,this),this._isConnectedToTicker=!1);const n=this.source;n&&(n.removeEventListener("error",this._onError,!0),n.pause(),n.src="",n.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(n){n!==this._autoUpdate&&(this._autoUpdate=n,!this._autoUpdate&&this._isConnectedToTicker?(Hn.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Hn.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(n){n!==this._updateFPS&&(this._updateFPS=n)}static test(n,e){return globalThis.HTMLVideoElement&&n instanceof HTMLVideoElement||iv.TYPES.includes(e)}};let rv=iv;function h1(n,e,t,i,r,s,o){try{var a=n[s](o),l=a.value}catch(u){return void t(u)}a.done?e(l):Promise.resolve(l).then(i,r)}function et(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function o(l){h1(s,i,r,o,a,"next",l)}function a(l){h1(s,i,r,o,a,"throw",l)}o(void 0)})}}rv.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],rv.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class bl extends uo{constructor(e,t){var i=(...r)=>{super(...r)};t=t||{},"string"==typeof e?(i(bl.EMPTY),this.url=e):(i(e),this.url=null),this.crossOrigin=t.crossOrigin??!0,this.alphaMode="number"==typeof t.alphaMode?t.alphaMode:null,this._load=null,!1!==t.autoLoad&&this.load()}load(){var e=this;return this._load||(this._load=new Promise(function(){var t=et(function*(i,r){if(null!==e.url)try{const s=yield se.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});if(e.destroyed)return;const o=yield s.blob();if(e.destroyed)return;const a=yield createImageBitmap(o,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===xr.UNPACK?"premultiply":"none"});if(e.destroyed)return;e.source=a,e.update(),i(e)}catch(s){if(e.destroyed)return;r(s),e.onError.emit(s)}else i(e)});return function(i,r){return t.apply(this,arguments)}}())),this._load}upload(e,t,i){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(t.alphaMode=this.alphaMode),super.upload(e,t,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return bl._EMPTY=bl._EMPTY??se.ADAPTER.createCanvas(0,0),bl._EMPTY}}nv.push(bl,c1,class zz extends uo{constructor(e){super(e)}static test(e){const{OffscreenCanvas:t}=globalThis;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},rv,gc,dc,u1,class Wz extends l1{constructor(e,t){const{width:i,height:r}=t||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:r}),s&&this.initFromArray(s,t)}addBaseTextureAt(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}bind(e){super.bind(e),e.target=pl.TEXTURE_2D_ARRAY}upload(e,t,i){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,t.format,i.type,null);for(let l=0;l<r;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,t.format,i.type,u.resource.source))}return!0}});class Xz extends dc{upload(e,t,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===xr.UNPACK);const s=t.realWidth,o=t.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(t.target,0,0,0,s,o,t.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,this.data)),!0}}class sv{constructor(e,t){this.width=Math.round(e||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Dr("disposeFramebuffer"),this.multisample=Vn.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,t){return this.colorTextures[e]=t||new Vt(null,{scaleMode:Ms.NEAREST,resolution:1,mipmap:Kr.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Vt(new Xz(null,{width:this.width,height:this.height}),{scaleMode:Ms.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Kr.OFF,format:le.DEPTH_COMPONENT,type:Ve.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(e/s,t/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,t/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class d1 extends Vt{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=Vn.NONE),super(null,e),this.mipmap=Kr.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new sv(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class f1{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,t,i){const r=t.width,s=t.height;if(i){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,u=e.y/s+a;i=bn.add(i,bn.NW),this.x0=l+o*bn.uX(i),this.y0=u+a*bn.uY(i),i=bn.add(i,2),this.x1=l+o*bn.uX(i),this.y1=u+a*bn.uY(i),i=bn.add(i,2),this.x2=l+o*bn.uX(i),this.y2=u+a*bn.uY(i),i=bn.add(i,2),this.x3=l+o*bn.uX(i),this.y3=u+a*bn.uY(i)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const p1=new f1;function _f(n){n.destroy=function(){},n.on=function(){},n.once=function(){},n.emit=function(){}}class xe extends uc{constructor(e,t,i,r,s,o){if(super(),this.noFrame=!1,t||(this.noFrame=!0,t=new Ot(0,0,1,1)),e instanceof xe&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=r,this.valid=!1,this._uvs=p1,this.uvMatrix=null,this.orig=i||t,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new bt(o.x,o.y):new bt(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=t:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:t}=this.baseTexture;t?.url&&Mi[t.url]&&xe.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,xe.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),t=this._frame===this.orig?e:this.orig.clone(),i=new xe(this.baseTexture,!this.noFrame&&e,t,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===p1&&(this._uvs=new f1),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,t={},i=se.STRICT_TEXTURE_CACHE){const r="string"==typeof e;let s=null;r?s=e:e instanceof Vt?(e.cacheId||(e.cacheId=`${t?.pixiIdPrefix||"pixiid"}-${Qo()}`,Vt.addToCache(e,e.cacheId)),s=e.cacheId):(e._pixiId||(e._pixiId=`${t?.pixiIdPrefix||"pixiid"}_${Qo()}`),s=e._pixiId);let o=Mi[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return o||e instanceof Vt?!o&&e instanceof Vt&&(o=new xe(e),xe.addToCache(o,s)):(t.resolution||(t.resolution=lo(e)),o=new xe(new Vt(e,t)),o.baseTexture.cacheId=s,Vt.addToCache(o.baseTexture,s),xe.addToCache(o,s)),o}static fromURL(e,t){const i=Object.assign({autoLoad:!1},t?.resourceOptions),r=xe.from(e,Object.assign({resourceOptions:i},t),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,t,i,r){return new xe(Vt.fromBuffer(e,t,i,r))}static fromLoader(e,t,i,r){const s=new Vt(e,Object.assign({scaleMode:se.SCALE_MODE,resolution:lo(t)},r)),{resource:o}=s;o instanceof c1&&(o.url=t);const a=new xe(s);return i||(i=t),Vt.addToCache(a.baseTexture,i),xe.addToCache(a,i),i!==t&&(Vt.addToCache(a.baseTexture,t),xe.addToCache(a,t)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Mi[t]&&Mi[t]!==e&&console.warn(`Texture added to the cache with an id [${t}] that already had an entry`),Mi[t]=e)}static removeFromCache(e){if("string"==typeof e){const t=Mi[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete Mi[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)Mi[e.textureCacheIds[t]]===e&&delete Mi[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:t,y:i,width:r,height:s}=e,o=t+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${t} + ${r} = ${t+r} > ${this.baseTexture.width} ${o&&a?"and":"or"} Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`);this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return xe._EMPTY||(xe._EMPTY=new xe(new Vt),_f(xe._EMPTY),_f(xe._EMPTY.baseTexture)),xe._EMPTY}static get WHITE(){if(!xe._WHITE){const e=se.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),xe._WHITE=new xe(Vt.from(e)),_f(xe._WHITE),_f(xe._WHITE.baseTexture)}return xe._WHITE}}class co extends xe{constructor(e,t){super(e,t),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,t,i=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:t}=this;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}static create(e){return new co(new d1(e))}}let qz=(()=>{class n{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,r=Vn.NONE){const s=new d1(Object.assign({width:t,height:i,resolution:1,multisample:r},this.textureOptions));return new co(s)}getOptimalTexture(t,i,r=1,s=Vn.NONE){let o;t=Math.ceil(t*r-1e-6),i=Math.ceil(i*r-1e-6),this.enableFullScreen&&t===this._pixelsWidth&&i===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(t=pf(t)))<<16|65535&(i=pf(i)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(t,i,s)),a.filterPoolKey=o,a.setResolution(r),a}getFilterTexture(t,i,r){const s=this.getOptimalTexture(t.width,t.height,i||t.resolution,r||Vn.NONE);return s.filterFrame=t.filterFrame,s}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=!1!==t)for(const i in this.texturePool){const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}return n.SCREEN_KEY=-1,n})();class yf{constructor(e,t=0,i=!1,r=Ve.FLOAT,s,o,a){this.buffer=e,this.size=t,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a}destroy(){this.buffer=null}static from(e,t,i,r,s){return new yf(e,t,i,r,s)}}let Yz=0;class Pn{constructor(e,t=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=t,this.id=Yz++,this.disposeRunner=new Dr("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Qr.ELEMENT_ARRAY_BUFFER:Qr.ARRAY_BUFFER}get index(){return this.type===Qr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Pn(e)}}const Kz={Float32Array,Uint32Array,Int32Array,Uint8Array},g1={5126:4,5123:2,5121:1};let Qz=0;const Jz={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ho{constructor(e=[],t={}){this.buffers=e,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=Qz++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Dr("disposeGeometry"),this.refCount=0}addAttribute(e,t,i=0,r=!1,s,o,a,l=!1){if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Pn||(t instanceof Array&&(t=new Float32Array(t)),t=new Pn(t));const u=e.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],t,i,r,s);return this}let c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new yf(c,i,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Pn||(e instanceof Array&&(e=new Uint16Array(e)),e=new Pn(e)),e.type=Qr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],t=[],i=new Pn;let r;for(r in this.attributes){const s=this.attributes[r];e.push(this.buffers[s.buffer].data),t.push(s.size*g1[s.type]/4),s.buffer=0}for(i.data=function Zz(n,e){let t=0,i=0;const r={};for(let l=0;l<n.length;l++)i+=e[l],t+=n[l].length;const s=new ArrayBuffer(4*t);let o=null,a=0;for(let l=0;l<n.length;l++){const u=e[l],c=n[l],h=tv(c);r[h]||(r[h]=new Kz[h](s)),o=r[h];for(let d=0;d<c.length;d++)o[(d/u|0)*i+a+d%u]=c[d];a+=u}return new Float32Array(s)}(e,t),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ho;for(let t=0;t<this.buffers.length;t++)e.buffers[t]=new Pn(this.buffers[t].data.slice(0));for(const t in this.attributes){const i=this.attributes[t];e.attributes[t]=new yf(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Qr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const t=new ho,i=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new(Jz[tv(o.buffers[a].data)])(r[a]),t.buffers[a]=new Pn(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(t.attributes=o.attributes,o.indexBuffer){t.indexBuffer=t.buffers[o.buffers.indexOf(o.indexBuffer)],t.indexBuffer.type=Qr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(const h in o.attributes){const d=o.attributes[h];(0|d.buffer)===c&&(l+=d.size*g1[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let g=0;g<d.length;g++)t.indexBuffer.data[g+u]+=a;a+=e[h].buffers[c].data.length/l,u+=d.length}}return t}}class e6 extends ho{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class m1 extends ho{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Pn(this.vertices),this.uvBuffer=new Pn(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,t){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+t.width/e.width,this.uvs[3]=r,this.uvs[4]=i+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=i,this.uvs[7]=r+t.height/e.height,i=t.x,r=t.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+t.width,this.vertices[3]=r,this.vertices[4]=i+t.width,this.vertices[5]=r+t.height,this.vertices[6]=i,this.vertices[7]=r+t.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let t6=0;class Ir{constructor(e,t,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=t6++,this.static=!!t,this.ubo=!!i,e instanceof Pn?(this.buffer=e,this.buffer.type=Qr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Pn(new Float32Array(1)),this.buffer.type=Qr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,t,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new Ir(t,i)}static from(e,t,i){return new Ir(e,t,i)}static uboFrom(e,t){return new Ir(e,t??!0,!0)}}class n6{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Vn.NONE,this.sourceFrame=new Ot,this.destinationFrame=new Ot,this.bindingSourceFrame=new Ot,this.bindingDestinationFrame=new Ot,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const vf=[new bt,new bt,new bt,new bt],ov=new pn;class _1{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new qz,this.statePool=[],this.quad=new e6,this.quadUv=new m1,this.tempRect=new Ot,this.activeState={},this.globalUniforms=new Ir({outputFrame:new Ot,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,t){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new n6,o=this.renderer.renderTexture;let a=t[0].resolution,l=t[0].multisample,u=t[0].padding,c=t[0].autoFit,h=t[0].legacy??!0;for(let m=1;m<t.length;m++){const y=t[m];a=Math.min(a,y.resolution),l=Math.min(l,y.multisample),u=this.useMaxPadding?Math.max(u,y.padding):u+y.padding,c=c&&y.autoFit,h=h||(y.legacy??!0)}1===r.length&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=a,s.multisample=l,s.legacy=h,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(ov.copyFrom(i.projection.transform).invert(),d),c?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=t,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const g=this.tempRect;g.x=0,g.y=0,g.width=s.sourceFrame.width,g.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,g),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,t=e.pop(),i=t.filters;this.activeState=t;const r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*t.resolution),o[1]=Math.round(s[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*s[2]-.5*o[2],a[3]=t.sourceFrame.height*s[3]-.5*o[3],t.legacy){const u=r.filterArea;u[0]=t.destinationFrame.width,u[1]=t.destinationFrame.height,u[2]=t.sourceFrame.x,u[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,t.renderTexture,l.renderTexture,Zr.BLEND,t),this.returnFilterTexture(t.renderTexture);else{let u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<i.length-1;++h){1===h&&t.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,t.resolution),c.filterFrame=u.filterFrame),i[h].apply(this,u,c,Zr.CLEAR,t);const d=u;u=c,c=d}i[h].apply(this,u,l.renderTexture,Zr.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}bindAndClear(e,t=Zr.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(t===Zr.CLEAR||t===Zr.BLIT&&(1&r.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,t,i,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Yr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Yr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,t){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=t._texture,o=e.set(r.width,0,0,r.height,i.x,i.y),a=t.worldTransform.copyTo(pn.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(t.anchor.x,t.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,t,i=1,r=Vn.NONE){return this.texturePool.getOptimalTexture(e,t,i,r)}getFilterTexture(e,t,i){if("number"==typeof e){const s=e;e=t,t=s}const r=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,t||e.resolution,i||Vn.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,t){const i=vf[0],r=vf[1],s=vf[2],o=vf[3];i.set(t.left,t.top),r.set(t.left,t.bottom),s.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(i,i),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,r.x,s.x,o.x),l=Math.min(i.y,r.y,s.y,o.y),u=Math.max(i.x,r.x,s.x,o.x),c=Math.max(i.y,r.y,s.y,o.y);t.x=a,t.y=l,t.width=u-a,t.height=c-l}roundFrame(e,t,i,r,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(s=s?ov.copyFrom(s):ov.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(t),this.transformAABB(s.invert(),e)}}}_1.extension={type:ve.RendererSystem,name:"filter"},Le.add(_1);class bf{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class y1{constructor(e){this.renderer=e,this.emptyRenderer=new bf(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,t){const{boundTextures:i}=this.renderer.texture;for(let r=t-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,t,i,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const c=s[u],h=c._batchLocation;if(h>=0&&h<r&&t[h]===c)o[u]=h;else for(;l<r;){const d=t[l];if(!d||d._batchEnabled!==i||d._batchLocation!==l){o[u]=l,c._batchLocation=l,t[l]=c;break}l++}}}destroy(){this.renderer=null}}y1.extension={type:ve.RendererSystem,name:"batch"},Le.add(y1);let v1=0;class b1{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=v1++}init(e){if(e.context)this.initFromContext(e.context);else{const t=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=v1++,this.renderer.runners.contextChange.emit(e);const t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const t=this.createContext(this.renderer.view,e);this.initFromContext(t)}createContext(e,t){let i;if(se.PREFER_ENV>=Xo.WEBGL2&&(i=e.getContext("webgl2",t)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const t=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),t&&!t.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}b1.extension={type:ve.RendererSystem,name:"context"},Le.add(b1);class i6{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Vn.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const r6=new Ot;class E1{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new sv(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ot,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let t=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;se.PREFER_ENV===Xo.WEBGL_LEGACY&&(t=null,i=null),t?e.drawBuffers=r=>t.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,t,i=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){const o=t.width>>i,l=o/t.width;this.setViewport(t.x*l,t.y*l,o,t.height>>i)}else this.setViewport(0,0,e.width>>i,e.height>>i)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,t,i,r){const s=this.viewport;e=Math.round(e),t=Math.round(t),i=Math.round(i),r=Math.round(r),(s.width!==i||s.height!==r||s.x!==e||s.y!==t)&&(s.x=e,s.y=t,s.width=i,s.height=r,this.gl.viewport(e,t,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,t,i,r,s=Uy.COLOR|Uy.DEPTH){const{gl:o}=this;o.clearColor(e,t,i,r),o.clear(s)}initFramebuffer(e){const{gl:t}=this,i=new i6(t.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:t}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,i.stencil),i.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));const r=e.colorTextures;let s=r.length;t.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&i.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,i.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,t){const{gl:i}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),0===l&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,t),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:t}=this;let i=Vn.NONE;if(e<=1||null===t)return i;for(let r=0;r<t.length;r++)if(t[r]<=e){i=t[r];break}return 1===i&&(i=Vn.NONE),i}blit(e,t,i){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(2!==s.context.webGLVersion||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const c=r.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new sv(r.width,r.height),l.blitFramebuffer.addColorTexture(0,c)),(e=l.blitFramebuffer).colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||((t=r6).width=r.width,t.height=r.height),i||(i=t);const u=t.width===i.width&&t.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}disposeFramebuffer(e,t){const i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(e){const t=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<t.length;i++)this.disposeFramebuffer(t[i],e)}forceStencil(){const e=this.current;if(!e)return;const t=e.glFramebuffers[this.CONTEXT_UID];if(!t||t.stencil)return;e.stencil=!0;const i=e.width,r=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),t.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,t.multisample,s.DEPTH24_STENCIL8,i,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,r),t.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ot}destroy(){this.renderer=null}}E1.extension={type:ve.RendererSystem,name:"framebuffer"},Le.add(E1);const av={5126:4,5123:2,5121:1};class w1{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){let i=this.renderer.context.extensions.vertexArrayObject;se.PREFER_ENV===Xo.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==t.webGLVersion){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>i.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>i.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}bind(e,t){t=t||this.renderer.shader.shader;const{gl:i}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[t.program.id]||this.initGeometryVao(e,t,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,t=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++)t.update(e.buffers[i])}checkCompatibility(e,t){const i=e.attributes,r=t.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,t){const i=e.attributes,r=t.attributeData,s=["g",e.id];for(const o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,t,i=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[s]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[a.id]=c,c;const h=e.buffers,d=e.attributes,g={},m={};for(const y in h)g[y]=0,m[y]=0;for(const y in d)!d[y].size&&a.attributeData[y]?d[y].size=a.attributeData[y].size:d[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),g[d[y].buffer]+=d[y].size*av[d[y].type];for(const y in d){const v=d[y],b=v.size;void 0===v.stride&&(v.stride=g[v.buffer]===b*av[v.type]?0:g[v.buffer]),void 0===v.start&&(v.start=m[v.buffer],m[v.buffer]+=b*av[v.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let y=0;y<h.length;y++){const v=h[y];o.bind(v),i&&v._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,r.bindVertexArray(null),o.unbind(Qr.ARRAY_BUFFER),c}disposeGeometry(e,t){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),i){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!t&&o.dispose(s[a],t))}if(!t)for(const a in i)if("g"===a[0]){const l=i[a];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const t=Object.keys(this.managedGeometries);for(let i=0;i<t.length;i++)this.disposeGeometry(this.managedGeometries[t[i]],e)}activateVao(e,t){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const c=a[u],h=o[c.buffer],d=h._glBuffers[r];if(t.attributeData[u]){l!==d&&(s.bind(h),l=d);const g=t.attributeData[u].location;if(i.enableVertexAttribArray(g),i.vertexAttribPointer(g,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(g,1)}}}}draw(e,t,i,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,t||o.indexBuffer.data.length,l,(i||0)*a,r||1):s.drawElements(e,t||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,t||o.getSize(),r||1):s.drawArrays(e,i,t||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}w1.extension={type:ve.RendererSystem,name:"geometry"},Le.add(w1);class s6{constructor(e=null){this.type=zn.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=se.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=zn.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}const C1={};let wf,Ef=C1;function S1(n,e,t){if("precision"!==n.substring(0,9)){let i=e;return e===lr.HIGH&&t!==lr.HIGH&&(i=lr.MEDIUM),`precision ${i} float;\n${n}`}return t!==lr.HIGH&&"precision highp"===n.substring(0,15)?n.replace("precision highp","precision mediump"):n}const l6={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function T1(n){return l6[n]}let Cf=null;const x1={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function D1(n,e){if(!Cf){const t=Object.keys(x1);Cf={};for(let i=0;i<t.length;++i){const r=t[i];Cf[n[r]]=x1[r]}}return Cf[e]}const El=[{test:n=>"float"===n.type&&1===n.size&&!n.isArray,code:n=>`\n            if(uv["${n}"] !== ud["${n}"].value)\n            {\n                ud["${n}"].value = uv["${n}"]\n                gl.uniform1f(ud["${n}"].location, uv["${n}"])\n            }\n            `},{test:(n,e)=>!("sampler2D"!==n.type&&"samplerCube"!==n.type&&"sampler2DArray"!==n.type||1!==n.size||n.isArray||null!=e&&void 0===e.castToBaseTexture),code:n=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${n}"], t);\n\n            if(ud["${n}"].value !== t)\n            {\n                ud["${n}"].value = t;\n                gl.uniform1i(ud["${n}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(n,e)=>"mat3"===n.type&&1===n.size&&!n.isArray&&void 0!==e.a,code:n=>`\n            gl.uniformMatrix3fv(ud["${n}"].location, false, uv["${n}"].toArray(true));\n            `,codeUbo:n=>`\n                var ${n}_matrix = uv.${n}.toArray(true);\n\n                data[offset] = ${n}_matrix[0];\n                data[offset+1] = ${n}_matrix[1];\n                data[offset+2] = ${n}_matrix[2];\n        \n                data[offset + 4] = ${n}_matrix[3];\n                data[offset + 5] = ${n}_matrix[4];\n                data[offset + 6] = ${n}_matrix[5];\n        \n                data[offset + 8] = ${n}_matrix[6];\n                data[offset + 9] = ${n}_matrix[7];\n                data[offset + 10] = ${n}_matrix[8];\n            `},{test:(n,e)=>"vec2"===n.type&&1===n.size&&!n.isArray&&void 0!==e.x,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${n}"].location, v.x, v.y);\n                }`,codeUbo:n=>`\n                v = uv.${n};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:n=>"vec2"===n.type&&1===n.size&&!n.isArray,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${n}"].location, v[0], v[1]);\n                }\n            `},{test:(n,e)=>"vec4"===n.type&&1===n.size&&!n.isArray&&void 0!==e.width,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${n}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:n=>`\n                    v = uv.${n};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:n=>"vec4"===n.type&&1===n.size&&!n.isArray,code:n=>`\n                cv = ud["${n}"].value;\n                v = uv["${n}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${n}"].location, v[0], v[1], v[2], v[3])\n                }`}],u6={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},c6={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},d6=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function f6(n){let e="";for(let t=0;t<n;++t)t>0&&(e+="\nelse "),t<n-1&&(e+=`if(test == ${t}.0){}`);return e}let _6=0;const Sf={};class Os{constructor(e,t,i="pixi-shader",r={}){this.extra={},this.id=_6++,this.vertexSrc=e||Os.defaultVertexSrc,this.fragmentSrc=t||Os.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),Sf[i]?(Sf[i]++,i+=`-${Sf[i]}`):Sf[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=S1(this.vertexSrc,se.PRECISION_VERTEX,lr.HIGH),this.fragmentSrc=S1(this.fragmentSrc,se.PRECISION_FRAGMENT,function a6(){if(!wf){wf=lr.MEDIUM;const n=function o6(){if(Ef===C1||Ef?.isContextLost()){const n=se.ADAPTER.createCanvas();let e;se.PREFER_ENV>=Xo.WEBGL2&&(e=n.getContext("webgl2",{})),e||(e=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Ef=e}return Ef}();n&&n.getShaderPrecisionFormat&&(wf=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision?lr.HIGH:lr.MEDIUM)}return wf}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,t,i){const r=e+t;let s=i1[r];return s||(i1[r]=s=new Os(e,t,i)),s}}class Jr{constructor(e,t){this.uniformBindCount=0,this.program=e,this.uniformGroup=t?t instanceof Ir?t:new Ir(t):new Ir({}),this.disposeRunner=new Dr("disposeShader")}checkUniformExists(e,t){if(t.uniforms[e])return!0;for(const i in t.uniforms){const r=t.uniforms[i];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,t,i){const r=Os.from(e,t);return new Jr(r,i)}}class Ns{constructor(){this.data=0,this.blendMode=Ye.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ye.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new Ns;return e.depthTest=!1,e.blend=!0,e}}class Mr extends Jr{constructor(e,t,i){super(Os.from(e||Mr.defaultVertexSrc,t||Mr.defaultFragmentSrc),i),this.padding=0,this.resolution=se.FILTER_RESOLUTION,this.multisample=se.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new Ns}apply(e,t,i,r,s){e.applyFilter(this,t,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}const A1=new pn;class I1{constructor(e,t){this._texture=e,this.mapCoord=new pn,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t>"u"?.5:t,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,t){void 0===t&&(t=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];t[r]=s*i.a+o*i.c+i.tx,t[r+1]=s*i.b+o*i.d+i.ty}return t}update(e){const t=this._texture;if(!t||!t.valid||!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;const i=t._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=t.orig,s=t.trim;s&&(A1.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(A1));const o=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/o.width,a[1]=(t._frame.y+l+u)/o.height,a[2]=(t._frame.x+t._frame.width-l+u)/o.width,a[3]=(t._frame.y+t._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0}}class w6 extends Mr{constructor(e,t,i){let r=null;"string"!=typeof e&&void 0===t&&void 0===i&&(r=e,e=void 0,t=void 0,i=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",t||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i),this.maskSprite=r,this.maskMatrix=new pn}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,t,i,r){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new I1(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,i,r))}}class M1{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,t){let i=t;if(!i.isMaskData){const s=this.maskDataPool.pop()||new s6;s.pooled=!0,s.maskObject=t,i=s}const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==zn.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case zn.SCISSOR:this.renderer.scissor.push(i);break;case zn.STENCIL:this.renderer.stencil.push(i);break;case zn.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case zn.COLOR:this.pushColorMask(i)}i.type===zn.SPRITE&&this.maskStack.push(i)}pop(e){const t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case zn.SCISSOR:this.renderer.scissor.pop(t);break;case zn.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case zn.SPRITE:this.popSpriteMask(t);break;case zn.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){const i=this.maskStack[this.maskStack.length-1];i.type===zn.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const t=e.maskObject;e.type=t?t.isSprite?zn.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?zn.SCISSOR:zn.STENCIL:zn.COLOR}pushSpriteMask(e){const{maskObject:t}=e,i=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new w6]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const c=o.current;a=e.resolution||c.resolution,l=e.multisample??c.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=t;const u=i.filterArea;i.filterArea=t.getBounds(!0),s.filter.push(i,r),i.filterArea=u,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const t=e._colorMask,i=e._colorMask=t&e.colorMask;i!==t&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}popColorMask(e){const i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}destroy(){this.renderer=null}}M1.extension={type:ve.RendererSystem,name:"mask"},Le.add(M1);class R1{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:t}=this.renderer,i=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==i&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const P1=new pn,O1=[],Tf=class extends R1{constructor(n){super(n),this.glConst=se.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const n=this.maskStack[this.maskStack.length-1];return n?n._scissorCounter:0}calcScissorRect(n){if(n._scissorRectLocal)return;const e=n._scissorRect,{maskObject:t}=n,{renderer:i}=this,r=i.renderTexture,s=t.getBounds(!0,O1.pop()??new Ot);this.roundFrameToPixels(s,r.current?r.current.resolution:i.resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),e&&s.fit(e),n._scissorRectLocal=s}static isMatrixRotated(n){if(!n)return!1;const{a:e,b:t,c:i,d:r}=n;return(Math.abs(t)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4)}testScissor(n){const{maskObject:e}=n;if(!e.isFastRect||!e.isFastRect()||Tf.isMatrixRotated(e.worldTransform)||Tf.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(n);const t=n._scissorRectLocal;return t.width>0&&t.height>0}roundFrameToPixels(n,e,t,i,r){Tf.isMatrixRotated(r)||((r=r?P1.copyFrom(r):P1.identity()).translate(-t.x,-t.y).scale(i.width/t.width,i.height/t.height).translate(i.x,i.y),this.renderer.filter.transformAABB(r,n),n.fit(i),n.x=Math.round(n.x*e),n.y=Math.round(n.y*e),n.width=Math.round(n.width*e),n.height=Math.round(n.height*e))}push(n){n._scissorRectLocal||this.calcScissorRect(n);const{gl:e}=this.renderer;n._scissorRect||e.enable(e.SCISSOR_TEST),n._scissorCounter++,n._scissorRect=n._scissorRectLocal,this._useCurrent()}pop(n){const{gl:e}=this.renderer;n&&O1.push(n._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const n=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?n.y:this.renderer.height-n.height-n.y,this.renderer.gl.scissor(n.x,e,n.width,n.height)}};let N1=Tf;N1.extension={type:ve.RendererSystem,name:"scissor"},Le.add(N1);class F1 extends R1{constructor(e){super(e),this.glConst=se.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const t=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;0!==s&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==s&&(e._colorMask=s,i.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()}pop(e){const t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;0!==r&&(i._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(i._colorMask=r,t.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}F1.extension={type:ve.RendererSystem,name:"stencil"},Le.add(F1);class L1{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new pn,this.transform=null}update(e,t,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,t,i,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/t.width*2,s.d=o*(1/t.height*2),s.tx=-1-t.x*s.a,s.ty=-o-t.y*s.d}setTransform(e){}destroy(){this.renderer=null}}L1.extension={type:ve.RendererSystem,name:"projection"},Le.add(L1);const Jo=new Ot,mc=new Ot;class k1{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ot,this.destinationFrame=new Ot,this.viewportFrame=new Ot}bind(e=null,t,i){const r=this.renderer;let s,o,a;this.current=e,e?(s=e.baseTexture,a=s.resolution,t||(Jo.width=e.frame.width,Jo.height=e.frame.height,t=Jo),i||(mc.x=e.frame.x,mc.y=e.frame.y,mc.width=t.width,mc.height=t.height,i=mc),o=s.framebuffer):(a=r.resolution,t||(Jo.width=r._view.screen.width,Jo.height=r._view.screen.height,t=Jo),i||((i=Jo).width=t.width,i.height=t.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,t,a,!o),this.renderer.mask.setMaskStack(e?s.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(i)}clear(e,t){e=this.current?e||this.current.baseTexture.clearColor:e||this.renderer.background.colorRgba;const i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==r.width||i.height!==r.height;if(s){let{x:o,y:a,width:l,height:u}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],t),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}function C6(n,e,t,i,r){t.buffer.update(r)}k1.extension={type:ve.RendererSystem,name:"renderTexture"},Le.add(k1);const S6={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},B1={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};class A6{constructor(e,t){this.program=e,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function U1(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}function pv(n){const e=new Array(n);for(let t=0;t<e.length;t++)e[t]=!1;return e}function V1(n,e){switch(n){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return pv(2*e);case"bvec3":return pv(3*e);case"bvec4":return pv(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function H1(n,e){const t=n.getShaderSource(e).split("\n").map((u,c)=>`${c}: ${u}`),i=n.getShaderInfoLog(e),r=i.split("\n"),s={},o=r.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>!(!u||s[u]||(s[u]=!0,0))),a=[""];o.forEach(u=>{t[u-1]=`%c${t[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=t.join("\n");a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}let _c,N6=0;const xf={textureCount:0,uboCount:0};class G1{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=N6++}systemCheck(){if(!function O6(){if("boolean"==typeof _c)return _c;try{_c=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{_c=!1}return _c}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),t||(xf.textureCount=0,xf.uboCount=0,this.syncUniformGroup(e.uniformGroup,xf)),r}setUniforms(e){const t=this.shader.program;t.syncUniforms(t.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)}syncUniformGroup(e,t){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,t))}syncUniforms(e,t,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function h6(n,e){const t=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in n.uniforms){const r=e[i];if(!r){n.uniforms[i]?.group&&t.push(n.uniforms[i].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${i}, syncData);\n                    `);continue}const s=n.uniforms[i];let o=!1;for(let a=0;a<El.length;a++)if(El[a].test(r,s)){t.push(El[a].code(i,s)),o=!0;break}if(!o){const l=(1!==r.size||r.isArray?c6:u6)[r.type].replace("location",`ud["${i}"].location`);t.push(`\n            cu = ud["${i}"];\n            cv = cu.value;\n            v = uv["${i}"];\n            ${l};`)}}return new Function("ud","uv","renderer","syncData",t.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,t){const i=this.getGlProgram();if(!e.static||0!==e.dirtyId||!i.uniformGroups[e.id]){e.dirtyId=0;const r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,t);e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,xf,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[t])}createSyncBufferGroup(e,t,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(t.program,i);t.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=function D6(n,e){if(!n.autoManage)return{size:0,syncFunc:C6};const t=function x6(n,e){const t=[];for(const i in n)e[i]&&t.push(e[i]);return t.sort((i,r)=>i.index-r.index),t}(n.uniforms,e),{uboElements:i,size:r}=function T6(n){const e=n.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let t=0,i=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(t=B1[o.data.type],o.data.size>1&&(t=Math.max(t,16)*o.data.size),o.dataLen=t,i%t!=0&&i<16){const a=i%t%16;i+=a,r+=a}i+t>16?(r=16*Math.ceil(r/16),o.offset=r,r+=t,i=t):(o.offset=r,i+=t,r+=t)}return r=16*Math.ceil(r/16),{uboElements:e,size:r}}(t),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<i.length;o++){const a=i[o],l=n.uniforms[a.data.name],u=a.data.name;let c=!1;for(let h=0;h<El.length;h++){const d=El[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,El[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const h=T1(a.data.type),d=Math.max(B1[a.data.type]/16,1),g=h/d;s.push(`\n                cv = ud.${u}.value;\n                v = uv.${u};\n                offset = ${a.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${a.data.size*d}; i++)\n                {\n                    for(var j = 0; j < ${g}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-g%4)%4};\n                }\n\n                `)}else s.push(`\n                cv = ud.${u}.value;\n                v = uv.${u};\n                offset = ${a.offset/4};\n                ${S6[a.data.type]};\n                `)}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}getSignature(e,t,i){const r=e.uniforms,s=[`${i}-`];for(const o in r)s.push(o),t[o]&&s.push(t[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const i=e.program,r=function P6(n,e){const t=U1(n,n.VERTEX_SHADER,e.vertexSrc),i=U1(n,n.FRAGMENT_SHADER,e.fragmentSrc),r=n.createProgram();n.attachShader(r,t),n.attachShader(r,i);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof n.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):n.transformFeedbackVaryings(r,s.names,"separate"===s.bufferMode?n.SEPARATE_ATTRIBS:n.INTERLEAVED_ATTRIBS)),n.linkProgram(r),n.getProgramParameter(r,n.LINK_STATUS)||function R6(n,e,t,i){n.getProgramParameter(e,n.LINK_STATUS)||(n.getShaderParameter(t,n.COMPILE_STATUS)||H1(n,t),n.getShaderParameter(i,n.COMPILE_STATUS)||H1(n,i),console.error("PixiJS Error: Could not initialize shader."),""!==n.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",n.getProgramInfoLog(e)))}(n,r,t,i),e.attributeData=function I6(n,e){const t={},i=e.getProgramParameter(n,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(n,r);if(s.name.startsWith("gl_"))continue;const o=D1(e,s.type),a={type:o,name:s.name,size:T1(o),location:e.getAttribLocation(n,s.name)};t[s.name]=a}return t}(r,n),e.uniformData=function M6(n,e){const t={},i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const s=e.getActiveUniform(n,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=D1(e,s.type);t[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:V1(l,s.size)}}return t}(r,n),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((u,c)=>u>c?1:-1);for(let u=0;u<l.length;u++)e.attributeData[l[u]].location=u,n.bindAttribLocation(r,u,l[u]);n.linkProgram(r)}n.deleteShader(t),n.deleteShader(i);const o={};for(const l in e.uniformData){const u=e.uniformData[l];o[l]={location:n.getUniformLocation(r,l),value:V1(u.type,u.size)}}return new A6(r,o)}(this.gl,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}G1.extension={type:ve.RendererSystem,name:"shader"},Le.add(G1);const gv=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ye.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Ns,this.defaultState.blend=!0}contextChange(n){this.gl=n,this.blendModes=function F6(n,e=[]){return e[Ye.NORMAL]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.ADD]=[n.ONE,n.ONE],e[Ye.MULTIPLY]=[n.DST_COLOR,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.SCREEN]=[n.ONE,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.OVERLAY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.DARKEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.LIGHTEN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.COLOR_DODGE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.COLOR_BURN]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.HARD_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.SOFT_LIGHT]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.DIFFERENCE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.EXCLUSION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.HUE]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.SATURATION]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.COLOR]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.LUMINOSITY]=[n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.NONE]=[0,0],e[Ye.NORMAL_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.ADD_NPM]=[n.SRC_ALPHA,n.ONE,n.ONE,n.ONE],e[Ye.SCREEN_NPM]=[n.SRC_ALPHA,n.ONE_MINUS_SRC_COLOR,n.ONE,n.ONE_MINUS_SRC_ALPHA],e[Ye.SRC_IN]=[n.DST_ALPHA,n.ZERO],e[Ye.SRC_OUT]=[n.ONE_MINUS_DST_ALPHA,n.ZERO],e[Ye.SRC_ATOP]=[n.DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ye.DST_OVER]=[n.ONE_MINUS_DST_ALPHA,n.ONE],e[Ye.DST_IN]=[n.ZERO,n.SRC_ALPHA],e[Ye.DST_OUT]=[n.ZERO,n.ONE_MINUS_SRC_ALPHA],e[Ye.DST_ATOP]=[n.ONE_MINUS_DST_ALPHA,n.SRC_ALPHA],e[Ye.XOR]=[n.ONE_MINUS_DST_ALPHA,n.ONE_MINUS_SRC_ALPHA],e[Ye.SUBTRACT]=[n.ONE,n.ONE,n.ONE,n.ONE,n.FUNC_REVERSE_SUBTRACT,n.FUNC_ADD],e}(n),this.set(this.defaultState),this.reset()}set(n){if(this.stateId!==(n=n||this.defaultState).data){let e=this.stateId^n.data,t=0;for(;e;)1&e&&this.map[t].call(this,!!(n.data&1<<t)),e>>=1,t++;this.stateId=n.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,n)}forceState(n){n=n||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(n.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,n);this.stateId=n.data}setBlend(n){this.updateCheck(gv.checkBlendMode,n),this.gl[n?"enable":"disable"](this.gl.BLEND)}setOffset(n){this.updateCheck(gv.checkPolygonOffset,n),this.gl[n?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(n){this.gl[n?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(n){this.gl.depthMask(n)}setCullFace(n){this.gl[n?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(n){this.gl.frontFace(this.gl[n?"CW":"CCW"])}setBlendMode(n){if(n===this.blendMode)return;this.blendMode=n;const e=this.blendModes[n],t=this.gl;2===e.length?t.blendFunc(e[0],e[1]):t.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,t.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD))}setPolygonOffset(n,e){this.gl.polygonOffset(n,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(n,e){const t=this.checks.indexOf(n);e&&-1===t?this.checks.push(n):!e&&-1!==t&&this.checks.splice(t,1)}static checkBlendMode(n,e){n.setBlendMode(e.blendMode)}static checkPolygonOffset(n,e){n.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let j1=gv;j1.extension={type:ve.RendererSystem,name:"state"},Le.add(j1);class $1{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=se.GC_MAX_IDLE,this.checkCountMax=se.GC_MAX_CHECK_COUNT,this.mode=se.GC_MODE}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==Hy.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let r=0;r<t.length;r++){const s=t[r];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),t[r]=null,i=!0)}if(i){let r=0;for(let s=0;s<t.length;s++)null!==t[s]&&(t[r++]=t[s]);t.length=r}}unload(e){const i=e._texture;i&&!i.framebuffer&&this.renderer.texture.destroyTexture(i);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}}$1.extension={type:ve.RendererSystem,name:"textureGC"},Le.add($1);class mv{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Ve.UNSIGNED_BYTE,this.internalFormat=le.RGBA,this.samplerType=0}}class W1{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Vt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function G6(n){let e;return e="WebGL2RenderingContext"in globalThis&&n instanceof globalThis.WebGL2RenderingContext?{[Ve.UNSIGNED_BYTE]:{[le.RGBA]:n.RGBA8,[le.RGB]:n.RGB8,[le.RG]:n.RG8,[le.RED]:n.R8,[le.RGBA_INTEGER]:n.RGBA8UI,[le.RGB_INTEGER]:n.RGB8UI,[le.RG_INTEGER]:n.RG8UI,[le.RED_INTEGER]:n.R8UI,[le.ALPHA]:n.ALPHA,[le.LUMINANCE]:n.LUMINANCE,[le.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Ve.BYTE]:{[le.RGBA]:n.RGBA8_SNORM,[le.RGB]:n.RGB8_SNORM,[le.RG]:n.RG8_SNORM,[le.RED]:n.R8_SNORM,[le.RGBA_INTEGER]:n.RGBA8I,[le.RGB_INTEGER]:n.RGB8I,[le.RG_INTEGER]:n.RG8I,[le.RED_INTEGER]:n.R8I},[Ve.UNSIGNED_SHORT]:{[le.RGBA_INTEGER]:n.RGBA16UI,[le.RGB_INTEGER]:n.RGB16UI,[le.RG_INTEGER]:n.RG16UI,[le.RED_INTEGER]:n.R16UI,[le.DEPTH_COMPONENT]:n.DEPTH_COMPONENT16},[Ve.SHORT]:{[le.RGBA_INTEGER]:n.RGBA16I,[le.RGB_INTEGER]:n.RGB16I,[le.RG_INTEGER]:n.RG16I,[le.RED_INTEGER]:n.R16I},[Ve.UNSIGNED_INT]:{[le.RGBA_INTEGER]:n.RGBA32UI,[le.RGB_INTEGER]:n.RGB32UI,[le.RG_INTEGER]:n.RG32UI,[le.RED_INTEGER]:n.R32UI,[le.DEPTH_COMPONENT]:n.DEPTH_COMPONENT24},[Ve.INT]:{[le.RGBA_INTEGER]:n.RGBA32I,[le.RGB_INTEGER]:n.RGB32I,[le.RG_INTEGER]:n.RG32I,[le.RED_INTEGER]:n.R32I},[Ve.FLOAT]:{[le.RGBA]:n.RGBA32F,[le.RGB]:n.RGB32F,[le.RG]:n.RG32F,[le.RED]:n.R32F,[le.DEPTH_COMPONENT]:n.DEPTH_COMPONENT32F},[Ve.HALF_FLOAT]:{[le.RGBA]:n.RGBA16F,[le.RGB]:n.RGB16F,[le.RG]:n.RG16F,[le.RED]:n.R16F},[Ve.UNSIGNED_SHORT_5_6_5]:{[le.RGB]:n.RGB565},[Ve.UNSIGNED_SHORT_4_4_4_4]:{[le.RGBA]:n.RGBA4},[Ve.UNSIGNED_SHORT_5_5_5_1]:{[le.RGBA]:n.RGB5_A1},[Ve.UNSIGNED_INT_2_10_10_10_REV]:{[le.RGBA]:n.RGB10_A2,[le.RGBA_INTEGER]:n.RGB10_A2UI},[Ve.UNSIGNED_INT_10F_11F_11F_REV]:{[le.RGB]:n.R11F_G11F_B10F},[Ve.UNSIGNED_INT_5_9_9_9_REV]:{[le.RGB]:n.RGB9_E5},[Ve.UNSIGNED_INT_24_8]:{[le.DEPTH_STENCIL]:n.DEPTH24_STENCIL8},[Ve.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[le.DEPTH_STENCIL]:n.DEPTH32F_STENCIL8}}:{[Ve.UNSIGNED_BYTE]:{[le.RGBA]:n.RGBA,[le.RGB]:n.RGB,[le.ALPHA]:n.ALPHA,[le.LUMINANCE]:n.LUMINANCE,[le.LUMINANCE_ALPHA]:n.LUMINANCE_ALPHA},[Ve.UNSIGNED_SHORT_5_6_5]:{[le.RGB]:n.RGB},[Ve.UNSIGNED_SHORT_4_4_4_4]:{[le.RGBA]:n.RGBA},[Ve.UNSIGNED_SHORT_5_5_5_1]:{[le.RGBA]:n.RGBA}},e}(e);const t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(let r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new mv(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new mv(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,t=0){const{gl:i}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[t]!==e&&(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[t]=e}else this.currentLocation!==t&&(this.currentLocation=t,i.activeTexture(i.TEXTURE0+t)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[t]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:t,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===e&&(this.currentLocation!==r&&(t.activeTexture(t.TEXTURE0+r),this.currentLocation=r),t.bindTexture(e.target,this.emptyTextures[e.target].texture),i[r]=null)}ensureSamplerType(e){const{boundTextures:t,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=e-1;s>=0;--s){const o=t[s];o&&o._glTextures[r].samplerType!==Vy.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const t=new mv(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}initTextureType(e,t){t.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,t.type=2===this.webGLVersion&&e.type===Ve.HALF_FLOAT?this.gl.HALF_FLOAT:e.type}updateTexture(e){const t=e._glTextures[this.CONTEXT_UID];if(!t)return;const i=this.renderer;if(this.initTextureType(e,t),e.resource?.upload(i,e,t))t.samplerType!==Vy.FLOAT&&(this.hasIntegerTextures=!0);else{const r=e.realWidth,s=e.realHeight,o=i.gl;(t.width!==r||t.height!==s||t.dirtyId<0)&&(t.width=r,t.height=s,o.texImage2D(e.target,0,t.internalFormat,r,s,0,e.format,t.type,null))}e.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(e),t.dirtyId=e.dirtyId}destroyTexture(e,t){const{gl:i}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){const r=this.managedTextures.indexOf(e);-1!==r&&yl(this.managedTextures,r,1)}}updateTextureStyle(e){const t=e._glTextures[this.CONTEXT_UID];!t||(t.mipmap=!!(e.mipmap!==Kr.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,t.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:oo.CLAMP,e.resource?.style(this.renderer,e,t)||this.setStyle(e,t),t.dirtyStyleId=e.dirtyStyleId)}setStyle(e,t){const i=this.gl;if(t.mipmap&&e.mipmap!==Kr.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,t.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Ms.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===Ms.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Ms.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Ms.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}W1.extension={type:ve.RendererSystem,name:"texture"},Le.add(W1);const j6=new Yy;class z1{constructor(e){this.renderer=e,this._tempMatrix=new pn}generateTexture(e,t){const{region:i,...r}=t||{},s=i||e.getLocalBounds(null,!0);0===s.width&&(s.width=1),0===s.height&&(s.height=1);const o=co.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=j6,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}z1.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"textureGenerator"},Le.add(z1);class X1{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color="string"==typeof e.color?Jy(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=ZI(e),cc(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}X1.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"background"},Le.add(X1);class q1{constructor(e){this.renderer=e}init(e){this.screen=new Ot(0,0,e.width,e.height),this.element=e.view||se.ADAPTER.createCanvas(),this.resolution=e.resolution||se.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}q1.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_view"},Le.add(q1);class Y1{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(Ii("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(Ii("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(Ii("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(e){for(const t in e)this.plugins[t]=new e[t](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Y1.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"_plugin"},Le.add(Y1);class $6 extends uc{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const t=(e.priority??[]).filter(r=>e.systems[r]),i=[...t,...Object.keys(e.systems).filter(r=>!t.includes(r))];for(const r of i)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(t=>{this.runners[t]=new Dr(t)})}addSystem(e,t){const i=new e(this);if(this[t])throw new Error(`Whoops! The name "${t}" is already in use`);this[t]=i,this._systemsHash[t]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(e,t){const i=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=i.find(o=>this._systemsHash[o]===r);r[e.name](t[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}class K1{constructor(e){this.renderer=e}run(e){const t=this.renderer;t.emitWithCustomOptions(t.runners.init,e),e.hello&&console.log(`PixiJS 7.0.5 - ${t.rendererLogId} - https://pixijs.com`),t.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}K1.extension={type:[ve.RendererSystem,ve.CanvasRendererSystem],name:"startup"},Le.add(K1);class Z1{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,t){const{gl:i,renderer:r}=this;t&&r.shader.bind(t),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:t,renderer:i,CONTEXT_UID:r}=this,s=t.createTransformFeedback();e._glTransformFeedbacks[r]=s,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];!a||(i.buffer.update(a),a._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,t){const i=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!t&&s.dispose(a,t))}!i||(t||r.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Z1.extension={type:ve.RendererSystem,name:"transformFeedback"},Le.add(Z1);const Q1=[];Le.handleByList(ve.Renderer,Q1);const _v=class extends $6{constructor(n){super(),n=Object.assign({},se.RENDER_OPTIONS,n),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ir({projectionMatrix:new pn},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:_v.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in n&&(Ii("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),n.premultipliedAlpha=n.useContextAlpha&&"notMultiplied"!==n.useContextAlpha,n.backgroundAlpha=!1===n.useContextAlpha?1:n.backgroundAlpha),this.startup.run({hello:n.hello,_plugin:_v.__plugins,background:{alpha:n.backgroundAlpha,color:n.background??n.backgroundColor,clearBeforeRender:n.clearBeforeRender},_view:{height:n.height,width:n.width,autoDensity:n.autoDensity,resolution:n.resolution,view:n.view},context:{antialias:n.antialias,context:n.context,powerPreference:n.powerPreference,premultipliedAlpha:n.premultipliedAlpha,preserveDrawingBuffer:n.preserveDrawingBuffer}})}static test(n){return!n?.forceCanvas&&function q8(){return typeof Qy>"u"&&(Qy=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:se.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!se.ADAPTER.getWebGLRenderingContext())return!1;const t=se.ADAPTER.createCanvas();let i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);const r=!(!i||!i.getContextAttributes().stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}}()),Qy}()}render(n,e){this.objectRenderer.render(n,e)}resize(n,e){this._view.resizeView(n,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(n=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:n}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(n){this._view.resolution=n,this.runners.resolutionChange.emit(n)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ii("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ii("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ii("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ii("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(n){Ii("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=n}get backgroundAlpha(){return Ii("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(n){Ii("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=n}get powerPreference(){return Ii("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(n,e){return this.textureGenerator.generateTexture(n,e)}};let wl=_v;wl.extension={type:ve.Renderer,priority:1},wl.__plugins={},wl.__systems={},Le.handleByMap(ve.RendererPlugin,wl.__plugins),Le.handleByMap(ve.RendererSystem,wl.__systems),Le.add(wl);class yv{constructor(){this.texArray=null,this.blend=0,this.type=Yr.TRIANGLES,this.start=0,this.size=0,this.data=null}}class vv{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class bv{constructor(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class Y6{constructor(e,t){if(this.vertexSrc=e,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},!t.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!t.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=Ir.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Os(this.vertexSrc,r)}const t={tint:new Float32Array([1,1,1,1]),translationMatrix:new pn,default:this.defaultGroupCache[e]};return new Jr(this.programCache[e],t)}generateSampleSrc(e){let t="";t+="\n",t+="\n";for(let i=0;i<e;i++)i>0&&(t+="\nelse "),i<e-1&&(t+=`if(vTextureId < ${i}.5)`),t+="\n{",t+=`\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`,t+="\n}";return t+="\n",t+="\n",t}}class eM extends ho{constructor(e=!1){super(),this._buffer=new Pn(null,e,!1),this._indexBuffer=new Pn(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,Ve.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,Ve.FLOAT).addAttribute("aColor",this._buffer,4,!0,Ve.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,Ve.FLOAT).addIndex(this._indexBuffer)}}const ea=class extends bf{constructor(n){super(n),this.setShaderGenerator(),this.geometryClass=eM,this.vertexSize=6,this.state=Ns.for2d(),this.size=4*se.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),n.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:n=ea.defaultVertexSrc,fragment:e=ea.defaultFragmentTemplate}={}){this.shaderGenerator=new Y6(n,e)}contextChange(){const n=this.renderer.gl;se.PREFER_ENV===Xo.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),se.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function p6(n,e){if(0===n)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const t=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=d6.replace(/%forloop%/gi,f6(n));if(e.shaderSource(t,i),e.compileShader(t),e.getShaderParameter(t,e.COMPILE_STATUS))break;n=n/2|0}return n}(this.MAX_TEXTURES,n)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:n,_textureArrayPool:e}=ea,t=this.size/4,i=Math.floor(t/this.MAX_TEXTURES)+1;for(;n.length<t;)n.push(new yv);for(;e.length<i;)e.push(new vv);for(let r=0;r<this.MAX_TEXTURES;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(n){!n._texture.valid||(this._vertexCount+n.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=n.vertexData.length/2,this._indexCount+=n.indices.length,this._bufferedTextures[this._bufferSize]=n._texture.baseTexture,this._bufferedElements[this._bufferSize++]=n)}buildTexturesAndDrawCalls(){const{_bufferedTextures:n,MAX_TEXTURES:e}=this,t=ea._textureArrayPool,i=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++Vt._globalBatch,a=0,l=t[0],u=0;i.copyBoundTextures(r,e);for(let c=0;c<this._bufferSize;++c){const h=n[c];n[c]=null,h._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,u,c),u=c,l=t[++a],++o),h._batchEnabled=o,h.touched=s,l.elements[l.count++]=h)}l.count>0&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let c=0;c<r.length;c++)r[c]=null;Vt._globalBatch=o}buildDrawCalls(n,e,t){const{_bufferedElements:i,_attributeBuffer:r,_indexBuffer:s,vertexSize:o}=this,a=ea._drawCallPool;let l=this._dcIndex,u=this._aIndex,c=this._iIndex,h=a[l];h.start=this._iIndex,h.texArray=n;for(let d=e;d<t;++d){const g=i[d],y=QI[g._texture.baseTexture.alphaMode?1:0][g.blendMode];i[d]=null,e<d&&h.blend!==y&&(h.size=c-h.start,e=d,h=a[++l],h.texArray=n,h.start=c),this.packInterleavedGeometry(g,r,s,u,c),u+=g.vertexData.length/2*o,c+=g.indices.length,h.blend=y}e<t&&(h.size=c-h.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(n){const e=this.renderer.texture;for(let t=0;t<n.count;t++)e.bind(n.elements[t],n.ids[t]),n.elements[t]=null;n.count=0}updateGeometry(){const{_packedGeometries:n,_attributeBuffer:e,_indexBuffer:t}=this;se.CAN_UPLOAD_SAME_BUFFER?(n[this._flushId]._buffer.update(e.rawBinaryData),n[this._flushId]._indexBuffer.update(t),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,n[this._flushId]=new this.geometryClass),n[this._flushId]._buffer.update(e.rawBinaryData),n[this._flushId]._indexBuffer.update(t),this.renderer.geometry.bind(n[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const n=this._dcIndex,{gl:e,state:t}=this.renderer,i=ea._drawCallPool;let r=null;for(let s=0;s<n;s++){const{texArray:o,type:a,size:l,start:u,blend:c}=i[s];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,t.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,2*u)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),se.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]&&this._packedGeometries[n].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(n){const e=pf(Math.ceil(n/8)),t=n1(e),i=8*e;this._aBuffers.length<=t&&(this._iBuffers.length=t+1);let r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new bv(i*this.vertexSize*4)),r}getIndexBuffer(n){const e=pf(Math.ceil(n/12)),t=n1(e),i=12*e;this._iBuffers.length<=t&&(this._iBuffers.length=t+1);let r=this._iBuffers[t];return r||(this._iBuffers[t]=r=new Uint16Array(i)),r}packInterleavedGeometry(n,e,t,i,r){const{uint32View:s,float32View:o}=e,a=i/this.vertexSize,l=n.uvs,u=n.indices,c=n.vertexData,h=n._texture.baseTexture._batchLocation,d=Math.min(n.worldAlpha,1),g=d<1&&n._texture.baseTexture.alphaMode?ev(n._tintRGB,d):n._tintRGB+(255*d<<24);for(let m=0;m<c.length;m+=2)o[i++]=c[m],o[i++]=c[m+1],o[i++]=l[m],o[i++]=l[m+1],s[i++]=g,o[i++]=h;for(let m=0;m<u.length;m++)t[r++]=a+u[m]}};let Df=ea;Df.extension={name:"batch",type:ve.RendererPlugin},Df._drawCallPool=[],Df._textureArrayPool=[],Le.add(Df);class Q6{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class tM{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:t}=this;t.bindBuffer(e,null)}bindBufferBase(e,t){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[t]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,i.bindBufferBase(i.UNIFORM_BUFFER,t,s.buffer)}}bindBufferRange(e,t,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,256*i,256)}update(e){const{gl:t,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{const s=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,s)}}dispose(e,t){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(t||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const t=Object.keys(this.managedBuffers);for(let i=0;i<t.length;i++)this.dispose(this.managedBuffers[t[i]],e)}createGLBuffer(e){const{CONTEXT_UID:t,gl:i}=this;return e._glBuffers[t]=new Q6(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}tM.extension={type:ve.RendererSystem,name:"buffer"},Le.add(tM);class nM{constructor(e){this.renderer=e}contextChange(e){let t;if(1===this.renderer.context.webGLVersion){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}this.multisample=t>=Vn.HIGH?Vn.HIGH:t>=Vn.MEDIUM?Vn.MEDIUM:t>=Vn.LOW?Vn.LOW:Vn.NONE}destroy(){}}nM.extension={type:ve.RendererSystem,name:"_multisample"},Le.add(nM);class iM{constructor(e){this.renderer=e}render(e,t){const i=this.renderer;let r,s,o,a;if(t&&(r=t.renderTexture,s=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),r&&(t.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}iM.extension={type:ve.RendererSystem,name:"objectRenderer"},Le.add(iM),["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class wv extends Mr{constructor(){super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",{m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1}),this.alpha=1}_loadMatrix(e,t=!1){let i=e;t&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19]+t[4],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19]+t[9],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19]+t[14],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19]+t[19],e}_colorMatrix(e){const t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}brightness(e,t){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],t)}tint(e,t){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],t)}greyscale(e,t){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],t)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,t){e=(e||0)/180*Math.PI;const i=Math.cos(e),r=Math.sin(e),o=1/3,a=(0,Math.sqrt)(o);this._loadMatrix([i+(1-i)*o,o*(1-i)-a*r,o*(1-i)+a*r,0,0,o*(1-i)+a*r,i+o*(1-i),o*(1-i)-a*r,0,0,o*(1-i)-a*r,o*(1-i)+a*r,i+o*(1-i),0,0,0,0,0,1,0],t)}contrast(e,t){const i=(e||0)+1,r=-.5*(i-1);this._loadMatrix([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],t)}saturate(e=0,t){const i=2*e/3+1,r=-.5*(i-1);this._loadMatrix([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],t)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,t,i,r,s){const o=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,l=(255&i)/255,u=((r=r||3375104)>>16&255)/255,c=(r>>8&255)/255,h=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,o,a,l,e=e||.2,0,u,c,h,t=t||.15,0,o-u,a-c,l-h,0,0],s)}night(e,t){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],t)}predator(e,t){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],t)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}wv.prototype.grayscale=wv.prototype.greyscale,se.SORTABLE_CHILDREN=!1;class Af{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Ot.EMPTY:((e=e||new Ot(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,t){const{a:i,b:r,c:s,d:o,tx:a,ty:l}=e,u=i*t.x+s*t.y+a,c=r*t.x+o*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let t=this.minX,i=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],t=o<t?o:t,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,this.minX=t,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,t,i,r,s){this.addFrameMatrix(e.worldTransform,t,i,r,s)}addFrameMatrix(e,t,i,r,s){const o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty;let d=this.minX,g=this.minY,m=this.maxX,y=this.maxY,v=o*t+l*i+c,b=a*t+u*i+h;d=v<d?v:d,g=b<g?b:g,m=v>m?v:m,y=b>y?b:y,v=o*r+l*i+c,b=a*r+u*i+h,d=v<d?v:d,g=b<g?b:g,m=v>m?v:m,y=b>y?b:y,v=o*t+l*s+c,b=a*t+u*s+h,d=v<d?v:d,g=b<g?b:g,m=v>m?v:m,y=b>y?b:y,v=o*r+l*s+c,b=a*r+u*s+h,d=v<d?v:d,g=b<g?b:g,m=v>m?v:m,y=b>y?b:y,this.minX=d,this.minY=g,this.maxX=m,this.maxY=y}addVertexData(e,t,i){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=t;l<i;l+=2){const u=e[l],c=e[l+1];r=u<r?u:r,s=c<s?c:s,o=u>o?u:o,a=c>a?c:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,t,i,r){this.addVerticesMatrix(e.worldTransform,t,i,r)}addVerticesMatrix(e,t,i,r,s=0,o=s){const a=e.a,l=e.b,u=e.c,c=e.d,h=e.tx,d=e.ty;let g=this.minX,m=this.minY,y=this.maxX,v=this.maxY;for(let b=i;b<r;b+=2){const A=t[b],w=t[b+1],M=a*A+u*w+h,J=c*w+l*A+d;g=Math.min(g,M-s),y=Math.max(y,M+s),m=Math.min(m,J-o),v=Math.max(v,J+o)}this.minX=g,this.minY=m,this.maxX=y,this.maxY=v}addBounds(e){const t=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,t){const i=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,s=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(i<=s&&r<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}addBoundsMatrix(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,t){const i=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,s=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(i<=s&&r<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}pad(e=0,t=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}addFramePad(e,t,i,r,s,o){t-=o,i+=s,r+=o,this.minX=this.minX<(e-=s)?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}class En extends uc{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Yy,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Af,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const t=Object.keys(e);for(let i=0;i<t.length;++i){const r=t[i];Object.defineProperty(En.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new Ot),t=this._boundsRect),this._bounds.getRectangle(t)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Ot),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Af);const t=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,t,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}toLocal(e,t,i,r){return t&&(e=t.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,t=0,i=1,r=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=t,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new mX),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*V8}set angle(e){this.transform.rotation=e*H8}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){const t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(0===t._maskRefCount&&(t.renderable=!1,t.isMask=!0),t._maskRefCount++)}}}}class mX extends En{constructor(){super(...arguments),this.sortDirty=null}}En.prototype.displayObjectUpdateTransform=En.prototype.updateTransform;const _X=new pn;function yX(n,e){return n.zIndex===e.zIndex?n._lastSortedIndex-e._lastSortedIndex:n.zIndex-e.zIndex}class cr extends En{constructor(){super(),this.children=[],this.sortableChildren=se.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),r=this.getChildIndex(t);this.children[i]=t,this.children[r]=e,this.onChildrenChange(i<r?i:r)}getChildIndex(e){const t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);yl(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(-1===i)return null;t.parent=null,t.transform._parentID=-1,yl(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,yl(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const s=t-e;let o;if(s>0&&s<=t){o=this.children.splice(e,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const r=this.children[t];r._lastSortedIndex=t,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(yX),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let r=0,s=this.children.length;r<s;++r){const o=this.children[r];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==cr.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(r?(r=_X.copyFrom(r),r.prepend(s)):r=s),i&&t.intersects(i,r))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,i=this.children.length;t<i;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<t.length;s++)t[s].enabled&&this._enabledFilters.push(t[s])}const r=t&&this._enabledFilters?.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==zn.NONE));if(r&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}r&&e.batch.flush(),i&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t="boolean"==typeof e?e:e?.children,i=this.removeChildren(0,this.children.length);if(t)for(let r=0;r<i.length;++r)i[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}cr.prototype.containerUpdateTransform=cr.prototype.updateTransform;const yc=new bt,vX=new Uint16Array([0,1,2,0,2,3]);class ta extends cr{constructor(e){super(),this._anchor=new ao(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=Ye.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||xe.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=vX,this.pluginName="batch",this.isSprite=!0,this._roundPixels=se.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=vl(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=vl(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const t=this.transform.worldTransform,i=t.a,r=t.b,s=t.c,o=t.d,a=t.tx,l=t.ty,u=this.vertexData,c=e.trim,h=e.orig,d=this._anchor;let g=0,m=0,y=0,v=0;if(c?(m=c.x-d._x*h.width,g=m+c.width,v=c.y-d._y*h.height,y=v+c.height):(m=-d._x*h.width,g=m+h.width,v=-d._y*h.height,y=v+h.height),u[0]=i*m+s*v+a,u[1]=o*v+r*m+l,u[2]=i*g+s*v+a,u[3]=o*v+r*g+l,u[4]=i*g+s*y+a,u[5]=o*y+r*g+l,u[6]=i*m+s*y+a,u[7]=o*y+r*m+l,this._roundPixels){const b=se.RESOLUTION;for(let A=0;A<u.length;++A)u[A]=Math.round(u[A]*b)/b}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this.vertexTrimmedData,i=this._texture.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,c=s.tx,h=s.ty,d=-r._x*i.width,g=d+i.width,m=-r._y*i.height,y=m+i.height;t[0]=o*d+l*m+c,t[1]=u*m+a*d+h,t[2]=o*g+l*m+c,t[3]=u*m+a*g+h,t[4]=o*g+l*y+c,t[5]=u*y+a*g+h,t[6]=o*d+l*y+c,t[7]=u*y+a*d+h}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Af),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Ot),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,yc);const t=this._texture.orig.width,i=this._texture.orig.height,r=-t*this.anchor.x;let s=0;return yc.x>=r&&yc.x<r+t&&(s=-i*this.anchor.y,yc.y>=s&&yc.y<s+i)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e?.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e?.baseTexture)),this._texture=null}static from(e,t){const i=e instanceof xe?e:xe.from(e,t);return new ta(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const t=vl(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const t=vl(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||xe.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const rM=new pn;En.prototype._cacheAsBitmap=!1,En.prototype._cacheData=null,En.prototype._cacheAsBitmapResolution=null,En.prototype._cacheAsBitmapMultisample=null;class bX{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(En.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(n){n!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(n){n!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=n,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(n){if(this._cacheAsBitmap===n)return;let e;this._cacheAsBitmap=n,n?(this._cacheData||(this._cacheData=new bX),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),En.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},En.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,e.batch.flush();const i=this.getLocalBounds(null,!0).clone();this.filters?.length&&i.pad(this.filters[0].padding),i.ceil(se.RESOLUTION);const r=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=co.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${Qo()}`;this._cacheData.textureCacheId=u,Vt.addToCache(l.baseTexture,u),xe.addToCache(l,u);const c=this.transform.localTransform.copyTo(rM).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const h=new ta(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-i.x/i.width,h.anchor.y=-i.y/i.height,h.alpha=t,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)},En.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},En.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=e.canvasContext.activeContext,s=e._projTransform;t.ceil(se.RESOLUTION);const o=co.create({width:t.width,height:t.height}),a=`cacheAsBitmap_${Qo()}`;this._cacheData.textureCacheId=a,Vt.addToCache(o.baseTexture,a),xe.addToCache(o,a);const l=rM;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=r,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new ta(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-t.x/t.width,u.anchor.y=-t.y/t.height,u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)},En.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},En.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},En.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Vt.removeFromCache(this._cacheData.textureCacheId),xe.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},En.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},En.prototype.name=null,cr.prototype.getChildByName=function(e,t){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===e)return this.children[i];if(t)for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null},En.prototype.getGlobalPosition=function(e=new bt,t=!1){return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};class vc{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=vc.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new bt,this.page=new bt,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,t,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,t,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class If extends vc{constructor(){super(...arguments),this.client=new bt,this.movement=new bt,this.offset=new bt,this.global=new bt,this.screen=new bt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,t,i,r,s,o,a,l,u,c,h,d,g,m,y){throw new Error("Method not implemented.")}}class Rr extends If{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Cv extends If{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const CX=new bt,Sv=new bt;class SX{constructor(e){this.dispatch=new uc,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const t=this.mappingTable[e.type];if(t)for(let i=0,r=t.length;i<r;i++)t[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,t){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,CX.set(e,t),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,t){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,t,i=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const r=i.children;if(r)for(let s=0;s<r.length;s++)this.all(e,t,r[s]);e.currentTarget=i,this.notifyTarget(e,t)}propagationPath(e){const t=[e];for(let i=0;i<2048&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}hitTestRecursive(e,t,i,r,s){if(!e||!e.visible||s(e,i))return null;if(e.interactiveChildren&&e.children){const o=e.children;for(let a=o.length-1;a>=0;a--){const l=o[a],u=this.hitTestRecursive(l,t||l.interactive,i,r,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;return(u.length>0||e.interactive)&&u.push(e),u}}}return t&&r(e,i)?e.interactive?[e]:[]:null}hitPruneFn(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,Sv),!e.hitArea.contains(Sv.x,Sv.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!i.containsPoint?.(t))return!0}return!1}hitTestFn(e,t){return!!e.hitArea||!!e.containsPoint&&e.containsPoint(t)}notifyTarget(e,t){t=t??e.type,this.notifyListeners(e,e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${t}capture`:t),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}mapPointerDown(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e);this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType?this.dispatchEvent(t,"touchstart"):"mouse"!==t.pointerType&&"pen"!==t.pointerType||this.dispatchEvent(t,2===t.button?"rightdown":"mousedown"),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}mapPointerMove(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.createPointerEvent(e),i="mouse"===t.pointerType||"pen"===t.pointerType,r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets&&s!==t.target){const l=this.createPointerEvent(e,"mousemove"===e.type?"mouseout":"pointerout",s);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!t.composedPath().includes(s)){const u=this.createPointerEvent(e,"pointerleave",s);for(u.eventPhase=u.AT_TARGET;u.target&&!t.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),i&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(l)}if(s!==t.target){const l=this.clonePointerEvent(t,"mousemove"===e.type?"mouseover":"pointerover");this.dispatchEvent(l,"pointerover"),i&&this.dispatchEvent(l,"mouseover");let u=s?.parent;for(;u&&u!==this.rootTarget.parent&&u!==t.target;)u=u.parent;if(!u||u===this.rootTarget.parent){const h=this.clonePointerEvent(t,"pointerenter");for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==s&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseenter"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(l)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](t,"pointermove"),"touch"===t.pointerType&&this[o](t,"touchmove"),i&&(this[o](t,"mousemove"),this.cursor=t.target?.cursor),r.overTargets=t.composedPath(),this.freeEvent(t)}mapPointerOver(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.createPointerEvent(e),r="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;t.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId);if(t.overTargets){const i="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(t.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=performance.now(),i=this.createPointerEvent(e);this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType?this.dispatchEvent(i,"touchend"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.dispatchEvent(i,2===i.button?"rightup":"mouseup");const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);)i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),a=a.parent;delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:t});const l=r.clicksByButton[e.button];l.target===a.target&&t-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=t,a.detail=l.clickCount,"mouse"===a.pointerType?this.dispatchEvent(a,"click"):"touch"===a.pointerType&&this.dispatchEvent(a,"tap"),this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof Rr))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const t=this.trackingData(e.pointerId),i=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):("mouse"===r.pointerType||"pen"===r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof Cv))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}findMountedTarget(e){if(!e)return null;let t=e[0];for(let i=1;i<e.length&&e[i].parent===t;i++)t=e[i];return t}createPointerEvent(e,t,i){const r=this.allocateEvent(Rr);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=i??this.hitTest(r.global.x,r.global.y),"string"==typeof t&&(r.type=t),r}createWheelEvent(e){const t=this.allocateEvent(Cv);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}clonePointerEvent(e,t){const i=this.allocateEvent(Rr);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=t??i.type,i}copyWheelData(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}copyPointerData(e,t){e instanceof Rr&&t instanceof Rr&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}copyMouseData(e,t){e instanceof If&&t instanceof If&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.global.copyFrom(e.global))}copyData(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}notifyListeners(e,t){const i=e.currentTarget._events[t];if(i)if("fn"in i)i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e)}}const xX={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class sM{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new SX(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Rr(null),this.rootWheelEvent=new Cv(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:t}=this.renderer;this.setTargetElement(e),this.resolution=t}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i)}else t&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=t.length;i<r;i++){const o=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const t=this.normalizeToPointerData(e);for(let i=0,r=t.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=this.domElement.width/r.width*(t-r.left)*s,e.y=this.domElement.height/r.height*(i-r.top)*s}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,t.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=1),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=xX[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}}sM.extension={name:"events",type:[ve.RendererSystem,ve.CanvasRendererSystem]},Le.add(sM);const DX={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(n,e,t){const r="function"==typeof e?void 0:e;this.on(n="boolean"==typeof t&&t||"object"==typeof t&&t.capture?`${n}capture`:n,e="function"==typeof e?e:e.handleEvent,r)},removeEventListener(n,e,t){const r="function"==typeof e?void 0:e;this.off(n="boolean"==typeof t&&t||"object"==typeof t&&t.capture?`${n}capture`:n,e="function"==typeof e?e:e.handleEvent,r)},dispatchEvent(n){if(!(n instanceof vc))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return n.defaultPrevented=!1,n.path=null,n.target=this,n.manager.dispatchEvent(n),!n.defaultPrevented}};En.mixin(DX),En.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class lM{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ps.tablet||Ps.phone)&&this.createTouchHook();const t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2..toString(),this.div=t,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const t=e.children;if(t)for(let i=0;i<t.length;i++)this.updateAccessibleObjects(t[i])}update(){const e=performance.now();if(Ps.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:t,y:i,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=r/o*l,c=s/a*l;let h=this.div;h.style.left=`${t}px`,h.style.top=`${i}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const g=this.children[d];if(g.renderId!==this.renderId)g._accessibleActive=!1,yl(this.children,d,1),this.div.removeChild(g._accessibleDiv),this.pool.push(g._accessibleDiv),g._accessibleDiv=null,d--;else{h=g._accessibleDiv;let m=g.hitArea;const y=g.worldTransform;g.hitArea?(h.style.left=(y.tx+m.x*y.a)*u+"px",h.style.top=(y.ty+m.y*y.d)*c+"px",h.style.width=m.width*y.a*u+"px",h.style.height=m.height*y.d*c+"px"):(m=g.getBounds(),this.capHitArea(m),h.style.left=m.x*u+"px",h.style.top=m.y*c+"px",h.style.width=m.width*u+"px",h.style.height=m.height*c+"px",h.title!==g.accessibleTitle&&null!==g.accessibleTitle&&(h.title=g.accessibleTitle),h.getAttribute("aria-label")!==g.accessibleHint&&null!==g.accessibleHint&&h.setAttribute("aria-label",g.accessibleHint)),(g.accessibleTitle!==h.title||g.tabIndex!==h.tabIndex)&&(h.title=g.accessibleTitle,h.tabIndex=g.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:t,height:i}=this.renderer;e.x+e.width>t&&(e.width=t-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let t=this.pool.pop();t||(t=document.createElement("button"),t.style.width="100px",t.style.height="100px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(t.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,t){const{displayObject:i}=e.target,r=this.renderer.events.rootBoundary,s=Object.assign(new vc(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,t.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}lM.extension={name:"accessibility",type:[ve.RendererPlugin,ve.CanvasRendererPlugin]},Le.add(lM);const Tv=class{constructor(n){this.stage=new cr,n=Object.assign({forceCanvas:!1},n),this.renderer=function W6(n){for(const e of Q1)if(e.test(n))return new e(n);throw new Error("Unable to auto-detect a suitable renderer.")}(n),Tv._plugins.forEach(e=>{e.init.call(this,n)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(n,e){const t=Tv._plugins.slice(0);t.reverse(),t.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(n),this.renderer=null}};let xv=Tv;xv._plugins=[],Le.handleByList(ve.Application,xv._plugins);class uM{static init(e){Object.defineProperty(this,"resizeTo",{set(t){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let t,i;if(this.cancelResize(),this._resizeTo===globalThis.window)t=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;t=r,i=s}this.renderer.resize(t,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}uM.extension=ve.Application,Le.add(uM);class NX{constructor(e,t=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=t}add(e){e.forEach(t=>{this._assetList.push(t)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var e=this;return et(function*(){if(e._assetList.length&&e._isActive){e._isLoading=!0;const t=[],i=Math.min(e._assetList.length,e._maxConcurrent);for(let r=0;r<i;r++)t.push(e._assetList.pop());yield e._loader.load(t),e._isLoading=!1,e._next()}})()}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Rf(n,e){const t=n.split("?")[0],i=Qn.extname(t).toLowerCase();return Array.isArray(e)?e.includes(i.toLowerCase()):i.toLowerCase()===e}const Fs=(n,e)=>(Array.isArray(n)||(n=[n]),e?n.map(t=>"string"==typeof t?e(t):t):n),bc=new class FX{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const t=this._cache.get(e);return t||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),t}set(e,t){const i=Fs(e);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(t)){r=l.getCacheableAssets(i,t);break}}r||(r={},i.forEach(a=>{r[a]=t}));const s=Object.keys(r),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==t&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),t instanceof xe){const a=t;i.forEach(l=>{a.baseTexture!==xe.EMPTY.baseTexture&&Vt.addToCache(a.baseTexture,l),xe.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const t=this._cacheMap.get(e);t.cacheKeys.forEach(r=>{this._cache.delete(r)}),t.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},Pf=n=>!Array.isArray(n);class LX{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,t){var i=this;const r={promise:null,parser:null};return r.promise=et(function*(){let s=null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];if(a.load&&a.test?.(e,t,i)){s=yield a.load(e,t,i),r.parser=a;break}}if(!r.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];a.parse&&a.parse&&(yield a.testParse?.(s,t,i))&&(s=(yield a.parse(s,t,i))||s,r.parser=a)}return s})(),r}load(e,t){var i=this;return et(function*(){let r=0;const s={},o=Pf(e),a=Fs(e,c=>({src:c})),l=a.length,u=a.map(function(){var c=et(function*(h){const d=Qn.toAbsolute(h.src);if(!s[h.src])try{i.promiseCache[d]||(i.promiseCache[d]=i._getLoadPromiseAndParser(d,h)),s[h.src]=yield i.promiseCache[d].promise,t&&t(++r/l)}catch(g){throw delete i.promiseCache[d],delete s[h.src],new Error(`[Loader.load] Failed to load ${d}.\n${g}`)}});return function(h){return c.apply(this,arguments)}}());return yield Promise.all(u),o?s[a[0].src]:s})()}unload(e){var t=this;return et(function*(){const r=Fs(e,s=>({src:s})).map(function(){var s=et(function*(o){const a=Qn.toAbsolute(o.src),l=t.promiseCache[a];if(l){const u=yield l.promise;l.parser?.unload?.(u,o,t),delete t.promiseCache[a]}});return function(o){return s.apply(this,arguments)}}());yield Promise.all(r)})()}get parsers(){return this._parsers}}function cM(n,e,t,i,r){const s=e[t];for(let o=0;o<s.length;o++){const a=s[o];t<e.length-1?cM(n.replace(i[t],a),e,t+1,i,r):r.push(n.replace(i[t],a))}}function kX(n){const t=n.match(/\{(.*?)\}/g),i=[];if(t){const r=[];t.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),cM(n,r,0,t,i)}else i.push(n);return i}class BX{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...e){e.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(e,t){const i=[];Array.isArray(t)?t.forEach(r=>{"string"==typeof r.name?i.push(r.name):i.push(...r.name),this.add(r.name,r.srcs)}):Object.keys(t).forEach(r=>{i.push(r),this.add(r,t[r])}),this._bundles[e]=i}add(e,t,i){const r=Fs(e);r.forEach(o=>{this._assetMap[o]&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(t)||(t="string"==typeof t?kX(t):[t]);const s=t.map(o=>{let a=o;if("string"==typeof o){let l=!1;for(let u=0;u<this._parsers.length;u++){const c=this._parsers[u];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=Qn.toAbsolute(a.src,this._basePath,this._rootPath)),a.data=a.data??i,a});r.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const t=Pf(e);e=Fs(e);const i={};return e.forEach(r=>{const s=this._bundles[r];s&&(i[r]=this.resolve(s))}),t?i[e[0]]:i}resolveUrl(e){const t=this.resolve(e);if("string"!=typeof e){const i={};for(const r in t)i[r]=t[r].src;return i}return t.src}resolve(e){const t=Pf(e);e=Fs(e);const i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(l=>{o.params[l].forEach(u=>{const c=s.filter(h=>!!h[l]&&h[l]===u);c.length&&(s=c)})}),this._resolverHash[r]=s[0]??a}else{let s=r;(this._basePath||this._rootPath)&&(s=Qn.toAbsolute(s,this._basePath,this._rootPath)),this._resolverHash[r]={src:s}}i[r]=this._resolverHash[r]}),t?i[e[0]]:i}_getPreferredOrder(e){for(let t=0;t<e.length;t++){const i=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}}const Of=new class UX{constructor(){this._detections=[],this._initialized=!1,this.resolver=new BX,this.loader=new LX,this.cache=bc,this._backgroundLoader=new NX(this.loader),this._backgroundLoader.active=!0,this.reset()}init(e={}){var t=this;return et(function*(){if(t._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(t._initialized=!0,e.basePath&&(t.resolver.basePath=e.basePath),e.manifest){let o=e.manifest;"string"==typeof o&&(o=yield t.load(o)),t.resolver.addManifest(o)}const i=e.texturePreference?.resolution??1,r="number"==typeof i?[i]:i;let s=[];if(e.texturePreference?.format){const o=e.texturePreference?.format;s="string"==typeof o?[o]:o;for(const a of t._detections)(yield a.test())||(s=yield a.remove(s))}else for(const o of t._detections)(yield o.test())&&(s=yield o.add(s));t.resolver.prefer({params:{format:s,resolution:r}})})()}add(e,t,i){this.resolver.add(e,t,i)}load(e,t){var i=this;return et(function*(){i._initialized||(yield i.init());const r=Pf(e),s=Fs(e).map(l=>"string"!=typeof l?(i.resolver.add(l.src,l),l.src):l),o=i.resolver.resolve(s),a=yield i._mapLoadToResolve(o,t);return r?a[s[0]]:a})()}addBundle(e,t){this.resolver.addBundle(e,t)}loadBundle(e,t){var i=this;return et(function*(){i._initialized||(yield i.init());let r=!1;"string"==typeof e&&(r=!0,e=[e]);const s=i.resolver.resolveBundle(e),o={},a=Object.keys(s);let l=0,u=0;const c=()=>{t?.(++l/u)},h=a.map(d=>{const g=s[d];return u+=Object.keys(g).length,i._mapLoadToResolve(g,c).then(m=>{o[d]=m})});return yield Promise.all(h),r?o[e[0]]:o})()}backgroundLoad(e){var t=this;return et(function*(){t._initialized||(yield t.init()),"string"==typeof e&&(e=[e]);const i=t.resolver.resolve(e);t._backgroundLoader.add(Object.values(i))})()}backgroundLoadBundle(e){var t=this;return et(function*(){t._initialized||(yield t.init()),"string"==typeof e&&(e=[e]);const i=t.resolver.resolveBundle(e);Object.values(i).forEach(r=>{t._backgroundLoader.add(Object.values(r))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return bc.get(e);const t={};for(let i=0;i<e.length;i++)t[i]=bc.get(e[i]);return t}_mapLoadToResolve(e,t){var i=this;return et(function*(){const r=Object.values(e),s=Object.keys(e);i._backgroundLoader.active=!1;const o=yield i.loader.load(r,t);i._backgroundLoader.active=!0;const a={};return r.forEach((l,u)=>{const c=o[l.src],h=[l.src];l.alias&&h.push(...l.alias),a[s[u]]=c,bc.set(h,c)}),a})()}unload(e){var t=this;return et(function*(){t._initialized||(yield t.init());const i=Fs(e).map(s=>"string"!=typeof s?s.src:s),r=t.resolver.resolve(i);yield t._unloadFromResolved(r)})()}unloadBundle(e){var t=this;return et(function*(){t._initialized||(yield t.init()),e=Fs(e);const i=t.resolver.resolveBundle(e),r=Object.keys(i).map(s=>t._unloadFromResolved(i[s]));yield Promise.all(r)})()}_unloadFromResolved(e){var t=this;return et(function*(){const i=Object.values(e);i.forEach(r=>{bc.remove(r.src)}),yield t.loader.unload(i)})()}get detections(){return this._detections}};Le.handleByList(ve.LoadParser,Of.loader.parsers).handleByList(ve.ResolveParser,Of.resolver.parsers).handleByList(ve.CacheParser,Of.cache.parsers).handleByList(ve.DetectionParser,Of.detections);const hM={loader:ve.LoadParser,resolver:ve.ResolveParser,cache:ve.CacheParser,detection:ve.DetectionParser};Le.handle(ve.Asset,n=>{const e=n.ref;Object.entries(hM).filter(([t])=>!!e[t]).forEach(([t,i])=>Le.add(Object.assign(e[t],{extension:e[t].extension??i})))},n=>{const e=n.ref;Object.keys(hM).filter(t=>!!e[t]).forEach(t=>Le.remove(e[t]))});const VX={extension:ve.CacheParser,test:n=>Array.isArray(n)&&n.every(e=>e instanceof xe),getCacheableAssets:(n,e)=>{const t={};return n.forEach(i=>{e.forEach((r,s)=>{t[i+(0===s?"":s+1)]=r})}),t}};Le.add(VX);var es=(n=>(n[n.Low=0]="Low",n[n.Normal=1]="Normal",n[n.High=2]="High",n))(es||{});const HX={extension:{type:ve.LoadParser,priority:es.Low},test:n=>Qn.extname(n).includes(".json"),load:n=>et(function*(){return yield(yield se.ADAPTER.fetch(n)).json()})()};Le.add(HX);const GX={extension:{type:ve.LoadParser,priority:es.Low},test:n=>Qn.extname(n).includes(".txt"),load:n=>et(function*(){return yield(yield se.ADAPTER.fetch(n)).text()})()};function dM(n,e){if(Array.isArray(e)){for(const t of e)if(n.startsWith(`data:${t}`))return!0;return!1}return n.startsWith(`data:${e}`)}Le.add(GX);const jX=["normal","bold","100","200","300","400","500","600","700","800","900"],$X=[".ttf",".otf",".woff",".woff2"],WX=["font/ttf","font/otf","font/woff","font/woff2"],XX={extension:{type:ve.LoadParser,priority:es.Low},test:n=>dM(n,WX)||Rf(n,$X),load:(n,e)=>et(function*(){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const t=se.ADAPTER.getFontFaceSet();if(t){const i=[],r=e.data?.family??function zX(n){const e=Qn.extname(n);return Qn.basename(n,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}(n),s=e.data?.weights?.filter(a=>jX.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],u=new FontFace(r,`url(${encodeURI(n)})`,{...o,weight:l});yield u.load(),t.add(u),i.push(u)}return 1===i.length?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(n){(Array.isArray(n)?n:[n]).forEach(e=>se.ADAPTER.getFontFaceSet().delete(e))}};Le.add(XX);let Dv,fM=0;const qX_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",YX_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let Av;const pM=new class KX{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const t=URL.createObjectURL(new Blob([qX_code],{type:"application/javascript"})),i=new Worker(t);i.addEventListener("message",r=>{i.terminate(),URL.revokeObjectURL(t),e(r.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){var e=this;return et(function*(){e._initialized||(e._initialized=!0)})()}getWorker(){void 0===Dv&&(Dv=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Dv&&(Av||(Av=URL.createObjectURL(new Blob([YX_code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Av),e.addEventListener("message",t=>{this.complete(t.data),this.returnWorker(t.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,t){var i=this;return et(function*(){yield i._initWorkers();const r=new Promise((s,o)=>{i.queue.push({id:e,arguments:t,resolve:s,reject:o})});return i.next(),r})()}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const t=this.queue.pop(),i=t.id;this.resolveHash[fM]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:fM++,id:i})}};function Nf(n,e,t){const i=new xe(n);return i.baseTexture.on("dispose",()=>{delete e.promiseCache[t]}),i}const ZX=[".jpeg",".jpg",".png",".webp",".avif"],QX=["image/jpeg","image/png","image/webp","image/avif"];function Iv(){return(Iv=et(function*(n){const e=yield se.ADAPTER.fetch(n);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${n}: ${e.status} ${e.statusText}`);const t=yield e.blob();return yield createImageBitmap(t)})).apply(this,arguments)}const Mv={extension:{type:ve.LoadParser,priority:es.High},config:{preferWorkers:!0},test:n=>dM(n,QX)||Rf(n,ZX),load(n,e,t){var i=this;return et(function*(){let r=null;r=globalThis.createImageBitmap?i.config.preferWorkers&&(yield pM.isImageBitmapSupported())?yield pM.loadImageBitmap(n):yield function JX(n){return Iv.apply(this,arguments)}(n):yield new Promise(o=>{r=new Image,r.crossOrigin="anonymous",r.src=n,r.complete?o(r):r.onload=()=>{o(r)}});const s=new Vt(r,{resolution:lo(n),...e.data});return s.resource.src=n,Nf(s,t,n)})()},unload(n){n.destroy(!0)}};Le.add(Mv);const e7={extension:ve.ResolveParser,test:Mv.test,parse:n=>({resolution:parseFloat(se.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n})};Le.add(e7);const t7={extension:{type:ve.DetectionParser,priority:1},test:(n=et(function*(){if(!globalThis.createImageBitmap)return!1;const t=yield se.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)}),function(){return n.apply(this,arguments)}),add:function(){var n=et(function*(e){return[...e,"avif"]});return function(t){return n.apply(this,arguments)}}(),remove:function(){var n=et(function*(e){return e.filter(t=>"avif"!==t)});return function(t){return n.apply(this,arguments)}}()};var n;Le.add(t7);const n7={extension:{type:ve.DetectionParser,priority:0},test:function(){var n=et(function*(){if(!globalThis.createImageBitmap)return!1;const t=yield se.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)});return function(){return n.apply(this,arguments)}}(),add:function(){var n=et(function*(e){return[...e,"webp"]});return function(t){return n.apply(this,arguments)}}(),remove:function(){var n=et(function*(e){return e.filter(t=>"webp"!==t)});return function(t){return n.apply(this,arguments)}}()};Le.add(n7);const gM=["png","jpg","jpeg"],i7={extension:{type:ve.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var n=et(function*(e){return[...e,...gM]});return function(t){return n.apply(this,arguments)}}(),remove:function(){var n=et(function*(e){return e.filter(t=>!gM.includes(t))});return function(t){return n.apply(this,arguments)}}()};Le.add(i7);var ji=(n=>(n[n.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",n[n.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",n[n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",n[n.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",n[n.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",n[n.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",n[n.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",n[n.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",n[n.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",n[n.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",n[n.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",n[n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",n[n.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",n[n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",n[n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",n[n.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",n[n.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",n[n.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",n[n.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",n))(ji||{});const Ff={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};class r7 extends dc{constructor(e,t={width:1,height:1,autoLoad:!0}){let i,r;"string"==typeof e?(i=e,r=new Uint8Array):(i=null,r=e),super(r,t),this.origin=i,this.buffer=r?new bv(r):null,this.origin&&!1!==t.autoLoad&&this.load(),r?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){var e=this;return et(function*(){const r=yield(yield(yield fetch(e.origin)).blob()).arrayBuffer();return e.data=new Uint32Array(r),e.buffer=new bv(r),e.loaded=!0,e.onBlobLoaded(r),e.update(),e})()}}class na extends r7{constructor(e,t){super(e,t),this.format=t.format,this.levels=t.levels||1,this._width=t.width,this._height=t.height,this._extension=na._formatToExtension(this.format),(t.levelBuffers||this.buffer)&&(this._levelBuffers=t.levelBuffers||na._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,t,i){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:c,levelBuffer:h}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,u,c,0,h)}return!0}onBlobLoaded(){this._levelBuffers=na._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,t,i,r,s,o,a){const l=new Array(i);let u=e.byteOffset,c=o,h=a,d=c+r-1&~(r-1),g=h+s-1&~(s-1),m=d*g*Ff[t];for(let y=0;y<i;y++)l[y]={levelID:y,levelWidth:i>1?c:d,levelHeight:i>1?h:g,levelBuffer:new Uint8Array(e.buffer,u,m)},u+=m,c=c>>1||1,h=h>>1||1,d=c+r-1&~(r-1),g=h+s-1&~(s-1),m=d*g*Ff[t];return l}}let Ls,Cl;function mM(){Cl={s3tc:Ls.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Ls.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Ls.getExtension("WEBGL_compressed_texture_etc"),etc1:Ls.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Ls.getExtension("WEBGL_compressed_texture_pvrtc")||Ls.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Ls.getExtension("WEBGL_compressed_texture_atc"),astc:Ls.getExtension("WEBGL_compressed_texture_astc")}}const s7={extension:{type:ve.DetectionParser,priority:2},test:function(){var n=et(function*(){const t=se.ADAPTER.createCanvas().getContext("webgl");return t?(Ls=t,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return n.apply(this,arguments)}}(),add:function(){var n=et(function*(e){Cl||mM();const t=[];for(const i in Cl)!Cl[i]||t.push(i);return[...t,...e]});return function(t){return n.apply(this,arguments)}}(),remove:function(){var n=et(function*(e){return Cl||mM(),e.filter(t=>!(t in Cl))});return function(t){return n.apply(this,arguments)}}()};Le.add(s7);const w7={827611204:ji.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:ji.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:ji.COMPRESSED_RGBA_S3TC_DXT5_EXT},C7={70:ji.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ji.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ji.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ji.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ji.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ji.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ji.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ji.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ji.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},yM=[171,75,84,88,32,49,49,187,13,10,26,10],vM={[Ve.UNSIGNED_BYTE]:1,[Ve.UNSIGNED_SHORT]:2,[Ve.INT]:4,[Ve.UNSIGNED_INT]:4,[Ve.FLOAT]:4,[Ve.HALF_FLOAT]:8},x7={[le.RGBA]:4,[le.RGB]:3,[le.RG]:2,[le.RED]:1,[le.LUMINANCE]:1,[le.LUMINANCE_ALPHA]:2,[le.ALPHA]:1},D7={[Ve.UNSIGNED_SHORT_4_4_4_4]:2,[Ve.UNSIGNED_SHORT_5_5_5_1]:2,[Ve.UNSIGNED_SHORT_5_6_5]:2};function M7(n){switch(n){case le.RGBA:return le.RGBA_INTEGER;case le.RGB:return le.RGB_INTEGER;case le.RG:return le.RG_INTEGER;case le.RED:return le.RED_INTEGER;default:return n}}const P7={extension:{type:ve.LoadParser,priority:es.High},test:n=>Rf(n,".dds"),load:(n,e,t)=>et(function*(){const o=function S7(n){const e=new Uint32Array(n);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const i=new Uint32Array(n,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],s=i[4],o=i[7],a=new Uint32Array(n,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=a[1];if(4&l){const u=a[2];if(808540228!==u){const w=w7[u],J=new Uint8Array(n,128);return[new na(J,{format:w,width:s,height:r,levels:o})]}const h=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=h[0],g=h[1],m=h[2],y=h[3],v=C7[d];if(void 0===v)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(4===m)throw new Error("DDSParser does not support cubemap textures");if(6===g)throw new Error("DDSParser does not supported 3D texture data");const b=new Array,A=148;if(1===y)b.push(new Uint8Array(n,A));else{const w=Ff[v];let M=0,J=s,te=r;for(let oe=0;oe<o;oe++)M+=Math.max(1,J+3&-4)*Math.max(1,te+3&-4)*w,J>>>=1,te>>>=1;let ie=A;for(let oe=0;oe<y;oe++)b.push(new Uint8Array(n,ie,M)),ie+=M}return b.map(w=>new na(w,{format:v,width:s,height:r,levels:o}))}throw 64&l?new Error("DDSParser does not support uncompressed texture data."):512&l?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&l?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&l?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield se.ADAPTER.fetch(n)).arrayBuffer()).map(a=>Nf(new Vt(a,{mipmap:Kr.OFF,alphaMode:xr.NO_PREMULTIPLIED_ALPHA,resolution:lo(n),...e.data}),t,n));return 1===o.length?o[0]:o})(),unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};Le.add(P7);const O7={extension:{type:ve.LoadParser,priority:es.High},test:n=>Rf(n,".ktx"),load:(n,e,t)=>et(function*(){const r=yield(yield se.ADAPTER.fetch(n)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=function A7(n,e,t=!1){const i=new DataView(e);if(!function I7(n,e){for(let t=0;t<yM.length;t++)if(e.getUint8(t)!==yM[t])return console.error(`${n} is not a valid *.ktx file!`),!1;return!0}(n,i))return null;const r=67305985===i.getUint32(12,!0),s=i.getUint32(16,r),o=i.getUint32(24,r),a=i.getUint32(28,r),l=i.getUint32(36,r),u=i.getUint32(40,r)||1,c=i.getUint32(44,r)||1,h=i.getUint32(48,r)||1,d=i.getUint32(52,r),g=i.getUint32(56,r),m=i.getUint32(60,r);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");const b=l+3&-4,A=u+3&-4,w=new Array(h);let J,M=l*u;if(0===s&&(M=b*A),J=0!==s?vM[s]?vM[s]*x7[o]:D7[s]:Ff[a],void 0===J)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const te=t?function R7(n,e,t){const i=new Map;let r=0;for(;r<e;){const s=n.getUint32(64+r,t),o=64+r+4,a=3-(s+3)%4;if(0===s||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==n.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=(new TextDecoder).decode(new Uint8Array(n.buffer,o,l)),c=new DataView(n.buffer,o+l+1,s-l-1);i.set(u,c),r+=4+s+a}return i}(i,m,r):null;let oe=M*J,Oe=l,re=u,W=b,ae=A,q=64+m;for(let ee=0;ee<g;ee++){const Jt=i.getUint32(q,r);let Q=q+4;for(let ne=0;ne<h;ne++){let fe=w[ne];fe||(fe=w[ne]=new Array(g)),fe[ee]={levelID:ee,levelWidth:g>1||0!==s?Oe:W,levelHeight:g>1||0!==s?re:ae,levelBuffer:new Uint8Array(e,Q,oe)},Q+=oe}q+=Jt+4,q=q%4!=0?q+4-q%4:q,Oe=Oe>>1||1,re=re>>1||1,W=Oe+4-1&-4,ae=re+4-1&-4,oe=W*ae*J}return 0!==s?{uncompressed:w.map(ee=>{let Jt=ee[0].levelBuffer,Q=!1;return s===Ve.FLOAT?Jt=new Float32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4):s===Ve.UNSIGNED_INT?(Q=!0,Jt=new Uint32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4)):s===Ve.INT&&(Q=!0,Jt=new Int32Array(ee[0].levelBuffer.buffer,ee[0].levelBuffer.byteOffset,ee[0].levelBuffer.byteLength/4)),{resource:new dc(Jt,{width:ee[0].levelWidth,height:ee[0].levelHeight}),type:s,format:Q?M7(o):o}}),kvData:te}:{compressed:w.map(ee=>new na(null,{format:a,width:l,height:u,levels:g,levelBuffers:ee})),kvData:te}}(n,r),l=s??o,u={mipmap:Kr.OFF,alphaMode:xr.NO_PREMULTIPLIED_ALPHA,resolution:lo(n),...e.data},c=l.map(h=>{l===o&&Object.assign(u,{type:h.type,format:h.format});const d=new Vt(h,u);return d.ktxKeyValueData=a,Nf(d,t,n)});return 1===c.length?c[0]:c})(),unload(n){Array.isArray(n)?n.forEach(e=>e.destroy(!0)):n.destroy(!0)}};Le.add(O7);const N7={extension:ve.ResolveParser,test:n=>{const t=n.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:n=>{if("ktx"===n.split("?")[0].split(".").pop()){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(r=>n.endsWith(r)))return{resolution:parseFloat(se.RETINA_PREFIX.exec(n)?.[1]??"1"),format:i.find(r=>n.endsWith(r)),src:n}}return{resolution:parseFloat(se.RETINA_PREFIX.exec(n)?.[1]??"1"),format:n.split(".").pop(),src:n}}};Le.add(N7);const bM=new Ot,Ov=class{constructor(n){this.renderer=n}image(n,e,t){var i=this;return et(function*(){const r=new Image;return r.src=yield i.base64(n,e,t),r})()}base64(n,e,t){var i=this;return et(function*(){const r=i.canvas(n);if(void 0!==r.toDataURL)return r.toDataURL(e,t);if(void 0!==r.convertToBlob){const s=yield r.convertToBlob({type:e,quality:t});return yield new Promise(o=>{const a=new FileReader;a.onload=()=>o(a.result),a.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")})()}canvas(n,e){const t=this.renderer;let i,s,r=!1,o=!1;n&&(n instanceof co?s=n:(s=this.renderer.generateTexture(n),o=!0)),s?(i=s.baseTexture.resolution,e=e??s.frame,r=!1,t.renderTexture.bind(s)):(i=t.resolution,e||((e=bM).width=t.width,e.height=t.height),r=!0,t.renderTexture.bind(null));const a=Math.round(e.width*i),l=Math.round(e.height*i);let u=new r1(a,l,1);const c=new Uint8Array(4*a*l),h=t.gl;h.readPixels(Math.round(e.x*i),Math.round(e.y*i),a,l,h.RGBA,h.UNSIGNED_BYTE,c);const d=u.context.getImageData(0,0,a,l);if(Ov.arrayPostDivide(c,d.data),u.context.putImageData(d,0,0),r){const g=new r1(u.width,u.height,1);g.context.scale(1,-1),g.context.drawImage(u.canvas,0,-l),u.destroy(),u=g}return o&&s.destroy(!0),u.canvas}pixels(n,e){const t=this.renderer;let i,r,s=!1;n&&(n instanceof co?r=n:(r=this.renderer.generateTexture(n),s=!0)),r?(i=r.baseTexture.resolution,e=e??r.frame,t.renderTexture.bind(r)):(i=t.resolution,e||((e=bM).width=t.width,e.height=t.height),t.renderTexture.bind(null));const o=Math.round(e.width*i),a=Math.round(e.height*i),l=new Uint8Array(4*o*a),u=t.gl;return u.readPixels(Math.round(e.x*i),Math.round(e.y*i),o,a,u.RGBA,u.UNSIGNED_BYTE,l),s&&r.destroy(!0),Ov.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(n,e){for(let t=0;t<n.length;t+=4){const i=e[t+3]=n[t+3];0!==i?(e[t]=Math.round(Math.min(255*n[t]/i,255)),e[t+1]=Math.round(Math.min(255*n[t+1]/i,255)),e[t+2]=Math.round(Math.min(255*n[t+2]/i,255))):(e[t]=n[t],e[t+1]=n[t+1],e[t+2]=n[t+2])}}};let wM=Ov;wM.extension={name:"extract",type:ve.RendererSystem},Le.add(wM);var fo=(n=>(n.MITER="miter",n.BEVEL="bevel",n.ROUND="round",n))(fo||{}),ia=(n=>(n.BUTT="butt",n.ROUND="round",n.SQUARE="square",n))(ia||{});const Ec={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(n,e=20){if(!this.adaptive||!n||isNaN(n))return e;let t=Math.ceil(n/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}};class Uf{constructor(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Uf;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=xe.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function CM(n,e=!1){const t=n.length;if(t<6)return;let i=0;for(let r=0,s=n[t-2],o=n[t-1];r<t;r+=2){const a=n[r],l=n[r+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const r=t/2;for(let s=r+r%2;s<t;s+=2){const o=t-s-2,a=t-s-1,l=s,u=s+1;[n[o],n[l]]=[n[l],n[o]],[n[a],n[u]]=[n[u],n[a]]}}}const Nv={build(n){n.points=n.shape.points.slice()},triangulate(n,e){let t=n.points;const i=n.holes,r=e.points,s=e.indices;if(t.length>=6){CM(t,!1);const o=[];for(let u=0;u<i.length;u++){const c=i[u];CM(c.points,!0),o.push(t.length/2),t=t.concat(c.points)}const a=j8(t,o,2);if(!a)return;const l=r.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<t.length;u++)r.push(t[u])}}},wc={build(n){const e=n.points;let t,i,r,s,o,a;if(n.type===Zn.CIRC){const m=n.shape;t=m.x,i=m.y,o=a=m.radius,r=s=0}else if(n.type===Zn.ELIP){const m=n.shape;t=m.x,i=m.y,o=m.width,a=m.height,r=s=0}else{const m=n.shape,y=m.width/2,v=m.height/2;t=m.x+y,i=m.y+v,o=a=Math.max(0,Math.min(m.radius,Math.min(y,v))),r=y-o,s=v-a}if(!(o>=0&&a>=0&&r>=0&&s>=0))return void(e.length=0);const l=Math.ceil(2.3*Math.sqrt(o+a)),u=8*l+(r?4:0)+(s?4:0);if(e.length=u,0===u)return;if(0===l)return e.length=8,e[0]=e[6]=t+r,e[1]=e[3]=i+s,e[2]=e[4]=t-r,void(e[5]=e[7]=i-s);let c=0,h=4*l+(r?2:0)+2,d=h,g=u;{const m=r+o,y=s,v=t+m,b=t-m,A=i+y;if(e[c++]=v,e[c++]=A,e[--h]=A,e[--h]=b,s){const w=i-y;e[d++]=b,e[d++]=w,e[--g]=w,e[--g]=v}}for(let m=1;m<l;m++){const y=Math.PI/2*(m/l),v=r+Math.cos(y)*o,b=s+Math.sin(y)*a,A=t+v,w=t-v,M=i+b,J=i-b;e[c++]=A,e[c++]=M,e[--h]=M,e[--h]=w,e[d++]=w,e[d++]=J,e[--g]=J,e[--g]=A}{const y=s+a,v=t+r,b=t-r,A=i+y,w=i-y;e[c++]=v,e[c++]=A,e[--g]=w,e[--g]=v,r&&(e[c++]=b,e[c++]=A,e[--g]=w,e[--g]=b)}},triangulate(n,e){const t=n.points,i=e.points,r=e.indices;if(0===t.length)return;let s=i.length/2;const o=s;let a,l;if(n.type!==Zn.RREC){const c=n.shape;a=c.x,l=c.y}else{const c=n.shape;a=c.x+c.width/2,l=c.y+c.height/2}const u=n.matrix;i.push(n.matrix?u.a*a+u.c*l+u.tx:a,n.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(t[0],t[1]);for(let c=2;c<t.length;c+=2)i.push(t[c],t[c+1]),r.push(s++,o,s);r.push(o+1,o,s)}},SM={build(n){const e=n.shape,t=e.x,i=e.y,r=e.width,s=e.height,o=n.points;o.length=0,r>=0&&s>=0&&o.push(t,i,t+r,i,t+r,i+s,t,i+s)},triangulate(n,e){const t=n.points,i=e.points;if(0===t.length)return;const r=i.length/2;i.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},TM={build(n){wc.build(n)},triangulate(n,e){wc.triangulate(n,e)}};function xM(n,e,t,i,r,s,o,a){let d,g;o?(d=i,g=-t):(d=-i,g=t);const v=n+t*s+d,b=e+i*s+g;return a.push(n-t*r+d,e-i*r+g),a.push(v,b),2}function ra(n,e,t,i,r,s,o,a){const l=t-n,u=i-e;let c=Math.atan2(l,u),h=Math.atan2(r-n,s-e);a&&c<h?c+=2*Math.PI:!a&&c>h&&(h+=2*Math.PI);let d=c;const g=h-c,m=Math.abs(g),y=Math.sqrt(l*l+u*u),v=1+(15*m*Math.sqrt(y)/Math.PI>>0),b=g/v;if(d+=b,a){o.push(n,e),o.push(t,i);for(let A=1,w=d;A<v;A++,w+=b)o.push(n,e),o.push(n+Math.sin(w)*y,e+Math.cos(w)*y);o.push(n,e),o.push(r,s)}else{o.push(t,i),o.push(n,e);for(let A=1,w=d;A<v;A++,w+=b)o.push(n+Math.sin(w)*y,e+Math.cos(w)*y),o.push(n,e);o.push(r,s),o.push(n,e)}return 2*v}function Fv(n,e){n.lineStyle.native?function L7(n,e){let t=0;const i=n.shape,r=n.points||i.points,s=i.type!==Zn.POLY||i.closeStroke;if(0===r.length)return;const o=e.points,a=e.indices,l=r.length/2,u=o.length/2;let c=u;for(o.push(r[0],r[1]),t=1;t<l;t++)o.push(r[2*t],r[2*t+1]),a.push(c,c+1),c++;s&&a.push(c,u)}(n,e):function F7(n,e){const t=n.shape;let i=n.points||t.points.slice();const r=e.closePointEps;if(0===i.length)return;const s=n.lineStyle,o=new bt(i[0],i[1]),a=new bt(i[i.length-2],i[i.length-1]),l=t.type!==Zn.POLY||t.closeStroke,u=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const ne=.5*(o.x+a.x),fe=.5*(a.y+o.y);i.unshift(ne,fe),i.push(ne,fe)}const c=e.points,h=i.length/2;let d=i.length;const g=c.length/2,m=s.width/2,y=m*m,v=s.miterLimit*s.miterLimit;let b=i[0],A=i[1],w=i[2],M=i[3],J=0,te=0,ie=-(A-M),oe=b-w,Oe=0,re=0,W=Math.sqrt(ie*ie+oe*oe);ie/=W,oe/=W,ie*=m,oe*=m;const ae=s.alignment,q=2*(1-ae),ee=2*ae;l||(s.cap===ia.ROUND?d+=ra(b-ie*(q-ee)*.5,A-oe*(q-ee)*.5,b-ie*q,A-oe*q,b+ie*ee,A+oe*ee,c,!0)+2:s.cap===ia.SQUARE&&(d+=xM(b,A,ie,oe,q,ee,!0,c))),c.push(b-ie*q,A-oe*q),c.push(b+ie*ee,A+oe*ee);for(let ne=1;ne<h-1;++ne){b=i[2*(ne-1)],A=i[2*(ne-1)+1],w=i[2*ne],M=i[2*ne+1],J=i[2*(ne+1)],te=i[2*(ne+1)+1],ie=-(A-M),oe=b-w,W=Math.sqrt(ie*ie+oe*oe),ie/=W,oe/=W,ie*=m,oe*=m,Oe=-(M-te),re=w-J,W=Math.sqrt(Oe*Oe+re*re),Oe/=W,re/=W,Oe*=m,re*=m;const fe=w-b,Ee=A-M,gn=w-J,ui=te-M,ci=fe*gn+Ee*ui,$i=Ee*gn-ui*fe,nn=$i<0;if(Math.abs($i)<.001*Math.abs(ci)){c.push(w-ie*q,M-oe*q),c.push(w+ie*ee,M+oe*ee),ci>=0&&(d+=s.join===fo.ROUND?ra(w,M,w-ie*q,M-oe*q,w-Oe*q,M-re*q,c,!1)+4:2,c.push(w-Oe*ee,M-re*ee),c.push(w+Oe*q,M+re*q));continue}const Mc=(-ie+b)*(-oe+M)-(-ie+w)*(-oe+A),ep=(-Oe+J)*(-re+M)-(-Oe+w)*(-re+te),On=(fe*ep-gn*Mc)/$i,hr=(ui*Mc-Ee*ep)/$i,hi=(On-w)*(On-w)+(hr-M)*(hr-M),dr=w+(On-w)*q,Nr=M+(hr-M)*q,oa=w-(On-w)*ee,aa=M-(hr-M)*ee,aR=nn?q:ee;hi<=Math.min(fe*fe+Ee*Ee,gn*gn+ui*ui)+aR*aR*y?s.join===fo.BEVEL||hi/y>v?(nn?(c.push(dr,Nr),c.push(w+ie*ee,M+oe*ee),c.push(dr,Nr),c.push(w+Oe*ee,M+re*ee)):(c.push(w-ie*q,M-oe*q),c.push(oa,aa),c.push(w-Oe*q,M-re*q),c.push(oa,aa)),d+=2):s.join===fo.ROUND?nn?(c.push(dr,Nr),c.push(w+ie*ee,M+oe*ee),d+=ra(w,M,w+ie*ee,M+oe*ee,w+Oe*ee,M+re*ee,c,!0)+4,c.push(dr,Nr),c.push(w+Oe*ee,M+re*ee)):(c.push(w-ie*q,M-oe*q),c.push(oa,aa),d+=ra(w,M,w-ie*q,M-oe*q,w-Oe*q,M-re*q,c,!1)+4,c.push(w-Oe*q,M-re*q),c.push(oa,aa)):(c.push(dr,Nr),c.push(oa,aa)):(c.push(w-ie*q,M-oe*q),c.push(w+ie*ee,M+oe*ee),s.join===fo.ROUND?d+=nn?ra(w,M,w+ie*ee,M+oe*ee,w+Oe*ee,M+re*ee,c,!0)+2:ra(w,M,w-ie*q,M-oe*q,w-Oe*q,M-re*q,c,!1)+2:s.join===fo.MITER&&hi/y<=v&&(nn?(c.push(oa,aa),c.push(oa,aa)):(c.push(dr,Nr),c.push(dr,Nr)),d+=2),c.push(w-Oe*q,M-re*q),c.push(w+Oe*ee,M+re*ee),d+=2)}b=i[2*(h-2)],A=i[2*(h-2)+1],w=i[2*(h-1)],M=i[2*(h-1)+1],ie=-(A-M),oe=b-w,W=Math.sqrt(ie*ie+oe*oe),ie/=W,oe/=W,ie*=m,oe*=m,c.push(w-ie*q,M-oe*q),c.push(w+ie*ee,M+oe*ee),l||(s.cap===ia.ROUND?d+=ra(w-ie*(q-ee)*.5,M-oe*(q-ee)*.5,w-ie*q,M-oe*q,w+ie*ee,M+oe*ee,c,!1)+2:s.cap===ia.SQUARE&&(d+=xM(w,M,ie,oe,q,ee,!1,c)));const Jt=e.indices,Q=Ec.epsilon*Ec.epsilon;for(let ne=g;ne<d+g-2;++ne)b=c[2*ne],A=c[2*ne+1],w=c[2*(ne+1)],M=c[2*(ne+1)+1],J=c[2*(ne+2)],te=c[2*(ne+2)+1],!(Math.abs(b*(M-te)+w*(te-A)+J*(A-M))<Q)&&Jt.push(ne,ne+1,ne+2)}(n,e)}class Lv{static curveTo(e,t,i,r,s,o){const u=o[o.length-1]-t,c=o[o.length-2]-e,h=r-t,d=i-e,g=Math.abs(u*d-c*h);if(g<1e-8||0===s)return(o[o.length-2]!==e||o[o.length-1]!==t)&&o.push(e,t),null;const m=u*u+c*c,y=h*h+d*d,v=u*h+c*d,b=s*Math.sqrt(m)/g,A=s*Math.sqrt(y)/g,w=b*v/m,M=A*v/y,J=b*d+A*c,te=b*h+A*u,Oe=d*(b+M),re=h*(b+M);return{cx:J+e,cy:te+t,radius:s,startAngle:Math.atan2(u*(A+w)-te,c*(A+w)-J),endAngle:Math.atan2(re-te,Oe-J),anticlockwise:c*h>d*u}}static arc(e,t,i,r,s,o,a,l,u){const c=a-o,h=Ec._segmentsCount(Math.abs(c)*s,40*Math.ceil(Math.abs(c)/hf)),d=c/(2*h),g=2*d,m=Math.cos(d),y=Math.sin(d),v=h-1,b=v%1/v;for(let A=0;A<=v;++A){const M=d+o+g*(A+b*A),J=Math.cos(M),te=-Math.sin(M);u.push((m*J+y*te)*s+i,(m*-te+y*J)*s+r)}}}class Vf{static curveLength(e,t,i,r,s,o,a,l){let c=0,h=0,d=0,g=0,m=0,y=0,v=0,b=0,A=0,w=0,M=0,J=e,te=t;for(let ie=1;ie<=10;++ie)h=ie/10,d=h*h,g=d*h,m=1-h,y=m*m,v=y*m,b=v*e+3*y*h*i+3*m*d*s+g*a,A=v*t+3*y*h*r+3*m*d*o+g*l,w=J-b,M=te-A,J=b,te=A,c+=Math.sqrt(w*w+M*M);return c}static curveTo(e,t,i,r,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const c=Ec._segmentsCount(Vf.curveLength(l,u,e,t,i,r,s,o));let h=0,d=0,g=0,m=0,y=0;a.push(l,u);for(let v=1,b=0;v<=c;++v)b=v/c,h=1-b,d=h*h,g=d*h,m=b*b,y=m*b,a.push(g*l+3*d*b*e+3*h*m*i+y*s,g*u+3*d*b*t+3*h*m*r+y*o)}}class Hf{static curveLength(e,t,i,r,s,o){const a=e-2*i+s,l=t-2*r+o,u=2*i-2*e,c=2*r-2*t,h=4*(a*a+l*l),d=4*(a*u+l*c),g=u*u+c*c,m=2*Math.sqrt(h+d+g),y=Math.sqrt(h),v=2*h*y,b=2*Math.sqrt(g),A=d/y;return(v*m+y*d*(m-b)+(4*g*h-d*d)*Math.log((2*y+A+m)/(A+b)))/(4*v)}static curveTo(e,t,i,r,s){const o=s[s.length-2],a=s[s.length-1],l=Ec._segmentsCount(Hf.curveLength(o,a,e,t,i,r));let u=0,c=0;for(let h=1;h<=l;++h){const d=h/l;u=o+(e-o)*d,c=a+(t-a)*d,s.push(u+(e+(i-e)*d-u)*d,c+(t+(r-t)*d-c)*d)}}}const Gf={[Zn.POLY]:Nv,[Zn.CIRC]:wc,[Zn.ELIP]:wc,[Zn.RECT]:SM,[Zn.RREC]:TM},kv=[],Cc=[];class jf{constructor(e,t=null,i=null,r=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=t,this.matrix=r,this.type=e.type}clone(){return new jf(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class DM{constructor(){this.reset()}begin(e,t,i){this.reset(),this.style=e,this.start=t,this.attribStart=i}end(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const Sl=new bt,AM=class extends eM{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Af,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let n=0;n<this.drawCalls.length;n++)this.drawCalls[n].texArray.clear(),Cc.push(this.drawCalls[n]);this.drawCalls.length=0;for(let n=0;n<this.batches.length;n++){const e=this.batches[n];e.reset(),kv.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(n,e=null,t=null,i=null){const r=new jf(n,e,t,i);return this.graphicsData.push(r),this.dirty++,this}drawHole(n,e=null){if(!this.graphicsData.length)return null;const t=new jf(n,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return t.lineStyle=i.lineStyle,i.holes.push(t),this.dirty++,this}destroy(){super.destroy();for(let n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(n){const e=this.graphicsData;for(let t=0;t<e.length;++t){const i=e[t];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(n,Sl):Sl.copyFrom(n),i.shape.contains(Sl.x,Sl.y))){let r=!1;if(i.holes)for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(Sl.x,Sl.y)){r=!0;break}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const n=this.uvs,e=this.graphicsData;let t=null,i=null;this.batches.length>0&&(t=this.batches[this.batches.length-1],i=t.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],u=l.fillStyle,c=l.lineStyle;Gf[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const g=0===d?u:c;if(!g.visible)continue;const y=this.indices.length,v=this.points.length/2;g.texture.baseTexture.wrapMode=oo.REPEAT,0===d?this.processFill(l):this.processLine(l);const b=this.points.length/2-v;0!==b&&(t&&!this._compareStyles(i,g)&&(t.end(y,v),t=null),t||(t=kv.pop()||new DM,t.begin(g,y,v),this.batches.push(t),i=g),this.addUvs(this.points,n,g.texture,v,b,g.matrix))}}const s=this.points.length/2;if(t&&t.end(this.indices.length,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(n,e){return!(!n||!e||n.texture.baseTexture!==e.texture.baseTexture||n.color+n.alpha!==e.color+e.alpha||!!n.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let n=0,e=this.graphicsData.length;n<e;n++){const t=this.graphicsData[n],i=t.fillStyle,r=t.lineStyle;if(i&&!i.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const n=this.batches;for(let e=0,t=n.length;e<t;e++){const i=n[e];for(let r=0;r<i.size;r++){const s=i.start+r;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const n=this.batches;for(let e=0;e<n.length;e++)if(n[e].style.native)return!1;return this.points.length<2*AM.BATCHABLE_SIZE}buildDrawCalls(){let n=++Vt._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Cc.push(this.drawCalls[c]);this.drawCalls.length=0;const e=this.colors,t=this.textureIds;let i=Cc.pop();i||(i=new yv,i.texArray=new vv),i.texArray.count=0,i.start=0,i.size=0,i.type=Yr.TRIANGLES;let r=0,s=null,o=0,a=!1,l=Yr.TRIANGLES,u=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const h=this.batches[c],d=8,g=h.style,m=g.texture.baseTexture;a!==!!g.native&&(a=!!g.native,l=a?Yr.LINES:Yr.TRIANGLES,s=null,r=d,n++),s!==m&&(s=m,m._batchEnabled!==n&&(r===d&&(n++,r=0,i.size>0&&(i=Cc.pop(),i||(i=new yv,i.texArray=new vv),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=l),m.touched=1,m._batchEnabled=n,m._batchLocation=r,m.wrapMode=oo.REPEAT,i.texArray.elements[i.texArray.count++]=m,r++)),i.size+=h.size,u+=h.size,o=m._batchLocation,this.addColors(e,g.color,g.alpha,h.attribSize,h.attribStart),this.addTextureIds(t,o,h.attribSize,h.attribStart)}Vt._globalBatch=n,this.packAttributes()}packAttributes(){const n=this.points,e=this.uvs,t=this.colors,i=this.textureIds,r=new ArrayBuffer(3*n.length*4),s=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<n.length/2;l++)s[a++]=n[2*l],s[a++]=n[2*l+1],s[a++]=e[2*l],s[a++]=e[2*l+1],o[a++]=t[l],s[a++]=i[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(n){n.holes.length?Nv.triangulate(n,this):Gf[n.type].triangulate(n,this)}processLine(n){Fv(n,this);for(let e=0;e<n.holes.length;e++)Fv(n.holes[e],this)}processHoles(n){for(let e=0;e<n.length;e++){const t=n[e];Gf[t.type].build(t),t.matrix&&this.transformPoints(t.points,t.matrix)}}calculateBounds(){const n=this._bounds;n.clear(),n.addVertexData(this.points,0,this.points.length),n.pad(this.boundsPadding,this.boundsPadding)}transformPoints(n,e){for(let t=0;t<n.length/2;t++){const i=n[2*t],r=n[2*t+1];n[2*t]=e.a*i+e.c*r+e.tx,n[2*t+1]=e.b*i+e.d*r+e.ty}}addColors(n,e,t,i,r=0){const o=ev((e>>16)+(65280&e)+((255&e)<<16),t);n.length=Math.max(n.length,r+i);for(let a=0;a<i;a++)n[r+a]=o}addTextureIds(n,e,t,i=0){n.length=Math.max(n.length,i+t);for(let r=0;r<t;r++)n[i+r]=e}addUvs(n,e,t,i,r,s=null){let o=0;const a=e.length,l=t.frame;for(;o<r;){let c=n[2*(i+o)],h=n[2*(i+o)+1];if(s){const d=s.a*c+s.c*h+s.tx;h=s.b*c+s.d*h+s.ty,c=d}o++,e.push(c/l.width,h/l.height)}const u=t.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(e,t,a,r)}adjustUvs(n,e,t,i){const r=e.baseTexture,s=1e-6,o=t+2*i,a=e.frame,l=a.width/r.width,u=a.height/r.height;let c=a.x/a.width,h=a.y/a.height,d=Math.floor(n[t]+s),g=Math.floor(n[t+1]+s);for(let m=t+2;m<o;m+=2)d=Math.min(d,Math.floor(n[m]+s)),g=Math.min(g,Math.floor(n[m+1]+s));c-=d,h-=g;for(let m=t;m<o;m+=2)n[m]=(n[m]+c)*l,n[m+1]=(n[m+1]+h)*u}};let IM=AM;IM.BATCHABLE_SIZE=100;class Bv extends Uf{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ia.BUTT,this.join=fo.MITER,this.miterLimit=10}clone(){const e=new Bv;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const k7=new Float32Array(3),Uv={},$f=class extends cr{constructor(n=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Uf,this._lineStyle=new Bv,this._matrix=null,this._holeMode=!1,this.state=Ns.for2d(),this._geometry=n||new IM,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=Ye.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new $f(this._geometry)}set blendMode(n){this.state.blendMode=n}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(n){this._tint=n}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(n=null,e=0,t=1,i=.5,r=!1){return"number"==typeof n&&(n={width:n,color:e,alpha:t,alignment:i,native:r}),this.lineTextureStyle(n)}lineTextureStyle(n){n=Object.assign({width:0,texture:xe.WHITE,color:n?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ia.BUTT,join:fo.MITER,miterLimit:10},n),this.currentPath&&this.startPoly();const e=n.width>0&&n.alpha>0;return e?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._lineStyle,{visible:e},n)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const n=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new ml,this.currentPath.closeStroke=!1,this.currentPath.points.push(n[e-2],n[e-1]))}else this.currentPath=new ml,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(n,e){return this.startPoly(),this.currentPath.points[0]=n,this.currentPath.points[1]=e,this}lineTo(n,e){this.currentPath||this.moveTo(0,0);const t=this.currentPath.points;return(t[t.length-2]!==n||t[t.length-1]!==e)&&t.push(n,e),this}_initCurve(n=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[n,e]):this.moveTo(n,e)}quadraticCurveTo(n,e,t,i){this._initCurve();const r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),Hf.curveTo(n,e,t,i,r),this}bezierCurveTo(n,e,t,i,r,s){return this._initCurve(),Vf.curveTo(n,e,t,i,r,s,this.currentPath.points),this}arcTo(n,e,t,i,r){this._initCurve(n,e);const o=Lv.curveTo(n,e,t,i,r,this.currentPath.points);if(o){const{cx:a,cy:l,radius:u,startAngle:c,endAngle:h,anticlockwise:d}=o;this.arc(a,l,u,c,h,d)}return this}arc(n,e,t,i,r,s=!1){if(i===r)return this;if(!s&&r<=i?r+=hf:s&&i<=r&&(i+=hf),r-i==0)return this;const a=n+Math.cos(i)*t,l=e+Math.sin(i)*t,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);h<u&&d<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return Lv.arc(a,l,n,e,t,i,r,s,c),this}beginFill(n=0,e=1){return this.beginTextureFill({texture:xe.WHITE,color:n,alpha:e})}beginTextureFill(n){n=Object.assign({texture:xe.WHITE,color:16777215,alpha:1,matrix:null},n),this.currentPath&&this.startPoly();const e=n.alpha>0;return e?(n.matrix&&(n.matrix=n.matrix.clone(),n.matrix.invert()),Object.assign(this._fillStyle,{visible:e},n)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(n,e,t,i){return this.drawShape(new Ot(n,e,t,i))}drawRoundedRect(n,e,t,i,r){return this.drawShape(new Xy(n,e,t,i,r))}drawCircle(n,e,t){return this.drawShape(new Wy(n,e,t))}drawEllipse(n,e,t,i){return this.drawShape(new zy(n,e,t,i))}drawPolygon(...n){let e,t=!0;const i=n[0];i.points?(t=i.closeStroke,e=i.points):e=Array.isArray(n[0])?n[0]:n;const r=new ml(e);return r.closeStroke=t,this.drawShape(r),this}drawShape(n){return this._holeMode?this._geometry.drawHole(n,this._matrix):this._geometry.drawShape(n,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const n=this._geometry.graphicsData;return!(1!==n.length||n[0].shape.type!==Zn.RECT||n[0].matrix||n[0].holes.length||n[0].lineStyle.visible&&n[0].lineStyle.width)}_render(n){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(n)):(n.batch.flush(),this._renderDirect(n))}_populateBatches(){const n=this._geometry,e=this.blendMode,t=n.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=n.batchDirty,this.batches.length=t,this.vertexData=new Float32Array(n.points);for(let i=0;i<t;i++){const r=n.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(n.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),u={vertexData:o,blendMode:e,indices:new Uint16Array(n.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:cc(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(n){if(this.batches.length){n.batch.setObjectRenderer(n.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,t=this.batches.length;e<t;e++){const i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,n.plugins[this.pluginName].render(i)}}}_renderDirect(n){const e=this._resolveDirectShader(n),t=this._geometry,i=this.tint,r=this.worldAlpha,s=e.uniforms,o=t.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*r,s.tint[1]=(i>>8&255)/255*r,s.tint[2]=(255&i)/255*r,s.tint[3]=r,n.shader.bind(e),n.geometry.bind(t,e),n.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(n,t.drawCalls[a])}_renderDrawCallDirect(n,e){const{texArray:t,type:i,size:r,start:s}=e,o=t.count;for(let a=0;a<o;a++)n.texture.bind(t.elements[a],a);n.geometry.draw(i,r,s)}_resolveDirectShader(n){let e=this.shader;const t=this.pluginName;if(!e){if(!Uv[t]){const{MAX_TEXTURES:i}=n.plugins[t],r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new pn,default:Ir.from({uSamplers:r},!0)};Uv[t]=new Jr(n.plugins[t]._shader.program,s)}e=Uv[t]}return e}_calculateBounds(){this.finishPoly();const n=this._geometry;if(!n.graphicsData.length)return;const{minX:e,minY:t,maxX:i,maxY:r}=n.bounds;this._bounds.addFrame(this.transform,e,t,i,r)}containsPoint(n){return this.worldTransform.applyInverse(n,$f._TEMP_POINT),this._geometry.containsPoint($f._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const n=cc(this.tint,k7);for(let e=0;e<this.batches.length;e++){const t=this.batches[e],i=t._batchRGB,a=(n[0]*i[0]*255<<16)+(n[1]*i[1]*255<<8)+(0|n[2]*i[2]*255);t._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}}calculateVertices(){const n=this.transform._worldID;if(this._transformID===n)return;this._transformID=n;const e=this.transform.worldTransform,t=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData;let c=0;for(let h=0;h<l.length;h+=2){const d=l[h],g=l[h+1];u[c++]=t*d+r*g+o,u[c++]=s*g+i*d+a}}closePath(){const n=this.currentPath;return n&&(n.closeStroke=!0,this.finishPoly()),this}setMatrix(n){return this._matrix=n,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(n){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(n)}};let Tl=$f;Tl._TEMP_POINT=new bt;class B7{constructor(e,t){this.uvBuffer=e,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}const Vv=new bt,MM=new ml,RM=class extends cr{constructor(n,e,t,i=Yr.TRIANGLES){super(),this.geometry=n,this.shader=e,this.state=t||Ns.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=se.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(n){this._geometry!==n&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=n,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(n){this.shader=n}get material(){return this.shader}set blendMode(n){this.state.blendMode=n}get blendMode(){return this.state.blendMode}set roundPixels(n){this._roundPixels!==n&&(this._transformID=-1),this._roundPixels=n}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(n){this.shader.tint=n}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(n){this.shader.texture=n}_render(n){this.shader.batchable&&this.drawMode===Yr.TRIANGLES&&this.geometry.buffers[0].data.length<2*RM.BATCHABLE_SIZE?this._renderToBatch(n):this._renderDefault(n)}_renderDefault(n){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),n.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),n.shader.bind(e),n.state.set(this.state),n.geometry.bind(this.geometry,e),n.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(n){const e=this.geometry,t=this.shader;t.uvMatrix&&(t.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=t._tintRGB,this._texture=t.texture;const i=this.material.pluginName;n.batch.setObjectRenderer(n.plugins[i]),n.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],t=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,u=r.tx,c=r.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const g=t[2*d],m=t[2*d+1];h[2*d]=s*g+a*m+u,h[2*d+1]=o*g+l*m+c}if(this._roundPixels){const d=se.RESOLUTION;for(let g=0;g<h.length;++g)h[g]=Math.round(h[g]*d)/d}this.vertexDirty=i}calculateUvs(){const n=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=n.data:(this.batchUvs||(this.batchUvs=new B7(n,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(n){if(!this.getBounds().contains(n.x,n.y))return!1;this.worldTransform.applyInverse(n,Vv);const e=this.geometry.getBuffer("aVertexPosition").data,t=MM.points,i=this.geometry.getIndex().data,r=i.length,s=4===this.drawMode?3:1;for(let o=0;o+2<r;o+=s){const a=2*i[o],l=2*i[o+1],u=2*i[o+2];if(t[0]=e[a],t[1]=e[a+1],t[2]=e[l],t[3]=e[l+1],t[4]=e[u],t[5]=e[u+1],MM.contains(Vv.x,Vv.y))return!0}return!1}destroy(n){super.destroy(n),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let Hv=RM;Hv.BATCHABLE_SIZE=100;class PM extends Jr{constructor(e,t){const i={uSampler:e,alpha:1,uTextureMatrix:pn.IDENTITY,uColor:new Float32Array([1,1,1,1])};(t=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},t)).uniforms&&Object.assign(i,t.uniforms),super(t.program||Os.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new I1(e),this.batchable=void 0===t.program,this.pluginName=t.pluginName,this.tint=t.tint,this.alpha=t.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){this._colorDirty&&(this._colorDirty=!1,e1(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class H7 extends ho{constructor(e,t,i){super();const r=new Pn(e),s=new Pn(t,!0),o=new Pn(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,Ve.FLOAT).addAttribute("aTextureCoord",s,2,!1,Ve.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class OM{constructor(e,t,i){this.geometry=new ho,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let s=e[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||Ve.FLOAT,offset:s.offset},t[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let t=0;this.indexBuffer=new Pn(function Bz(n,e=null){const t=6*n;if((e=e||new Uint16Array(t)).length!==t)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${t}`);for(let i=0,r=0;i<t;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=t,t+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Pn(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Pn(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===Ve.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===Ve.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}}uploadDynamic(e,t,i){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(e,t,i,s.type===Ve.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,t,i){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(e,t,i,s.type===Ve.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class NM extends bf{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new pn,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Ve.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Jr.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Ns.for2d()}render(e){const t=e.children,i=e._maxSize,r=e._batchSize,s=this.renderer;let o=t.length;if(0===o)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=t[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=JI(e.blendMode,u),s.state.set(this.state);const c=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=function kz(n,e,t,i){return t=t||new Float32Array(4),i||void 0===i?(t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e):(t[0]=n[0],t[1]=n[1],t[2]=n[2]),t[3]=e,t}(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let g=0,m=0;g<o;g+=r,m+=1){let y=o-g;y>r&&(y=r),m>=a.length&&a.push(this._generateOneMoreBuffer(e));const v=a[m];v.uploadDynamic(t,g,y);const b=e._bufferUpdateIDs[m]||0;d=d||v._updateID<b,d&&(v._updateID=e._updateID,v.uploadStatic(t,g,y)),s.geometry.bind(v.geometry),c.drawElements(c.TRIANGLES,6*y,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const t=[],i=e._maxSize,r=e._batchSize,s=e._properties;for(let o=0;o<i;o+=r)t.push(new OM(this.properties,s,r));return t}_generateOneMoreBuffer(e){return new OM(this.properties,e._properties,e._batchSize)}uploadVertices(e,t,i,r,s,o){let a=0,l=0,u=0,c=0;for(let h=0;h<i;++h){const d=e[t+h],g=d._texture,m=d.scale.x,y=d.scale.y,v=g.trim,b=g.orig;v?(l=v.x-d.anchor.x*b.width,a=l+v.width,c=v.y-d.anchor.y*b.height,u=c+v.height):(a=b.width*(1-d.anchor.x),l=b.width*-d.anchor.x,u=b.height*(1-d.anchor.y),c=b.height*-d.anchor.y),r[o]=l*m,r[o+1]=c*y,r[o+s]=a*m,r[o+s+1]=c*y,r[o+2*s]=a*m,r[o+2*s+1]=u*y,r[o+3*s]=l*m,r[o+3*s+1]=u*y,o+=4*s}}uploadPosition(e,t,i,r,s,o){for(let a=0;a<i;a++){const l=e[t+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+2*s]=l.x,r[o+2*s+1]=l.y,r[o+3*s]=l.x,r[o+3*s+1]=l.y,o+=4*s}}uploadRotation(e,t,i,r,s,o){for(let a=0;a<i;a++){const l=e[t+a].rotation;r[o]=l,r[o+s]=l,r[o+2*s]=l,r[o+3*s]=l,o+=4*s}}uploadUvs(e,t,i,r,s,o){for(let a=0;a<i;++a){const l=e[t+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+2*s]=l.x2,r[o+2*s+1]=l.y2,r[o+3*s]=l.x3,r[o+3*s+1]=l.y3,o+=4*s):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+2*s]=0,r[o+2*s+1]=0,r[o+3*s]=0,r[o+3*s+1]=0,o+=4*s)}}uploadTint(e,t,i,r,s,o){for(let a=0;a<i;++a){const l=e[t+a],u=l._texture.baseTexture.alphaMode>0,c=l.alpha,h=c<1&&u?ev(l._tintRGB,c):l._tintRGB+(255*c<<24);r[o]=h,r[o+s]=h,r[o+2*s]=h,r[o+3*s]=h,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}NM.extension={name:"particle",type:ve.RendererPlugin},Le.add(NM),se.UPLOADS_PER_FRAME=4;var zf=(n=>(n[n.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",n[n.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",n))(zf||{});const Gv={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:zf.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},$7=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class po{constructor(e){this.styleID=0,this.reset(),$v(this,e,e)}clone(){const e={};return $v(e,this,Gv),new po(e)}reset(){$v(this,Gv,Gv)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=jv(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=jv(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function W7(n,e){if(!Array.isArray(n)||!Array.isArray(e)||n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(n[t]!==e[t])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=jv(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let r=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!$7.includes(r)&&(r=`"${r}"`),t[i]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}}function FM(n){return"number"==typeof n?ZI(n):("string"==typeof n&&n.startsWith("0x")&&(n=n.replace("0x","#")),n)}function jv(n){if(Array.isArray(n)){for(let e=0;e<n.length;++e)n[e]=FM(n[e]);return n}return FM(n)}function $v(n,e,t){for(const i in t)n[i]=Array.isArray(e[i])?e[i].slice():e[i]}const Xf={willReadFrequently:!0};let Wv=(()=>{class n{constructor(t,i,r,s,o,a,l,u,c){this.text=t,this.style=i,this.width=r,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=u,this.fontProperties=c}static measureText(t,i,r,s=n._canvas){r=r??i.wordWrap;const o=i.toFontString(),a=n.measureFont(o);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);const l=s.getContext("2d",Xf);l.font=o;const c=(r?n.wordWrap(t,i,s):t).split(/(?:\r\n|\r|\n)/),h=new Array(c.length);let d=0;for(let v=0;v<c.length;v++){const b=l.measureText(c[v]).width+(c[v].length-1)*i.letterSpacing;h[v]=b,d=Math.max(d,b)}let g=d+i.strokeThickness;i.dropShadow&&(g+=i.dropShadowDistance);const m=i.lineHeight||a.fontSize+i.strokeThickness;let y=Math.max(m,a.fontSize+2*i.strokeThickness)+(c.length-1)*(m+i.leading);return i.dropShadow&&(y+=i.dropShadowDistance),new n(t,i,g,y,c,h,m+i.leading,d,a)}static wordWrap(t,i,r=n._canvas){const s=r.getContext("2d",Xf);let o=0,a="",l="";const u=Object.create(null),{letterSpacing:c,whiteSpace:h}=i,d=n.collapseSpaces(h),g=n.collapseNewlines(h);let m=!d;const y=i.wordWrapWidth+c,v=n.tokenize(t);for(let b=0;b<v.length;b++){let A=v[b];if(n.isNewline(A)){if(!g){l+=n.addLine(a),m=!d,a="",o=0;continue}A=" "}if(d){const M=n.isBreakingSpace(A),J=n.isBreakingSpace(a[a.length-1]);if(M&&J)continue}const w=n.getFromCache(A,c,u,s);if(w>y)if(""!==a&&(l+=n.addLine(a),a="",o=0),n.canBreakWords(A,i.breakWords)){const M=n.wordWrapSplit(A);for(let J=0;J<M.length;J++){let te=M[J],ie=1;for(;M[J+ie];){const Oe=M[J+ie];if(n.canBreakChars(te[te.length-1],Oe,A,J,i.breakWords))break;te+=Oe,ie++}J+=te.length-1;const oe=n.getFromCache(te,c,u,s);oe+o>y&&(l+=n.addLine(a),m=!1,a="",o=0),a+=te,o+=oe}}else a.length>0&&(l+=n.addLine(a),a="",o=0),l+=n.addLine(A,!(b===v.length-1)),m=!1,a="",o=0;else w+o>y&&(m=!1,l+=n.addLine(a),a="",o=0),(a.length>0||!n.isBreakingSpace(A)||m)&&(a+=A,o+=w)}return l+=n.addLine(a,!1),l}static addLine(t,i=!0){return t=n.trimRight(t),i?`${t}\n`:t}static getFromCache(t,i,r,s){let o=r[t];if("number"!=typeof o){const a=t.length*i;o=s.measureText(t).width+a,r[t]=o}return o}static collapseSpaces(t){return"normal"===t||"pre-line"===t}static collapseNewlines(t){return"normal"===t}static trimRight(t){if("string"!=typeof t)return"";for(let i=t.length-1;i>=0&&n.isBreakingSpace(t[i]);i--)t=t.slice(0,-1);return t}static isNewline(t){return"string"==typeof t&&n._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,i){return"string"==typeof t&&n._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const i=[];let r="";if("string"!=typeof t)return i;for(let s=0;s<t.length;s++){const o=t[s];n.isBreakingSpace(o,t[s+1])||n.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i}static canBreakWords(t,i){return i}static canBreakChars(t,i,r,s,o){return!0}static wordWrapSplit(t){return t.split("")}static measureFont(t){if(n._fonts[t])return n._fonts[t];const i={ascent:0,descent:0,fontSize:0},r=n._canvas,s=n._context;s.font=t;const o=n.METRICS_STRING+n.BASELINE_SYMBOL,a=Math.ceil(s.measureText(o).width);let l=Math.ceil(s.measureText(n.BASELINE_SYMBOL).width);const u=Math.ceil(n.HEIGHT_MULTIPLIER*l);l=l*n.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,s.fillStyle="#f00",s.fillRect(0,0,a,u),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);const c=s.getImageData(0,0,a,u).data,h=c.length,d=4*a;let g=0,m=0,y=!1;for(g=0;g<l;++g){for(let v=0;v<d;v+=4)if(255!==c[m+v]){y=!0;break}if(y)break;m+=d}for(i.ascent=l-g,m=h-d,y=!1,g=u;g>l;--g){for(let v=0;v<d;v+=4)if(255!==c[m+v]){y=!0;break}if(y)break;m-=d}return i.descent=g-l,i.fontSize=i.ascent+i.descent,n._fonts[t]=i,i}static clearMetrics(t=""){t?delete n._fonts[t]:n._fonts={}}static get _canvas(){if(!n.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",Xf)?.measureText)return n.__canvas=i,i;t=se.ADAPTER.createCanvas()}catch{t=se.ADAPTER.createCanvas()}t.width=t.height=10,n.__canvas=t}return n.__canvas}static get _context(){return n.__context||(n.__context=n._canvas.getContext("2d",Xf)),n.__context}}return n._fonts={},n.METRICS_STRING="|\xc9q\xc5",n.BASELINE_SYMBOL="M",n.BASELINE_MULTIPLIER=1.4,n.HEIGHT_MULTIPLIER=2,n._newlines=[10,13],n._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],n})();const z7={texture:!0,children:!1,baseTexture:!0},LM=class extends ta{constructor(n,e,t){let i=!1;t||(t=se.ADAPTER.createCanvas(),i=!0),t.width=3,t.height=3;const r=xe.from(t);r.orig=new Ot,r.trim=new Ot,super(r),this._ownCanvas=i,this.canvas=t,this.context=t.getContext("2d",{willReadFrequently:!0}),this._resolution=se.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=n,this.style=e,this.localStyleID=-1}updateText(n){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&n)return;this._font=this._style.toFontString();const t=this.context,i=Wv.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,u=i.maxLineWidth,c=i.fontProperties;let h,d;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),t.scale(this._resolution,this._resolution),t.clearRect(0,0,this.canvas.width,this.canvas.height),t.font=this._font,t.lineWidth=e.strokeThickness,t.textBaseline=e.textBaseline,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit;const g=e.dropShadow?2:1;for(let m=0;m<g;++m){const y=e.dropShadow&&0===m,v=y?Math.ceil(Math.max(1,s)+2*e.padding):0,b=v*this._resolution;if(y){t.fillStyle="black",t.strokeStyle="black";const w=e.dropShadowColor,M=cc("number"==typeof w?w:Jy(w)),J=e.dropShadowBlur*this._resolution,te=e.dropShadowDistance*this._resolution;t.shadowColor=`rgba(${255*M[0]},${255*M[1]},${255*M[2]},${e.dropShadowAlpha})`,t.shadowBlur=J,t.shadowOffsetX=Math.cos(e.dropShadowAngle)*te,t.shadowOffsetY=Math.sin(e.dropShadowAngle)*te+b}else t.fillStyle=this._generateFillStyle(e,o,i),t.strokeStyle=e.stroke,t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;let A=(a-c.fontSize)/2;a-c.fontSize<0&&(A=0);for(let w=0;w<o.length;w++)h=e.strokeThickness/2,d=e.strokeThickness/2+w*a+c.ascent+A,"right"===e.align?h+=u-l[w]:"center"===e.align&&(h+=(u-l[w])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[w],h+e.padding,d+e.padding-v,!0),e.fill&&this.drawLetterSpacing(o[w],h+e.padding,d+e.padding-v)}this.updateTexture()}drawLetterSpacing(n,e,t,i=!1){const s=this._style.letterSpacing,o=LM.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===s||o)return o&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(i?this.context.strokeText(n,e,t):this.context.fillText(n,e,t));let a=e;const l=Array.from?Array.from(n):n.split("");let u=this.context.measureText(n).width,c=0;for(let h=0;h<l.length;++h){const d=l[h];i?this.context.strokeText(d,a,t):this.context.fillText(d,a,t);let g="";for(let m=h+1;m<l.length;++m)g+=l[m];c=this.context.measureText(g).width,a+=u-c+s,u=c}}updateTexture(){const n=this.canvas;if(this._style.trim){const s=function Hz(n){let{width:e,height:t}=n;const i=n.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,e,t).data;let o=0,a=t-1,l=0,u=e-1;for(;o<t&&s1(s,e,o);)++o;if(o===t)return{width:0,height:0,data:null};for(;s1(s,e,a);)--a;for(;o1(s,e,l,o,a);)++l;for(;o1(s,e,u,o,a);)--u;return e=u-l+1,t=a-o+1,{width:e,height:t,data:i.getImageData(l,o,e,t)}}(n);s.data&&(n.width=s.width,n.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,t=this._style,i=t.trim?0:t.padding,r=e.baseTexture;e.trim.width=e._frame.width=n.width/this._resolution,e.trim.height=e._frame.height=n.height/this._resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),r.setRealSize(n.width,n.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0),this.updateText(!0),super._render(n)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(n,e){return this.updateText(!0),-1===this._textureID&&(n=!1),super.getBounds(n,e)}getLocalBounds(n){return this.updateText(!0),super.getLocalBounds.call(this,n)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(n,e,t){const i=n.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let r;const s=n.dropShadow?n.dropShadowDistance:0,o=n.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,u=i.slice(),c=n.fillGradientStops.slice();if(!c.length){const h=u.length+1;for(let d=1;d<h;++d)c.push(d/h)}if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),n.fillGradientType===zf.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const h=t.fontProperties.fontSize+n.strokeThickness;for(let d=0;d<e.length;d++){const g=t.lineHeight*(d-1)+h,m=t.lineHeight*d;let y=m;d>0&&g>m&&(y=(m+g)/2);const v=m+h,b=t.lineHeight*(d+1);let A=v;d+1<e.length&&b<v&&(A=(v+b)/2);const w=(A-y)/l;for(let M=0;M<u.length;M++){let J=0;J="number"==typeof c[M]?c[M]:M/u.length;let te=Math.min(1,Math.max(0,y/l+J*w));te=Number(te.toFixed(5)),r.addColorStop(te,u[M])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const h=u.length+1;let d=1;for(let g=0;g<u.length;g++){let m;m="number"==typeof c[g]?c[g]:d/h,r.addColorStop(m,u[g]),d++}}return r}destroy(n){"boolean"==typeof n&&(n={children:n}),n=Object.assign({},z7,n),super.destroy(n),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(n){this.updateText(!0);const e=vl(this.scale.x)||1;this.scale.x=e*n/this._texture.orig.width,this._width=n}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(n){this.updateText(!0);const e=vl(this.scale.y)||1;this.scale.y=e*n/this._texture.orig.height,this._height=n}get style(){return this._style}set style(n){this._style=(n=n||{})instanceof po?n:new po(n),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)}get resolution(){return this._resolution}set resolution(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)}};let zv=LM;zv.experimentalLetterSpacing=!1;class X7{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function q7(n,e){let t=!1;if(n?._textures?.length)for(let i=0;i<n._textures.length;i++)if(n._textures[i]instanceof xe){const r=n._textures[i].baseTexture;e.includes(r)||(e.push(r),t=!0)}return t}function Y7(n,e){if(n.baseTexture instanceof Vt){const t=n.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function K7(n,e){if(n._texture&&n._texture instanceof xe){const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function Z7(n,e){return e instanceof zv&&(e.updateText(!0),!0)}function Q7(n,e){if(e instanceof po){const t=e.toFontString();return Wv.measureFont(t),!0}return!1}function J7(n,e){if(n instanceof zv){e.includes(n.style)||e.push(n.style),e.includes(n)||e.push(n);const t=n._texture.baseTexture;return e.includes(t)||e.push(t),!0}return!1}function e9(n,e){return n instanceof po&&(e.includes(n)||e.push(n),!0)}class t9{constructor(e){this.limiter=new X7(se.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(J7),this.registerFindHook(e9),this.registerFindHook(q7),this.registerFindHook(Y7),this.registerFindHook(K7),this.registerUploadHook(Z7),this.registerUploadHook(Q7)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,Hn.system.addOnce(this.tick,this,_l.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed)for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Hn.system.addOnce(this.tick,this,_l.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof cr)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&Hn.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function kM(n,e){return e instanceof Vt&&(e._glTextures[n.CONTEXT_UID]||n.texture.bind(e),!0)}function n9(n,e){if(!(e instanceof Tl))return!1;const{geometry:t}=e;e.finishPoly(),t.updateBatches();const{batches:i}=t;for(let r=0;r<i.length;r++){const{texture:s}=i[r].style;s&&kM(n,s.baseTexture)}return t.batchable||n.geometry.bind(t,e._resolveDirectShader(n)),!0}function i9(n,e){return n instanceof Tl&&(e.push(n),!0)}class BM extends t9{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(i9),this.registerUploadHook(kM),this.registerUploadHook(n9)}}BM.extension={name:"prepare",type:ve.RendererSystem},Le.add(BM);const Sc=class{constructor(n,e,t=null){this.linkedSheets=[],this._texture=n instanceof xe?n:null,this.baseTexture=n instanceof Vt?n:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const i=this.baseTexture.resource;this.resolution=this._updateResolution(t||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(n=null){const{scale:e}=this.data.meta;let t=lo(n,null);return null===t&&(t=parseFloat(e??"1")),1!==t&&this.baseTexture.setResolution(t),t}parse(){return new Promise(n=>{this._callback=n,this._batchIndex=0,this._frameKeys.length<=Sc.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(n){let e=n;const t=Sc.BATCH_SIZE;for(;e-n<t&&e<this._frameKeys.length;){const i=this._frameKeys[e],r=this._frames[i],s=r.frame;if(s){let o=null,a=null;const l=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,u=new Ot(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=r.rotated?new Ot(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new Ot(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(a=new Ot(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new xe(this.baseTexture,o,u,a,r.rotated?2:0,r.anchor),xe.addToCache(this.textures[i],i)}e++}}_processAnimations(){const n=this.data.animations||{};for(const e in n){this.animations[e]=[];for(let t=0;t<n[e].length;t++)this.animations[e].push(this.textures[n[e][t]])}}_parseComplete(){const n=this._callback;this._callback=null,this._batchIndex=0,n.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Sc.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Sc.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(n=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,n&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Xv=Sc;Xv.BATCH_SIZE=1e3;const r9=["jpg","png","jpeg","avif","webp"];function UM(n,e,t){const i={};if(n.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!t){const r=Qn.dirname(n[0]);e.linkedSheets.forEach((s,o)=>{const a=UM([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const s9={extension:ve.Asset,cache:{test:n=>n instanceof Xv,getCacheableAssets:(n,e)=>UM(n,e,!1)},resolver:{test:n=>{const t=n.split("?")[0].split("."),i=t.pop(),r=t.pop();return"json"===i&&r9.includes(r)},parse:n=>{const e=n.split(".");return{resolution:parseFloat(se.RETINA_PREFIX.exec(n)?.[1]??"1"),format:e[e.length-2],src:n}}},loader:{extension:{type:ve.LoadParser,priority:es.Normal},testParse:(n,e)=>et(function*(){return Qn.extname(e.src).includes(".json")&&!!n.frames})(),parse:(n,e,t)=>et(function*(){let i=Qn.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const r=i+n.meta.image,o=(yield t.load([r]))[r],a=new Xv(o.baseTexture,n,e.src);yield a.parse();const l=n?.meta?.related_multi_packs;if(Array.isArray(l)){const u=[];for(const h of l){if("string"!=typeof h)continue;const d=i+h;e.data?.ignoreMultiPack||u.push(t.load({src:d,data:{ignoreMultiPack:!0}}))}const c=yield Promise.all(u);a.linkedSheets=c,c.forEach(h=>{h.linkedSheets=[a].concat(a.linkedSheets.filter(d=>d!==h))})}return a})(),unload(n){n.destroy(!0)}}};Le.add(s9),new bt;var HM="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const qf=new pn;class GM extends bf{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new m1,this.state=Ns.for2d()}contextChange(){const e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Jr.from(HM,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?Jr.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):Jr.from(HM,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}render(e){const t=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=i.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[t.CONTEXT_UID]?d=l.wrapMode!==oo.CLAMP:l.wrapMode===oo.CLAMP&&(l.wrapMode=oo.REPEAT));const g=d?this.simpleShader:this.shader,m=a.width,y=a.height,v=e._width,b=e._height;qf.set(c.a*m/v,c.b*m/b,c.c*y/v,c.d*y/b,c.tx/v,c.ty/b),qf.invert(),d?qf.prepend(h.mapCoord):(g.uniforms.uMapCoord=h.mapCoord.toArray(!0),g.uniforms.uClampFrame=h.uClampFrame,g.uniforms.uClampOffset=h.uClampOffset),g.uniforms.uTransform=qf.toArray(!0),g.uniforms.uColor=e1(e.tint,e.worldAlpha,g.uniforms.uColor,u),g.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),g.uniforms.uSampler=a,t.shader.bind(g),t.geometry.bind(i),this.state.blendMode=JI(e.blendMode,u),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}GM.extension={name:"tilingSprite",type:ve.RendererPlugin},Le.add(GM);class Yf{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Kf{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const t=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in t){const o=t[s].match(/^[a-z]+/gm)[0],a=t[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const c=a[u].split("="),h=c[0],d=c[1].replace(/"/gm,""),g=parseFloat(d),m=isNaN(g)?d:g;l[h]=m}i[o].push(l)}const r=new Yf;return i.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class Yv{static test(e){const t=e;return"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const t=new Yf,i=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)t.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<r.length;u++)t.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)t.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const c=o[u];t.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)t.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)t.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return t}}class Kv{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&Yv.test(se.ADAPTER.parseXML(e))}static parse(e){return Yv.parse(se.ADAPTER.parseXML(e))}}const Zv=[Kf,Yv,Kv];function d9(n,e,t,i,r,s,o){const a=t.text,l=t.fontProperties;e.translate(i,r),e.scale(s,s);const u=o.strokeThickness/2,c=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function h9(n,e,t,i,r,s){const o=t.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,c=n.width/i-l-2*u,h=n.height/i-l-2*u,d=o.slice(),g=t.fillGradientStops.slice();if(!g.length){const m=d.length+1;for(let y=1;y<m;++y)g.push(y/m)}if(d.unshift(o[0]),g.unshift(0),d.push(o[o.length-1]),g.push(1),t.fillGradientType===zf.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,h+u);let m=0;const v=(s.fontProperties.fontSize+t.strokeThickness)/h;for(let b=0;b<r.length;b++){const A=s.lineHeight*b;for(let w=0;w<d.length;w++){let M=0;M="number"==typeof g[w]?g[w]:w/d.length;let te=Math.max(m,A/h+M*v);te=Math.min(te,1),a.addColorStop(te,d[w]),m=te}}}else{a=e.createLinearGradient(u,h/2,c+u,h/2);const m=d.length+1;let y=1;for(let v=0;v<d.length;v++){let b;b="number"==typeof g[v]?g[v]:y/m,a.addColorStop(b,d[v]),y++}}return a}(n,e,o,s,[a],t),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,d=cc("number"==typeof h?h:Jy(h)),g=o.dropShadowBlur*s,m=o.dropShadowDistance*s;e.shadowColor=`rgba(${255*d[0]},${255*d[1]},${255*d[2]},${o.dropShadowAlpha})`,e.shadowBlur=g,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*m,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*m}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,c+t.lineHeight-l.descent),o.fill&&e.fillText(a,u,c+t.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function jM(n){return Array.from?Array.from(n):n.split("")}function Zf(n){return n.codePointAt?n.codePointAt(0):n.charCodeAt(0)}const Or=class{constructor(n,e,t){const[i]=n.info,[r]=n.common,[s]=n.page,[o]=n.distanceField,a=lo(s.file),l={};this._ownsTextures=t,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let u=0;u<n.page.length;u++){const{id:c,file:h}=n.page[u];l[c]=e instanceof Array?e[u]:e[h],o?.fieldType&&"none"!==o.fieldType&&(l[c].baseTexture.alphaMode=xr.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=Kr.OFF)}for(let u=0;u<n.char.length;u++){const{id:c,page:h}=n.char[u];let{x:d,y:g,width:m,height:y,xoffset:v,yoffset:b,xadvance:A}=n.char[u];d/=a,g/=a,m/=a,y/=a,v/=a,b/=a,A/=a;const w=new Ot(d+l[h].frame.x/a,g+l[h].frame.y/a,m,y);this.chars[c]={xOffset:v,yOffset:b,xAdvance:A,kerning:{},texture:new xe(l[h].baseTexture,w),page:h}}for(let u=0;u<n.kerning.length;u++){let{first:c,second:h,amount:d}=n.kerning[u];c/=a,h/=a,d/=a,this.chars[h]&&(this.chars[h].kerning[c]=d)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const n in this.chars)this.chars[n].texture.destroy(),this.chars[n].texture=null;for(const n in this.pageTextures)this._ownsTextures&&this.pageTextures[n].destroy(!0),this.pageTextures[n]=null;this.chars=null,this.pageTextures=null}static install(n,e,t){let i;if(n instanceof Yf)i=n;else{const s=function c9(n){for(let e=0;e<Zv.length;e++)if(Zv[e].test(n))return Zv[e];return null}(n);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(n)}e instanceof xe&&(e=[e]);const r=new Or(i,e,t);return Or.available[r.font]=r,r}static uninstall(n){const e=Or.available[n];if(!e)throw new Error(`No font found named '${n}'`);e.destroy(),delete Or.available[n]}static from(n,e,t){if(!n)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:r,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},Or.defaultOptions,t),u=function f9(n){"string"==typeof n&&(n=[n]);const e=[];for(let t=0,i=n.length;t<i;t++){const r=n[t];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...jM(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i),c=e instanceof po?e:new po(e),h=o,d=new Yf;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let y,v,b,g=0,m=0,A=0;const w=[],M=[];for(let te=0;te<u.length;te++){y||(y=se.ADAPTER.createCanvas(),y.width=o,y.height=a,v=y.getContext("2d"),b=new Vt(y,{resolution:s,...l}),w.push(b),M.push(new xe(b)),d.page.push({id:M.length-1,file:""}));const ie=u[te],oe=Wv.measureText(ie,c,!1,y),Oe=oe.width,re=Math.ceil(oe.height),W=Math.ceil(("italic"===c.fontStyle?2:1)*Oe);if(m>=a-re*s){if(0===m)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${ie}')`);--te,y=null,v=null,b=null,m=0,g=0,A=0;continue}if(A=Math.max(re+oe.fontProperties.descent,A),W*s+g>=h){if(0===g)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${ie}')`);--te,m+=A*s,m=Math.ceil(m),g=0,A=0;continue}d9(y,v,oe,g,m,s,c);const ae=Zf(oe.text);d.char.push({id:ae,page:M.length-1,x:g/s,y:m/s,width:W,height:re,xoffset:0,yoffset:0,xadvance:Math.ceil(Oe-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),g+=(W+2*r)*s,g=Math.ceil(g)}for(let te=0,ie=u.length;te<ie;te++){const oe=u[te];for(let Oe=0;Oe<ie;Oe++){const re=u[Oe],W=v.measureText(oe).width,ae=v.measureText(re).width,ee=v.measureText(oe+re).width-(W+ae);ee&&d.kerning.push({first:Zf(oe),second:Zf(re),amount:ee})}}const J=new Or(d,M,!0);return void 0!==Or.available[n]&&Or.uninstall(n),Or.available[n]=J,J}};let Ri=Or;Ri.ALPHA=[["a","z"],["A","Z"]," "],Ri.NUMERIC=[["0","9"]],Ri.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Ri.ASCII=[[" ","~"]],Ri.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Or.ALPHANUMERIC},Ri.available={};const $M=[],WM=[],zM=[],XM=class extends cr{constructor(n,e={}){super(),this._tint=16777215;const{align:t,tint:i,maxWidth:r,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},XM.styleDefaults,e);if(!Ri.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=t,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=n,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new ao(()=>{this.dirty=!0},this,0,0),this._roundPixels=se.ROUND_PIXELS,this.dirty=!0,this._resolution=se.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const n=Ri.available[this._fontName],e=this.fontSize,t=e/n.size,i=new bt,r=[],s=[],o=[],l=jM(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),u=this._maxWidth*n.size/e,c="none"===n.distanceFieldType?$M:WM;let h=null,d=0,g=0,m=0,y=-1,v=0,b=0,A=0,w=0;for(let re=0;re<l.length;re++){const W=l[re],ae=Zf(W);if(/(?:\s)/.test(W)&&(y=re,v=d,w++),"\r"===W||"\n"===W){s.push(d),o.push(-1),g=Math.max(g,d),++m,++b,i.x=0,i.y+=n.lineHeight,h=null,w=0;continue}const q=n.chars[ae];if(!q)continue;h&&q.kerning[h]&&(i.x+=q.kerning[h]);const ee=zM.pop()||{texture:xe.EMPTY,line:0,charCode:0,prevSpaces:0,position:new bt};ee.texture=q.texture,ee.line=m,ee.charCode=ae,ee.position.x=i.x+q.xOffset+this._letterSpacing/2,ee.position.y=i.y+q.yOffset,ee.prevSpaces=w,r.push(ee),d=ee.position.x+Math.max(q.xAdvance-q.xOffset,q.texture.orig.width),i.x+=q.xAdvance+this._letterSpacing,A=Math.max(A,q.yOffset+q.texture.height),h=ae,-1!==y&&u>0&&i.x>u&&(++b,yl(r,1+y-b,1+re-y),re=y,y=-1,s.push(v),o.push(r.length>0?r[r.length-1].prevSpaces:0),g=Math.max(g,v),m++,i.x=0,i.y+=n.lineHeight,h=null,w=0)}const M=l[l.length-1];"\r"!==M&&"\n"!==M&&(/(?:\s)/.test(M)&&(d=v),s.push(d),g=Math.max(g,d),o.push(-1));const J=[];for(let re=0;re<=m;re++){let W=0;"right"===this._align?W=g-s[re]:"center"===this._align?W=(g-s[re])/2:"justify"===this._align&&(W=o[re]<0?0:(g-s[re])/o[re]),J.push(W)}const te=r.length,ie={},oe=[],Oe=this._activePagesMeshData;c.push(...Oe);for(let re=0;re<te;re++){const W=r[re].texture,ae=W.baseTexture.uid;if(!ie[ae]){let q=c.pop();if(!q){const Jt=new H7;let Q,ne;"none"===n.distanceFieldType?(Q=new PM(xe.EMPTY),ne=Ye.NORMAL):(Q=new PM(xe.EMPTY,{program:Os.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),ne=Ye.NORMAL_NPM);const fe=new Hv(Jt,Q);fe.blendMode=ne,q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:fe,vertices:null,uvs:null,indices:null}}q.index=0,q.indexCount=0,q.vertexCount=0,q.uvsCount=0,q.total=0;const{_textureCache:ee}=this;ee[ae]=ee[ae]||new xe(W.baseTexture),q.mesh.texture=ee[ae],q.mesh.tint=this._tint,oe.push(q),ie[ae]=q}ie[ae].total++}for(let re=0;re<Oe.length;re++)oe.includes(Oe[re])||this.removeChild(Oe[re].mesh);for(let re=0;re<oe.length;re++)oe[re].mesh.parent!==this&&this.addChild(oe[re].mesh);this._activePagesMeshData=oe;for(const re in ie){const W=ie[re],ae=W.total;if(!(W.indices?.length>6*ae)||W.vertices.length<2*Hv.BATCHABLE_SIZE)W.vertices=new Float32Array(8*ae),W.uvs=new Float32Array(8*ae),W.indices=new Uint16Array(6*ae);else{const ee=W.vertices;for(let Jt=4*W.total*2;Jt<ee.length;Jt++)ee[Jt]=0}W.mesh.size=6*ae}for(let re=0;re<te;re++){const W=r[re];let ae=W.position.x+J[W.line]*("justify"===this._align?W.prevSpaces:1);this._roundPixels&&(ae=Math.round(ae));const q=ae*t,ee=W.position.y*t,Jt=W.texture,Q=ie[Jt.baseTexture.uid],ne=Jt.frame,fe=Jt._uvs,Ee=Q.index++;Q.indices[6*Ee+0]=0+4*Ee,Q.indices[6*Ee+1]=1+4*Ee,Q.indices[6*Ee+2]=2+4*Ee,Q.indices[6*Ee+3]=0+4*Ee,Q.indices[6*Ee+4]=2+4*Ee,Q.indices[6*Ee+5]=3+4*Ee,Q.vertices[8*Ee+0]=q,Q.vertices[8*Ee+1]=ee,Q.vertices[8*Ee+2]=q+ne.width*t,Q.vertices[8*Ee+3]=ee,Q.vertices[8*Ee+4]=q+ne.width*t,Q.vertices[8*Ee+5]=ee+ne.height*t,Q.vertices[8*Ee+6]=q,Q.vertices[8*Ee+7]=ee+ne.height*t,Q.uvs[8*Ee+0]=fe.x0,Q.uvs[8*Ee+1]=fe.y0,Q.uvs[8*Ee+2]=fe.x1,Q.uvs[8*Ee+3]=fe.y1,Q.uvs[8*Ee+4]=fe.x2,Q.uvs[8*Ee+5]=fe.y2,Q.uvs[8*Ee+6]=fe.x3,Q.uvs[8*Ee+7]=fe.y3}this._textWidth=g*t,this._textHeight=(i.y+n.lineHeight)*t;for(const re in ie){const W=ie[re];if(0!==this.anchor.x||0!==this.anchor.y){let Jt=0;const Q=this._textWidth*this.anchor.x,ne=this._textHeight*this.anchor.y;for(let fe=0;fe<W.total;fe++)W.vertices[Jt++]-=Q,W.vertices[Jt++]-=ne,W.vertices[Jt++]-=Q,W.vertices[Jt++]-=ne,W.vertices[Jt++]-=Q,W.vertices[Jt++]-=ne,W.vertices[Jt++]-=Q,W.vertices[Jt++]-=ne}this._maxLineHeight=A*t;const ae=W.mesh.geometry.getBuffer("aVertexPosition"),q=W.mesh.geometry.getBuffer("aTextureCoord"),ee=W.mesh.geometry.getIndex();ae.data=W.vertices,q.data=W.uvs,ee.data=W.indices,ae.update(),q.update(),ee.update()}for(let re=0;re<r.length;re++)zM.push(r[re]);this._font=n,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(n){this._autoResolution&&this._resolution!==n.resolution&&(this._resolution=n.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:t,size:i}=Ri.available[this._fontName];if("none"!==t){const{a:r,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+s*s),u=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(u))/2,h=this.fontSize/i,d=n._view.resolution;for(const g of this._activePagesMeshData)g.mesh.shader.uniforms.uFWidth=c*e*h*d}super._render(n)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const n=Ri.available[this._fontName];if(!n)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==n&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(n){if(this._tint!==n){this._tint=n;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=n}}get align(){return this._align}set align(n){this._align!==n&&(this._align=n,this.dirty=!0)}get fontName(){return this._fontName}set fontName(n){if(!Ri.available[n])throw new Error(`Missing BitmapFont "${n}"`);this._fontName!==n&&(this._fontName=n,this.dirty=!0)}get fontSize(){return this._fontSize??Ri.available[this._fontName].size}set fontSize(n){this._fontSize!==n&&(this._fontSize=n,this.dirty=!0)}get anchor(){return this._anchor}set anchor(n){"number"==typeof n?this._anchor.set(n):this._anchor.copyFrom(n)}get text(){return this._text}set text(n){n=String(n??""),this._text!==n&&(this._text=n,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(n){this._maxWidth!==n&&(this._maxWidth=n,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(n){this._letterSpacing!==n&&(this._letterSpacing=n,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(n){n!==this._roundPixels&&(this._roundPixels=n,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(n){this._autoResolution=!1,this._resolution!==n&&(this._resolution=n,this.dirty=!0)}destroy(n){const{_textureCache:e}=this,i="none"===Ri.available[this._fontName].distanceFieldType?$M:WM;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=xe.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._textureCache=null,super.destroy(n)}};XM.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const _9=[".xml",".fnt"],y9={extension:{type:ve.LoadParser,priority:es.Normal},test:n=>_9.includes(Qn.extname(n)),testParse:n=>et(function*(){return Kf.test(n)||Kv.test(n)})(),parse:(n,e,t)=>et(function*(){const i=Kf.test(n)?Kf.parse(n):Kv.parse(n),{src:r}=e,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const c=s[u].file,h=Qn.join(Qn.dirname(r),c);o.push(h)}const a=yield t.load(o),l=o.map(u=>a[u]);return Ri.install(i,l,!0)})(),load:(n,e)=>et(function*(){return(yield se.ADAPTER.fetch(n)).text()})(),unload(n){n.destroy()}};Le.add(y9);var xl=Se(23);class qM extends ta{constructor(e=0,t=0){super(),this._gu_options={},this._bActivated=!1,this._bHover=!1,this._temp_status={},this._source=0,this._oWdith=0,this._oHeight=0,this._rg_canvas=null,this._graphics=new Tl,this._loaded=!1,this.interactive=!0,this.cursor="pointer",this._source=e,this.on("pointerup",()=>{this.onPointerup()}),this.on("pointerdown",()=>{this.onPointerdown()}),this.on("pointerupoutside",()=>{this.onPointerup()}),this._cell=new ta(xe.WHITE),this._cell.width=150,this._cell.height=150,this._cell.anchor.set(.5,.5),this.anchor.set(.5,.5),this.addChild(this._cell),this.addChild(this._graphics),this._temp_status.texture_width=150,this._temp_status.texture_height=150,this._temp_status.texture_helf_width=75,this._temp_status.texture_helf_height=75,this._temp_status.spx=-this._temp_status.texture_width,this._temp_status.spy=-this._temp_status.texture_height,this._temp_status.epx=this._temp_status.texture_width,this._temp_status.epy=this._temp_status.texture_height,0==t?(this._gu_options={width:"300",height:"300",units:"MPH",minValue:0,startAngle:60,ticksAngle:240,valueBox:!1,maxValue:"220",majorTicks:[0,20,40,60,80,100,120,140,160,180,200,220],minorTicks:2,strokeTicks:!0,highlights:[{from:160,to:220,color:"rgba(200, 50, 50, .75)"}],colorPlate:"#fff",borderShadowWidth:0,borders:!1,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:0,animationRule:"linear",listeners:{value:function(r,s){},render:[()=>{}]}},this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,this._canvas_texture=xe.from(this._rg_canvas),this._radial_gauge.draw(),this._cell.texture=this._canvas_texture):1==t?(this._gu_options={width:300,height:300,minValue:0,maxValue:360,majorTicks:["N","","E","","S","","W","","N"],minorTicks:10,ticksAngle:360,startAngle:180,strokeTicks:!1,highlights:!1,colorPlate:"#222",colorMajorTicks:"#f5f5f5",colorMinorTicks:"#ddd",colorNumbers:"#ccc",colorNeedle:"rgba(240, 128, 128, 1)",colorNeedleEnd:"rgba(255, 160, 122, .9)",numbersMargin:2,fontNumbersSize:30,colorNeedleShadowDown:!1,colorNeedleCircleOuter:"#444",colorNeedleCircleOuterEnd:"#111",colorNeedleCircleInner:"#444",colorNeedleCircleInnerEnd:"#111",colorCircleInner:!1,valueBox:!1,valueTextShadow:!1,needleCircleSize:7,animationRule:"linear",needleType:"line",needleStart:75,needleEnd:99,needleWidth:3,borders:!0,borderInnerWidth:3,borderMiddleWidth:1,borderOuterWidth:5,colorBorderInner:"#455",colorBorderMiddle:"#222",colorBorderOuter:"#888",colorBorderOuterEnd:"#caa",borderShadowWidth:0,animationDuration:1500,animationTarget:"plate",class:"gauge"},this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,this._canvas_texture=xe.from(this._rg_canvas),this._radial_gauge.draw(),this._cell.texture=this._canvas_texture):2==t?(this._gu_options={width:300,height:300,units:"RPM",minValue:0,maxValue:12e3,majorTicks:[0,1,2,3,4,5,6,7,8,9,10,11,12],minorTicks:0,strokeTicks:!0,highlights:[{from:9250,to:11995,color:"rgba(200, 50, 50, .75)"}],highlightsWidth:13,ticksAngle:270,startAngle:0,valueBox:!1,borderInnerWidth:10,borderMiddleWidth:1,borderOuterWidth:5,colorMajorTicks:"#888",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#bb1",colorPlate:"#000",colorPlateEnd:"#222",borderShadowWidth:0,borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:1500,animationRule:"linear",colorBorderOuter:"#111",colorBorderMiddle:"#888",colorBorderMiddleEnd:"#555",colorBorderInner:"#111",colorNeedleShadowDown:"#550",colorNeedleCircleOuter:"#333",colorNeedleCircleOuterEnd:"#111",class:"gauge"},this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,this._canvas_texture=xe.from(this._rg_canvas),this._radial_gauge.draw(),this._cell.texture=this._canvas_texture):3==t?(this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,xe.fromURL("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4").then(r=>{this._canvas_texture=r,this._cell.texture=this._canvas_texture})):4==t?(this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,xe.fromURL("./assets/s550.mp4").then(s=>{this._canvas_texture=s,this._cell.texture=this._canvas_texture})):5==t&&(this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new xl.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,xe.fromURL("./assets/center.png").then(s=>{this._canvas_texture=s,this._cell.texture=this._canvas_texture}))}get cell(){return this._cell}set cell(e){this._cell=e}get bHover(){return this._bHover}set bHover(e){this._bHover=e}get graphics(){return this._graphics}set graphics(e){this._graphics=e}get temp_status(){return this._temp_status}set temp_status(e){this._temp_status=e}get source(){return this._source}set source(e){this._source=e}get rg_canvas(){return this._rg_canvas}set rg_canvas(e){this._rg_canvas=e}get canvas_texture(){return this._canvas_texture}set canvas_texture(e){this._canvas_texture=e}get radial_gauge(){return this._radial_gauge}set radial_gauge(e){this._radial_gauge=e}get oHeight(){return this._oHeight}set oHeight(e){this._oHeight=e}get oWdith(){return this._oWdith}set oWdith(e){this._oWdith=e}get bActivated(){return this._bActivated}set bActivated(e){this._bActivated=e}get gu_options(){return this._gu_options}set gu_options(e){this._gu_options=e}get loaded(){return this._loaded}set loaded(e){this._loaded=e}update(e){this._loaded&&(this._graphics.clear(),this._graphics.lineStyle(1,255,1),this._bActivated&&(this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.epy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.epy,10),this._graphics.endFill()),e&&(this._source=e),this._radial_gauge.value=this._source,this._canvas_texture.update())}onPointerdown(){this._temp_status.width=this.width,this._temp_status.height=this.height,this._temp_status.alpha=this.alpha,this.width=1.1,this.height*=1.1,this._cell.alpha=.6,this._bActivated=!0}onPointerup(){this.width=this._temp_status.width,this.height=this._temp_status.height,this._cell.alpha=this._temp_status.alpha,this._bActivated=!1}}class Qv{constructor(e){this.x=e.x||0,this.y=e.y||0,this.height=e.height||0,this.width=e.width||0,this.ex=this.x+this.width,this.ey=this.y+this.height,this.center={x:this.x+this.width/2,y:this.y+this.height/2}}isInside(e){return e.x>=this.x&&e.x<=this.ex&&e.y>=this.y&&e.y<=this.ey}clone(){return new Qv({x:this.x,y:this.y,width:this.width,height:this.height})}}class v9{constructor(e,t,i,r){this.split=0,this.cells=[],this.cw=0,this.ch=0,this.range=e,this.ncx=t,this.ncy=i,this.ini()}isInside(e){return e.x>=this.range.x&&e.x<=this.range.width+this.range.x&&e.y>=this.range.y&&e.y<=this.range.height+this.range.y}getCell(e,t=0){return 1===arguments.length?this.cells[e]:this.cells[e+t*this.ncx]}getCellByPosition(e=0,t=0){for(var i,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:t})){i=this.cells[r];break}return i}getIndexByPosition(e=0,t=0){for(var i=-1,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:t})){i=r;break}return i}ini(){const e=this.range.x,t=this.range.y,i=this.range.width/this.ncx,r=this.range.height/this.ncy;this.cw=i,this.ch=r;for(let s=0;s<this.ncy;s++)for(let o=0;o<this.ncx;o++){const a=new Qv({x:o*i+e,y:s*r+t,width:i,height:r});this.cells.push(a)}this.first=this.cells[0]}}function YM(n){return Z((e,t)=>{Jn(n).subscribe(U(t,()=>t.complete(),ht)),!t.closed&&e.subscribe(t)})}const b9=["sublist"],E9=["menuitem"],w9=function(n){return{"p-hidden":n}};function C9(n,e){if(1&n&&yn(0,"li",5,6),2&n){const t=Re().$implicit;Ce("ngClass",ms(1,w9,!1===t.visible))}}function S9(n,e){if(1&n&&yn(0,"span",17),2&n){const t=Re(3).$implicit;Ce("ngClass",t.icon)("ngStyle",t.iconStyle)}}function T9(n,e){if(1&n&&(Nt(0,"span",18),yi(1),Ft()),2&n){const t=Re(3).$implicit;qe(1),jr(t.label)}}function x9(n,e){1&n&&yn(0,"span",19),2&n&&Ce("innerHTML",Re(3).$implicit.label,Jl)}function D9(n,e){if(1&n&&(Nt(0,"span",20),yi(1),Ft()),2&n){const t=Re(3).$implicit;Ce("ngClass",t.badgeStyleClass),qe(1),jr(t.badge)}}function A9(n,e){1&n&&yn(0,"span",21)}const KM=function(n){return{"p-menuitem-link":!0,"p-disabled":n}};function I9(n,e){if(1&n){const t=ps();Nt(0,"a",11),on("click",function(r){Zi(t),Re();const s=fs(1),o=Re(),a=o.$implicit,l=o.index,u=Re();return Qi(u.onItemClick(r,a,s,u.getKey(l)))}),Ct(1,S9,1,2,"span",12),Ct(2,T9,2,1,"span",13),Ct(3,x9,1,1,"ng-template",null,14,Ya),Ct(5,D9,2,2,"span",15),Ct(6,A9,1,0,"span",16),Ft()}if(2&n){const t=fs(4),i=Re(2),r=i.$implicit,s=i.index,o=Re();Ce("target",r.target)("ngClass",ms(13,KM,r.disabled)),si("href",r.url?r.url:null,gh)("title",r.title)("id",r.id)("tabindex",r.disabled?null:"0")("aria-haspopup",null!=o.item.items)("aria-expanded",o.isActive(o.getKey(s))),qe(1),Ce("ngIf",r.icon),qe(1),Ce("ngIf",!1!==r.escape)("ngIfElse",t),qe(3),Ce("ngIf",r.badge),qe(1),Ce("ngIf",r.items)}}function M9(n,e){if(1&n&&yn(0,"span",17),2&n){const t=Re(3).$implicit;Ce("ngClass",t.icon)("ngStyle",t.iconStyle)}}function R9(n,e){if(1&n&&(Nt(0,"span",18),yi(1),Ft()),2&n){const t=Re(3).$implicit;qe(1),jr(t.label)}}function P9(n,e){1&n&&yn(0,"span",19),2&n&&Ce("innerHTML",Re(3).$implicit.label,Jl)}function O9(n,e){if(1&n&&(Nt(0,"span",20),yi(1),Ft()),2&n){const t=Re(3).$implicit;Ce("ngClass",t.badgeStyleClass),qe(1),jr(t.badge)}}function N9(n,e){1&n&&yn(0,"span",21)}const F9=function(){return{exact:!1}};function L9(n,e){if(1&n){const t=ps();Nt(0,"a",22),on("click",function(r){Zi(t),Re();const s=fs(1),o=Re(),a=o.$implicit,l=o.index,u=Re();return Qi(u.onItemClick(r,a,s,u.getKey(l)))}),Ct(1,M9,1,2,"span",12),Ct(2,R9,2,1,"span",13),Ct(3,P9,1,1,"ng-template",null,23,Ya),Ct(5,O9,2,2,"span",15),Ct(6,N9,1,0,"span",16),Ft()}if(2&n){const t=fs(4),i=Re(2).$implicit;Ce("routerLink",i.routerLink)("queryParams",i.queryParams)("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.routerLinkActiveOptions||im(20,F9))("target",i.target)("ngClass",ms(21,KM,i.disabled))("fragment",i.fragment)("queryParamsHandling",i.queryParamsHandling)("preserveFragment",i.preserveFragment)("skipLocationChange",i.skipLocationChange)("replaceUrl",i.replaceUrl)("state",i.state),si("title",i.title)("id",i.id)("tabindex",i.disabled?null:"0"),qe(1),Ce("ngIf",i.icon),qe(1),Ce("ngIf",!1!==i.escape)("ngIfElse",t),qe(3),Ce("ngIf",i.badge),qe(1),Ce("ngIf",i.items)}}function k9(n,e){if(1&n){const t=ps();Nt(0,"p-contextMenuSub",24),on("leafClick",function(){return Zi(t),Qi(Re(3).onLeafClick())}),Ft()}if(2&n){const t=Re(2),i=t.index,r=t.$implicit;Ce("parentItemKey",Re().getKey(i))("item",r)}}const B9=function(n,e){return{"p-menuitem":!0,"p-menuitem-active":n,"p-hidden":e}};function U9(n,e){if(1&n){const t=ps();Nt(0,"li",7,6),on("mouseenter",function(r){Zi(t);const s=Re(),o=s.$implicit,a=s.index,l=Re();return Qi(l.onItemMouseEnter(r,o,l.getKey(a)))})("mouseleave",function(r){Zi(t);const s=Re().$implicit;return Qi(Re().onItemMouseLeave(r,s))}),Ct(2,I9,7,15,"a",8),Ct(3,L9,7,23,"a",9),Ct(4,k9,1,2,"p-contextMenuSub",10),Ft()}if(2&n){const t=Re(),i=t.$implicit,r=t.index,s=Re();cu(i.styleClass),Ce("ngClass",qa(9,B9,s.isActive(s.getKey(r)),!1===i.visible))("ngStyle",i.style)("tooltipOptions",i.tooltipOptions),si("data-ik",s.getKey(r)),qe(2),Ce("ngIf",!i.routerLink),qe(1),Ce("ngIf",i.routerLink),qe(1),Ce("ngIf",i.items)}}function V9(n,e){if(1&n&&(Ct(0,C9,2,3,"li",3),Ct(1,U9,5,12,"li",4)),2&n){const t=e.$implicit;Ce("ngIf",t.separator),qe(1),Ce("ngIf",!t.separator)}}const H9=function(n){return{"p-submenu-list":n}},G9=["container"];let j9=(()=>{class n{constructor(t){this.leafClick=new gt,this.contextMenu=t}ngOnInit(){this.activeItemKeyChangeSubscription=this.contextMenu.contextMenuService.activeItemKeyChange$.pipe(YM(this.contextMenu.ngDestroy$)).subscribe(t=>{this.activeItemKey=t,this.isActive(this.parentItemKey)&&pe.hasClass(this.sublistViewChild.nativeElement,"p-submenu-list-active")&&this.contextMenu.positionSubmenu(this.sublistViewChild.nativeElement),this.contextMenu.cd.markForCheck()})}onItemMouseEnter(t,i,r){if(this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),i.disabled)this.activeItemKey=null;else{if(i.items){let s=pe.findSingle(t.currentTarget,".p-submenu-list");pe.addClass(s,"p-submenu-list-active")}this.contextMenu.contextMenuService.changeKey(r)}}onItemMouseLeave(t,i){i.disabled||this.contextMenu.el.nativeElement.contains(t.toElement)&&(i.items&&this.contextMenu.removeActiveFromSubLists(t.currentTarget),this.root||this.contextMenu.contextMenuService.changeKey(this.parentItemKey))}onItemClick(t,i,r,s){if(i.disabled)t.preventDefault();else{if(!i.url&&!i.routerLink&&t.preventDefault(),i.command&&i.command({originalEvent:t,item:i}),i.items){let o=pe.findSingle(r,".p-submenu-list");o&&(this.isActive(s)&&pe.hasClass(o,"p-submenu-list-active")?this.contextMenu.removeActiveFromSubLists(r):pe.addClass(o,"p-submenu-list-active"),this.contextMenu.contextMenuService.changeKey(s))}i.items||this.onLeafClick()}}onLeafClick(){this.root&&this.contextMenu.hide(),this.leafClick.emit()}getKey(t){return this.root?String(t):this.parentItemKey+"_"+t}isActive(t){return this.activeItemKey&&(this.activeItemKey.startsWith(t+"_")||this.activeItemKey===t)}}return n.\u0275fac=function(t){return new(t||n)(B(sn(()=>ZM)))},n.\u0275cmp=os({type:n,selectors:[["p-contextMenuSub"]],viewQuery:function(t,i){if(1&t&&(Po(b9,5),Po(E9,5)),2&t){let r;_s(r=ys())&&(i.sublistViewChild=r.first),_s(r=ys())&&(i.menuitemViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{item:"item",root:"root",parentItemKey:"parentItemKey"},outputs:{leafClick:"leafClick"},decls:3,vars:4,consts:[[3,"ngClass"],["sublist",""],["ngFor","",3,"ngForOf"],["class","p-menu-separator","role","separator",3,"ngClass",4,"ngIf"],["pTooltip","","role","none",3,"ngClass","ngStyle","class","tooltipOptions","mouseenter","mouseleave",4,"ngIf"],["role","separator",1,"p-menu-separator",3,"ngClass"],["menuitem",""],["pTooltip","","role","none",3,"ngClass","ngStyle","tooltipOptions","mouseenter","mouseleave"],["pRipple","",3,"target","ngClass","click",4,"ngIf"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click",4,"ngIf"],[3,"parentItemKey","item","leafClick",4,"ngIf"],["pRipple","",3,"target","ngClass","click"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],["class","p-submenu-icon pi pi-angle-right",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[1,"p-submenu-icon","pi","pi-angle-right"],["role","menuitem","pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state","click"],["htmlRouteLabel",""],[3,"parentItemKey","item","leafClick"]],template:function(t,i){1&t&&(Nt(0,"ul",0,1),Ct(2,V9,2,2,"ng-template",2),Ft()),2&t&&(Ce("ngClass",ms(2,H9,!i.root)),qe(2),Ce("ngForOf",i.root?i.item:i.item.items))},dependencies:[Tu,$m,nd,xu,rc,Iy,II,RI,n],encapsulation:2}),n})(),ZM=(()=>{class n{constructor(t,i,r,s,o,a){this.el=t,this.renderer=i,this.cd=r,this.zone=s,this.contextMenuService=o,this.config=a,this.autoZIndex=!0,this.baseZIndex=0,this.triggerEvent="contextmenu",this.onShow=new gt,this.onHide=new gt,this.ngDestroy$=new R,this.preventDocumentDefault=!1}ngAfterViewInit(){this.global?this.triggerEventListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document",this.triggerEvent,i=>{this.show(i),i.preventDefault()}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,t=>{this.show(t),t.preventDefault()})),this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.containerViewChild.nativeElement):pe.appendChild(this.containerViewChild.nativeElement,this.appendTo))}show(t){this.clearActiveItem(),this.position(t),this.moveOnTop(),this.containerViewChild.nativeElement.style.display="block",this.preventDocumentDefault=!0,pe.fadeIn(this.containerViewChild.nativeElement,250),this.bindGlobalListeners(),t&&t.preventDefault(),this.onShow.emit()}hide(){this.containerViewChild.nativeElement.style.display="none",this.autoZIndex&&Is.clear(this.containerViewChild.nativeElement),this.clearActiveItem(),this.unbindGlobalListeners(),this.onHide.emit()}moveOnTop(){this.autoZIndex&&this.containerViewChild&&"block"!==this.containerViewChild.nativeElement.style.display&&Is.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}toggle(t){this.containerViewChild.nativeElement.offsetParent?this.hide():this.show(t)}position(t){if(t){let i=t.pageX+1,r=t.pageY+1,s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:pe.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),o=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:pe.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),a=pe.getViewport();i+s-document.scrollingElement.scrollLeft>a.width&&(i-=s),r+o-document.scrollingElement.scrollTop>a.height&&(r-=o),i<document.scrollingElement.scrollLeft&&(i=document.scrollingElement.scrollLeft),r<document.scrollingElement.scrollTop&&(r=document.scrollingElement.scrollTop),this.containerViewChild.nativeElement.style.left=i+"px",this.containerViewChild.nativeElement.style.top=r+"px"}}positionSubmenu(t){let i=t.parentElement.parentElement,r=pe.getViewport(),s=t.offsetParent?t.offsetWidth:pe.getHiddenElementOuterWidth(t),o=t.offsetHeight?t.offsetHeight:pe.getHiddenElementOuterHeight(t),a=pe.getOuterWidth(i.children[0]),l=pe.getOuterHeight(i.children[0]),u=pe.getOffset(i.parentElement);t.style.zIndex=++pe.zindex,parseInt(u.top)+l+o>r.height-pe.calculateScrollbarHeight()?(t.style.removeProperty("top"),t.style.bottom="0px"):(t.style.removeProperty("bottom"),t.style.top="0px"),t.style.left=parseInt(u.left)+a+s>r.width-pe.calculateScrollbarWidth()?-s+"px":a+"px"}isItemMatched(t){return pe.hasClass(t,"p-menuitem")&&!pe.hasClass(t.children[0],"p-disabled")}findNextItem(t,i){let r=t.nextElementSibling;if(r)return this.isItemMatched(r)?r:this.findNextItem(r,i);{let s=t.parentElement.children[0];return this.isItemMatched(s)?s:i?null:this.findNextItem(s,!0)}}findPrevItem(t,i){let r=t.previousElementSibling;if(r)return this.isItemMatched(r)?r:this.findPrevItem(r,i);{let s=t.parentElement.children[t.parentElement.children.length-1];return this.isItemMatched(s)?s:i?null:this.findPrevItem(s,!0)}}getActiveItem(){let t=this.contextMenuService.activeItemKey;return null==t?null:pe.findSingle(this.containerViewChild.nativeElement,'.p-menuitem[data-ik="'+t+'"]')}clearActiveItem(){this.contextMenuService.activeItemKey&&(this.removeActiveFromSubLists(this.containerViewChild.nativeElement),this.contextMenuService.reset())}removeActiveFromSubLists(t){let i=pe.find(t,".p-submenu-list-active");for(let r of i)pe.removeClass(r,"p-submenu-list-active")}removeActiveFromSublist(t){t&&pe.findSingle(t,".p-submenu-list")&&pe.hasClass(t,"p-submenu-list-active")&&pe.removeClass(t,"p-submenu-list-active")}bindGlobalListeners(){if(!this.documentClickListener){const t=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(t,"click",i=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(i)&&!i.ctrlKey&&2!==i.button&&this.hide()}),this.documentTriggerListener=this.renderer.listen(t,this.triggerEvent,i=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(i)&&!this.preventDocumentDefault&&this.hide(),this.preventDocumentDefault=!1})}this.zone.runOutsideAngular(()=>{this.windowResizeListener||(this.windowResizeListener=this.onWindowResize.bind(this),window.addEventListener("resize",this.windowResizeListener))}),this.documentKeydownListener||(this.documentKeydownListener=this.renderer.listen(this.el?this.el.nativeElement.ownerDocument:"document","keydown",i=>{let r=this.getActiveItem();switch(i.key){case"ArrowDown":if(r)this.removeActiveFromSublist(r),r=this.findNextItem(r);else{let s=pe.findSingle(this.containerViewChild.nativeElement,".p-menuitem-link").parentElement;r=this.isItemMatched(s)?s:this.findNextItem(s)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),i.preventDefault();break;case"ArrowUp":if(r)this.removeActiveFromSublist(r),r=this.findPrevItem(r);else{let s=pe.findSingle(this.containerViewChild.nativeElement,"ul"),o=s.children[s.children.length-1];r=this.isItemMatched(o)?o:this.findPrevItem(o)}r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")),i.preventDefault();break;case"ArrowRight":if(r){let s=pe.findSingle(r,".p-submenu-list");s&&(pe.addClass(s,"p-submenu-list-active"),r=pe.findSingle(s,".p-menuitem-link:not(.p-disabled)").parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}i.preventDefault();break;case"ArrowLeft":if(r){let s=r.parentElement;s&&pe.hasClass(s,"p-submenu-list-active")&&(pe.removeClass(s,"p-submenu-list-active"),r=s.parentElement.parentElement,r&&this.contextMenuService.changeKey(r.getAttribute("data-ik")))}i.preventDefault();break;case"Escape":this.hide(),i.preventDefault();break;case"Enter":r&&this.handleItemClick(i,this.findModelItemFromKey(this.contextMenuService.activeItemKey),r),i.preventDefault()}}))}findModelItemFromKey(t){return null!=t&&this.model?t.split("_").reduce((r,s)=>r?r.items[s]:this.model[s],null):null}handleItemClick(t,i,r){if(i&&!i.disabled){if(i.command&&i.command({originalEvent:t,item:i}),i.items){let s=pe.findSingle(r,".p-submenu-list");s&&(pe.hasClass(s,"p-submenu-list-active")?this.removeActiveFromSubLists(r):(pe.addClass(s,"p-submenu-list-active"),this.positionSubmenu(s)))}i.items||this.hide()}}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.windowResizeListener&&(window.removeEventListener("resize",this.windowResizeListener),this.windowResizeListener=null),this.documentKeydownListener&&(this.documentKeydownListener(),this.documentKeydownListener=null)}onWindowResize(t){this.containerViewChild.nativeElement.offsetParent&&this.hide()}isOutsideClicked(t){return!(this.containerViewChild.nativeElement.isSameNode(t.target)||this.containerViewChild.nativeElement.contains(t.target))}ngOnDestroy(){this.unbindGlobalListeners(),this.triggerEventListener&&this.triggerEventListener(),this.containerViewChild&&this.autoZIndex&&Is.clear(this.containerViewChild.nativeElement),this.appendTo&&this.el.nativeElement.appendChild(this.containerViewChild.nativeElement),this.ngDestroy$.next(!0),this.ngDestroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(Di),B(qs),B(an),B(DI),B(lf))},n.\u0275cmp=os({type:n,selectors:[["p-contextMenu"]],viewQuery:function(t,i){if(1&t&&Po(G9,5),2&t){let r;_s(r=ys())&&(i.containerViewChild=r.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",global:"global",target:"target",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",triggerEvent:"triggerEvent"},outputs:{onShow:"onShow",onHide:"onHide"},decls:3,vars:6,consts:[[3,"ngClass","ngStyle"],["container",""],[3,"item","root"]],template:function(t,i){1&t&&(Nt(0,"div",0,1),yn(2,"p-contextMenuSub",2),Ft()),2&t&&(cu(i.styleClass),Ce("ngClass","p-contextmenu p-component")("ngStyle",i.style),qe(2),Ce("item",i.model)("root",!0))},dependencies:[Tu,xu,j9],styles:[".p-contextmenu{position:absolute;display:none}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1;display:none}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon{margin-left:auto}.p-contextmenu .p-menuitem-active>p-contextmenusub>.p-submenu-list.p-submenu-list-active{display:block!important}\n"],encapsulation:2,changeDetection:0}),n})(),$9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({providers:[DI],imports:[Fo,dl,MI,uf,dl,uf]}),n})();const W9=["addListener","removeListener"],z9=["addEventListener","removeEventListener"],X9=["on","off"];function Qf(n,e,t,i){if(ge(t)&&(i=t,t=void 0),i)return Qf(n,e,t).pipe(r_(i));const[r,s]=function K9(n){return ge(n.addEventListener)&&ge(n.removeEventListener)}(n)?z9.map(o=>a=>n[o](e,a,t)):function q9(n){return ge(n.addListener)&&ge(n.removeListener)}(n)?W9.map(QM(n,e)):function Y9(n){return ge(n.on)&&ge(n.off)}(n)?X9.map(QM(n,e)):[];if(!r&&mo(n))return I(o=>Qf(o,e,t))(Jn(n));if(!r)throw new TypeError("Invalid event target");return new T(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function QM(n,e){return t=>i=>n[t](e,i)}function JM(){return Z((n,e)=>{let t,i=!1;n.subscribe(U(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}function eq(n,e){return n===e}function Jv(n,e){return n=function tq(n,e){return typeof n>"u"?typeof e>"u"?n:e:n}(n,e),"function"==typeof n?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!n.apply(this,s)}:n?function(){return!0}:function(){return!1}}var eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol?"symbol":typeof n},eR=function(n){return null!=n&&"object"===(typeof n>"u"?"undefined":eb(n))&&1===n.nodeType&&"object"===eb(n.style)&&"object"===eb(n.ownerDocument)};function tR(n,e){if(e=nb(e,!0),!eR(e))return-1;for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}function tb(n,e){return-1!==tR(n,e)}function nq(n,e){for(var t=0;t<e.length;t++)tb(n,e[t])||n.push(e[t]);return e}function iq(n){for(var e=arguments,t=[],i=arguments.length-1;i-- >0;)t[i]=e[i+1];return nq(n,t=t.map(nb))}function rq(n){for(var e=arguments,t=[],i=arguments.length-1;i-- >0;)t[i]=e[i+1];return t.map(nb).reduce(function(r,s){var o=tR(n,s);return-1!==o?r.concat(n.splice(o,1)):r},[])}function nb(n,e){if("string"==typeof n)try{return document.querySelector(n)}catch(t){throw t}if(!eR(n)&&!e)throw new TypeError(n+" is not a DOM element.");return n}function nR(n){if(n===window)return function oq(){var n={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},n);var e={};return Object.defineProperties(e,n),e}();try{var e=n.getBoundingClientRect();return void 0===e.x&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+n)}}var e,ib=void 0;"function"!=typeof Object.create?(e=function(){},ib=function(t,i){if(t!==Object(t)&&null!==t)throw TypeError("Argument must be an object, or null");e.prototype=t||{};var r=new e;return e.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===t&&(r.__proto__=null),r}):ib=Object.create;var lq=ib,sa=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function rb(n,e){e=e||{};for(var t=lq(n),i=0;i<sa.length;i++)void 0!==e[sa[i]]&&(t[sa[i]]=e[sa[i]]);return t}function sb(n,e){console.log("data ",e),n.data=e||{},n.dispatched="mousemove"}var xc=["webkit","moz","ms","o"],Dc=function(){if(typeof window>"u")return function(){};for(var n=0,e=xc.length;n<e&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[xc[n]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var t=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-t),o=window.setTimeout(function(){return i(r+s)},s);return t=r+s,o}}return window.requestAnimationFrame.bind(window)}(),Dl=function(){if(typeof window>"u")return function(){};for(var n=0,e=xc.length;n<e&&!window.cancelAnimationFrame;++n)window.cancelAnimationFrame=window[xc[n]+"CancelAnimationFrame"]||window[xc[n]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){window.clearTimeout(t)}),window.cancelAnimationFrame.bind(window)}();function cq(n,e){void 0===e&&(e={});var t=this,i=4,r=!1;if("object"!=typeof e.margin){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},a=function sq(n,e){var t=Jv((e=e||{}).allowUpdate,!0);return function(r){if(r=r||window.event,n.target=r.target||r.srcElement||r.originalTarget,n.element=this,n.type=r.type,t(r)){if(r.targetTouches)n.x=r.targetTouches[0].clientX,n.y=r.targetTouches[0].clientY,n.pageX=r.targetTouches[0].pageX,n.pageY=r.targetTouches[0].pageY,n.screenX=r.targetTouches[0].screenX,n.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;n.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),n.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else n.pageX=r.pageX,n.pageY=r.pageY;n.x=r.clientX,n.y=r.clientY,n.screenX=r.screenX,n.screenY=r.screenY}n.clientX=n.x,n.clientY=n.y}}}(o),l=function uq(n){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function t(s){for(var o=0;o<sa.length;o++)e[sa[o]]=s[sa[o]]}return void 0!==n&&n.addEventListener("mousemove",t),{destroy:function r(){n&&n.removeEventListener("mousemove",t,!1),e=null},dispatch:MouseEvent?function(o,a,l){var u=new MouseEvent("mousemove",rb(e,a));return sb(u,l),o.dispatchEvent(u)}:"function"==typeof document.createEvent?function(o,a,l){var u=rb(e,a),c=document.createEvent("MouseEvents");return c.initMouseEvent("mousemove",!0,!0,window,0,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,u.relatedTarget),sb(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEventObject?function(o,a,l){var u=document.createEventObject(),c=rb(e,a);for(var h in c)u[h]=c[h];return sb(u,l),o.dispatchEvent(u)}:void 0}}(),u=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(e.maxSpeed)||(i=e.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=Jv(e.autoScroll),this.syncMove=Jv(e.syncMove,!1),this.destroy=function(W){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",y,!1),window.removeEventListener("touchstart",y,!1),window.removeEventListener("mouseup",v,!1),window.removeEventListener("touchend",v,!1),window.removeEventListener("pointerup",v,!1),window.removeEventListener("mouseleave",A,!1),window.removeEventListener("mousemove",J,!1),window.removeEventListener("touchmove",J,!1),window.removeEventListener("scroll",m,!0),n=[],W&&b()},this.add=function(){for(var W=[],ae=arguments.length;ae--;)W[ae]=arguments[ae];return iq.apply(void 0,[n].concat(W)),this},this.remove=function(){for(var W=[],ae=arguments.length;ae--;)W[ae]=arguments[ae];return rq.apply(void 0,[n].concat(W))};var h,W,c=null;"[object Array]"!==Object.prototype.toString.call(n)&&(n=[n]),W=n,n=[],W.forEach(function(ae){ae===window?c=window:t.add(ae)}),Object.defineProperties(this,{down:{get:function(){return u}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var g,d=null;function m(W){for(var ae=0;ae<n.length;ae++)if(n[ae]===W.target){r=!0;break}r&&Dc(function(){return r=!1})}function y(){u=!0}function v(){u=!1,b()}function b(){Dl(g),Dl(h)}function A(){u=!1}function M(){for(var W=null,ae=0;ae<n.length;ae++)iR(o,n[ae])&&(W=n[ae]);return W}function J(W){if(t.autoScroll()&&!W.dispatched){var ae=W.target,q=document.body;d&&!iR(o,d)&&(t.scrollWhenOutside||(d=null)),ae&&ae.parentNode===q?ae=M():(ae=function w(W){if(!W)return null;if(d===W||tb(n,W))return W;for(;W=W.parentNode;)if(tb(n,W))return W;return null}(ae),ae||(ae=M())),ae&&ae!==d&&(d=ae),c&&(Dl(h),h=Dc(te)),d&&(Dl(g),g=Dc(ie))}}function te(){oe(c),Dl(h),h=Dc(te)}function ie(){!d||(oe(d),Dl(g),g=Dc(ie))}function oe(W){var q,ee,ae=nR(W);q=o.x<ae.left+t.margin.left?Math.floor(Math.max(-1,(o.x-ae.left)/t.margin.left-1)*t.maxSpeed.left):o.x>ae.right-t.margin.right?Math.ceil(Math.min(1,(o.x-ae.right)/t.margin.right+1)*t.maxSpeed.right):0,ee=o.y<ae.top+t.margin.top?Math.floor(Math.max(-1,(o.y-ae.top)/t.margin.top-1)*t.maxSpeed.top):o.y>ae.bottom-t.margin.bottom?Math.ceil(Math.min(1,(o.y-ae.bottom)/t.margin.bottom+1)*t.maxSpeed.bottom):0,t.syncMove()&&l.dispatch(W,{pageX:o.pageX+q,pageY:o.pageY+ee,clientX:o.x+q,clientY:o.y+ee}),setTimeout(function(){ee&&function Oe(W,ae){W===window?window.scrollTo(W.pageXOffset,W.pageYOffset+ae):W.scrollTop+=ae}(W,ee),q&&function re(W,ae){W===window?window.scrollTo(W.pageXOffset+ae,W.pageYOffset):W.scrollLeft+=ae}(W,q)})}window.addEventListener("mousedown",y,!1),window.addEventListener("touchstart",y,!1),window.addEventListener("mouseup",v,!1),window.addEventListener("touchend",v,!1),window.addEventListener("pointerup",v,!1),window.addEventListener("mousemove",J,!1),window.addEventListener("touchmove",J,!1),window.addEventListener("mouseleave",A,!1),window.addEventListener("scroll",m,!0)}function iR(n,e,t){return t?n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right:function aq(n,e){var t=nR(e);return n.y>t.top&&n.y<t.bottom&&n.x>t.left&&n.x<t.right}(n,e)}function ob(n,e,t){t&&t.split(" ").forEach(i=>n.addClass(e.nativeElement,i))}function Jf(n,e,t){t&&t.split(" ").forEach(i=>n.removeClass(e.nativeElement,i))}let rR=(()=>{class n{constructor(){this.currentDrag=new R}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=we({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),sR=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(B(In))},n.\u0275dir=Be({type:n,selectors:[["","mwlDraggableScrollContainer",""]]}),n})(),fq=(()=>{class n{constructor(t,i,r,s,o,a,l){this.element=t,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new gt,this.dragStart=new gt,this.ghostElementCreated=new gt,this.dragging=new gt,this.dragEnd=new gt,this.pointerDown$=new R,this.pointerMove$=new R,this.pointerUp$=new R,this.eventListenerSubscriptions={},this.destroy$=new R,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const t=this.pointerDown$.pipe(wi(()=>this.canDrag()),I(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new T(g=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",y=>g.next(y))).pipe(tA(s),$(()=>this.getScrollPosition())),a=new R,l=new _I;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const u=Yt(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(jt()),c=ry([this.pointerMove$,o]).pipe($(([g,m])=>({currentDrag$:a,transformX:g.clientX-i.clientX,transformY:g.clientY-i.clientY,clientX:g.clientX,clientY:g.clientY,scrollLeft:m.left,scrollTop:m.top,target:g.event.target})),$(g=>(this.dragSnapGrid.x&&(g.transformX=Math.round(g.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(g.transformY=Math.round(g.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),g)),$(g=>(this.dragAxis.x||(g.transformX=0),this.dragAxis.y||(g.transformY=0),g)),$(g=>{const m=g.scrollLeft-s.left,y=g.scrollTop-s.top;return{...g,x:g.transformX+m,y:g.transformY+y}}),wi(({x:g,y:m,transformX:y,transformY:v})=>!this.validateDrag||this.validateDrag({x:g,y:m,transform:{x:y,y:v}})),YM(u),jt()),h=c.pipe(Hi(1),jt()),d=c.pipe(Ud(1),jt());return h.subscribe(({clientX:g,clientY:m,x:y,y:v})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function hq(n,e){return new cq(n,e)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),ob(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const b=this.element.nativeElement.getBoundingClientRect(),A=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(A):this.element.nativeElement.parentNode.insertBefore(A,this.element.nativeElement.nextSibling),this.ghostElement=A,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(A,{position:"fixed",top:`${b.top}px`,left:`${b.left}px`,width:`${b.width}px`,height:`${b.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const w=this.vcr.createEmbeddedView(this.ghostElementTemplate);A.innerHTML="",w.rootNodes.filter(M=>M instanceof Node).forEach(M=>{A.appendChild(M)}),d.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(w))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:g-y,clientY:m-v,element:A})}),d.subscribe(()=>{A.parentElement.removeChild(A),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),d.pipe(I(g=>{const m=l.pipe(function Q9(n){return function Z9(n,e){return Z(iA(n,e,arguments.length>=2,!1,!0))}((e,t,i)=>!n||n(t,i)?e+1:e,0)}(),Hi(1),$(y=>({...g,dragCancelled:y>0})));return l.complete(),m})).subscribe(({x:g,y:m,dragCancelled:y})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:g,y:m,dragCancelled:y})}),Jf(this.renderer,this.element,this.dragActiveClass),a.complete()}),Yt(u,d).pipe(Hi(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),c}),jt());Yt(t.pipe(Hi(1),$(i=>[,i])),t.pipe(JM())).pipe(wi(([i,r])=>!i||i.x!==r.x||i.y!==r.y),$(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:u,target:c})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const h=`translate3d(${l}px, ${u}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:h,"-webkit-transform":h,"-ms-transform":h,"-moz-transform":h,"-o-transform":h})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:c})})}ngOnChanges(t){t.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const t=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;t&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!t&&i&&this.unsubscribeEventListeners()}onMouseDown(t){0===t.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onMouseUp(t){0===t.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:t,clientX:t.clientX,clientY:t.clientY}))}onTouchStart(t){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=Qf(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=Qf(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(t,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:t,clientX:t.touches[0].clientX,clientY:t.touches[0].clientY})}onTouchEnd(t){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:t,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(t){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",t)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(t=>{this.eventListenerSubscriptions[t](),delete this.eventListenerSubscriptions[t]})}setElementStyles(t,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(t,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(t,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-t.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-t.touches[0].clientY)-o_top,c=this.touchStartLongPress;return(a+l>c.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=c.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const t=this.getScrollElement();return t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(Di),B(rR),B(an),B(tr),B(sR,8),B(Xn))},n.\u0275dir=Be({type:n,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Si]}),n})();function oR(n,e,t){return n>=t.left&&n<=t.right&&e>=t.top&&e<=t.bottom}let pq=(()=>{class n{constructor(t,i,r,s,o){this.element=t,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new gt,this.dragLeave=new gt,this.dragOver=new gt,this.drop=new gt}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(t=>{ob(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=t.pipe($(({clientX:u,clientY:c,dropData:h,target:d})=>{s={clientX:u,clientY:c,dropData:h,target:d},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const g=oR(u,c,i.rect),m=!this.validateDrop||this.validateDrop({clientX:u,clientY:c,target:d,dropData:h});return i.scrollContainerRect?g&&m&&oR(u,c,i.scrollContainerRect):g&&m})),a=o.pipe(function J9(n,e=Lt){return n=n??eq,Z((t,i)=>{let r,s=!0;t.subscribe(U(i,o=>{const a=e(o);(s||!n(r,a))&&(s=!1,r=a,i.next(o))}))})}());let l;a.pipe(wi(u=>u)).subscribe(()=>{l=!0,ob(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(wi(u=>u)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(JM(),wi(([u,c])=>u&&!c)).subscribe(()=>{l=!1,Jf(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),t.subscribe({complete:()=>{r(),Jf(this.renderer,this.element,this.dragActiveClass),l&&(Jf(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(B(In),B(rR),B(an),B(Di),B(sR,8))},n.\u0275dir=Be({type:n,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),n})(),gq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Nn({type:n}),n.\u0275inj=Dn({}),n})();const mq=["container"];class Ac{constructor(e,t){this._myMessageService=e,this._translateService=t,this._option={},this._pos_frame_mouse=new bt,this._pos_real_mouse=new bt,this._pos_last_frame_mouse=new bt,this._hotkey_label="",this._gauges=[],this._status={},this._gs_frame=new Tl,this._gs_main=new Tl,this._stages={},this._freams={},this._contextItems=[],this._track_point=[],this._status.system_time=Date.now(),this._status.interactive_time=0,this._status.last_time=Date.now(),this._status.last_time2=Date.now(),this._status.frames={},this._status.pointerdown=!1,this._myMessageService.keydown$.subscribe(i=>{this._hotkey_label=i})}get contextItems(){return this._contextItems}set contextItems(e){this._contextItems=e}get hotkey_label(){return this._hotkey_label}set hotkey_label(e){this._hotkey_label=e}get pos_real_mouse(){return this._pos_real_mouse}set pos_real_mouse(e){this._pos_real_mouse=e}get track_point(){return this._track_point}set track_point(e){this._track_point=e}get gs_main(){return this._gs_main}set gs_main(e){this._gs_main=e}get gs_frame(){return this._gs_frame}set gs_frame(e){this._gs_frame=e}get status(){return this._status}set status(e){this._status=e}get freams(){return this._freams}set freams(e){this._freams=e}get stages(){return this._stages}set stages(e){this._stages=e}get gauges(){return this._gauges}set gauges(e){this._gauges=e}get view_container(){return this._view_container}set view_container(e){this._view_container=e}get pos_frame_mouse(){return this._pos_frame_mouse}set pos_frame_mouse(e){this._pos_frame_mouse=e}get pos_last_frame_mouse(){return this._pos_last_frame_mouse}set pos_last_frame_mouse(e){this._pos_last_frame_mouse=e}get option(){return this._option}set option(e){this._option=e}get application(){return this._application}set application(e){this._application=e}ngOnInit(){this.setlangOption(),this._translateService.onLangChange.subscribe(()=>{this.setlangOption()}),this.loadOption(),this._application=new xv(this._option.window),this._container.nativeElement.appendChild(this._application.view),this._view_container=this._application.stage,this.createStage("frame",0,0,this._option.window.width,this._option.window.height),this.createStage("main",0,0,this._option.window.width,this._option.window.height),this._stages.main.interactive=!0,this._stages.main.cursor="pointer",this._stages.main.on("pointerdown",()=>{this._status.pointerdown=!0}),this._stages.main.on("pointerup",()=>{this._status.pointerdown=!1}),this._stages.main.on("pointermove",e=>{let t=this._freams.main;new bt;let r=t.getCellByPosition(e.global.x,e.global.y);0!=this._pos_frame_mouse.x&&0!=this._pos_frame_mouse.y&&this._pos_last_frame_mouse.set(this._pos_frame_mouse.x,this._pos_frame_mouse.y),r&&this._pos_frame_mouse.set(r.center.x,r.center.y),0!=this._pos_real_mouse.x&&0!=this._pos_real_mouse.y&&new bt(this._pos_real_mouse.x,this._pos_real_mouse.y),this._pos_real_mouse.set(e.global.x,e.global.y)}),this._stages.main.addChild(this.gs_main),this._stages.frame.addChild(this._gs_frame),this._application.ticker.add(()=>{this.tick()})}setlangOption(){this._translateService.get(["file"]).subscribe(e=>{this._contextItems=[{label:e.file,icon:"pi pi-fw pi-file",command:()=>{"tw"==localStorage.lang?localStorage.lang="en":localStorage.lang="tw",this._translateService.use(localStorage.lang)}},{label:"Edit",icon:"pi pi-fw pi-pencil",items:[{label:"Left",icon:"pi pi-fw pi-align-left"},{label:"Right",icon:"pi pi-fw pi-align-right"},{label:"Center",icon:"pi pi-fw pi-align-center"},{label:"Justify",icon:"pi pi-fw pi-align-justify"}]},{label:"Users",icon:"pi pi-fw pi-user",items:[{label:"New",icon:"pi pi-fw pi-user-plus"},{label:"Delete",icon:"pi pi-fw pi-user-minus"},{label:"Search",icon:"pi pi-fw pi-users",items:[{label:"Filter",icon:"pi pi-fw pi-filter",items:[{label:"Print",icon:"pi pi-fw pi-print"}]},{icon:"pi pi-fw pi-bars",label:"List"}]}]},{label:"Events",icon:"pi pi-fw pi-calendar",items:[{label:"Edit",icon:"pi pi-fw pi-pencil",items:[{label:"Save",icon:"pi pi-fw pi-calendar-plus"},{label:"Delete",icon:"pi pi-fw pi-calendar-minus"}]},{label:"Archieve",icon:"pi pi-fw pi-calendar-times",items:[{label:"Remove",icon:"pi pi-fw pi-calendar-minus"}]}]},{separator:!0},{label:"Quit",icon:"pi pi-fw pi-power-off"}]})}createStage(e,t,i,r,s){this._freams[e]=new v9(new Ot(t,i,r,s),10,8),this._stages[e]=new cr,this._status.frames[e]=!0,this._view_container.addChild(this._stages[e])}loadOption(){console.log(this._container.nativeElement.offsetHeight),Object.keys(localStorage),this._option={window:{width:this._container.nativeElement.offsetWidth,height:this._container.nativeElement.offsetHeight,backgroundColor:8355711},frames:{},debug:{}}}tick(){let e=Date.now();this._status.update_time=Date.now(),this._status.gauges=this._gauges.length,this._track_point.push(new bt(this._pos_real_mouse.x,this._pos_real_mouse.y)),this._track_point.length>20&&this._track_point.shift(),this._gs_frame.clear(),this._gs_main.clear(),this._gs_main.beginFill(16777215,.2),this._gs_main.drawRect(0,0,this._option.window.width,this._option.window.height),this._gs_main.endFill();for(let r in this._freams)this._status.frames[r]&&this.createGrid(this._freams[r],16777215);for(let r=0;r<this._track_point.length;r++){let s=this._track_point[r],o=r/20,a=5*(1-o);this._gs_main.beginFill(16711680,o),this._gs_main.drawCircle(s.x,s.y,a),this._gs_main.endFill()}this._gauges.forEach(r=>{r.update(),r.bActivated&&this._status.pointerdown&&(r.x=this._pos_frame_mouse.x,r.y=this._pos_frame_mouse.y)}),this._status.interactive_time=Date.now()-e,this._status.last_time2=Date.now()-this._status.last_time,this._status.last_time=Date.now()}createGrid(e,t){const i=e.first;if(this.gs_frame.lineStyle(1,t,.6),i){for(let r=0;r<=e.ncx;r++)this.gs_frame.moveTo(i.x+r*i.width,i.y),this.gs_frame.lineTo(i.x+r*i.width,i.y+e.range.height);for(let r=0;r<=e.ncy;r++)this.gs_frame.moveTo(i.x,i.y+r*i.height),this.gs_frame.lineTo(i.x+e.range.width,i.y+r*i.height)}}drop(e,t){var i=new qM(100,t);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i)}dragEnd(e,t){var i=new qM(100,t);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i),console.log("00",e)}}Ac.\u0275fac=function(e){return new(e||Ac)(B(Wo),B(lc))},Ac.\u0275cmp=os({type:Ac,selectors:[["app-main"]],viewQuery:function(e,t){if(1&e&&Po(mq,7),2&e){let i;_s(i=ys())&&(t._container=i.first)}},decls:31,vars:20,consts:[[1,"row"],[1,"row","div-main"],["mwlDroppable","",1,"div-editor-area"],["container",""],[1,"div-container"],["mwlDraggable","",1,"div-block",3,"dragEnd","drop"],["i",""],[3,"target","model"]],template:function(e,t){if(1&e&&(Nt(0,"div",0)(1,"div",1),yn(2,"div",2,3),Nt(4,"div",4)(5,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,0)})("drop",function(r){return t.drop(r,0)}),yi(7),Mo(8,"translate"),Ft(),Nt(9,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,1)})("drop",function(r){return t.drop(r,1)}),yi(11),Mo(12,"translate"),Ft(),Nt(13,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,2)})("drop",function(r){return t.drop(r,2)}),yi(15),Mo(16,"translate"),Ft(),Nt(17,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,3)})("drop",function(r){return t.drop(r,2)}),yi(19),Mo(20,"translate"),Ft(),Nt(21,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,4)})("drop",function(r){return t.drop(r,2)}),yi(23),Mo(24,"translate"),Ft(),Nt(25,"div",5,6),on("dragEnd",function(r){return t.dragEnd(r,5)})("drop",function(r){return t.drop(r,2)}),yi(27),Mo(28,"translate"),Ft()()(),yn(29,"p-contextMenu",7)(30,"div",0),Ft()),2&e){const i=fs(3);qe(7),gs(" ",Ro(8,8,"d1")," "),qe(4),gs(" ",Ro(12,10,"d2")," "),qe(4),gs(" ",Ro(16,12,"c")," "),qe(4),gs(" ",Ro(20,14,"v1")," "),qe(4),gs(" ",Ro(24,16,"v2")," "),qe(4),gs(" ",Ro(28,18,"img")," "),qe(2),Ce("target",i)("model",t.contextItems)}},dependencies:[ZM,fq,pq,Y$],styles:[".div-main[_ngcontent-%COMP%]{display:inline-flex;height:calc(100vh - 100px);width:calc(100vw - 15px);flex-direction:row;margin:0;box-sizing:content-box}.div-main[_ngcontent-%COMP%]   .div-editor-area[_ngcontent-%COMP%]{width:calc(100% - 200px);background-color:beige}.div-main[_ngcontent-%COMP%]   .div-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;background-color:#fff;width:200px}.div-main[_ngcontent-%COMP%]   .div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;margin:5px;width:150px;height:150px;border:2px solid black;border-radius:5px}.div-main[_ngcontent-%COMP%]   .div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]:active{transform:translateY(2px)}"]});class Ic{constructor(e,t,i){this._myMessageService=e,this._hotkeysService=t,this._translateService=i,this.title="editor",this._toolbarItems=[],localStorage&&!("lang"in localStorage)&&(localStorage.lang="tw");let r=Object.keys(dI);for(let s=0;s<r.length;s++){let o=r[s];this._hotkeysService.add(new oc(dI[o],l=>(this.title=`you keydown event =>${o}`,this._myMessageService.onMenuStateChange(o),!1)))}this._toolbarItems=[{label:"File",items:[{label:"New",icon:"pi pi-fw pi-plus",items:[{label:"Project"},{label:"Other"}]},{label:"Open"},{label:"Quit"}]},{label:"Edit",icon:"pi pi-fw pi-pencil",items:[{label:"Delete",icon:"pi pi-fw pi-trash"},{label:"Refresh",icon:"pi pi-fw pi-refresh"}]}]}get toolbarItems(){return this._toolbarItems}set toolbarItems(e){this._toolbarItems=e}ngOnInit(){this._translateService.setDefaultLang(localStorage.lang),this._translateService.onLangChange.subscribe(()=>{this.setlangOption()}),this.setlangOption()}setlangOption(){this._translateService.get(["file"]).subscribe(e=>{this._toolbarItems=[{label:e.file,command:()=>{"tw"==localStorage.lang?localStorage.lang="en":localStorage.lang="tw",this._translateService.use(localStorage.lang)}},{label:"Edit",icon:"pi pi-fw pi-pencil",items:[{label:"Delete",icon:"pi pi-fw pi-trash"},{label:"Refresh",icon:"pi pi-fw pi-refresh"}]}]})}}Ic.\u0275fac=function(e){return new(e||Ic)(B(Wo),B(gI),B(lc))},Ic.\u0275cmp=os({type:Ic,selectors:[["app-root"]],decls:3,vars:1,consts:[[1,"row"],[3,"model"]],template:function(e,t){1&e&&(Nt(0,"div",0),yn(1,"p-menubar",1),Ft(),yn(2,"app-main")),2&e&&(qe(1),Ce("model",t.toolbarItems))},dependencies:[R8,Ac]});class _q{constructor(e,t="/assets/i18n/",i=".json"){this.http=e,this.prefix=t,this.suffix=i}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}}class Al{}Al.\u0275fac=function(e){return new(e||Al)},Al.\u0275mod=Nn({type:Al,bootstrap:[Ic]}),Al.\u0275inj=Dn({imports:[BT,Q3,P8,$9,gq,q$.forRoot(),JG,Ej,K$.forRoot({loader:{provide:ac,useFactory:n=>new _q(n,"./assets/i18n/",".json"),deps:[GD]}}),fl]}),NV().bootstrapModule(Al).catch(n=>console.error(n))},23:$t=>{!function(ke){"use strict";function Se(p){if(Array.isArray(p)){for(var f=0,_=Array(p.length);f<p.length;f++)_[f]=p[f];return _}return Array.from(p)}function ge(p,f){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!f||"object"!=typeof f&&"function"!=typeof f?p:f}function Wt(p,f){if("function"!=typeof f&&null!==f)throw new TypeError("Super expression must either be null or a function, not "+typeof f);p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),f&&(Object.setPrototypeOf?Object.setPrototypeOf(p,f):p.__proto__=f)}function Et(p,f){if(!(p instanceof f))throw new TypeError("Cannot call a class as a function")}function nt(p,f){if(f||(f=typeof window>"u"?global:window),void 0!==f[p])return f[p];for(var _=["webkit","moz","ms","o"],E=0,S=_.length,D=p.charAt(0).toUpperCase()+p.substr(1);E<S;E++){var I=f[_[E]+D];if(void 0!==I)return I}return null}function Me(p,f,_,E,S,D,I){if("function"!=typeof E)throw new TypeError("Invalid animation rule:",E);var k=p-_,L=k/S,V=0;L>1&&(L=1),1!==L&&(V=E(L),isFinite(V)&&!isNaN(V)&&(L=V)),f&&f(L),k<S?I.frame=rp(function(ue){return Me(ue,f,_,E,S,D,I)}):(D&&D(),I.inProgress=!1)}function Ge(){Array.prototype.constructor.apply(this,arguments)}function Je(p,f,_,E,S,D){p.beginPath(),p.moveTo(f+D,_),p.lineTo(f+E-D,_),p.quadraticCurveTo(f+E,_,f+E,_+D),p.lineTo(f+E,_+S-D),p.quadraticCurveTo(f+E,_+S,f+E-D,_+S),p.lineTo(f+D,_+S),p.quadraticCurveTo(f,_+S,f,_+S-D),p.lineTo(f,_+D),p.quadraticCurveTo(f,_,f+D,_),p.closePath()}function Tt(p,f){var k,_=f.valueDec,E=f.valueInt,S=0,D=void 0,I=void 0;if(k=(p=parseFloat(p))<0,p=Math.abs(p),_>0){for(D=E-(I=p.toFixed(_).toString().split("."))[0].length;S<D;++S)I[0]="0"+I[0];I=(k?"-":"")+I[0]+"."+I[1]}else{for(D=E-(I=Math.round(p).toString()).length;S<D;++S)I="0"+I;I=(k?"-":"")+I}return I}function rt(p,f,_){return p["font"+f+"Style"]+" "+p["font"+f+"Weight"]+" "+p["font"+f+"Size"]*_+"px "+p["font"+f]}function mn(p){p.shadowOffsetX=null,p.shadowOffsetY=null,p.shadowBlur=null,p.shadowColor="",p.strokeStyle=null,p.lineWidth=0,p.save()}function Tn(p,f,_,E){f.valueTextShadow&&(p.shadowOffsetX=_,p.shadowOffsetY=_,p.shadowBlur=E,p.shadowColor=f.colorValueTextShadow)}function rn(p,f,_,E,S){_.beginPath(),_.arc(0,0,Ci(p),0,2*Hs,!0),_.lineWidth=f,_.strokeStyle=S?ye.linearGradient(_,E,S,p):E,_.stroke(),_.closePath()}function x(p,f){var _=zi.pixelRatio;return p.maxRadius||(p.maxRadius=p.max-f.borderShadowWidth-f.borderOuterWidth*_-f.borderMiddleWidth*_-f.borderInnerWidth*_+(f.borderOuterWidth?.5:0)+(f.borderMiddleWidth?.5:0)+(f.borderInnerWidth?.5:0)),p.maxRadius}function Y(p,f){var _=zi.pixelRatio,S=p.max-f.borderShadowWidth*_-f.borderOuterWidth*_/2,D=S-f.borderOuterWidth*_/2-f.borderMiddleWidth*_/2+.5,I=D-f.borderMiddleWidth*_/2-f.borderInnerWidth*_/2+.5,k=x(p,f),L=void 0,V=!1;p.save(),f.borderOuterWidth&&(V=ye.drawShadow(p,f,V),rn(S,f.borderOuterWidth*_,p,f.colorBorderOuter,f.colorBorderOuterEnd)),f.borderMiddleWidth&&(V=ye.drawShadow(p,f,V),rn(D,f.borderMiddleWidth*_,p,f.colorBorderMiddle,f.colorBorderMiddleEnd)),f.borderInnerWidth&&(V=ye.drawShadow(p,f,V),rn(I,f.borderInnerWidth*_,p,f.colorBorderInner,f.colorBorderInnerEnd)),ye.drawShadow(p,f,V),p.beginPath(),p.arc(0,0,Ci(k),0,2*Hs,!0),f.colorPlateEnd?((L=p.createRadialGradient(0,0,k/2,0,0,k)).addColorStop(0,f.colorPlate),L.addColorStop(1,f.colorPlateEnd)):L=f.colorPlate,p.fillStyle=L,p.fill(),p.closePath(),p.restore()}function N(p,f){var _=p.max*(parseFloat(f.highlightsWidth)||0)/100;if(_){var E=Ci(dt(p,f)-_/2),S=0,D=f.highlights.length,I=(f.maxValue-f.minValue)/f.ticksAngle;for(p.save();S<D;S++){var k=f.highlights[S];p.beginPath(),p.rotate(_o),p.arc(0,0,E,ye.radians(f.startAngle+(k.from-f.minValue)/I),ye.radians(f.startAngle+(k.to-f.minValue)/I),!1),p.strokeStyle=k.color,p.lineWidth=_,p.lineCap=f.highlightsLineCap,p.stroke(),p.closePath(),p.restore(),p.save()}}}function Ke(p,f){var _=dt(p,f),E=void 0,D=void 0,I=0,k=0,L=Math.abs(f.minorTicks)||0,V=f.ticksAngle/(f.maxValue-f.minValue);for(p.lineWidth=zi.pixelRatio,p.strokeStyle=f.colorMinorTicks||f.colorStrokeTicks,p.save(),f.exactTicks?(E=L?(f.maxValue-f.minValue)/L:0,k=(Xi.mod(f.majorTicks[0],L)||0)*V):E=L*(f.majorTicks.length-1);I<E;++I)(D=f.startAngle+k+I*(f.ticksAngle/E))<=f.ticksAngle+f.startAngle&&(p.rotate(ye.radians(D)),p.beginPath(),p.moveTo(0,_),p.lineTo(0,_-.075*p.max),C(p))}function dt(p,f){var _=p.max/100;return x(p,f)-5*_-(f.barWidth?2*(parseFloat(f.barStrokeWidth)||0)+((parseFloat(f.barWidth)||0)+5)*_:0)}function zt(p,f){ye.prepareTicks(f);var S,_=Ci(dt(p,f)),E=void 0,D=f.majorTicks.length;for(p.lineWidth=2*zi.pixelRatio,p.save(),S=f.colorMajorTicks instanceof Array?f.colorMajorTicks:new Array(D).fill(f.colorStrokeTicks||f.colorMajorTicks),E=0;E<D;++E)p.strokeStyle=S[E],p.rotate(ye.radians(Lt(f,f.exactTicks?f.majorTicks[E]:E,D))),p.beginPath(),p.moveTo(0,_),p.lineTo(0,_-.15*p.max),C(p);f.strokeTicks&&(p.strokeStyle=f.colorStrokeTicks||S[0],p.rotate(_o),p.beginPath(),p.arc(0,0,_,ye.radians(f.startAngle),ye.radians(f.startAngle+f.ticksAngle),!1),C(p))}function Lt(p,f,_){return p.exactTicks?p.startAngle+p.ticksAngle/(p.maxValue-p.minValue)*(f-p.minValue):p.startAngle+f*(p.ticksAngle/(_-1))}function C(p){p.stroke(),p.restore(),p.closePath(),p.save()}function P(p,f){var _=dt(p,f)-.15*p.max,E={},S=0,D=f.majorTicks.length,I="needle"!==f.animationTarget,k=f.colorNumbers instanceof Array?f.colorNumbers:new Array(D).fill(f.colorNumbers),L=I?-(f.value-f.minValue)/(f.maxValue-f.minValue)*f.ticksAngle:0;for(I&&(p.save(),p.rotate(-ye.radians(L))),p.font=ye.font(f,"Numbers",p.max/200),p.lineWidth=0,p.textAlign="center",p.textBaseline="middle";S<D;++S){var V=L+Lt(f,f.exactTicks?f.majorTicks[S]:S,D),ue=p.measureText(f.majorTicks[S]).width,he=f.fontNumbersSize,$e=Math.sqrt(ue*ue+he*he)/2,tt=ye.radialPoint(_-$e-f.numbersMargin/100*p.max,ye.radians(V));360===V&&(V=0),E[V]||(E[V]=!0,p.fillStyle=k[S],p.fillText(f.majorTicks[S],tt.x,tt.y))}I&&p.restore()}function T(p,f){f.title&&(p.save(),p.font=ye.font(f,"Title",p.max/200),p.fillStyle=f.colorTitle,p.textAlign="center",p.fillText(f.title,0,-p.max/4.25,.8*p.max),p.restore())}function H(p,f){f.units&&(p.save(),p.font=ye.font(f,"Units",p.max/200),p.fillStyle=f.colorUnits,p.textAlign="center",p.fillText(ye.formatContext(f,f.units),0,p.max/3.25,.8*p.max),p.restore())}function G(p,f){if(f.needle){var _=f.ticksAngle<360?ye.normalizedValue(f).indented:f.value,E=$e?f.startAngle:f.startAngle+(_-f.minValue)/(f.maxValue-f.minValue)*f.ticksAngle;"right"===f.barStartPosition&&(E=f.startAngle+f.ticksAngle-(_-f.minValue)/(f.maxValue-f.minValue)*f.ticksAngle);var S=x(p,f),D=Ci(S/100*f.needleCircleSize),I=Ci(S/100*f.needleCircleSize*.75),k=Ci(S/100*f.needleEnd),L=Ci(f.needleStart?S/100*f.needleStart:0),V=S/100*f.needleWidth,ue=S/100*f.needleWidth/2,he=zi.pixelRatio,$e="needle"!==f.animationTarget;p.save(),ye.drawNeedleShadow(p,f),p.rotate(ye.radians(E)),p.fillStyle=ye.linearGradient(p,f.colorNeedle,f.colorNeedleEnd,k-L),"arrow"===f.needleType?(p.beginPath(),p.moveTo(-ue,-L),p.lineTo(-V,0),p.lineTo(-1*he,k),p.lineTo(he,k),p.lineTo(V,0),p.lineTo(ue,-L),p.closePath(),p.fill(),p.beginPath(),p.lineTo(-.5*he,k),p.lineTo(-1*he,k),p.lineTo(-V,0),p.lineTo(-ue,-L),p.lineTo(ue/2*he-2*he,-L),p.closePath(),p.fillStyle=f.colorNeedleShadowUp,p.fill()):(p.beginPath(),p.moveTo(-ue,k),p.lineTo(-ue,L),p.lineTo(ue,L),p.lineTo(ue,k),p.closePath(),p.fill()),f.needleCircleSize&&(p.restore(),ye.drawNeedleShadow(p,f),f.needleCircleOuter&&(p.beginPath(),p.arc(0,0,D,0,2*Hs,!0),p.fillStyle=ye.linearGradient(p,f.colorNeedleCircleOuter,f.colorNeedleCircleOuterEnd,D),p.fill(),p.closePath()),f.needleCircleInner&&(p.beginPath(),p.arc(0,0,I,0,2*Hs,!0),p.fillStyle=ye.linearGradient(p,f.colorNeedleCircleInner,f.colorNeedleCircleInnerEnd,I),p.fill(),p.closePath()),p.restore())}}function O(p,f,_){ye.drawValueBox(p,f,_,0,p.max-.33*p.max,p.max)}function R(p,f){var _=p.max/100,E=x(p,f)-5*_,S=parseFloat(f.barStrokeWidth+"")||0,D=(parseFloat(f.barWidth+"")||0)*_,I=E-2*S-D,k=(E-I)/2,L=I+k,V=S/L,ue=f.startAngle,he=f.startAngle+f.ticksAngle;if(p.save(),p.rotate(_o),S&&(p.beginPath(),p.arc(0,0,L,ye.radians(ue)-V,ye.radians(he)+V,!1),p.strokeStyle=f.colorBarStroke,p.lineWidth=2*k,p.stroke(),p.closePath()),D&&(p.beginPath(),p.arc(0,0,L,ye.radians(ue),ye.radians(he),!1),p.strokeStyle=f.colorBar,p.lineWidth=D,p.stroke(),p.closePath(),f.barShadow&&(p.beginPath(),p.arc(0,0,E,ye.radians(ue),ye.radians(he),!1),p.clip(),p.beginPath(),p.strokeStyle=f.colorBar,p.lineWidth=1,p.shadowBlur=f.barShadow,p.shadowColor=f.colorBarShadow,p.shadowOffsetX=0,p.shadowOffsetY=0,p.arc(0,0,E,ye.radians(f.startAngle),ye.radians(f.startAngle+f.ticksAngle),!1),p.stroke(),p.closePath(),p.restore(),p.rotate(_o)),f.barProgress)){var $e=function F(p){var f=p.startAngle,_=p.startAngle+p.ticksAngle,E=f,S=f+(ye.normalizedValue(p).normal-p.minValue)/(p.maxValue-p.minValue)*p.ticksAngle;if("middle"===p.barStartPosition){var D=.5*(p.minValue+p.maxValue);p.value<D?(E=180-(D-ye.normalizedValue(p).normal)/(p.maxValue-p.minValue)*p.ticksAngle,S=180):(E=180,S=180+(ye.normalizedValue(p).normal-D)/(p.maxValue-p.minValue)*p.ticksAngle)}else"right"===p.barStartPosition&&(E=_-S+f,S=_);return{startAngle:E,endAngle:S}}(f),tt=$e.startAngle,Ze=$e.endAngle;p.beginPath(),p.arc(0,0,L,ye.radians(tt),ye.radians(Ze),!1),p.strokeStyle=f.colorBarProgress,p.lineWidth=D,p.stroke(),p.closePath()}p.restore()}function X(p){return p.options.animatedValue?p.options.value:p.value}function Z(p,f,_,E,S,D,I,k,L){p.beginPath(),p.lineWidth=f,p.strokeStyle=L?ye.linearGradient(p,k,L,I,!0,S):k,_>0?ye.roundRect(p,E,S,D,I,_):p.rect(E,S,D,I),p.stroke(),p.closePath()}function $(p,f,_,E,S,D,I){var k=function ce(p,f,_,E,S,D){var I=zi.pixelRatio,k=D>=S,L=k?.85*S:D,V=k?D:S;_=k?st(_+(S-L)/2):_;var ue=!!f.title,he=!!f.units,$e=!!f.valueBox,tt=void 0,Ze=void 0,Gt=void 0;k?(Ze=st(.05*V),tt=st(.075*V),Gt=st(.11*V),ue&&(V-=tt,E+=tt),he&&(V-=Ze),$e&&(V-=Gt)):(Ze=tt=st(.15*L),ue&&(L-=tt,E+=tt),he&&(L-=Ze));var ct=2*f.barStrokeWidth,wt=f.barBeginCircle?st(L*f.barBeginCircle/200-ct/2):0,Dt=st(L*f.barWidth/100-ct),Bt=st(V*f.barLength/100-ct),Rt=st((V-Bt)/2),ft=st(_+(k?L/2:Rt+wt)),Fe=st(E+(k?V-Rt-wt+ct/2:L/2)),Ue=!k||f.hasLeft&&f.hasRight?0:(f.hasRight?-1:1)*f.ticksWidth/100*L,yt=k||f.hasLeft&&f.hasRight?0:(f.hasRight?-1:1)*f.ticksWidth/100*L;return p.barDimensions={isVertical:k,width:L,length:V,barWidth:Dt,barLength:Bt,strokeWidth:ct,barMargin:Rt,radius:wt,pixelRatio:I,barOffset:null,titleMargin:ue?tt:0,unitsMargin:he?Ze:0,get ticksLength(){return this.barLength-this.barOffset-this.strokeWidth},X:_+Ue,Y:E+yt,x0:ft+Ue,y0:Fe+yt,baseX:_,baseY:E,ticksPadding:f.ticksPadding/100},p.barDimensions}(p,f,E,S,D,I),L=k.isVertical,V=k.width,ue=k.barWidth,he=k.barLength,$e=k.strokeWidth,tt=k.barMargin,Ze=k.radius,Gt=k.x0,ct=k.y0,wt=k.X,Dt=k.Y,Bt=he;if(p.save(),p.beginPath(),f.barBeginCircle){var Rt=ye.radians(L?270:0),ft=Math.asin(ue/2/Ze),Fe=Math.cos(ft),Ue=Math.sin(ft),yt=Gt+(L?Ze*Ue:Ze*Fe-$e/2),We=L?ct-Ze*Fe:ct+Ze*Ue,Yt=Ci(L?We-ct:yt-Gt);p.barDimensions.barOffset=st(Yt+Ze);var jt=L?st(Gt-Ze*Ue):yt,di=L?We:st(ct-Ze*Ue);"progress"===_&&(he=p.barDimensions.barOffset+(he-p.barDimensions.barOffset)*(ye.normalizedValue(f).normal-f.minValue)/(f.maxValue-f.minValue));var At=st(yt+he-p.barDimensions.barOffset+$e/2),is=st(We-he+p.barDimensions.barOffset-$e/2);p.arc(Gt,ct,Ze,Rt+ft,Rt-ft),L?(p.moveTo(yt,di),p.lineTo(yt,is),p.lineTo(jt,is),p.lineTo(jt,di)):(p.moveTo(yt,di),p.lineTo(At,di),p.lineTo(At,We),p.lineTo(yt,We))}else{var kt=st(L?wt+(V-ue)/2:wt+tt),ha=st(L?Dt+he+tt:Dt+(V-ue)/2);"progress"===_&&(he*=(f.value-f.minValue)/(f.maxValue-f.minValue)),L?p.rect(kt,ha,ue,-he):p.rect(kt,ha,he,ue)}"progress"!==_&&f.barStrokeWidth&&(p.lineWidth=$e,p.strokeStyle=f.colorBarStroke,p.stroke()),"progress"!==_&&f.colorBar?(p.fillStyle=f.colorBarEnd?ye.linearGradient(p,f.colorBar,f.colorBarEnd,he,L,L?Dt:wt):f.colorBar,p.fill()):"progress"===_&&f.colorBarProgress&&(p.fillStyle=f.colorBarProgressEnd?ye.linearGradient(p,f.colorBarProgress,f.colorBarProgressEnd,Bt,L,L?Dt:wt):f.colorBarProgress,p.fill()),p.closePath(),f.barBeginCircle&&(p.barDimensions.radius+=$e),p.barDimensions.barWidth+=$e,p.barDimensions.barLength+=$e}function me(p,f,_,E,S,D){$(p,f,"",_,E,S,D)}function xt(p,f){return f.needleSide!==p||f.tickSide!==p||f.numberSide!==p}function _t(p,f,_,E,S,D){f.barProgress&&$(p,f,"progress",_,E,S,D)}function Ht(p,f,_,E,S){p.beginPath(),p.moveTo(f,_),p.lineTo(E,S),p.stroke(),p.closePath(),p.save()}function je(p,f,_,E,S,D,I,k,L){var V=p.barDimensions,ue=V.isVertical,he=V.length,$e=V.barWidth,tt=V.barOffset,Ze=V.barMargin,Gt=V.pixelRatio,ct=V.width,wt=V.X,Dt=V.Y,Bt=V.ticksLength,Rt=V.ticksPadding,ft=(ct-$e)/2,Fe=void 0,Ue=void 0,yt=0,We=_.length,Yt=void 0,jt=L*ct,di=ft-Rt*ct,At=ft+$e+jt+Rt*ct,is=f instanceof Array?f:new Array(_.length).fill(f);p.lineWidth=k*Gt,p.save();for(var kt=Bt/(S-E);yt<We;yt++)Yt=_[yt],p.strokeStyle=is[yt],ue?(Ue=Dt+he-Ze-tt+(E-Yt)*kt,D&&Ht(p,Fe=wt+di,Ue,st(Fe-jt),Ue),I&&Ht(p,Fe=wt+At,Ue,st(Fe-jt),Ue)):(Fe=wt+Ze+tt-(E-Yt)*kt,D&&Ht(p,Fe,Ue=Dt+di,Fe,st(Ue-jt)),I&&Ht(p,Fe,st(Ue=Dt+At),Fe,Ue-jt))}function Wi(p,f,_,E,S){p.beginPath(),p.moveTo(f,_),p.lineTo(E,S),p.stroke(),p.closePath()}function tp(p,f,_,E){return f.colorNeedleEnd?ye.linearGradient(p,E?f.colorNeedleEnd:f.colorNeedle,E?f.colorNeedle:f.colorNeedleEnd,_,!p.barDimensions.isVertical):f.colorNeedle}function ab(p,f,_,E,S,D,I,k){p.lineWidth=f.needleWidth,p.strokeStyle=tp(p,f,I,k),p.beginPath(),p.moveTo(_,E),p.lineTo(S,D),p.stroke(),p.closePath()}function lb(p,f,_,E,S,D,I,k){var V=I-st(.4*I),ue=_===S,he=f.needleWidth/2;p.fillStyle=tp(p,f,I,k),p.beginPath(),ue?(E>D&&(V*=-1),p.moveTo(_-he,E),p.lineTo(_+he,E),p.lineTo(_+he,E+V),p.lineTo(_,D),p.lineTo(_-he,E+V),p.lineTo(_-he,E)):(_>S&&(V*=-1),p.moveTo(_,E-he),p.lineTo(_,E+he),p.lineTo(_+V,E+he),p.lineTo(S,E),p.lineTo(_+V,E-he),p.lineTo(_,E-he)),p.fill(),p.closePath()}function ns(p,f,_,E,S,D,I){var k=(parseFloat(f.fontValueSize)||0)*D/200;p.barDimensions.isVertical&&ye.drawValueBox(p,f,_,E+D/2,S+I-k-(.11*I-k)/2,D)}var Rc=function(f,_){if(Array.isArray(f))return f;if(Symbol.iterator in Object(f))return function p(f,_){var E=[],S=!0,D=!1,I=void 0;try{for(var k,L=f[Symbol.iterator]();!(S=(k=L.next()).done)&&(E.push(k.value),!_||E.length!==_);S=!0);}catch(V){D=!0,I=V}finally{try{!S&&L.return&&L.return()}finally{if(D)throw I}}return E}(f,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Pc=function p(f,_,E){null===f&&(f=Function.prototype);var S=Object.getOwnPropertyDescriptor(f,_);if(void 0===S){var D=Object.getPrototypeOf(f);return null===D?void 0:p(D,_,E)}if("value"in S)return S.value;var I=S.get;return void 0!==I?I.call(E):void 0},np=function p(f,_,E,S){var D=Object.getOwnPropertyDescriptor(f,_);if(void 0===D){var I=Object.getPrototypeOf(f);null!==I&&p(I,_,E,S)}else if("value"in D&&D.writable)D.value=E;else{var k=D.set;void 0!==k&&k.call(S,E)}return E},Us=function(){function p(f,_){for(var E=0;E<_.length;E++){var S=_[E];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(f,S.key,S)}}return function(f,_,E){return _&&p(f.prototype,_),E&&p(f,E),f}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(p,f){if(null==p)throw new TypeError("Cannot convert first argument to object");for(var _=Object(p),E=1;E<arguments.length;E++){var S=arguments[E];if(null!=S)for(var D=Object.keys(Object(S)),I=0,k=D.length;I<k;I++){var L=D[I],V=Object.getOwnPropertyDescriptor(S,L);void 0!==V&&V.enumerable&&(_[L]=S[L])}}return _}}),Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(p,f){var _;if(null===this)throw new TypeError('"this" is null or not defined');var E=Object(this),S=E.length>>>0;if(0===S)return-1;var D=+f||0;if(Math.abs(D)===1/0&&(D=0),D>=S)return-1;for(_=Math.max(D>=0?D:S-Math.abs(D),0);_<S;){if(_ in E&&E[_]===p)return _;_++}return-1}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(p){if(null===this)throw new TypeError("this is null or not defined");for(var f=Object(this),_=f.length>>>0,E=arguments[1],S=E>>0,D=S<0?Math.max(_+S,0):Math.min(S,_),I=arguments[2],k=void 0===I?_:I>>0,L=k<0?Math.max(_+k,0):Math.min(k,_);D<L;)f[D]=p,D++;return f}}),typeof window>"u"&&(window=typeof global>"u"?{}:global);var ip=function(){function p(){Et(this,p),this._events={},this.addListener=this.on,this.removeListener=this.off}return Us(p,[{key:"emit",value:function(f){if(this._events[f]){for(var _=0,E=this._events[f].length,S=arguments.length,D=Array(S>1?S-1:0),I=1;I<S;I++)D[I-1]=arguments[I];for(;_<E;_++)this._events[f][_]&&this._events[f][_].apply(this,D)}}},{key:"once",value:function(f){for(var _=arguments.length,E=Array(_>1?_-1:0),S=1;S<_;S++)E[S-1]=arguments[S];for(var D=0,I=E.length,k=this;D<I;D++)!function(){var L=E[D];E[D]=function ue(){k.off(f,ue),L.apply(k,arguments)}}();this.on.apply(this,[f].concat(E))}},{key:"on",value:function(f){this._events[f]||(this._events[f]=[]);for(var _=0,E=arguments.length<=1?0:arguments.length-1;_<E;_++)this._events[f].push(arguments.length<=_+1?void 0:arguments[_+1])}},{key:"off",value:function(f){if(this._events[f])for(var _=0,E=arguments.length<=1?0:arguments.length-1;_<E;_++)for(var S=arguments.length<=_+1?void 0:arguments[_+1],D=void 0;~(D=this._events[f].indexOf(S));)this._events[f].splice(D,1)}},{key:"removeAllListeners",value:function(f){delete this._events[f]}},{key:"listeners",get:function(){return this._events}}]),p}(),rp=nt("requestAnimationFrame")||function(p){return setTimeout(function(){return p((new Date).getTime())},1e3/60)},ua={linear:function(p){return p},quad:function(p){return Math.pow(p,2)},dequad:function(p){return 1-ua.quad(1-p)},quint:function(p){return Math.pow(p,5)},dequint:function(p){return 1-Math.pow(1-p,5)},cycle:function(p){return 1-Math.sin(Math.acos(p))},decycle:function(p){return Math.sin(Math.acos(1-p))},bounce:function(p){return 1-ua.debounce(1-p)},debounce:function(p){for(var f=0,_=1;;f+=_,_/=2)if(p>=(7-4*f)/11)return-Math.pow((11-6*f-11*p)/4,2)+Math.pow(_,2)},elastic:function(p){return 1-ua.delastic(1-p)},delastic:function(p){return Math.pow(2,10*(p-1))*Math.cos(20*Math.PI*1.5/3*p)}},Oc=function(){function p(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear",_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(Et(this,p),this.duration=_,this.rule=f,this.draw=E,this.end=S,"function"!=typeof this.draw)throw new TypeError("Invalid animation draw callback:",E);if("function"!=typeof this.end)throw new TypeError("Invalid animation end callback:",S)}return Us(p,[{key:"animate",value:function(f,_){var E=this;this.frame&&this.cancel();var S=window.performance&&window.performance.now?window.performance.now():nt("animationStartTime")||Date.now();_=_||this.end,this.draw=f=f||this.draw,this.end=_,this.frame=rp(function(D){return Me(D,f,S,ua[E.rule]||E.rule,E.duration,_,E)})}},{key:"cancel",value:function(){this.frame&&((nt("cancelAnimationFrame")||function(f){})(this.frame),this.frame=null)}},{key:"destroy",value:function(){this.cancel(),this.draw=null,this.end=null}}]),p}();Oc.rules=ua;var go=function(){function p(f,_,E){Et(this,p),this.options=f,this.element=_.toLowerCase(),this.type=p.toDashed(E),this.Type=ke[E],this.mutationsObserved=!1,this.isObservable=!!window.MutationObserver,window.GAUGES_NO_AUTO_INIT||p.domReady(this.traverse.bind(this))}return Us(p,[{key:"isValidNode",value:function(f){return!(!f.tagName||f.tagName.toLowerCase()!==this.element||f.getAttribute("data-type")!==this.type)}},{key:"traverse",value:function(){for(var f=document.getElementsByTagName(this.element),_=0,E=f.length;_<E;_++)this.process(f[_]);this.isObservable&&!this.mutationsObserved&&(new MutationObserver(this.observe.bind(this)).observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.mutationsObserved=!0)}},{key:"observe",value:function(f){for(var _=0,E=f.length;_<E;_++){var S=f[_];if("attributes"===S.type&&"data-type"===S.attributeName&&this.isValidNode(S.target)&&S.oldValue!==this.type)setTimeout(this.process.bind(this,S.target));else if(S.addedNodes&&S.addedNodes.length)for(var D=0,I=S.addedNodes.length;D<I;D++)setTimeout(this.process.bind(this,S.addedNodes[D]))}}},{key:"process",value:function(f){var _=this;if(!this.isValidNode(f))return null;var E=void 0,S=JSON.parse(JSON.stringify(this.options)),D=null;for(E in S)if(S.hasOwnProperty(E)){var I=p.toAttributeName(E),k=p.parse(f.getAttribute(I));null!=k&&(S[E]=k)}return S.renderTo=f,(D=new this.Type(S)).draw&&D.draw(),this.isObservable&&(D.observer=new MutationObserver(function(L){L.forEach(function(V){if("attributes"===V.type){var ue=V.attributeName.toLowerCase(),he=f.getAttribute(ue).toLowerCase();if("data-type"===ue&&he&&he!==_.type)D.observer.disconnect(),delete D.observer,D.destroy&&D.destroy();else if("data-"===ue.substr(0,5)){var $e=ue.substr(5).split("-").map(function(Ze,Gt){return Gt?Ze.charAt(0).toUpperCase()+Ze.substr(1):Ze}).join(""),tt={};tt[$e]=p.parse(f.getAttribute(V.attributeName)),"value"===$e?D&&(D.value=tt[$e]):D.update&&D.update(tt)}}})}),D.observer.observe(f,{attributes:!0})),D}}],[{key:"parse",value:function(f){if("true"===f)return!0;if("false"===f)return!1;if("undefined"!==f){if("null"===f)return null;if(/^[-+#.\w\d\s]+(?:,[-+#.\w\d\s]*)+$/.test(f))return f.split(",");try{return JSON.parse(f)}catch{}return f}}},{key:"toDashed",value:function(f){for(var _=f.split(/(?=[A-Z])/),E=1,S=_.length,D=_[0].toLowerCase();E<S;E++)D+="-"+_[E].toLowerCase();return D}},{key:"toCamelCase",value:function(f){for(var _=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],E=f.split(/-/),S=0,D=E.length,I="";S<D;S++)I+=S||_?E[S][0].toUpperCase()+E[S].substr(1).toLowerCase():E[S].toLowerCase();return I}},{key:"toAttributeName",value:function(f){return"data-"+p.toDashed(f)}},{key:"domReady",value:function(f){if(/comp|inter|loaded/.test((window.document||{}).readyState+""))return f();window.addEventListener?window.addEventListener("DOMContentLoaded",f,!1):window.attachEvent&&window.attachEvent("onload",f)}}]),p}(),zi=function(){function p(f,_,E){Et(this,p),p.collection.push(this),this.width=_||0,this.height=E||0,this.element=f,this.init()}return Us(p,[{key:"init",value:function(){var f=p.pixelRatio;this.element.width=this.width*f,this.element.height=this.height*f,this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.elementClone=this.element.cloneNode(!0),this.context=this.element.getContext("2d"),this.contextClone=this.elementClone.getContext("2d"),this.drawWidth=this.element.width,this.drawHeight=this.element.height,this.drawX=this.drawWidth/2,this.drawY=this.drawHeight/2,this.minSide=this.drawX<this.drawY?this.drawX:this.drawY,this.elementClone.initialized=!1,this.contextClone.translate(this.drawX,this.drawY),this.contextClone.save(),this.context.translate(this.drawX,this.drawY),this.context.save(),this.context.max=this.contextClone.max=this.minSide,this.context.maxRadius=this.contextClone.maxRadius=null}},{key:"destroy",value:function(){var f=p.collection.indexOf(this);~f&&p.collection.splice(f,1),this.context.clearRect(-this.drawX,-this.drawY,this.drawWidth,this.drawHeight),this.context.max=null,delete this.context.max,this.context.maxRadius=null,delete this.context.maxRadius,this.context=null,this.contextClone=null,this.elementClone=null,this.element=null,this.onRedraw=null}},{key:"commit",value:function(){var f=p.pixelRatio;return 1!==f&&(this.contextClone.scale(f,f),this.contextClone.save()),this}},{key:"redraw",value:function(){return this.init(),this.onRedraw&&this.onRedraw(),this}}],[{key:"redraw",value:function(){for(var f=0,_=p.collection.length;f<_;f++)p.collection[f].redraw()}},{key:"pixelRatio",get:function(){return window.devicePixelRatio||1}}]),p}();zi.collection=[],window.matchMedia&&window.matchMedia("screen and (min-resolution: 2dppx)").addListener(zi.redraw);var mo={renderTo:null,width:0,height:0,minValue:0,maxValue:100,value:0,units:!1,exactTicks:!1,majorTicks:[0,20,40,60,80,100],minorTicks:10,strokeTicks:!0,animatedValue:!1,animateOnInit:!1,title:!1,borders:!0,numbersMargin:1,listeners:null,valueInt:3,valueDec:2,majorTicksInt:1,majorTicksDec:0,animation:!0,animationDuration:500,animationRule:"cycle",colorPlate:"#fff",colorPlateEnd:"",colorMajorTicks:"#444",colorMinorTicks:"#666",colorStrokeTicks:"",colorTitle:"#888",colorUnits:"#888",colorNumbers:"#444",colorNeedle:"rgba(240,128,128,1)",colorNeedleEnd:"rgba(255,160,122,.9)",colorValueText:"#444",colorValueTextShadow:"rgba(0,0,0,0.3)",colorBorderShadow:"rgba(0,0,0,0.5)",colorBorderOuter:"#ddd",colorBorderOuterEnd:"#aaa",colorBorderMiddle:"#eee",colorBorderMiddleEnd:"#f0f0f0",colorBorderInner:"#fafafa",colorBorderInnerEnd:"#ccc",colorValueBoxRect:"#888",colorValueBoxRectEnd:"#666",colorValueBoxBackground:"#babab2",colorValueBoxShadow:"rgba(0,0,0,1)",colorNeedleShadowUp:"rgba(2,255,255,0.2)",colorNeedleShadowDown:"rgba(188,143,143,0.45)",colorBarStroke:"#222",colorBar:"#ccc",colorBarProgress:"#888",colorBarShadow:"#000",fontNumbers:"Arial",fontTitle:"Arial",fontUnits:"Arial",fontValue:"Arial",fontNumbersSize:20,fontTitleSize:24,fontUnitsSize:22,fontValueSize:26,fontNumbersStyle:"normal",fontTitleStyle:"normal",fontUnitsStyle:"normal",fontValueStyle:"normal",fontNumbersWeight:"normal",fontTitleWeight:"normal",fontUnitsWeight:"normal",fontValueWeight:"normal",needle:!0,needleShadow:!0,needleType:"arrow",needleStart:5,needleEnd:85,needleWidth:4,borderOuterWidth:3,borderMiddleWidth:3,borderInnerWidth:3,borderShadowWidth:3,valueBox:!0,valueBoxStroke:5,valueBoxWidth:0,valueText:"",valueTextShadow:!0,valueBoxBorderRadius:2.5,highlights:[{from:20,to:60,color:"#eee"},{from:60,to:80,color:"#ccc"},{from:80,to:100,color:"#999"}],highlightsWidth:15,highlightsLineCap:"butt",barWidth:20,barStrokeWidth:0,barProgress:!0,barShadow:0};(Ge.prototype=Object.create(Array.prototype)).constructor=Ge,Ge.prototype.get=function(p){if("string"==typeof p){for(var f=0,_=this.length;f<_;f++)if((this[f].options.renderTo.tagName?this[f].options.renderTo:document.getElementById(this[f].options.renderTo||"")).getAttribute("id")===p)return this[f]}else if("number"==typeof p)return this[p];return null};var ca="2.1.7",st=Math.round,Ci=Math.abs,Vs=new Ge;Vs.version=ca;var Xi=function(p){function f(_){Et(this,f);var E=ge(this,(f.__proto__||Object.getPrototypeOf(f)).call(this)),S=E.constructor.name;if("BaseGauge"===S)throw new TypeError("Attempt to instantiate abstract class!");if(Vs.push(E),_.listeners&&Object.keys(_.listeners).forEach(function(I){(_.listeners[I]instanceof Array?_.listeners[I]:[_.listeners[I]]).forEach(function(k){E.on(I,k)})}),E.version=ca,E.type=ke[S]||f,E.initialized=!1,_.minValue=parseFloat(_.minValue),_.maxValue=parseFloat(_.maxValue),_.value=parseFloat(_.value)||0,_.borders||(_.borderInnerWidth=_.borderMiddleWidth=_.borderOuterWidth=0),!_.renderTo)throw TypeError("Canvas element was not specified when creating the Gauge object!");var D=_.renderTo.tagName?_.renderTo:document.getElementById(_.renderTo);if(!(D instanceof HTMLCanvasElement))throw TypeError("Given gauge canvas element is invalid!");return _.width=parseFloat(_.width)||0,_.height=parseFloat(_.height)||0,_.width&&_.height||(_.width||(_.width=D.parentNode?D.parentNode.offsetWidth:D.offsetWidth),_.height||(_.height=D.parentNode?D.parentNode.offsetHeight:D.offsetHeight)),E.options=_||{},E.options.animateOnInit&&(E._value=E.options.value,E.options.value=E.options.minValue),E.canvas=new zi(D,_.width,_.height),E.canvas.onRedraw=E.draw.bind(E),E.animation=new Oc(_.animationRule,_.animationDuration),E}return Wt(f,p),Us(f,[{key:"update",value:function(_){return Object.assign(this.options,this.type.configure(_||{})),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.animation.rule=this.options.animationRule,this.animation.duration=this.options.animationDuration,this.canvas.redraw(),this}},{key:"destroy",value:function(){var _=Vs.indexOf(this);~_&&Vs.splice(_,1),this.canvas.destroy(),this.canvas=null,this.animation.destroy(),this.animation=null,this.emit("destroy")}},{key:"draw",value:function(){return this.options.animateOnInit&&!this.initialized&&(this.value=this._value,this.initialized=!0,this.emit("init")),this.emit("render"),this}},{key:"value",set:function(_){var E=this;_=f.ensureValue(_,this.options.minValue);var S=this.options.value;if(_!==S)if(this.options.animation){if(this.animation.frame&&(this.options.value=this._value,this._value===_))return this.animation.cancel(),void delete this._value;void 0===this._value&&(this._value=_),this.emit("animationStart"),this.animation.animate(function(D){var I=S+(_-S)*D;E.options.animatedValue&&E.emit("value",I,E.value),E.options.value=I,E.draw(),E.emit("animate",D,E.options.value)},function(){void 0!==E._value&&(E.emit("value",E._value,E.value),E.options.value=E._value,delete E._value),E.draw(),E.emit("animationEnd")})}else this.emit("value",_,this.value),this.options.value=_,this.draw()},get:function(){return void 0===this._value?this.options.value:this._value}}],[{key:"configure",value:function(_){return _}},{key:"initialize",value:function(_,E){return new go(E,"canvas",_)}},{key:"fromElement",value:function(_){var E=go.toCamelCase(_.getAttribute("data-type")),S=_.attributes,D=0,I=S.length,k={};if(E){for(/Gauge$/.test(E)||(E+="Gauge");D<I;D++)k[go.toCamelCase(S[D].name.replace(/^data-/,""),!1)]=go.parse(S[D].value);new go(k,_.tagName,E).process(_)}}},{key:"ensureValue",value:function(_){var E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return _=parseFloat(_),!isNaN(_)&&isFinite(_)||(_=parseFloat(E)||0),_}},{key:"mod",value:function(_,E){return(_%E+E)%E}},{key:"version",get:function(){return ca}}]),f}(ip);void 0!==ke&&(ke.BaseGauge=Xi,ke.gauges=(window.document||{}).gauges=Vs);var Nc=/{([_a-zA-Z]+[_a-zA-Z0-9]*)}/g,ye={roundRect:Je,padValue:Tt,formatMajorTickNumber:function ht(p,f){var _=void 0,E=!1;return _=0===f.majorTicksDec?Math.round(p).toString():p.toFixed(f.majorTicksDec),f.majorTicksInt>1?(E=~_.indexOf("."),~_.indexOf("-")?"-"+[f.majorTicksInt+f.majorTicksDec+2+(E?1:0)-_.length].join("0")+_.replace("-",""):[f.majorTicksInt+f.majorTicksDec+1+(E?1:0)-_.length].join("0")+_):_},radians:function qt(p){return p*Math.PI/180},radialPoint:function Pe(p,f){return{x:-p*Math.sin(f),y:p*Math.cos(f)}},linearGradient:function Sn(p,f,_,E){var S=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],D=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,I=p.createLinearGradient(S?0:D,S?D:0,S?0:E,S?E:0);return I.addColorStop(0,f),I.addColorStop(1,_),I},drawNeedleShadow:function ut(p,f){f.needleShadow&&(p.shadowOffsetX=2,p.shadowOffsetY=2,p.shadowBlur=10,p.shadowColor=f.colorNeedleShadowDown)},drawValueBox:function dn(p,f,_,E,S,D){if(f.valueBox){mn(p);var I=f.valueDec?1+f.valueDec:0,k="9".repeat(Math.max.apply(null,[String(parseInt(_)).length+I].concat(f.majorTicks.map(function(We){return String(parseInt(We,10)).length+I})))),L=f.valueText||Tt(_,f),V=D/200,ue=D/100,he=.4*ue,$e=1.2*ue;p.font=rt(f,"Value",V),Tn(p,f,he,$e);var tt=p.measureText(f.valueText?L:"-"+Tt(Number(k),f)).width;mn(p);var Ze=parseFloat(f.fontValueSize)*V+he+$e,Gt=ue*parseFloat(f.valueBoxStroke),ct=2*D-2*Gt,wt=tt+10*ue,Dt=1.1*Ze+he+$e,Bt=ue*f.valueBoxBorderRadius,Rt=(parseFloat(f.valueBoxWidth)||0)/100*ct;Rt>wt&&(wt=Rt),wt>ct&&(wt=ct);var ft=E-wt/2,Fe=S-Dt/2,Ue=S-5.75*ue;if(p.beginPath(),Bt?Je(p,ft,Fe,wt,Dt,Bt):p.rect(ft,Fe,wt,Dt),Gt){var yt=p.createRadialGradient(E,Ue,10*ue,E,Ue,20*ue);yt.addColorStop(0,f.colorValueBoxRect),yt.addColorStop(1,f.colorValueBoxRectEnd),p.strokeStyle=yt,p.lineWidth=Gt,p.stroke()}f.colorValueBoxShadow&&(p.shadowBlur=1.2*ue,p.shadowColor=f.colorValueBoxShadow),f.colorValueBoxBackground&&(p.fillStyle=f.colorValueBoxBackground,p.fill()),p.closePath(),p.restore(),Tn(p,f,he,$e),p.fillStyle=f.colorValueText,p.textAlign="center",p.textBaseline="alphabetic",p.fillText(L,ft+wt/2,S+Dt/2-Ze/3),p.restore()}},verifyError:function Ne(p){if(!(p instanceof DOMException&&2152923147===p.result))throw p},prepareTicks:function De(p){return p.majorTicks instanceof Array||(p.majorTicks=p.majorTicks?[p.majorTicks]:[]),p.majorTicks.length||(p.majorTicks.push(ye.formatMajorTickNumber(p.minValue,p)),p.majorTicks.push(ye.formatMajorTickNumber(p.maxValue,p))),["right"!==p.tickSide,"left"!==p.tickSide]},drawShadow:function ln(p,f){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return p.restore(),!0;p.save();var _=f.borderShadowWidth;return _&&(p.shadowBlur=_,p.shadowColor=f.colorBorderShadow),!0},font:rt,normalizedValue:function xn(p){var f=p.value,_=p.minValue,E=p.maxValue,S=.01*(E-_);return{normal:f<_?_:f>E?E:f,indented:f<_?_-S:f>E?E+S:f}},formatContext:function Ae(p,f){return f.replace(Nc,function(_,E){var S=p[E];return void 0!==S?S:_})}},Hs=Math.PI,_o=Hs/2,Jn=Object.assign({},mo,{ticksAngle:270,startAngle:45,colorNeedleCircleOuter:"#f0f0f0",colorNeedleCircleOuterEnd:"#ccc",colorNeedleCircleInner:"#e8e8e8",colorNeedleCircleInnerEnd:"#f5f5f5",needleCircleSize:10,needleCircleInner:!0,needleCircleOuter:!0,needleStart:20,animationTarget:"needle",useMinPath:!1,barWidth:0,barStartPosition:"left"}),sp=function(p){function f(_){return Et(this,f),_=Object.assign({},Jn,_||{}),ge(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,f.configure(_)))}return Wt(f,p),Us(f,[{key:"draw",value:function(){try{var _=this.canvas,E=[-_.drawX,-_.drawY,_.drawWidth,_.drawHeight],S=E[0],D=E[1],I=E[2],k=E[3],L=this.options;if("needle"===L.animationTarget){if(!_.elementClone.initialized){var V=_.contextClone;V.clearRect(S,D,I,k),V.save(),this.emit("beforePlate"),Y(V,L),this.emit("beforeHighlights"),N(V,L),this.emit("beforeMinorTicks"),Ke(V,L),this.emit("beforeMajorTicks"),zt(V,L),this.emit("beforeNumbers"),P(V,L),this.emit("beforeTitle"),T(V,L),this.emit("beforeUnits"),H(V,L),_.elementClone.initialized=!0}this.canvas.commit(),_.context.clearRect(S,D,I,k),_.context.save(),_.context.drawImage(_.elementClone,S,D,I,k),_.context.save(),this.emit("beforeProgressBar"),R(_.context,L),this.emit("beforeValueBox"),O(_.context,L,X(this)),this.emit("beforeNeedle"),G(_.context,L)}else{var ue=-ye.radians((L.value-L.minValue)/(L.maxValue-L.minValue)*L.ticksAngle);if(_.context.clearRect(S,D,I,k),_.context.save(),this.emit("beforePlate"),Y(_.context,L),_.context.rotate(ue),this.emit("beforeHighlights"),N(_.context,L),this.emit("beforeMinorTicks"),Ke(_.context,L),this.emit("beforeMajorTicks"),zt(_.context,L),this.emit("beforeNumbers"),P(_.context,L),this.emit("beforeProgressBar"),R(_.context,L),_.context.rotate(-ue),_.context.save(),!_.elementClone.initialized){var he=_.contextClone;he.clearRect(S,D,I,k),he.save(),this.emit("beforeTitle"),T(he,L),this.emit("beforeUnits"),H(he,L),this.emit("beforeNeedle"),G(he,L),_.elementClone.initialized=!0}_.context.drawImage(_.elementClone,S,D,I,k)}this.emit("beforeValueBox"),O(_.context,L,X(this)),Pc(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"draw",this).call(this)}catch($e){ye.verifyError($e)}return this}},{key:"value",set:function(_){_=Xi.ensureValue(_,this.options.minValue),this.options.animation&&360===this.options.ticksAngle&&this.options.useMinPath&&(this._value=_,_=this.options.value+((_-this.options.value)%360+540)%360-180),np(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",_,this)},get:function(){return Pc(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"value",this)}}],[{key:"configure",value:function(_){return _.barWidth>50&&(_.barWidth=50),isNaN(_.startAngle)&&(_.startAngle=45),isNaN(_.ticksAngle)&&(_.ticksAngle=270),_.ticksAngle>360&&(_.ticksAngle=360),_.ticksAngle<0&&(_.ticksAngle=0),_.startAngle<0&&(_.startAngle=0),_.startAngle>360&&(_.startAngle=360),_}}]),f}(Xi);void 0!==ke&&(ke.RadialGauge=sp),Xi.initialize("RadialGauge",Jn);var Fc=Object.assign({},mo,{borderRadius:0,barBeginCircle:30,colorBarEnd:"",colorBarProgressEnd:"",needleWidth:6,tickSide:"both",needleSide:"both",numberSide:"both",ticksWidth:10,ticksWidthMinor:5,ticksPadding:5,barLength:85,fontTitleSize:26,highlightsWidth:10}),op=function(p){function f(_){return Et(this,f),_=Object.assign({},Fc,_||{}),ge(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,f.configure(_)))}return Wt(f,p),Us(f,[{key:"draw",value:function(){try{var _=this.canvas,E=[-_.drawX,-_.drawY,_.drawWidth,_.drawHeight],S=E[0],D=E[1],I=E[2],k=E[3],L=this.options;if(!_.elementClone.initialized){var V=_.contextClone;V.clearRect(S,D,I,k),V.save(),this.emit("beforePlate"),this.drawBox=function U(p,f,_,E,S,D){var I=zi.pixelRatio;p.save();var k=f.borderRadius*I,L=S-f.borderShadowWidth-f.borderOuterWidth*I,V=L-f.borderOuterWidth*I-f.borderMiddleWidth*I,ue=V-f.borderMiddleWidth*I-f.borderInnerWidth*I,he=ue-f.borderInnerWidth*I,$e=D-f.borderShadowWidth-f.borderOuterWidth*I,tt=$e-f.borderOuterWidth*I-f.borderMiddleWidth*I,Ze=tt-f.borderMiddleWidth*I-f.borderInnerWidth*I,Gt=Ze-f.borderInnerWidth*I,ct=_-(V-L)/2,wt=ct-(ue-V)/2,Dt=wt-(he-ue)/2,Bt=E-(tt-$e)/2,Rt=Bt-(Ze-tt)/2,ft=Rt-(Gt-Ze)/2,Fe=0,Ue=!1;return f.borderOuterWidth&&(Ue=ye.drawShadow(p,f,Ue),Z(p,f.borderOuterWidth*I,k,_+f.borderOuterWidth*I/2-Fe,E+f.borderOuterWidth*I/2-Fe,L,$e,f.colorBorderOuter,f.colorBorderOuterEnd),Fe+=.5*I),f.borderMiddleWidth&&(Ue=ye.drawShadow(p,f,Ue),Z(p,f.borderMiddleWidth*I,k-=1+2*Fe,ct+f.borderMiddleWidth*I/2-Fe,Bt+f.borderMiddleWidth*I/2-Fe,V+2*Fe,tt+2*Fe,f.colorBorderMiddle,f.colorBorderMiddleEnd),Fe+=.5*I),f.borderInnerWidth&&(Ue=ye.drawShadow(p,f,Ue),Z(p,f.borderInnerWidth*I,k-=1+2*Fe,wt+f.borderInnerWidth*I/2-Fe,Rt+f.borderInnerWidth*I/2-Fe,ue+2*Fe,Ze+2*Fe,f.colorBorderInner,f.colorBorderInnerEnd),Fe+=.5*I),ye.drawShadow(p,f,Ue),function z(p,f,_,E,S,D,I,k){p.beginPath(),p.fillStyle=k?ye.linearGradient(p,I,k,S>D?S:D,D>S,S>D?_:E):I,f>0?ye.roundRect(p,_,E,S,D,f):p.rect(_,E,S,D),p.fill(),p.closePath()}(p,k,Dt,ft,he+2*Fe,Gt+2*Fe,f.colorPlate,f.colorPlateEnd),p.restore(),[Dt,ft,he,Gt]}(V,L,S,D,I,k),this.emit("beforeBar"),me.apply(void 0,[V,L].concat(Se(this.drawBox))),_.context.barDimensions=V.barDimensions,this.emit("beforeHighlights"),function en(p,f){var _=p.barDimensions,E=_.isVertical,S=_.width,D=_.length,I=_.barWidth,k=_.barOffset,L=_.barMargin,V=_.X,ue=_.Y,he=_.ticksLength,$e=_.ticksPadding,tt=S*(parseFloat(f.highlightsWidth)||0)/100;if(f.highlights&&tt){var Ze="right"!==f.tickSide,Gt="left"!==f.tickSide,ct=0,wt=f.highlights.length,Dt=(S-I)/2,Bt=f.maxValue-f.minValue,Rt=st(E?V+Dt:V+L+k),ft=tt,Fe=E?ue+D-L-k:ue+Dt,Ue=st((f.ticksWidth/100+$e)*S)+(tt-f.ticksWidth/100*S),yt=st(I+$e*S);for(p.save();ct<wt;ct++){var We=f.highlights[ct],Yt=he*Ci(f.minValue-We.from)/Bt,jt=he*Ci((We.to-We.from)/Bt);p.beginPath(),p.fillStyle=We.color,E?(Ze&&p.rect(Rt-Ue,Fe-Yt,ft,-jt),Gt&&p.rect(Rt+yt,Fe-Yt,ft,-jt)):(Ze&&p.rect(Rt+Yt,Fe-Ue,jt,ft),Gt&&p.rect(Rt+Yt,Fe+yt,jt,ft)),p.fill(),p.closePath()}}}(V,L),this.emit("beforeMinorTicks"),function ks(p,f){var _=ye.prepareTicks(f),E=Rc(_,2),S=E[0],D=E[1],I=[],k=f.minValue,L=Math.abs(f.minorTicks)||0,V=L?(f.maxValue-f.minValue)/(L*(f.majorTicks.length-1)):0;if(L)if(f.exactTicks)for(var ue=Xi.mod(f.majorTicks[0],L)||0;k<f.maxValue;k+=L)ue+k<f.maxValue&&I.push(ue+k);else for(;k<f.maxValue;k+=V)I.push(k);je(p,f.colorMinorTicks||f.colorStrokeTicks,I,f.minValue,f.maxValue,S,D,1,f.ticksWidthMinor/100)}(V,L),this.emit("beforeMajorTicks"),function it(p,f){var _=ye.prepareTicks(f),E=Rc(_,2),S=E[0],D=E[1],I=2,k=(f.maxValue-f.minValue)/(f.majorTicks.length-1),L=f.colorMajorTicks instanceof Array?f.colorMajorTicks:new Array(f.majorTicks.length).fill(f.colorStrokeTicks||f.colorMajorTicks);if(je(p,L,f.exactTicks?f.majorTicks:f.majorTicks.map(function(jt,di){return f.minValue+k*di}),f.minValue,f.maxValue,S,D,I,f.ticksWidth/100),f.strokeTicks){var V=p.barDimensions,ue=V.isVertical,he=V.length,$e=V.width,tt=V.barWidth,Ze=V.barMargin,Gt=V.barOffset,ct=V.X,wt=V.Y,Dt=V.ticksLength,Bt=V.pixelRatio,Rt=V.ticksPadding,ft=($e-tt)/2+tt+Rt*$e,Fe=($e-tt)/2-Rt*$e,Ue=void 0,yt=void 0,We=void 0,Yt=void 0;p.strokeStyle=f.colorStrokeTicks||L[0],I*=Bt,ue?(Yt=(yt=wt+he-Ze-Gt+I/2)-Dt-I,S&&(We=Ue=st(ct+Fe),Wi(p,Ue,yt,We,Yt)),D&&(We=Ue=st(ct+ft),Wi(p,Ue,yt,We,Yt))):(We=(Ue=ct+Ze+Gt-I/2)+Dt+I,S&&(Yt=yt=st(wt+Fe),Wi(p,Ue,yt,We,Yt)),D&&(Yt=yt=st(wt+ft),Wi(p,Ue,yt,We,Yt)))}}(V,L),this.emit("beforeNumbers"),function Bs(p,f){var _=p.barDimensions,E=_.isVertical,S=_.length,D=_.width,I=_.barWidth,k=_.barMargin,L=_.barOffset,V=_.X,ue=_.Y,he=_.ticksLength,$e=_.ticksPadding,tt=f.maxValue-f.minValue,Ze=tt/(f.majorTicks.length-1),Gt=f.exactTicks?f.majorTicks:f.majorTicks.map(function(is,kt){return f.minValue+Ze*kt}),ct=Gt.length,wt="right"!==f.numberSide,Dt="left"!==f.numberSide,Bt=f.fontNumbersSize*D/200,Rt=0,ft=(f.ticksWidth/100+2*$e)*D,Fe=(D-I)/2-ft,Ue=(D-I)/2+I+ft,yt=void 0,We=void 0,Yt=void 0,jt=void 0,di=f.colorNumbers instanceof Array?f.colorNumbers:new Array(ct).fill(f.colorNumbers),At=f.numbersMargin/100*D;for(p.font=ye.font(f,"Numbers",D/200),p.lineWidth=0,p.textAlign="center";Rt<ct;Rt++)p.fillStyle=di[Rt],jt=f.majorTicks[Rt],Yt=f.exactTicks?he*((Gt[Rt]-f.minValue)/tt):Rt*he/(ct-1),E?(We=ue+S-k-L-Yt+Bt/3,wt&&(p.textAlign="right",p.fillText(jt,V+Fe-At,We)),Dt&&(p.textAlign="left",p.fillText(jt,V+Ue+At,We))):(p.measureText(jt),yt=V+k+L+Yt,wt&&p.fillText(jt,yt,ue+Fe-At),Dt&&p.fillText(jt,yt,ue+Ue+Bt+At))}(V,L),this.emit("beforeTitle"),function la(p,f){if(f.title){var _=p.barDimensions,E=_.isVertical,S=_.width,D=_.length,k=_.baseY,L=_.titleMargin,V=f.fontTitleSize*S/200,ue=st(_.baseX+(E?S:D)/2),he=st(k+L/2-(E?V:V/2)-.025*(E?D:S));p.save(),p.textAlign="center",p.fillStyle=f.colorTitle,p.font=ye.font(f,"Title",S/200),p.lineWidth=0,p.fillText(f.title,ue,he,E?S:D)}}(V,L),this.emit("beforeUnits"),function ts(p,f){if(f.units){var _=p.barDimensions,E=_.isVertical,S=_.width,D=_.length,k=_.baseY,L=_.unitsMargin,V=f.fontUnitsSize*S/200,ue=st(_.baseX+(E?S:D)/2),he=st(k+(E?D:S)+L/2-V/2);p.save(),p.textAlign="center",p.fillStyle=f.colorUnits,p.font=ye.font(f,"Units",S/200),p.lineWidth=0,p.fillText(ye.formatContext(f,f.units),ue,he,E?S:D)}}(V,L),_.elementClone.initialized=!0}this.canvas.commit(),_.context.clearRect(S,D,I,k),_.context.save(),_.context.drawImage(_.elementClone,S,D,I,k),_.context.save(),this.emit("beforeProgressBar"),_t.apply(void 0,[_.context,L].concat(Se(this.drawBox))),this.emit("beforeNeedle"),function Il(p,f){if(f.needle){var _=p.barDimensions,E=_.isVertical,S=_.width,D=_.length,I=_.barWidth,k=_.barOffset,L=_.barMargin,ue=_.X,he=_.Y,$e=_.ticksPadding,tt="right"!==f.needleSide,Ze="left"!==f.needleSide,Gt=_.ticksLength*(ye.normalizedValue(f).indented-f.minValue)/(f.maxValue-f.minValue),ct=(f.ticksWidth/100+$e)*S,wt=I/2+ct,Dt=wt*(f.needleEnd/100),Bt=void 0,ft=void 0,Ue="arrow"===f.needleType.toLowerCase()?lb:ab,yt=(S-I)/2,We=wt*(f.needleStart/100),Yt=yt-ct-We,jt=yt+I+ct+We;p.save(),ye.drawNeedleShadow(p,f),E?(ft=st(he+D-L-k-Gt),tt&&Ue(p,f,Bt=st(ue+Yt),ft,Bt+Dt,ft,Dt),Ze&&Ue(p,f,Bt=st(ue+jt),ft,Bt-Dt,ft,Dt,!0)):(Bt=st(ue+L+k+Gt),tt&&Ue(p,f,Bt,ft=st(he+Yt),Bt,ft+Dt,Dt),Ze&&Ue(p,f,Bt,ft=st(he+jt),Bt,ft-Dt,Dt,!0)),p.restore()}}(_.context,L),this.emit("beforeValueBox"),ns.apply(void 0,[_.context,L,L.animatedValue?this.options.value:this.value].concat(Se(this.drawBox))),Pc(f.prototype.__proto__||Object.getPrototypeOf(f.prototype),"draw",this).call(this)}catch(ue){ye.verifyError(ue)}return this}}],[{key:"configure",value:function(_){return _.barStrokeWidth>=_.barWidth&&(_.barStrokeWidth=st(_.barWidth/2)),_.hasLeft=xt("right",_),_.hasRight=xt("left",_),_.value>_.maxValue&&(_.value=_.maxValue),_.value<_.minValue&&(_.value=_.minValue),Xi.configure(_)}}]),f}(Xi);void 0!==ke&&(ke.LinearGauge=op),Xi.initialize("LinearGauge",Fc),Object.assign(ke,{Collection:Ge,GenericOptions:mo,Animation:Oc,BaseGauge:Xi,drawings:ye,SmartCanvas:zi,DomObserver:go,vendorize:nt})}($t.exports)},469:$t=>{"use strict";function ke(C,P,T){T=T||2;var R,X,z,Z,U,ce,$,H=P&&P.length,G=H?P[0]*T:C.length,O=Se(C,0,G,T,!0),F=[];if(!O||O.next===O.prev)return F;if(H&&(O=function Ne(C,P,T,H){var O,F,z,G=[];for(O=0,F=P.length;O<F;O++)(z=Se(C,P[O]*H,O<F-1?P[O+1]*H:C.length,H,!1))===z.next&&(z.steiner=!0),G.push(Sn(z));for(G.sort(Ae),O=0;O<G.length;O++)T=De(G[O],T);return T}(C,P,O,T)),C.length>80*T){R=z=C[0],X=Z=C[1];for(var me=T;me<G;me+=T)(U=C[me])<R&&(R=U),(ce=C[me+1])<X&&(X=ce),U>z&&(z=U),ce>Z&&(Z=ce);$=0!==($=Math.max(z-R,Z-X))?32767/$:0}return Wt(O,F,T,R,X,$,0),F}function Se(C,P,T,H,G){var O,F;if(G===Lt(C,P,T,H)>0)for(O=P;O<T;O+=H)F=Ke(O,C[O],C[O+1],F);else for(O=T-H;O>=P;O-=H)F=Ke(O,C[O],C[O+1],F);return F&&mn(F,F.next)&&(dt(F),F=F.next),F}function ge(C,P){if(!C)return C;P||(P=C);var H,T=C;do{if(H=!1,T.steiner||!mn(T,T.next)&&0!==rt(T.prev,T,T.next))T=T.next;else{if(dt(T),(T=P=T.prev)===T.next)break;H=!0}}while(H||T!==P);return P}function Wt(C,P,T,H,G,O,F){if(C){!F&&O&&function ht(C,P,T,H){var G=C;do{0===G.z&&(G.z=Pe(G.x,G.y,P,T,H)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next}while(G!==C);G.prevZ.nextZ=null,G.prevZ=null,function qt(C){var P,T,H,G,O,F,R,X,z=1;do{for(T=C,C=null,O=null,F=0;T;){for(F++,H=T,R=0,P=0;P<z&&(R++,H=H.nextZ);P++);for(X=z;R>0||X>0&&H;)0!==R&&(0===X||!H||T.z<=H.z)?(G=T,T=T.nextZ,R--):(G=H,H=H.nextZ,X--),O?O.nextZ=G:C=G,G.prevZ=O,O=G;T=H}O.nextZ=null,z*=2}while(F>1)}(G)}(C,H,G,O);for(var X,z,R=C;C.prev!==C.next;)if(X=C.prev,z=C.next,O?nt(C,H,G,O):Et(C))P.push(X.i/T|0),P.push(C.i/T|0),P.push(z.i/T|0),dt(C),C=z.next,R=z.next;else if((C=z)===R){F?1===F?Wt(C=Me(ge(C),P,T),P,T,H,G,O,2):2===F&&Ge(C,P,T,H,G,O):Wt(ge(C),P,T,H,G,O,1);break}}}function Et(C){var P=C.prev,T=C,H=C.next;if(rt(P,T,H)>=0)return!1;for(var G=P.x,O=T.x,F=H.x,R=P.y,X=T.y,z=H.y,Z=G<O?G<F?G:F:O<F?O:F,U=R<X?R<z?R:z:X<z?X:z,ce=G>O?G>F?G:F:O>F?O:F,$=R>X?R>z?R:z:X>z?X:z,me=H.next;me!==P;){if(me.x>=Z&&me.x<=ce&&me.y>=U&&me.y<=$&&ln(G,R,O,X,F,z,me.x,me.y)&&rt(me.prev,me,me.next)>=0)return!1;me=me.next}return!0}function nt(C,P,T,H){var G=C.prev,O=C,F=C.next;if(rt(G,O,F)>=0)return!1;for(var R=G.x,X=O.x,z=F.x,Z=G.y,U=O.y,ce=F.y,$=R<X?R<z?R:z:X<z?X:z,me=Z<U?Z<ce?Z:ce:U<ce?U:ce,xt=R>X?R>z?R:z:X>z?X:z,_t=Z>U?Z>ce?Z:ce:U>ce?U:ce,en=Pe($,me,P,T,H),Ht=Pe(xt,_t,P,T,H),je=C.prevZ,it=C.nextZ;je&&je.z>=en&&it&&it.z<=Ht;){if(je.x>=$&&je.x<=xt&&je.y>=me&&je.y<=_t&&je!==G&&je!==F&&ln(R,Z,X,U,z,ce,je.x,je.y)&&rt(je.prev,je,je.next)>=0||(je=je.prevZ,it.x>=$&&it.x<=xt&&it.y>=me&&it.y<=_t&&it!==G&&it!==F&&ln(R,Z,X,U,z,ce,it.x,it.y)&&rt(it.prev,it,it.next)>=0))return!1;it=it.nextZ}for(;je&&je.z>=en;){if(je.x>=$&&je.x<=xt&&je.y>=me&&je.y<=_t&&je!==G&&je!==F&&ln(R,Z,X,U,z,ce,je.x,je.y)&&rt(je.prev,je,je.next)>=0)return!1;je=je.prevZ}for(;it&&it.z<=Ht;){if(it.x>=$&&it.x<=xt&&it.y>=me&&it.y<=_t&&it!==G&&it!==F&&ln(R,Z,X,U,z,ce,it.x,it.y)&&rt(it.prev,it,it.next)>=0)return!1;it=it.nextZ}return!0}function Me(C,P,T){var H=C;do{var G=H.prev,O=H.next.next;!mn(G,O)&&Tn(G,H,H.next,O)&&x(G,O)&&x(O,G)&&(P.push(G.i/T|0),P.push(H.i/T|0),P.push(O.i/T|0),dt(H),dt(H.next),H=C=O),H=H.next}while(H!==C);return ge(H)}function Ge(C,P,T,H,G,O){var F=C;do{for(var R=F.next.next;R!==F.prev;){if(F.i!==R.i&&ut(F,R)){var X=N(F,R);return F=ge(F,F.next),X=ge(X,X.next),Wt(F,P,T,H,G,O,0),void Wt(X,P,T,H,G,O,0)}R=R.next}F=F.next}while(F!==C)}function Ae(C,P){return C.x-P.x}function De(C,P){var T=function Je(C,P){var F,T=P,H=C.x,G=C.y,O=-1/0;do{if(G<=T.y&&G>=T.next.y&&T.next.y!==T.y){var R=T.x+(G-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(R<=H&&R>O&&(O=R,F=T.x<T.next.x?T:T.next,R===H))return F}T=T.next}while(T!==P);if(!F)return null;var ce,X=F,z=F.x,Z=F.y,U=1/0;T=F;do{H>=T.x&&T.x>=z&&H!==T.x&&ln(G<Z?H:O,G,z,Z,G<Z?O:H,G,T.x,T.y)&&(ce=Math.abs(G-T.y)/(H-T.x),x(T,C)&&(ce<U||ce===U&&(T.x>F.x||T.x===F.x&&Tt(F,T)))&&(F=T,U=ce)),T=T.next}while(T!==X);return F}(C,P);if(!T)return P;var H=N(T,C);return ge(H,H.next),ge(T,T.next)}function Tt(C,P){return rt(C.prev,C,P.prev)<0&&rt(P.next,C,C.next)<0}function Pe(C,P,T,H,G){return(C=1431655765&((C=858993459&((C=252645135&((C=16711935&((C=(C-T)*G|0)|C<<8))|C<<4))|C<<2))|C<<1))|(P=1431655765&((P=858993459&((P=252645135&((P=16711935&((P=(P-H)*G|0)|P<<8))|P<<4))|P<<2))|P<<1))<<1}function Sn(C){var P=C,T=C;do{(P.x<T.x||P.x===T.x&&P.y<T.y)&&(T=P),P=P.next}while(P!==C);return T}function ln(C,P,T,H,G,O,F,R){return(G-F)*(P-R)>=(C-F)*(O-R)&&(C-F)*(H-R)>=(T-F)*(P-R)&&(T-F)*(O-R)>=(G-F)*(H-R)}function ut(C,P){return C.next.i!==P.i&&C.prev.i!==P.i&&!function rn(C,P){var T=C;do{if(T.i!==C.i&&T.next.i!==C.i&&T.i!==P.i&&T.next.i!==P.i&&Tn(T,T.next,C,P))return!0;T=T.next}while(T!==C);return!1}(C,P)&&(x(C,P)&&x(P,C)&&function Y(C,P){var T=C,H=!1,G=(C.x+P.x)/2,O=(C.y+P.y)/2;do{T.y>O!=T.next.y>O&&T.next.y!==T.y&&G<(T.next.x-T.x)*(O-T.y)/(T.next.y-T.y)+T.x&&(H=!H),T=T.next}while(T!==C);return H}(C,P)&&(rt(C.prev,C,P.prev)||rt(C,P.prev,P))||mn(C,P)&&rt(C.prev,C,C.next)>0&&rt(P.prev,P,P.next)>0)}function rt(C,P,T){return(P.y-C.y)*(T.x-P.x)-(P.x-C.x)*(T.y-P.y)}function mn(C,P){return C.x===P.x&&C.y===P.y}function Tn(C,P,T,H){var G=xn(rt(C,P,T)),O=xn(rt(C,P,H)),F=xn(rt(T,H,C)),R=xn(rt(T,H,P));return!!(G!==O&&F!==R||0===G&&dn(C,T,P)||0===O&&dn(C,H,P)||0===F&&dn(T,C,H)||0===R&&dn(T,P,H))}function dn(C,P,T){return P.x<=Math.max(C.x,T.x)&&P.x>=Math.min(C.x,T.x)&&P.y<=Math.max(C.y,T.y)&&P.y>=Math.min(C.y,T.y)}function xn(C){return C>0?1:C<0?-1:0}function x(C,P){return rt(C.prev,C,C.next)<0?rt(C,P,C.next)>=0&&rt(C,C.prev,P)>=0:rt(C,P,C.prev)<0||rt(C,C.next,P)<0}function N(C,P){var T=new zt(C.i,C.x,C.y),H=new zt(P.i,P.x,P.y),G=C.next,O=P.prev;return C.next=P,P.prev=C,T.next=G,G.prev=T,H.next=T,T.prev=H,O.next=H,H.prev=O,H}function Ke(C,P,T,H){var G=new zt(C,P,T);return H?(G.next=H.next,G.prev=H,H.next.prev=G,H.next=G):(G.prev=G,G.next=G),G}function dt(C){C.next.prev=C.prev,C.prev.next=C.next,C.prevZ&&(C.prevZ.nextZ=C.nextZ),C.nextZ&&(C.nextZ.prevZ=C.prevZ)}function zt(C,P,T){this.i=C,this.x=P,this.y=T,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Lt(C,P,T,H){for(var G=0,O=P,F=T-H;O<T;O+=H)G+=(C[F]-C[O])*(C[O+1]+C[F+1]),F=O;return G}$t.exports=ke,$t.exports.default=ke,ke.deviation=function(C,P,T,H){var G=P&&P.length,F=Math.abs(Lt(C,0,G?P[0]*T:C.length,T));if(G)for(var R=0,X=P.length;R<X;R++)F-=Math.abs(Lt(C,P[R]*T,R<X-1?P[R+1]*T:C.length,T));var U=0;for(R=0;R<H.length;R+=3){var ce=H[R]*T,$=H[R+1]*T,me=H[R+2]*T;U+=Math.abs((C[ce]-C[me])*(C[$+1]-C[ce+1])-(C[ce]-C[$])*(C[me+1]-C[ce+1]))}return 0===F&&0===U?0:Math.abs((U-F)/F)},ke.flatten=function(C){for(var P=C[0][0].length,T={vertices:[],holes:[],dimensions:P},H=0,G=0;G<C.length;G++){for(var O=0;O<C[G].length;O++)for(var F=0;F<P;F++)T.vertices.push(C[G][O][F]);G>0&&T.holes.push(H+=C[G-1].length)}return T}},5:$t=>{"use strict";var ke=Object.prototype.hasOwnProperty,Se="~";function ge(){}function Wt(Ge,Ne,Ae){this.fn=Ge,this.context=Ne,this.once=Ae||!1}function Et(Ge,Ne,Ae,De,Je){if("function"!=typeof Ae)throw new TypeError("The listener must be a function");var Tt=new Wt(Ae,De||Ge,Je),ht=Se?Se+Ne:Ne;return Ge._events[ht]?Ge._events[ht].fn?Ge._events[ht]=[Ge._events[ht],Tt]:Ge._events[ht].push(Tt):(Ge._events[ht]=Tt,Ge._eventsCount++),Ge}function nt(Ge,Ne){0==--Ge._eventsCount?Ge._events=new ge:delete Ge._events[Ne]}function Me(){this._events=new ge,this._eventsCount=0}Object.create&&(ge.prototype=Object.create(null),(new ge).__proto__||(Se=!1)),Me.prototype.eventNames=function(){var Ae,De,Ne=[];if(0===this._eventsCount)return Ne;for(De in Ae=this._events)ke.call(Ae,De)&&Ne.push(Se?De.slice(1):De);return Object.getOwnPropertySymbols?Ne.concat(Object.getOwnPropertySymbols(Ae)):Ne},Me.prototype.listeners=function(Ne){var De=this._events[Se?Se+Ne:Ne];if(!De)return[];if(De.fn)return[De.fn];for(var Je=0,Tt=De.length,ht=new Array(Tt);Je<Tt;Je++)ht[Je]=De[Je].fn;return ht},Me.prototype.listenerCount=function(Ne){var De=this._events[Se?Se+Ne:Ne];return De?De.fn?1:De.length:0},Me.prototype.emit=function(Ne,Ae,De,Je,Tt,ht){var qt=Se?Se+Ne:Ne;if(!this._events[qt])return!1;var ln,ut,Pe=this._events[qt],Sn=arguments.length;if(Pe.fn){switch(Pe.once&&this.removeListener(Ne,Pe.fn,void 0,!0),Sn){case 1:return Pe.fn.call(Pe.context),!0;case 2:return Pe.fn.call(Pe.context,Ae),!0;case 3:return Pe.fn.call(Pe.context,Ae,De),!0;case 4:return Pe.fn.call(Pe.context,Ae,De,Je),!0;case 5:return Pe.fn.call(Pe.context,Ae,De,Je,Tt),!0;case 6:return Pe.fn.call(Pe.context,Ae,De,Je,Tt,ht),!0}for(ut=1,ln=new Array(Sn-1);ut<Sn;ut++)ln[ut-1]=arguments[ut];Pe.fn.apply(Pe.context,ln)}else{var mn,rt=Pe.length;for(ut=0;ut<rt;ut++)switch(Pe[ut].once&&this.removeListener(Ne,Pe[ut].fn,void 0,!0),Sn){case 1:Pe[ut].fn.call(Pe[ut].context);break;case 2:Pe[ut].fn.call(Pe[ut].context,Ae);break;case 3:Pe[ut].fn.call(Pe[ut].context,Ae,De);break;case 4:Pe[ut].fn.call(Pe[ut].context,Ae,De,Je);break;default:if(!ln)for(mn=1,ln=new Array(Sn-1);mn<Sn;mn++)ln[mn-1]=arguments[mn];Pe[ut].fn.apply(Pe[ut].context,ln)}}return!0},Me.prototype.on=function(Ne,Ae,De){return Et(this,Ne,Ae,De,!1)},Me.prototype.once=function(Ne,Ae,De){return Et(this,Ne,Ae,De,!0)},Me.prototype.removeListener=function(Ne,Ae,De,Je){var Tt=Se?Se+Ne:Ne;if(!this._events[Tt])return this;if(!Ae)return nt(this,Tt),this;var ht=this._events[Tt];if(ht.fn)ht.fn===Ae&&(!Je||ht.once)&&(!De||ht.context===De)&&nt(this,Tt);else{for(var qt=0,Pe=[],Sn=ht.length;qt<Sn;qt++)(ht[qt].fn!==Ae||Je&&!ht[qt].once||De&&ht[qt].context!==De)&&Pe.push(ht[qt]);Pe.length?this._events[Tt]=1===Pe.length?Pe[0]:Pe:nt(this,Tt)}return this},Me.prototype.removeAllListeners=function(Ne){var Ae;return Ne?this._events[Ae=Se?Se+Ne:Ne]&&nt(this,Ae):(this._events=new ge,this._eventsCount=0),this},Me.prototype.off=Me.prototype.removeListener,Me.prototype.addListener=Me.prototype.on,Me.prefixed=Se,Me.EventEmitter=Me,$t.exports=Me},521:($t,ke,Se)=>{var ge;!function(Wt,Et,nt){if(Wt){for(var De,Me={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ge={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ne={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},Ae={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Je=1;Je<20;++Je)Me[111+Je]="f"+Je;for(Je=0;Je<=9;++Je)Me[Je+96]=Je.toString();rn.prototype.bind=function(x,Y,N){return this._bindMultiple.call(this,x=x instanceof Array?x:[x],Y,N),this},rn.prototype.unbind=function(x,Y){return this.bind.call(this,x,function(){},Y)},rn.prototype.trigger=function(x,Y){var N=this;return N._directMap[x+":"+Y]&&N._directMap[x+":"+Y]({},x),N},rn.prototype.reset=function(){var x=this;return x._callbacks={},x._directMap={},x},rn.prototype.stopCallback=function(x,Y){if((" "+Y.className+" ").indexOf(" mousetrap ")>-1||xn(Y,this.target))return!1;if("composedPath"in x&&"function"==typeof x.composedPath){var Ke=x.composedPath()[0];Ke!==x.target&&(Y=Ke)}return"INPUT"==Y.tagName||"SELECT"==Y.tagName||"TEXTAREA"==Y.tagName||Y.isContentEditable},rn.prototype.handleKey=function(){var x=this;return x._handleKey.apply(x,arguments)},rn.addKeycodes=function(x){for(var Y in x)x.hasOwnProperty(Y)&&(Me[Y]=x[Y]);De=null},rn.init=function(){var x=rn(Et);for(var Y in x)"_"!==Y.charAt(0)&&(rn[Y]=function(N){return function(){return x[N].apply(x,arguments)}}(Y))},rn.init(),Wt.Mousetrap=rn,$t.exports&&($t.exports=rn),void 0!==(ge=function(){return rn}.call(ke,Se,ke,$t))&&($t.exports=ge)}function Tt(x,Y,N){x.addEventListener?x.addEventListener(Y,N,!1):x.attachEvent("on"+Y,N)}function ht(x){if("keypress"==x.type){var Y=String.fromCharCode(x.which);return x.shiftKey||(Y=Y.toLowerCase()),Y}return Me[x.which]?Me[x.which]:Ge[x.which]?Ge[x.which]:String.fromCharCode(x.which).toLowerCase()}function qt(x,Y){return x.sort().join(",")===Y.sort().join(",")}function ut(x){return"shift"==x||"ctrl"==x||"alt"==x||"meta"==x}function mn(x,Y,N){return N||(N=function rt(){if(!De)for(var x in De={},Me)x>95&&x<112||Me.hasOwnProperty(x)&&(De[Me[x]]=x);return De}()[x]?"keydown":"keypress"),"keypress"==N&&Y.length&&(N="keydown"),N}function dn(x,Y){var N,Ke,dt,zt=[];for(N=function Tn(x){return"+"===x?["+"]:(x=x.replace(/\+{2}/g,"+plus")).split("+")}(x),dt=0;dt<N.length;++dt)Ae[Ke=N[dt]]&&(Ke=Ae[Ke]),Y&&"keypress"!=Y&&Ne[Ke]&&(Ke=Ne[Ke],zt.push("shift")),ut(Ke)&&zt.push(Ke);return{key:Ke,modifiers:zt,action:Y=mn(Ke,zt,Y)}}function xn(x,Y){return null!==x&&x!==Et&&(x===Y||xn(x.parentNode,Y))}function rn(x){var Y=this;if(x=x||Et,!(Y instanceof rn))return new rn(x);Y.target=x,Y._callbacks={},Y._directMap={};var Ke,N={},dt=!1,zt=!1,Lt=!1;function C(R){R=R||{};var z,X=!1;for(z in N)R[z]?X=!0:N[z]=0;X||(Lt=!1)}function P(R,X,z,Z,U,ce){var $,me,xt=[],_t=z.type;if(!Y._callbacks[R])return[];for("keyup"==_t&&ut(R)&&(X=[R]),$=0;$<Y._callbacks[R].length;++$)me=Y._callbacks[R][$],!Z&&me.seq&&N[me.seq]!=me.level||_t!=me.action||("keypress"!=_t||z.metaKey||z.ctrlKey)&&!qt(X,me.modifiers)||((!Z&&me.combo==U||Z&&me.seq==Z&&me.level==ce)&&Y._callbacks[R].splice($,1),xt.push(me));return xt}function T(R,X,z,Z){Y.stopCallback(X,X.target||X.srcElement,z,Z)||!1===R(X,z)&&(function Sn(x){x.preventDefault?x.preventDefault():x.returnValue=!1}(X),function ln(x){x.stopPropagation?x.stopPropagation():x.cancelBubble=!0}(X))}function H(R){"number"!=typeof R.which&&(R.which=R.keyCode);var X=ht(R);if(X){if("keyup"==R.type&&dt===X)return void(dt=!1);Y.handleKey(X,function Pe(x){var Y=[];return x.shiftKey&&Y.push("shift"),x.altKey&&Y.push("alt"),x.ctrlKey&&Y.push("ctrl"),x.metaKey&&Y.push("meta"),Y}(R),R)}}function F(R,X,z,Z,U){Y._directMap[R+":"+z]=X;var $,ce=(R=R.replace(/\s+/g," ")).split(" ");ce.length>1?function O(R,X,z,Z){function U(_t){return function(){Lt=_t,++N[R],function G(){clearTimeout(Ke),Ke=setTimeout(C,1e3)}()}}function ce(_t){T(z,_t,R),"keyup"!==Z&&(dt=ht(_t)),setTimeout(C,10)}N[R]=0;for(var $=0;$<X.length;++$){var xt=$+1===X.length?ce:U(Z||dn(X[$+1]).action);F(X[$],xt,Z,R,$)}}(R,ce,X,z):($=dn(R,z),Y._callbacks[$.key]=Y._callbacks[$.key]||[],P($.key,$.modifiers,{type:$.action},Z,R,U),Y._callbacks[$.key][Z?"unshift":"push"]({callback:X,modifiers:$.modifiers,action:$.action,seq:Z,level:U,combo:R}))}Y._handleKey=function(R,X,z){var U,Z=P(R,X,z),ce={},$=0,me=!1;for(U=0;U<Z.length;++U)Z[U].seq&&($=Math.max($,Z[U].level));for(U=0;U<Z.length;++U)if(Z[U].seq){if(Z[U].level!=$)continue;me=!0,ce[Z[U].seq]=1,T(Z[U].callback,z,Z[U].combo,Z[U].seq)}else me||T(Z[U].callback,z,Z[U].combo);var xt="keypress"==z.type&&zt;z.type==Lt&&!ut(R)&&!xt&&C(ce),zt=me&&"keydown"==z.type},Y._bindMultiple=function(R,X,z){for(var Z=0;Z<R.length;++Z)F(R[Z],X,z)},Tt(x,"keypress",H),Tt(x,"keydown",H),Tt(x,"keyup",H)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},516:$t=>{"use strict";function ke(Se,ge){return Object.prototype.hasOwnProperty.call(Se,ge)}$t.exports=function(Se,ge,Wt,Et){Wt=Wt||"=";var nt={};if("string"!=typeof Se||0===Se.length)return nt;var Me=/\+/g;Se=Se.split(ge=ge||"&");var Ge=1e3;Et&&"number"==typeof Et.maxKeys&&(Ge=Et.maxKeys);var Ne=Se.length;Ge>0&&Ne>Ge&&(Ne=Ge);for(var Ae=0;Ae<Ne;++Ae){var Tt,ht,qt,Pe,De=Se[Ae].replace(Me,"%20"),Je=De.indexOf(Wt);Je>=0?(Tt=De.substr(0,Je),ht=De.substr(Je+1)):(Tt=De,ht=""),qt=decodeURIComponent(Tt),Pe=decodeURIComponent(ht),ke(nt,qt)?Array.isArray(nt[qt])?nt[qt].push(Pe):nt[qt]=[nt[qt],Pe]:nt[qt]=Pe}return nt}},776:$t=>{"use strict";var ke=function(Se){switch(typeof Se){case"string":return Se;case"boolean":return Se?"true":"false";case"number":return isFinite(Se)?Se:"";default:return""}};$t.exports=function(Se,ge,Wt,Et){return ge=ge||"&",Wt=Wt||"=",null===Se&&(Se=void 0),"object"==typeof Se?Object.keys(Se).map(function(nt){var Me=encodeURIComponent(ke(nt))+Wt;return Array.isArray(Se[nt])?Se[nt].map(function(Ge){return Me+encodeURIComponent(ke(Ge))}).join(ge):Me+encodeURIComponent(ke(Se[nt]))}).join(ge):Et?encodeURIComponent(ke(Et))+Wt+encodeURIComponent(ke(Se)):""}},137:($t,ke,Se)=>{"use strict";ke.decode=ke.parse=Se(516),ke.encode=ke.stringify=Se(776)},308:function($t,ke,Se){var ge;$t=Se.nmd($t),function(Wt){"object"==typeof global&&global;var Ge,Ne=2147483647,ln=/^xn--/,ut=/[^\x20-\x7E]/,rt=/[\x2E\u3002\uFF0E\uFF61]/g,mn={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},dn=Math.floor,xn=String.fromCharCode;function x(O){throw RangeError(mn[O])}function Y(O,F){for(var R=O.length,X=[];R--;)X[R]=F(O[R]);return X}function N(O,F){var R=O.split("@"),X="";return R.length>1&&(X=R[0]+"@",O=R[1]),X+Y((O=O.replace(rt,".")).split("."),F).join(".")}function Ke(O){for(var z,Z,F=[],R=0,X=O.length;R<X;)(z=O.charCodeAt(R++))>=55296&&z<=56319&&R<X?56320==(64512&(Z=O.charCodeAt(R++)))?F.push(((1023&z)<<10)+(1023&Z)+65536):(F.push(z),R--):F.push(z);return F}function dt(O){return Y(O,function(F){var R="";return F>65535&&(R+=xn((F-=65536)>>>10&1023|55296),F=56320|1023&F),R+xn(F)}).join("")}function zt(O){return O-48<10?O-22:O-65<26?O-65:O-97<26?O-97:36}function Lt(O,F){return O+22+75*(O<26)-((0!=F)<<5)}function C(O,F,R){var X=0;for(O=R?dn(O/700):O>>1,O+=dn(O/F);O>455;X+=36)O=dn(O/35);return dn(X+36*O/(O+38))}function P(O){var X,ce,$,me,xt,_t,en,Ht,je,it,F=[],R=O.length,z=0,Z=128,U=72;for((ce=O.lastIndexOf("-"))<0&&(ce=0),$=0;$<ce;++$)O.charCodeAt($)>=128&&x("not-basic"),F.push(O.charCodeAt($));for(me=ce>0?ce+1:0;me<R;){for(xt=z,_t=1,en=36;me>=R&&x("invalid-input"),((Ht=zt(O.charCodeAt(me++)))>=36||Ht>dn((Ne-z)/_t))&&x("overflow"),z+=Ht*_t,!(Ht<(je=en<=U?1:en>=U+26?26:en-U));en+=36)_t>dn(Ne/(it=36-je))&&x("overflow"),_t*=it;U=C(z-xt,X=F.length+1,0==xt),dn(z/X)>Ne-Z&&x("overflow"),Z+=dn(z/X),z%=X,F.splice(z++,0,Z)}return dt(F)}function T(O){var F,R,X,z,Z,U,ce,$,me,xt,_t,Ht,je,it,Wi,en=[];for(Ht=(O=Ke(O)).length,F=128,R=0,Z=72,U=0;U<Ht;++U)(_t=O[U])<128&&en.push(xn(_t));for(X=z=en.length,z&&en.push("-");X<Ht;){for(ce=Ne,U=0;U<Ht;++U)(_t=O[U])>=F&&_t<ce&&(ce=_t);for(ce-F>dn((Ne-R)/(je=X+1))&&x("overflow"),R+=(ce-F)*je,F=ce,U=0;U<Ht;++U)if((_t=O[U])<F&&++R>Ne&&x("overflow"),_t==F){for($=R,me=36;!($<(xt=me<=Z?1:me>=Z+26?26:me-Z));me+=36)en.push(xn(Lt(xt+(Wi=$-xt)%(it=36-xt),0))),$=dn(Wi/it);en.push(xn(Lt($,0))),Z=C(R,je,X==z),R=0,++X}++R,++F}return en.join("")}Ge={version:"1.3.2",ucs2:{decode:Ke,encode:dt},decode:P,encode:T,toASCII:function G(O){return N(O,function(F){return ut.test(F)?"xn--"+T(F):F})},toUnicode:function H(O){return N(O,function(F){return ln.test(F)?P(F.slice(4).toLowerCase()):F})}},void 0!==(ge=function(){return Ge}.call(ke,Se,ke,$t))&&($t.exports=ge)}()},762:($t,ke,Se)=>{"use strict";var Wt=Se(308),Et=Se(796);function nt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}ke.Qc=Tn,ke.DB=function xn(x,Y){return Tn(x,!1,!0).resolve(Y)},ke.WU=function dn(x){return Et.isString(x)&&(x=Tn(x)),x instanceof nt?x.format():nt.prototype.format.call(x)};var Me=/^([a-z0-9.+-]+:)/i,Ge=/:[0-9]*$/,Ne=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,De=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),Je=["'"].concat(De),Tt=["%","/","?",";","#"].concat(Je),ht=["/","?","#"],Pe=/^[+a-z0-9A-Z_-]{0,63}$/,Sn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,ln={javascript:!0,"javascript:":!0},ut={javascript:!0,"javascript:":!0},rt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},mn=Se(137);function Tn(x,Y,N){if(x&&Et.isObject(x)&&x instanceof nt)return x;var Ke=new nt;return Ke.parse(x,Y,N),Ke}nt.prototype.parse=function(x,Y,N){if(!Et.isString(x))throw new TypeError("Parameter 'url' must be a string, not "+typeof x);var Ke=x.indexOf("?"),dt=-1!==Ke&&Ke<x.indexOf("#")?"?":"#",zt=x.split(dt);zt[0]=zt[0].replace(/\\/g,"/");var C=x=zt.join(dt);if(C=C.trim(),!N&&1===x.split("#").length){var P=Ne.exec(C);if(P)return this.path=C,this.href=C,this.pathname=P[1],P[2]?(this.search=P[2],this.query=Y?mn.parse(this.search.substr(1)):this.search.substr(1)):Y&&(this.search="",this.query={}),this}var T=Me.exec(C);if(T){var H=(T=T[0]).toLowerCase();this.protocol=H,C=C.substr(T.length)}if(N||T||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var G="//"===C.substr(0,2);G&&(!T||!ut[T])&&(C=C.substr(2),this.slashes=!0)}if(!ut[T]&&(G||T&&!rt[T])){for(var O=-1,F=0;F<ht.length;F++)-1!==(R=C.indexOf(ht[F]))&&(-1===O||R<O)&&(O=R);var X,z;for(-1!==(z=-1===O?C.lastIndexOf("@"):C.lastIndexOf("@",O))&&(X=C.slice(0,z),C=C.slice(z+1),this.auth=decodeURIComponent(X)),O=-1,F=0;F<Tt.length;F++){var R;-1!==(R=C.indexOf(Tt[F]))&&(-1===O||R<O)&&(O=R)}-1===O&&(O=C.length),this.host=C.slice(0,O),C=C.slice(O),this.parseHost(),this.hostname=this.hostname||"";var Z="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Z)for(var U=this.hostname.split(/\./),ce=(F=0,U.length);F<ce;F++){var $=U[F];if($&&!$.match(Pe)){for(var me="",xt=0,_t=$.length;xt<_t;xt++)$.charCodeAt(xt)>127?me+="x":me+=$[xt];if(!me.match(Pe)){var en=U.slice(0,F),Ht=U.slice(F+1),je=$.match(Sn);je&&(en.push(je[1]),Ht.unshift(je[2])),Ht.length&&(C="/"+Ht.join(".")+C),this.hostname=en.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),Z||(this.hostname=Wt.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,Z&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==C[0]&&(C="/"+C))}if(!ln[H])for(F=0,ce=Je.length;F<ce;F++){var ks=Je[F];if(-1!==C.indexOf(ks)){var Bs=encodeURIComponent(ks);Bs===ks&&(Bs=escape(ks)),C=C.split(ks).join(Bs)}}var la=C.indexOf("#");-1!==la&&(this.hash=C.substr(la),C=C.slice(0,la));var ts=C.indexOf("?");return-1!==ts?(this.search=C.substr(ts),this.query=C.substr(ts+1),Y&&(this.query=mn.parse(this.query)),C=C.slice(0,ts)):Y&&(this.search="",this.query={}),C&&(this.pathname=C),rt[H]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},nt.prototype.format=function(){var x=this.auth||"";x&&(x=(x=encodeURIComponent(x)).replace(/%3A/i,":"),x+="@");var Y=this.protocol||"",N=this.pathname||"",Ke=this.hash||"",dt=!1,zt="";this.host?dt=x+this.host:this.hostname&&(dt=x+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(dt+=":"+this.port)),this.query&&Et.isObject(this.query)&&Object.keys(this.query).length&&(zt=mn.stringify(this.query));var Lt=this.search||zt&&"?"+zt||"";return Y&&":"!==Y.substr(-1)&&(Y+=":"),this.slashes||(!Y||rt[Y])&&!1!==dt?(dt="//"+(dt||""),N&&"/"!==N.charAt(0)&&(N="/"+N)):dt||(dt=""),Ke&&"#"!==Ke.charAt(0)&&(Ke="#"+Ke),Lt&&"?"!==Lt.charAt(0)&&(Lt="?"+Lt),Y+dt+(N=N.replace(/[?#]/g,function(C){return encodeURIComponent(C)}))+(Lt=Lt.replace("#","%23"))+Ke},nt.prototype.resolve=function(x){return this.resolveObject(Tn(x,!1,!0)).format()},nt.prototype.resolveObject=function(x){if(Et.isString(x)){var Y=new nt;Y.parse(x,!1,!0),x=Y}for(var N=new nt,Ke=Object.keys(this),dt=0;dt<Ke.length;dt++){var zt=Ke[dt];N[zt]=this[zt]}if(N.hash=x.hash,""===x.href)return N.href=N.format(),N;if(x.slashes&&!x.protocol){for(var Lt=Object.keys(x),C=0;C<Lt.length;C++){var P=Lt[C];"protocol"!==P&&(N[P]=x[P])}return rt[N.protocol]&&N.hostname&&!N.pathname&&(N.path=N.pathname="/"),N.href=N.format(),N}if(x.protocol&&x.protocol!==N.protocol){if(!rt[x.protocol]){for(var T=Object.keys(x),H=0;H<T.length;H++){var G=T[H];N[G]=x[G]}return N.href=N.format(),N}if(N.protocol=x.protocol,x.host||ut[x.protocol])N.pathname=x.pathname;else{for(var ce=(x.pathname||"").split("/");ce.length&&!(x.host=ce.shift()););x.host||(x.host=""),x.hostname||(x.hostname=""),""!==ce[0]&&ce.unshift(""),ce.length<2&&ce.unshift(""),N.pathname=ce.join("/")}return N.search=x.search,N.query=x.query,N.host=x.host||"",N.auth=x.auth,N.hostname=x.hostname||x.host,N.port=x.port,(N.pathname||N.search)&&(N.path=(N.pathname||"")+(N.search||"")),N.slashes=N.slashes||x.slashes,N.href=N.format(),N}var R=N.pathname&&"/"===N.pathname.charAt(0),X=x.host||x.pathname&&"/"===x.pathname.charAt(0),z=X||R||N.host&&x.pathname,Z=z,U=N.pathname&&N.pathname.split("/")||[],$=(ce=x.pathname&&x.pathname.split("/")||[],N.protocol&&!rt[N.protocol]);if($&&(N.hostname="",N.port=null,N.host&&(""===U[0]?U[0]=N.host:U.unshift(N.host)),N.host="",x.protocol&&(x.hostname=null,x.port=null,x.host&&(""===ce[0]?ce[0]=x.host:ce.unshift(x.host)),x.host=null),z=z&&(""===ce[0]||""===U[0])),X)N.host=x.host||""===x.host?x.host:N.host,N.hostname=x.hostname||""===x.hostname?x.hostname:N.hostname,N.search=x.search,N.query=x.query,U=ce;else if(ce.length)U||(U=[]),U.pop(),U=U.concat(ce),N.search=x.search,N.query=x.query;else if(!Et.isNullOrUndefined(x.search))return $&&(N.hostname=N.host=U.shift(),(me=!!(N.host&&N.host.indexOf("@")>0)&&N.host.split("@"))&&(N.auth=me.shift(),N.host=N.hostname=me.shift())),N.search=x.search,N.query=x.query,(!Et.isNull(N.pathname)||!Et.isNull(N.search))&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.href=N.format(),N;if(!U.length)return N.pathname=null,N.path=N.search?"/"+N.search:null,N.href=N.format(),N;for(var xt=U.slice(-1)[0],_t=(N.host||x.host||U.length>1)&&("."===xt||".."===xt)||""===xt,en=0,Ht=U.length;Ht>=0;Ht--)"."===(xt=U[Ht])?U.splice(Ht,1):".."===xt?(U.splice(Ht,1),en++):en&&(U.splice(Ht,1),en--);if(!z&&!Z)for(;en--;en)U.unshift("..");z&&""!==U[0]&&(!U[0]||"/"!==U[0].charAt(0))&&U.unshift(""),_t&&"/"!==U.join("/").substr(-1)&&U.push("");var me,je=""===U[0]||U[0]&&"/"===U[0].charAt(0);return $&&(N.hostname=N.host=je?"":U.length?U.shift():"",(me=!!(N.host&&N.host.indexOf("@")>0)&&N.host.split("@"))&&(N.auth=me.shift(),N.host=N.hostname=me.shift())),(z=z||N.host&&U.length)&&!je&&U.unshift(""),U.length?N.pathname=U.join("/"):(N.pathname=null,N.path=null),(!Et.isNull(N.pathname)||!Et.isNull(N.search))&&(N.path=(N.pathname?N.pathname:"")+(N.search?N.search:"")),N.auth=x.auth||N.auth,N.slashes=N.slashes||x.slashes,N.href=N.format(),N},nt.prototype.parseHost=function(){var x=this.host,Y=Ge.exec(x);Y&&(":"!==(Y=Y[0])&&(this.port=Y.substr(1)),x=x.substr(0,x.length-Y.length)),x&&(this.hostname=x)}},796:$t=>{"use strict";$t.exports={isString:function(ke){return"string"==typeof ke},isObject:function(ke){return"object"==typeof ke&&null!==ke},isNull:function(ke){return null===ke},isNullOrUndefined:function(ke){return null==ke}}}},$t=>{$t($t.s=940)}]);