(self.webpackChunkdemo_d=self.webpackChunkdemo_d||[]).push([[179],{835:(jt,Ze,je)=>{"use strict";function ke(t){return"function"==typeof t}function ft(t){const n=t(i=>{Error.call(i),i.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const tt=ft(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((i,r)=>`${r+1}) ${i.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function pt(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Ie{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:i}=this;if(ke(i))try{i()}catch(s){e=s instanceof tt?s.errors:[s]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const s of r)try{Ve(s)}catch(o){e=e??[],o instanceof tt?e=[...e,...o.errors]:e.push(o)}}if(e)throw new tt(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Ve(e);else{if(e instanceof Ie){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pt(n,e)}remove(e){const{_finalizers:n}=this;n&&pt(n,e),e instanceof Ie&&e._removeParent(this)}}Ie.EMPTY=(()=>{const t=new Ie;return t.closed=!0,t})();const ct=Ie.EMPTY;function et(t){return t instanceof Ie||t&&"closed"in t&&ke(t.remove)&&ke(t.add)&&ke(t.unsubscribe)}function Ve(t){ke(t)?t():t.unsubscribe()}const qe={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wt={setTimeout(t,e,...n){const{delegate:i}=wt;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=wt;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function zt(t){wt.setTimeout(()=>{const{onUnhandledError:e}=qe;if(!e)throw t;e(t)})}function Oe(){}const pe=Tn("C",void 0,void 0);function Tn(t,e,n){return{kind:t,value:e,error:n}}let Mt=null;function Rt(t){if(qe.useDeprecatedSynchronousErrorHandling){const e=!Mt;if(e&&(Mt={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:i}=Mt;if(Mt=null,n)throw i}}else t()}class Vn extends Ie{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,et(e)&&e.add(this)):this.destination=Pt}static create(e,n,i){return new M(e,n,i)}next(e){this.isStopped?Ke(function hn(t){return Tn("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ke(function De(t){return Tn("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ke(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Qe=Function.prototype.bind;function Le(t,e){return Qe.call(t,e)}class Ft{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){ve(i)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){ve(i)}else ve(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ve(n)}}}class M extends Vn{constructor(e,n,i){let r;if(super(),ke(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&qe.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Le(e.next,s),error:e.error&&Le(e.error,s),complete:e.complete&&Le(e.complete,s)}):r=e}this.destination=new Ft(r)}}function ve(t){qe.useDeprecatedSynchronousErrorHandling?function An(t){qe.useDeprecatedSynchronousErrorHandling&&Mt&&(Mt.errorThrown=!0,Mt.error=t)}(t):zt(t)}function Ke(t,e){const{onStoppedNotification:n}=qe;n&&wt.setTimeout(()=>n(t,e))}const Pt={closed:!0,next:Oe,error:function F(t){throw t},complete:Oe},dn="function"==typeof Symbol&&Symbol.observable||"@@observable";function nn(t){return t}function $(t){return 0===t.length?nn:1===t.length?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}let U=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){const s=function W(t){return t&&t instanceof Vn||function ue(t){return t&&ke(t.next)&&ke(t.error)&&ke(t.complete)}(t)&&et(t)}(n)?n:new M(n,i,r);return Rt(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return new(i=le(i))((r,s)=>{const o=new M({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return null===(i=this.source)||void 0===i?void 0:i.subscribe(n)}[dn](){return this}pipe(...n){return $(n)(this)}toPromise(n){return new(n=le(n))((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function le(t){var e;return null!==(e=t??qe.Promise)&&void 0!==e?e:Promise}const q=ft(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let j=(()=>{class t extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const i=new Y(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new q}next(n){Rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const i of this.currentObservers)i.next(n)}})}error(n){Rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Rt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:i,isStopped:r,observers:s}=this;return i||r?ct:(this.currentObservers=null,s.push(n),new Ie(()=>{this.currentObservers=null,pt(s,n)}))}_checkFinalizedStatuses(n){const{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){const n=new U;return n.source=this,n}}return t.create=(e,n)=>new Y(e,n),t})();class Y extends j{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===i||i.call(n,e)}error(e){var n,i;null===(i=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===i||i.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,i;return null!==(i=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==i?i:ct}}function Q(t){return ke(t?.lift)}function ne(t){return e=>{if(Q(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function te(t,e,n,i,r){return new be(t,e,n,i,r)}class be extends Vn{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ie(t,e){return ne((n,i)=>{let r=0;n.subscribe(te(i,s=>{i.next(t.call(e,s,r++))}))})}function Mi(t){return this instanceof Mi?(this.v=t,this):new Mi(t)}function Aa(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(v){i[v]&&(r[v]=function(_){return new Promise(function(y,E){s.push([v,_,y,E])>1||a(v,_)})})}function a(v,_){try{!function l(v){v.value instanceof Mi?Promise.resolve(v.value.v).then(c,f):g(s[0][2],v)}(i[v](_))}catch(y){g(s[0][3],y)}}function c(v){a("next",v)}function f(v){a("throw",v)}function g(v,_){v(_),s.shift(),s.length&&a(s[0][0],s[0][1])}}function Ll(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function Ir(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}const no=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Bo(t){return ke(t?.then)}function Ht(t){return ke(t[dn])}function Ri(t){return Symbol.asyncIterator&&ke(t?.[Symbol.asyncIterator])}function yn(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Uo=function Gi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Fe(t){return ke(t?.[Uo])}function Cs(t){return Aa(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:i,done:r}=yield Mi(n.read());if(r)return yield Mi(void 0);yield yield Mi(i)}}finally{n.releaseLock()}})}function Ds(t){return ke(t?.getReader)}function Ei(t){if(t instanceof U)return t;if(null!=t){if(Ht(t))return function Du(t){return new U(e=>{const n=t[dn]();if(ke(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(no(t))return function jo(t){return new U(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(Bo(t))return function Ul(t){return new U(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,zt)})}(t);if(Ri(t))return w(t);if(Fe(t))return function x(t){return new U(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(Ds(t))return function D(t){return w(Cs(t))}(t)}throw yn(t)}function w(t){return new U(e=>{(function P(t,e){var n,i,r,s;return function dr(t,e,n,i){return new(n||(n=Promise))(function(s,o){function a(f){try{c(i.next(f))}catch(g){o(g)}}function l(f){try{c(i.throw(f))}catch(g){o(g)}}function c(f){f.done?s(f.value):function r(s){return s instanceof n?s:new n(function(o){o(s)})}(f.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=Ll(t);!(i=yield n.next()).done;)if(e.next(i.value),e.closed)return}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function B(t,e,n,i=0,r=!1){const s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function G(t,e,n=1/0){return ke(e)?G((i,r)=>ie((s,o)=>e(i,s,r,o))(Ei(t(i,r))),n):("number"==typeof e&&(n=e),ne((i,r)=>function H(t,e,n,i,r,s,o,a){const l=[];let c=0,f=0,g=!1;const v=()=>{g&&!l.length&&!c&&e.complete()},_=E=>c<i?y(E):l.push(E),y=E=>{s&&e.next(E),c++;let S=!1;Ei(n(E,f++)).subscribe(te(e,T=>{r?.(T),s?_(T):e.next(T)},()=>{S=!0},void 0,()=>{if(S)try{for(c--;l.length&&c<i;){const T=l.shift();o?B(e,o,()=>y(T)):y(T)}v()}catch(T){e.error(T)}}))};return t.subscribe(te(e,_,()=>{g=!0,v()})),()=>{a?.()}}(i,r,t,n)))}function oe(t=1/0){return G(nn,t)}const Z=new U(t=>t.complete());function st(t){return t[t.length-1]}function Ct(t){return function Me(t){return t&&ke(t.schedule)}(st(t))?t.pop():void 0}function Tt(t,e=0){return ne((n,i)=>{n.subscribe(te(i,r=>B(i,t,()=>i.next(r),e),()=>B(i,t,()=>i.complete(),e),r=>B(i,t,()=>i.error(r),e)))})}function ot(t,e=0){return ne((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function ht(t,e){if(!t)throw new Error("Iterable cannot be null");return new U(n=>{B(n,e,()=>{const i=t[Symbol.asyncIterator]();B(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function we(t,e){return e?function $t(t,e){if(null!=t){if(Ht(t))return function Kt(t,e){return Ei(t).pipe(ot(e),Tt(e))}(t,e);if(no(t))return function Bt(t,e){return new U(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}(t,e);if(Bo(t))return function Yt(t,e){return Ei(t).pipe(ot(e),Tt(e))}(t,e);if(Ri(t))return ht(t,e);if(Fe(t))return function ze(t,e){return new U(n=>{let i;return B(n,e,()=>{i=t[Uo](),B(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){return void n.error(o)}s?n.complete():n.next(r)},0,!0)}),()=>ke(i?.return)&&i.return()})}(t,e);if(Ds(t))return function Ue(t,e){return ht(Cs(t),e)}(t,e)}throw yn(t)}(t,e):Ei(t)}function gt(...t){const e=Ct(t),n=function rn(t,e){return"number"==typeof st(t)?t.pop():e}(t,1/0),i=t;return i.length?1===i.length?Ei(i[0]):oe(n)(we(i,e)):Z}function rt(t={}){const{connector:e=(()=>new j),resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,f=!1,g=!1;const v=()=>{a?.unsubscribe(),a=void 0},_=()=>{v(),o=l=void 0,f=g=!1},y=()=>{const E=o;_(),E?.unsubscribe()};return ne((E,S)=>{c++,!g&&!f&&v();const T=l=l??e();S.add(()=>{c--,0===c&&!g&&!f&&(a=On(y,r))}),T.subscribe(S),!o&&c>0&&(o=new M({next:R=>T.next(R),error:R=>{g=!0,v(),a=On(_,n,R),T.error(R)},complete:()=>{f=!0,v(),a=On(_,i),T.complete()}}),Ei(E).subscribe(o))})(s)}}function On(t,e,...n){if(!0===e)return void t();if(!1===e)return;const i=new M({next:()=>{i.unsubscribe(),t()}});return e(...n).subscribe(i)}function Vt(t){for(let e in t)if(t[e]===Vt)return e;throw Error("Could not find renamed property on target object.")}function ln(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ln).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function pr(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const Pi=Vt({__forward_ref__:Vt});function jl(t){return t.__forward_ref__=jl,t.toString=function(){return ln(this())},t}function Ce(t){return Su(t)?t():t}function Su(t){return"function"==typeof t&&t.hasOwnProperty(Pi)&&t.__forward_ref__===jl}function Tu(t){return t&&!!t.\u0275providers}class Ee extends Error{constructor(e,n){super(function gr(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function Lt(t){return"string"==typeof t?t:null==t?"":String(t)}function Cn(t,e){throw new Ee(-201,!1)}function Wi(t,e){null==t&&function wn(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(null==i?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}(e,t,null,"!=")}function mt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ki(t){return{providers:t.providers||[],imports:t.imports||[]}}function Hl(t){return qd(t,Vl)||qd(t,Zd)}function qd(t,e){return t.hasOwnProperty(e)?t[e]:null}function Mu(t){return t&&(t.hasOwnProperty(Ru)||t.hasOwnProperty(Wt))?t[Ru]:null}const Vl=Vt({\u0275prov:Vt}),Ru=Vt({\u0275inj:Vt}),Zd=Vt({ngInjectableDef:Vt}),Wt=Vt({ngInjectorDef:Vt});var Dt=(()=>((Dt=Dt||{})[Dt.Default=0]="Default",Dt[Dt.Host=1]="Host",Dt[Dt.Self=2]="Self",Dt[Dt.SkipSelf=4]="SkipSelf",Dt[Dt.Optional=8]="Optional",Dt))();let Pu;function Xi(t){const e=Pu;return Pu=t,e}function Qd(t,e,n){const i=Hl(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Dt.Optional?null:void 0!==e?e:void Cn(ln(t))}const Mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Vo={},Ra="__NG_DI_FLAG__",Gl="ngTempTokenPath",Xm=/\n/gm,ef="__source";let As;function Kr(t){const e=As;return As=t,e}function qm(t,e=Dt.Default){if(void 0===As)throw new Ee(-203,!1);return null===As?Qd(t,void 0,e):As.get(t,e&Dt.Optional?null:void 0,e)}function bt(t,e=Dt.Default){return(function Ia(){return Pu}()||qm)(Ce(t),e)}function fn(t,e=Dt.Default){return bt(t,zl(e))}function zl(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Pa(t){const e=[];for(let n=0;n<t.length;n++){const i=Ce(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Ee(900,!1);let r,s=Dt.Default;for(let o=0;o<i.length;o++){const a=i[o],l=Km(a);"number"==typeof l?-1===l?r=a.token:s|=l:r=a}e.push(bt(r,s))}else e.push(bt(i))}return e}function Oa(t,e){return t[Ra]=e,t.prototype[Ra]=e,t}function Km(t){return t[Ra]}function Is(t){return{toString:t}.toString()}var Rr=(()=>((Rr=Rr||{})[Rr.OnPush=0]="OnPush",Rr[Rr.Default=1]="Default",Rr))(),Pr=(()=>{return(t=Pr||(Pr={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Pr;var t})();const Zr={},xn=[],$l=Vt({\u0275cmp:Vt}),ku=Vt({\u0275dir:Vt}),Nu=Vt({\u0275pipe:Vt}),nf=Vt({\u0275mod:Vt}),Qr=Vt({\u0275fac:Vt}),ka=Vt({__NG_ELEMENT_ID__:Vt});let Qm=0;function Jr(t){return Is(()=>{const n=!0===t.standalone,i={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:i,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Rr.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||xn,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Pr.Emulated,id:"c"+Qm++,styles:t.styles||xn,_:null,setInput:null,schemas:t.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},s=t.dependencies,o=t.features;return r.inputs=Wl(t.inputs,i),r.outputs=Wl(t.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=s?()=>("function"==typeof s?s():s).map(rf).filter(sf):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ci).filter(sf):null,r})}function rf(t){return Dn(t)||_i(t)}function sf(t){return null!==t}function mr(t){return Is(()=>({type:t.type,bootstrap:t.bootstrap||xn,declarations:t.declarations||xn,imports:t.imports||xn,exports:t.exports||xn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Wl(t,e){if(null==t)return Zr;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const Jn=Jr;function Dn(t){return t[$l]||null}function _i(t){return t[ku]||null}function Ci(t){return t[Nu]||null}function Yi(t,e){const n=t[nf]||null;if(!n&&!0===e)throw new Error(`Type ${ln(t)} does not have '\u0275mod' property.`);return n}function qi(t){return Array.isArray(t)&&"object"==typeof t[1]}function yr(t){return Array.isArray(t)&&!0===t[1]}function Kl(t){return 0!=(4&t.flags)}function Ba(t){return t.componentOffset>-1}function Zl(t){return 1==(1&t.flags)}function nr(t){return null!==t.template}function tv(t){return 0!=(256&t[2])}function ro(t,e){return t.hasOwnProperty(Qr)?t[Qr]:null}class ov{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}}function Rs(){return df}function df(t){return t.type.prototype.ngOnChanges&&(t.setInput=lv),av}function av(){const t=pf(this),e=t?.current;if(e){const n=t.previous;if(n===Zr)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function lv(t,e,n,i){const r=this.declaredInputs[n],s=pf(t)||function cv(t,e){return t[ff]=e}(t,{previous:Zr,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new ov(l&&l.currentValue,e,a===Zr),t[i]=e}Rs.ngInherit=!0;const ff="__ngSimpleChanges__";function pf(t){return t[ff]||null}function ci(t){for(;Array.isArray(t);)t=t[0];return t}function Ki(t,e){return ci(e[t.index])}function Uu(t,e){return t.data[e]}function Zi(t,e){const n=e[t];return qi(n)?n:n[0]}function Jl(t){return 64==(64&t[2])}function Ps(t,e){return null==e?null:t[e]}function vf(t){t[18]=0}function ju(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Gt={lFrame:Sf(null),bindingsEnabled:!0};function yf(){return Gt.bindingsEnabled}function _e(){return Gt.lFrame.lView}function pn(){return Gt.lFrame.tView}function ui(){let t=Hu();for(;null!==t&&64===t.type;)t=t.parent;return t}function Hu(){return Gt.lFrame.currentTNode}function kr(t,e){const n=Gt.lFrame;n.currentTNode=t,n.isParent=e}function Vu(){return Gt.lFrame.isParent}function Zo(){return Gt.lFrame.bindingIndex++}function wv(t,e){const n=Gt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gu(e)}function Gu(t){Gt.lFrame.currentDirectiveIndex=t}function Ef(){return Gt.lFrame.currentQueryIndex}function $u(t){Gt.lFrame.currentQueryIndex=t}function Ev(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Cf(t,e,n){if(n&Dt.SkipSelf){let r=e,s=t;for(;!(r=r.parent,null!==r||n&Dt.Host||(r=Ev(s),null===r||(s=s[15],10&r.type))););if(null===r)return!1;e=r,t=s}const i=Gt.lFrame=Df();return i.currentTNode=e,i.lView=t,!0}function Wu(t){const e=Df(),n=t[1];Gt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Df(){const t=Gt.lFrame,e=null===t?null:t.child;return null===e?Sf(t):e}function Sf(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function is(){const t=Gt.lFrame;return Gt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Tf=is;function Xu(){const t=is();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ei(){return Gt.lFrame.selectedIndex}function Os(t){Gt.lFrame.selectedIndex=t}function Ua(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=f&&(t.destroyHooks||(t.destroyHooks=[])).push(n,f)}}function ja(t,e,n){qu(t,e,3,n)}function rc(t,e,n,i){(3&t[2])===n&&qu(t,e,n,i)}function Af(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function qu(t,e,n,i){const s=i??-1,o=e.length-1;let a=0;for(let l=void 0!==i?65535&t[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=i&&a>=i)break}else e[l]<0&&(t[18]+=65536),(a<s||-1==s)&&(Mv(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function Mv(t,e,n,i){const r=n[i]<0,s=n[i+1],a=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class Ha{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}}function Ku(t,e,n){let i=0;for(;i<n.length;){const r=n[i];if("number"==typeof r){if(0!==r)break;i++;const s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{const s=r,o=n[++i];Va(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function If(t){return 3===t||4===t||6===t}function Va(t){return 64===t.charCodeAt(0)}function Ga(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||Mf(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function Mf(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function Rf(t){return-1!==t}function sc(t){return 32767&t}function oc(t,e){let n=function Nv(t){return t>>16}(t),i=e;for(;n>0;)i=i[15],n--;return i}let Zu=!0;function ac(t){const e=Zu;return Zu=t,e}let Fv=0;const Nr={};function lc(t,e){const n=kf(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,Qu(i.data,t),Qu(e,null),Qu(i.blueprint,null));const r=Ju(t,e),s=t.injectorIndex;if(Rf(r)){const o=sc(r),a=oc(r,e),l=a[1].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Qu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function kf(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ju(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){if(i=ih(r),null===i)return-1;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return-1}function eh(t,e,n){!function Lv(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(ka)&&(i=n[ka]),null==i&&(i=n[ka]=Fv++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function th(t,e,n){if(n&Dt.Optional||void 0!==t)return t;Cn()}function cc(t,e,n,i){if(n&Dt.Optional&&void 0===i&&(i=null),0==(n&(Dt.Self|Dt.Host))){const r=t[9],s=Xi(void 0);try{return r?r.get(e,i,n&Dt.Optional):Qd(e,i,n&Dt.Optional)}finally{Xi(s)}}return th(i,0,n)}function br(t,e,n,i=Dt.Default,r){if(null!==t){if(1024&e[2]){const o=function Jo(t,e,n,i,r){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=wr(s,o,n,i|Dt.Self,Nr);if(a!==Nr)return a;let l=s.parent;if(!l){const c=o[21];if(c){const f=c.get(n,Nr,i);if(f!==Nr)return f}l=ih(o),o=o[15]}s=l}return r}(t,e,n,i,Nr);if(o!==Nr)return o}const s=wr(t,e,n,i,Nr);if(s!==Nr)return s}return cc(e,n,i,r)}function wr(t,e,n,i,r){const s=function Uv(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ka)?t[ka]:void 0;return"number"==typeof e?e>=0?255&e:jv:e}(n);if("function"==typeof s){if(!Cf(e,t,i))return i&Dt.Host?th(r,0,i):cc(e,n,i,r);try{const o=s(i);if(null!=o||i&Dt.Optional)return o;Cn()}finally{Tf()}}else if("number"==typeof s){let o=null,a=kf(t,e),l=-1,c=i&Dt.Host?e[16][6]:null;for((-1===a||i&Dt.SkipSelf)&&(l=-1===a?Ju(t,e):e[a+8],-1!==l&&Qt(i,!1)?(o=e[1],a=sc(l),e=oc(l,e)):a=-1);-1!==a;){const f=e[1];if(Ff(s,a,f.data)){const g=Bv(a,e,n,o,i,c);if(g!==Nr)return g}l=e[a+8],-1!==l&&Qt(i,e[1].data[a+8]===c)&&Ff(s,a,e)?(o=f,a=sc(l),e=oc(l,e)):a=-1}}return r}function Bv(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],f=uc(a,o,n,null==i?Ba(a)&&Zu:i!=o&&0!=(3&a.type),r&Dt.Host&&s===a);return null!==f?xr(e,o,f,a):Nr}function uc(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,f=s>>20,v=r?a+f:t.directiveEnd;for(let _=i?a:a+f;_<v;_++){const y=o[_];if(_<l&&n===y||_>=l&&y.type===n)return _}if(r){const _=o[l];if(_&&nr(_)&&_.type===n)return l}return null}function xr(t,e,n,i){let r=t[n];const s=e.data;if(function Rv(t){return t instanceof Ha}(r)){const o=r;o.resolving&&function Au(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new Ee(-200,`Circular dependency in DI detected for ${t}${n}`)}(function bn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Lt(t)}(s[n]));const a=ac(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Xi(o.injectImpl):null;Cf(t,i,Dt.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function Iv(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const o=df(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&Xi(l),ac(a),o.resolving=!1,Tf()}}return r}function Ff(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Qt(t,e){return!(t&Dt.Self||t&Dt.Host&&e)}class oo{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return br(this._tNode,this._lView,e,zl(i),n)}}function jv(){return new oo(ui(),_e())}function Fn(t){return Su(t)?()=>{const e=Fn(Ce(t));return e&&e()}:ro(t)}function ih(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const ta="__parameters__";function p(t,e,n){return Is(()=>{const i=function d(t){return function(...n){if(t){const i=t(...n);for(const r in i)this[r]=i[r]}}}(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;const o=new r(...s);return a.annotation=o,a;function a(l,c,f){const g=l.hasOwnProperty(ta)?l[ta]:Object.defineProperty(l,ta,{value:[]})[ta];for(;g.length<=f;)g.push(null);return(g[f]=g[f]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class C{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=mt({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function $a(t,e){t.forEach(n=>Array.isArray(n)?$a(n,e):e(n))}function kx(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Lf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const sh=Oa(p("Optional"),8),oh=Oa(p("SkipSelf"),4);var rr=(()=>((rr=rr||{})[rr.Important=1]="Important",rr[rr.DashCase=2]="DashCase",rr))();const Yv=new Map;let Ak=0;const Kv="__ngContext__";function Fi(t,e){qi(e)?(t[Kv]=e[20],function Mk(t){Yv.set(t[20],t)}(e)):t[Kv]=e}function Qv(t,e){return undefined(t,e)}function uh(t){const e=t[3];return yr(e)?e[3]:e}function Jv(t){return tE(t[13])}function e_(t){return tE(t[4])}function tE(t){for(;null!==t&&!yr(t);)t=t[4];return t}function fc(t,e,n,i,r){if(null!=i){let s,o=!1;yr(i)?s=i:qi(i)&&(o=!0,i=i[0]);const a=ci(i);0===t&&null!==n?null==r?aE(e,n,a):Wa(e,n,a,r||null,!0):1===t&&null!==n?Wa(e,n,a,r||null,!0):2===t?function a_(t,e,n){const i=Hf(t,e);i&&function Kk(t,e,n,i){t.removeChild(e,n,i)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function Jk(t,e,n,i,r){const s=n[7];s!==ci(n)&&fc(e,t,i,s,r);for(let a=10;a<n.length;a++){const l=n[a];hh(l[1],l,t,e,i,s)}}(e,t,s,n,r)}}function n_(t,e,n){return t.createElement(e,n)}function iE(t,e){const n=t[9],i=n.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,ju(r,-1)),n.splice(i,1)}function i_(t,e){if(t.length<=10)return;const n=10+e,i=t[n];if(i){const r=i[17];null!==r&&r!==t&&iE(r,i),e>0&&(t[n-1][4]=i[4]);const s=Lf(t,10+e);!function Vk(t,e){hh(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(i[1],i);const o=s[19];null!==o&&o.detachView(s[1]),i[3]=null,i[4]=null,i[2]&=-65}return i}function rE(t,e){if(!(128&e[2])){const n=e[11];n.destroyNode&&hh(t,e,n,3,null,null),function $k(t){let e=t[13];if(!e)return r_(t[1],t);for(;e;){let n=null;if(qi(e))n=e[13];else{const i=e[10];i&&(n=i)}if(!n){for(;e&&!e[4]&&e!==t;)qi(e)&&r_(e[1],e),e=e[3];null===e&&(e=t),qi(e)&&r_(e[1],e),n=e&&e[4]}e=n}}(e)}}function r_(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function qk(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const r=e[n[i]];if(!(r instanceof Ha)){const s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=r[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(r)}finally{}}}}(t,e),function Yk(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+3];o>=0?i[r=o]():i[r=-o].unsubscribe(),s+=2}else{const o=i[r=n[s+1]];n[s].call(o)}if(null!==i){for(let s=r+1;s<i.length;s++)(0,i[s])();e[7]=null}}(t,e),1===e[1].type&&e[11].destroy();const n=e[17];if(null!==n&&yr(e[3])){n!==e[3]&&iE(n,e);const i=e[19];null!==i&&i.detachView(t)}!function Rk(t){Yv.delete(t[20])}(e)}}function sE(t,e,n){return function oE(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];{const{componentOffset:r}=i;if(r>-1){const{encapsulation:s}=t.data[i.directiveStart+r];if(s===Pr.None||s===Pr.Emulated)return null}return Ki(i,n)}}(t,e.parent,n)}function Wa(t,e,n,i,r){t.insertBefore(e,n,i,r)}function aE(t,e,n){t.appendChild(e,n)}function lE(t,e,n,i,r){null!==i?Wa(t,e,n,i,r):aE(t,e,n)}function Hf(t,e){return t.parentNode(e)}let u_,hE=function uE(t,e,n){return 40&t.type?Ki(t,n):null};function Vf(t,e,n,i){const r=sE(t,i,e),s=e[11],a=function cE(t,e,n){return hE(t,e,n)}(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let l=0;l<n.length;l++)lE(s,r,n[l],a,!1);else lE(s,r,n,a,!1)}function Gf(t,e){if(null!==e){const n=e.type;if(3&n)return Ki(e,t);if(4&n)return o_(-1,t[e.index]);if(8&n){const i=e.child;if(null!==i)return Gf(t,i);{const r=t[e.index];return yr(r)?o_(-1,r):ci(r)}}if(32&n)return Qv(e,t)()||ci(t[e.index]);{const i=fE(t,e);return null!==i?Array.isArray(i)?i[0]:Gf(uh(t[16]),i):Gf(t,e.next)}}return null}function fE(t,e){return null!==e?t[16][6].projection[e.projection]:null}function o_(t,e){const n=10+t+1;if(n<e.length){const i=e[n],r=i[1].firstChild;if(null!==r)return Gf(i,r)}return e[7]}function l_(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&Fi(ci(a),i),n.flags|=2),32!=(32&n.flags))if(8&l)l_(t,e,n.child,i,r,s,!1),fc(e,t,r,a,s);else if(32&l){const c=Qv(n,i);let f;for(;f=c();)fc(e,t,r,f,s);fc(e,t,r,a,s)}else 16&l?pE(t,e,i,n,r,s):fc(e,t,r,a,s);n=o?n.projectionNext:n.next}}function hh(t,e,n,i,r,s){l_(n,i,t.firstChild,e,r,s,!1)}function pE(t,e,n,i,r,s){const o=n[16],l=o[6].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)fc(e,t,r,l[c],s);else l_(t,e,l,o[3],r,s,!0)}function gE(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function mE(t,e,n){const{mergedAttrs:i,classes:r,styles:s}=n;null!==i&&Ku(t,e,i),null!==r&&gE(t,e,r),null!==s&&function tN(t,e,n){t.setAttribute(e,"style",n)}(t,e,s)}const Xf=new C("ENVIRONMENT_INITIALIZER"),RE=new C("INJECTOR",-1),PE=new C("INJECTOR_DEF_TYPES");class OE{get(e,n=Vo){if(n===Vo){const i=new Error(`NullInjectorError: No provider for ${ln(e)}!`);throw i.name="NullInjectorError",i}return n}}function AN(...t){return{\u0275providers:kE(0,t),\u0275fromNgModule:!0}}function kE(t,...e){const n=[],i=new Set;let r;return $a(e,s=>{const o=s;m_(o,n,[],i)&&(r||(r=[]),r.push(o))}),void 0!==r&&NE(r,n),n}function NE(t,e){for(let n=0;n<t.length;n++){const{providers:r}=t[n];v_(r,s=>{e.push(s)})}}function m_(t,e,n,i){if(!(t=Ce(t)))return!1;let r=null,s=Mu(t);const o=!s&&Dn(t);if(s||o){if(o&&!o.standalone)return!1;r=t}else{const l=t.ngModule;if(s=Mu(l),!s)return!1;r=l}const a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)m_(c,e,n,i)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;i.add(r);try{$a(s.imports,f=>{m_(f,e,n,i)&&(c||(c=[]),c.push(f))})}finally{}void 0!==c&&NE(c,e)}if(!a){const c=ro(r)||(()=>new r);e.push({provide:r,useFactory:c,deps:xn},{provide:PE,useValue:r,multi:!0},{provide:Xf,useValue:()=>bt(r),multi:!0})}const l=s.providers;null==l||a||v_(l,f=>{e.push(f)})}}return r!==t&&void 0!==t.providers}function v_(t,e){for(let n of t)Tu(n)&&(n=n.\u0275providers),Array.isArray(n)?v_(n,e):e(n)}const IN=Vt({provide:String,useValue:Vt});function __(t){return null!==t&&"object"==typeof t&&IN in t}function Ya(t){return"function"==typeof t}const y_=new C("Set Injector scope."),Yf={},RN={};let b_;function qf(){return void 0===b_&&(b_=new OE),b_}class lo{}class BE extends lo{constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,x_(e,o=>this.processProvider(o)),this.records.set(RE,pc(void 0,this)),r.has("environment")&&this.records.set(lo,pc(void 0,this));const s=this.records.get(y_);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(PE.multi,xn,Dt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const n=Kr(this),i=Xi(void 0);try{return e()}finally{Kr(n),Xi(i)}}get(e,n=Vo,i=Dt.Default){this.assertNotDestroyed(),i=zl(i);const r=Kr(this),s=Xi(void 0);try{if(!(i&Dt.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function FN(t){return"function"==typeof t||"object"==typeof t&&t instanceof C}(e)&&Hl(e);a=l&&this.injectableDefInScope(l)?pc(w_(e),Yf):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(i&Dt.Self?qf():this.parent).get(e,n=i&Dt.Optional&&n===Vo?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[Gl]=o[Gl]||[]).unshift(ln(e)),r)throw o;return function Zm(t,e,n,i){const r=t[Gl];throw e[ef]&&r.unshift(e[ef]),t.message=function tf(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let r=ln(e);if(Array.isArray(e))r=e.map(ln).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ln(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(Xm,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t[Gl]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{Xi(s),Kr(r)}}resolveInjectorInitializers(){const e=Kr(this),n=Xi(void 0);try{const i=this.get(Xf.multi,xn,Dt.Self);for(const r of i)r()}finally{Kr(e),Xi(n)}}toString(){const e=[],n=this.records;for(const i of n.keys())e.push(ln(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ee(205,!1)}processProvider(e){let n=Ya(e=Ce(e))?e:Ce(e&&e.provide);const i=function ON(t){return __(t)?pc(void 0,t.useValue):pc(function UE(t,e,n){let i;if(Ya(t)){const r=Ce(t);return ro(r)||w_(r)}if(__(t))i=()=>Ce(t.useValue);else if(function LE(t){return!(!t||!t.useFactory)}(t))i=()=>t.useFactory(...Pa(t.deps||[]));else if(function FE(t){return!(!t||!t.useExisting)}(t))i=()=>bt(Ce(t.useExisting));else{const r=Ce(t&&(t.useClass||t.provide));if(!function kN(t){return!!t.deps}(t))return ro(r)||w_(r);i=()=>new r(...Pa(t.deps))}return i}(t),Yf)}(e);if(Ya(e)||!0!==e.multi)this.records.get(n);else{let r=this.records.get(n);r||(r=pc(void 0,Yf,!0),r.factory=()=>Pa(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){return n.value===Yf&&(n.value=RN,n.value=n.factory()),"object"==typeof n.value&&n.value&&function NN(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ce(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function w_(t){const e=Hl(t),n=null!==e?e.factory:ro(t);if(null!==n)return n;if(t instanceof C)throw new Ee(204,!1);if(t instanceof Function)return function PN(t){const e=t.length;if(e>0)throw function rh(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}(e,"?"),new Ee(204,!1);const n=function Kd(t){const e=t&&(t[Vl]||t[Zd]);if(e){const n=function zm(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Ee(204,!1)}function pc(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function x_(t,e){for(const n of t)Array.isArray(n)?x_(n,e):n&&Tu(n)?x_(n.\u0275providers,e):e(n)}class LN{}class jE{}class UN{resolveComponentFactory(e){throw function BN(t){const e=Error(`No component factory found for ${ln(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let gh=(()=>{class t{}return t.NULL=new UN,t})();function jN(){return gc(ui(),_e())}function gc(t,e){return new wi(Ki(t,e))}let wi=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=jN,t})();function HN(t){return t instanceof wi?t.nativeElement:t}class VE{}let mc=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function VN(){const t=_e(),n=Zi(ui().index,t);return(qi(n)?n:t)[11]}(),t})(),GN=(()=>{class t{}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>null}),t})();class Kf{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const zN=new Kf("15.0.4"),E_={};function D_(t){return t.ngOriginalError}class vc{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&D_(e);for(;n&&D_(n);)n=D_(n);return n||null}}function co(t){return t instanceof Function?t():t}function zE(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}const $E="ng-template";function tF(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==zE(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function WE(t){return 4===t.type&&t.value!==$E}function nF(t,e,n){return e===(4!==t.type||n?t.value:$E)}function iF(t,e,n){let i=4;const r=t.attrs||[],s=function oF(t){for(let e=0;e<t.length;e++)if(If(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!nF(t,l,n)||""===l&&1===e.length){if(ss(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!tF(t.attrs,c,n)){if(ss(i))return!1;o=!0}continue}const g=rF(8&i?"class":l,r,WE(t),n);if(-1===g){if(ss(i))return!1;o=!0;continue}if(""!==c){let v;v=g>s?"":r[g+1].toLowerCase();const _=8&i?v:null;if(_&&-1!==zE(_,c,0)||2&i&&c!==v){if(ss(i))return!1;o=!0}}}}else{if(!o&&!ss(i)&&!ss(l))return!1;if(o&&ss(l))continue;o=!1,i=l|1&i}}return ss(i)||o}function ss(t){return 0==(1&t)}function rF(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){const o=e[r];if(o===t)return r;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=s?1:2}return-1}return function aF(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function XE(t,e,n=!1){for(let i=0;i<e.length;i++)if(iF(t,e[i],n))return!0;return!1}function YE(t,e){return t?":not("+e.trim()+")":e}function cF(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""!==r&&!ss(o)&&(e+=YE(s,r),r=""),i=o,s=s||!ss(i);n++}return""!==r&&(e+=YE(s,r)),e}const Xt={};function uo(t){qE(pn(),_e(),ei()+t,!1)}function qE(t,e,n,i){if(!i)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&ja(e,s,n)}else{const s=t.preOrderHooks;null!==s&&rc(e,s,0,n)}Os(n)}function JE(t,e=null,n=null,i){const r=eC(t,e,n,i);return r.resolveInjectorInitializers(),r}function eC(t,e=null,n=null,i,r=new Set){const s=[n||xn,AN(t)];return i=i||("object"==typeof t?void 0:ln(t)),new BE(s,e||qf(),i||null,r)}let ks=(()=>{class t{static create(n,i){if(Array.isArray(n))return JE({name:""},i,n,"");{const r=n.name??"";return JE({name:r},n.parent,n.providers,r)}}}return t.THROW_IF_NOT_FOUND=Vo,t.NULL=new OE,t.\u0275prov=mt({token:t,providedIn:"any",factory:()=>bt(RE)}),t.__NG_ELEMENT_ID__=-1,t})();function $e(t,e=Dt.Default){const n=_e();return null===n?bt(t,e):br(ui(),n,Ce(t),e)}function lC(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const o=t.data[s];$u(r),o.contentQueries(2,e[s],s)}}}function Qf(t,e,n,i,r,s,o,a,l,c,f){const g=e.blueprint.slice();return g[0]=r,g[2]=76|i,(null!==f||t&&1024&t[2])&&(g[2]|=1024),vf(g),g[3]=g[15]=t,g[8]=n,g[10]=o||t&&t[10],g[11]=a||t&&t[11],g[12]=l||t&&t[12]||null,g[9]=c||t&&t[9]||null,g[6]=s,g[20]=function Ik(){return Ak++}(),g[21]=f,g[16]=2==e.type?t[16]:g,g}function bc(t,e,n,i,r){let s=t.data[e];if(null===s)s=function M_(t,e,n,i,r){const s=Hu(),o=Vu(),l=t.data[e]=function NF(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(t,e,n,i,r),function ic(){return Gt.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const o=function Ko(){const t=Gt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return kr(s,!0),s}function mh(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function R_(t,e,n){Wu(e);try{const i=t.viewQuery;null!==i&&H_(1,i,n);const r=t.template;null!==r&&cC(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&lC(t,e),t.staticViewQueries&&H_(2,t.viewQuery,n);const s=t.components;null!==s&&function PF(t,e){for(let n=0;n<e.length;n++)eL(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[2]&=-5,Xu()}}function Jf(t,e,n,i){const r=e[2];if(128!=(128&r)){Wu(e);try{vf(e),function wf(t){return Gt.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&cC(t,e,n,2,i);const o=3==(3&r);if(o){const c=t.preOrderCheckHooks;null!==c&&ja(e,c,null)}else{const c=t.preOrderHooks;null!==c&&rc(e,c,0,null),Af(e,0)}if(function QF(t){for(let e=Jv(t);null!==e;e=e_(e)){if(!e[2])continue;const n=e[9];for(let i=0;i<n.length;i++){const r=n[i],s=r[3];0==(512&r[2])&&ju(s,1),r[2]|=512}}}(e),function ZF(t){for(let e=Jv(t);null!==e;e=e_(e))for(let n=10;n<e.length;n++){const i=e[n],r=i[1];Jl(i)&&Jf(r,i,r.template,i[8])}}(e),null!==t.contentQueries&&lC(t,e),o){const c=t.contentCheckHooks;null!==c&&ja(e,c)}else{const c=t.contentHooks;null!==c&&rc(e,c,1),Af(e,1)}!function MF(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let i=0;i<n.length;i++){const r=n[i];if(r<0)Os(~r);else{const s=r,o=n[++i],a=n[++i];wv(o,s),a(2,e[s])}}}finally{Os(-1)}}(t,e);const a=t.components;null!==a&&function RF(t,e){for(let n=0;n<e.length;n++)JF(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&H_(2,l,i),o){const c=t.viewCheckHooks;null!==c&&ja(e,c)}else{const c=t.viewHooks;null!==c&&rc(e,c,2),Af(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,ju(e[3],-1))}finally{Xu()}}}function cC(t,e,n,i,r){const s=ei(),o=2&i;try{Os(-1),o&&e.length>22&&qE(t,e,22,!1),n(i,r)}finally{Os(s)}}function P_(t,e,n){if(Kl(e)){const r=e.directiveEnd;for(let s=e.directiveStart;s<r;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}function O_(t,e,n){!yf()||(function HF(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;Ba(n)&&function YF(t,e,n){const i=Ki(e,t),r=uC(n),s=t[10],o=ep(t,Qf(t,r,null,n.onPush?32:16,i,e,s,s.createRenderer(i,n),null,null,null));t[e.index]=o}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||lc(n,e),Fi(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const l=t.data[a],c=xr(e,t,a,n);Fi(c,e),null!==o&&qF(0,a-r,c,l,0,o),nr(l)&&(Zi(n.index,e)[8]=xr(e,t,a,n))}}(t,e,n,Ki(n,e)),64==(64&n.flags)&&mC(t,e,n))}function k_(t,e,n=Ki){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function uC(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=N_(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function N_(t,e,n,i,r,s,o,a,l,c){const f=22+i,g=f+r,v=function OF(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Xt);return n}(f,g),_="function"==typeof c?c():c;return v[1]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:_,incompleteFirstPass:!1}}function hC(t,e,n,i){const r=_C(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&yC(t).push(i,r.length-1))}function dC(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=null===n?{}:n;const s=t[r];null===i?fC(n,e,r,s):i.hasOwnProperty(r)&&fC(n,e,i[r],s)}return n}function fC(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function pC(t,e){const n=Zi(e,t);16&n[2]||(n[2]|=32)}function F_(t,e,n,i){let r=!1;if(yf()){const s=null===i?null:{"":-1},o=function GF(t,e){const n=t.directiveRegistry;let i=null,r=null;if(n)for(let s=0;s<n.length;s++){const o=n[s];if(XE(e,o.selectors,!1))if(i||(i=[]),nr(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o),L_(t,e,a.length)}else i.unshift(o),L_(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return null===i?null:[i,r]}(t,n);let a,l;null===o?a=l=null:[a,l]=o,null!==a&&(r=!0,gC(t,e,n,a,s,l)),s&&function zF(t,e,n){if(e){const i=t.localNames=[];for(let r=0;r<e.length;r+=2){const s=n[e[r+1]];if(null==s)throw new Ee(-301,!1);i.push(e[r],s)}}}(n,i,s)}return n.mergedAttrs=Ga(n.mergedAttrs,n.attrs),r}function gC(t,e,n,i,r,s){for(let c=0;c<i.length;c++)eh(lc(n,e),t,i[c].type);!function WF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}(n,t.data.length,i.length);for(let c=0;c<i.length;c++){const f=i[c];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,l=mh(t,e,i.length,null);for(let c=0;c<i.length;c++){const f=i[c];n.mergedAttrs=Ga(n.mergedAttrs,f.hostAttrs),XF(t,n,e,l,f),$F(l,f,r),null!==f.contentQueries&&(n.flags|=4),(null!==f.hostBindings||null!==f.hostAttrs||0!==f.hostVars)&&(n.flags|=64);const g=f.type.prototype;!o&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),o=!0),!a&&(g.ngOnChanges||g.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function FF(t,e,n){const r=e.directiveEnd,s=t.data,o=e.attrs,a=[];let l=null,c=null;for(let f=e.directiveStart;f<r;f++){const g=s[f],v=n?n.get(g):null,y=v?v.outputs:null;l=dC(g.inputs,f,l,v?v.inputs:null),c=dC(g.outputs,f,c,y);const E=null===l||null===o||WE(e)?null:KF(l,f,o);a.push(E)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(t,n,s)}function mC(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=function xv(){return Gt.lFrame.currentDirectiveIndex}();try{Os(s);for(let a=i;a<r;a++){const l=t.data[a],c=e[a];Gu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&VF(l,c)}}finally{Os(-1),Gu(o)}}function VF(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function L_(t,e,n){e.componentOffset=n,(t.components||(t.components=[])).push(e.index)}function $F(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;nr(e)&&(n[""]=t)}}function XF(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=ro(r.type)),o=new Ha(s,nr(r),$e);t.blueprint[i]=o,n[i]=o,function UF(t,e,n,i,r){const s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;null===o&&(o=t.hostBindingOpCodes=[]);const a=~e.index;(function jF(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(o)!=a&&o.push(a),o.push(n,i,s)}}(t,e,i,mh(t,n,r.hostVars,Xt),r)}function qF(t,e,n,i,r,s){const o=s[e];if(null!==o){const a=i.setInput;for(let l=0;l<o.length;){const c=o[l++],f=o[l++],g=o[l++];null!==a?i.setInput(n,g,c,f):n[f]=g}}}function KF(t,e,n){let i=null,r=0;for(;r<n.length;){const s=n[r];if(0!==s)if(5!==s){if("number"==typeof s)break;if(t.hasOwnProperty(s)){null===i&&(i=[]);const o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}else r+=2;else r+=4}return i}function vC(t,e,n,i){return[t,!0,!1,e,null,0,i,n,null,null]}function JF(t,e){const n=Zi(e,t);if(Jl(n)){const i=n[1];48&n[2]?Jf(i,n,i.template,n[8]):n[5]>0&&U_(n)}}function U_(t){for(let i=Jv(t);null!==i;i=e_(i))for(let r=10;r<i.length;r++){const s=i[r];if(Jl(s))if(512&s[2]){const o=s[1];Jf(o,s,o.template,s[8])}else s[5]>0&&U_(s)}const n=t[1].components;if(null!==n)for(let i=0;i<n.length;i++){const r=Zi(n[i],t);Jl(r)&&r[5]>0&&U_(r)}}function eL(t,e){const n=Zi(e,t),i=n[1];(function tL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(i,n),R_(i,n,n[8])}function ep(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function j_(t){for(;t;){t[2]|=32;const e=uh(t);if(tv(t)&&!e)return t;t=e}return null}function tp(t,e,n,i=!0){const r=e[10];r.begin&&r.begin();try{Jf(t,e,t.template,n)}catch(o){throw i&&wC(e,o),o}finally{r.end&&r.end()}}function H_(t,e,n){$u(0),e(t,n)}function _C(t){return t[7]||(t[7]=[])}function yC(t){return t.cleanup||(t.cleanup=[])}function wC(t,e){const n=t[9],i=n?n.get(vc,null):null;i&&i.handleError(e)}function V_(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function ho(t,e,n){const i=function Ql(t,e){return ci(e[t])}(e,t);!function nE(t,e,n){t.setValue(e,n)}(t[11],i,n)}function np(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?r=pr(r,a):2==s&&(i=pr(i,a+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}function ip(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(ci(s)),yr(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1].firstChild;null!==c&&ip(l[1],l,c,i)}const o=n.type;if(8&o)ip(t,e,n.child,i);else if(32&o){const a=Qv(n,e);let l;for(;l=a();)i.push(l)}else if(16&o){const a=fE(e,n);if(Array.isArray(a))i.push(...a);else{const l=uh(e[16]);ip(l[1],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}class vh{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return ip(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(yr(e)){const n=e[8],i=n?n.indexOf(this):-1;i>-1&&(i_(e,i),Lf(n,i))}this._attachedToViewContainer=!1}rE(this._lView[1],this._lView)}onDestroy(e){hC(this._lView[1],this._lView,null,e)}markForCheck(){j_(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){tp(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ee(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function zk(t,e){hh(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Ee(902,!1);this._appRef=e}}class nL extends vh{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;tp(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class xC extends gh{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=Dn(e);return new _h(n,this.ngModule)}}function EC(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class rL{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=zl(i);const r=this.injector.get(e,E_,i);return r!==E_||n===E_?r:this.parentInjector.get(e,n,i)}}class _h extends jE{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function uF(t){return t.map(cF).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return EC(this.componentDef.inputs)}get outputs(){return EC(this.componentDef.outputs)}create(e,n,i,r){let s=(r=r||this.ngModule)instanceof lo?r:r?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new rL(e,s):e,a=o.get(VE,null);if(null===a)throw new Ee(407,!1);const l=o.get(GN,null),c=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=i?function kF(t,e,n){return t.selectRootElement(e,n===Pr.ShadowDom)}(c,i,this.componentDef.encapsulation):n_(c,f,function iL(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),v=this.componentDef.onPush?288:272,_=N_(0,null,null,1,0,null,null,null,null,null),y=Qf(null,_,null,v,null,null,a,c,l,o,null);let E,S;Wu(y);try{const T=this.componentDef;let R,I=null;T.findHostDirectiveDefs?(R=[],I=new Map,T.findHostDirectiveDefs(T,R,I),R.push(T)):R=[T];const k=function oL(t,e){const n=t[1];return t[22]=e,bc(n,22,2,"#host",null)}(y,g),V=function aL(t,e,n,i,r,s,o,a){const l=r[1];!function lL(t,e,n,i){for(const r of t)e.mergedAttrs=Ga(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(np(e,e.mergedAttrs,!0),null!==n&&mE(i,n,e))}(i,t,e,o);const c=s.createRenderer(e,n),f=Qf(r,uC(n),null,n.onPush?32:16,r[t.index],t,s,c,a||null,null,null);return l.firstCreatePass&&L_(l,t,i.length-1),ep(r,f),r[t.index]=f}(k,g,T,R,y,a,c);S=Uu(_,22),g&&function uL(t,e,n,i){if(i)Ku(t,n,["ng-version",zN.full]);else{const{attrs:r,classes:s}=function hF(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!ss(r))break;r=s}i++}return{attrs:e,classes:n}}(e.selectors[0]);r&&Ku(t,n,r),s&&s.length>0&&gE(t,n,s.join(" "))}}(c,T,g,i),void 0!==n&&function hL(t,e,n){const i=t.projection=[];for(let r=0;r<e.length;r++){const s=n[r];i.push(null!=s?Array.from(s):null)}}(S,this.ngContentSelectors,n),E=function cL(t,e,n,i,r,s){const o=ui(),a=r[1],l=Ki(o,r);gC(a,r,o,n,null,i);for(let f=0;f<n.length;f++)Fi(xr(r,a,o.directiveStart+f,o),r);mC(a,r,o),l&&Fi(l,r);const c=xr(r,a,o.directiveStart+o.componentOffset,o);if(t[8]=r[8]=c,null!==s)for(const f of s)f(c,e);return P_(a,o,t),c}(V,T,R,I,y,[dL]),R_(_,y,null)}finally{Xu()}return new sL(this.componentType,E,gc(S,y),y,S)}}class sL extends LN{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new nL(r),this.componentType=e}setInput(e,n){const i=this._tNode.inputs;let r;if(null!==i&&(r=i[e])){const s=this._rootLView;V_(s[1],s,r,e,n),pC(s,this._tNode.index)}}get injector(){return new oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function dL(){const t=ui();Ua(_e()[1],t)}let sp=null;function qa(){if(!sp){const t=Mn.Symbol;if(t&&t.iterator)sp=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const i=e[n];"entries"!==i&&"size"!==i&&Map.prototype[i]===Map.prototype.entries&&(sp=i)}}}return sp}function yh(t){return!!function z_(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&qa()in t)}function Li(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function W_(t,e,n){const i=_e();return Li(i,Zo(),e)&&function Cr(t,e,n,i,r,s,o,a){const l=Ki(e,n);let f,c=e.inputs;!a&&null!=c&&(f=c[i])?(V_(t,n,f,i,r),Ba(e)&&pC(n,e.index)):3&e.type&&(i=function LF(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(i),r=null!=o?o(r,e.value||"",i):r,s.setProperty(l,i,r))}(pn(),function jn(){const t=Gt.lFrame;return Uu(t.tView,t.selectedIndex)}(),i,t,e,i[11],n,!1),W_}function X_(t,e,n,i,r){const o=r?"class":"style";V_(t,n,e.inputs[o],o,i)}function Si(t,e,n,i){const r=_e(),s=pn(),o=22+t,a=r[11],l=r[o]=n_(a,e,function Av(){return Gt.lFrame.currentNamespace}()),c=s.firstCreatePass?function IL(t,e,n,i,r,s,o){const a=e.consts,c=bc(e,t,2,r,Ps(a,s));return F_(e,n,c,Ps(a,o)),null!==c.attrs&&np(c,c.attrs,!1),null!==c.mergedAttrs&&np(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(o,s,r,0,e,n,i):s.data[o];return kr(c,!0),mE(a,l,c),32!=(32&c.flags)&&Vf(s,r,l,c),0===function gv(){return Gt.lFrame.elementDepthCount}()&&Fi(l,r),function mv(){Gt.lFrame.elementDepthCount++}(),Zl(c)&&(O_(s,r,c),P_(s,c,r)),null!==i&&k_(r,c),Si}function Bi(){let t=ui();Vu()?function nc(){Gt.lFrame.isParent=!1}():(t=t.parent,kr(t,!1));const e=t;!function _f(){Gt.lFrame.elementDepthCount--}();const n=pn();return n.firstCreatePass&&(Ua(n,t),Kl(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Pv(t){return 0!=(8&t.flags)}(e)&&X_(n,e,_e(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ov(t){return 0!=(16&t.flags)}(e)&&X_(n,e,_e(),e.stylesWithoutHost,!1),Bi}function os(t,e,n,i){return Si(t,e,n,i),Bi(),os}function ap(t){return!!t&&"function"==typeof t.then}const jC=function UC(t){return!!t&&"function"==typeof t.subscribe};function Za(t,e,n,i){const r=_e(),s=pn(),o=ui();return function VC(t,e,n,i,r,s,o){const a=Zl(i),c=t.firstCreatePass&&yC(t),f=e[8],g=_C(e);let v=!0;if(3&i.type||o){const E=Ki(i,e),S=o?o(E):E,T=g.length,R=o?k=>o(ci(k[i.index])):i.index;let I=null;if(!o&&a&&(I=function PL(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const o=r[s];if(o===n&&r[s+1]===i){const a=e[7],l=r[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,r,i.index)),null!==I)(I.__ngLastListenerFn__||I).__ngNextListenerFn__=s,I.__ngLastListenerFn__=s,v=!1;else{s=zC(i,e,f,s,!1);const k=n.listen(S,r,s);g.push(s,k),c&&c.push(r,R,T,T+1)}}else s=zC(i,e,f,s,!1);const _=i.outputs;let y;if(v&&null!==_&&(y=_[r])){const E=y.length;if(E)for(let S=0;S<E;S+=2){const V=e[y[S]][y[S+1]].subscribe(s),K=g.length;g.push(s,V),c&&c.push(r,i.index,K,-(K+1))}}}(s,r,r[11],o,t,e,i),Za}function GC(t,e,n,i){try{return!1!==n(i)}catch(r){return wC(t,r),!1}}function zC(t,e,n,i,r){return function s(o){if(o===Function)return i;j_(t.componentOffset>-1?Zi(t.index,e):e);let l=GC(e,0,i,o),c=s.__ngNextListenerFn__;for(;c;)l=GC(e,0,c,o)&&l,c=c.__ngNextListenerFn__;return r&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function ra(t,e=""){const n=_e(),i=pn(),r=t+22,s=i.firstCreatePass?bc(i,r,1,e,null):i.data[r],o=n[r]=function t_(t,e){return t.createText(e)}(n[11],e);Vf(i,n,o,s),kr(s,!1)}function Us(t,e,n){const i=_e(),r=function xc(t,e,n,i){return Li(t,Zo(),n)?e+Lt(n)+i:Xt}(i,t,e,n);return r!==Xt&&ho(i,ei(),r),Us}const Pc="en-US";let LD=Pc;class Oc{}class cS{}class uS extends Oc{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xC(this);const i=Yi(e);this._bootstrapComponents=co(i.bootstrap),this._r3Injector=eC(e,n,[{provide:Oc,useValue:this},{provide:gh,useValue:this.componentFactoryResolver}],ln(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class ay extends cS{constructor(e){super(),this.moduleType=e}create(e){return new uS(this.moduleType,e)}}class DB extends Oc{constructor(e,n,i){super(),this.componentFactoryResolver=new xC(this),this.instance=null;const r=new BE([...e,{provide:Oc,useValue:this},{provide:gh,useValue:this.componentFactoryResolver}],n||qf(),i,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function pp(t,e,n=null){return new DB(t,e,n).injector}let SB=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n.id)){const i=kE(0,n.type),r=i.length>0?pp([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n.id,r)}return this.cachedInjectors.get(n.id)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}}return t.\u0275prov=mt({token:t,providedIn:"environment",factory:()=>new t(bt(lo))}),t})();function hS(t){t.getStandaloneInjector=e=>e.get(SB).getOrCreateStandaloneInjector(t)}function cy(t){return e=>{setTimeout(t,void 0,e)}}const zn=class QB extends j{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&"object"==typeof e){const l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=cy(s),r&&(r=cy(r)),o&&(o=cy(o)));const a=super.subscribe({next:r,error:s,complete:o});return e instanceof Ie&&e.add(a),a}};function JB(){return this._results[qa()]()}class uy{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=qa(),i=uy.prototype;i[n]||(i[n]=JB)}get changes(){return this._changes||(this._changes=new zn)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const i=this;i.dirty=!1;const r=function Fr(t){return t.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Hv(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(i._results,r,n))&&(i._results=r,i.length=r.length,i.last=r[this.length-1],i.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let fo=(()=>{class t{}return t.__NG_ELEMENT_ID__=nU,t})();const eU=fo,tU=class extends eU{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}createEmbeddedView(e,n){const i=this._declarationTContainer.tViews,r=Qf(this._declarationLView,i,e,16,null,i.declTNode,null,null,null,null,n||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(i)),R_(i,r,e),new vh(r)}};function nU(){return gp(ui(),_e())}function gp(t,e){return 4&t.type?new tU(e,t,gc(t,e)):null}let Br=(()=>{class t{}return t.__NG_ELEMENT_ID__=iU,t})();function iU(){return DS(ui(),_e())}const rU=Br,ES=class extends rU{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return gc(this._hostTNode,this._hostLView)}get injector(){return new oo(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ju(this._hostTNode,this._hostLView);if(Rf(e)){const n=oc(e,this._hostLView),i=sc(e);return new oo(n[1].data[i+8],n)}return new oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=CS(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,i){let r,s;"number"==typeof i?r=i:null!=i&&(r=i.index,s=i.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,r),o}createComponent(e,n,i,r,s){const o=e&&!function Sn(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const g=n||{};a=g.index,i=g.injector,r=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}const l=o?e:new _h(Dn(e)),c=i||this.parentInjector;if(!s&&null==l.ngModule){const v=(o?c:this.parentInjector).get(lo,null);v&&(s=v)}const f=l.create(c,r,void 0,s);return this.insert(f.hostView,a),f}insert(e,n){const i=e._lView,r=i[1];if(function pv(t){return yr(t[3])}(i)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const g=i[3],v=new ES(g,g[6],g[3]);v.detach(v.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function Wk(t,e,n,i){const r=10+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-10?(e[4]=n[r],kx(n,10+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function Xk(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(r,i,o,s);const a=o_(s,o),l=i[11],c=Hf(l,o[7]);return null!==c&&function Gk(t,e,n,i,r,s){i[0]=r,i[6]=e,hh(t,i,n,1,r,s)}(r,o[6],l,i,c,a),e.attachToViewContainerRef(),kx(hy(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=CS(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),i=i_(this._lContainer,n);i&&(Lf(hy(this._lContainer),n),rE(i[1],i))}detach(e){const n=this._adjustIndex(e,-1),i=i_(this._lContainer,n);return i&&null!=Lf(hy(this._lContainer),n)?new vh(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function CS(t){return t[8]}function hy(t){return t[8]||(t[8]=[])}function DS(t,e){let n;const i=e[t.index];if(yr(i))n=i;else{let r;if(8&t.type)r=ci(i);else{const s=e[11];r=s.createComment("");const o=Ki(t,e);Wa(s,Hf(s,o),r,function Zk(t,e){return t.nextSibling(e)}(s,o),!1)}e[t.index]=n=vC(i,e,r,t),ep(e,n)}return new ES(n,t,e)}class dy{constructor(e){this.queryList=e,this.matches=null}clone(){return new dy(this.queryList)}setDirty(){this.queryList.setDirty()}}class fy{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const i=null!==e.contentQueries?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){const o=n.getByIndex(s);r.push(this.queries[o.indexInDeclarationView].clone())}return new fy(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==RS(e,n).matches&&this.queries[n].setDirty()}}class SS{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}}class py{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){const r=null!==n?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,null!==n?n.push(s):n=[s])}return null!==n?new py(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class gy{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new gy(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let i=e.parent;for(;null!==i&&8&i.type&&i.index!==n;)i=i.parent;return n===(null!==i?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){const s=i[r];this.matchTNodeWithReadOption(e,n,sU(n,s)),this.matchTNodeWithReadOption(e,n,uc(n,e,s,!1,!1))}else i===fo?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,uc(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(null!==i){const r=this.metadata.read;if(null!==r)if(r===wi||r===Br||r===fo&&4&n.type)this.addMatch(n.index,-2);else{const s=uc(n,e,r,!1,!1);null!==s&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function sU(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function aU(t,e,n,i){return-1===n?function oU(t,e){return 11&t.type?gc(t,e):4&t.type?gp(t,e):null}(e,t):-2===n?function lU(t,e,n){return n===wi?gc(e,t):n===fo?gp(e,t):n===Br?DS(e,t):void 0}(t,e,i):xr(t,t[1],n,e)}function TS(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const s=t.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:aU(e,s[c],o[l+1],n.metadata.read))}r.matches=a}return r.matches}function my(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=TS(t,e,r,n);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)i.push(o[a/2]);else{const c=s[a+1],f=e[-l];for(let g=10;g<f.length;g++){const v=f[g];v[17]===v[3]&&my(v[1],v,c,i)}if(null!==f[9]){const g=f[9];for(let v=0;v<g.length;v++){const _=g[v];my(_[1],_,c,i)}}}}}return i}function mp(t){const e=_e(),n=pn(),i=Ef();$u(i+1);const r=RS(n,i);if(t.dirty&&function fv(t){return 4==(4&t[2])}(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?my(n,e,i,[]):TS(n,e,r,i);t.reset(s,HN),t.notifyOnChanges()}return!0}return!1}function vy(t,e,n){const i=pn();i.firstCreatePass&&(function MS(t,e,n){null===t.queries&&(t.queries=new py),t.queries.track(new gy(e,n))}(i,new SS(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),function IS(t,e,n){const i=new uy(4==(4&n));hC(t,e,i,i.destroy),null===e[19]&&(e[19]=new fy),e[19].queries.push(new dy(i))}(i,_e(),e)}function RS(t,e){return t.queries.getByIndex(e)}function yp(...t){}const bp=new C("Application Initializer");let wp=(()=>{class t{constructor(n){this.appInits=n,this.resolve=yp,this.reject=yp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r})}runInitializers(){if(this.initialized)return;const n=[],i=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const s=this.appInits[r]();if(ap(s))n.push(s);else if(jC(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{i()}).catch(r=>{this.reject(r)}),0===n.length&&i(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(bt(bp,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Mh=new C("AppId",{providedIn:"root",factory:function ZS(){return`${xy()}${xy()}${xy()}`}});function xy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const QS=new C("Platform Initializer"),JS=new C("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eT=new C("appBootstrapListener");let RU=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const po=new C("LocaleId",{providedIn:"root",factory:()=>fn(po,Dt.Optional|Dt.SkipSelf)||function PU(){return typeof $localize<"u"&&$localize.locale||Pc}()});class kU{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let tT=(()=>{class t{compileModuleSync(n){return new ay(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const i=this.compileModuleSync(n),s=co(Yi(n).declarations).reduce((o,a)=>{const l=Dn(a);return l&&o.push(new _h(l)),o},[]);return new kU(i,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const LU=(()=>Promise.resolve(0))();function Ey(t){typeof Zone>"u"?LU.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Rn{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zn(!1),this.onMicrotaskEmpty=new zn(!1),this.onStable=new zn(!1),this.onError=new zn(!1),typeof Zone>"u")throw new Ee(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function BU(){let t=Mn.requestAnimationFrame,e=Mn.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function HU(t){const e=()=>{!function jU(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Dy(t),t.isCheckStableRunning=!0,Cy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Dy(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return rT(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),sT(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return rT(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),sT(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,Dy(t),Cy(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Rn.isInAngularZone())throw new Ee(909,!1)}static assertNotInAngularZone(){if(Rn.isInAngularZone())throw new Ee(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,UU,yp,yp);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}}const UU={};function Cy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Dy(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function rT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sT(t){t._nesting--,Cy(t)}class VU{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zn,this.onMicrotaskEmpty=new zn,this.onStable=new zn,this.onError=new zn}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}}const oT=new C(""),xp=new C("");let Ay,Sy=(()=>{class t{constructor(n,i,r){this._ngZone=n,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ay||(function GU(t){Ay=t}(r),r.addToWindow(i)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Rn.assertNotInAngularZone(),Ey(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ey(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>!i.updateCb||!i.updateCb(n)||(clearTimeout(i.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,i,r){let s=-1;i&&i>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},i)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:r})}whenStable(n,i,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,i,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,i,r){return[]}}return t.\u0275fac=function(n){return new(n||t)(bt(Rn),bt(Ty),bt(xp))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),Ty=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,i){this._applications.set(n,i)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,i=!0){return Ay?.findTestabilityInTree(this,n,i)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),sa=null;const aT=new C("AllowMultipleToken"),Iy=new C("PlatformDestroyListeners");class lT{constructor(e,n){this.name=e,this.token=n}}function uT(t,e,n=[]){const i=`Platform: ${e}`,r=new C(i);return(s=[])=>{let o=My();if(!o||o.injector.get(aT,!1)){const a=[...n,...s,{provide:r,useValue:!0}];t?t(a):function WU(t){if(sa&&!sa.get(aT,!1))throw new Ee(400,!1);sa=t;const e=t.get(dT);(function cT(t){const e=t.get(QS,null);e&&e.forEach(n=>n())})(t)}(function hT(t=[],e){return ks.create({name:e,providers:[{provide:y_,useValue:"platform"},{provide:Iy,useValue:new Set([()=>sa=null])},...t]})}(a,i))}return function YU(t){const e=My();if(!e)throw new Ee(401,!1);return e}()}}function My(){return sa?.get(dT)??null}let dT=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,i){const r=function pT(t,e){let n;return n="noop"===t?new VU:("zone.js"===t?void 0:t)||new Rn(e),n}(i?.ngZone,function fT(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(i)),s=[{provide:Rn,useValue:r}];return r.run(()=>{const o=ks.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),l=a.injector.get(vc,null);if(!l)throw new Ee(402,!1);return r.runOutsideAngular(()=>{const c=r.onError.subscribe({next:f=>{l.handleError(f)}});a.onDestroy(()=>{Cp(this._modules,a),c.unsubscribe()})}),function gT(t,e,n){try{const i=n();return ap(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(l,r,()=>{const c=a.injector.get(wp);return c.runInitializers(),c.donePromise.then(()=>(function BD(t){Wi(t,"Expected localeId to be defined"),"string"==typeof t&&(LD=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(po,Pc)||Pc),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,i=[]){const r=mT({},i);return function zU(t,e,n){const i=new ay(n);return Promise.resolve(i)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,r))}_moduleDoBootstrap(n){const i=n.injector.get(Ep);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>i.bootstrap(r));else{if(!n.instance.ngDoBootstrap)throw new Ee(403,!1);n.instance.ngDoBootstrap(i)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ee(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());const n=this._injector.get(Iy,null);n&&(n.forEach(i=>i()),n.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(bt(ks))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function mT(t,e){return Array.isArray(e)?e.reduce(mT,t):{...t,...e}}let Ep=(()=>{class t{constructor(n,i,r){this._zone=n,this._injector=i,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new U(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new U(a=>{let l;this._zone.runOutsideAngular(()=>{l=this._zone.onStable.subscribe(()=>{Rn.assertNotInAngularZone(),Ey(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Rn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{l.unsubscribe(),c.unsubscribe()}});this.isStable=gt(s,o.pipe(rt()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){const r=n instanceof jE;if(!this._injector.get(wp).done)throw!r&&function Go(t){const e=Dn(t)||_i(t)||Ci(t);return null!==e&&e.standalone}(n),new Ee(405,false);let o;o=r?n:this._injector.get(gh).resolveComponentFactory(n),this.componentTypes.push(o.componentType);const a=function $U(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Oc),c=o.create(ks.NULL,[],i||o.selector,a),f=c.location.nativeElement,g=c.injector.get(oT,null);return g?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Cp(this.components,c),g?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new Ee(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){const i=n;Cp(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);const i=this._injector.get(eT,[]);i.push(...this._bootstrapListeners),i.forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Cp(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Ee(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(bt(Rn),bt(lo),bt(vc))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Cp(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let Ry=(()=>{class t{}return t.__NG_ELEMENT_ID__=KU,t})();function KU(t){return function ZU(t,e,n){if(Ba(t)&&!n){const i=Zi(t.index,e);return new vh(i,i)}return 47&t.type?new vh(e[16],e):null}(ui(),_e(),16==(16&t))}class wT{constructor(){}supports(e){return yh(e)}create(e){return new i3(e)}}const n3=(t,e)=>e;class i3{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||n3}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){const o=!i||n&&n.currentIndex<ET(i,r,s)?n:i,a=ET(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,null==o.previousIndex)r++;else{s||(s=[]);const c=a-r,f=l-r;if(c!=f){for(let v=0;v<c;v++){const _=v<s.length?s[v]:s[v]=0,y=_+v;f<=y&&y<c&&(s[v]=_+1)}s[o.previousIndex]=f-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!yh(e))throw new Ee(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,s,o,n=this._itHead,i=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)):(n=this._mismatch(n,s,o,a),i=!0),n=n._next}else r=0,function EL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[qa()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(e,a=>{o=this._trackByFn(r,a),null!==n&&Object.is(n.trackById,o)?(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,o,r),i=!0),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(i,r))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new r3(n,i),s,r),e}_verifyReinsertion(e,n,i,r){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(i,null);return null!==s?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,s=e._nextRemoved;return null===r?this._removalsHead=s:r._nextRemoved=s,null===s?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){const r=null===n?this._itHead:n._next;return e._next=r,e._prev=n,null===r?this._itTail=e:r._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new xT),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,i=e._next;return null===n?this._itHead=i:n._next=i,null===i?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new xT),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class r3{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class s3{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;null!==i;i=i._nextDup)if((null===n||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){const n=e._prevDup,i=e._nextDup;return null===n?this._head=i:n._nextDup=i,null===i?this._tail=n:i._prevDup=n,null===this._head}}class xT{constructor(){this.map=new Map}put(e){const n=e.trackById;let i=this.map.get(n);i||(i=new s3,this.map.set(n,i)),i.add(e)}get(e,n){const r=this.map.get(e);return r?r.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ET(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}function DT(){return new Tp([new wT])}let Tp=(()=>{class t{constructor(n){this.factories=n}static create(n,i){if(null!=i){const r=i.factories.slice();n=n.concat(r)}return new t(n)}static extend(n){return{provide:t,useFactory:i=>t.create(n,i||DT()),deps:[[t,new oh,new sh]]}}find(n){const i=this.factories.find(r=>r.supports(n));if(null!=i)return i;throw new Ee(901,!1)}}return t.\u0275prov=mt({token:t,providedIn:"root",factory:DT}),t})();const u3=uT(null,"core",[]);let h3=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(bt(Ep))},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({}),t})(),Ly=null;function oa(){return Ly}class p3{}const er=new C("DocumentToken");let By=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return function g3(){return bt(TT)}()},providedIn:"platform"}),t})();const m3=new C("Location Initialized");let TT=(()=>{class t extends By{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return oa().getBaseHref(this._doc)}onPopState(n){const i=oa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",n,!1),()=>i.removeEventListener("popstate",n)}onHashChange(n){const i=oa().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",n,!1),()=>i.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,i,r){AT()?this._history.pushState(n,i,r):this.location.hash=r}replaceState(n,i,r){AT()?this._history.replaceState(n,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(bt(er))},t.\u0275prov=mt({token:t,factory:function(){return function v3(){return new TT(bt(er))}()},providedIn:"platform"}),t})();function AT(){return!!window.history.pushState}function Uy(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function IT(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function mo(t){return t&&"?"!==t[0]?"?"+t:t}let tl=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return fn(RT)},providedIn:"root"}),t})();const MT=new C("appBaseHref");let RT=(()=>{class t extends tl{constructor(n,i){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??fn(er).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Uy(this._baseHref,n)}path(n=!1){const i=this._platformLocation.pathname+mo(this._platformLocation.search),r=this._platformLocation.hash;return r&&n?`${i}${r}`:i}pushState(n,i,r,s){const o=this.prepareExternalUrl(r+mo(s));this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){const o=this.prepareExternalUrl(r+mo(s));this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(bt(By),bt(MT,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_3=(()=>{class t extends tl{constructor(n,i){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(n){const i=Uy(this._baseHref,n);return i.length>0?"#"+i:i}pushState(n,i,r,s){let o=this.prepareExternalUrl(r+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,i,o)}replaceState(n,i,r,s){let o=this.prepareExternalUrl(r+mo(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,i,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(bt(By),bt(MT,8))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),jy=(()=>{class t{constructor(n){this._subject=new zn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const i=this._locationStrategy.getBaseHref();this._basePath=function w3(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(IT(PT(i))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,i=""){return this.path()==this.normalize(n+mo(i))}normalize(n){return t.stripTrailingSlash(function b3(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._basePath,PT(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,i="",r=null){this._locationStrategy.pushState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(i)),r)}replaceState(n,i="",r=null){this._locationStrategy.replaceState(r,"",n,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+mo(i)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)})),()=>{const i=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(i,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",i){this._urlChangeListeners.forEach(r=>r(n,i))}subscribe(n,i,r){return this._subject.subscribe({next:n,error:i,complete:r})}}return t.normalizeQueryParams=mo,t.joinWithSlash=Uy,t.stripTrailingSlash=IT,t.\u0275fac=function(n){return new(n||t)(bt(tl))},t.\u0275prov=mt({token:t,factory:function(){return function y3(){return new jy(bt(tl))}()},providedIn:"root"}),t})();function PT(t){return t.replace(/\/index.html$/,"")}class aj{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let GT=(()=>{class t{constructor(n,i,r){this._viewContainer=n,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const i=this._viewContainer;n.forEachOperation((r,s,o)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new aj(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)i.remove(null===s?void 0:s);else if(null!==s){const a=i.get(s);i.move(a,o),zT(a,r)}});for(let r=0,s=i.length;r<s;r++){const a=i.get(r).context;a.index=r,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(r=>{zT(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(n,i){return!0}}return t.\u0275fac=function(n){return new(n||t)($e(Br),$e(fo),$e(Tp))},t.\u0275dir=Jn({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),t})();function zT(t,e){t.context.$implicit=e.item}let YT=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({}),t})();let Vj=(()=>{class t{}return t.\u0275prov=mt({token:t,providedIn:"root",factory:()=>new Gj(bt(er),window)}),t})();class Gj{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function zj(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=KT(this.window.history)||KT(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function KT(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class _H extends p3{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class nb extends _H{static makeCurrent(){!function f3(t){Ly||(Ly=t)}(new nb)}onAndCancel(e,n,i){return e.addEventListener(n,i,!1),()=>{e.removeEventListener(n,i,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function yH(){return Nh=Nh||document.querySelector("base"),Nh?Nh.getAttribute("href"):null}();return null==n?null:function bH(t){Bp=Bp||document.createElement("a"),Bp.setAttribute("href",t);const e=Bp.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Nh=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function rj(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const i=n.indexOf("="),[r,s]=-1==i?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Bp,Nh=null;const n1=new C("TRANSITION_ID"),xH=[{provide:bp,useFactory:function wH(t,e,n){return()=>{n.get(wp).donePromise.then(()=>{const i=oa(),r=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[n1,er,ks],multi:!0}];let CH=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const Up=new C("EventManagerPlugins");let jp=(()=>{class t{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(r=>r.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,i,r){return this._findPluginFor(i).addEventListener(n,i,r)}addGlobalEventListener(n,i,r){return this._findPluginFor(i).addGlobalEventListener(n,i,r)}getZone(){return this._zone}_findPluginFor(n){const i=this._eventNameToPlugin.get(n);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const o=r[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(bt(Up),bt(Rn))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class i1{constructor(e){this._doc=e}addGlobalEventListener(e,n,i){const r=oa().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${n}`);return this.addEventListener(r,n,i)}}let r1=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const i=new Set;n.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),Fh=(()=>{class t extends r1{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,i,r){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,r.push(i.appendChild(o))})}addHost(n){const i=[];this._addStylesToHost(this._stylesSet,n,i),this._hostNodes.set(n,i)}removeHost(n){const i=this._hostNodes.get(n);i&&i.forEach(s1),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(n,r,i)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(s1))}}return t.\u0275fac=function(n){return new(n||t)(bt(er))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function s1(t){oa().remove(t)}const ib={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},rb=/%COMP%/g;function sb(t,e){return e.flat(100).map(n=>n.replace(rb,t))}function l1(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ob=(()=>{class t{constructor(n,i,r){this.eventManager=n,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ab(n)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;switch(i.encapsulation){case Pr.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new MH(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(n),r}case 1:case Pr.ShadowDom:return new RH(this.eventManager,this.sharedStylesHost,n,i);default:if(!this.rendererByCompId.has(i.id)){const r=sb(i.id,i.styles);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(bt(jp),bt(Fh),bt(Mh))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();class ab{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(ib[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(u1(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(u1(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;const s=ib[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){const r=ib[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(rr.DashCase|rr.Important)?e.style.setProperty(n,i,r&rr.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&rr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e[n]=i}setValue(e,n){e.nodeValue=n}listen(e,n,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,l1(i)):this.eventManager.addEventListener(e,n,l1(i))}}function u1(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class MH extends ab{constructor(e,n,i,r){super(e),this.component=i;const s=sb(r+"-"+i.id,i.styles);n.addStyles(s),this.contentAttr=function TH(t){return"_ngcontent-%COMP%".replace(rb,t)}(r+"-"+i.id),this.hostAttr=function AH(t){return"_nghost-%COMP%".replace(rb,t)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}}class RH extends ab{constructor(e,n,i,r){super(e),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=sb(r.id,r.styles);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let PH=(()=>{class t extends i1{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,r){return n.addEventListener(i,r,!1),()=>this.removeEventListener(n,i,r)}removeEventListener(n,i,r){return n.removeEventListener(i,r)}}return t.\u0275fac=function(n){return new(n||t)(bt(er))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const h1=["alt","control","meta","shift"],OH={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kH={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let NH=(()=>{class t extends i1{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,i,r){const s=t.parseEventName(i),o=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>oa().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const i=n.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=t._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),h1.forEach(c=>{const f=i.indexOf(c);f>-1&&(i.splice(f,1),o+=c+".")}),o+=s,0!=i.length||0===s.length)return null;const l={};return l.domEventName=r,l.fullKey=o,l}static matchEventFullKeyCode(n,i){let r=OH[n.key]||n.key,s="";return i.indexOf("code.")>-1&&(r=n.code,s="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),h1.forEach(o=>{o!==r&&(0,kH[o])(n)&&(s+=o+".")}),s+=r,s===i)}static eventCallback(n,i,r){return s=>{t.matchEventFullKeyCode(s,n)&&r.runGuarded(()=>i(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(bt(er))},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();const f1=[{provide:JS,useValue:"browser"},{provide:QS,useValue:function FH(){nb.makeCurrent()},multi:!0},{provide:er,useFactory:function BH(){return function sN(t){u_=t}(document),document},deps:[]}],UH=uT(u3,"browser",f1),p1=new C(""),g1=[{provide:xp,useClass:class EH{addToWindow(e){Mn.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},Mn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Mn.getAllAngularRootElements=()=>e.getAllRootElements(),Mn.frameworkStabilizers||(Mn.frameworkStabilizers=[]),Mn.frameworkStabilizers.push(i=>{const r=Mn.getAllAngularTestabilities();let s=r.length,o=!1;const a=function(l){o=o||l,s--,0==s&&i(o)};r.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,i){return null==n?null:e.getTestability(n)??(i?oa().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:oT,useClass:Sy,deps:[Rn,Ty,xp]},{provide:Sy,useClass:Sy,deps:[Rn,Ty,xp]}],m1=[{provide:y_,useValue:"root"},{provide:vc,useFactory:function LH(){return new vc},deps:[]},{provide:Up,useClass:PH,multi:!0,deps:[er,Rn,JS]},{provide:Up,useClass:NH,multi:!0,deps:[er]},{provide:ob,useClass:ob,deps:[jp,Fh,Mh]},{provide:VE,useExisting:ob},{provide:r1,useExisting:Fh},{provide:Fh,useClass:Fh,deps:[er]},{provide:jp,useClass:jp,deps:[Up,Rn]},{provide:class $j{},useClass:CH,deps:[]},[]];let jH=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Mh,useValue:n.appId},{provide:n1,useExisting:Mh},xH]}}}return t.\u0275fac=function(n){return new(n||t)(bt(p1,12))},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({providers:[...m1,...g1],imports:[YT,h3]}),t})(),v1=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(bt(er))},t.\u0275prov=mt({token:t,factory:function(n){let i=null;return i=n?new n:function VH(){return new v1(bt(er))}(),i},providedIn:"root"}),t})();function It(...t){return we(t,Ct(t))}typeof window<"u"&&window;class ds extends j{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}const Hp=ft(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:KH}=Array,{getPrototypeOf:ZH,prototype:QH,keys:JH}=Object;const{isArray:nV}=Array;function b1(t){return ie(e=>function iV(t,e){return nV(e)?t(...e):t(e)}(t,e))}function ub(...t){const e=Ct(t),n=function Et(t){return ke(st(t))?t.pop():void 0}(t),{args:i,keys:r}=function eV(t){if(1===t.length){const e=t[0];if(KH(e))return{args:e,keys:null};if(function tV(t){return t&&"object"==typeof t&&ZH(t)===QH}(e)){const n=JH(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}(t);if(0===i.length)return we([],e);const s=new U(function sV(t,e,n=nn){return i=>{w1(e,()=>{const{length:r}=t,s=new Array(r);let o=r,a=r;for(let l=0;l<r;l++)w1(e,()=>{const c=we(t[l],e);let f=!1;c.subscribe(te(i,g=>{s[l]=g,f||(f=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}(i,e,r?o=>function rV(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}(r,o):nn));return n?s.pipe(b1(n)):s}function w1(t,e,n){t?B(n,t,e):e()}function hb(...t){return function oV(){return oe(1)}()(we(t,Ct(t)))}function x1(t){return new U(e=>{Ei(t()).subscribe(e)})}function Lh(t,e){const n=ke(t)?t:()=>t,i=r=>r.error(n());return new U(e?r=>e.schedule(i,0,r):i)}function db(){return ne((t,e)=>{let n=null;t._refCount++;const i=te(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}class E1 extends U{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Q(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ie;const n=this.getSubject();e.add(this.source.subscribe(te(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ie.EMPTY)}return e}refCount(){return db()(this)}}function js(t,e){return ne((n,i)=>{let r=null,s=0,o=!1;const a=()=>o&&!r&&i.complete();n.subscribe(te(i,l=>{r?.unsubscribe();let c=0;const f=s++;Ei(t(l,f)).subscribe(r=te(i,g=>i.next(e?e(l,g,f,c++):g),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function _o(t){return t<=0?()=>Z:ne((e,n)=>{let i=0;e.subscribe(te(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function C1(...t){const e=Ct(t);return ne((n,i)=>{(e?hb(t,n,e):hb(t,n)).subscribe(i)})}function ar(t,e){return ne((n,i)=>{let r=0;n.subscribe(te(i,s=>t.call(e,s,r++)&&i.next(s)))})}function Vp(t){return ne((e,n)=>{let i=!1;e.subscribe(te(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function D1(t=aV){return ne((e,n)=>{let i=!1;e.subscribe(te(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function aV(){return new Hp}function la(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ar((r,s)=>t(r,s,i)):nn,_o(1),n?Vp(e):D1(()=>new Hp))}function nl(t,e){return ke(e)?G(t,e,1):G(t,1)}function Ui(t,e,n){const i=ke(t)||e||n?{next:t,error:e,complete:n}:t;return i?ne((r,s)=>{var o;null===(o=i.subscribe)||void 0===o||o.call(i);let a=!0;r.subscribe(te(s,l=>{var c;null===(c=i.next)||void 0===c||c.call(i,l),s.next(l)},()=>{var l;a=!1,null===(l=i.complete)||void 0===l||l.call(i),s.complete()},l=>{var c;a=!1,null===(c=i.error)||void 0===c||c.call(i,l),s.error(l)},()=>{var l,c;a&&(null===(l=i.unsubscribe)||void 0===l||l.call(i)),null===(c=i.finalize)||void 0===c||c.call(i)}))}):nn}function ca(t){return ne((e,n)=>{let s,i=null,r=!1;i=e.subscribe(te(n,void 0,void 0,o=>{s=Ei(t(o,ca(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function S1(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(te(o,f=>{const g=c++;l=a?t(l,f,g):(a=!0,f),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function T1(t,e){return ne(S1(t,e,arguments.length>=2,!0))}function Gp(t){return t<=0?()=>Z:ne((e,n)=>{let i=[];e.subscribe(te(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(const r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function A1(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ar((r,s)=>t(r,s,i)):nn,Gp(1),n?Vp(e):D1(()=>new Hp))}function fb(t){return ne((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}const sn="primary",Bh=Symbol("RouteTitle");class uV{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Fc(t){return new uV(t)}function hV(t,e,n){const i=n.path.split("/");if(i.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Hs(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!I1(t[r],e[r]))return!1;return!0}function I1(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}return t===e}function M1(t){return Array.prototype.concat.apply([],t)}function R1(t){return t.length>0?t[t.length-1]:null}function Ti(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function ua(t){return jC(t)?t:ap(t)?we(Promise.resolve(t)):It(t)}const zp=!1,fV={exact:function k1(t,e,n){if(!rl(t.segments,e.segments)||!$p(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!t.children[i]||!k1(t.children[i],e.children[i],n))return!1;return!0},subset:N1},P1={exact:function pV(t,e){return Hs(t,e)},subset:function gV(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>I1(t[n],e[n]))},ignored:()=>!0};function O1(t,e,n){return fV[n.paths](t.root,e.root,n.matrixParams)&&P1[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function N1(t,e,n){return F1(t,e,e.segments,n)}function F1(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!(!rl(r,n)||e.hasChildren()||!$p(r,n,i))}if(t.segments.length===n.length){if(!rl(t.segments,n)||!$p(t.segments,n,i))return!1;for(const r in e.children)if(!t.children[r]||!N1(t.children[r],e.children[r],i))return!1;return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(rl(t.segments,r)&&$p(t.segments,r,i)&&t.children[sn])&&F1(t.children[sn],e,s,i)}}function $p(t,e,n){return e.every((i,r)=>P1[n](t[r].parameters,i.parameters))}class il{constructor(e=new on([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fc(this.queryParams)),this._queryParamMap}toString(){return _V.serialize(this)}}class on{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Ti(n,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wp(this)}}class Uh{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Fc(this.parameters)),this._parameterMap}toString(){return U1(this)}}function rl(t,e){return t.length===e.length&&t.every((n,i)=>n.path===e[i].path)}let jh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return new pb},providedIn:"root"}),t})();class pb{parse(e){const n=new TV(e);return new il(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Hh(e.root,!0)}`,i=function wV(t){const e=Object.keys(t).map(n=>{const i=t[n];return Array.isArray(i)?i.map(r=>`${Xp(n)}=${Xp(r)}`).join("&"):`${Xp(n)}=${Xp(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${i}${"string"==typeof e.fragment?`#${function yV(t){return encodeURI(t)}(e.fragment)}`:""}`}}const _V=new pb;function Wp(t){return t.segments.map(e=>U1(e)).join("/")}function Hh(t,e){if(!t.hasChildren())return Wp(t);if(e){const n=t.children[sn]?Hh(t.children[sn],!1):"",i=[];return Ti(t.children,(r,s)=>{s!==sn&&i.push(`${s}:${Hh(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}{const n=function vV(t,e){let n=[];return Ti(t.children,(i,r)=>{r===sn&&(n=n.concat(e(i,r)))}),Ti(t.children,(i,r)=>{r!==sn&&(n=n.concat(e(i,r)))}),n}(t,(i,r)=>r===sn?[Hh(t.children[sn],!1)]:[`${r}:${Hh(i,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[sn]?`${Wp(t)}/${n[0]}`:`${Wp(t)}/(${n.join("//")})`}}function L1(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xp(t){return L1(t).replace(/%3B/gi,";")}function gb(t){return L1(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yp(t){return decodeURIComponent(t)}function B1(t){return Yp(t.replace(/\+/g,"%20"))}function U1(t){return`${gb(t.path)}${function bV(t){return Object.keys(t).map(e=>`;${gb(e)}=${gb(t[e])}`).join("")}(t.parameters)}`}const xV=/^[^\/()?;=#]+/;function qp(t){const e=t.match(xV);return e?e[0]:""}const EV=/^[^=?&#]+/,DV=/^[^&#]+/;class TV{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[sn]=new on(e,n)),i}parseSegment(){const e=qp(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Ee(4009,zp);return this.capture(e),new Uh(Yp(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=qp(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const r=qp(this.remaining);r&&(i=r,this.capture(i))}e[Yp(n)]=Yp(i)}parseQueryParam(e){const n=function CV(t){const e=t.match(EV);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){const o=function SV(t){const e=t.match(DV);return e?e[0]:""}(this.remaining);o&&(i=o,this.capture(i))}const r=B1(n),s=B1(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=qp(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Ee(4010,zp);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=sn);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[sn]:new on([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Ee(4011,zp)}}function mb(t){return t.segments.length>0?new on([],{[sn]:t}):t}function Kp(t){const e={};for(const i of Object.keys(t.children)){const s=Kp(t.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function AV(t){if(1===t.numberOfChildren&&t.children[sn]){const e=t.children[sn];return new on(t.segments.concat(e.segments),e.children)}return t}(new on(t.segments,e))}function sl(t){return t instanceof il}function RV(t,e,n,i,r){if(0===n.length)return Lc(e.root,e.root,e.root,i,r);const s=function V1(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new H1(!0,0,t);let e=0,n=!1;const i=t.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Ti(s.outlets,(l,c)=>{a[c]="string"==typeof l?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,s]},[]);return new H1(n,e,i)}(n);return s.toRoot()?Lc(e.root,e.root,new on([],{}),i,r):function o(l){const c=function OV(t,e,n,i){if(t.isAbsolute)return new Bc(e.root,!0,0);if(-1===i)return new Bc(n,n===e.root,0);return function G1(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ee(4005,!1);r=i.segments.length}return new Bc(i,!1,r-s)}(n,i+(Vh(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,l),f=c.processChildren?zh(c.segmentGroup,c.index,s.commands):_b(c.segmentGroup,c.index,s.commands);return Lc(e.root,c.segmentGroup,f,i,r)}(t.snapshot?._lastPathIndex)}function Vh(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Gh(t){return"object"==typeof t&&null!=t&&t.outlets}function Lc(t,e,n,i,r){let o,s={};i&&Ti(i,(l,c)=>{s[c]=Array.isArray(l)?l.map(f=>`${f}`):`${l}`}),o=t===e?n:j1(t,e,n);const a=mb(Kp(o));return new il(a,s,r)}function j1(t,e,n){const i={};return Ti(t.children,(r,s)=>{i[s]=r===e?n:j1(r,e,n)}),new on(t.segments,i)}class H1{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Vh(i[0]))throw new Ee(4003,!1);const r=i.find(Gh);if(r&&r!==R1(i))throw new Ee(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Bc{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}}function _b(t,e,n){if(t||(t=new on([],{})),0===t.segments.length&&t.hasChildren())return zh(t,e,n);const i=function NV(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const o=t.segments[r],a=n[i];if(Gh(a))break;const l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!$1(l,c,o))return s;i+=2}else{if(!$1(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const s=new on(t.segments.slice(0,i.pathIndex),{});return s.children[sn]=new on(t.segments.slice(i.pathIndex),t.children),zh(s,0,r)}return i.match&&0===r.length?new on(t.segments,{}):i.match&&!t.hasChildren()?yb(t,e,n):i.match?zh(t,0,r):yb(t,e,n)}function zh(t,e,n){if(0===n.length)return new on(t.segments,{});{const i=function kV(t){return Gh(t[0])?t[0].outlets:{[sn]:t}}(n),r={};return Ti(i,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[o]=_b(t.children[o],e,s))}),Ti(t.children,(s,o)=>{void 0===i[o]&&(r[o]=s)}),new on(t.segments,r)}}function yb(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(Gh(s)){const l=FV(s.outlets);return new on(i,l)}if(0===r&&Vh(n[0])){i.push(new Uh(t.segments[e].path,z1(n[0]))),r++;continue}const o=Gh(s)?s.outlets[sn]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Vh(a)?(i.push(new Uh(o,z1(a))),r+=2):(i.push(new Uh(o,{})),r++)}return new on(i,{})}function FV(t){const e={};return Ti(t,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[i]=yb(new on([],{}),0,n))}),e}function z1(t){const e={};return Ti(t,(n,i)=>e[i]=`${n}`),e}function $1(t,e,n){return t==n.path&&Hs(e,n.parameters)}class yo{constructor(e,n){this.id=e,this.url=n}}class bb extends yo{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ol extends yo{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Zp extends yo{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class W1 extends yo{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class LV extends yo{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class BV extends yo{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class UV extends yo{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class jV extends yo{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class HV extends yo{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class VV{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class GV{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zV{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $V{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class WV{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class XV{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class X1{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let qV=(()=>{class t{createUrlTree(n,i,r,s,o,a){return RV(n||i.root,r,s,o,a)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})(),KV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(e){return qV.\u0275fac(e)},providedIn:"root"}),t})();class Y1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=wb(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){const n=wb(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=xb(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return xb(e,this._root).map(n=>n.value)}}function wb(t,e){if(t===e.value)return e;for(const n of e.children){const i=wb(t,n);if(i)return i}return null}function xb(t,e){if(t===e.value)return[e];for(const n of e.children){const i=xb(t,n);if(i.length)return i.unshift(e),i}return[]}class bo{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Uc(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class q1 extends Y1{constructor(e,n){super(e),this.snapshot=n,Eb(this,e)}toString(){return this.snapshot.toString()}}function K1(t,e){const n=function ZV(t,e){const o=new Qp([],{},{},"",{},sn,e,null,t.root,-1,{});return new Q1("",new bo(o,[]))}(t,e),i=new ds([new Uh("",{})]),r=new ds({}),s=new ds({}),o=new ds({}),a=new ds(""),l=new jc(i,r,o,a,s,sn,e,n.root);return l.snapshot=n.root,new q1(new bo(l,[]),n)}class jc{constructor(e,n,i,r,s,o,a,l){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.title=this.data?.pipe(ie(c=>c[Bh]))??It(void 0),this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(e=>Fc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(e=>Fc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Z1(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const r=n[i],s=n[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function QV(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Qp{constructor(e,n,i,r,s,o,a,l,c,f,g){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=c,this._lastPathIndex=f,this._resolve=g}get title(){return this.data?.[Bh]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q1 extends Y1{constructor(e,n){super(n),this.url=e,Eb(this,n)}toString(){return J1(this._root)}}function Eb(t,e){e.value._routerState=t,e.children.forEach(n=>Eb(t,n))}function J1(t){const e=t.children.length>0?` { ${t.children.map(J1).join(", ")} } `:"";return`${t.value}${e}`}function Cb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hs(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Hs(e.params,n.params)||t.params.next(n.params),function dV(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hs(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Hs(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Db(t,e){const n=Hs(t.params,e.params)&&function mV(t,e){return rl(t,e)&&t.every((n,i)=>Hs(n.parameters,e[i].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Db(t.parent,e.parent))}function $h(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function e5(t,e,n){return e.children.map(i=>{for(const r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return $h(t,i,r);return $h(t,i)})}(t,e,n);return new bo(i,r)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>$h(t,a)),o}}const i=function t5(t){return new jc(new ds(t.url),new ds(t.params),new ds(t.queryParams),new ds(t.fragment),new ds(t.data),t.outlet,t.component,t)}(e.value),r=e.children.map(s=>$h(t,s));return new bo(i,r)}}const Sb="ngNavigationCancelingError";function eA(t,e){const{redirectTo:n,navigationBehaviorOptions:i}=sl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tA(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function tA(t,e,n){const i=new Error("NavigationCancelingError: "+(t||""));return i[Sb]=!0,i.cancellationCode=e,n&&(i.url=n),i}function nA(t){return iA(t)&&sl(t.url)}function iA(t){return t&&t[Sb]}class n5{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Wh,this.attachRef=null}}let Wh=(()=>{class t{constructor(){this.contexts=new Map}onChildOutletCreated(n,i){const r=this.getOrCreateContext(n);r.outlet=i,this.contexts.set(n,r)}onChildOutletDestroyed(n){const i=this.getContext(n);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let i=this.getContext(n);return i||(i=new n5,this.contexts.set(n,i)),i}getContext(n){return this.contexts.get(n)||null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Jp=!1;let rA=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=sn,this.activateEvents=new zn,this.deactivateEvents=new zn,this.attachEvents=new zn,this.detachEvents=new zn,this.parentContexts=fn(Wh),this.location=fn(Br),this.changeDetector=fn(Ry),this.environmentInjector=fn(lo)}ngOnChanges(n){if(n.name){const{firstChange:i,previousValue:r}=n.name;if(i)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ee(4012,Jp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ee(4012,Jp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ee(4012,Jp);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,i){this.activated=n,this._activatedRoute=i,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,i){if(this.isActivated)throw new Ee(4013,Jp);this._activatedRoute=n;const r=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new i5(n,a,r.injector);if(i&&function r5(t){return!!t.resolveComponentFactory}(i)){const c=i.resolveComponentFactory(o);this.activated=r.createComponent(c,r.length,l)}else this.activated=r.createComponent(o,{index:r.length,injector:l,environmentInjector:i??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=Jn({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rs]}),t})();class i5{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===jc?this.route:e===Wh?this.childContexts:this.parent.get(e,n)}}let Tb=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Jr({type:t,selectors:[["ng-component"]],standalone:!0,features:[hS],decls:1,vars:0,template:function(n,i){1&n&&os(0,"router-outlet")},dependencies:[rA],encapsulation:2}),t})();function sA(t,e){return t.providers&&!t._injector&&(t._injector=pp(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Ib(t){const e=t.children&&t.children.map(Ib),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==sn&&(n.component=Tb),n}function Hr(t){return t.outlet||sn}function oA(t,e){const n=t.filter(i=>Hr(i)===e);return n.push(...t.filter(i=>Hr(i)!==e)),n}function Xh(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class c5{constructor(e,n,i,r){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r}activate(e){const n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Cb(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){const r=Uc(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Ti(r,(s,o)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(r===s)if(r.component){const o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){const o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Uc(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,n,i){const r=Uc(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new XV(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $V(e.value.snapshot))}activateRoutes(e,n,i){const r=e.value,s=n?n.value:null;if(Cb(r),r===s)if(r.component){const o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){const o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Cb(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=Xh(r.snapshot),l=a?.get(gh)??null;o.attachRef=null,o.route=r,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}}class aA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class eg{constructor(e,n){this.component=e,this.route=n}}function u5(t,e,n){const i=t._root;return Yh(i,e?e._root:null,n,[i.value])}function Hc(t,e){const n=Symbol(),i=e.get(t,n);return i===n?"function"!=typeof t||function Gm(t){return null!==Hl(t)}(t)?e.get(t):t:i}function Yh(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Uc(e);return t.children.forEach(o=>{(function d5(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function f5(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!rl(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rl(t.url,e.url)||!Hs(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Db(t,e)||!Hs(t.queryParams,e.queryParams);default:return!Db(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new aA(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Yh(t,e,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new eg(a.outlet.component,o))}else o&&qh(e,a,r),r.canActivateChecks.push(new aA(i)),Yh(t,null,s.component?a?a.children:null:n,i,r)})(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Ti(s,(o,a)=>qh(o,n.getContext(a),r)),r}function qh(t,e,n){const i=Uc(t),r=t.value;Ti(i,(s,o)=>{qh(s,r.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new eg(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function Kh(t){return"function"==typeof t}function Mb(t){return t instanceof Hp||"EmptyError"===t?.name}const tg=Symbol("INITIAL_VALUE");function Vc(){return js(t=>ub(t.map(e=>e.pipe(_o(1),C1(tg)))).pipe(ie(e=>{for(const n of e)if(!0!==n){if(n===tg)return tg;if(!1===n||n instanceof il)return n}return!0}),ar(e=>e!==tg),_o(1)))}function lA(t){return function N(...t){return $(t)}(Ui(e=>{if(sl(e))throw eA(0,e)}),ie(e=>!0===e))}const Rb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cA(t,e,n,i,r){const s=Pb(t,e,n);return s.matched?function M5(t,e,n,i){const r=e.canMatch;return r&&0!==r.length?It(r.map(o=>{const a=Hc(o,t);return ua(function y5(t){return t&&Kh(t.canMatch)}(a)?a.canMatch(e,n):t.runInContext(()=>a(e,n)))})).pipe(Vc(),lA()):It(!0)}(i=sA(e,i),e,n).pipe(ie(o=>!0===o?s:{...Rb})):It(s)}function Pb(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...Rb}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(e.matcher||hV)(n,t,e);if(!r)return{...Rb};const s={};Ti(r.posParams,(a,l)=>{s[l]=a.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function ng(t,e,n,i){if(n.length>0&&function O5(t,e,n){return n.some(i=>ig(t,e,i)&&Hr(i)!==sn)}(t,n,i)){const s=new on(e,function P5(t,e,n,i){const r={};r[sn]=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Hr(s)!==sn){const o=new on([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,r[Hr(s)]=o}return r}(t,e,i,new on(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function k5(t,e,n){return n.some(i=>ig(t,e,i))}(t,n,i)){const s=new on(t.segments,function R5(t,e,n,i,r){const s={};for(const o of i)if(ig(t,n,o)&&!r[Hr(o)]){const a=new on([],{});a._sourceSegment=t,a._segmentIndexShift=e.length,s[Hr(o)]=a}return{...r,...s}}(t,e,n,i,t.children));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const r=new on(t.segments,t.children);return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:n}}function ig(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function uA(t,e,n,i){return!!(Hr(t)===i||i!==sn&&ig(e,n,t))&&("**"===t.path||Pb(e,t,n).matched)}function hA(t,e,n){return 0===e.length&&!t.children[n]}const rg=!1;class sg{constructor(e){this.segmentGroup=e||null}}class dA{constructor(e){this.urlTree=e}}function Zh(t){return Lh(new sg(t))}function fA(t){return Lh(new dA(t))}class B5{constructor(e,n,i,r,s){this.injector=e,this.configLoader=n,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0}apply(){const e=ng(this.urlTree.root,[],[],this.config).segmentGroup,n=new on(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,sn).pipe(ie(s=>this.createUrlTree(Kp(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ca(s=>{if(s instanceof dA)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof sg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,sn).pipe(ie(r=>this.createUrlTree(Kp(r),e.queryParams,e.fragment))).pipe(ca(r=>{throw r instanceof sg?this.noMatchError(r):r}))}noMatchError(e){return new Ee(4002,rg)}createUrlTree(e,n,i){const r=mb(e);return new il(r,n,i)}expandSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,n,i).pipe(ie(s=>new on([],s))):this.expandSegment(e,i,n,i.segments,r,!0)}expandChildren(e,n,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return we(r).pipe(nl(s=>{const o=i.children[s],a=oA(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(ie(l=>({segment:l,outlet:s})))}),T1((s,o)=>(s[o.outlet]=o.segment,s),{}),A1())}expandSegment(e,n,i,r,s,o){return we(i).pipe(nl(a=>this.expandSegmentAgainstRoute(e,n,i,a,r,s,o).pipe(ca(c=>{if(c instanceof sg)return It(null);throw c}))),la(a=>!!a),ca((a,l)=>{if(Mb(a))return hA(n,r,s)?It(new on([],{})):Zh(n);throw a}))}expandSegmentAgainstRoute(e,n,i,r,s,o,a){return uA(r,n,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,n,r,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o):Zh(n):Zh(n)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?fA(s):this.lineralizeSegments(i,s).pipe(G(o=>{const a=new on(o,{});return this.expandSegment(e,a,n,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:f}=Pb(n,r,s);if(!a)return Zh(n);const g=this.applyRedirectCommands(l,r.redirectTo,f);return r.redirectTo.startsWith("/")?fA(g):this.lineralizeSegments(r,g).pipe(G(v=>this.expandSegment(e,n,i,v.concat(c),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){return"**"===i.path?(e=sA(i,e),i.loadChildren?(i._loadedRoutes?It({routes:i._loadedRoutes,injector:i._loadedInjector}):this.configLoader.loadChildren(e,i)).pipe(ie(a=>(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,new on(r,{})))):It(new on(r,{}))):cA(n,i,r,e).pipe(js(({matched:o,consumedSegments:a,remainingSegments:l})=>o?this.getChildConfig(e=i._injector??e,i,r).pipe(G(f=>{const g=f.injector??e,v=f.routes,{segmentGroup:_,slicedSegments:y}=ng(n,a,l,v),E=new on(_.segments,_.children);if(0===y.length&&E.hasChildren())return this.expandChildren(g,v,E).pipe(ie(I=>new on(a,I)));if(0===v.length&&0===y.length)return It(new on(a,{}));const S=Hr(i)===s;return this.expandSegment(g,E,v,y,S?sn:s,!0).pipe(ie(R=>new on(a.concat(R.segments),R.children)))})):Zh(n)))}getChildConfig(e,n,i){return n.children?It({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?It({routes:n._loadedRoutes,injector:n._loadedInjector}):function I5(t,e,n,i){const r=e.canLoad;return void 0===r||0===r.length?It(!0):It(r.map(o=>{const a=Hc(o,t);return ua(function g5(t){return t&&Kh(t.canLoad)}(a)?a.canLoad(e,n):t.runInContext(()=>a(e,n)))})).pipe(Vc(),lA())}(e,n,i).pipe(G(r=>r?this.configLoader.loadChildren(e,n).pipe(Ui(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function F5(t){return Lh(tA(rg,3))}())):It({routes:[],injector:e})}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return It(i);if(r.numberOfChildren>1||!r.children[sn])return Lh(new Ee(4e3,rg));r=r.children[sn]}}applyRedirectCommands(e,n,i){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i)}applyRedirectCreateUrlTree(e,n,i,r){const s=this.createSegmentGroup(e,n.root,i,r);return new il(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const i={};return Ti(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);i[s]=n[a]}else i[s]=r}),i}createSegmentGroup(e,n,i,r){const s=this.createSegments(e,n.segments,i,r);let o={};return Ti(n.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,i,r)}),new on(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){const r=i[n.path.substring(1)];if(!r)throw new Ee(4001,rg);return r}findOrReturn(e,n){let i=0;for(const r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}}class j5{}class G5{constructor(e,n,i,r,s,o,a){this.injector=e,this.rootComponentType=n,this.config=i,this.urlTree=r,this.url=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=ng(this.urlTree.root,[],[],this.config.filter(n=>void 0===n.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,sn).pipe(ie(n=>{if(null===n)return null;const i=new Qp([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new bo(i,n),s=new Q1(this.url,r);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const n=e.value,i=Z1(n,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,n,i,r){return 0===i.segments.length&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r)}processChildren(e,n,i){return we(Object.keys(i.children)).pipe(nl(r=>{const s=i.children[r],o=oA(n,r);return this.processSegmentGroup(e,o,s,r)}),T1((r,s)=>r&&s?(r.push(...s),r):null),function lV(t,e=!1){return ne((n,i)=>{let r=0;n.subscribe(te(i,s=>{const o=t(s,r++);(o||e)&&i.next(s),!o&&i.complete()}))})}(r=>null!==r),Vp(null),A1(),ie(r=>{if(null===r)return null;const s=gA(r);return function z5(t){t.sort((e,n)=>e.value.outlet===sn?-1:n.value.outlet===sn?1:e.value.outlet.localeCompare(n.value.outlet))}(s),s}))}processSegment(e,n,i,r,s){return we(n).pipe(nl(o=>this.processSegmentAgainstRoute(o._injector??e,o,i,r,s)),la(o=>!!o),ca(o=>{if(Mb(o))return hA(i,r,s)?It([]):It(null);throw o}))}processSegmentAgainstRoute(e,n,i,r,s){if(n.redirectTo||!uA(n,i,r,s))return It(null);let o;if("**"===n.path){const a=r.length>0?R1(r).parameters:{},l=vA(i)+r.length;o=It({snapshot:new Qp(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_A(n),Hr(n),n.component??n._loadedComponent??null,n,mA(i),l,yA(n)),consumedSegments:[],remainingSegments:[]})}else o=cA(i,n,r,e).pipe(ie(({matched:a,consumedSegments:l,remainingSegments:c,parameters:f})=>{if(!a)return null;const g=vA(i)+l.length;return{snapshot:new Qp(l,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,_A(n),Hr(n),n.component??n._loadedComponent??null,n,mA(i),g,yA(n)),consumedSegments:l,remainingSegments:c}}));return o.pipe(js(a=>{if(null===a)return It(null);const{snapshot:l,consumedSegments:c,remainingSegments:f}=a;e=n._injector??e;const g=n._loadedInjector??e,v=function $5(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(n),{segmentGroup:_,slicedSegments:y}=ng(i,c,f,v.filter(S=>void 0===S.redirectTo));if(0===y.length&&_.hasChildren())return this.processChildren(g,v,_).pipe(ie(S=>null===S?null:[new bo(l,S)]));if(0===v.length&&0===y.length)return It([new bo(l,[])]);const E=Hr(n)===s;return this.processSegment(g,v,_,y,E?sn:s).pipe(ie(S=>null===S?null:[new bo(l,S)]))}))}}function W5(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gA(t){const e=[],n=new Set;for(const i of t){if(!W5(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),n.add(r)):e.push(i)}for(const i of n){const r=gA(i.children);e.push(new bo(i.value,r))}return e.filter(i=>!n.has(i))}function mA(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function vA(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function _A(t){return t.data||{}}function yA(t){return t.resolve||{}}function bA(t){return"string"==typeof t.title||null===t.title}function Ob(t){return js(e=>{const n=t(e);return n?we(n).pipe(ie(()=>e)):It(e)})}const Gc=new C("ROUTES");let kb=(()=>{class t{constructor(n,i){this.injector=n,this.compiler=i,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return It(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const i=ua(n.loadComponent()).pipe(ie(xA),Ui(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),fb(()=>{this.componentLoaders.delete(n)})),r=new E1(i,()=>new j).pipe(db());return this.componentLoaders.set(n,r),r}loadChildren(n,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return It({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);const s=this.loadModuleFactoryOrRoutes(i.loadChildren).pipe(ie(a=>{this.onLoadEndListener&&this.onLoadEndListener(i);let l,c,f=!1;Array.isArray(a)?c=a:(l=a.create(n).injector,c=M1(l.get(Gc,[],Dt.Self|Dt.Optional)));return{routes:c.map(Ib),injector:l}}),fb(()=>{this.childrenLoaders.delete(i)})),o=new E1(s,()=>new j).pipe(db());return this.childrenLoaders.set(i,o),o}loadModuleFactoryOrRoutes(n){return ua(n()).pipe(ie(xA),G(r=>r instanceof cS||Array.isArray(r)?It(r):we(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(bt(ks),bt(tT))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xA(t){return function tG(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}let Nb=(()=>{class t{constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new j,this.configLoader=fn(kb),this.environmentInjector=fn(lo),this.urlSerializer=fn(jh),this.rootContexts=fn(Wh),this.navigationId=0,this.configLoader.onLoadEndListener=r=>this.events.next(new GV(r)),this.configLoader.onLoadStartListener=r=>this.events.next(new VV(r))}get hasRequestedNavigation(){return 0!==this.navigationId}complete(){this.transitions?.complete()}handleNavigationRequest(n){const i=++this.navigationId;this.transitions?.next({...this.transitions.value,...n,id:i})}setupNavigations(n){return this.transitions=new ds({id:0,targetPageId:0,currentUrlTree:n.currentUrlTree,currentRawUrl:n.currentUrlTree,extractedUrl:n.urlHandlingStrategy.extract(n.currentUrlTree),urlAfterRedirects:n.urlHandlingStrategy.extract(n.currentUrlTree),rawUrl:n.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:n.routerState.snapshot,targetSnapshot:null,currentRouterState:n.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ar(i=>0!==i.id),ie(i=>({...i,extractedUrl:n.urlHandlingStrategy.extract(i.rawUrl)})),js(i=>{let r=!1,s=!1;return It(i).pipe(Ui(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),js(o=>{const a=n.browserUrlTree.toString(),l=!n.navigated||o.extractedUrl.toString()!==a||a!==n.currentUrlTree.toString();if(("reload"===n.onSameUrlNavigation||l)&&n.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return CA(o.source)&&(n.browserUrlTree=o.extractedUrl),It(o).pipe(js(f=>{const g=this.transitions?.getValue();return this.events.next(new bb(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),g!==this.transitions?.getValue()?Z:Promise.resolve(f)}),function U5(t,e,n,i){return js(r=>function L5(t,e,n,i,r){return new B5(t,e,n,i,r).apply()}(t,e,n,r.extractedUrl,i).pipe(ie(s=>({...r,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,n.config),Ui(f=>{this.currentNavigation={...this.currentNavigation,finalUrl:f.urlAfterRedirects},i.urlAfterRedirects=f.urlAfterRedirects}),function Y5(t,e,n,i,r){return G(s=>function V5(t,e,n,i,r,s,o="emptyOnly"){return new G5(t,e,n,i,r,o,s).recognize().pipe(js(a=>null===a?function H5(t){return new U(e=>e.error(t))}(new j5):It(a)))}(t,e,n,s.urlAfterRedirects,i.serialize(s.urlAfterRedirects),i,r).pipe(ie(o=>({...s,targetSnapshot:o}))))}(this.environmentInjector,n.rootComponentType,n.config,this.urlSerializer,n.paramsInheritanceStrategy),Ui(f=>{if(i.targetSnapshot=f.targetSnapshot,"eager"===n.urlUpdateStrategy){if(!f.extras.skipLocationChange){const v=n.urlHandlingStrategy.merge(f.urlAfterRedirects,f.rawUrl);n.setBrowserUrl(v,f)}n.browserUrlTree=f.urlAfterRedirects}const g=new LV(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(g)}));if(l&&n.rawUrlTree&&n.urlHandlingStrategy.shouldProcessUrl(n.rawUrlTree)){const{id:g,extractedUrl:v,source:_,restoredState:y,extras:E}=o,S=new bb(g,this.urlSerializer.serialize(v),_,y);this.events.next(S);const T=K1(v,n.rootComponentType).snapshot;return It(i={...o,targetSnapshot:T,urlAfterRedirects:v,extras:{...E,skipLocationChange:!1,replaceUrl:!1}})}return n.rawUrlTree=o.rawUrl,o.resolve(null),Z}),Ui(o=>{const a=new BV(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),ie(o=>i={...o,guards:u5(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function w5(t,e){return G(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?It({...n,guardsResult:!0}):function x5(t,e,n,i){return we(t).pipe(G(r=>function A5(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?It(s.map(a=>{const l=Xh(e)??r,c=Hc(a,l);return ua(function _5(t){return t&&Kh(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,i):l.runInContext(()=>c(t,e,n,i))).pipe(la())})).pipe(Vc()):It(!0)}(r.component,r.route,n,e,i)),la(r=>!0!==r,!0))}(o,i,r,t).pipe(G(a=>a&&function p5(t){return"boolean"==typeof t}(a)?function E5(t,e,n,i){return we(e).pipe(nl(r=>hb(function D5(t,e){return null!==t&&e&&e(new zV(t)),It(!0)}(r.route.parent,i),function C5(t,e){return null!==t&&e&&e(new WV(t)),It(!0)}(r.route,i),function T5(t,e,n){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function h5(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>x1(()=>It(o.guards.map(l=>{const c=Xh(o.node)??n,f=Hc(l,c);return ua(function v5(t){return t&&Kh(t.canActivateChild)}(f)?f.canActivateChild(i,t):c.runInContext(()=>f(i,t))).pipe(la())})).pipe(Vc())));return It(s).pipe(Vc())}(t,r.path,n),function S5(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return It(!0);const r=i.map(s=>x1(()=>{const o=Xh(e)??n,a=Hc(s,o);return ua(function m5(t){return t&&Kh(t.canActivate)}(a)?a.canActivate(e,t):o.runInContext(()=>a(e,t))).pipe(la())}));return It(r).pipe(Vc())}(t,r.route,n))),la(r=>!0!==r,!0))}(i,s,t,e):It(a)),ie(a=>({...n,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),Ui(o=>{if(i.guardsResult=o.guardsResult,sl(o.guardsResult))throw eA(0,o.guardsResult);const a=new UV(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ar(o=>!!o.guardsResult||(n.restoreHistory(o),this.cancelNavigationTransition(o,"",3,n),!1)),Ob(o=>{if(o.guards.canActivateChecks.length)return It(o).pipe(Ui(a=>{const l=new jV(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),js(a=>{let l=!1;return It(a).pipe(function q5(t,e){return G(n=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return It(n);let s=0;return we(r).pipe(nl(o=>function K5(t,e,n,i){const r=t.routeConfig,s=t._resolve;return void 0!==r?.title&&!bA(r)&&(s[Bh]=r.title),function Z5(t,e,n,i){const r=function Q5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===r.length)return It({});const s={};return we(r).pipe(G(o=>function J5(t,e,n,i){const r=Xh(e)??i,s=Hc(t,r);return ua(s.resolve?s.resolve(e,n):r.runInContext(()=>s(e,n)))}(t[o],e,n,i).pipe(la(),Ui(a=>{s[o]=a}))),Gp(1),function cV(t){return ie(()=>t)}(s),ca(o=>Mb(o)?Z:Lh(o)))}(s,t,e,i).pipe(ie(o=>(t._resolvedData=o,t.data=Z1(t,n).resolve,r&&bA(r)&&(t.data[Bh]=r.title),null)))}(o.route,i,t,e)),Ui(()=>s++),Gp(1),G(o=>s===r.length?It(n):Z))})}(n.paramsInheritanceStrategy,this.environmentInjector),Ui({next:()=>l=!0,complete:()=>{l||(n.restoreHistory(a),this.cancelNavigationTransition(a,"",2,n))}}))}),Ui(a=>{const l=new HV(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Ob(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(Ui(f=>{l.component=f}),ie(()=>{})));for(const f of l.children)c.push(...a(f));return c};return ub(a(o.targetSnapshot.root)).pipe(Vp(),_o(1))}),Ob(()=>n.afterPreactivation()),ie(o=>{const a=function JV(t,e,n){const i=$h(t,e._root,n?n._root:void 0);return new q1(i,e)}(n.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return i={...o,targetRouterState:a}}),Ui(o=>{n.currentUrlTree=o.urlAfterRedirects,n.rawUrlTree=n.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),n.routerState=o.targetRouterState,"deferred"===n.urlUpdateStrategy&&(o.extras.skipLocationChange||n.setBrowserUrl(n.rawUrlTree,o),n.browserUrlTree=o.urlAfterRedirects)}),((t,e,n)=>ie(i=>(new c5(e,i.targetRouterState,i.currentRouterState,n).activate(t),i)))(this.rootContexts,n.routeReuseStrategy,o=>this.events.next(o)),Ui({next:o=>{r=!0,this.lastSuccessfulNavigation=this.currentNavigation,n.navigated=!0,this.events.next(new ol(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(n.currentUrlTree))),n.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{r=!0}}),fb(()=>{r||s||this.cancelNavigationTransition(i,"",1,n),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),ca(o=>{if(s=!0,iA(o)){nA(o)||(n.navigated=!0,n.restoreHistory(i,!0));const a=new Zp(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),nA(o)){const l=n.urlHandlingStrategy.merge(o.url,n.rawUrlTree),c={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===n.urlUpdateStrategy||CA(i.source)};n.scheduleNavigation(l,"imperative",null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{n.restoreHistory(i,!0);const a=new W1(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);this.events.next(a);try{i.resolve(n.errorHandler(o))}catch(l){i.reject(l)}}return Z}))}))}cancelNavigationTransition(n,i,r,s){const o=new Zp(n.id,this.urlSerializer.serialize(n.extractedUrl),i,r);this.events.next(o),n.resolve(!1)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function CA(t){return"imperative"!==t}let DA=(()=>{class t{buildTitle(n){let i,r=n.root;for(;void 0!==r;)i=this.getResolvedTitleForRoute(r)??i,r=r.children.find(s=>s.outlet===sn);return i}getResolvedTitleForRoute(n){return n.data[Bh]}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return fn(nG)},providedIn:"root"}),t})(),nG=(()=>{class t extends DA{constructor(n){super(),this.title=n}updateTitle(n){const i=this.buildTitle(n);void 0!==i&&this.title.setTitle(i)}}return t.\u0275fac=function(n){return new(n||t)(bt(v1))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),iG=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return fn(sG)},providedIn:"root"}),t})();class rG{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let sG=(()=>{class t extends rG{}return t.\u0275fac=function(){let e;return function(i){return(e||(e=function nh(t){return Is(()=>{const e=t.prototype.constructor,n=e[Qr]||Fn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const s=r[Qr]||Fn(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}(t)))(i||t)}}(),t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const og=new C("",{providedIn:"root",factory:()=>({})});let aG=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:function(){return fn(lG)},providedIn:"root"}),t})(),lG=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,i){return n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function cG(t){throw t}function uG(t,e,n){return e.parse("/")}const hG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Dr=(()=>{class t{constructor(){this.disposed=!1,this.currentPageId=0,this.console=fn(RU),this.isNgZoneEnabled=!1,this.options=fn(og,{optional:!0})||{},this.errorHandler=this.options.errorHandler||cG,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||uG,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>It(void 0),this.urlHandlingStrategy=fn(aG),this.routeReuseStrategy=fn(iG),this.urlCreationStrategy=fn(KV),this.titleStrategy=fn(DA),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=M1(fn(Gc,{optional:!0})??[]),this.navigationTransitions=fn(Nb),this.urlSerializer=fn(jh),this.location=fn(jy),this.rootComponentType=null,this.isNgZoneEnabled=fn(Rn)instanceof Rn&&Rn.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new il,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=K1(this.currentUrlTree,this.rootComponentType),this.navigationTransitions.setupNavigations(this).subscribe(n=>{this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const i="popstate"===n.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{const r={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(n.state){const a={...n.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(n.url);this.scheduleNavigation(o,i,s,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(n){this.config=n.map(Ib),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,i={}){const{relativeTo:r,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=i,c=l?this.currentUrlTree.fragment:o;let f=null;switch(a){case"merge":f={...this.currentUrlTree.queryParams,...s};break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}return null!==f&&(f=this.removeEmptyProps(f)),this.urlCreationStrategy.createUrlTree(r,this.routerState,this.currentUrlTree,n,f,c??null)}navigateByUrl(n,i={skipLocationChange:!1}){const r=sl(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(n,i={skipLocationChange:!1}){return function fG(t){for(let e=0;e<t.length;e++){if(null==t[e])throw new Ee(4008,!1)}}(n),this.navigateByUrl(this.createUrlTree(n,i),i)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let i;try{i=this.urlSerializer.parse(n)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,n)}return i}isActive(n,i){let r;if(r=!0===i?{...hG}:!1===i?{...dG}:i,sl(n))return O1(this.currentUrlTree,n,r);const s=this.parseUrl(n);return O1(this.currentUrlTree,s,r)}removeEmptyProps(n){return Object.keys(n).reduce((i,r)=>{const s=n[r];return null!=s&&(i[r]=s),i},{})}scheduleNavigation(n,i,r,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c,f;return o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((g,v)=>{a=g,l=v}),"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),f=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):f=0,this.navigationTransitions.handleNavigationRequest({targetPageId:f,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(g=>Promise.reject(g))}setBrowserUrl(n,i){const r=this.urlSerializer.serialize(n),s={...i.extras.state,...this.generateNgRouterState(i.id,i.targetPageId)};this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(n,i=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,i){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:i}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class TA{}let mG=(()=>{class t{constructor(n,i,r,s,o){this.router=n,this.injector=r,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ar(n=>n instanceof ol),nl(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,i){const r=[];for(const s of i){s.providers&&!s._injector&&(s._injector=pp(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?r.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&r.push(this.processRoutes(a,s.children??s._loadedRoutes))}return we(r).pipe(oe())}preloadConfig(n,i){return this.preloadingStrategy.preload(i,()=>{let r;r=i.loadChildren&&void 0===i.canLoad?this.loader.loadChildren(n,i):It(null);const s=r.pipe(G(o=>null===o?It(void 0):(i._loadedRoutes=o.routes,i._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return i.loadComponent&&!i._loadedComponent?we([s,this.loader.loadComponent(i)]).pipe(oe()):s})}}return t.\u0275fac=function(n){return new(n||t)(bt(Dr),bt(tT),bt(lo),bt(TA),bt(kb))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Lb=new C("");let AA=(()=>{class t{constructor(n,i,r,s,o={}){this.urlSerializer=n,this.transitions=i,this.viewportScroller=r,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof bb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ol&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof X1&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,i){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new X1(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return t.\u0275fac=function(n){!function aC(){throw new Error("invalid")}()},t.\u0275prov=mt({token:t,factory:t.\u0275fac}),t})();function $c(t,e){return{\u0275kind:t,\u0275providers:e}}function MA(){const t=fn(ks);return e=>{const n=t.get(Ep);if(e!==n.components[0])return;const i=t.get(Dr),r=t.get(RA);1===t.get(Ub)&&i.initialNavigation(),t.get(PA,null,Dt.Optional)?.setUpPreloading(),t.get(Lb,null,Dt.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const RA=new C("",{factory:()=>new j}),Ub=new C("",{providedIn:"root",factory:()=>1});const PA=new C("");function wG(t){return $c(0,[{provide:PA,useExisting:mG},{provide:TA,useExisting:t}])}const OA=new C("ROUTER_FORROOT_GUARD"),xG=[jy,{provide:jh,useClass:pb},Dr,Wh,{provide:jc,useFactory:function IA(t){return t.routerState.root},deps:[Dr]},kb,[]];function EG(){return new lT("Router",Dr)}let kA=(()=>{class t{constructor(n){}static forRoot(n,i){return{ngModule:t,providers:[xG,[],{provide:Gc,multi:!0,useValue:n},{provide:OA,useFactory:TG,deps:[[Dr,new sh,new oh]]},{provide:og,useValue:i||{}},i?.useHash?{provide:tl,useClass:_3}:{provide:tl,useClass:RT},{provide:Lb,useFactory:()=>{const t=fn(Vj),e=fn(Rn),n=fn(og),i=fn(Nb),r=fn(jh);return n.scrollOffset&&t.setOffset(n.scrollOffset),new AA(r,i,t,e,n)}},i?.preloadingStrategy?wG(i.preloadingStrategy).\u0275providers:[],{provide:lT,multi:!0,useFactory:EG},i?.initialNavigation?AG(i):[],[{provide:NA,useFactory:MA},{provide:eT,multi:!0,useExisting:NA}]]}}static forChild(n){return{ngModule:t,providers:[{provide:Gc,multi:!0,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(bt(OA,8))},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({imports:[Tb]}),t})();function TG(t){return"guarded"}function AG(t){return["disabled"===t.initialNavigation?$c(3,[{provide:bp,multi:!0,useFactory:()=>{const e=fn(Dr);return()=>{e.setUpLocationChangeListener()}}},{provide:Ub,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?$c(2,[{provide:Ub,useValue:0},{provide:bp,multi:!0,deps:[ks],useFactory:e=>{const n=e.get(m3,Promise.resolve());return()=>n.then(()=>new Promise(r=>{const s=e.get(Dr),o=e.get(RA);(function i(r){e.get(Dr).events.pipe(ar(o=>o instanceof ol||o instanceof Zp||o instanceof W1),ie(o=>o instanceof ol||o instanceof Zp&&(0===o.code||1===o.code)&&null),ar(o=>null!==o),_o(1)).subscribe(()=>{r()})})(()=>{r(!0)}),s.afterPreactivation=()=>(r(!0),o.closed?It(void 0):o),s.initialNavigation()}))}}]).\u0275providers:[]]}const NA=new C("");var al=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(al||{}),jb=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(jb||{}),kt=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(kt||{}),Vs=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Vs||{}),Pe=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Pe||{}),Wc=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Wc||{}),St=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(St||{}),Hb=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Hb||{}),wo=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(wo||{}),ha=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(ha||{}),Gs=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Gs||{}),fs=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(fs||{}),zs=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(zs||{}),Vb=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(Vb||{}),Vr=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Vr||{}),gi=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(gi||{}),ai=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(ai||{}),$s=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))($s||{});const PG={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};var Gb=/iPhone/i,FA=/iPod/i,LA=/iPad/i,BA=/\biOS-universal(?:.+)Mac\b/i,zb=/\bAndroid(?:.+)Mobile\b/i,UA=/Android/i,Xc=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ag=/Silk/i,xo=/Windows Phone/i,jA=/\bWindows(?:.+)ARM\b/i,HA=/BlackBerry/i,VA=/BB10/i,GA=/Opera Mini/i,zA=/\b(CriOS|Chrome)(?:.+)Mobile/i,$A=/Mobile(?:.+)Firefox\b/i,WA=function(t){return typeof t<"u"&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&typeof MSStream>"u"};const Eo=function kG(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,i=n.split("[FBAN");typeof i[1]<"u"&&(n=i[0]),typeof(i=n.split("Twitter"))[1]<"u"&&(n=i[0]);var r=function OG(t){return function(e){return e.test(t)}}(n),s={apple:{phone:r(Gb)&&!r(xo),ipod:r(FA),tablet:!r(Gb)&&(r(LA)||WA(e))&&!r(xo),universal:r(BA),device:(r(Gb)||r(FA)||r(LA)||r(BA)||WA(e))&&!r(xo)},amazon:{phone:r(Xc),tablet:!r(Xc)&&r(ag),device:r(Xc)||r(ag)},android:{phone:!r(xo)&&r(Xc)||!r(xo)&&r(zb),tablet:!r(xo)&&!r(Xc)&&!r(zb)&&(r(ag)||r(UA)),device:!r(xo)&&(r(Xc)||r(ag)||r(zb)||r(UA))||r(/\bokhttp\b/i)},windows:{phone:r(xo),tablet:r(jA),device:r(xo)||r(jA)},other:{blackberry:r(HA),blackberry10:r(VA),opera:r(GA),firefox:r($A),chrome:r(zA),device:r(HA)||r(VA)||r(GA)||r($A)||r(zA)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(globalThis.navigator),Te={ADAPTER:PG,MIPMAP_TEXTURES:Gs.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:ai.NONE,SPRITE_MAX_TEXTURES:function FG(t){let e=!0;if(Eo.tablet||Eo.phone){if(Eo.apple.device){const n=navigator.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(Eo.android.device){const n=navigator.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,premultipliedAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1,hello:!1},GC_MODE:Vb.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:ha.CLAMP,SCALE_MODE:wo.LINEAR,PRECISION_VERTEX:Vr.HIGH,PRECISION_FRAGMENT:Eo.apple.device?Vr.HIGH:Vr.MEDIUM,CAN_UPLOAD_SAME_BUFFER:function NG(){return!Eo.apple.device}(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};Te.PREFER_ENV=al.WEBGL2,Te.STRICT_TEXTURE_CACHE=!1;var We=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(We||{});const $b=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},XA=(t,e)=>$b(t).priority??e,_t={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map($b).forEach(e=>{e.type.forEach(n=>this._removeHandlers[n]?.(e))}),this},add(...t){return t.map($b).forEach(e=>{e.type.forEach(n=>{const i=this._addHandlers,r=this._queue;i[n]?i[n](e):(r[n]=r[n]||[],r[n].push(e))})}),this},handle(t,e,n){const i=this._addHandlers,r=this._removeHandlers;if(i[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,r[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>XA(s,n)-XA(r,n)))},i=>{const r=e.indexOf(i.ref);-1!==r&&e.splice(r,1)})}},lg=2*Math.PI,LG=180/Math.PI,BG=Math.PI/180;var Ai=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Ai||{});class en{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new en(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const cg=[new en,new en,new en,new en];class un{constructor(e=0,n=0,i=0,r=0){this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(r),this.type=Ai.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new un(0,0,0,0)}clone(){return new un(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return!(this.width<=0||this.height<=0)&&e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n)return!((this.right>e.right?e.right:this.right)<=(this.x<e.x?e.x:this.x))&&(this.bottom>e.bottom?e.bottom:this.bottom)>(this.y<e.y?e.y:this.y);const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=cg[0].set(e.left,e.top),l=cg[1].set(e.left,e.bottom),c=cg[2].set(e.right,e.top),f=cg[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const g=Math.sign(n.a*n.d-n.b*n.c);if(0===g||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(f,f),Math.max(a.x,l.x,c.x,f.x)<=i||Math.min(a.x,l.x,c.x,f.x)>=r||Math.max(a.y,l.y,c.y,f.y)<=s||Math.min(a.y,l.y,c.y,f.y)>=o))return!1;const v=g*(l.y-a.y),_=g*(a.x-l.x),y=v*i+_*s,E=v*r+_*s,S=v*i+_*o,T=v*r+_*o;if(Math.max(y,E,S,T)<=v*a.x+_*a.y||Math.min(y,E,S,T)>=v*f.x+_*f.y)return!1;const R=g*(a.y-c.y),I=g*(c.x-a.x),k=R*i+I*s,V=R*r+I*s,K=R*i+I*o,ee=R*r+I*o;return!(Math.max(k,V,K,ee)<=R*a.x+I*a.y||Math.min(k,V,K,ee)>=R*f.x+I*f.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n,this}fit(e){const n=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(i-n,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,n=.001){const i=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=i-n,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Wb{constructor(e=0,n=0,i=0){this.x=e,this.y=n,this.radius=i,this.type=Ai.CIRC}clone(){return new Wb(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;let r=this.x-e,s=this.y-n;return r*=r,s*=s,r+s<=this.radius*this.radius}getBounds(){return new un(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Xb{constructor(e=0,n=0,i=0,r=0){this.x=e,this.y=n,this.width=i,this.height=r,this.type=Ai.ELIP}clone(){return new Xb(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,r=(n-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new un(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Yc{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){const i=[];for(let r=0,s=n.length;r<s;r++)i.push(n[r].x,n[r].y);n=i}this.points=n,this.type=Ai.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new Yc(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[2*s],l=this.points[2*s+1],c=this.points[2*o],f=this.points[2*o+1];l>n!=f>n&&e<(n-l)/(f-l)*(c-a)+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class Yb{constructor(e=0,n=0,i=0,r=0,s=20){this.x=e,this.y=n,this.width=i,this.height=r,this.radius=s,this.type=Ai.RREC}clone(){return new Yb(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+i&&n<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=n-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=n-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class da{constructor(e,n,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new da(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}class $n{constructor(e=1,n=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,i,r,s,o){return this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const i=n||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,n){n=n||new en;const i=e.x,r=e.y;return n.x=this.a*i+this.c*r+this.tx,n.y=this.b*i+this.d*r+this.ty,n}applyInverse(e,n){n=n||new en;const i=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return n.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,n.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*n-this.b*i,this.b=r*i+this.b*n,this.c=s*n-this.d*i,this.d=s*i+this.d*n,this.tx=o*n-this.ty*i,this.ty=o*i+this.ty*n,this}append(e){const n=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*n+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,n,i,r,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=n-(i*this.b+r*this.d),this}prepend(e){const n=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,n),c=Math.abs(a+l);return c<1e-5||Math.abs(lg-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*n+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,n=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-n*i;return this.a=r/o,this.b=-n/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new $n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new $n}static get TEMP_MATRIX(){return new $n}}const ll=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cl=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],ul=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],hl=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qb=[],YA=[],ug=Math.sign;!function UG(){for(let t=0;t<16;t++){const e=[];qb.push(e);for(let n=0;n<16;n++){const i=ug(ll[t]*ll[n]+ul[t]*cl[n]),r=ug(cl[t]*ll[n]+hl[t]*cl[n]),s=ug(ll[t]*ul[n]+ul[t]*hl[n]),o=ug(cl[t]*ul[n]+hl[t]*hl[n]);for(let a=0;a<16;a++)if(ll[a]===i&&cl[a]===r&&ul[a]===s&&hl[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new $n;e.set(ll[t],cl[t],ul[t],hl[t],0,0),YA.push(e)}}();const qn={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>ll[t],uY:t=>cl[t],vX:t=>ul[t],vY:t=>hl[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>qb[t][e],sub:(t,e)=>qb[t][qn.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?qn.S:qn.N:2*Math.abs(e)<=Math.abs(t)?t>0?qn.E:qn.W:e>0?t>0?qn.SE:qn.SW:t>0?qn.NE:qn.NW,matrixAppendRotationInv:(t,e,n=0,i=0)=>{const r=YA[qn.inv(e)];r.tx=n,r.ty=i,t.append(r)}},qA=class{constructor(){this.worldTransform=new $n,this.localTransform=new $n,this.position=new da(this.onChange,this,0,0),this.scale=new da(this.onChange,this,1,1),this.pivot=new da(this.onChange,this,0,0),this.skew=new da(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Kb=qA;Kb.IDENTITY=new qA;class ps{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,i,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:f}=this;this._aliasCount++;for(let g=0,v=f.length;g<v;g++)f[g][c](e,n,i,r,s,o,a,l);return f===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return-1!==n&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}Object.defineProperties(ps.prototype,{dispatch:{value:ps.prototype.emit},run:{value:ps.prototype.emit}}),Te.TARGET_FPMS=.06;var qc=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(qc||{});class Zb{constructor(e,n=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=i,this.once=r}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}class li{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Zb(null,null,1/0),this.deltaMS=1/Te.TARGET_FPMS,this.elapsedMS=1/Te.TARGET_FPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,i=qc.NORMAL){return this._addListener(new Zb(e,n,i))}addOnce(e,n,i=qc.NORMAL){return this._addListener(new Zb(e,n,i,!0))}_addListener(e){let n=this._head.next,i=this._head;if(n){for(;n;){if(e.priority>n.priority){e.connect(i);break}i=n,n=n.next}e.previous||e.connect(i)}else e.connect(i);return this._startIfPossible(),this}remove(e,n){let i=this._head.next;for(;i;)i=i.match(e,n)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*Te.TARGET_FPMS;const i=this._head;let r=i.next;for(;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,n)/1e3,Te.TARGET_FPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(0===e)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!li._shared){const e=li._shared=new li;e.autoStart=!0,e._protected=!0}return li._shared}static get system(){if(!li._system){const e=li._system=new li;e.autoStart=!0,e._protected=!0}return li._system}}class KA{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,qc.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?li.shared:new li,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}KA.extension=We.Application,_t.add(KA);var Jh=je(5),jG=je(469),Qb=je(762);const HG={parse:Qb.Qc,format:Qb.WU,resolve:Qb.DB};function gs(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function ZA(t){return t.split("?")[0].split("#")[0]}const Ii={toPosix:t=>function GG(t,e,n){return t.replace(new RegExp(function VG(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(e),"g"),n)}(t,"\\","/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){gs(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),r=/^[^/:]+:\//.exec(t);if(n||i||r){const s=n?.[0]||i?.[0]||r?.[0];e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const i=ZA(this.toPosix(e??Te.ADAPTER.getBaseUrl())),r=ZA(this.toPosix(n??this.rootname(i)));return gs(t),(t=this.toPosix(t)).startsWith("/")?Ii.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if(gs(t=this.toPosix(t)),0===t.length)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=function zG(t,e){let o,n="",i=0,r=-1,s=0;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(47===o)break;o=47}if(47===o){if(r!==a-1&&1!==s)if(r!==a-1&&2===s){if(n.length<2||2!==i||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(2===n.length||1===n.length){n="",i=0,r=a,s=0;continue}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+=`/${t.slice(r+1,a)}`:n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else 46===o&&-1!==s?++s:s=-1}return n}(t,!1),t.length>0&&i&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return gs(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let n=0;n<t.length;++n){const i=t[n];gs(i),i.length>0&&(void 0===e?e=i:this.extname(t[n-1]??"")?e+=`/../${i}`:e+=`/${i}`)}return void 0===e?".":this.normalize(e)},dirname(t){if(gs(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const n=47===e;let i=-1,r=!0;const s=this.getProtocol(t),o=t;for(let a=(t=t.slice(s.length)).length-1;a>=1;--a)if(e=t.charCodeAt(a),47===e){if(!r){i=a;break}}else r=!1;return-1===i?n?"/":this.isUrl(o)?s+t:s:n&&1===i?"//":s+t.slice(0,i)},rootname(t){gs(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);e=-1!==n?t.slice(0,n):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){gs(t),e&&gs(e),t=this.toPosix(t);let s,n=0,i=-1,r=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(47===l){if(!r){n=s+1;break}}else-1===a&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?-1==--o&&(i=s):(o=-1,i=a))}return n===i?i=a:-1===i&&(i=t.length),t.slice(n,i)}for(s=t.length-1;s>=0;--s)if(47===t.charCodeAt(s)){if(!r){n=s+1;break}}else-1===i&&(r=!1,i=s+1);return-1===i?"":t.slice(n,i)},extname(t){gs(t);let e=-1,n=0,i=-1,r=!0,s=0;for(let o=(t=this.toPosix(t)).length-1;o>=0;--o){const a=t.charCodeAt(o);if(47!==a)-1===i&&(r=!1,i=o+1),46===a?-1===e?e=o:1!==s&&(s=1):-1!==e&&(s=-1);else if(!r){n=o+1;break}}return-1===e||-1===i||0===s||1===s&&e===i-1&&e===n+1?"":t.slice(e,i)},parse(t){gs(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let n=(t=this.toPosix(t)).charCodeAt(0);const i=this.isAbsolute(t);let r;e.root=this.rootname(t),r=i||this.hasProtocol(t)?1:0;let o=-1,a=0,l=-1,c=!0,f=t.length-1,g=0;for(;f>=r;--f)if(n=t.charCodeAt(f),47!==n)-1===l&&(c=!1,l=f+1),46===n?-1===o?o=f:1!==g&&(g=1):-1!==o&&(g=-1);else if(!c){a=f+1;break}return-1===o||-1===l||0===g||1===g&&o===l-1&&o===a+1?-1!==l&&(e.base=e.name=t.slice(0===a&&i?1:a,l)):(0===a&&i?(e.name=t.slice(1,o),e.base=t.slice(1,l)):(e.name=t.slice(a,o),e.base=t.slice(a,l)),e.ext=t.slice(o,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"};Te.RETINA_PREFIX=/@([0-9\.]+)x/,Te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;const QA={};function lr(t,e,n=3){if(QA[e])return;let i=(new Error).stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(i=i.split("\n").splice(n).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),console.warn(i))),QA[e]=!0}let Jb;var Pz={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ed(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function JA(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function e0(t){if("string"==typeof t&&("#"===(t=Pz[t.toLowerCase()]||t)[0]&&(t=t.slice(1)),3===t.length)){const[e,n,i]=t;t=e+e+n+n+i+i}return parseInt(t,16)}const eI=function Oz(){const t=[],e=[];for(let i=0;i<32;i++)t[i]=i,e[i]=i;t[kt.NORMAL_NPM]=kt.NORMAL,t[kt.ADD_NPM]=kt.ADD,t[kt.SCREEN_NPM]=kt.SCREEN,e[kt.NORMAL]=kt.NORMAL_NPM,e[kt.ADD]=kt.ADD_NPM,e[kt.SCREEN]=kt.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}();function tI(t,e){return eI[e?1:0][t]}function t0(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;let n=t>>16&255,i=t>>8&255,r=255&t;return n=n*e+.5|0,i=i*e+.5|0,r=r*e+.5|0,(255*e<<24)+(n<<16)+(i<<8)+r}function nI(t,e,n,i){return(n=n||new Float32Array(4))[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(i||void 0===i)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function n0(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}function hg(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function iI(t){return!(t&t-1||!t)}function rI(t){let e=(t>65535?1:0)<<4,n=((t>>>=e)>255?1:0)<<3;return e|=n,n=((t>>>=n)>15?1:0)<<2,e|=n,n=((t>>>=n)>3?1:0)<<1,e|=n,e|(t>>>=n)>>1}function Kc(t,e,n){const i=t.length;let r;if(e>=i||0===n)return;const s=i-(n=e+n>i?i-e:n);for(r=e;r<s;++r)t[r]=t[r+n];t.length=s}function Zc(t){return 0===t?0:t<0?-1:1}Float32Array,Uint32Array,Int32Array,Uint8Array;let Lz=0;function dl(){return++Lz}const sI={},cr=Object.create(null),Gr=Object.create(null);class oI{constructor(e,n,i){this.canvas=Te.ADAPTER.createCanvas(),this.context=this.canvas.getContext("2d"),this.resolution=i||Te.RESOLUTION,this.resize(e,n)}clear(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}resize(e,n){this.canvas.width=Math.round(e*this.resolution),this.canvas.height=Math.round(n*this.resolution)}destroy(){this.context=null,this.canvas=null}get width(){return this.canvas.width}set width(e){this.canvas.width=Math.round(e)}get height(){return this.canvas.height}set height(e){this.canvas.height=Math.round(e)}}function aI(t,e,n){for(let i=0,r=4*n*e;i<e;++i,r+=4)if(0!==t[r+3])return!1;return!0}function lI(t,e,n,i,r){const s=4*e;for(let o=i,a=i*s+4*n;o<=r;++o,a+=s)if(0!==t[a+3])return!1;return!0}let dg;function fa(t,e=1){const n=Te.RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):e}const r0=[];function cI(t,e){if(!t)return null;let n="";if("string"==typeof t){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(n=i[1].toLowerCase())}for(let i=r0.length-1;i>=0;--i){const r=r0[i];if(r.test&&r.test(t,n))return new r(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class td{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new ps("setRealSize"),this.onUpdate=new ps("update"),this.onError=new ps("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class nd extends td{constructor(e,n){const{width:i,height:r}=n||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e}upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const Hz={scaleMode:wo.NEAREST,format:Pe.RGBA,alphaMode:fs.NPM},id=class extends Jh{constructor(t=null,e=null){super(),e=e||{};const{alphaMode:n,mipmap:i,anisotropicLevel:r,scaleMode:s,width:o,height:a,wrapMode:l,format:c,type:f,target:g,resolution:v,resourceOptions:_}=e;t&&!(t instanceof td)&&((t=cI(t,_)).internal=!0),this.resolution=v||Te.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i??Te.MIPMAP_TEXTURES,this.anisotropicLevel=r??Te.ANISOTROPIC_LEVEL,this._wrapMode=l||Te.WRAP_MODE,this._scaleMode=s??Te.SCALE_MODE,this.format=c||Pe.RGBA,this.type=f||St.UNSIGNED_BYTE,this.target=g||Wc.TEXTURE_2D,this.alphaMode=n??fs.UNPACK,this.uid=dl(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return this.setRealSize(t*(n=n||this.resolution),e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=iI(this.realWidth)&&iI(this.realHeight)}setResolution(t){const e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Gr[this.cacheId],delete cr[this.cacheId],this.cacheId=null),this.dispose(),id.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=Te.STRICT_TEXTURE_CACHE){const i="string"==typeof t;let r=null;i?r=t:(t._pixiId||(t._pixiId=`${e?.pixiIdPrefix||"pixiid"}_${dl()}`),r=t._pixiId);let s=Gr[r];if(i&&n&&!s)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return s||(s=new id(t,e),s.cacheId=r,id.addToCache(s,r)),s}static fromBuffer(t,e,n,i){t=t||new Float32Array(e*n*4);const r=new nd(t,{width:e,height:n}),s=t instanceof Float32Array?St.FLOAT:St.UNSIGNED_BYTE;return new id(r,Object.assign({},Hz,i||{width:e,height:n,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Gr[e]&&Gr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Gr[e]=t)}static removeFromCache(t){if("string"==typeof t){const e=Gr[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete Gr[t],e}}else if(t?.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Gr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let _n=id;_n._globalBatch=0;class uI extends td{constructor(e,n){const{width:i,height:r}=n||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new _n;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let i=0;i<this.length;i++)!e[i]||(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):this.addResourceAt(e[i]instanceof td?e[i]:cI(e[i],n),i))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(n).then(()=>{const{realWidth:i,realHeight:r}=this.items[0];return this.resize(i,r),Promise.resolve(this)}),this._load}}class pa extends td{constructor(e){super(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,i){void 0!==i||n.startsWith("data:")?!1!==i&&(e.crossOrigin="string"==typeof i?i:"anonymous"):e.crossOrigin=function jz(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,dg||(dg=document.createElement("a")),dg.href=t;const n=HG.parse(dg.href);return n.hostname!==e.hostname||(n.port||""!==e.port)&&n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}(n)}upload(e,n,i,r){const s=e.gl,o=n.realWidth,a=n.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK),this.noSubImage||n.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(n.target,0,i.internalFormat,n.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,i.type,r),!0}update(){if(this.destroyed)return;const e=this.source;this.resize(e.naturalWidth||e.videoWidth||e.width,e.naturalHeight||e.videoHeight||e.height),super.update()}dispose(){this.source=null}}const rd=class extends uI{constructor(t,e){const{width:n,height:i,autoLoad:r,linkBaseTexture:s}=e||{};if(t&&t.length!==rd.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let o=0;o<rd.SIDES;o++)this.items[o].target=Wc.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=!1!==s,t&&this.initFromArray(t,e),!1!==r&&this.load()}bind(t){super.bind(t),t.target=Wc.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=Wc.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const i=this.itemDirtyIds;for(let r=0;r<rd.SIDES;r++){const s=this.items[r];(i[r]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),i[r]=s.dirtyId):i[r]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),i[r]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===rd.SIDES}};let hI=rd;hI.SIDES=6;class dI extends pa{constructor(e,n){if(n=n||{},"string"==typeof e){const i=new Image;pa.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}super(e),!e.complete&&!!this._width&&!!this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??Te.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this.bitmap=null,this._load=null,!1!==n.autoLoad&&this.load()}load(e){return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((n,i)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,n(this.createBitmap?this.process():this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{i(o),this.onError.emit(o)})})),this._load}process(){const e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap;return this._process=fetch(e.src,{mode:e.crossOrigin&&"anonymous"!==e.crossOrigin?"no-cors":"cors"}).then(r=>r.blob()).then(r=>n(r,0,0,e.width,e.height,{premultiplyAlpha:null===this.alphaMode||this.alphaMode===fs.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,i){if("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,i,this.bitmap),!this.preserveBitmap){let r=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&("string"==typeof e||e instanceof HTMLImageElement)}}const fg=class extends pa{constructor(t,e){e=e||{},super(Te.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,!1!==e.autoLoad&&this.load()}load(){return this._load||(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},fg.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()})),this._load}_loadSvg(){const t=new Image;pa.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{!this._resolve||(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,r=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*e,r=this._overrideHeight||this._overrideWidth/e*n),i=Math.round(i),r=Math.round(r);const s=this.source;s.width=i,s.height=r,s._pixiId=`canvas_${dl()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,i,r),this._resolve(),this._resolve=null}}static getSize(t){const e=fg.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return"svg"===e||"string"==typeof t&&t.startsWith("data:image/svg+xml")||"string"==typeof t&&fg.SVG_XML.test(t)}};let sd=fg;sd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,sd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const s0=class extends pa{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),"string"==typeof t&&(t=[t]),pa.crossOrigin(n,t[0].src||t[0],e.crossorigin);for(let r=0;r<t.length;++r){const s=document.createElement("source");let{src:o,mime:a}=t[r];o=o||t[r];const l=o.split("?").shift().toLowerCase(),c=l.slice(l.lastIndexOf(".")+1);a=a||s0.MIME_TYPES[c]||`video/${c}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),!1!==e.autoLoad&&this.load()}update(t=0){this.destroyed||(this._msToNextUpdate=Math.floor(this._msToNextUpdate-li.shared.elapsedMS*this.source.playbackRate),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0))}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(li.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(li.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(li.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(li.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||s0.TYPES.includes(e)}};let o0=s0;function fI(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(c){return void n(c)}a.done?e(l):Promise.resolve(l).then(i,r)}function Ut(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(l){fI(s,i,r,o,a,"next",l)}function a(l){fI(s,i,r,o,a,"throw",l)}o(void 0)})}}o0.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],o0.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};class Qc extends pa{constructor(e,n){var i=(...r)=>{super(...r)};n=n||{},"string"==typeof e?(i(Qc.EMPTY),this.url=e):(i(e),this.url=null),this.crossOrigin=n.crossOrigin??!0,this.alphaMode="number"==typeof n.alphaMode?n.alphaMode:null,this._load=null,!1!==n.autoLoad&&this.load()}load(){var e=this;return this._load||(this._load=new Promise(function(){var n=Ut(function*(i,r){if(null!==e.url)try{const s=yield Te.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});if(e.destroyed)return;const o=yield s.blob();if(e.destroyed)return;const a=yield createImageBitmap(o,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===fs.UNPACK?"premultiply":"none"});if(e.destroyed)return;e.source=a,e.update(),i(e)}catch(s){if(e.destroyed)return;r(s),e.onError.emit(s)}else i(e)});return function(i,r){return n.apply(this,arguments)}}())),this._load}upload(e,n,i){return this.source instanceof ImageBitmap?("number"==typeof this.alphaMode&&(n.alphaMode=this.alphaMode),super.upload(e,n,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&("string"==typeof e||e instanceof ImageBitmap)}static get EMPTY(){return Qc._EMPTY=Qc._EMPTY??Te.ADAPTER.createCanvas(0,0),Qc._EMPTY}}r0.push(Qc,dI,class Gz extends pa{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return!!(n&&e instanceof n)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}},o0,sd,nd,hI,class Vz extends uI{constructor(e,n){const{width:i,height:r}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:r}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,n),this}bind(e){super.bind(e),e.target=Wc.TEXTURE_2D_ARRAY}upload(e,n,i){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,n.format,i.type,null);for(let l=0;l<r;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,i.type,c.resource.source))}return!0}});class zz extends nd{upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===fs.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}}class a0{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new ps("disposeFramebuffer"),this.multisample=ai.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new _n(null,{scaleMode:wo.NEAREST,resolution:1,mipmap:Gs.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new _n(new zz(null,{width:this.width,height:this.height}),{scaleMode:wo.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Gs.OFF,format:Pe.DEPTH_COMPONENT,type:St.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),e!==this.width||n!==this.height){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(e/s,n/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,n/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class pI extends _n{constructor(e={}){"number"==typeof e&&(e={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]}),e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=ai.NONE),super(null,e),this.mipmap=Gs.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new a0(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class gI{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,i){const r=n.width,s=n.height;if(i){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,c=e.y/s+a;i=qn.add(i,qn.NW),this.x0=l+o*qn.uX(i),this.y0=c+a*qn.uY(i),i=qn.add(i,2),this.x1=l+o*qn.uX(i),this.y1=c+a*qn.uY(i),i=qn.add(i,2),this.x2=l+o*qn.uX(i),this.y2=c+a*qn.uY(i),i=qn.add(i,2),this.x3=l+o*qn.uX(i),this.y3=c+a*qn.uY(i)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const mI=new gI;function pg(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class ut extends Jh{constructor(e,n,i,r,s,o){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new un(0,0,1,1)),e instanceof ut&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=r,this.valid=!1,this._uvs=mI,this.uvMatrix=null,this.orig=i||n,this._rotate=Number(s||0),!0===s)this._rotate=2;else if(this._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new en(o.x,o.y):new en(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n?.url&&cr[n.url]&&ut.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,ut.removeFromCache(this),this.textureCacheIds=null}clone(){const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),i=new ut(this.baseTexture,!this.noFrame&&e,n,this.trim?.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===mI&&(this._uvs=new gI),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},i=Te.STRICT_TEXTURE_CACHE){const r="string"==typeof e;let s=null;r?s=e:e instanceof _n?(e.cacheId||(e.cacheId=`${n?.pixiIdPrefix||"pixiid"}-${dl()}`,_n.addToCache(e,e.cacheId)),s=e.cacheId):(e._pixiId||(e._pixiId=`${n?.pixiIdPrefix||"pixiid"}_${dl()}`),s=e._pixiId);let o=cr[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return o||e instanceof _n?!o&&e instanceof _n&&(o=new ut(e),ut.addToCache(o,s)):(n.resolution||(n.resolution=fa(e)),o=new ut(new _n(e,n)),o.baseTexture.cacheId=s,_n.addToCache(o.baseTexture,s),ut.addToCache(o,s)),o}static fromURL(e,n){const i=Object.assign({autoLoad:!1},n?.resourceOptions),r=ut.from(e,Object.assign({resourceOptions:i},n),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,n,i,r){return new ut(_n.fromBuffer(e,n,i,r))}static fromLoader(e,n,i,r){const s=new _n(e,Object.assign({scaleMode:Te.SCALE_MODE,resolution:fa(n)},r)),{resource:o}=s;o instanceof dI&&(o.url=n);const a=new ut(s);return i||(i=n),_n.addToCache(a.baseTexture,i),ut.addToCache(a,i),i!==n&&(_n.addToCache(a.baseTexture,n),ut.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),cr[n]&&cr[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),cr[n]=e)}static removeFromCache(e){if("string"==typeof e){const n=cr[e];if(n){const i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete cr[e],n}}else if(e?.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)cr[e.textureCacheIds[n]]===e&&delete cr[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:i,width:r,height:s}=e,o=n+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a)throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: X: ${n} + ${r} = ${n+r} > ${this.baseTexture.width} ${o&&a?"and":"or"} Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`);this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return ut._EMPTY||(ut._EMPTY=new ut(new _n),pg(ut._EMPTY),pg(ut._EMPTY.baseTexture)),ut._EMPTY}static get WHITE(){if(!ut._WHITE){const e=Te.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),ut._WHITE=new ut(_n.from(e)),pg(ut._WHITE),pg(ut._WHITE.baseTexture)}return ut._WHITE}}class ga extends ut{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,i=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(n*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new ga(new pI(e))}}let $z=(()=>{class t{constructor(n){this.texturePool={},this.textureOptions=n||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(n,i,r=ai.NONE){const s=new pI(Object.assign({width:n,height:i,resolution:1,multisample:r},this.textureOptions));return new ga(s)}getOptimalTexture(n,i,r=1,s=ai.NONE){let o;n=Math.ceil(n*r-1e-6),i=Math.ceil(i*r-1e-6),this.enableFullScreen&&n===this._pixelsWidth&&i===this._pixelsHeight?o=s>1?-s:-1:(o=((65535&(n=hg(n)))<<16|65535&(i=hg(i)))>>>0,s>1&&(o+=4294967296*s)),this.texturePool[o]||(this.texturePool[o]=[]);let a=this.texturePool[o].pop();return a||(a=this.createTexture(n,i,s)),a.filterPoolKey=o,a.setResolution(r),a}getFilterTexture(n,i,r){const s=this.getOptimalTexture(n.width,n.height,i||n.resolution,r||ai.NONE);return s.filterFrame=n.filterFrame,s}returnTexture(n){const i=n.filterPoolKey;n.filterFrame=null,this.texturePool[i].push(n)}returnFilterTexture(n){this.returnTexture(n)}clear(n){if(n=!1!==n)for(const i in this.texturePool){const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0)}this.texturePool={}}setScreenSize(n){if(n.width!==this._pixelsWidth||n.height!==this._pixelsHeight){this.enableFullScreen=n.width>0&&n.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const r=this.texturePool[i];if(r)for(let s=0;s<r.length;s++)r[s].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=n.width,this._pixelsHeight=n.height}}}return t.SCREEN_KEY=-1,t})();class gg{constructor(e,n=0,i=!1,r=St.FLOAT,s,o,a){this.buffer=e,this.size=n,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a}destroy(){this.buffer=null}static from(e,n,i,r,s){return new gg(e,n,i,r,s)}}let Wz=0;class ni{constructor(e,n=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=n,this.id=Wz++,this.disposeRunner=new ps("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?$s.ELEMENT_ARRAY_BUFFER:$s.ARRAY_BUFFER}get index(){return this.type===$s.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new ni(e)}}const Xz={Float32Array,Uint32Array,Int32Array,Uint8Array},vI={5126:4,5123:2,5121:1};let qz=0;const Kz={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class ma{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=qz++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new ps("disposeGeometry"),this.refCount=0}addAttribute(e,n,i=0,r=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof ni||(n instanceof Array&&(n=new Float32Array(n)),n=new ni(n));const c=e.split("|");if(c.length>1){for(let g=0;g<c.length;g++)this.addAttribute(c[g],n,i,r,s);return this}let f=this.buffers.indexOf(n);return-1===f&&(this.buffers.push(n),f=this.buffers.length-1),this.attributes[e]=new gg(f,i,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof ni||(e instanceof Array&&(e=new Uint16Array(e)),e=new ni(e)),e.type=$s.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;const e=[],n=[],i=new ni;let r;for(r in this.attributes){const s=this.attributes[r];e.push(this.buffers[s.buffer].data),n.push(s.size*vI[s.type]/4),s.buffer=0}for(i.data=function Yz(t,e){let n=0,i=0;const r={};for(let l=0;l<t.length;l++)i+=e[l],n+=t[l].length;const s=new ArrayBuffer(4*n);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],f=t[l],g=n0(f);r[g]||(r[g]=new Xz[g](s)),o=r[g];for(let v=0;v<f.length;v++)o[(v/c|0)*i+a+v%c]=f[v];a+=c}return new Float32Array(s)}(e,n),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new ma;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new ni(this.buffers[n].data.slice(0));for(const n in this.attributes){const i=this.attributes[n];e.attributes[n]=new gg(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=$s.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new ma,i=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new(Kz[n0(o.buffers[a].data)])(r[a]),n.buffers[a]=new ni(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=$s.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,f=0;for(let g=0;g<o.buffers.length;g++)if(o.buffers[g]!==o.indexBuffer){f=g;break}for(const g in o.attributes){const v=o.attributes[g];(0|v.buffer)===f&&(l+=v.size*vI[v.type]/4)}for(let g=0;g<e.length;g++){const v=e[g].indexBuffer.data;for(let _=0;_<v.length;_++)n.indexBuffer.data[_+c]+=a;a+=e[g].buffers[f].data.length/l,c+=v.length}}return n}}class Zz extends ma{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class _I extends ma{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ni(this.vertices),this.uvBuffer=new ni(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+n.width/e.width,this.uvs[3]=r,this.uvs[4]=i+n.width/e.width,this.uvs[5]=r+n.height/e.height,this.uvs[6]=i,this.uvs[7]=r+n.height/e.height,i=n.x,r=n.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+n.width,this.vertices[3]=r,this.vertices[4]=i+n.width,this.vertices[5]=r+n.height,this.vertices[6]=i,this.vertices[7]=r+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}let Qz=0;class ms{constructor(e,n,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Qz++,this.static=!!n,this.ubo=!!i,e instanceof ni?(this.buffer=e,this.buffer.type=$s.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new ni(new Float32Array(1)),this.buffer.type=$s.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,i){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new ms(n,i)}static from(e,n,i){return new ms(e,n,i)}static uboFrom(e,n){return new ms(e,n??!0,!0)}}class Jz{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=ai.NONE,this.sourceFrame=new un,this.destinationFrame=new un,this.bindingSourceFrame=new un,this.bindingDestinationFrame=new un,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const mg=[new en,new en,new en,new en],l0=new $n;class yI{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new $z,this.statePool=[],this.quad=new Zz,this.quadUv=new _I,this.tempRect=new un,this.activeState={},this.globalUniforms=new ms({outputFrame:new un,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new Jz,o=this.renderer.renderTexture;let a=n[0].resolution,l=n[0].multisample,c=n[0].padding,f=n[0].autoFit,g=n[0].legacy??!0;for(let y=1;y<n.length;y++){const E=n[y];a=Math.min(a,E.resolution),l=Math.min(l,E.multisample),c=this.useMaxPadding?Math.max(c,E.padding):c+E.padding,f=f&&E.autoFit,g=g||(E.legacy??!0)}1===r.length&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=a,s.multisample=l,s.legacy=g,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(c);const v=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(l0.copyFrom(i.projection.transform).invert(),v),f?(s.sourceFrame.fit(v),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(v)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const _=this.tempRect;_.x=0,_.y=0,_.width=s.sourceFrame.width,_.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,_),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),i=n.filters;this.activeState=n;const r=this.globalUniforms.uniforms;r.outputFrame=n.sourceFrame,r.resolution=n.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=r.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,n.renderTexture,l.renderTexture,zs.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,f=this.getOptimalFilterTexture(c.width,c.height,n.resolution);f.filterFrame=c.filterFrame;let g=0;for(g=0;g<i.length-1;++g){1===g&&n.multisample>1&&(f=this.getOptimalFilterTexture(c.width,c.height,n.resolution),f.filterFrame=c.filterFrame),i[g].apply(this,c,f,zs.CLEAR,n);const v=c;c=f,f=v}i[g].apply(this,c,l.renderTexture,zs.BLEND,n),g>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(f)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=zs.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(this.renderer.projection.transform=e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.activeState.transform:null,e?.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);(n===zs.CLEAR||n===zs.BLIT&&(1&r.stateId||this.forceClear))&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,i,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,r),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Vs.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Vs.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=n._texture,o=e.set(r.width,0,0,r.height,i.x,i.y),a=n.worldTransform.copyTo($n.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,i=1,r=ai.NONE){return this.texturePool.getOptimalTexture(e,n,i,r)}getFilterTexture(e,n,i){if("number"==typeof e){const s=e;e=n,n=s}const r=this.texturePool.getOptimalTexture((e=e||this.activeState.renderTexture).width,e.height,n||e.resolution,i||ai.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const i=mg[0],r=mg[1],s=mg[2],o=mg[3];i.set(n.left,n.top),r.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(i,i),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,r.x,s.x,o.x),l=Math.min(i.y,r.y,s.y,o.y),c=Math.max(i.x,r.x,s.x,o.x),f=Math.max(i.y,r.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=f-l}roundFrame(e,n,i,r,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}(s=s?l0.copyFrom(s):l0.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}yI.extension={type:We.RendererSystem,name:"filter"},_t.add(yI);class vg{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}class bI{constructor(e){this.renderer=e,this.emptyRenderer=new vg(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:i}=this.renderer.texture;for(let r=n-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,n,i,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const f=s[c],g=f._batchLocation;if(g>=0&&g<r&&n[g]===f)o[c]=g;else for(;l<r;){const v=n[l];if(!v||v._batchEnabled!==i||v._batchLocation!==l){o[c]=l,f._batchLocation=l,n[l]=f;break}l++}}}destroy(){this.renderer=null}}bI.extension={type:We.RendererSystem,name:"batch"},_t.add(bI);let wI=0;class xI{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=wI++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=wI++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;void 0!==n.addEventListener&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let i;if(Te.PREFER_ENV>=al.WEBGL2&&(i=e.getContext("webgl2",n)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}xI.extension={type:We.RendererSystem,name:"context"},_t.add(xI);class e${constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=ai.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const t$=new un;class EI{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new a0(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new un,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){let n=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;Te.PREFER_ENV===al.WEBGL_LEGACY&&(n=null,i=null),n?e.drawBuffers=r=>n.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,i=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>i,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,n.height>>i)}else this.setViewport(0,0,e.width>>i,e.height>>i)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,i,r){const s=this.viewport;e=Math.round(e),n=Math.round(n),i=Math.round(i),r=Math.round(r),(s.width!==i||s.height!==r||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=i,s.height=r,this.gl.viewport(e,n,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,i,r,s=jb.COLOR|jb.DEPTH){const{gl:o}=this;o.clearColor(e,n,i,r),o.clear(s)}initFramebuffer(e){const{gl:n}=this,i=new e$(n.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const r=e.colorTextures;let s=r.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),0===o&&i.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:i}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],f=c.parentTextureArray||c;this.renderer.texture.bind(f,0),0===l&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,f._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,c.target,f._glTextures[this.CONTEXT_UID].texture,n),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const c=e.depthTexture;this.renderer.texture.bind(c,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,n)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))}canMultisampleFramebuffer(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let i=ai.NONE;if(e<=1||null===n)return i;for(let r=0;r<n.length;r++)if(n[r]<=e){i=n[r];break}return 1===i&&(i=ai.NONE),i}blit(e,n,i){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(2!==s.context.webGLVersion||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const f=r.colorTextures[0];if(!f)return;l.blitFramebuffer||(l.blitFramebuffer=new a0(r.width,r.height),l.blitFramebuffer.addColorTexture(0,f)),(e=l.blitFramebuffer).colorTextures[0]!==f&&(e.colorTextures[0]=f,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}n||((n=t$).width=r.width,n.height=r.height),i||(i=n);const c=n.width===i.width&&n.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR)}disposeFramebuffer(e,n){const i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<n.length;i++)this.disposeFramebuffer(n[i],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const i=e.width,r=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,i,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,r),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new un}destroy(){this.renderer=null}}EI.extension={type:We.RendererSystem,name:"framebuffer"},_t.add(EI);const c0={5126:4,5123:2,5121:1};class CI{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==n.webGLVersion){let i=this.renderer.context.extensions.vertexArrayObject;Te.PREFER_ENV===al.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(2!==n.webGLVersion){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>i.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>i.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===n.webGLVersion||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:i}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++)n.update(e.buffers[i])}checkCompatibility(e,n){const i=e.attributes,r=n.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const i=e.attributes,r=n.attributeData,s=["g",e.id];for(const o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,n,i=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let f=c[l];if(f)return c[a.id]=f,f;const g=e.buffers,v=e.attributes,_={},y={};for(const E in g)_[E]=0,y[E]=0;for(const E in v)!v[E].size&&a.attributeData[E]?v[E].size=a.attributeData[E].size:v[E].size||console.warn(`PIXI Geometry attribute '${E}' size cannot be determined (likely the bound shader does not have the attribute)`),_[v[E].buffer]+=v[E].size*c0[v[E].type];for(const E in v){const S=v[E],T=S.size;void 0===S.stride&&(S.stride=_[S.buffer]===T*c0[S.type]?0:_[S.buffer]),void 0===S.start&&(S.start=y[S.buffer],y[S.buffer]+=T*c0[S.type])}f=r.createVertexArray(),r.bindVertexArray(f);for(let E=0;E<g.length;E++){const S=g[E];o.bind(S),i&&S._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=f,c[l]=f,r.bindVertexArray(null),o.unbind($s.ARRAY_BUFFER),f}disposeGeometry(e,n){if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=this.renderer?.buffer;if(e.disposeRunner.remove(this),i){if(o)for(let a=0;a<s.length;a++){const l=s[a]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&o.dispose(s[a],n))}if(!n)for(const a in i)if("g"===a[0]){const l=i[a];this._activeVao===l&&this.unbind(),r.deleteVertexArray(l)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let i=0;i<n.length;i++)this.disposeGeometry(this.managedGeometries[n[i]],e)}activateVao(e,n){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const f=a[c],g=o[f.buffer],v=g._glBuffers[r];if(n.attributeData[c]){l!==v&&(s.bind(g),l=v);const _=n.attributeData[c].location;if(i.enableVertexAttribArray(_),i.vertexAttribPointer(_,f.size,f.type||i.FLOAT,f.normalized,f.stride,f.start),f.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(_,1)}}}}draw(e,n,i,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=2===a?s.UNSIGNED_SHORT:s.UNSIGNED_INT;2===a||4===a&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(i||0)*a,r||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,n||o.getSize(),r||1):s.drawArrays(e,i,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}CI.extension={type:We.RendererSystem,name:"geometry"},_t.add(CI);class n${constructor(e=null){this.type=gi.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Te.FILTER_MULTISAMPLE,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=gi.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}const DI={};let yg,_g=DI;function SI(t,e,n){if("precision"!==t.substring(0,9)){let i=e;return e===Vr.HIGH&&n!==Vr.HIGH&&(i=Vr.MEDIUM),`precision ${i} float;\n${t}`}return n!==Vr.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}const s$={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function TI(t){return s$[t]}let bg=null;const AI={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function II(t,e){if(!bg){const n=Object.keys(AI);bg={};for(let i=0;i<n.length;++i){const r=n[i];bg[t[r]]=AI[r]}}return bg[e]}const Jc=[{test:t=>"float"===t.type&&1===t.size&&!t.isArray,code:t=>`\n            if(uv["${t}"] !== ud["${t}"].value)\n            {\n                ud["${t}"].value = uv["${t}"]\n                gl.uniform1f(ud["${t}"].location, uv["${t}"])\n            }\n            `},{test:(t,e)=>!("sampler2D"!==t.type&&"samplerCube"!==t.type&&"sampler2DArray"!==t.type||1!==t.size||t.isArray||null!=e&&void 0===e.castToBaseTexture),code:t=>`t = syncData.textureCount++;\n\n            renderer.texture.bind(uv["${t}"], t);\n\n            if(ud["${t}"].value !== t)\n            {\n                ud["${t}"].value = t;\n                gl.uniform1i(ud["${t}"].location, t);\n; // eslint-disable-line max-len\n            }`},{test:(t,e)=>"mat3"===t.type&&1===t.size&&!t.isArray&&void 0!==e.a,code:t=>`\n            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));\n            `,codeUbo:t=>`\n                var ${t}_matrix = uv.${t}.toArray(true);\n\n                data[offset] = ${t}_matrix[0];\n                data[offset+1] = ${t}_matrix[1];\n                data[offset+2] = ${t}_matrix[2];\n        \n                data[offset + 4] = ${t}_matrix[3];\n                data[offset + 5] = ${t}_matrix[4];\n                data[offset + 6] = ${t}_matrix[5];\n        \n                data[offset + 8] = ${t}_matrix[6];\n                data[offset + 9] = ${t}_matrix[7];\n                data[offset + 10] = ${t}_matrix[8];\n            `},{test:(t,e)=>"vec2"===t.type&&1===t.size&&!t.isArray&&void 0!==e.x,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["${t}"].location, v.x, v.y);\n                }`,codeUbo:t=>`\n                v = uv.${t};\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            `},{test:t=>"vec2"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);\n                }\n            `},{test:(t,e)=>"vec4"===t.type&&1===t.size&&!t.isArray&&void 0!==e.width,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)\n                }`,codeUbo:t=>`\n                    v = uv.${t};\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                `},{test:t=>"vec4"===t.type&&1===t.size&&!t.isArray,code:t=>`\n                cv = ud["${t}"].value;\n                v = uv["${t}"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])\n                }`}],o$={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},a$={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},c$=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function u$(t){let e="";for(let n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}let p$=0;const wg={};class Co{constructor(e,n,i="pixi-shader",r={}){this.extra={},this.id=p$++,this.vertexSrc=e||Co.defaultVertexSrc,this.fragmentSrc=n||Co.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=r,"#version"!==this.vertexSrc.substring(0,8)&&(i=i.replace(/\s+/g,"-"),wg[i]?(wg[i]++,i+=`-${wg[i]}`):wg[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}\n${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}\n${this.fragmentSrc}`,this.vertexSrc=SI(this.vertexSrc,Te.PRECISION_VERTEX,Vr.HIGH),this.fragmentSrc=SI(this.fragmentSrc,Te.PRECISION_FRAGMENT,function r$(){if(!yg){yg=Vr.MEDIUM;const t=function i$(){if(_g===DI||_g?.isContextLost()){const t=Te.ADAPTER.createCanvas();let e;Te.PREFER_ENV>=al.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),_g=e}return _g}();t&&t.getShaderPrecisionFormat&&(yg=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Vr.HIGH:Vr.MEDIUM)}return yg}())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}static from(e,n,i){const r=e+n;let s=sI[r];return s||(sI[r]=s=new Co(e,n,i)),s}}class Ws{constructor(e,n){this.uniformBindCount=0,this.program=e,this.uniformGroup=n?n instanceof ms?n:new ms(n):new ms({}),this.disposeRunner=new ps("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const i in n.uniforms){const r=n.uniforms[i];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,i){const r=Co.from(e,n);return new Ws(r,i)}}class Do{constructor(){this.data=0,this.blendMode=kt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(e){!!(1&this.data)!==e&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(e){!!(2&this.data)!==e&&(this.data^=2)}get culling(){return!!(4&this.data)}set culling(e){!!(4&this.data)!==e&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(e){!!(8&this.data)!==e&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(e){!!(32&this.data)!==e&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(e){!!(16&this.data)!==e&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==kt.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new Do;return e.depthTest=!1,e.blend=!0,e}}class vs extends Ws{constructor(e,n,i){super(Co.from(e||vs.defaultVertexSrc,n||vs.defaultFragmentSrc),i),this.padding=0,this.resolution=Te.FILTER_RESOLUTION,this.multisample=Te.FILTER_MULTISAMPLE,this.enabled=!0,this.autoFit=!0,this.state=new Do}apply(e,n,i,r,s){e.applyFilter(this,n,i,r)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}static get defaultFragmentSrc(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}const MI=new $n;class RI{constructor(e,n){this._texture=e,this.mapCoord=new $n,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){void 0===n&&(n=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];n[r]=s*i.a+o*i.c+i.tx,n[r+1]=s*i.b+o*i.d+i.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const i=n._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=n.orig,s=n.trim;s&&(MI.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(MI));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&0===n.rotate,!0}}class y$ extends vs{constructor(e,n,i){let r=null;"string"!=typeof e&&void 0===n&&void 0===i&&(r=e,e=void 0,n=void 0,i=void 0),super(e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",n||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i),this.maskSprite=r,this.maskMatrix=new $n}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,i,r){const s=this._maskSprite,o=s._texture;!o.valid||(o.uvMatrix||(o.uvMatrix=new RI(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,i,r))}}class PI{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let i=n;if(!i.isMaskData){const s=this.maskDataPool.pop()||new n$;s.pooled=!0,s.maskObject=n,i=s}const r=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==gi.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case gi.SCISSOR:this.renderer.scissor.push(i);break;case gi.STENCIL:this.renderer.stencil.push(i);break;case gi.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case gi.COLOR:this.pushColorMask(i)}i.type===gi.SPRITE&&this.maskStack.push(i)}pop(e){const n=this.maskStack.pop();if(n&&n._target===e){if(n.enabled)switch(n.type){case gi.SCISSOR:this.renderer.scissor.pop(n);break;case gi.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case gi.SPRITE:this.popSpriteMask(n);break;case gi.COLOR:this.popColorMask(n)}if(n.reset(),n.pooled&&this.maskDataPool.push(n),0!==this.maskStack.length){const i=this.maskStack[this.maskStack.length-1];i.type===gi.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const n=e.maskObject;e.type=n?n.isSprite?gi.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?gi.SCISSOR:gi.STENCIL:gi.COLOR}pushSpriteMask(e){const{maskObject:n}=e,i=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new y$]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const f=o.current;a=e.resolution||f.resolution,l=e.multisample??f.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=n;const c=i.filterArea;i.filterArea=n.getBounds(!0),s.filter.push(i,r),i.filterArea=c,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,i=e._colorMask=n&e.colorMask;i!==n&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}popColorMask(e){const i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==e._colorMask&&this.renderer.gl.colorMask(0!=(1&i),0!=(2&i),0!=(4&i),0!=(8&i))}destroy(){this.renderer=null}}PI.extension={type:We.RendererSystem,name:"mask"},_t.add(PI);class OI{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,i=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==i&&(0===r?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const kI=new $n,NI=[],xg=class extends OI{constructor(t){super(t),this.glConst=Te.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:i}=this,r=i.renderTexture,s=n.getBounds(!0,NI.pop()??new un);this.roundFrameToPixels(s,r.current?r.current.resolution:i.resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:i,d:r}=t;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||xg.isMatrixRotated(e.worldTransform)||xg.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,i,r){xg.isMatrixRotated(r)||((r=r?kI.copyFrom(r):kI.identity()).translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(r,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&NI.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let FI=xg;FI.extension={type:We.RendererSystem,name:"scissor"},_t.add(FI);class LI extends OI{constructor(e){super(e),this.glConst=Te.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;0!==s&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,0!==s&&(e._colorMask=s,i.colorMask(0!=(1&s),0!=(2&s),0!=(4&s),0!=(8&s))),this._useCurrent()}pop(e){const n=this.renderer.gl;if(0===this.getStackLength())n.disable(n.STENCIL_TEST);else{const i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;0!==r&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(i._colorMask=r,n.colorMask(0!=(1&r),0!=(2&r),0!=(4&r),0!=(8&r))),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}LI.extension={type:We.RendererSystem,name:"stencil"},_t.add(LI);class BI{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new $n,this.transform=null}update(e,n,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,i,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}BI.extension={type:We.RendererSystem,name:"projection"},_t.add(BI);const fl=new un,od=new un;class UI{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new un,this.destinationFrame=new un,this.viewportFrame=new un}bind(e=null,n,i){const r=this.renderer;let s,o,a;this.current=e,e?(s=e.baseTexture,a=s.resolution,n||(fl.width=e.frame.width,fl.height=e.frame.height,n=fl),i||(od.x=e.frame.x,od.y=e.frame.y,od.width=n.width,od.height=n.height,i=od),o=s.framebuffer):(a=r.resolution,n||(fl.width=r._view.screen.width,fl.height=r._view.screen.height,n=fl),i||((i=fl).width=n.width,i.height=n.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,n,a,!o),this.renderer.mask.setMaskStack(e?s.maskStack:this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(i)}clear(e,n){e=this.current?e||this.current.baseTexture.clearColor:e||this.renderer.background.colorRgba;const i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==r.width||i.height!==r.height;if(s){let{x:o,y:a,width:l,height:c}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,c)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],n),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}function b$(t,e,n,i,r){n.buffer.update(r)}UI.extension={type:We.RendererSystem,name:"renderTexture"},_t.add(UI);const w$={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},jI={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};class D${constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function HI(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function m0(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function VI(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return m0(2*e);case"bvec3":return m0(3*e);case"bvec4":return m0(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function GI(t,e){const n=t.getShaderSource(e).split("\n").map((c,f)=>`${f}: ${c}`),i=t.getShaderInfoLog(e),r=i.split("\n"),s={},o=r.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>!(!c||s[c]||(s[c]=!0,0))),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join("\n");a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}let ad,R$=0;const Eg={textureCount:0,uboCount:0};class zI{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=R$++}systemCheck(){if(!function M$(){if("boolean"==typeof ad)return ad;try{ad=!0===new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")}catch{ad=!1}return ad}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),n||(Eg.textureCount=0,Eg.uboCount=0,this.syncUniformGroup(e.uniformGroup,Eg)),r}setUniforms(e){const n=this.shader.program;n.syncUniforms(n.glPrograms[this.renderer.CONTEXT_UID].uniformData,e,this.renderer)}syncUniformGroup(e,n){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,n))}syncUniforms(e,n,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=function l$(t,e){const n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(const i in t.uniforms){const r=e[i];if(!r){t.uniforms[i]?.group&&n.push(t.uniforms[i].ubo?`\n                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');\n                    `:`\n                        renderer.shader.syncUniformGroup(uv.${i}, syncData);\n                    `);continue}const s=t.uniforms[i];let o=!1;for(let a=0;a<Jc.length;a++)if(Jc[a].test(r,s)){n.push(Jc[a].code(i,s)),o=!0;break}if(!o){const l=(1!==r.size||r.isArray?a$:o$)[r.type].replace("location",`ud["${i}"].location`);n.push(`\n            cu = ud["${i}"];\n            cv = cu.value;\n            v = uv["${i}"];\n            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const i=this.getGlProgram();if(!e.static||0!==e.dirtyId||!i.uniformGroups[e.id]){e.dirtyId=0;const r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,n);e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,Eg,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[n])}createSyncBufferGroup(e,n,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,i);n.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=function C$(t,e){if(!t.autoManage)return{size:0,syncFunc:b$};const n=function E$(t,e){const n=[];for(const i in t)e[i]&&n.push(e[i]);return n.sort((i,r)=>i.index-r.index),n}(t.uniforms,e),{uboElements:i,size:r}=function x$(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,i=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=jI[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,i%n!=0&&i<16){const a=i%n%16;i+=a,r+=a}i+n>16?(r=16*Math.ceil(r/16),o.offset=r,r+=n,i=n):(o.offset=r,i+=n,r+=n)}return r=16*Math.ceil(r/16),{uboElements:e,size:r}}(n),s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "];for(let o=0;o<i.length;o++){const a=i[o],l=t.uniforms[a.data.name],c=a.data.name;let f=!1;for(let g=0;g<Jc.length;g++){const v=Jc[g];if(v.codeUbo&&v.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Jc[g].codeUbo(a.data.name,l)),f=!0;break}}if(!f)if(a.data.size>1){const g=TI(a.data.type),v=Math.max(jI[a.data.type]/16,1),_=g/v;s.push(`\n                cv = ud.${c}.value;\n                v = uv.${c};\n                offset = ${a.offset/4};\n\n                t = 0;\n\n                for(var i=0; i < ${a.data.size*v}; i++)\n                {\n                    for(var j = 0; j < ${_}; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ${(4-_%4)%4};\n                }\n\n                `)}else s.push(`\n                cv = ud.${c}.value;\n                v = uv.${c};\n                offset = ${a.offset/4};\n                ${w$[a.data.type]};\n                `)}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,i){const r=e.uniforms,s=[`${i}-`];for(const o in r)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const i=e.program,r=function I$(t,e){const n=HI(t,t.VERTEX_SHADER,e.vertexSrc),i=HI(t,t.FRAGMENT_SHADER,e.fragmentSrc),r=t.createProgram();t.attachShader(r,n),t.attachShader(r,i);const s=e.extra?.transformFeedbackVaryings;if(s&&("function"!=typeof t.transformFeedbackVaryings?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(r,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||function A$(t,e,n,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||GI(t,n),t.getShaderParameter(i,t.COMPILE_STATUS)||GI(t,i),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,r,n,i),e.attributeData=function S$(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(t,r);if(s.name.startsWith("gl_"))continue;const o=II(e,s.type),a={type:o,name:s.name,size:TI(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}(r,t),e.uniformData=function T$(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=II(e,s.type);n[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:VI(l,s.size)}}return n}(r,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,f)=>c>f?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(r,c,l[c]);t.linkProgram(r)}t.deleteShader(n),t.deleteShader(i);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(r,l),value:VI(c.type,c.size)}}return new D$(r,o)}(this.gl,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}zI.extension={type:We.RendererSystem,name:"shader"},_t.add(zI);const v0=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=kt.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Do,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=function P$(t,e=[]){return e[kt.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.ADD]=[t.ONE,t.ONE],e[kt.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.NONE]=[0,0],e[kt.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[kt.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[kt.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[kt.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[kt.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[kt.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[kt.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[kt.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[kt.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[kt.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[kt.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()}set(t){if(this.stateId!==(t=t||this.defaultState).data){let e=this.stateId^t.data,n=0;for(;e;)1&e&&this.map[n].call(this,!!(t.data&1<<n)),e>>=1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(v0.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(v0.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;2===e.length?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&-1===n?this.checks.push(t):!e&&-1!==n&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let $I=v0;$I.extension={type:We.RendererSystem,name:"state"},_t.add($I);class WI{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Te.GC_MAX_IDLE,this.checkCountMax=Te.GC_MAX_CHECK_COUNT,this.mode=Te.GC_MODE}postrender(){!this.renderer.objectRenderer.renderingToScreen||(this.count++,this.mode!==Vb.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let i=!1;for(let r=0;r<n.length;r++){const s=n[r];!s.framebuffer&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[r]=null,i=!0)}if(i){let r=0;for(let s=0;s<n.length;s++)null!==n[s]&&(n[r++]=n[s]);n.length=r}}unload(e){const i=e._texture;i&&!i.framebuffer&&this.renderer.texture.destroyTexture(i);for(let r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}destroy(){this.renderer=null}}WI.extension={type:We.RendererSystem,name:"textureGC"},_t.add(WI);class _0{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=St.UNSIGNED_BYTE,this.internalFormat=Pe.RGBA,this.samplerType=0}}class XI{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new _n,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function U$(t){let e;return e="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?{[St.UNSIGNED_BYTE]:{[Pe.RGBA]:t.RGBA8,[Pe.RGB]:t.RGB8,[Pe.RG]:t.RG8,[Pe.RED]:t.R8,[Pe.RGBA_INTEGER]:t.RGBA8UI,[Pe.RGB_INTEGER]:t.RGB8UI,[Pe.RG_INTEGER]:t.RG8UI,[Pe.RED_INTEGER]:t.R8UI,[Pe.ALPHA]:t.ALPHA,[Pe.LUMINANCE]:t.LUMINANCE,[Pe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[St.BYTE]:{[Pe.RGBA]:t.RGBA8_SNORM,[Pe.RGB]:t.RGB8_SNORM,[Pe.RG]:t.RG8_SNORM,[Pe.RED]:t.R8_SNORM,[Pe.RGBA_INTEGER]:t.RGBA8I,[Pe.RGB_INTEGER]:t.RGB8I,[Pe.RG_INTEGER]:t.RG8I,[Pe.RED_INTEGER]:t.R8I},[St.UNSIGNED_SHORT]:{[Pe.RGBA_INTEGER]:t.RGBA16UI,[Pe.RGB_INTEGER]:t.RGB16UI,[Pe.RG_INTEGER]:t.RG16UI,[Pe.RED_INTEGER]:t.R16UI,[Pe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[St.SHORT]:{[Pe.RGBA_INTEGER]:t.RGBA16I,[Pe.RGB_INTEGER]:t.RGB16I,[Pe.RG_INTEGER]:t.RG16I,[Pe.RED_INTEGER]:t.R16I},[St.UNSIGNED_INT]:{[Pe.RGBA_INTEGER]:t.RGBA32UI,[Pe.RGB_INTEGER]:t.RGB32UI,[Pe.RG_INTEGER]:t.RG32UI,[Pe.RED_INTEGER]:t.R32UI,[Pe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[St.INT]:{[Pe.RGBA_INTEGER]:t.RGBA32I,[Pe.RGB_INTEGER]:t.RGB32I,[Pe.RG_INTEGER]:t.RG32I,[Pe.RED_INTEGER]:t.R32I},[St.FLOAT]:{[Pe.RGBA]:t.RGBA32F,[Pe.RGB]:t.RGB32F,[Pe.RG]:t.RG32F,[Pe.RED]:t.R32F,[Pe.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[St.HALF_FLOAT]:{[Pe.RGBA]:t.RGBA16F,[Pe.RGB]:t.RGB16F,[Pe.RG]:t.RG16F,[Pe.RED]:t.R16F},[St.UNSIGNED_SHORT_5_6_5]:{[Pe.RGB]:t.RGB565},[St.UNSIGNED_SHORT_4_4_4_4]:{[Pe.RGBA]:t.RGBA4},[St.UNSIGNED_SHORT_5_5_5_1]:{[Pe.RGBA]:t.RGB5_A1},[St.UNSIGNED_INT_2_10_10_10_REV]:{[Pe.RGBA]:t.RGB10_A2,[Pe.RGBA_INTEGER]:t.RGB10_A2UI},[St.UNSIGNED_INT_10F_11F_11F_REV]:{[Pe.RGB]:t.R11F_G11F_B10F},[St.UNSIGNED_INT_5_9_9_9_REV]:{[Pe.RGB]:t.RGB9_E5},[St.UNSIGNED_INT_24_8]:{[Pe.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[St.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Pe.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:{[St.UNSIGNED_BYTE]:{[Pe.RGBA]:t.RGBA,[Pe.RGB]:t.RGB,[Pe.ALPHA]:t.ALPHA,[Pe.LUMINANCE]:t.LUMINANCE,[Pe.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[St.UNSIGNED_SHORT_5_6_5]:{[Pe.RGB]:t.RGB},[St.UNSIGNED_SHORT_4_4_4_4]:{[Pe.RGBA]:t.RGBA},[St.UNSIGNED_SHORT_5_5_5_1]:{[Pe.RGBA]:t.RGBA}},e}(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let r=0;r<n;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new _0(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new _0(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,n=0){const{gl:i}=this;if(e=e?.castToBaseTexture(),e?.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===e&&(this.currentLocation!==r&&(n.activeTexture(n.TEXTURE0+r),this.currentLocation=r),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[r]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[r].samplerType!==Hb.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new _0(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){n.internalFormat=this.internalFormats[e.type]?.[e.format]??e.format,n.type=2===this.webGLVersion&&e.type===St.HALF_FLOAT?this.gl.HALF_FLOAT:e.type}updateTexture(e){const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const i=this.renderer;if(this.initTextureType(e,n),e.resource?.upload(i,e,n))n.samplerType!==Hb.FLOAT&&(this.hasIntegerTextures=!0);else{const r=e.realWidth,s=e.realHeight,o=i.gl;(n.width!==r||n.height!==s||n.dirtyId<0)&&(n.width=r,n.height=s,o.texImage2D(e.target,0,n.internalFormat,r,s,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:i}=this;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const r=this.managedTextures.indexOf(e);-1!==r&&Kc(this.managedTextures,r,1)}}updateTextureStyle(e){const n=e._glTextures[this.CONTEXT_UID];!n||(n.mipmap=!!(e.mipmap!==Gs.POW2&&2===this.webGLVersion||e.isPowerOfTwo)&&e.mipmap>=1,n.wrapMode=2===this.webGLVersion||e.isPowerOfTwo?e.wrapMode:ha.CLAMP,e.resource?.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const i=this.gl;if(n.mipmap&&e.mipmap!==Gs.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,n.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===wo.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===wo.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===wo.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===wo.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}XI.extension={type:We.RendererSystem,name:"texture"},_t.add(XI);const j$=new Kb;class YI{constructor(e){this.renderer=e,this._tempMatrix=new $n}generateTexture(e,n){const{region:i,...r}=n||{},s=i||e.getLocalBounds(null,!0);0===s.width&&(s.width=1),0===s.height&&(s.height=1);const o=ga.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=j$,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}YI.extension={type:[We.RendererSystem,We.CanvasRendererSystem],name:"textureGenerator"},_t.add(YI);class qI{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color="string"==typeof e.color?e0(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=JA(e),ed(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}qI.extension={type:[We.RendererSystem,We.CanvasRendererSystem],name:"background"},_t.add(qI);class KI{constructor(e){this.renderer=e}init(e){this.screen=new un(0,0,e.width,e.height),this.element=e.view||Te.ADAPTER.createCanvas(),this.resolution=e.resolution||Te.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){e&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}KI.extension={type:[We.RendererSystem,We.CanvasRendererSystem],name:"_view"},_t.add(KI);class ZI{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract)},prepare:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare)},interaction:{enumerable:!1,get:()=>(lr("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events)}})}init(e){for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}ZI.extension={type:[We.RendererSystem,We.CanvasRendererSystem],name:"_plugin"},_t.add(ZI);class H$ extends Jh{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(r=>e.systems[r]),i=[...n,...Object.keys(e.systems).filter(r=>!n.includes(r))];for(const r of i)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(n=>{this.runners[n]=new ps(n)})}addSystem(e,n){const i=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=i,this._systemsHash[n]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(e,n){const i=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=i.find(o=>this._systemsHash[o]===r);r[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}class QI{constructor(e){this.renderer=e}run(e){const n=this.renderer;n.emitWithCustomOptions(n.runners.init,e),e.hello&&console.log(`PixiJS 7.0.5 - ${n.rendererLogId} - https://pixijs.com`),n.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}QI.extension={type:[We.RendererSystem,We.CanvasRendererSystem],name:"startup"},_t.add(QI);class JI{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:i,renderer:r}=this;n&&r.shader.bind(n),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:i,CONTEXT_UID:r}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[r]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];!a||(i.buffer.update(a),a._glBuffers[r].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const i=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0===l.refCount&&!n&&s.dispose(a,n))}!i||(n||r.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}JI.extension={type:We.RendererSystem,name:"transformFeedback"},_t.add(JI);const eM=[];_t.handleByList(We.Renderer,eM);const y0=class extends H${constructor(t){super(),t=Object.assign({},Te.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new ms({projectionMatrix:new $n},!0),this.setup({runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:y0.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]}),"useContextAlpha"in t&&(lr("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&"notMultiplied"!==t.useContextAlpha,t.backgroundAlpha=!1===t.useContextAlpha?1:t.backgroundAlpha),this.startup.run({hello:t.hello,_plugin:y0.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}})}static test(t){return!t?.forceCanvas&&function $G(){return typeof Jb>"u"&&(Jb=function(){const e={stencil:!0,failIfMajorPerformanceCaveat:Te.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!Te.ADAPTER.getWebGLRenderingContext())return!1;const n=Te.ADAPTER.createCanvas();let i=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const r=!(!i||!i.getContextAttributes().stencil);if(i){const s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,r}catch{return!1}}()),Jb}()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return lr("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return lr("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return lr("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return lr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){lr("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return lr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){lr("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return lr("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let eu=y0;eu.extension={type:We.Renderer,priority:1},eu.__plugins={},eu.__systems={},_t.handleByMap(We.RendererPlugin,eu.__plugins),_t.handleByMap(We.RendererSystem,eu.__systems),_t.add(eu);class b0{constructor(){this.texArray=null,this.blend=0,this.type=Vs.TRIANGLES,this.start=0,this.size=0,this.data=null}}class w0{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}class x0{constructor(e){this.rawBinaryData="number"==typeof e?new ArrayBuffer(e):e instanceof Uint8Array?e.buffer:e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}class W${constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=ms.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Co(this.vertexSrc,r)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new $n,default:this.defaultGroupCache[e]};return new Ws(this.programCache[e],n)}generateSampleSrc(e){let n="";n+="\n",n+="\n";for(let i=0;i<e;i++)i>0&&(n+="\nelse "),i<e-1&&(n+=`if(vTextureId < ${i}.5)`),n+="\n{",n+=`\n\tcolor = texture2D(uSamplers[${i}], vTextureCoord);`,n+="\n}";return n+="\n",n+="\n",n}}class nM extends ma{constructor(e=!1){super(),this._buffer=new ni(null,e,!1),this._indexBuffer=new ni(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,St.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,St.FLOAT).addAttribute("aColor",this._buffer,4,!0,St.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,St.FLOAT).addIndex(this._indexBuffer)}}const pl=class extends vg{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=nM,this.vertexSize=6,this.state=Do.for2d(),this.size=4*Te.SPRITE_BATCH_SIZE,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.MAX_TEXTURES=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultVertexSrc(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}static get defaultFragmentTemplate(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}setShaderGenerator({vertex:t=pl.defaultVertexSrc,fragment:e=pl.defaultFragmentTemplate}={}){this.shaderGenerator=new W$(t,e)}contextChange(){const t=this.renderer.gl;Te.PREFER_ENV===al.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Te.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=function h$(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=c$.replace(/%forloop%/gi,u$(t));if(e.shaderSource(n,i),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return t}(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=pl,n=this.size/4,i=Math.floor(n/this.MAX_TEXTURES)+1;for(;t.length<n;)t.push(new b0);for(;e.length<i;)e.push(new w0);for(let r=0;r<this.MAX_TEXTURES;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,MAX_TEXTURES:e}=this,n=pl._textureArrayPool,i=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++_n._globalBatch,a=0,l=n[0],c=0;i.copyBoundTextures(r,e);for(let f=0;f<this._bufferSize;++f){const g=t[f];t[f]=null,g._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,c,f),c=f,l=n[++a],++o),g._batchEnabled=o,g.touched=s,l.elements[l.count++]=g)}l.count>0&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,c,this._bufferSize),++a,++o);for(let f=0;f<r.length;f++)r[f]=null;_n._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:i,_attributeBuffer:r,_indexBuffer:s,vertexSize:o}=this,a=pl._drawCallPool;let l=this._dcIndex,c=this._aIndex,f=this._iIndex,g=a[l];g.start=this._iIndex,g.texArray=t;for(let v=e;v<n;++v){const _=i[v],E=eI[_._texture.baseTexture.alphaMode?1:0][_.blendMode];i[v]=null,e<v&&g.blend!==E&&(g.size=f-g.start,e=v,g=a[++l],g.texArray=t,g.start=f),this.packInterleavedGeometry(_,r,s,c,f),c+=_.vertexData.length/2*o,f+=_.indices.length,g.blend=E}e<n&&(g.size=f-g.start,++l),this._dcIndex=l,this._aIndex=c,this._iIndex=f}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;Te.CAN_UPLOAD_SAME_BUFFER?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,i=pl._drawCallPool;let r=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:c,blend:f}=i[s];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=f,n.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,2*c)}}flush(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Te.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=hg(Math.ceil(t/8)),n=rI(e),i=8*e;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new x0(i*this.vertexSize*4)),r}getIndexBuffer(t){const e=hg(Math.ceil(t/12)),n=rI(e),i=12*e;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r}packInterleavedGeometry(t,e,n,i,r){const{uint32View:s,float32View:o}=e,a=i/this.vertexSize,l=t.uvs,c=t.indices,f=t.vertexData,g=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),_=v<1&&t._texture.baseTexture.alphaMode?t0(t._tintRGB,v):t._tintRGB+(255*v<<24);for(let y=0;y<f.length;y+=2)o[i++]=f[y],o[i++]=f[y+1],o[i++]=l[y],o[i++]=l[y+1],s[i++]=_,o[i++]=g;for(let y=0;y<c.length;y++)n[r++]=a+c[y]}};let Cg=pl;Cg.extension={name:"batch",type:We.RendererPlugin},Cg._drawCallPool=[],Cg._textureArrayPool=[],_t.add(Cg);class q${constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class iM{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[n]=e,i.bindBufferBase(i.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,n||0,o.buffer,256*i,256)}update(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,n.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(n||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let i=0;i<n.length;i++)this.dispose(this.managedBuffers[n[i]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:i}=this;return e._glBuffers[n]=new q$(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}iM.extension={type:We.RendererSystem,name:"buffer"},_t.add(iM);class rM{constructor(e){this.renderer=e}contextChange(e){let n;if(1===this.renderer.context.webGLVersion){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}this.multisample=n>=ai.HIGH?ai.HIGH:n>=ai.MEDIUM?ai.MEDIUM:n>=ai.LOW?ai.LOW:ai.NONE}destroy(){}}rM.extension={type:We.RendererSystem,name:"_multisample"},_t.add(rM);class sM{constructor(e){this.renderer=e}render(e,n){const i=this.renderer;let r,s,o,a;if(n&&(r=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),r&&(n.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}sM.extension={type:We.RendererSystem,name:"objectRenderer"},_t.add(sM),["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");class C0 extends vs{constructor(){super("attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",{m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1}),this.alpha=1}_loadMatrix(e,n=!1){let i=e;n&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,n,i){return e[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],e[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],e[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],e[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],e[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],e[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],e[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],e[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],e[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],e[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],e[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],e[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],e[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],e[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],e[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],e[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],e[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],e[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],e[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],e[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){this._loadMatrix([e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0],n)}tint(e,n){this._loadMatrix([(e>>16&255)/255,0,0,0,0,0,(e>>8&255)/255,0,0,0,0,0,(255&e)/255,0,0,0,0,0,1,0],n)}greyscale(e,n){this._loadMatrix([e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0],n)}blackAndWhite(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}hue(e,n){e=(e||0)/180*Math.PI;const i=Math.cos(e),r=Math.sin(e),o=1/3,a=(0,Math.sqrt)(o);this._loadMatrix([i+(1-i)*o,o*(1-i)-a*r,o*(1-i)+a*r,0,0,o*(1-i)+a*r,i+o*(1-i),o*(1-i)-a*r,0,0,o*(1-i)-a*r,o*(1-i)+a*r,i+o*(1-i),0,0,0,0,0,1,0],n)}contrast(e,n){const i=(e||0)+1,r=-.5*(i-1);this._loadMatrix([i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0],n)}saturate(e=0,n){const i=2*e/3+1,r=-.5*(i-1);this._loadMatrix([i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0],n)}desaturate(){this.saturate(-1)}negative(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}sepia(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}technicolor(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}polaroid(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}toBGR(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}kodachrome(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}browni(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}vintage(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}colorTone(e,n,i,r,s){const o=((i=i||16770432)>>16&255)/255,a=(i>>8&255)/255,l=(255&i)/255,c=((r=r||3375104)>>16&255)/255,f=(r>>8&255)/255,g=(255&r)/255;this._loadMatrix([.3,.59,.11,0,0,o,a,l,e=e||.2,0,c,f,g,n=n||.15,0,o-c,a-f,l-g,0,0],s)}night(e,n){this._loadMatrix([-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0],n)}predator(e,n){this._loadMatrix([11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0],n)}lsd(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}reset(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}C0.prototype.grayscale=C0.prototype.greyscale,Te.SORTABLE_CHILDREN=!1;class Dg{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?un.EMPTY:((e=e||new un(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:i,b:r,c:s,d:o,tx:a,ty:l}=e,c=i*n.x+s*n.y+a,f=r*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,f),this.maxY=Math.max(this.maxY,f)}addQuad(e){let n=this.minX,i=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,this.minX=n,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,n,i,r,s){this.addFrameMatrix(e.worldTransform,n,i,r,s)}addFrameMatrix(e,n,i,r,s){const o=e.a,a=e.b,l=e.c,c=e.d,f=e.tx,g=e.ty;let v=this.minX,_=this.minY,y=this.maxX,E=this.maxY,S=o*n+l*i+f,T=a*n+c*i+g;v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*r+l*i+f,T=a*r+c*i+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*n+l*s+f,T=a*n+c*s+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,S=o*r+l*s+f,T=a*r+c*s+g,v=S<v?S:v,_=T<_?T:_,y=S>y?S:y,E=T>E?T:E,this.minX=v,this.minY=_,this.maxX=y,this.maxY=E}addVertexData(e,n,i){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<i;l+=2){const c=e[l],f=e[l+1];r=c<r?c:r,s=f<s?f:s,o=c>o?c:o,a=f>a?f:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,i,r){this.addVerticesMatrix(e.worldTransform,n,i,r)}addVerticesMatrix(e,n,i,r,s=0,o=s){const a=e.a,l=e.b,c=e.c,f=e.d,g=e.tx,v=e.ty;let _=this.minX,y=this.minY,E=this.maxX,S=this.maxY;for(let T=i;T<r;T+=2){const R=n[T],I=n[T+1],k=a*R+c*I+g,V=f*I+l*R+v;_=Math.min(_,k-s),E=Math.max(E,k+s),y=Math.min(y,V-o),S=Math.max(S,V+o)}this.minX=_,this.minY=y,this.maxX=E,this.maxY=S}addBounds(e){const n=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const i=e.minX>n.minX?e.minX:n.minX,r=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,f=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const i=e.minX>n.x?e.minX:n.x,r=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(i<=s&&r<=o){const a=this.minX,l=this.minY,c=this.maxX,f=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>c?s:c,this.maxY=o>f?o:f}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,i,r,s,o){n-=o,i+=s,r+=o,this.minX=this.minX<(e-=s)?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>r?this.maxY:r}}class Kn extends Jh{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Kb,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Dg,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let i=0;i<n.length;++i){const r=n[i];Object.defineProperty(Kn.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new un),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new un),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Dg);const n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=n,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,i,r){return n&&(e=n.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){this.parent?.removeChild(this)}setTransform(e=0,n=0,i=1,r=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new fW),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*LG}set angle(e){this.transform.rotation=e*BG}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,0===n._maskRefCount&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(0===n._maskRefCount&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class fW extends Kn{constructor(){super(...arguments),this.sortDirty=null}}Kn.prototype.displayObjectUpdateTransform=Kn.prototype.updateTransform;const pW=new $n;function gW(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}class zr extends Kn{constructor(){super(),this.children=[],this.sortableChildren=Te.SORTABLE_CHILDREN,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const i=this.getChildIndex(e),r=this.getChildIndex(n);this.children[i]=n,this.children[r]=e,this.onChildrenChange(i<r?i:r)}getChildIndex(e){const n=this.children.indexOf(e);if(-1===n)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Kc(this.children,i,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],i=this.children.indexOf(n);if(-1===i)return null;n.parent=null,n.transform._parentID=-1,Kc(this.children,i,1),this._boundsID++,this.onChildrenChange(i),n.emit("removed",this),this.emit("childRemoved",n,this,i)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,Kc(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const s=n-e;let o;if(s>0&&s<=n){o=this.children.splice(e,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}if(0===s&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,i=this.children.length;n<i;++n){const r=this.children[n];r._lastSortedIndex=n,!e&&0!==r.zIndex&&(e=!0)}e&&this.children.length>1&&this.children.sort(gW),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(n.visible&&n.renderable)if(n.calculateBounds(),n._mask){const i=n._mask.isMaskData?n._mask.maskObject:n._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(n._bounds,i._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const i=super.getLocalBounds(e);if(!n)for(let r=0,s=this.children.length;r<s;++r){const o=this.children[r];o.visible&&o.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let i,r;this.cullArea?(i=this.cullArea,r=this.worldTransform):this._render!==zr.prototype._render&&(i=this.getBounds(!0));const s=e.projection.transform;if(s&&(r?(r=pW.copyFrom(r),r.prepend(s)):r=s),i&&n.intersects(i,r))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(e)}}renderAdvanced(e){const n=this.filters,i=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let s=0;s<n.length;s++)n[s].enabled&&this._enabledFilters.push(n[s])}const r=n&&this._enabledFilters?.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==gi.NONE));if(r&&e.batch.flush(),n&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let s=0,o=this.children.length;s<o;++s)this.children[s].render(e)}r&&e.batch.flush(),i&&e.mask.pop(this),n&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n="boolean"==typeof e?e:e?.children,i=this.removeChildren(0,this.children.length);if(n)for(let r=0;r<i.length;++r)i[r].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;this.scale.x=0!==n?e/n:1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;this.scale.y=0!==n?e/n:1,this._height=e}}zr.prototype.containerUpdateTransform=zr.prototype.updateTransform;const ld=new en,mW=new Uint16Array([0,1,2,0,2,3]);class gl extends zr{constructor(e){super(),this._anchor=new da(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=kt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||ut.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=mW,this.pluginName="batch",this.isSprite=!0,this._roundPixels=Te.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Zc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Zc(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,i=n.a,r=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,f=e.trim,g=e.orig,v=this._anchor;let _=0,y=0,E=0,S=0;if(f?(y=f.x-v._x*g.width,_=y+f.width,S=f.y-v._y*g.height,E=S+f.height):(y=-v._x*g.width,_=y+g.width,S=-v._y*g.height,E=S+g.height),c[0]=i*y+s*S+a,c[1]=o*S+r*y+l,c[2]=i*_+s*S+a,c[3]=o*S+r*_+l,c[4]=i*_+s*E+a,c[5]=o*E+r*_+l,c[6]=i*y+s*E+a,c[7]=o*E+r*y+l,this._roundPixels){const T=Te.RESOLUTION;for(let R=0;R<c.length;++R)c[R]=Math.round(c[R]*T)/T}}calculateTrimmedVertices(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const n=this.vertexTrimmedData,i=this._texture.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,f=s.tx,g=s.ty,v=-r._x*i.width,_=v+i.width,y=-r._y*i.height,E=y+i.height;n[0]=o*v+l*y+f,n[1]=c*y+a*v+g,n[2]=o*_+l*y+f,n[3]=c*y+a*_+g,n[4]=o*_+l*E+f,n[5]=c*E+a*_+g,n[6]=o*v+l*E+f,n[7]=c*E+a*v+g}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Dg),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new un),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,ld);const n=this._texture.orig.width,i=this._texture.orig.height,r=-n*this.anchor.x;let s=0;return ld.x>=r&&ld.x<r+n&&(s=-i*this.anchor.y,ld.y>=s&&ld.y<s+i)}destroy(e){super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,("boolean"==typeof e?e:e?.texture)&&this._texture.destroy(!!("boolean"==typeof e?e:e?.baseTexture)),this._texture=null}static from(e,n){const i=e instanceof ut?e:ut.from(e,n);return new gl(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Zc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Zc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||ut.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const oM=new $n;Kn.prototype._cacheAsBitmap=!1,Kn.prototype._cacheData=null,Kn.prototype._cacheAsBitmapResolution=null,Kn.prototype._cacheAsBitmapMultisample=null;class vW{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(Kn.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;let e;this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new vW),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}),Kn.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},Kn.prototype._initCachedDisplayObject=function(e){if(this._cacheData?.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const i=this.getLocalBounds(null,!0).clone();this.filters?.length&&i.pad(this.filters[0].padding),i.ceil(Te.RESOLUTION);const r=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=ga.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),c=`cacheAsBitmap_${dl()}`;this._cacheData.textureCacheId=c,_n.addToCache(l.baseTexture,c),ut.addToCache(l,c);const f=this.transform.localTransform.copyTo(oM).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const g=new gl(l);g.transform.worldTransform=this.transform.worldTransform,g.anchor.x=-i.x/i.width,g.anchor.y=-i.y/i.height,g.alpha=n,g._bounds=this._bounds,this._cacheData.sprite=g,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=g.containsPoint.bind(g)},Kn.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},Kn.prototype._initCachedDisplayObjectCanvas=function(e){if(this._cacheData?.sprite)return;const n=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=e.canvasContext.activeContext,s=e._projTransform;n.ceil(Te.RESOLUTION);const o=ga.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${dl()}`;this._cacheData.textureCacheId=a,_n.addToCache(o.baseTexture,a),ut.addToCache(o,a);const l=oM;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=r,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const c=new gl(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-n.x/n.width,c.anchor.y=-n.y/n.height,c.alpha=i,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)},Kn.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},Kn.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},Kn.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,_n.removeFromCache(this._cacheData.textureCacheId),ut.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Kn.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},Kn.prototype.name=null,zr.prototype.getChildByName=function(e,n){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===e)return this.children[i];if(n)for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null},Kn.prototype.getGlobalPosition=function(e=new en,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};class cd{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=cd.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new en,this.page=new en,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Sg extends cd{constructor(){super(...arguments),this.client=new en,this.movement=new en,this.offset=new en,this.global=new en,this.screen=new en}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,i,r,s,o,a,l,c,f,g,v,_,y,E){throw new Error("Method not implemented.")}}class _s extends Sg{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class D0 extends Sg{constructor(){super(...arguments),this.DOM_DELTA_LINE=0,this.DOM_DELTA_PAGE=1,this.DOM_DELTA_PIXEL=2}}const bW=new en,S0=new en;class wW{constructor(e){this.dispatch=new Jh,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let i=0,r=n.length;i<r;i++)n[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,bW.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,i=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const r=i.children;if(r)for(let s=0;s<r.length;s++)this.all(e,n,r[s]);e.currentTarget=i,this.notifyTarget(e,n)}propagationPath(e){const n=[e];for(let i=0;i<2048&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestRecursive(e,n,i,r,s){if(!e||!e.visible||s(e,i))return null;if(e.interactiveChildren&&e.children){const o=e.children;for(let a=o.length-1;a>=0;a--){const l=o[a],c=this.hitTestRecursive(l,n||l.interactive,i,r,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;return(c.length>0||e.interactive)&&c.push(e),c}}}return n&&r(e,i)?e.interactive?[e]:[]:null}hitPruneFn(e,n){if(e.hitArea&&(e.worldTransform.applyInverse(n,S0),!e.hitArea.contains(S0.x,S0.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!i.containsPoint?.(n))return!0}return!1}hitTestFn(e,n){return!!e.hitArea||!!e.containsPoint&&e.containsPoint(n)}notifyTarget(e,n){n=n??e.type,this.notifyListeners(e,e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.createPointerEvent(e);this.dispatchEvent(n,"pointerdown"),"touch"===n.pointerType?this.dispatchEvent(n,"touchstart"):"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.dispatchEvent(n,2===n.button?"rightdown":"mousedown"),this.trackingData(e.pointerId).pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.createPointerEvent(e),i="mouse"===n.pointerType||"pen"===n.pointerType,r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(r.overTargets&&s!==n.target){const l=this.createPointerEvent(e,"mousemove"===e.type?"mouseout":"pointerout",s);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!n.composedPath().includes(s)){const c=this.createPointerEvent(e,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!n.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),i&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(l)}if(s!==n.target){const l=this.clonePointerEvent(n,"mousemove"===e.type?"mouseover":"pointerover");this.dispatchEvent(l,"pointerover"),i&&this.dispatchEvent(l,"mouseover");let c=s?.parent;for(;c&&c!==this.rootTarget.parent&&c!==n.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const g=this.clonePointerEvent(n,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==s&&g.target!==this.rootTarget.parent;)g.currentTarget=g.target,this.notifyTarget(g),i&&this.notifyTarget(g,"mouseenter"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(l)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](n,"pointermove"),"touch"===n.pointerType&&this[o](n,"touchmove"),i&&(this[o](n,"mousemove"),this.cursor=n.target?.cursor),r.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),i=this.createPointerEvent(e),r="mouse"===i.pointerType||"pen"===i.pointerType;this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),"mouse"===i.pointerType&&(this.cursor=i.target?.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId);if(n.overTargets){const i="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=performance.now(),i=this.createPointerEvent(e);this.dispatchEvent(i,"pointerup"),"touch"===i.pointerType?this.dispatchEvent(i,"touchend"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.dispatchEvent(i,2===i.button?"rightup":"mouseup");const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);)i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),"touch"===i.pointerType?this.notifyTarget(i,"touchendoutside"):"mouse"!==i.pointerType&&"pen"!==i.pointerType||this.notifyTarget(i,2===i.button?"rightupoutside":"mouseupoutside"),a=a.parent;delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=r.clicksByButton[e.button];l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,"mouse"===a.pointerType?this.dispatchEvent(a,"click"):"touch"===a.pointerType&&this.dispatchEvent(a,"tap"),this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof _s))return void console.warn("EventBoundary cannot map a non-pointer event as a pointer event");const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):("mouse"===r.pointerType||"pen"===r.pointerType)&&this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof D0))return void console.warn("EventBoundary cannot map a non-wheel event as a wheel event");const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let i=1;i<e.length&&e[i].parent===n;i++)n=e[i];return n}createPointerEvent(e,n,i){const r=this.allocateEvent(_s);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=i??this.hitTest(r.global.x,r.global.y),"string"==typeof n&&(r.type=n),r}createWheelEvent(e){const n=this.allocateEvent(D0);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const i=this.allocateEvent(_s);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=n??i.type,i}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof _s&&n instanceof _s&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof Sg&&n instanceof Sg&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const i=e.currentTarget._events[n];if(i)if("fn"in i)i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].fn.call(i[r].context,e)}}const EW={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class aM{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new wW(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new _s(null),this.rootWheelEvent=new D0(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":n&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":n&&Object.assign(this.domElement.style,i)}else n&&"string"==typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=n.length;i<r;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const i=n!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&"touch"===e.pointerType)return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,i){let r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=this.domElement.width/r.width*(n-r.left)*s,e.y=this.domElement.height/r.height*(i-r.top)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=1===e.touches.length&&"touchstart"===e.type),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&!(this.supportsPointerEvents&&e instanceof globalThis.PointerEvent)){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=1),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=EW[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}}aM.extension={name:"events",type:[We.RendererSystem,We.CanvasRendererSystem]},_t.add(aM);const CW={interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r="function"==typeof e?void 0:e;this.on(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,r)},removeEventListener(t,e,n){const r="function"==typeof e?void 0:e;this.off(t="boolean"==typeof n&&n||"object"==typeof n&&n.capture?`${t}capture`:t,e="function"==typeof e?e:e.handleEvent,r)},dispatchEvent(t){if(!(t instanceof cd))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};Kn.mixin(CW),Kn.mixin({accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1});class uM{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Eo.tablet||Eo.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width="100px",n.style.height="100px",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=2..toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let i=0;i<n.length;i++)this.updateAccessibleObjects(n[i])}update(){const e=performance.now();if(Eo.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:i,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=r/o*l,f=s/a*l;let g=this.div;g.style.left=`${n}px`,g.style.top=`${i}px`,g.style.width=`${o}px`,g.style.height=`${a}px`;for(let v=0;v<this.children.length;v++){const _=this.children[v];if(_.renderId!==this.renderId)_._accessibleActive=!1,Kc(this.children,v,1),this.div.removeChild(_._accessibleDiv),this.pool.push(_._accessibleDiv),_._accessibleDiv=null,v--;else{g=_._accessibleDiv;let y=_.hitArea;const E=_.worldTransform;_.hitArea?(g.style.left=(E.tx+y.x*E.a)*c+"px",g.style.top=(E.ty+y.y*E.d)*f+"px",g.style.width=y.width*E.a*c+"px",g.style.height=y.height*E.d*f+"px"):(y=_.getBounds(),this.capHitArea(y),g.style.left=y.x*c+"px",g.style.top=y.y*f+"px",g.style.width=y.width*c+"px",g.style.height=y.height*f+"px",g.title!==_.accessibleTitle&&null!==_.accessibleTitle&&(g.title=_.accessibleTitle),g.getAttribute("aria-label")!==_.accessibleHint&&null!==_.accessibleHint&&g.setAttribute("aria-label",_.accessibleHint)),(_.accessibleTitle!==g.title||_.tabIndex!==g.tabIndex)&&(g.title=_.accessibleTitle,g.tabIndex=_.tabIndex,this.debug&&this.updateDebugHTML(g))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:i}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width="100px",n.style.height="100px",n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=2..toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?n.title=e.accessibleTitle:(!e.accessibleHint||null===e.accessibleHint)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&null!==e.accessibleHint&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:i}=e.target,r=this.renderer.events.rootBoundary,s=Object.assign(new cd(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){9===e.keyCode&&this.activate()}_onMouseMove(e){0===e.movementX&&0===e.movementY||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}uM.extension={name:"accessibility",type:[We.RendererPlugin,We.CanvasRendererPlugin]},_t.add(uM);const T0=class{constructor(t){this.stage=new zr,t=Object.assign({forceCanvas:!1},t),this.renderer=function V$(t){for(const e of eM)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}(t),T0._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=T0._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let A0=T0;A0._plugins=[],_t.handleByList(We.Application,A0._plugins);class hM{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{!this._resizeTo||(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;let n,i;if(this.cancelResize(),this._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;n=r,i=s}this.renderer.resize(n,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}hM.extension=We.Application,_t.add(hM);class RW{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}_next(){var e=this;return Ut(function*(){if(e._assetList.length&&e._isActive){e._isLoading=!0;const n=[],i=Math.min(e._assetList.length,e._maxConcurrent);for(let r=0;r<i;r++)n.push(e._assetList.pop());yield e._loader.load(n),e._isLoading=!1,e._next()}})()}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Ag(t,e){const n=t.split("?")[0],i=Ii.extname(n).toLowerCase();return Array.isArray(e)?e.includes(i.toLowerCase()):i.toLowerCase()===e}const So=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>"string"==typeof n?e(n):n):t),ud=new class PW{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const i=So(e);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){r=l.getCacheableAssets(i,n);break}}r||(r={},i.forEach(a=>{r[a]=n}));const s=Object.keys(r),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),n instanceof ut){const a=n;i.forEach(l=>{a.baseTexture!==ut.EMPTY.baseTexture&&_n.addToCache(a.baseTexture,l),ut.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e))return void console.warn(`[Assets] Asset id ${e} was not found in the Cache`);const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}},Ig=t=>!Array.isArray(t);class OW{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,n){var i=this;const r={promise:null,parser:null};return r.promise=Ut(function*(){let s=null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];if(a.load&&a.test?.(e,n,i)){s=yield a.load(e,n,i),r.parser=a;break}}if(!r.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let o=0;o<i.parsers.length;o++){const a=i.parsers[o];a.parse&&a.parse&&(yield a.testParse?.(s,n,i))&&(s=(yield a.parse(s,n,i))||s,r.parser=a)}return s})(),r}load(e,n){var i=this;return Ut(function*(){let r=0;const s={},o=Ig(e),a=So(e,f=>({src:f})),l=a.length,c=a.map(function(){var f=Ut(function*(g){const v=Ii.toAbsolute(g.src);if(!s[g.src])try{i.promiseCache[v]||(i.promiseCache[v]=i._getLoadPromiseAndParser(v,g)),s[g.src]=yield i.promiseCache[v].promise,n&&n(++r/l)}catch(_){throw delete i.promiseCache[v],delete s[g.src],new Error(`[Loader.load] Failed to load ${v}.\n${_}`)}});return function(g){return f.apply(this,arguments)}}());return yield Promise.all(c),o?s[a[0].src]:s})()}unload(e){var n=this;return Ut(function*(){const r=So(e,s=>({src:s})).map(function(){var s=Ut(function*(o){const a=Ii.toAbsolute(o.src),l=n.promiseCache[a];if(l){const c=yield l.promise;l.parser?.unload?.(c,o,n),delete n.promiseCache[a]}});return function(o){return s.apply(this,arguments)}}());yield Promise.all(r)})()}get parsers(){return this._parsers}}function dM(t,e,n,i,r){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?dM(t.replace(i[n],a),e,n+1,i,r):r.push(t.replace(i[n],a))}}function kW(t){const n=t.match(/\{(.*?)\}/g),i=[];if(n){const r=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),dM(t,r,0,n,i)}else i.push(t);return i}class NW{constructor(){this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this._preferredOrder=[],this._resolverHash={},this._assetMap={},this._rootPath=null,this._basePath=null,this._manifest=null}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const i=[];Array.isArray(n)?n.forEach(r=>{"string"==typeof r.name?i.push(r.name):i.push(...r.name),this.add(r.name,r.srcs)}):Object.keys(n).forEach(r=>{i.push(r),this.add(r,n[r])}),this._bundles[e]=i}add(e,n,i){const r=So(e);r.forEach(o=>{this._assetMap[o]&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(n="string"==typeof n?kW(n):[n]);const s=n.map(o=>{let a=o;if("string"==typeof o){let l=!1;for(let c=0;c<this._parsers.length;c++){const f=this._parsers[c];if(f.test(o)){a=f.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=Ii.toAbsolute(a.src,this._basePath,this._rootPath)),a.data=a.data??i,a});r.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=Ig(e);e=So(e);const i={};return e.forEach(r=>{const s=this._bundles[r];s&&(i[r]=this.resolve(s))}),n?i[e[0]]:i}resolveUrl(e){const n=this.resolve(e);if("string"!=typeof e){const i={};for(const r in n)i[r]=n[r].src;return i}return n.src}resolve(e){const n=Ig(e);e=So(e);const i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s),a=s[0];o?.priority.forEach(l=>{o.params[l].forEach(c=>{const f=s.filter(g=>!!g[l]&&g[l]===c);f.length&&(s=f)})}),this._resolverHash[r]=s[0]??a}else{let s=r;(this._basePath||this._rootPath)&&(s=Ii.toAbsolute(s,this._basePath,this._rootPath)),this._resolverHash[r]={src:s}}i[r]=this._resolverHash[r]}),n?i[e[0]]:i}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const i=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}}const Mg=new class FW{constructor(){this._detections=[],this._initialized=!1,this.resolver=new NW,this.loader=new OW,this.cache=ud,this._backgroundLoader=new RW(this.loader),this._backgroundLoader.active=!0,this.reset()}init(e={}){var n=this;return Ut(function*(){if(n._initialized)return void console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");if(n._initialized=!0,e.basePath&&(n.resolver.basePath=e.basePath),e.manifest){let o=e.manifest;"string"==typeof o&&(o=yield n.load(o)),n.resolver.addManifest(o)}const i=e.texturePreference?.resolution??1,r="number"==typeof i?[i]:i;let s=[];if(e.texturePreference?.format){const o=e.texturePreference?.format;s="string"==typeof o?[o]:o;for(const a of n._detections)(yield a.test())||(s=yield a.remove(s))}else for(const o of n._detections)(yield o.test())&&(s=yield o.add(s));n.resolver.prefer({params:{format:s,resolution:r}})})()}add(e,n,i){this.resolver.add(e,n,i)}load(e,n){var i=this;return Ut(function*(){i._initialized||(yield i.init());const r=Ig(e),s=So(e).map(l=>"string"!=typeof l?(i.resolver.add(l.src,l),l.src):l),o=i.resolver.resolve(s),a=yield i._mapLoadToResolve(o,n);return r?a[s[0]]:a})()}addBundle(e,n){this.resolver.addBundle(e,n)}loadBundle(e,n){var i=this;return Ut(function*(){i._initialized||(yield i.init());let r=!1;"string"==typeof e&&(r=!0,e=[e]);const s=i.resolver.resolveBundle(e),o={},a=Object.keys(s);let l=0,c=0;const f=()=>{n?.(++l/c)},g=a.map(v=>{const _=s[v];return c+=Object.keys(_).length,i._mapLoadToResolve(_,f).then(y=>{o[v]=y})});return yield Promise.all(g),r?o[e[0]]:o})()}backgroundLoad(e){var n=this;return Ut(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const i=n.resolver.resolve(e);n._backgroundLoader.add(Object.values(i))})()}backgroundLoadBundle(e){var n=this;return Ut(function*(){n._initialized||(yield n.init()),"string"==typeof e&&(e=[e]);const i=n.resolver.resolveBundle(e);Object.values(i).forEach(r=>{n._backgroundLoader.add(Object.values(r))})})()}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if("string"==typeof e)return ud.get(e);const n={};for(let i=0;i<e.length;i++)n[i]=ud.get(e[i]);return n}_mapLoadToResolve(e,n){var i=this;return Ut(function*(){const r=Object.values(e),s=Object.keys(e);i._backgroundLoader.active=!1;const o=yield i.loader.load(r,n);i._backgroundLoader.active=!0;const a={};return r.forEach((l,c)=>{const f=o[l.src],g=[l.src];l.alias&&g.push(...l.alias),a[s[c]]=f,ud.set(g,f)}),a})()}unload(e){var n=this;return Ut(function*(){n._initialized||(yield n.init());const i=So(e).map(s=>"string"!=typeof s?s.src:s),r=n.resolver.resolve(i);yield n._unloadFromResolved(r)})()}unloadBundle(e){var n=this;return Ut(function*(){n._initialized||(yield n.init()),e=So(e);const i=n.resolver.resolveBundle(e),r=Object.keys(i).map(s=>n._unloadFromResolved(i[s]));yield Promise.all(r)})()}_unloadFromResolved(e){var n=this;return Ut(function*(){const i=Object.values(e);i.forEach(r=>{ud.remove(r.src)}),yield n.loader.unload(i)})()}get detections(){return this._detections}};_t.handleByList(We.LoadParser,Mg.loader.parsers).handleByList(We.ResolveParser,Mg.resolver.parsers).handleByList(We.CacheParser,Mg.cache.parsers).handleByList(We.DetectionParser,Mg.detections);const fM={loader:We.LoadParser,resolver:We.ResolveParser,cache:We.CacheParser,detection:We.DetectionParser};_t.handle(We.Asset,t=>{const e=t.ref;Object.entries(fM).filter(([n])=>!!e[n]).forEach(([n,i])=>_t.add(Object.assign(e[n],{extension:e[n].extension??i})))},t=>{const e=t.ref;Object.keys(fM).filter(n=>!!e[n]).forEach(n=>_t.remove(e[n]))});const LW={extension:We.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof ut),getCacheableAssets:(t,e)=>{const n={};return t.forEach(i=>{e.forEach((r,s)=>{n[i+(0===s?"":s+1)]=r})}),n}};_t.add(LW);var Xs=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(Xs||{});const BW={extension:{type:We.LoadParser,priority:Xs.Low},test:t=>Ii.extname(t).includes(".json"),load:t=>Ut(function*(){return yield(yield Te.ADAPTER.fetch(t)).json()})()};_t.add(BW);const UW={extension:{type:We.LoadParser,priority:Xs.Low},test:t=>Ii.extname(t).includes(".txt"),load:t=>Ut(function*(){return yield(yield Te.ADAPTER.fetch(t)).text()})()};function pM(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}_t.add(UW);const jW=["normal","bold","100","200","300","400","500","600","700","800","900"],HW=[".ttf",".otf",".woff",".woff2"],VW=["font/ttf","font/otf","font/woff","font/woff2"],zW={extension:{type:We.LoadParser,priority:Xs.Low},test:t=>pM(t,VW)||Ag(t,HW),load:(t,e)=>Ut(function*(){if(!globalThis.navigator.onLine)throw new Error("[loadWebFont] Cannot load font - navigator is offline");const n=Te.ADAPTER.getFontFaceSet();if(n){const i=[],r=e.data?.family??function GW(t){const e=Ii.extname(t);return Ii.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}(t),s=e.data?.weights?.filter(a=>jW.includes(a))??["normal"],o=e.data??{};for(let a=0;a<s.length;a++){const l=s[a],c=new FontFace(r,`url(${encodeURI(t)})`,{...o,weight:l});yield c.load(),n.add(c),i.push(c)}return 1===i.length?i[0]:i}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null})(),unload(t){(Array.isArray(t)?t:[t]).forEach(e=>Te.ADAPTER.getFontFaceSet().delete(e))}};_t.add(zW);let I0,gM=0;const $W_code="\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ",WW_code="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };";let M0;const mM=new class XW{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([$W_code],{type:"application/javascript"})),i=new Worker(n);i.addEventListener("message",r=>{i.terminate(),URL.revokeObjectURL(n),e(r.data)})})),this._isImageBitmapSupported}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}_initWorkers(){var e=this;return Ut(function*(){e._initialized||(e._initialized=!0)})()}getWorker(){void 0===I0&&(I0=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<I0&&(M0||(M0=URL.createObjectURL(new Blob([WW_code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(M0),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}_run(e,n){var i=this;return Ut(function*(){yield i._initWorkers();const r=new Promise((s,o)=>{i.queue.push({id:e,arguments:n,resolve:s,reject:o})});return i.next(),r})()}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),i=n.id;this.resolveHash[gM]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:gM++,id:i})}};function Rg(t,e,n){const i=new ut(t);return i.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),i}const YW=[".jpeg",".jpg",".png",".webp",".avif"],qW=["image/jpeg","image/png","image/webp","image/avif"];function R0(){return(R0=Ut(function*(t){const e=yield Te.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=yield e.blob();return yield createImageBitmap(n)})).apply(this,arguments)}const P0={extension:{type:We.LoadParser,priority:Xs.High},config:{preferWorkers:!0},test:t=>pM(t,qW)||Ag(t,YW),load(t,e,n){var i=this;return Ut(function*(){let r=null;r=globalThis.createImageBitmap?i.config.preferWorkers&&(yield mM.isImageBitmapSupported())?yield mM.loadImageBitmap(t):yield function KW(t){return R0.apply(this,arguments)}(t):yield new Promise(o=>{r=new Image,r.crossOrigin="anonymous",r.src=t,r.complete?o(r):r.onload=()=>{o(r)}});const s=new _n(r,{resolution:fa(t),...e.data});return s.resource.src=t,Rg(s,n,t)})()},unload(t){t.destroy(!0)}};_t.add(P0);const ZW={extension:We.ResolveParser,test:P0.test,parse:t=>({resolution:parseFloat(Te.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})};_t.add(ZW);const QW={extension:{type:We.DetectionParser,priority:1},test:(t=Ut(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield Te.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then(i=>i.blob());return createImageBitmap(n).then(()=>!0,()=>!1)}),function(){return t.apply(this,arguments)}),add:function(){var t=Ut(function*(e){return[...e,"avif"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Ut(function*(e){return e.filter(n=>"avif"!==n)});return function(n){return t.apply(this,arguments)}}()};var t;_t.add(QW);const JW={extension:{type:We.DetectionParser,priority:0},test:function(){var t=Ut(function*(){if(!globalThis.createImageBitmap)return!1;const n=yield Te.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then(i=>i.blob());return createImageBitmap(n).then(()=>!0,()=>!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=Ut(function*(e){return[...e,"webp"]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Ut(function*(e){return e.filter(n=>"webp"!==n)});return function(n){return t.apply(this,arguments)}}()};_t.add(JW);const vM=["png","jpg","jpeg"],e6={extension:{type:We.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:function(){var t=Ut(function*(e){return[...e,...vM]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Ut(function*(e){return e.filter(n=>!vM.includes(n))});return function(n){return t.apply(this,arguments)}}()};_t.add(e6);var Sr=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Sr||{});const Pg={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};class t6 extends nd{constructor(e,n={width:1,height:1,autoLoad:!0}){let i,r;"string"==typeof e?(i=e,r=new Uint8Array):(i=null,r=e),super(r,n),this.origin=i,this.buffer=r?new x0(r):null,this.origin&&!1!==n.autoLoad&&this.load(),r?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){var e=this;return Ut(function*(){const r=yield(yield(yield fetch(e.origin)).blob()).arrayBuffer();return e.data=new Uint32Array(r),e.buffer=new x0(r),e.loaded=!0,e.onBlobLoaded(r),e.update(),e})()}}class ml extends t6{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=ml._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||ml._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,i){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:c,levelHeight:f,levelBuffer:g}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,c,f,0,g)}return!0}onBlobLoaded(){this._levelBuffers=ml._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,i,r,s,o,a){const l=new Array(i);let c=e.byteOffset,f=o,g=a,v=f+r-1&~(r-1),_=g+s-1&~(s-1),y=v*_*Pg[n];for(let E=0;E<i;E++)l[E]={levelID:E,levelWidth:i>1?f:v,levelHeight:i>1?g:_,levelBuffer:new Uint8Array(e.buffer,c,y)},c+=y,f=f>>1||1,g=g>>1||1,v=f+r-1&~(r-1),_=g+s-1&~(s-1),y=v*_*Pg[n];return l}}let To,tu;function _M(){tu={s3tc:To.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:To.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:To.getExtension("WEBGL_compressed_texture_etc"),etc1:To.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:To.getExtension("WEBGL_compressed_texture_pvrtc")||To.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:To.getExtension("WEBGL_compressed_texture_atc"),astc:To.getExtension("WEBGL_compressed_texture_astc")}}const n6={extension:{type:We.DetectionParser,priority:2},test:function(){var t=Ut(function*(){const n=Te.ADAPTER.createCanvas().getContext("webgl");return n?(To=n,!0):(console.warn("WebGL not available for compressed textures."),!1)});return function(){return t.apply(this,arguments)}}(),add:function(){var t=Ut(function*(e){tu||_M();const n=[];for(const i in tu)!tu[i]||n.push(i);return[...n,...e]});return function(n){return t.apply(this,arguments)}}(),remove:function(){var t=Ut(function*(e){return tu||_M(),e.filter(n=>!(n in tu))});return function(n){return t.apply(this,arguments)}}()};_t.add(n6);const y6={827611204:Sr.COMPRESSED_RGBA_S3TC_DXT1_EXT,861165636:Sr.COMPRESSED_RGBA_S3TC_DXT3_EXT,894720068:Sr.COMPRESSED_RGBA_S3TC_DXT5_EXT},b6={70:Sr.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Sr.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Sr.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Sr.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Sr.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Sr.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Sr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Sr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Sr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT},bM=[171,75,84,88,32,49,49,187,13,10,26,10],wM={[St.UNSIGNED_BYTE]:1,[St.UNSIGNED_SHORT]:2,[St.INT]:4,[St.UNSIGNED_INT]:4,[St.FLOAT]:4,[St.HALF_FLOAT]:8},E6={[Pe.RGBA]:4,[Pe.RGB]:3,[Pe.RG]:2,[Pe.RED]:1,[Pe.LUMINANCE]:1,[Pe.LUMINANCE_ALPHA]:2,[Pe.ALPHA]:1},C6={[St.UNSIGNED_SHORT_4_4_4_4]:2,[St.UNSIGNED_SHORT_5_5_5_1]:2,[St.UNSIGNED_SHORT_5_6_5]:2};function T6(t){switch(t){case Pe.RGBA:return Pe.RGBA_INTEGER;case Pe.RGB:return Pe.RGB_INTEGER;case Pe.RG:return Pe.RG_INTEGER;case Pe.RED:return Pe.RED_INTEGER;default:return t}}const I6={extension:{type:We.LoadParser,priority:Xs.High},test:t=>Ag(t,".dds"),load:(t,e,n)=>Ut(function*(){const o=function w6(t){const e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");const i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],s=i[4],o=i[7],a=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),l=a[1];if(4&l){const c=a[2];if(808540228!==c){const I=y6[c],V=new Uint8Array(t,128);return[new ml(V,{format:I,width:s,height:r,levels:o})]}const g=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),v=g[0],_=g[1],y=g[2],E=g[3],S=b6[v];if(void 0===S)throw new Error(`DDSParser cannot parse texture data with DXGI format ${v}`);if(4===y)throw new Error("DDSParser does not support cubemap textures");if(6===_)throw new Error("DDSParser does not supported 3D texture data");const T=new Array,R=148;if(1===E)T.push(new Uint8Array(t,R));else{const I=Pg[S];let k=0,V=s,K=r;for(let ae=0;ae<o;ae++)k+=Math.max(1,V+3&-4)*Math.max(1,K+3&-4)*I,V>>>=1,K>>>=1;let ee=R;for(let ae=0;ae<E;ae++)T.push(new Uint8Array(t,ee,k)),ee+=k}return T.map(I=>new ml(I,{format:S,width:s,height:r,levels:o}))}throw 64&l?new Error("DDSParser does not support uncompressed texture data."):512&l?new Error("DDSParser does not supported YUV uncompressed texture data."):131072&l?new Error("DDSParser does not support single-channel (lumninance) texture data!"):2&l?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}(yield(yield Te.ADAPTER.fetch(t)).arrayBuffer()).map(a=>Rg(new _n(a,{mipmap:Gs.OFF,alphaMode:fs.NO_PREMULTIPLIED_ALPHA,resolution:fa(t),...e.data}),n,t));return 1===o.length?o[0]:o})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};_t.add(I6);const M6={extension:{type:We.LoadParser,priority:Xs.High},test:t=>Ag(t,".ktx"),load:(t,e,n)=>Ut(function*(){const r=yield(yield Te.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=function D6(t,e,n=!1){const i=new DataView(e);if(!function S6(t,e){for(let n=0;n<bM.length;n++)if(e.getUint8(n)!==bM[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}(t,i))return null;const r=67305985===i.getUint32(12,!0),s=i.getUint32(16,r),o=i.getUint32(24,r),a=i.getUint32(28,r),l=i.getUint32(36,r),c=i.getUint32(40,r)||1,f=i.getUint32(44,r)||1,g=i.getUint32(48,r)||1,v=i.getUint32(52,r),_=i.getUint32(56,r),y=i.getUint32(60,r);if(0===c||1!==f)throw new Error("Only 2D textures are supported");if(1!==v)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==g)throw new Error("WebGL does not support array textures");const T=l+3&-4,R=c+3&-4,I=new Array(g);let V,k=l*c;if(0===s&&(k=T*R),V=0!==s?wM[s]?wM[s]*E6[o]:C6[s]:Pg[a],void 0===V)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const K=n?function A6(t,e,n){const i=new Map;let r=0;for(;r<e;){const s=t.getUint32(64+r,n),o=64+r+4,a=3-(s+3)%4;if(0===s||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&0!==t.getUint8(o+l);l++);if(-1===l){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=(new TextDecoder).decode(new Uint8Array(t.buffer,o,l)),f=new DataView(t.buffer,o+l+1,s-l-1);i.set(c,f),r+=4+s+a}return i}(i,y,r):null;let ae=k*V,ye=l,de=c,se=T,fe=R,he=64+y;for(let me=0;me<_;me++){const Ye=i.getUint32(he,r);let lt=he+4;for(let it=0;it<g;it++){let vn=I[it];vn||(vn=I[it]=new Array(_)),vn[me]={levelID:me,levelWidth:_>1||0!==s?ye:se,levelHeight:_>1||0!==s?de:fe,levelBuffer:new Uint8Array(e,lt,ae)},lt+=ae}he+=Ye+4,he=he%4!=0?he+4-he%4:he,ye=ye>>1||1,de=de>>1||1,se=ye+4-1&-4,fe=de+4-1&-4,ae=se*fe*V}return 0!==s?{uncompressed:I.map(me=>{let Ye=me[0].levelBuffer,lt=!1;return s===St.FLOAT?Ye=new Float32Array(me[0].levelBuffer.buffer,me[0].levelBuffer.byteOffset,me[0].levelBuffer.byteLength/4):s===St.UNSIGNED_INT?(lt=!0,Ye=new Uint32Array(me[0].levelBuffer.buffer,me[0].levelBuffer.byteOffset,me[0].levelBuffer.byteLength/4)):s===St.INT&&(lt=!0,Ye=new Int32Array(me[0].levelBuffer.buffer,me[0].levelBuffer.byteOffset,me[0].levelBuffer.byteLength/4)),{resource:new nd(Ye,{width:me[0].levelWidth,height:me[0].levelHeight}),type:s,format:lt?T6(o):o}}),kvData:K}:{compressed:I.map(me=>new ml(null,{format:a,width:l,height:c,levels:_,levelBuffers:me})),kvData:K}}(t,r),l=s??o,c={mipmap:Gs.OFF,alphaMode:fs.NO_PREMULTIPLIED_ALPHA,resolution:fa(t),...e.data},f=l.map(g=>{l===o&&Object.assign(c,{type:g.type,format:g.format});const v=new _n(g,c);return v.ktxKeyValueData=a,Rg(v,n,t)});return 1===f.length?f[0]:f})(),unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};_t.add(M6);const R6={extension:We.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{if("ktx"===t.split("?")[0].split(".").pop()){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(i.some(r=>t.endsWith(r)))return{resolution:parseFloat(Te.RETINA_PREFIX.exec(t)?.[1]??"1"),format:i.find(r=>t.endsWith(r)),src:t}}return{resolution:parseFloat(Te.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t}}};_t.add(R6);const xM=new un,N0=class{constructor(t){this.renderer=t}image(t,e,n){var i=this;return Ut(function*(){const r=new Image;return r.src=yield i.base64(t,e,n),r})()}base64(t,e,n){var i=this;return Ut(function*(){const r=i.canvas(t);if(void 0!==r.toDataURL)return r.toDataURL(e,n);if(void 0!==r.convertToBlob){const s=yield r.convertToBlob({type:e,quality:n});return yield new Promise(o=>{const a=new FileReader;a.onload=()=>o(a.result),a.readAsDataURL(s)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")})()}canvas(t,e){const n=this.renderer;let i,s,r=!1,o=!1;t&&(t instanceof ga?s=t:(s=this.renderer.generateTexture(t),o=!0)),s?(i=s.baseTexture.resolution,e=e??s.frame,r=!1,n.renderTexture.bind(s)):(i=n.resolution,e||((e=xM).width=n.width,e.height=n.height),r=!0,n.renderTexture.bind(null));const a=Math.round(e.width*i),l=Math.round(e.height*i);let c=new oI(a,l,1);const f=new Uint8Array(4*a*l),g=n.gl;g.readPixels(Math.round(e.x*i),Math.round(e.y*i),a,l,g.RGBA,g.UNSIGNED_BYTE,f);const v=c.context.getImageData(0,0,a,l);if(N0.arrayPostDivide(f,v.data),c.context.putImageData(v,0,0),r){const _=new oI(c.width,c.height,1);_.context.scale(1,-1),_.context.drawImage(c.canvas,0,-l),c.destroy(),c=_}return o&&s.destroy(!0),c.canvas}pixels(t,e){const n=this.renderer;let i,r,s=!1;t&&(t instanceof ga?r=t:(r=this.renderer.generateTexture(t),s=!0)),r?(i=r.baseTexture.resolution,e=e??r.frame,n.renderTexture.bind(r)):(i=n.resolution,e||((e=xM).width=n.width,e.height=n.height),n.renderTexture.bind(null));const o=Math.round(e.width*i),a=Math.round(e.height*i),l=new Uint8Array(4*o*a),c=n.gl;return c.readPixels(Math.round(e.x*i),Math.round(e.y*i),o,a,c.RGBA,c.UNSIGNED_BYTE,l),s&&r.destroy(!0),N0.arrayPostDivide(l,l),l}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let n=0;n<t.length;n+=4){const i=e[n+3]=t[n+3];0!==i?(e[n]=Math.round(Math.min(255*t[n]/i,255)),e[n+1]=Math.round(Math.min(255*t[n+1]/i,255)),e[n+2]=Math.round(Math.min(255*t[n+2]/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}}};let CM=N0;CM.extension={name:"extract",type:We.RendererSystem},_t.add(CM);var va=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(va||{}),vl=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(vl||{});const hd={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class Fg{constructor(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Fg;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=ut.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}function DM(t,e=!1){const n=t.length;if(n<6)return;let i=0;for(let r=0,s=t[n-2],o=t[n-1];r<n;r+=2){const a=t[r],l=t[r+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const r=n/2;for(let s=r+r%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const F0={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const i=t.holes,r=e.points,s=e.indices;if(n.length>=6){DM(n,!1);const o=[];for(let c=0;c<i.length;c++){const f=i[c];DM(f.points,!0),o.push(n.length/2),n=n.concat(f.points)}const a=jG(n,o,2);if(!a)return;const l=r.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)r.push(n[c])}}},dd={build(t){const e=t.points;let n,i,r,s,o,a;if(t.type===Ai.CIRC){const y=t.shape;n=y.x,i=y.y,o=a=y.radius,r=s=0}else if(t.type===Ai.ELIP){const y=t.shape;n=y.x,i=y.y,o=y.width,a=y.height,r=s=0}else{const y=t.shape,E=y.width/2,S=y.height/2;n=y.x+E,i=y.y+S,o=a=Math.max(0,Math.min(y.radius,Math.min(E,S))),r=E-o,s=S-a}if(!(o>=0&&a>=0&&r>=0&&s>=0))return void(e.length=0);const l=Math.ceil(2.3*Math.sqrt(o+a)),c=8*l+(r?4:0)+(s?4:0);if(e.length=c,0===c)return;if(0===l)return e.length=8,e[0]=e[6]=n+r,e[1]=e[3]=i+s,e[2]=e[4]=n-r,void(e[5]=e[7]=i-s);let f=0,g=4*l+(r?2:0)+2,v=g,_=c;{const y=r+o,E=s,S=n+y,T=n-y,R=i+E;if(e[f++]=S,e[f++]=R,e[--g]=R,e[--g]=T,s){const I=i-E;e[v++]=T,e[v++]=I,e[--_]=I,e[--_]=S}}for(let y=1;y<l;y++){const E=Math.PI/2*(y/l),S=r+Math.cos(E)*o,T=s+Math.sin(E)*a,R=n+S,I=n-S,k=i+T,V=i-T;e[f++]=R,e[f++]=k,e[--g]=k,e[--g]=I,e[v++]=I,e[v++]=V,e[--_]=V,e[--_]=R}{const E=s+a,S=n+r,T=n-r,R=i+E,I=i-E;e[f++]=S,e[f++]=R,e[--_]=I,e[--_]=S,r&&(e[f++]=T,e[f++]=R,e[--_]=I,e[--_]=T)}},triangulate(t,e){const n=t.points,i=e.points,r=e.indices;if(0===n.length)return;let s=i.length/2;const o=s;let a,l;if(t.type!==Ai.RREC){const f=t.shape;a=f.x,l=f.y}else{const f=t.shape;a=f.x+f.width/2,l=f.y+f.height/2}const c=t.matrix;i.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,i.push(n[0],n[1]);for(let f=2;f<n.length;f+=2)i.push(n[f],n[f+1]),r.push(s++,o,s);r.push(o+1,o,s)}},SM={build(t){const e=t.shape,n=e.x,i=e.y,r=e.width,s=e.height,o=t.points;o.length=0,r>=0&&s>=0&&o.push(n,i,n+r,i,n+r,i+s,n,i+s)},triangulate(t,e){const n=t.points,i=e.points;if(0===n.length)return;const r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},TM={build(t){dd.build(t)},triangulate(t,e){dd.triangulate(t,e)}};function AM(t,e,n,i,r,s,o,a){let v,_;o?(v=i,_=-n):(v=-i,_=n);const S=t+n*s+v,T=e+i*s+_;return a.push(t-n*r+v,e-i*r+_),a.push(S,T),2}function _l(t,e,n,i,r,s,o,a){const l=n-t,c=i-e;let f=Math.atan2(l,c),g=Math.atan2(r-t,s-e);a&&f<g?f+=2*Math.PI:!a&&f>g&&(g+=2*Math.PI);let v=f;const _=g-f,y=Math.abs(_),E=Math.sqrt(l*l+c*c),S=1+(15*y*Math.sqrt(E)/Math.PI>>0),T=_/S;if(v+=T,a){o.push(t,e),o.push(n,i);for(let R=1,I=v;R<S;R++,I+=T)o.push(t,e),o.push(t+Math.sin(I)*E,e+Math.cos(I)*E);o.push(t,e),o.push(r,s)}else{o.push(n,i),o.push(t,e);for(let R=1,I=v;R<S;R++,I+=T)o.push(t+Math.sin(I)*E,e+Math.cos(I)*E),o.push(t,e);o.push(r,s),o.push(t,e)}return 2*S}function L0(t,e){t.lineStyle.native?function O6(t,e){let n=0;const i=t.shape,r=t.points||i.points,s=i.type!==Ai.POLY||i.closeStroke;if(0===r.length)return;const o=e.points,a=e.indices,l=r.length/2,c=o.length/2;let f=c;for(o.push(r[0],r[1]),n=1;n<l;n++)o.push(r[2*n],r[2*n+1]),a.push(f,f+1),f++;s&&a.push(f,c)}(t,e):function P6(t,e){const n=t.shape;let i=t.points||n.points.slice();const r=e.closePointEps;if(0===i.length)return;const s=t.lineStyle,o=new en(i[0],i[1]),a=new en(i[i.length-2],i[i.length-1]),l=n.type!==Ai.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){i=i.slice(),c&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const it=.5*(o.x+a.x),vn=.5*(a.y+o.y);i.unshift(it,vn),i.push(it,vn)}const f=e.points,g=i.length/2;let v=i.length;const _=f.length/2,y=s.width/2,E=y*y,S=s.miterLimit*s.miterLimit;let T=i[0],R=i[1],I=i[2],k=i[3],V=0,K=0,ee=-(R-k),ae=T-I,ye=0,de=0,se=Math.sqrt(ee*ee+ae*ae);ee/=se,ae/=se,ee*=y,ae*=y;const fe=s.alignment,he=2*(1-fe),me=2*fe;l||(s.cap===vl.ROUND?v+=_l(T-ee*(he-me)*.5,R-ae*(he-me)*.5,T-ee*he,R-ae*he,T+ee*me,R+ae*me,f,!0)+2:s.cap===vl.SQUARE&&(v+=AM(T,R,ee,ae,he,me,!0,f))),f.push(T-ee*he,R-ae*he),f.push(T+ee*me,R+ae*me);for(let it=1;it<g-1;++it){T=i[2*(it-1)],R=i[2*(it-1)+1],I=i[2*it],k=i[2*it+1],V=i[2*(it+1)],K=i[2*(it+1)+1],ee=-(R-k),ae=T-I,se=Math.sqrt(ee*ee+ae*ae),ee/=se,ae/=se,ee*=y,ae*=y,ye=-(k-K),de=I-V,se=Math.sqrt(ye*ye+de*de),ye/=se,de/=se,ye*=y,de*=y;const vn=I-T,an=R-k,qr=I-V,Qs=K-k,ko=vn*qr+an*Qs,Js=an*qr-Qs*vn,No=Js<0;if(Math.abs(Js)<.001*Math.abs(ko)){f.push(I-ee*he,k-ae*he),f.push(I+ee*me,k+ae*me),ko>=0&&(v+=s.join===va.ROUND?_l(I,k,I-ee*he,k-ae*he,I-ye*he,k-de*he,f,!1)+4:2,f.push(I-ye*me,k-de*me),f.push(I+ye*he,k+de*he));continue}const yu=(-ee+T)*(-ae+k)-(-ee+I)*(-ae+R),bu=(-ye+V)*(-de+k)-(-ye+I)*(-de+K),Fm=(vn*bu-qr*yu)/Js,Lm=(Qs*yu-an*bu)/Js,ax=(Fm-I)*(Fm-I)+(Lm-k)*(Lm-k),Pl=I+(Fm-I)*he,Ol=k+(Lm-k)*he,kl=I-(Fm-I)*me,Nl=k-(Lm-k)*me,rk=No?he:me;ax<=Math.min(vn*vn+an*an,qr*qr+Qs*Qs)+rk*rk*E?s.join===va.BEVEL||ax/E>S?(No?(f.push(Pl,Ol),f.push(I+ee*me,k+ae*me),f.push(Pl,Ol),f.push(I+ye*me,k+de*me)):(f.push(I-ee*he,k-ae*he),f.push(kl,Nl),f.push(I-ye*he,k-de*he),f.push(kl,Nl)),v+=2):s.join===va.ROUND?No?(f.push(Pl,Ol),f.push(I+ee*me,k+ae*me),v+=_l(I,k,I+ee*me,k+ae*me,I+ye*me,k+de*me,f,!0)+4,f.push(Pl,Ol),f.push(I+ye*me,k+de*me)):(f.push(I-ee*he,k-ae*he),f.push(kl,Nl),v+=_l(I,k,I-ee*he,k-ae*he,I-ye*he,k-de*he,f,!1)+4,f.push(I-ye*he,k-de*he),f.push(kl,Nl)):(f.push(Pl,Ol),f.push(kl,Nl)):(f.push(I-ee*he,k-ae*he),f.push(I+ee*me,k+ae*me),s.join===va.ROUND?v+=No?_l(I,k,I+ee*me,k+ae*me,I+ye*me,k+de*me,f,!0)+2:_l(I,k,I-ee*he,k-ae*he,I-ye*he,k-de*he,f,!1)+2:s.join===va.MITER&&ax/E<=S&&(No?(f.push(kl,Nl),f.push(kl,Nl)):(f.push(Pl,Ol),f.push(Pl,Ol)),v+=2),f.push(I-ye*he,k-de*he),f.push(I+ye*me,k+de*me),v+=2)}T=i[2*(g-2)],R=i[2*(g-2)+1],I=i[2*(g-1)],k=i[2*(g-1)+1],ee=-(R-k),ae=T-I,se=Math.sqrt(ee*ee+ae*ae),ee/=se,ae/=se,ee*=y,ae*=y,f.push(I-ee*he,k-ae*he),f.push(I+ee*me,k+ae*me),l||(s.cap===vl.ROUND?v+=_l(I-ee*(he-me)*.5,k-ae*(he-me)*.5,I-ee*he,k-ae*he,I+ee*me,k+ae*me,f,!1)+2:s.cap===vl.SQUARE&&(v+=AM(I,k,ee,ae,he,me,!1,f)));const Ye=e.indices,lt=hd.epsilon*hd.epsilon;for(let it=_;it<v+_-2;++it)T=f[2*it],R=f[2*it+1],I=f[2*(it+1)],k=f[2*(it+1)+1],V=f[2*(it+2)],K=f[2*(it+2)+1],!(Math.abs(T*(k-K)+I*(K-R)+V*(R-k))<lt)&&Ye.push(it,it+1,it+2)}(t,e)}class B0{static curveTo(e,n,i,r,s,o){const c=o[o.length-1]-n,f=o[o.length-2]-e,g=r-n,v=i-e,_=Math.abs(c*v-f*g);if(_<1e-8||0===s)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const y=c*c+f*f,E=g*g+v*v,S=c*g+f*v,T=s*Math.sqrt(y)/_,R=s*Math.sqrt(E)/_,I=T*S/y,k=R*S/E,V=T*v+R*f,K=T*g+R*c,ye=v*(T+k),de=g*(T+k);return{cx:V+e,cy:K+n,radius:s,startAngle:Math.atan2(c*(R+I)-K,f*(R+I)-V),endAngle:Math.atan2(de-K,ye-V),anticlockwise:f*g>v*c}}static arc(e,n,i,r,s,o,a,l,c){const f=a-o,g=hd._segmentsCount(Math.abs(f)*s,40*Math.ceil(Math.abs(f)/lg)),v=f/(2*g),_=2*v,y=Math.cos(v),E=Math.sin(v),S=g-1,T=S%1/S;for(let R=0;R<=S;++R){const k=v+o+_*(R+T*R),V=Math.cos(k),K=-Math.sin(k);c.push((y*V+E*K)*s+i,(y*-K+E*V)*s+r)}}}class Lg{static curveLength(e,n,i,r,s,o,a,l){let f=0,g=0,v=0,_=0,y=0,E=0,S=0,T=0,R=0,I=0,k=0,V=e,K=n;for(let ee=1;ee<=10;++ee)g=ee/10,v=g*g,_=v*g,y=1-g,E=y*y,S=E*y,T=S*e+3*E*g*i+3*y*v*s+_*a,R=S*n+3*E*g*r+3*y*v*o+_*l,I=V-T,k=K-R,V=T,K=R,f+=Math.sqrt(I*I+k*k);return f}static curveTo(e,n,i,r,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const f=hd._segmentsCount(Lg.curveLength(l,c,e,n,i,r,s,o));let g=0,v=0,_=0,y=0,E=0;a.push(l,c);for(let S=1,T=0;S<=f;++S)T=S/f,g=1-T,v=g*g,_=v*g,y=T*T,E=y*T,a.push(_*l+3*v*T*e+3*g*y*i+E*s,_*c+3*v*T*n+3*g*y*r+E*o)}}class Bg{static curveLength(e,n,i,r,s,o){const a=e-2*i+s,l=n-2*r+o,c=2*i-2*e,f=2*r-2*n,g=4*(a*a+l*l),v=4*(a*c+l*f),_=c*c+f*f,y=2*Math.sqrt(g+v+_),E=Math.sqrt(g),S=2*g*E,T=2*Math.sqrt(_),R=v/E;return(S*y+E*v*(y-T)+(4*_*g-v*v)*Math.log((2*E+R+y)/(R+T)))/(4*S)}static curveTo(e,n,i,r,s){const o=s[s.length-2],a=s[s.length-1],l=hd._segmentsCount(Bg.curveLength(o,a,e,n,i,r));let c=0,f=0;for(let g=1;g<=l;++g){const v=g/l;c=o+(e-o)*v,f=a+(n-a)*v,s.push(c+(e+(i-e)*v-c)*v,f+(n+(r-n)*v-f)*v)}}}const Ug={[Ai.POLY]:F0,[Ai.CIRC]:dd,[Ai.ELIP]:dd,[Ai.RECT]:SM,[Ai.RREC]:TM},U0=[],fd=[];class jg{constructor(e,n=null,i=null,r=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=n,this.matrix=r,this.type=e.type}clone(){return new jg(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}class IM{constructor(){this.reset()}begin(e,n,i){this.reset(),this.style=e,this.start=n,this.attribStart=i}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}const nu=new en,MM=class extends nM{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Dg,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),fd.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),U0.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,i=null){const r=new jg(t,e,n,i);return this.graphicsData.push(r),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new jg(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const i=e[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,nu):nu.copyFrom(t),i.shape.contains(nu.x,nu.y))){let r=!1;if(i.holes)for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(nu.x,nu.y)){r=!0;break}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length)return void(this.batchable=!0);if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],c=l.fillStyle,f=l.lineStyle;Ug[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(c.visible||f.visible)&&this.processHoles(l.holes);for(let v=0;v<2;v++){const _=0===v?c:f;if(!_.visible)continue;const E=this.indices.length,S=this.points.length/2;_.texture.baseTexture.wrapMode=ha.REPEAT,0===v?this.processFill(l):this.processLine(l);const T=this.points.length/2-S;0!==T&&(n&&!this._compareStyles(i,_)&&(n.end(E,S),n=null),n||(n=U0.pop()||new IM,n.begin(_,E,S),this.batches.push(n),i=_),this.addUvs(this.points,t,_.texture,S,T,_.matrix))}}const s=this.points.length/2;if(n&&n.end(this.indices.length,s),0===this.batches.length)return void(this.batchable=!0);const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const i=t[e];for(let r=0;r<i.size;r++){const s=i.start+r;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>131070)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<2*MM.BATCHABLE_SIZE}buildDrawCalls(){let t=++_n._globalBatch;for(let f=0;f<this.drawCalls.length;f++)this.drawCalls[f].texArray.clear(),fd.push(this.drawCalls[f]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let i=fd.pop();i||(i=new b0,i.texArray=new w0),i.texArray.count=0,i.start=0,i.size=0,i.type=Vs.TRIANGLES;let r=0,s=null,o=0,a=!1,l=Vs.TRIANGLES,c=0;this.drawCalls.push(i);for(let f=0;f<this.batches.length;f++){const g=this.batches[f],v=8,_=g.style,y=_.texture.baseTexture;a!==!!_.native&&(a=!!_.native,l=a?Vs.LINES:Vs.TRIANGLES,s=null,r=v,t++),s!==y&&(s=y,y._batchEnabled!==t&&(r===v&&(t++,r=0,i.size>0&&(i=fd.pop(),i||(i=new b0,i.texArray=new w0),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=l),y.touched=1,y._batchEnabled=t,y._batchLocation=r,y.wrapMode=ha.REPEAT,i.texArray.elements[i.texArray.count++]=y,r++)),i.size+=g.size,c+=g.size,o=y._batchLocation,this.addColors(e,_.color,_.alpha,g.attribSize,g.attribStart),this.addTextureIds(n,o,g.attribSize,g.attribStart)}_n._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(3*t.length*4),s=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[2*l],s[a++]=t[2*l+1],s[a++]=e[2*l],s[a++]=e[2*l+1],o[a++]=n[l],s[a++]=i[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?F0.triangulate(t,this):Ug[t.type].triangulate(t,this)}processLine(t){L0(t,this);for(let e=0;e<t.holes.length;e++)L0(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];Ug[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const i=t[2*n],r=t[2*n+1];t[2*n]=e.a*i+e.c*r+e.tx,t[2*n+1]=e.b*i+e.d*r+e.ty}}addColors(t,e,n,i,r=0){const o=t0((e>>16)+(65280&e)+((255&e)<<16),n);t.length=Math.max(t.length,r+i);for(let a=0;a<i;a++)t[r+a]=o}addTextureIds(t,e,n,i=0){t.length=Math.max(t.length,i+n);for(let r=0;r<n;r++)t[i+r]=e}addUvs(t,e,n,i,r,s=null){let o=0;const a=e.length,l=n.frame;for(;o<r;){let f=t[2*(i+o)],g=t[2*(i+o)+1];if(s){const v=s.a*f+s.c*g+s.tx;g=s.b*f+s.d*g+s.ty,f=v}o++,e.push(f/l.width,g/l.height)}const c=n.baseTexture;(l.width<c.width||l.height<c.height)&&this.adjustUvs(e,n,a,r)}adjustUvs(t,e,n,i){const r=e.baseTexture,s=1e-6,o=n+2*i,a=e.frame,l=a.width/r.width,c=a.height/r.height;let f=a.x/a.width,g=a.y/a.height,v=Math.floor(t[n]+s),_=Math.floor(t[n+1]+s);for(let y=n+2;y<o;y+=2)v=Math.min(v,Math.floor(t[y]+s)),_=Math.min(_,Math.floor(t[y+1]+s));f-=v,g-=_;for(let y=n;y<o;y+=2)t[y]=(t[y]+f)*l,t[y+1]=(t[y+1]+g)*c}};let RM=MM;RM.BATCHABLE_SIZE=100;class j0 extends Fg{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=vl.BUTT,this.join=va.MITER,this.miterLimit=10}clone(){const e=new j0;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const k6=new Float32Array(3),H0={},Hg=class extends zr{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Fg,this._lineStyle=new j0,this._matrix=null,this._holeMode=!1,this.state=Do.for2d(),this._geometry=t||new RM,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=kt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Hg(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n=1,i=.5,r=!1){return"number"==typeof t&&(t={width:t,color:e,alpha:n,alignment:i,native:r}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:ut.WHITE,color:t?.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:vl.BUTT,join:va.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new Yc,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new Yc,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points;return(n[n.length-2]!==t||n[n.length-1]!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,i){this._initCurve();const r=this.currentPath.points;return 0===r.length&&this.moveTo(0,0),Bg.curveTo(t,e,n,i,r),this}bezierCurveTo(t,e,n,i,r,s){return this._initCurve(),Lg.curveTo(t,e,n,i,r,s,this.currentPath.points),this}arcTo(t,e,n,i,r){this._initCurve(t,e);const o=B0.curveTo(t,e,n,i,r,this.currentPath.points);if(o){const{cx:a,cy:l,radius:c,startAngle:f,endAngle:g,anticlockwise:v}=o;this.arc(a,l,c,f,g,v)}return this}arc(t,e,n,i,r,s=!1){if(i===r)return this;if(!s&&r<=i?r+=lg:s&&i<=r&&(i+=lg),r-i==0)return this;const a=t+Math.cos(i)*n,l=e+Math.sin(i)*n,c=this._geometry.closePointEps;let f=this.currentPath?this.currentPath.points:null;if(f){const g=Math.abs(f[f.length-2]-a),v=Math.abs(f[f.length-1]-l);g<c&&v<c||f.push(a,l)}else this.moveTo(a,l),f=this.currentPath.points;return B0.arc(a,l,t,e,n,i,r,s,f),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:ut.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:ut.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,i){return this.drawShape(new un(t,e,n,i))}drawRoundedRect(t,e,n,i,r){return this.drawShape(new Yb(t,e,n,i,r))}drawCircle(t,e,n){return this.drawShape(new Wb(t,e,n))}drawEllipse(t,e,n,i){return this.drawShape(new Xb(t,e,n,i))}drawPolygon(...t){let e,n=!0;const i=t[0];i.points?(n=i.closeStroke,e=i.points):e=Array.isArray(t[0])?t[0]:t;const r=new Yc(e);return r.closeStroke=n,this.drawShape(r),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==Ai.RECT||t[0].matrix||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,4*r.attribStart*2,2*r.attribSize),a=new Float32Array(t.uvsFloat32.buffer,4*r.attribStart*2,2*r.attribSize),c={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*r.start,r.size),uvs:a,_batchRGB:ed(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=c}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,i=this.tint,r=this.worldAlpha,s=e.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*r,s.tint[1]=(i>>8&255)/255*r,s.tint[2]=(255&i)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:n,type:i,size:r,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(i,r,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!H0[n]){const{MAX_TEXTURES:i}=t.plugins[n],r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new $n,default:ms.from({uSamplers:r},!0)};H0[n]=new Ws(t.plugins[n]._shader.program,s)}e=H0[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:i,maxY:r}=t.bounds;this._bounds.addFrame(this.transform,e,n,i,r)}containsPoint(t){return this.worldTransform.applyInverse(t,Hg._TEMP_POINT),this._geometry.containsPoint(Hg._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=ed(this.tint,k6);for(let e=0;e<this.batches.length;e++){const n=this.batches[e],i=n._batchRGB,a=(t[0]*i[0]*255<<16)+(t[1]*i[1]*255<<8)+(0|t[2]*i[2]*255);n._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,c=this.vertexData;let f=0;for(let g=0;g<l.length;g+=2){const v=l[g],_=l[g+1];c[f++]=n*v+r*_+o,c[f++]=s*_+i*v+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let iu=Hg;iu._TEMP_POINT=new en;class N6{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const V0=new en,PM=new Yc,OM=class extends zr{constructor(t,e,n,i=Vs.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||Do.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=Te.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){this.shader.batchable&&this.drawMode===Vs.TRIANGLES&&this.geometry.buffers[0].data.length<2*OM.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,c=r.tx,f=r.ty,g=this.vertexData;for(let v=0;v<g.length/2;v++){const _=n[2*v],y=n[2*v+1];g[2*v]=s*_+a*y+c,g[2*v+1]=o*_+l*y+f}if(this._roundPixels){const v=Te.RESOLUTION;for(let _=0;_<g.length;++_)g[_]=Math.round(g[_]*v)/v}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new N6(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,V0);const e=this.geometry.getBuffer("aVertexPosition").data,n=PM.points,i=this.geometry.getIndex().data,r=i.length,s=4===this.drawMode?3:1;for(let o=0;o+2<r;o+=s){const a=2*i[o],l=2*i[o+1],c=2*i[o+2];if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[c],n[5]=e[c+1],PM.contains(V0.x,V0.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let G0=OM;G0.BATCHABLE_SIZE=100;class kM extends Ws{constructor(e,n){const i={uSampler:e,alpha:1,uTextureMatrix:$n.IDENTITY,uColor:new Float32Array([1,1,1,1])};(n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n)).uniforms&&Object.assign(i,n.uniforms),super(n.program||Co.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),i),this._colorDirty=!1,this.uvMatrix=new RI(e),this.batchable=void 0===n.program,this.pluginName=n.pluginName,this.tint=n.tint,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){this._colorDirty&&(this._colorDirty=!1,nI(this._tint,this._alpha,this.uniforms.uColor,this.texture.baseTexture.alphaMode)),this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class B6 extends ma{constructor(e,n,i){super();const r=new ni(e),s=new ni(n,!0),o=new ni(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,St.FLOAT).addAttribute("aTextureCoord",s,2,!1,St.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}class NM{constructor(e,n,i){this.geometry=new ma,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let s=e[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||St.FLOAT,offset:s.offset},n[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new ni(function Nz(t,e=null){const n=6*t;if((e=e||new Uint16Array(n)).length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let i=0,r=0;i<n;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new ni(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new ni(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===St.UNSIGNED_BYTE,a.type,4*this.dynamicStride,4*a.offset)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===St.UNSIGNED_BYTE,a.type,4*this.staticStride,4*a.offset)}}uploadDynamic(e,n,i){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(e,n,i,s.type===St.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,i){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(e,n,i,s.type===St.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}class FM extends vg{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new $n,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:St.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Ws.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),this.state=Do.for2d()}render(e){const n=e.children,i=e._maxSize,r=e._batchSize,s=this.renderer;let o=n.length;if(0===o)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=tI(e.blendMode,c),s.state.set(this.state);const f=s.gl,g=e.worldTransform.copyTo(this.tempMatrix);g.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=g.toArray(!0),this.shader.uniforms.uColor=function kz(t,e,n,i){return n=n||new Float32Array(4),i||void 0===i?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,c),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let v=!1;for(let _=0,y=0;_<o;_+=r,y+=1){let E=o-_;E>r&&(E=r),y>=a.length&&a.push(this._generateOneMoreBuffer(e));const S=a[y];S.uploadDynamic(n,_,E);const T=e._bufferUpdateIDs[y]||0;v=v||S._updateID<T,v&&(S._updateID=e._updateID,S.uploadStatic(n,_,E)),s.geometry.bind(S.geometry),f.drawElements(f.TRIANGLES,6*E,f.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],i=e._maxSize,r=e._batchSize,s=e._properties;for(let o=0;o<i;o+=r)n.push(new NM(this.properties,s,r));return n}_generateOneMoreBuffer(e){return new NM(this.properties,e._properties,e._batchSize)}uploadVertices(e,n,i,r,s,o){let a=0,l=0,c=0,f=0;for(let g=0;g<i;++g){const v=e[n+g],_=v._texture,y=v.scale.x,E=v.scale.y,S=_.trim,T=_.orig;S?(l=S.x-v.anchor.x*T.width,a=l+S.width,f=S.y-v.anchor.y*T.height,c=f+S.height):(a=T.width*(1-v.anchor.x),l=T.width*-v.anchor.x,c=T.height*(1-v.anchor.y),f=T.height*-v.anchor.y),r[o]=l*y,r[o+1]=f*E,r[o+s]=a*y,r[o+s+1]=f*E,r[o+2*s]=a*y,r[o+2*s+1]=c*E,r[o+3*s]=l*y,r[o+3*s+1]=c*E,o+=4*s}}uploadPosition(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+2*s]=l.x,r[o+2*s+1]=l.y,r[o+3*s]=l.x,r[o+3*s+1]=l.y,o+=4*s}}uploadRotation(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].rotation;r[o]=l,r[o+s]=l,r[o+2*s]=l,r[o+3*s]=l,o+=4*s}}uploadUvs(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+2*s]=l.x2,r[o+2*s+1]=l.y2,r[o+3*s]=l.x3,r[o+3*s+1]=l.y3,o+=4*s):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+2*s]=0,r[o+2*s+1]=0,r[o+3*s]=0,r[o+3*s+1]=0,o+=4*s)}}uploadTint(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a],c=l._texture.baseTexture.alphaMode>0,f=l.alpha,g=f<1&&c?t0(l._tintRGB,f):l._tintRGB+(255*f<<24);r[o]=g,r[o+s]=g,r[o+2*s]=g,r[o+3*s]=g,o+=4*s}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}FM.extension={name:"particle",type:We.RendererPlugin},_t.add(FM),Te.UPLOADS_PER_FRAME=4;var Gg=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Gg||{});const z0={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Gg.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},H6=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];class _a{constructor(e){this.styleID=0,this.reset(),W0(this,e,e)}clone(){const e={};return W0(e,this,z0),new _a(e)}reset(){W0(this,z0,z0)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=$0(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=$0(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){(function V6(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=$0(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e="number"==typeof this.fontSize?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let i=n.length-1;i>=0;i--){let r=n[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&!H6.includes(r)&&(r=`"${r}"`),n[i]=r}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}}function LM(t){return"number"==typeof t?JA(t):("string"==typeof t&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function $0(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=LM(t[e]);return t}return LM(t)}function W0(t,e,n){for(const i in n)t[i]=Array.isArray(e[i])?e[i].slice():e[i]}const zg={willReadFrequently:!0};let X0=(()=>{class t{constructor(n,i,r,s,o,a,l,c,f){this.text=n,this.style=i,this.width=r,this.height=s,this.lines=o,this.lineWidths=a,this.lineHeight=l,this.maxLineWidth=c,this.fontProperties=f}static measureText(n,i,r,s=t._canvas){r=r??i.wordWrap;const o=i.toFontString(),a=t.measureFont(o);0===a.fontSize&&(a.fontSize=i.fontSize,a.ascent=i.fontSize);const l=s.getContext("2d",zg);l.font=o;const f=(r?t.wordWrap(n,i,s):n).split(/(?:\r\n|\r|\n)/),g=new Array(f.length);let v=0;for(let S=0;S<f.length;S++){const T=l.measureText(f[S]).width+(f[S].length-1)*i.letterSpacing;g[S]=T,v=Math.max(v,T)}let _=v+i.strokeThickness;i.dropShadow&&(_+=i.dropShadowDistance);const y=i.lineHeight||a.fontSize+i.strokeThickness;let E=Math.max(y,a.fontSize+2*i.strokeThickness)+(f.length-1)*(y+i.leading);return i.dropShadow&&(E+=i.dropShadowDistance),new t(n,i,_,E,f,g,y+i.leading,v,a)}static wordWrap(n,i,r=t._canvas){const s=r.getContext("2d",zg);let o=0,a="",l="";const c=Object.create(null),{letterSpacing:f,whiteSpace:g}=i,v=t.collapseSpaces(g),_=t.collapseNewlines(g);let y=!v;const E=i.wordWrapWidth+f,S=t.tokenize(n);for(let T=0;T<S.length;T++){let R=S[T];if(t.isNewline(R)){if(!_){l+=t.addLine(a),y=!v,a="",o=0;continue}R=" "}if(v){const k=t.isBreakingSpace(R),V=t.isBreakingSpace(a[a.length-1]);if(k&&V)continue}const I=t.getFromCache(R,f,c,s);if(I>E)if(""!==a&&(l+=t.addLine(a),a="",o=0),t.canBreakWords(R,i.breakWords)){const k=t.wordWrapSplit(R);for(let V=0;V<k.length;V++){let K=k[V],ee=1;for(;k[V+ee];){const ye=k[V+ee];if(t.canBreakChars(K[K.length-1],ye,R,V,i.breakWords))break;K+=ye,ee++}V+=K.length-1;const ae=t.getFromCache(K,f,c,s);ae+o>E&&(l+=t.addLine(a),y=!1,a="",o=0),a+=K,o+=ae}}else a.length>0&&(l+=t.addLine(a),a="",o=0),l+=t.addLine(R,!(T===S.length-1)),y=!1,a="",o=0;else I+o>E&&(y=!1,l+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(R)||y)&&(a+=R,o+=I)}return l+=t.addLine(a,!1),l}static addLine(n,i=!0){return n=t.trimRight(n),i?`${n}\n`:n}static getFromCache(n,i,r,s){let o=r[n];if("number"!=typeof o){const a=n.length*i;o=s.measureText(n).width+a,r[n]=o}return o}static collapseSpaces(n){return"normal"===n||"pre-line"===n}static collapseNewlines(n){return"normal"===n}static trimRight(n){if("string"!=typeof n)return"";for(let i=n.length-1;i>=0&&t.isBreakingSpace(n[i]);i--)n=n.slice(0,-1);return n}static isNewline(n){return"string"==typeof n&&t._newlines.includes(n.charCodeAt(0))}static isBreakingSpace(n,i){return"string"==typeof n&&t._breakingSpaces.includes(n.charCodeAt(0))}static tokenize(n){const i=[];let r="";if("string"!=typeof n)return i;for(let s=0;s<n.length;s++){const o=n[s];t.isBreakingSpace(o,n[s+1])||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i}static canBreakWords(n,i){return i}static canBreakChars(n,i,r,s,o){return!0}static wordWrapSplit(n){return n.split("")}static measureFont(n){if(t._fonts[n])return t._fonts[n];const i={ascent:0,descent:0,fontSize:0},r=t._canvas,s=t._context;s.font=n;const o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(s.measureText(o).width);let l=Math.ceil(s.measureText(t.BASELINE_SYMBOL).width);const c=Math.ceil(t.HEIGHT_MULTIPLIER*l);l=l*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=c,s.fillStyle="#f00",s.fillRect(0,0,a,c),s.font=n,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(o,0,l);const f=s.getImageData(0,0,a,c).data,g=f.length,v=4*a;let _=0,y=0,E=!1;for(_=0;_<l;++_){for(let S=0;S<v;S+=4)if(255!==f[y+S]){E=!0;break}if(E)break;y+=v}for(i.ascent=l-_,y=g-v,E=!1,_=c;_>l;--_){for(let S=0;S<v;S+=4)if(255!==f[y+S]){E=!0;break}if(E)break;y-=v}return i.descent=_-l,i.fontSize=i.ascent+i.descent,t._fonts[n]=i,i}static clearMetrics(n=""){n?delete t._fonts[n]:t._fonts={}}static get _canvas(){if(!t.__canvas){let n;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",zg)?.measureText)return t.__canvas=i,i;n=Te.ADAPTER.createCanvas()}catch{n=Te.ADAPTER.createCanvas()}n.width=n.height=10,t.__canvas=n}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",zg)),t.__context}}return t._fonts={},t.METRICS_STRING="|\xc9q\xc5",t.BASELINE_SYMBOL="M",t.BASELINE_MULTIPLIER=1.4,t.HEIGHT_MULTIPLIER=2,t._newlines=[10,13],t._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],t})();const G6={texture:!0,children:!1,baseTexture:!0},BM=class extends gl{constructor(t,e,n){let i=!1;n||(n=Te.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const r=ut.from(n);r.orig=new un,r.trim=new un,super(r),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Te.RESOLUTION,this._autoResolution=!0,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,i=X0.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,c=i.maxLineWidth,f=i.fontProperties;let g,v;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i.width)+2*e.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*e.padding)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;const _=e.dropShadow?2:1;for(let y=0;y<_;++y){const E=e.dropShadow&&0===y,S=E?Math.ceil(Math.max(1,s)+2*e.padding):0,T=S*this._resolution;if(E){n.fillStyle="black",n.strokeStyle="black";const I=e.dropShadowColor,k=ed("number"==typeof I?I:e0(I)),V=e.dropShadowBlur*this._resolution,K=e.dropShadowDistance*this._resolution;n.shadowColor=`rgba(${255*k[0]},${255*k[1]},${255*k[2]},${e.dropShadowAlpha})`,n.shadowBlur=V,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*K,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*K+T}else n.fillStyle=this._generateFillStyle(e,o,i),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let R=(a-f.fontSize)/2;a-f.fontSize<0&&(R=0);for(let I=0;I<o.length;I++)g=e.strokeThickness/2,v=e.strokeThickness/2+I*a+f.ascent+R,"right"===e.align?g+=c-l[I]:"center"===e.align&&(g+=(c-l[I])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[I],g+e.padding,v+e.padding-S,!0),e.fill&&this.drawLetterSpacing(o[I],g+e.padding,v+e.padding-S)}this.updateTexture()}drawLetterSpacing(t,e,n,i=!1){const s=this._style.letterSpacing,o=BM.experimentalLetterSpacing&&("letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype);if(0===s||o)return o&&(this.context.letterSpacing=s,this.context.textLetterSpacing=s),void(i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));let a=e;const l=Array.from?Array.from(t):t.split("");let c=this.context.measureText(t).width,f=0;for(let g=0;g<l.length;++g){const v=l[g];i?this.context.strokeText(v,a,n):this.context.fillText(v,a,n);let _="";for(let y=g+1;y<l.length;++y)_+=l[y];f=this.context.measureText(_).width,a+=c-f+s,c=f}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=function Bz(t){let{width:e,height:n}=t;const i=t.getContext("2d",{willReadFrequently:!0}),s=i.getImageData(0,0,e,n).data;let o=0,a=n-1,l=0,c=e-1;for(;o<n&&aI(s,e,o);)++o;if(o===n)return{width:0,height:0,data:null};for(;aI(s,e,a);)--a;for(;lI(s,e,l,o,a);)++l;for(;lI(s,e,c,o,a);)--c;return e=c-l+1,n=a-o+1,{width:e,height:n,data:i.getImageData(l,o,e,n)}}(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,i=n.trim?0:n.padding,r=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-2*i,e.orig.height=e._frame.height-2*i,this._onTextureUpdate(),r.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),-1===this._textureID&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const i=t.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];let r;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,l=this.canvas.height/this._resolution-s-2*o,c=i.slice(),f=t.fillGradientStops.slice();if(!f.length){const g=c.length+1;for(let v=1;v<g;++v)f.push(v/g)}if(c.unshift(i[0]),f.unshift(0),c.push(i[i.length-1]),f.push(1),t.fillGradientType===Gg.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const g=n.fontProperties.fontSize+t.strokeThickness;for(let v=0;v<e.length;v++){const _=n.lineHeight*(v-1)+g,y=n.lineHeight*v;let E=y;v>0&&_>y&&(E=(y+_)/2);const S=y+g,T=n.lineHeight*(v+1);let R=S;v+1<e.length&&T<S&&(R=(S+T)/2);const I=(R-E)/l;for(let k=0;k<c.length;k++){let V=0;V="number"==typeof f[k]?f[k]:k/c.length;let K=Math.min(1,Math.max(0,E/l+V*I));K=Number(K.toFixed(5)),r.addColorStop(K,c[k])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const g=c.length+1;let v=1;for(let _=0;_<c.length;_++){let y;y="number"==typeof f[_]?f[_]:v/g,r.addColorStop(y,c[_]),v++}}return r}destroy(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},G6,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Zc(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Zc(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){this._style=(t=t||{})instanceof _a?t:new _a(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Y0=BM;Y0.experimentalLetterSpacing=!1;class z6{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function $6(t,e){let n=!1;if(t?._textures?.length)for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof ut){const r=t._textures[i].baseTexture;e.includes(r)||(e.push(r),n=!0)}return n}function W6(t,e){if(t.baseTexture instanceof _n){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function X6(t,e){if(t._texture&&t._texture instanceof ut){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Y6(t,e){return e instanceof Y0&&(e.updateText(!0),!0)}function q6(t,e){if(e instanceof _a){const n=e.toFontString();return X0.measureFont(n),!0}return!1}function K6(t,e){if(t instanceof Y0){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Z6(t,e){return t instanceof _a&&(e.includes(t)||e.push(t),!0)}class Q6{constructor(e){this.limiter=new z6(Te.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{!this.queue||this.prepareItems()},this.registerFindHook(K6),this.registerFindHook(Z6),this.registerFindHook($6),this.registerFindHook(W6),this.registerFindHook(X6),this.registerUploadHook(Y6),this.registerUploadHook(q6)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,li.system.addOnce(this.tick,this,qc.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed)for(let i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}n||this.queue.shift()}if(this.queue.length)li.system.addOnce(this.tick,this,qc.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,i=e.length;n<i;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,i=this.addHooks.length;n<i&&!this.addHooks[n](e,this.queue);n++);if(e instanceof zr)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&li.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}function UM(t,e){return e instanceof _n&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function J6(t,e){if(!(e instanceof iu))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:i}=n;for(let r=0;r<i.length;r++){const{texture:s}=i[r].style;s&&UM(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function e7(t,e){return t instanceof iu&&(e.push(t),!0)}class jM extends Q6{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(e7),this.registerUploadHook(UM),this.registerUploadHook(J6)}}jM.extension={name:"prepare",type:We.RendererSystem},_t.add(jM);const pd=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof ut?t:null,this.baseTexture=t instanceof _n?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=fa(t,null);return null===n&&(n=parseFloat(e??"1")),1!==n&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=pd.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=pd.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const i=this._frameKeys[e],r=this._frames[i],s=r.frame;if(s){let o=null,a=null;const l=!1!==r.trimmed&&r.sourceSize?r.sourceSize:r.frame,c=new un(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);o=r.rotated?new un(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):new un(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),!1!==r.trimmed&&r.spriteSourceSize&&(a=new un(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new ut(this.baseTexture,o,c,a,r.rotated?2:0,r.anchor),ut.addToCache(this.textures[i],i)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++)this.animations[e].push(this.textures[t[e][n]])}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*pd.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*pd.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let q0=pd;q0.BATCH_SIZE=1e3;const t7=["jpg","png","jpeg","avif","webp"];function HM(t,e,n){const i={};if(t.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!n){const r=Ii.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=HM([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const n7={extension:We.Asset,cache:{test:t=>t instanceof q0,getCacheableAssets:(t,e)=>HM(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),i=n.pop(),r=n.pop();return"json"===i&&t7.includes(r)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(Te.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:We.LoadParser,priority:Xs.Normal},testParse:(t,e)=>Ut(function*(){return Ii.extname(e.src).includes(".json")&&!!t.frames})(),parse:(t,e,n)=>Ut(function*(){let i=Ii.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");const r=i+t.meta.image,o=(yield n.load([r]))[r],a=new q0(o.baseTexture,t,e.src);yield a.parse();const l=t?.meta?.related_multi_packs;if(Array.isArray(l)){const c=[];for(const g of l){if("string"!=typeof g)continue;const v=i+g;e.data?.ignoreMultiPack||c.push(n.load({src:v,data:{ignoreMultiPack:!0}}))}const f=yield Promise.all(c);a.linkedSheets=f,f.forEach(g=>{g.linkedSheets=[a].concat(a.linkedSheets.filter(v=>v!==g))})}return a})(),unload(t){t.destroy(!0)}}};_t.add(n7),new en;var GM="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n";const $g=new $n;class zM extends vg{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new _I,this.state=Do.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Ws.from(GM,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",n),this.shader=e.context.webGLVersion>1?Ws.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",n):Ws.from(GM,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",n)}render(e){const n=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=i.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,f=e.tileTransform.localTransform,g=e.uvMatrix;let v=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;v&&(l._glTextures[n.CONTEXT_UID]?v=l.wrapMode!==ha.CLAMP:l.wrapMode===ha.CLAMP&&(l.wrapMode=ha.REPEAT));const _=v?this.simpleShader:this.shader,y=a.width,E=a.height,S=e._width,T=e._height;$g.set(f.a*y/S,f.b*y/T,f.c*E/S,f.d*E/T,f.tx/S,f.ty/T),$g.invert(),v?$g.prepend(g.mapCoord):(_.uniforms.uMapCoord=g.mapCoord.toArray(!0),_.uniforms.uClampFrame=g.uClampFrame,_.uniforms.uClampOffset=g.uClampOffset),_.uniforms.uTransform=$g.toArray(!0),_.uniforms.uColor=nI(e.tint,e.worldAlpha,_.uniforms.uColor,c),_.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),_.uniforms.uSampler=a,n.shader.bind(_),n.geometry.bind(i),this.state.blendMode=tI(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}zM.extension={name:"tilingSprite",type:We.RendererPlugin},_t.add(zM);class Wg{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Xg{static test(e){return"string"==typeof e&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const f=a[c].split("="),g=f[0],v=f[1].replace(/"/gm,""),_=parseFloat(v),y=isNaN(_)?v:_;l[g]=y}i[o].push(l)}const r=new Wg;return i.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class Z0{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&null!==n.getElementsByTagName("info")[0].getAttribute("face")}static parse(e){const n=new Wg,i=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<i.length;c++)n.info.push({face:i[c].getAttribute("face"),size:parseInt(i[c].getAttribute("size"),10)});for(let c=0;c<r.length;c++)n.common.push({lineHeight:parseInt(r[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const f=o[c];n.char.push({id:parseInt(f.getAttribute("id"),10),page:parseInt(f.getAttribute("page"),10)||0,x:parseInt(f.getAttribute("x"),10),y:parseInt(f.getAttribute("y"),10),width:parseInt(f.getAttribute("width"),10),height:parseInt(f.getAttribute("height"),10),xoffset:parseInt(f.getAttribute("xoffset"),10),yoffset:parseInt(f.getAttribute("yoffset"),10),xadvance:parseInt(f.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class Q0{static test(e){return!("string"!=typeof e||!e.includes("<font>"))&&Z0.test(Te.ADAPTER.parseXML(e))}static parse(e){return Z0.parse(Te.ADAPTER.parseXML(e))}}const J0=[Xg,Z0,Q0];function c7(t,e,n,i,r,s,o){const a=n.text,l=n.fontProperties;e.translate(i,r),e.scale(s,s);const c=o.strokeThickness/2,f=-o.strokeThickness/2;if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function l7(t,e,n,i,r,s){const o=n.fill;if(!Array.isArray(o))return o;if(1===o.length)return o[0];let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,f=t.width/i-l-2*c,g=t.height/i-l-2*c,v=o.slice(),_=n.fillGradientStops.slice();if(!_.length){const y=v.length+1;for(let E=1;E<y;++E)_.push(E/y)}if(v.unshift(o[0]),_.unshift(0),v.push(o[o.length-1]),_.push(1),n.fillGradientType===Gg.LINEAR_VERTICAL){a=e.createLinearGradient(f/2,c,f/2,g+c);let y=0;const S=(s.fontProperties.fontSize+n.strokeThickness)/g;for(let T=0;T<r.length;T++){const R=s.lineHeight*T;for(let I=0;I<v.length;I++){let k=0;k="number"==typeof _[I]?_[I]:I/v.length;let K=Math.max(y,R/g+k*S);K=Math.min(K,1),a.addColorStop(K,v[I]),y=K}}}else{a=e.createLinearGradient(c,g/2,f+c,g/2);const y=v.length+1;let E=1;for(let S=0;S<v.length;S++){let T;T="number"==typeof _[S]?_[S]:E/y,a.addColorStop(T,v[S]),E++}}return a}(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const g=o.dropShadowColor,v=ed("number"==typeof g?g:e0(g)),_=o.dropShadowBlur*s,y=o.dropShadowDistance*s;e.shadowColor=`rgba(${255*v[0]},${255*v[1]},${255*v[2]},${o.dropShadowAlpha})`,e.shadowBlur=_,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*y,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*y}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,f+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,f+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function $M(t){return Array.from?Array.from(t):t.split("")}function Yg(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}const bs=class{constructor(t,e,n){const[i]=t.info,[r]=t.common,[s]=t.page,[o]=t.distanceField,a=fa(s.file),l={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<t.page.length;c++){const{id:f,file:g}=t.page[c];l[f]=e instanceof Array?e[c]:e[g],o?.fieldType&&"none"!==o.fieldType&&(l[f].baseTexture.alphaMode=fs.NO_PREMULTIPLIED_ALPHA,l[f].baseTexture.mipmap=Gs.OFF)}for(let c=0;c<t.char.length;c++){const{id:f,page:g}=t.char[c];let{x:v,y:_,width:y,height:E,xoffset:S,yoffset:T,xadvance:R}=t.char[c];v/=a,_/=a,y/=a,E/=a,S/=a,T/=a,R/=a;const I=new un(v+l[g].frame.x/a,_+l[g].frame.y/a,y,E);this.chars[f]={xOffset:S,yOffset:T,xAdvance:R,kerning:{},texture:new ut(l[g].baseTexture,I),page:g}}for(let c=0;c<t.kerning.length;c++){let{first:f,second:g,amount:v}=t.kerning[c];f/=a,g/=a,v/=a,this.chars[g]&&(this.chars[g].kerning[f]=v)}this.distanceFieldRange=o?.distanceRange,this.distanceFieldType=o?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let i;if(t instanceof Wg)i=t;else{const s=function a7(t){for(let e=0;e<J0.length;e++)if(J0[e].test(t))return J0[e];return null}(t);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(t)}e instanceof ut&&(e=[e]);const r=new bs(i,e,n);return bs.available[r.font]=r,r}static uninstall(t){const e=bs.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete bs.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:r,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},bs.defaultOptions,n),c=function u7(t){"string"==typeof t&&(t=[t]);const e=[];for(let n=0,i=t.length;n<i;n++){const r=t[n];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...$M(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(i),f=e instanceof _a?e:new _a(e),g=o,v=new Wg;v.info[0]={face:f.fontFamily,size:f.fontSize},v.common[0]={lineHeight:f.fontSize};let E,S,T,_=0,y=0,R=0;const I=[],k=[];for(let K=0;K<c.length;K++){E||(E=Te.ADAPTER.createCanvas(),E.width=o,E.height=a,S=E.getContext("2d"),T=new _n(E,{resolution:s,...l}),I.push(T),k.push(new ut(T)),v.page.push({id:k.length-1,file:""}));const ee=c[K],ae=X0.measureText(ee,f,!1,E),ye=ae.width,de=Math.ceil(ae.height),se=Math.ceil(("italic"===f.fontStyle?2:1)*ye);if(y>=a-de*s){if(0===y)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${ee}')`);--K,E=null,S=null,T=null,y=0,_=0,R=0;continue}if(R=Math.max(de+ae.fontProperties.descent,R),se*s+_>=g){if(0===_)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${f.fontFamily}', fontSize: ${f.fontSize}px, char: '${ee}')`);--K,y+=R*s,y=Math.ceil(y),_=0,R=0;continue}c7(E,S,ae,_,y,s,f);const fe=Yg(ae.text);v.char.push({id:fe,page:k.length-1,x:_/s,y:y/s,width:se,height:de,xoffset:0,yoffset:0,xadvance:Math.ceil(ye-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),_+=(se+2*r)*s,_=Math.ceil(_)}for(let K=0,ee=c.length;K<ee;K++){const ae=c[K];for(let ye=0;ye<ee;ye++){const de=c[ye],se=S.measureText(ae).width,fe=S.measureText(de).width,me=S.measureText(ae+de).width-(se+fe);me&&v.kerning.push({first:Yg(ae),second:Yg(de),amount:me})}}const V=new bs(v,k,!0);return void 0!==bs.available[t]&&bs.uninstall(t),bs.available[t]=V,V}};let ur=bs;ur.ALPHA=[["a","z"],["A","Z"]," "],ur.NUMERIC=[["0","9"]],ur.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],ur.ASCII=[[" ","~"]],ur.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:bs.ALPHANUMERIC},ur.available={};const WM=[],XM=[],YM=[],qM=class extends zr{constructor(t,e={}){super(),this._tint=16777215;const{align:n,tint:i,maxWidth:r,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},qM.styleDefaults,e);if(!ur.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new da(()=>{this.dirty=!0},this,0,0),this._roundPixels=Te.ROUND_PIXELS,this.dirty=!0,this._resolution=Te.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=ur.available[this._fontName],e=this.fontSize,n=e/t.size,i=new en,r=[],s=[],o=[],l=$M(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),c=this._maxWidth*t.size/e,f="none"===t.distanceFieldType?WM:XM;let g=null,v=0,_=0,y=0,E=-1,S=0,T=0,R=0,I=0;for(let de=0;de<l.length;de++){const se=l[de],fe=Yg(se);if(/(?:\s)/.test(se)&&(E=de,S=v,I++),"\r"===se||"\n"===se){s.push(v),o.push(-1),_=Math.max(_,v),++y,++T,i.x=0,i.y+=t.lineHeight,g=null,I=0;continue}const he=t.chars[fe];if(!he)continue;g&&he.kerning[g]&&(i.x+=he.kerning[g]);const me=YM.pop()||{texture:ut.EMPTY,line:0,charCode:0,prevSpaces:0,position:new en};me.texture=he.texture,me.line=y,me.charCode=fe,me.position.x=i.x+he.xOffset+this._letterSpacing/2,me.position.y=i.y+he.yOffset,me.prevSpaces=I,r.push(me),v=me.position.x+Math.max(he.xAdvance-he.xOffset,he.texture.orig.width),i.x+=he.xAdvance+this._letterSpacing,R=Math.max(R,he.yOffset+he.texture.height),g=fe,-1!==E&&c>0&&i.x>c&&(++T,Kc(r,1+E-T,1+de-E),de=E,E=-1,s.push(S),o.push(r.length>0?r[r.length-1].prevSpaces:0),_=Math.max(_,S),y++,i.x=0,i.y+=t.lineHeight,g=null,I=0)}const k=l[l.length-1];"\r"!==k&&"\n"!==k&&(/(?:\s)/.test(k)&&(v=S),s.push(v),_=Math.max(_,v),o.push(-1));const V=[];for(let de=0;de<=y;de++){let se=0;"right"===this._align?se=_-s[de]:"center"===this._align?se=(_-s[de])/2:"justify"===this._align&&(se=o[de]<0?0:(_-s[de])/o[de]),V.push(se)}const K=r.length,ee={},ae=[],ye=this._activePagesMeshData;f.push(...ye);for(let de=0;de<K;de++){const se=r[de].texture,fe=se.baseTexture.uid;if(!ee[fe]){let he=f.pop();if(!he){const Ye=new B6;let lt,it;"none"===t.distanceFieldType?(lt=new kM(ut.EMPTY),it=kt.NORMAL):(lt=new kM(ut.EMPTY,{program:Co.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),it=kt.NORMAL_NPM);const vn=new G0(Ye,lt);vn.blendMode=it,he={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:vn,vertices:null,uvs:null,indices:null}}he.index=0,he.indexCount=0,he.vertexCount=0,he.uvsCount=0,he.total=0;const{_textureCache:me}=this;me[fe]=me[fe]||new ut(se.baseTexture),he.mesh.texture=me[fe],he.mesh.tint=this._tint,ae.push(he),ee[fe]=he}ee[fe].total++}for(let de=0;de<ye.length;de++)ae.includes(ye[de])||this.removeChild(ye[de].mesh);for(let de=0;de<ae.length;de++)ae[de].mesh.parent!==this&&this.addChild(ae[de].mesh);this._activePagesMeshData=ae;for(const de in ee){const se=ee[de],fe=se.total;if(!(se.indices?.length>6*fe)||se.vertices.length<2*G0.BATCHABLE_SIZE)se.vertices=new Float32Array(8*fe),se.uvs=new Float32Array(8*fe),se.indices=new Uint16Array(6*fe);else{const me=se.vertices;for(let Ye=4*se.total*2;Ye<me.length;Ye++)me[Ye]=0}se.mesh.size=6*fe}for(let de=0;de<K;de++){const se=r[de];let fe=se.position.x+V[se.line]*("justify"===this._align?se.prevSpaces:1);this._roundPixels&&(fe=Math.round(fe));const he=fe*n,me=se.position.y*n,Ye=se.texture,lt=ee[Ye.baseTexture.uid],it=Ye.frame,vn=Ye._uvs,an=lt.index++;lt.indices[6*an+0]=0+4*an,lt.indices[6*an+1]=1+4*an,lt.indices[6*an+2]=2+4*an,lt.indices[6*an+3]=0+4*an,lt.indices[6*an+4]=2+4*an,lt.indices[6*an+5]=3+4*an,lt.vertices[8*an+0]=he,lt.vertices[8*an+1]=me,lt.vertices[8*an+2]=he+it.width*n,lt.vertices[8*an+3]=me,lt.vertices[8*an+4]=he+it.width*n,lt.vertices[8*an+5]=me+it.height*n,lt.vertices[8*an+6]=he,lt.vertices[8*an+7]=me+it.height*n,lt.uvs[8*an+0]=vn.x0,lt.uvs[8*an+1]=vn.y0,lt.uvs[8*an+2]=vn.x1,lt.uvs[8*an+3]=vn.y1,lt.uvs[8*an+4]=vn.x2,lt.uvs[8*an+5]=vn.y2,lt.uvs[8*an+6]=vn.x3,lt.uvs[8*an+7]=vn.y3}this._textWidth=_*n,this._textHeight=(i.y+t.lineHeight)*n;for(const de in ee){const se=ee[de];if(0!==this.anchor.x||0!==this.anchor.y){let Ye=0;const lt=this._textWidth*this.anchor.x,it=this._textHeight*this.anchor.y;for(let vn=0;vn<se.total;vn++)se.vertices[Ye++]-=lt,se.vertices[Ye++]-=it,se.vertices[Ye++]-=lt,se.vertices[Ye++]-=it,se.vertices[Ye++]-=lt,se.vertices[Ye++]-=it,se.vertices[Ye++]-=lt,se.vertices[Ye++]-=it}this._maxLineHeight=R*n;const fe=se.mesh.geometry.getBuffer("aVertexPosition"),he=se.mesh.geometry.getBuffer("aTextureCoord"),me=se.mesh.geometry.getIndex();fe.data=se.vertices,he.data=se.uvs,me.data=se.indices,fe.update(),he.update(),me.update()}for(let de=0;de<r.length;de++)YM.push(r[de]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:i}=ur.available[this._fontName];if("none"!==n){const{a:r,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+s*s),c=Math.sqrt(o*o+a*a),f=(Math.abs(l)+Math.abs(c))/2,g=this.fontSize/i,v=t._view.resolution;for(const _ of this._activePagesMeshData)_.mesh.shader.uniforms.uFWidth=f*e*g*v}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=ur.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!ur.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??ur.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i="none"===ur.available[this._fontName].distanceFieldType?WM:XM;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=ut.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._textureCache=null,super.destroy(t)}};qM.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const p7=[".xml",".fnt"],g7={extension:{type:We.LoadParser,priority:Xs.Normal},test:t=>p7.includes(Ii.extname(t)),testParse:t=>Ut(function*(){return Xg.test(t)||Q0.test(t)})(),parse:(t,e,n)=>Ut(function*(){const i=Xg.test(t)?Xg.parse(t):Q0.parse(t),{src:r}=e,{page:s}=i,o=[];for(let c=0;c<s.length;++c){const f=s[c].file,g=Ii.join(Ii.dirname(r),f);o.push(g)}const a=yield n.load(o),l=o.map(c=>a[c]);return ur.install(i,l,!0)})(),load:(t,e)=>Ut(function*(){return(yield Te.ADAPTER.fetch(t)).text()})(),unload(t){t.destroy()}};_t.add(g7);var ru=je(23);class KM extends gl{constructor(e=0,n=0){super(),this._gu_options={},this._bActivated=!1,this._bHover=!1,this._temp_status={},this._source=0,this._oWdith=0,this._oHeight=0,this._rg_canvas=null,this._graphics=new iu,this.interactive=!0,this.cursor="pointer",this._source=e,this.on("pointerup",()=>{this.onPointerup()}),this.on("pointerdown",()=>{this.onPointerdown()}),this.on("pointerupoutside",()=>{this.onPointerup()}),0==n?this._gu_options={width:"300",height:"300",units:"MPH",minValue:0,startAngle:60,ticksAngle:240,valueBox:!1,maxValue:"220",majorTicks:[0,20,40,60,80,100,120,140,160,180,200,220],minorTicks:2,strokeTicks:!0,highlights:[{from:160,to:220,color:"rgba(200, 50, 50, .75)"}],colorPlate:"#fff",borderShadowWidth:0,borders:!1,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:0,animationRule:"linear",listeners:{value:function(i,r){},render:[()=>{}]}}:1==n?this._gu_options={width:300,height:300,minValue:0,maxValue:360,majorTicks:["N","","E","","S","","W","","N"],minorTicks:10,ticksAngle:360,startAngle:180,strokeTicks:!1,highlights:!1,colorPlate:"#222",colorMajorTicks:"#f5f5f5",colorMinorTicks:"#ddd",colorNumbers:"#ccc",colorNeedle:"rgba(240, 128, 128, 1)",colorNeedleEnd:"rgba(255, 160, 122, .9)",numbersMargin:2,fontNumbersSize:30,colorNeedleShadowDown:!1,colorNeedleCircleOuter:"#444",colorNeedleCircleOuterEnd:"#111",colorNeedleCircleInner:"#444",colorNeedleCircleInnerEnd:"#111",colorCircleInner:!1,valueBox:!1,valueTextShadow:!1,needleCircleSize:7,animationRule:"linear",needleType:"line",needleStart:75,needleEnd:99,needleWidth:3,borders:!0,borderInnerWidth:3,borderMiddleWidth:1,borderOuterWidth:5,colorBorderInner:"#455",colorBorderMiddle:"#222",colorBorderOuter:"#888",colorBorderOuterEnd:"#caa",borderShadowWidth:0,animationDuration:1500,animationTarget:"plate",class:"gauge"}:2==n?this._gu_options={width:300,height:300,units:"RPM",minValue:0,maxValue:12e3,majorTicks:[0,1,2,3,4,5,6,7,8,9,10,11,12],minorTicks:0,strokeTicks:!0,highlights:[{from:9250,to:11995,color:"rgba(200, 50, 50, .75)"}],highlightsWidth:13,ticksAngle:270,startAngle:0,valueBox:!1,borderInnerWidth:10,borderMiddleWidth:1,borderOuterWidth:5,colorMajorTicks:"#888",colorMinorTicks:"#ddd",colorTitle:"#eee",colorUnits:"#ccc",colorNumbers:"#bb1",colorPlate:"#000",colorPlateEnd:"#222",borderShadowWidth:0,borders:!0,needleType:"arrow",needleWidth:2,needleCircleSize:7,needleCircleOuter:!0,needleCircleInner:!1,animationDuration:1500,animationRule:"linear",colorBorderOuter:"#111",colorBorderMiddle:"#888",colorBorderMiddleEnd:"#555",colorBorderInner:"#111",colorNeedleShadowDown:"#550",colorNeedleCircleOuter:"#333",colorNeedleCircleOuterEnd:"#111",class:"gauge"}:3==n&&(this._gu_options={units:"Fuel",width:"150",height:"150",minValue:"0",maxValue:"100",startAngle:"120",ticksAngle:"120",majorTicks:["E","","F"],minorTicks:2,strokeTicks:!1,highlights:[{from:0,to:15,color:"rgba(200, 10, 10, .5)"},{from:15,to:35,color:"rgba(200, 200, 50, .5)"},{from:80,to:100,color:"rgba(50, 200, 50, .3)"}],highlightsWidth:25,numbersMargin:5,colorPlate:"rgb(255,255,255)",valueBox:"false",borderShadowWidth:"0",borders:"false",needleType:"arrow",needleWidth:"2",needleCircleSize:"7",needleCircleOuter:"true",needleCircleInner:"false",borderInnerWidth:"0",borderMiddleWidth:"0",borderOuterWidth:"5",colorBorderOuter:"#000",colorBorderOuterEnd:"#555",colorNeedleShadowDown:"#222",fontNumbersSize:"50",fontUnitsSize:"50",animationRule:"linear",animationDuration:"1000",class:"gauge"}),this._rg_canvas=document.createElement("canvas"),this._radial_gauge=new ru.RadialGauge(Object.assign(this._gu_options,{renderTo:this._rg_canvas})),this._radial_gauge.value=e,this._canvas_texture=ut.from(this._rg_canvas),this._radial_gauge.draw(),this._cell=new gl(this._canvas_texture),this._cell.width=150,this._cell.height=150,this._cell.anchor.set(.5,.5),this.anchor.set(.5,.5),this.addChild(this._cell),this.addChild(this._graphics),this._temp_status.texture_width=150,this._temp_status.texture_height=150,this._temp_status.texture_helf_width=75,this._temp_status.texture_helf_height=75,this._temp_status.spx=-this._temp_status.texture_width,this._temp_status.spy=-this._temp_status.texture_height,this._temp_status.epx=this._temp_status.texture_width,this._temp_status.epy=this._temp_status.texture_height}get cell(){return this._cell}set cell(e){this._cell=e}get bHover(){return this._bHover}set bHover(e){this._bHover=e}get graphics(){return this._graphics}set graphics(e){this._graphics=e}get temp_status(){return this._temp_status}set temp_status(e){this._temp_status=e}get source(){return this._source}set source(e){this._source=e}get rg_canvas(){return this._rg_canvas}set rg_canvas(e){this._rg_canvas=e}get canvas_texture(){return this._canvas_texture}set canvas_texture(e){this._canvas_texture=e}get radial_gauge(){return this._radial_gauge}set radial_gauge(e){this._radial_gauge=e}get oHeight(){return this._oHeight}set oHeight(e){this._oHeight=e}get oWdith(){return this._oWdith}set oWdith(e){this._oWdith=e}get bActivated(){return this._bActivated}set bActivated(e){this._bActivated=e}get gu_options(){return this._gu_options}set gu_options(e){this._gu_options=e}update(e){this._graphics.clear(),this._graphics.lineStyle(1,255,1),this._bActivated&&(this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.spy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.spx,this._temp_status.epy,10),this._graphics.endFill(),this._graphics.beginFill(16777215),this._graphics.drawCircle(this._temp_status.epx,this._temp_status.epy,10),this._graphics.endFill()),e&&(this._source=e),this._radial_gauge.value=this._source,this._canvas_texture.update()}onPointerdown(){this._temp_status.width=this.width,this._temp_status.height=this.height,this._temp_status.alpha=this.alpha,this.width*=1.1,this.height*=1.1,this._cell.alpha=.6,this._bActivated=!0}onPointerup(){this.width=this._temp_status.width,this.height=this._temp_status.height,this._cell.alpha=this._temp_status.alpha,this._bActivated=!1}}class ew{constructor(e){this.x=e.x||0,this.y=e.y||0,this.height=e.height||0,this.width=e.width||0,this.ex=this.x+this.width,this.ey=this.y+this.height,this.center={x:this.x+this.width/2,y:this.y+this.height/2}}isInside(e){return e.x>=this.x&&e.x<=this.ex&&e.y>=this.y&&e.y<=this.ey}clone(){return new ew({x:this.x,y:this.y,width:this.width,height:this.height})}}class m7{constructor(e,n,i,r){this.split=0,this.cells=[],this.cw=0,this.ch=0,this.range=e,this.ncx=n,this.ncy=i,this.ini()}isInside(e){return e.x>=this.range.x&&e.x<=this.range.width+this.range.x&&e.y>=this.range.y&&e.y<=this.range.height+this.range.y}getCell(e,n=0){return 1===arguments.length?this.cells[e]:this.cells[e+n*this.ncx]}getCellByPosition(e=0,n=0){for(var i,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:n})){i=this.cells[r];break}return i}getIndexByPosition(e=0,n=0){for(var i=-1,r=0;r<this.cells.length;r++)if(this.cells[r].isInside({x:e,y:n})){i=r;break}return i}ini(){const e=this.range.x,n=this.range.y,i=this.range.width/this.ncx,r=this.range.height/this.ncy;this.cw=i,this.ch=r;for(let s=0;s<this.ncy;s++)for(let o=0;o<this.ncx;o++){const a=new ew({x:o*i+e,y:s*r+n,width:i,height:r});this.cells.push(a)}this.first=this.cells[0]}}class yl{constructor(){this._keydown=new j,this.keydown$=this._keydown.asObservable()}onMenuStateChange(e){this._keydown.next(e)}}yl.\u0275fac=function(e){return new(e||yl)},yl.\u0275prov=mt({token:yl,factory:yl.\u0275fac,providedIn:"root"});const ZM={Copy:["ctrl+c"],Paste:["ctrl+v"],Group:["ctrl+g"],Select_All:["ctrl+a"]},QM={now:()=>(QM.delegate||Date).now(),delegate:void 0};class v7 extends j{constructor(e=1/0,n=1/0,i=QM){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(i.push(e),!r&&i.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=i?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const o=n.now();let a=0;for(let l=1;l<i.length&&i[l]<=o;l+=2)a=l;a&&i.splice(0,a+1)}}}const _7=["addListener","removeListener"],y7=["addEventListener","removeEventListener"],b7=["on","off"];function qg(t,e,n,i){if(ke(n)&&(i=n,n=void 0),i)return qg(t,e,n).pipe(b1(i));const[r,s]=function E7(t){return ke(t.addEventListener)&&ke(t.removeEventListener)}(t)?y7.map(o=>a=>t[o](e,a,n)):function w7(t){return ke(t.addListener)&&ke(t.removeListener)}(t)?_7.map(JM(t,e)):function x7(t){return ke(t.on)&&ke(t.off)}(t)?b7.map(JM(t,e)):[];if(!r&&no(t))return G(o=>qg(o,e,n))(Ei(t));if(!r)throw new TypeError("Invalid event target");return new U(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function JM(t,e){return n=>i=>t[n](e,i)}function eR(){return ne((t,e)=>{let n,i=!1;t.subscribe(te(e,r=>{const s=n;n=r,i&&e.next([s,r]),i=!0}))})}function A7(t,e){return t===e}function tw(t,e){return t=function I7(t,e){return typeof t>"u"?typeof e>"u"?t:e:t}(t,e),"function"==typeof t?function(){for(var i=arguments,r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=i[o];return!!t.apply(this,s)}:t?function(){return!0}:function(){return!1}}var nw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},tR=function(t){return null!=t&&"object"===(typeof t>"u"?"undefined":nw(t))&&1===t.nodeType&&"object"===nw(t.style)&&"object"===nw(t.ownerDocument)};function nR(t,e){if(e=rw(e,!0),!tR(e))return-1;for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function iw(t,e){return-1!==nR(t,e)}function M7(t,e){for(var n=0;n<e.length;n++)iw(t,e[n])||t.push(e[n]);return e}function R7(t){for(var e=arguments,n=[],i=arguments.length-1;i-- >0;)n[i]=e[i+1];return M7(t,n=n.map(rw))}function P7(t){for(var e=arguments,n=[],i=arguments.length-1;i-- >0;)n[i]=e[i+1];return n.map(rw).reduce(function(r,s){var o=nR(t,s);return-1!==o?r.concat(t.splice(o,1)):r},[])}function rw(t,e){if("string"==typeof t)try{return document.querySelector(t)}catch(n){throw n}if(!tR(t)&&!e)throw new TypeError(t+" is not a DOM element.");return t}function iR(t){if(t===window)return function k7(){var t={top:{value:0,enumerable:!0},left:{value:0,enumerable:!0},right:{value:window.innerWidth,enumerable:!0},bottom:{value:window.innerHeight,enumerable:!0},width:{value:window.innerWidth,enumerable:!0},height:{value:window.innerHeight,enumerable:!0},x:{value:0,enumerable:!0},y:{value:0,enumerable:!0}};if(Object.create)return Object.create({},t);var e={};return Object.defineProperties(e,t),e}();try{var e=t.getBoundingClientRect();return void 0===e.x&&(e.x=e.left,e.y=e.top),e}catch{throw new TypeError("Can't call getBoundingClientRect on "+t)}}var e,sw=void 0;"function"!=typeof Object.create?(e=function(){},sw=function(n,i){if(n!==Object(n)&&null!==n)throw TypeError("Argument must be an object, or null");e.prototype=n||{};var r=new e;return e.prototype=null,void 0!==i&&Object.defineProperties(r,i),null===n&&(r.__proto__=null),r}):sw=Object.create;var F7=sw,bl=["altKey","button","buttons","clientX","clientY","ctrlKey","metaKey","movementX","movementY","offsetX","offsetY","pageX","pageY","region","relatedTarget","screenX","screenY","shiftKey","which","x","y"];function ow(t,e){e=e||{};for(var n=F7(t),i=0;i<bl.length;i++)void 0!==e[bl[i]]&&(n[bl[i]]=e[bl[i]]);return n}function aw(t,e){console.log("data ",e),t.data=e||{},t.dispatched="mousemove"}var md=["webkit","moz","ms","o"],vd=function(){if(typeof window>"u")return function(){};for(var t=0,e=md.length;t<e&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[md[t]+"RequestAnimationFrame"];if(!window.requestAnimationFrame){var n=0;window.requestAnimationFrame=function(i){var r=(new Date).getTime(),s=Math.max(0,16-r-n),o=window.setTimeout(function(){return i(r+s)},s);return n=r+s,o}}return window.requestAnimationFrame.bind(window)}(),su=function(){if(typeof window>"u")return function(){};for(var t=0,e=md.length;t<e&&!window.cancelAnimationFrame;++t)window.cancelAnimationFrame=window[md[t]+"CancelAnimationFrame"]||window[md[t]+"CancelRequestAnimationFrame"];return window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){window.clearTimeout(n)}),window.cancelAnimationFrame.bind(window)}();function B7(t,e){void 0===e&&(e={});var n=this,i=4,r=!1;if("object"!=typeof e.margin){var s=e.margin||-1;this.margin={left:s,right:s,top:s,bottom:s}}else this.margin=e.margin;this.scrollWhenOutside=e.scrollWhenOutside||!1;var o={},a=function O7(t,e){var n=tw((e=e||{}).allowUpdate,!0);return function(r){if(r=r||window.event,t.target=r.target||r.srcElement||r.originalTarget,t.element=this,t.type=r.type,n(r)){if(r.targetTouches)t.x=r.targetTouches[0].clientX,t.y=r.targetTouches[0].clientY,t.pageX=r.targetTouches[0].pageX,t.pageY=r.targetTouches[0].pageY,t.screenX=r.targetTouches[0].screenX,t.screenY=r.targetTouches[0].screenY;else{if(null===r.pageX&&null!==r.clientX){var s=r.target&&r.target.ownerDocument||document,o=s.documentElement,a=s.body;t.pageX=r.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=r.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}else t.pageX=r.pageX,t.pageY=r.pageY;t.x=r.clientX,t.y=r.clientY,t.screenX=r.screenX,t.screenY=r.screenY}t.clientX=t.x,t.clientY=t.y}}}(o),l=function L7(t){var e={screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,buttons:1,relatedTarget:null,region:null};function n(s){for(var o=0;o<bl.length;o++)e[bl[o]]=s[bl[o]]}return void 0!==t&&t.addEventListener("mousemove",n),{destroy:function r(){t&&t.removeEventListener("mousemove",n,!1),e=null},dispatch:MouseEvent?function(o,a,l){var c=new MouseEvent("mousemove",ow(e,a));return aw(c,l),o.dispatchEvent(c)}:"function"==typeof document.createEvent?function(o,a,l){var c=ow(e,a),f=document.createEvent("MouseEvents");return f.initMouseEvent("mousemove",!0,!0,window,0,c.screenX,c.screenY,c.clientX,c.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,c.button,c.relatedTarget),aw(f,l),o.dispatchEvent(f)}:"function"==typeof document.createEventObject?function(o,a,l){var c=document.createEventObject(),f=ow(e,a);for(var g in f)c[g]=f[g];return aw(c,l),o.dispatchEvent(c)}:void 0}}(),c=!1;window.addEventListener("mousemove",a,!1),window.addEventListener("touchmove",a,!1),isNaN(e.maxSpeed)||(i=e.maxSpeed),"object"!=typeof i&&(i={left:i,right:i,top:i,bottom:i}),this.autoScroll=tw(e.autoScroll),this.syncMove=tw(e.syncMove,!1),this.destroy=function(se){window.removeEventListener("mousemove",a,!1),window.removeEventListener("touchmove",a,!1),window.removeEventListener("mousedown",E,!1),window.removeEventListener("touchstart",E,!1),window.removeEventListener("mouseup",S,!1),window.removeEventListener("touchend",S,!1),window.removeEventListener("pointerup",S,!1),window.removeEventListener("mouseleave",R,!1),window.removeEventListener("mousemove",V,!1),window.removeEventListener("touchmove",V,!1),window.removeEventListener("scroll",y,!0),t=[],se&&T()},this.add=function(){for(var se=[],fe=arguments.length;fe--;)se[fe]=arguments[fe];return R7.apply(void 0,[t].concat(se)),this},this.remove=function(){for(var se=[],fe=arguments.length;fe--;)se[fe]=arguments[fe];return P7.apply(void 0,[t].concat(se))};var g,se,f=null;"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]),se=t,t=[],se.forEach(function(fe){fe===window?f=window:n.add(fe)}),Object.defineProperties(this,{down:{get:function(){return c}},maxSpeed:{get:function(){return i}},point:{get:function(){return o}},scrolling:{get:function(){return r}}});var _,v=null;function y(se){for(var fe=0;fe<t.length;fe++)if(t[fe]===se.target){r=!0;break}r&&vd(function(){return r=!1})}function E(){c=!0}function S(){c=!1,T()}function T(){su(_),su(g)}function R(){c=!1}function k(){for(var se=null,fe=0;fe<t.length;fe++)rR(o,t[fe])&&(se=t[fe]);return se}function V(se){if(n.autoScroll()&&!se.dispatched){var fe=se.target,he=document.body;v&&!rR(o,v)&&(n.scrollWhenOutside||(v=null)),fe&&fe.parentNode===he?fe=k():(fe=function I(se){if(!se)return null;if(v===se||iw(t,se))return se;for(;se=se.parentNode;)if(iw(t,se))return se;return null}(fe),fe||(fe=k())),fe&&fe!==v&&(v=fe),f&&(su(g),g=vd(K)),v&&(su(_),_=vd(ee))}}function K(){ae(f),su(g),g=vd(K)}function ee(){!v||(ae(v),su(_),_=vd(ee))}function ae(se){var he,me,fe=iR(se);he=o.x<fe.left+n.margin.left?Math.floor(Math.max(-1,(o.x-fe.left)/n.margin.left-1)*n.maxSpeed.left):o.x>fe.right-n.margin.right?Math.ceil(Math.min(1,(o.x-fe.right)/n.margin.right+1)*n.maxSpeed.right):0,me=o.y<fe.top+n.margin.top?Math.floor(Math.max(-1,(o.y-fe.top)/n.margin.top-1)*n.maxSpeed.top):o.y>fe.bottom-n.margin.bottom?Math.ceil(Math.min(1,(o.y-fe.bottom)/n.margin.bottom+1)*n.maxSpeed.bottom):0,n.syncMove()&&l.dispatch(se,{pageX:o.pageX+he,pageY:o.pageY+me,clientX:o.x+he,clientY:o.y+me}),setTimeout(function(){me&&function ye(se,fe){se===window?window.scrollTo(se.pageXOffset,se.pageYOffset+fe):se.scrollTop+=fe}(se,me),he&&function de(se,fe){se===window?window.scrollTo(se.pageXOffset+fe,se.pageYOffset):se.scrollLeft+=fe}(se,he)})}window.addEventListener("mousedown",E,!1),window.addEventListener("touchstart",E,!1),window.addEventListener("mouseup",S,!1),window.addEventListener("touchend",S,!1),window.addEventListener("pointerup",S,!1),window.addEventListener("mousemove",V,!1),window.addEventListener("touchmove",V,!1),window.addEventListener("mouseleave",R,!1),window.addEventListener("scroll",y,!0)}function rR(t,e,n){return n?t.y>n.top&&t.y<n.bottom&&t.x>n.left&&t.x<n.right:function N7(t,e){var n=iR(e);return t.y>n.top&&t.y<n.bottom&&t.x>n.left&&t.x<n.right}(t,e)}function lw(t,e,n){n&&n.split(" ").forEach(i=>t.addClass(e.nativeElement,i))}function Kg(t,e,n){n&&n.split(" ").forEach(i=>t.removeClass(e.nativeElement,i))}let sR=(()=>{class t{constructor(){this.currentDrag=new j}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oR=(()=>{class t{constructor(n){this.elementRef=n}}return t.\u0275fac=function(n){return new(n||t)($e(wi))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDraggableScrollContainer",""]]}),t})(),H7=(()=>{class t{constructor(n,i,r,s,o,a,l){this.element=n,this.renderer=i,this.draggableHelper=r,this.zone=s,this.vcr=o,this.scrollContainer=a,this.document=l,this.dragAxis={x:!0,y:!0},this.dragSnapGrid={},this.ghostDragEnabled=!0,this.showOriginalElementWhileDragging=!1,this.dragCursor="",this.autoScroll={margin:20},this.dragPointerDown=new zn,this.dragStart=new zn,this.ghostElementCreated=new zn,this.dragging=new zn,this.dragEnd=new zn,this.pointerDown$=new j,this.pointerMove$=new j,this.pointerUp$=new j,this.eventListenerSubscriptions={},this.destroy$=new j,this.timeLongPress={timerBegin:0,timerEnd:0}}ngOnInit(){this.checkEventListeners();const n=this.pointerDown$.pipe(ar(()=>this.canDrag()),G(i=>{i.event.stopPropagation&&!this.scrollContainer&&i.event.stopPropagation();const r=this.renderer.createElement("style");this.renderer.setAttribute(r,"type","text/css"),this.renderer.appendChild(r,this.renderer.createText("\n          body * {\n           -moz-user-select: none;\n           -ms-user-select: none;\n           -webkit-user-select: none;\n           user-select: none;\n          }\n        ")),requestAnimationFrame(()=>{this.document.head.appendChild(r)});const s=this.getScrollPosition(),o=new U(_=>this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",E=>_.next(E))).pipe(C1(s),ie(()=>this.getScrollPosition())),a=new j,l=new v7;this.dragPointerDown.observers.length>0&&this.zone.run(()=>{this.dragPointerDown.next({x:0,y:0})});const c=gt(this.pointerUp$,this.pointerDown$,l,this.destroy$).pipe(rt()),f=ub([this.pointerMove$,o]).pipe(ie(([_,y])=>({currentDrag$:a,transformX:_.clientX-i.clientX,transformY:_.clientY-i.clientY,clientX:_.clientX,clientY:_.clientY,scrollLeft:y.left,scrollTop:y.top,target:_.event.target})),ie(_=>(this.dragSnapGrid.x&&(_.transformX=Math.round(_.transformX/this.dragSnapGrid.x)*this.dragSnapGrid.x),this.dragSnapGrid.y&&(_.transformY=Math.round(_.transformY/this.dragSnapGrid.y)*this.dragSnapGrid.y),_)),ie(_=>(this.dragAxis.x||(_.transformX=0),this.dragAxis.y||(_.transformY=0),_)),ie(_=>{const y=_.scrollLeft-s.left,E=_.scrollTop-s.top;return{..._,x:_.transformX+y,y:_.transformY+E}}),ar(({x:_,y,transformX:E,transformY:S})=>!this.validateDrag||this.validateDrag({x:_,y,transform:{x:E,y:S}})),function C7(t){return ne((e,n)=>{Ei(t).subscribe(te(n,()=>n.complete(),Oe)),!n.closed&&e.subscribe(n)})}(c),rt()),g=f.pipe(_o(1),rt()),v=f.pipe(Gp(1),rt());return g.subscribe(({clientX:_,clientY:y,x:E,y:S})=>{if(this.dragStart.observers.length>0&&this.zone.run(()=>{this.dragStart.next({cancelDrag$:l})}),this.scroller=function U7(t,e){return new B7(t,e)}([this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.defaultView],{...this.autoScroll,autoScroll:()=>!0}),lw(this.renderer,this.element,this.dragActiveClass),this.ghostDragEnabled){const T=this.element.nativeElement.getBoundingClientRect(),R=this.element.nativeElement.cloneNode(!0);if(this.showOriginalElementWhileDragging||this.renderer.setStyle(this.element.nativeElement,"visibility","hidden"),this.ghostElementAppendTo?this.ghostElementAppendTo.appendChild(R):this.element.nativeElement.parentNode.insertBefore(R,this.element.nativeElement.nextSibling),this.ghostElement=R,this.document.body.style.cursor=this.dragCursor,this.setElementStyles(R,{position:"fixed",top:`${T.top}px`,left:`${T.left}px`,width:`${T.width}px`,height:`${T.height}px`,cursor:this.dragCursor,margin:"0",willChange:"transform",pointerEvents:"none"}),this.ghostElementTemplate){const I=this.vcr.createEmbeddedView(this.ghostElementTemplate);R.innerHTML="",I.rootNodes.filter(k=>k instanceof Node).forEach(k=>{R.appendChild(k)}),v.subscribe(()=>{this.vcr.remove(this.vcr.indexOf(I))})}this.ghostElementCreated.observers.length>0&&this.zone.run(()=>{this.ghostElementCreated.emit({clientX:_-E,clientY:y-S,element:R})}),v.subscribe(()=>{R.parentElement.removeChild(R),this.ghostElement=null,this.renderer.setStyle(this.element.nativeElement,"visibility","")})}this.draggableHelper.currentDrag.next(a)}),v.pipe(G(_=>{const y=l.pipe(function S7(t){return function D7(t,e){return ne(S1(t,e,arguments.length>=2,!1,!0))}((e,n,i)=>!t||t(n,i)?e+1:e,0)}(),_o(1),ie(E=>({..._,dragCancelled:E>0})));return l.complete(),y})).subscribe(({x:_,y,dragCancelled:E})=>{this.scroller.destroy(),this.dragEnd.observers.length>0&&this.zone.run(()=>{this.dragEnd.next({x:_,y,dragCancelled:E})}),Kg(this.renderer,this.element,this.dragActiveClass),a.complete()}),gt(c,v).pipe(_o(1)).subscribe(()=>{requestAnimationFrame(()=>{this.document.head.removeChild(r)})}),f}),rt());gt(n.pipe(_o(1),ie(i=>[,i])),n.pipe(eR())).pipe(ar(([i,r])=>!i||i.x!==r.x||i.y!==r.y),ie(([i,r])=>r)).subscribe(({x:i,y:r,currentDrag$:s,clientX:o,clientY:a,transformX:l,transformY:c,target:f})=>{this.dragging.observers.length>0&&this.zone.run(()=>{this.dragging.next({x:i,y:r})}),requestAnimationFrame(()=>{if(this.ghostElement){const g=`translate3d(${l}px, ${c}px, 0px)`;this.setElementStyles(this.ghostElement,{transform:g,"-webkit-transform":g,"-ms-transform":g,"-moz-transform":g,"-o-transform":g})}}),s.next({clientX:o,clientY:a,dropData:this.dropData,target:f})})}ngOnChanges(n){n.dragAxis&&this.checkEventListeners()}ngOnDestroy(){this.unsubscribeEventListeners(),this.pointerDown$.complete(),this.pointerMove$.complete(),this.pointerUp$.complete(),this.destroy$.next()}checkEventListeners(){const n=this.canDrag(),i=Object.keys(this.eventListenerSubscriptions).length>0;n&&!i?this.zone.runOutsideAngular(()=>{this.eventListenerSubscriptions.mousedown=this.renderer.listen(this.element.nativeElement,"mousedown",r=>{this.onMouseDown(r)}),this.eventListenerSubscriptions.mouseup=this.renderer.listen("document","mouseup",r=>{this.onMouseUp(r)}),this.eventListenerSubscriptions.touchstart=this.renderer.listen(this.element.nativeElement,"touchstart",r=>{this.onTouchStart(r)}),this.eventListenerSubscriptions.touchend=this.renderer.listen("document","touchend",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.touchcancel=this.renderer.listen("document","touchcancel",r=>{this.onTouchEnd(r)}),this.eventListenerSubscriptions.mouseenter=this.renderer.listen(this.element.nativeElement,"mouseenter",()=>{this.onMouseEnter()}),this.eventListenerSubscriptions.mouseleave=this.renderer.listen(this.element.nativeElement,"mouseleave",()=>{this.onMouseLeave()})}):!n&&i&&this.unsubscribeEventListeners()}onMouseDown(n){0===n.button&&(this.eventListenerSubscriptions.mousemove||(this.eventListenerSubscriptions.mousemove=this.renderer.listen("document","mousemove",i=>{this.pointerMove$.next({event:i,clientX:i.clientX,clientY:i.clientY})})),this.pointerDown$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onMouseUp(n){0===n.button&&(this.eventListenerSubscriptions.mousemove&&(this.eventListenerSubscriptions.mousemove(),delete this.eventListenerSubscriptions.mousemove),this.pointerUp$.next({event:n,clientX:n.clientX,clientY:n.clientY}))}onTouchStart(n){let i,r,s;if(this.touchStartLongPress&&(this.timeLongPress.timerBegin=Date.now(),r=!1,s=this.hasScrollbar(),i=this.getScrollPosition()),!this.eventListenerSubscriptions.touchmove){const o=qg(this.document,"contextmenu").subscribe(l=>{l.preventDefault()}),a=qg(this.document,"touchmove",{passive:!1}).subscribe(l=>{this.touchStartLongPress&&!r&&s&&(r=this.shouldBeginDrag(n,l,i)),(!this.touchStartLongPress||!s||r)&&(l.preventDefault(),this.pointerMove$.next({event:l,clientX:l.targetTouches[0].clientX,clientY:l.targetTouches[0].clientY}))});this.eventListenerSubscriptions.touchmove=()=>{o.unsubscribe(),a.unsubscribe()}}this.pointerDown$.next({event:n,clientX:n.touches[0].clientX,clientY:n.touches[0].clientY})}onTouchEnd(n){this.eventListenerSubscriptions.touchmove&&(this.eventListenerSubscriptions.touchmove(),delete this.eventListenerSubscriptions.touchmove,this.touchStartLongPress&&this.enableScroll()),this.pointerUp$.next({event:n,clientX:n.changedTouches[0].clientX,clientY:n.changedTouches[0].clientY})}onMouseEnter(){this.setCursor(this.dragCursor)}onMouseLeave(){this.setCursor("")}canDrag(){return this.dragAxis.x||this.dragAxis.y}setCursor(n){this.eventListenerSubscriptions.mousemove||this.renderer.setStyle(this.element.nativeElement,"cursor",n)}unsubscribeEventListeners(){Object.keys(this.eventListenerSubscriptions).forEach(n=>{this.eventListenerSubscriptions[n](),delete this.eventListenerSubscriptions[n]})}setElementStyles(n,i){Object.keys(i).forEach(r=>{this.renderer.setStyle(n,r,i[r])})}getScrollElement(){return this.scrollContainer?this.scrollContainer.elementRef.nativeElement:this.document.body}getScrollPosition(){return this.scrollContainer?{top:this.scrollContainer.elementRef.nativeElement.scrollTop,left:this.scrollContainer.elementRef.nativeElement.scrollLeft}:{top:window.pageYOffset||this.document.documentElement.scrollTop,left:window.pageXOffset||this.document.documentElement.scrollLeft}}shouldBeginDrag(n,i,r){const s=this.getScrollPosition(),o_top=Math.abs(s.top-r.top),o_left=Math.abs(s.left-r.left),a=Math.abs(i.targetTouches[0].clientX-n.touches[0].clientX)-o_left,l=Math.abs(i.targetTouches[0].clientY-n.touches[0].clientY)-o_top,f=this.touchStartLongPress;return(a+l>f.delta||o_top>0||o_left>0)&&(this.timeLongPress.timerBegin=Date.now()),this.timeLongPress.timerEnd=Date.now(),this.timeLongPress.timerEnd-this.timeLongPress.timerBegin>=f.delay&&(this.disableScroll(),!0)}enableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow",""),this.renderer.setStyle(this.document.body,"overflow","")}disableScroll(){this.scrollContainer&&this.renderer.setStyle(this.scrollContainer.elementRef.nativeElement,"overflow","hidden"),this.renderer.setStyle(this.document.body,"overflow","hidden")}hasScrollbar(){const n=this.getScrollElement();return n.scrollWidth>n.clientWidth||n.scrollHeight>n.clientHeight}}return t.\u0275fac=function(n){return new(n||t)($e(wi),$e(mc),$e(sR),$e(Rn),$e(Br),$e(oR,8),$e(er))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDraggable",""]],inputs:{dropData:"dropData",dragAxis:"dragAxis",dragSnapGrid:"dragSnapGrid",ghostDragEnabled:"ghostDragEnabled",showOriginalElementWhileDragging:"showOriginalElementWhileDragging",validateDrag:"validateDrag",dragCursor:"dragCursor",dragActiveClass:"dragActiveClass",ghostElementAppendTo:"ghostElementAppendTo",ghostElementTemplate:"ghostElementTemplate",touchStartLongPress:"touchStartLongPress",autoScroll:"autoScroll"},outputs:{dragPointerDown:"dragPointerDown",dragStart:"dragStart",ghostElementCreated:"ghostElementCreated",dragging:"dragging",dragEnd:"dragEnd"},features:[Rs]}),t})();function aR(t,e,n){return t>=n.left&&t<=n.right&&e>=n.top&&e<=n.bottom}let V7=(()=>{class t{constructor(n,i,r,s,o){this.element=n,this.draggableHelper=i,this.zone=r,this.renderer=s,this.scrollContainer=o,this.dragEnter=new zn,this.dragLeave=new zn,this.dragOver=new zn,this.drop=new zn}ngOnInit(){this.currentDragSubscription=this.draggableHelper.currentDrag.subscribe(n=>{lw(this.renderer,this.element,this.dragActiveClass);const i={updateCache:!0},r=this.renderer.listen(this.scrollContainer?this.scrollContainer.elementRef.nativeElement:"window","scroll",()=>{i.updateCache=!0});let s;const o=n.pipe(ie(({clientX:c,clientY:f,dropData:g,target:v})=>{s={clientX:c,clientY:f,dropData:g,target:v},i.updateCache&&(i.rect=this.element.nativeElement.getBoundingClientRect(),this.scrollContainer&&(i.scrollContainerRect=this.scrollContainer.elementRef.nativeElement.getBoundingClientRect()),i.updateCache=!1);const _=aR(c,f,i.rect),y=!this.validateDrop||this.validateDrop({clientX:c,clientY:f,target:v,dropData:g});return i.scrollContainerRect?_&&y&&aR(c,f,i.scrollContainerRect):_&&y})),a=o.pipe(function T7(t,e=nn){return t=t??A7,ne((n,i)=>{let r,s=!0;n.subscribe(te(i,o=>{const a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}());let l;a.pipe(ar(c=>c)).subscribe(()=>{l=!0,lw(this.renderer,this.element,this.dragOverClass),this.dragEnter.observers.length>0&&this.zone.run(()=>{this.dragEnter.next(s)})}),o.pipe(ar(c=>c)).subscribe(()=>{this.dragOver.observers.length>0&&this.zone.run(()=>{this.dragOver.next(s)})}),a.pipe(eR(),ar(([c,f])=>c&&!f)).subscribe(()=>{l=!1,Kg(this.renderer,this.element,this.dragOverClass),this.dragLeave.observers.length>0&&this.zone.run(()=>{this.dragLeave.next(s)})}),n.subscribe({complete:()=>{r(),Kg(this.renderer,this.element,this.dragActiveClass),l&&(Kg(this.renderer,this.element,this.dragOverClass),this.drop.observers.length>0&&this.zone.run(()=>{this.drop.next(s)}))}})})}ngOnDestroy(){this.currentDragSubscription&&this.currentDragSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)($e(wi),$e(sR),$e(Rn),$e(mc),$e(oR,8))},t.\u0275dir=Jn({type:t,selectors:[["","mwlDroppable",""]],inputs:{dragOverClass:"dragOverClass",dragActiveClass:"dragActiveClass",validateDrop:"validateDrop"},outputs:{dragEnter:"dragEnter",dragLeave:"dragLeave",dragOver:"dragOver",drop:"drop"}}),t})(),G7=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({}),t})();const z7=["container"];function $7(t,e){if(1&t&&(Si(0,"div")(1,"span"),ra(2),Bi(),Si(3,"span"),ra(4),Bi(),Si(5,"span"),ra(6),Bi()()),2&t){const n=e.$implicit;uo(2),Us("x : ",n.x," "),uo(2),Us("y : ",n.y," "),uo(2),Us(" val: ",n.source,"")}}class wl{constructor(e){this._myMessageService=e,this._option={},this._pos_frame_mouse=new en,this._pos_real_mouse=new en,this._pos_last_frame_mouse=new en,this._hotkey_label="",this._gauges=[],this._status={},this._gs_frame=new iu,this._gs_main=new iu,this._stages={},this._freams={},this._track_point=[],this._status.system_time=Date.now(),this._status.interactive_time=0,this._status.last_time=Date.now(),this._status.last_time2=Date.now(),this._status.frames={},this._status.pointerdown=!1,this._myMessageService.keydown$.subscribe(n=>{this._hotkey_label=n})}get hotkey_label(){return this._hotkey_label}set hotkey_label(e){this._hotkey_label=e}get pos_real_mouse(){return this._pos_real_mouse}set pos_real_mouse(e){this._pos_real_mouse=e}get track_point(){return this._track_point}set track_point(e){this._track_point=e}get gs_main(){return this._gs_main}set gs_main(e){this._gs_main=e}get gs_frame(){return this._gs_frame}set gs_frame(e){this._gs_frame=e}get status(){return this._status}set status(e){this._status=e}get freams(){return this._freams}set freams(e){this._freams=e}get stages(){return this._stages}set stages(e){this._stages=e}get gauges(){return this._gauges}set gauges(e){this._gauges=e}get view_container(){return this._view_container}set view_container(e){this._view_container=e}get pos_frame_mouse(){return this._pos_frame_mouse}set pos_frame_mouse(e){this._pos_frame_mouse=e}get pos_last_frame_mouse(){return this._pos_last_frame_mouse}set pos_last_frame_mouse(e){this._pos_last_frame_mouse=e}get option(){return this._option}set option(e){this._option=e}get application(){return this._application}set application(e){this._application=e}ngOnInit(){this.loadOption(),this._application=new A0(this._option.window),this._container.nativeElement.appendChild(this._application.view),this._view_container=this._application.stage,this.createStage("frame",0,0,this._option.window.width,this._option.window.height),this.createStage("main",0,0,this._option.window.width,this._option.window.height),this._stages.main.interactive=!0,this._stages.main.cursor="pointer",this._stages.main.on("pointerdown",()=>{this._status.pointerdown=!0}),this._stages.main.on("pointerup",()=>{this._status.pointerdown=!1}),this._stages.main.on("pointermove",e=>{let n=this._freams.main;new en;let r=n.getCellByPosition(e.global.x,e.global.y);0!=this._pos_frame_mouse.x&&0!=this._pos_frame_mouse.y&&this._pos_last_frame_mouse.set(this._pos_frame_mouse.x,this._pos_frame_mouse.y),r&&this._pos_frame_mouse.set(r.center.x,r.center.y),0!=this._pos_real_mouse.x&&0!=this._pos_real_mouse.y&&new en(this._pos_real_mouse.x,this._pos_real_mouse.y),this._pos_real_mouse.set(e.global.x,e.global.y)}),this._stages.main.addChild(this.gs_main),this._stages.frame.addChild(this._gs_frame),this._application.ticker.add(()=>{this.tick()})}cp(e,n){for(var s=[],o=e.x-n.x,a=e.y-n.y,l=Math.sqrt(o*o+a*a),c=Math.floor(l/50),f=0;f<c;f++){var g=f/c,v=n.x+g*o,_=n.y+g*a,E=5*Math.abs(v-n.x)*(_>n.y?1:-1);s.push(new en(v,_+E))}return s}createStage(e,n,i,r,s){this._freams[e]=new m7(new un(n,i,r,s),10,8),this._stages[e]=new zr,this._status.frames[e]=!0,this._view_container.addChild(this._stages[e])}loadOption(){Object.keys(localStorage),this._option={window:{width:800,height:640,backgroundColor:8355711},frames:{area:{x:0,y:0,width:600,height:800,nw:34,nh:48},bumper:{x:75,y:200,width:400,height:300,nw:5,nh:5},bat2:{x:400,y:600,width:150,height:30,nw:5,nh:1,angle:-.76},bat3:{x:150,y:600,width:150,height:30,nw:5,nh:1,angle:.76},r1:{x:175,y:150,width:100,height:20,nw:5,nh:1},r2:{x:375,y:150,width:100,height:20,nw:5,nh:1},r3:{x:275,y:550,width:100,height:20,nw:5,nh:1}},debug:{map:!0,num:0,grid:{bumper:!1,area:!1}}}}tick(){let e=Date.now();this._status.update_time=Date.now(),this._status.gauges=this._gauges.length,this._track_point.push(new en(this._pos_real_mouse.x,this._pos_real_mouse.y)),this._track_point.length>20&&this._track_point.shift(),this._gs_frame.clear(),this._gs_main.clear(),this._gs_main.beginFill(16777215,.2),this._gs_main.drawRect(0,0,this._option.window.width,this._option.window.height),this._gs_main.endFill();for(let r in this._freams)this._status.frames[r]&&this.createGrid(this._freams[r],16777215);for(let r=0;r<this._track_point.length;r++){let s=this._track_point[r],o=r/20,a=5*(1-o);this._gs_main.beginFill(16711680,o),this._gs_main.drawCircle(s.x,s.y,a),this._gs_main.endFill()}this._gauges.forEach(r=>{r.update(),r.bActivated&&this._status.pointerdown&&(r.x=this._pos_frame_mouse.x,r.y=this._pos_frame_mouse.y)}),this._status.interactive_time=Date.now()-e,this._status.last_time2=Date.now()-this._status.last_time,this._status.last_time=Date.now()}createGrid(e,n){const i=e.first;if(this.gs_frame.lineStyle(1,n,.6),i){for(let r=0;r<=e.ncx;r++)this.gs_frame.moveTo(i.x+r*i.width,i.y),this.gs_frame.lineTo(i.x+r*i.width,i.y+e.range.height);for(let r=0;r<=e.ncy;r++)this.gs_frame.moveTo(i.x,i.y+r*i.height),this.gs_frame.lineTo(i.x+e.range.width,i.y+r*i.height)}}drop(e,n){var i=new KM(100,n);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i)}dragEnd(e,n){var i=new KM(100,n);i.x=this._pos_frame_mouse.x,i.y=this._pos_frame_mouse.y,this._stages.main.addChild(i),setInterval(()=>{i.source+=~~(5*Math.random())-2,i.source=Math.max(0,i.source),i.source=Math.min(220,i.source)},16),this._gauges.push(i),console.log("00",e)}btn_click(){}}wl.\u0275fac=function(e){return new(e||wl)($e(yl))},wl.\u0275cmp=Jr({type:wl,selectors:[["app-demo"]],viewQuery:function(e,n){if(1&e&&vy(z7,7),2&e){let i;mp(i=function vp(){return function cU(t,e){return t[19].queries[e].queryList}(_e(),Ef())}())&&(n._container=i.first)}},decls:30,vars:5,consts:[[2,"background-color","#F5F5DC"],[2,"display","flex"],["mwlDroppable",""],["container",""],[1,"div-container"],["mwlDraggable","",1,"div-block",3,"dragEnd","drop"],["i",""],["src","assets/demo.png","width","100px","height","100px"],[1,"div-info"],[4,"ngFor","ngForOf"]],template:function(e,n){1&e&&(Si(0,"div",0)(1,"div",1),os(2,"div",2,3),Si(4,"div",4)(5,"div",5,6),Za("dragEnd",function(r){return n.dragEnd(r,0)})("drop",function(r){return n.drop(r,0)}),os(7,"img",7),Bi(),Si(8,"div",5,6),Za("dragEnd",function(r){return n.dragEnd(r,1)})("drop",function(r){return n.drop(r,1)}),os(10,"img",7),Bi(),Si(11,"div",5,6),Za("dragEnd",function(r){return n.dragEnd(r,2)})("drop",function(r){return n.drop(r,2)}),os(13,"img",7),Bi(),Si(14,"div",5,6),Za("dragEnd",function(r){return n.dragEnd(r,3)})("drop",function(r){return n.drop(r,2)}),os(16,"img",7),Bi()(),Si(17,"div",8)(18,"div")(19,"span"),ra(20),Bi(),Si(21,"span"),ra(22),Bi()(),Si(23,"div")(24,"span"),ra(25),Bi()(),Si(26,"div"),function LC(t,e,n,i,r,s,o,a){const l=_e(),c=pn(),f=t+22,g=c.firstCreatePass?function SL(t,e,n,i,r,s,o,a,l){const c=e.consts,f=bc(e,t,4,o||null,Ps(c,a));F_(e,n,f,Ps(c,l)),Ua(e,f);const g=f.tViews=N_(2,f,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,f),g.queries=e.queries.embeddedTView(f)),f}(f,c,l,e,n,i,r,s,o):c.data[f];kr(g,!1);const v=l[11].createComment("");Vf(c,l,v,g),Fi(v,l),ep(l,l[f]=vC(v,l,v,g)),Zl(g)&&O_(c,l,g),null!=o&&k_(l,g,a)}(27,$7,7,3,"div",9),Bi()()()(),Si(28,"span"),ra(29),Bi()),2&e&&(uo(20),Us("x : ",n.pos_frame_mouse.x,""),uo(2),Us("y : ",n.pos_frame_mouse.y,""),uo(3),Us("hotkey: ",n.hotkey_label,""),uo(2),W_("ngForOf",n.gauges),uo(2),Us(" interacivate : ",n.status.interactive_time,"ms"))},dependencies:[GT,H7,V7],styles:[".div-container[_ngcontent-%COMP%]{display:inline-flex;flex-direction:column;background-color:#fff}.div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]{cursor:pointer;display:inline-flex;align-items:center;justify-content:center;margin:5px;width:150px;height:150px;border:2px solid black;border-radius:5px}.div-container[_ngcontent-%COMP%]   .div-block[_ngcontent-%COMP%]:active{transform:translateY(2px)}"]});const W7=[{path:"index",component:wl},{path:"",component:wl}];class ou{}ou.\u0275fac=function(e){return new(e||ou)},ou.\u0275mod=mr({type:ou}),ou.\u0275inj=ki({imports:[kA.forRoot(W7),kA]});var lR=je(521);class _d{constructor(e,n,i,r,s,o){this.combo=e,this.callback=n,this.allowIn=i,this.description=r,this.action=s,this.persistent=o,this.combo=Array.isArray(e)?e:[e],this.allowIn=i||[],this.description=r||""}static symbolize(e){const n={command:"\u2318",shift:"\u21e7",left:"\u2190",right:"\u2192",up:"\u2191",down:"\u2193",return:"\u23ce",backspace:"\u232b"},i=e.split("+");for(let r=0;r<i.length;r++)"mod"===i[r]&&(i[r]=window.navigator&&window.navigator.platform.indexOf("Mac")>=0?"command":"ctrl"),i[r]=n[i[r]]||i[r];return i.join(" + ")}get formatted(){if(!this.formattedHotkey){const e=this.combo;for(let n=0;n<e.length;n++)e[n]=_d.symbolize(e[n]);this.formattedHotkey=e}return this.formattedHotkey}}const cR=new C("HotkeyOptions");let uR=(()=>{class t{constructor(n){this.options=n,this.hotkeys=[],this.pausedHotkeys=[],this.cheatSheetToggle=new j,this.preventIn=["INPUT","SELECT","TEXTAREA"],lR.prototype.stopCallback=(i,r,s,o)=>!((" "+r.className+" ").indexOf(" mousetrap ")>-1)&&r.contentEditable&&"true"===r.contentEditable,this.mousetrap=new lR,this.initCheatSheet()}initCheatSheet(){this.options.disableCheatSheet||this.add(new _d(this.options.cheatSheetHotkey||"?",function(n){this.cheatSheetToggle.next()}.bind(this),[],this.options.cheatSheetDescription||"Show / hide this help menu")),this.options.cheatSheetCloseEsc&&this.add(new _d("esc",function(n){this.cheatSheetToggle.next(!1)}.bind(this),["HOTKEYS-CHEATSHEET"],this.options.cheatSheetCloseEscDescription||"Hide this help menu"))}add(n,i){if(Array.isArray(n)){const r=[];for(const s of n)r.push(this.add(s,i));return r}return this.remove(n),this.hotkeys.push(n),this.mousetrap.bind(n.combo,(r,s)=>{let o=!0;if(r){const a=r.target||r.srcElement,l=a.nodeName.toUpperCase();(" "+a.className+" ").indexOf(" mousetrap ")>-1?o=!0:this.preventIn.indexOf(l)>-1&&-1===n.allowIn.map(c=>c.toUpperCase()).indexOf(l)&&(o=!1)}if(o)return n.callback.apply(this,[r,s])},i),n}remove(n,i){const r=[];if(!n){for(const o of this.hotkeys)r.push(this.remove(o,i));return r}if(Array.isArray(n)){for(const o of n)r.push(this.remove(o));return r}const s=this.findHotkey(n);return s>-1?(this.hotkeys.splice(s,1),this.mousetrap.unbind(n.combo,i),n):null}get(n){if(!n)return this.hotkeys;if(Array.isArray(n)){const i=[];for(const r of n)i.push(this.get(r));return i}for(const i of this.hotkeys)if(i.combo.indexOf(n)>-1)return i;return null}pause(n){if(!n)return this.pause(this.hotkeys);if(Array.isArray(n)){const i=[];for(const r of n)i.push(this.pause(r));return i}return this.remove(n),this.pausedHotkeys.push(n),n}unpause(n){if(!n)return this.unpause(this.pausedHotkeys);if(Array.isArray(n)){const r=[];for(const s of n)r.push(this.unpause(s));return r}const i=this.pausedHotkeys.indexOf(n);return i>-1?(this.add(n),this.pausedHotkeys.splice(i,1)):null}reset(){this.mousetrap.reset(),this.hotkeys=[],this.pausedHotkeys=[],this.initCheatSheet()}findHotkey(n){return this.hotkeys.indexOf(n)}}return t.\u0275fac=function(n){return new(n||t)(bt(cR))},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Y7=(()=>{class t{static forRoot(n={}){return{ngModule:t,providers:[uR,{provide:cR,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({imports:[[YT]]}),t})();class yd{constructor(e,n){this._myMessageService=e,this._hotkeysService=n,this.title="demo_d";let i=Object.keys(ZM);for(let r=0;r<i.length;r++){let s=i[r];this._hotkeysService.add(new _d(ZM[s],a=>(console.log(s,a),this._myMessageService.onMenuStateChange(s),!1)))}}}function Ao(){}yd.\u0275fac=function(e){return new(e||yd)($e(yl),$e(uR))},yd.\u0275cmp=Jr({type:yd,selectors:[["app-root"]],decls:2,vars:0,template:function(e,n){1&e&&(Si(0,"div"),os(1,"app-demo"),Bi())},dependencies:[wl]});const q7=function(){let t=0;return function(){return t++}}();function En(t){return null===t||typeof t>"u"}function Bn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function gn(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}const ii=t=>("number"==typeof t||t instanceof Number)&&isFinite(+t);function $r(t,e){return ii(t)?t:e}function tn(t,e){return typeof t>"u"?e:t}const hR=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Un(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function In(t,e,n,i){let r,s,o;if(Bn(t))if(s=t.length,i)for(r=s-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<s;r++)e.call(n,t[r],r);else if(gn(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Zg(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Qg(t){if(Bn(t))return t.map(Qg);if(gn(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Qg(t[n[r]]);return e}return t}function dR(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function Z7(t,e,n,i){if(!dR(t))return;const r=e[t],s=n[t];gn(r)&&gn(s)?bd(r,s,i):e[t]=Qg(s)}function bd(t,e,n){const i=Bn(e)?e:[e],r=i.length;if(!gn(t))return t;const s=(n=n||{}).merger||Z7;for(let o=0;o<r;++o){if(!gn(e=i[o]))continue;const a=Object.keys(e);for(let l=0,c=a.length;l<c;++l)s(a[l],t,e,n)}return t}function wd(t,e){return bd(t,e,{merger:Q7})}function Q7(t,e,n){if(!dR(t))return;const i=e[t],r=n[t];gn(i)&&gn(r)?wd(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Qg(r))}const fR={"":t=>t,x:t=>t.x,y:t=>t.y};function ya(t,e){return(fR[e]||(fR[e]=function J7(t){const e=function e9(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(t);return n=>{for(const i of e){if(""===i)break;n=n&&n[i]}return n}}(e)))(t)}function cw(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wr=t=>typeof t<"u",ba=t=>"function"==typeof t,pR=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},Wn=Math.PI,Pn=2*Wn,n9=Pn+Wn,Jg=Number.POSITIVE_INFINITY,i9=Wn/180,Qn=Wn/2,xd=Wn/4,gR=2*Wn/3,Xr=Math.log10,Ys=Math.sign;function mR(t){const e=Math.round(t);t=Ed(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(Xr(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function au(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ed(t,e,n){return Math.abs(t-e)<n}function vR(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function ws(t){return t*(Wn/180)}function uw(t){return t*(180/Wn)}function _R(t){if(!ii(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function yR(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Wn&&(s+=Pn),{angle:s,distance:r}}function hw(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function o9(t,e){return(t-e+n9)%Pn-Wn}function Tr(t){return(t%Pn+Pn)%Pn}function Cd(t,e,n,i){const r=Tr(t),s=Tr(e),o=Tr(n),a=Tr(s-r),l=Tr(o-r),c=Tr(r-s),f=Tr(r-o);return r===s||r===o||i&&s===o||a>l&&c<f}function xi(t,e,n){return Math.max(e,Math.min(n,t))}function Io(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function dw(t,e,n){n=n||(o=>t[o]<e);let s,i=t.length-1,r=0;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Mo=(t,e,n,i)=>dw(t,n,i?r=>t[r][e]<=n:r=>t[r][e]<n),l9=(t,e,n)=>dw(t,n,i=>t[i][e]>=n),bR=["push","pop","shift","splice","unshift"];function wR(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),!(i.length>0)&&(bR.forEach(s=>{delete t[s]}),delete t._chartjs)}function xR(t){const e=new Set;let n,i;for(n=0,i=t.length;n<i;++n)e.add(t[n]);return e.size===i?t:Array.from(e)}const ER=typeof window>"u"?function(t){return t()}:window.requestAnimationFrame;function CR(t,e,n){const i=n||(o=>Array.prototype.slice.call(o));let r=!1,s=[];return function(...o){s=i(o),r||(r=!0,ER.call(window,()=>{r=!1,t.apply(e,s)}))}}const fw=t=>"start"===t?"left":"end"===t?"right":"center",ji=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function DR(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:f,minDefined:g,maxDefined:v}=o.getUserBounds();g&&(r=xi(Math.min(Mo(a,o.axis,c).lo,n?i:Mo(e,l,o.getPixelForValue(c)).lo),0,i-1)),s=v?xi(Math.max(Mo(a,o.axis,f,!0).hi+1,n?0:Mo(e,l,o.getPixelForValue(f),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function SR(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const em=t=>0===t||1===t,TR=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Pn/n),AR=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Pn/n)+1,Dd={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Qn),easeOutSine:t=>Math.sin(t*Qn),easeInOutSine:t=>-.5*(Math.cos(Wn*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>em(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>em(t)?t:TR(t,.075,.3),easeOutElastic:t=>em(t)?t:AR(t,.075,.3),easeInOutElastic:t=>em(t)?t:t<.5?.5*TR(2*t,.1125,.45):.5+.5*AR(2*t-1,.1125,.45),easeInBack:t=>t*t*(2.70158*t-1.70158),easeOutBack:t=>(t-=1)*t*(2.70158*t+1.70158)+1,easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Dd.easeOutBounce(1-t),easeOutBounce:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,easeInOutBounce:t=>t<.5?.5*Dd.easeInBounce(2*t):.5*Dd.easeOutBounce(2*t-1)+.5};function Sd(t){return t+.5|0}const wa=(t,e,n)=>Math.max(Math.min(t,n),e);function Td(t){return wa(Sd(2.55*t),0,255)}function xa(t){return wa(Sd(255*t),0,255)}function Ro(t){return wa(Sd(t/2.55)/100,0,1)}function IR(t){return wa(Sd(100*t),0,100)}const Yr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},pw=[..."0123456789ABCDEF"],f9=t=>pw[15&t],p9=t=>pw[(240&t)>>4]+pw[15&t],tm=t=>(240&t)>>4==(15&t);const y9=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function MR(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function b9(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function w9(t,e,n){const i=MR(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function gw(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,f;return s!==o&&(f=s-o,c=a>.5?f/(2-s-o):f/(s+o),l=function x9(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(n,i,r,f,s),l=60*l+.5),[0|l,c||0,a]}function mw(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(xa)}function vw(t,e,n){return mw(MR,t,e,n)}function RR(t){return(t%360+360)%360}const PR={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},OR={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let nm;const M9=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,_w=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,lu=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function im(t,e,n){if(t){let i=gw(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=vw(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function kR(t,e){return t&&Object.assign(e||{},t)}function NR(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=xa(t[3]))):(e=kR(t,{r:0,g:0,b:0,a:1})).a=xa(e.a),e}function k9(t){return"r"===t.charAt(0)?function R9(t){const e=M9.exec(t);let i,r,s,n=255;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?Td(o):wa(255*o,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Td(i):wa(i,0,255)),r=255&(e[4]?Td(r):wa(r,0,255)),s=255&(e[6]?Td(s):wa(s,0,255)),{r:i,g:r,b:s,a:n}}}(t):function D9(t){const e=y9.exec(t);let i,n=255;if(!e)return;e[5]!==i&&(n=e[6]?Td(+e[5]):xa(+e[5]));const r=RR(+e[2]),s=+e[3]/100,o=+e[4]/100;return i="hwb"===e[1]?function E9(t,e,n){return mw(w9,t,e,n)}(r,s,o):"hsv"===e[1]?function C9(t,e,n){return mw(b9,t,e,n)}(r,s,o):vw(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}(t)}class rm{constructor(e){if(e instanceof rm)return e;const n=typeof e;let i;"object"===n?i=NR(e):"string"===n&&(i=function m9(t){var n,e=t.length;return"#"===t[0]&&(4===e||5===e?n={r:255&17*Yr[t[1]],g:255&17*Yr[t[2]],b:255&17*Yr[t[3]],a:5===e?17*Yr[t[4]]:255}:(7===e||9===e)&&(n={r:Yr[t[1]]<<4|Yr[t[2]],g:Yr[t[3]]<<4|Yr[t[4]],b:Yr[t[5]]<<4|Yr[t[6]],a:9===e?Yr[t[7]]<<4|Yr[t[8]]:255})),n}(e)||function I9(t){nm||(nm=function A9(){const t={},e=Object.keys(OR),n=Object.keys(PR);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,PR[s]);s=parseInt(OR[o],16),t[a]=[s>>16&255,s>>8&255,255&s]}return t}(),nm.transparent=[0,0,0,0]);const e=nm[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(e)||k9(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=kR(this._rgb);return e&&(e.a=Ro(e.a)),e}set rgb(e){this._rgb=NR(e)}rgbString(){return this._valid?function P9(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ro(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}(this._rgb):void 0}hexString(){return this._valid?function _9(t){var e=(t=>tm(t.r)&&tm(t.g)&&tm(t.b)&&tm(t.a))(t)?f9:p9;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function T9(t){if(!t)return;const e=gw(t),n=e[0],i=IR(e[1]),r=IR(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Ro(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l==-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=function O9(t,e,n){const i=lu(Ro(t.r)),r=lu(Ro(t.g)),s=lu(Ro(t.b));return{r:xa(_w(i+n*(lu(Ro(e.r))-i))),g:xa(_w(r+n*(lu(Ro(e.g))-r))),b:xa(_w(s+n*(lu(Ro(e.b))-s))),a:t.a+n*(e.a-t.a)}}(this._rgb,e._rgb,n)),this}clone(){return new rm(this.rgb)}alpha(e){return this._rgb.a=xa(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,n=Sd(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=n,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return im(this._rgb,2,e),this}darken(e){return im(this._rgb,2,-e),this}saturate(e){return im(this._rgb,1,e),this}desaturate(e){return im(this._rgb,1,-e),this}rotate(e){return function S9(t,e){var n=gw(t);n[0]=RR(n[0]+e),n=vw(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,e),this}}function FR(t){return new rm(t)}function LR(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function BR(t){return LR(t)?t:FR(t)}function yw(t){return LR(t)?t:FR(t).saturate(.5).darken(.1).hexString()}const xl=Object.create(null),bw=Object.create(null);function Ad(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function ww(t,e,n){return"string"==typeof e?bd(Ad(t,e),n):bd(Ad(t,""),e)}var mn=new class N9{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,i)=>yw(i.backgroundColor),this.hoverBorderColor=(n,i)=>yw(i.borderColor),this.hoverColor=(n,i)=>yw(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,n){return ww(this,e,n)}get(e){return Ad(this,e)}describe(e,n){return ww(bw,e,n)}override(e,n){return ww(xl,e,n)}route(e,n,i,r){const s=Ad(this,e),o=Ad(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return gn(l)?Object.assign({},c,l):tn(l,c)},set(l){this[a]=l}}})}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function sm(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function L9(t,e,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,f,g,v;for(l=0;l<a;l++)if(g=n[l],null!=g&&!0!==Bn(g))o=sm(t,r,s,o,g);else if(Bn(g))for(c=0,f=g.length;c<f;c++)v=g[c],null!=v&&!Bn(v)&&(o=sm(t,r,s,o,v));t.restore();const _=s.length/2;if(_>n.length){for(l=0;l<_;l++)delete r[s[l]];s.splice(0,_)}return o}function El(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function UR(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function xw(t,e,n,i){jR(t,e,n,i,null)}function jR(t,e,n,i,r){let s,o,a,l,c,f;const g=e.pointStyle,v=e.rotation,_=e.radius;let y=(v||0)*i9;if(g&&"object"==typeof g&&(s=g.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return t.save(),t.translate(n,i),t.rotate(y),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),void t.restore();if(!(isNaN(_)||_<=0)){switch(t.beginPath(),g){default:r?t.ellipse(n,i,r/2,_,0,0,Pn):t.arc(n,i,_,0,Pn),t.closePath();break;case"triangle":t.moveTo(n+Math.sin(y)*_,i-Math.cos(y)*_),y+=gR,t.lineTo(n+Math.sin(y)*_,i-Math.cos(y)*_),y+=gR,t.lineTo(n+Math.sin(y)*_,i-Math.cos(y)*_),t.closePath();break;case"rectRounded":c=.516*_,l=_-c,o=Math.cos(y+xd)*l,a=Math.sin(y+xd)*l,t.arc(n-o,i-a,c,y-Wn,y-Qn),t.arc(n+a,i-o,c,y-Qn,y),t.arc(n+o,i+a,c,y,y+Qn),t.arc(n-a,i+o,c,y+Qn,y+Wn),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*_,f=r?r/2:l,t.rect(n-f,i-l,2*f,2*l);break}y+=xd;case"rectRot":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+a,i-o),t.lineTo(n+o,i+a),t.lineTo(n-a,i+o),t.closePath();break;case"crossRot":y+=xd;case"cross":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"star":o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o),y+=xd,o=Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a),t.moveTo(n+a,i-o),t.lineTo(n-a,i+o);break;case"line":o=r?r/2:Math.cos(y)*_,a=Math.sin(y)*_,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(y)*_,i+Math.sin(y)*_)}t.fill(),e.borderWidth>0&&t.stroke()}}function Id(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function om(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function am(t){t.restore()}function B9(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function U9(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Cl(t,e,n,i,r,s={}){const o=Bn(e)?e:[e],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(t.save(),t.font=r.string,function j9(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),En(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),l=0;l<o.length;++l)c=o[l],a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),En(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),H9(t,n,i,c,s),i+=r.lineHeight;t.restore()}function H9(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,f=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,f),t.lineTo(a,f),t.stroke()}}function Md(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,-Qn,Wn,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Wn,Qn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,Qn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-Qn,!0),t.lineTo(n+o.topLeft,i)}const V9=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),G9=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function z9(t,e){const n=(""+t).match(V9);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const $9=t=>+t||0;function Ew(t,e){const n={},i=gn(e),r=i?Object.keys(e):e,s=gn(t)?i?o=>tn(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=$9(s(o));return n}function HR(t){return Ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Dl(t){return Ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Hi(t){const e=HR(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function mi(t,e){let n=tn((t=t||{}).size,(e=e||mn.font).size);"string"==typeof n&&(n=parseInt(n,10));let i=tn(t.style,e.style);i&&!(""+i).match(G9)&&(console.warn('Invalid font style specified: "'+i+'"'),i="");const r={family:tn(t.family,e.family),lineHeight:z9(tn(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:tn(t.weight,e.weight),string:""};return r.string=function F9(t){return!t||En(t.size)||En(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(r),r}function Rd(t,e,n,i){let s,o,a,r=!0;for(s=0,o=t.length;s<o;++s)if(a=t[s],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),r=!1),void 0!==n&&Bn(a)&&(a=a[n%a.length],r=!1),void 0!==a))return i&&!r&&(i.cacheable=!1),a}function Ea(t,e){return Object.assign(Object.create(t),e)}function Cw(t,e=[""],n=t,i,r=(()=>t[0])){Wr(i)||(i=WR("_fallback",t));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:n,_fallback:i,_getTarget:r,override:o=>Cw([o,...t],e,n,i)};return new Proxy(s,{deleteProperty:(o,a)=>(delete o[a],delete o._keys,delete t[0][a],!0),get:(o,a)=>GR(o,a,()=>function eX(t,e,n,i){let r;for(const s of e)if(r=WR(X9(s,t),n),Wr(r))return Dw(t,r)?Sw(n,i,t,r):r}(a,e,t,o)),getOwnPropertyDescriptor:(o,a)=>Reflect.getOwnPropertyDescriptor(o._scopes[0],a),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(o,a)=>XR(o).includes(a),ownKeys:o=>XR(o),set(o,a,l){const c=o._storage||(o._storage=r());return o[a]=c[a]=l,delete o._keys,!0}})}function cu(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:VR(t,i),setContext:s=>cu(t,s,n,i),override:s=>cu(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty:(s,o)=>(delete s[o],delete t[o],!0),get:(s,o,a)=>GR(s,o,()=>function Y9(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return ba(a)&&o.isScriptable(e)&&(a=function q9(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);return a.add(t),e=e(s,o||i),a.delete(t),Dw(t,e)&&(e=Sw(r._scopes,r,t,e)),e}(e,a,t,n)),Bn(a)&&a.length&&(a=function K9(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(Wr(s.index)&&i(t))e=e[s.index%e.length];else if(gn(e[0])){const l=e,c=r._scopes.filter(f=>f!==l);e=[];for(const f of l){const g=Sw(c,r,t,f);e.push(cu(g,s,o&&o[t],a))}}return e}(e,a,t,o.isIndexable)),Dw(e,a)&&(a=cu(a,r,s&&s[e],o)),a}(s,o,a)),getOwnPropertyDescriptor:(s,o)=>s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(s,o)=>Reflect.has(t,o),ownKeys:()=>Reflect.ownKeys(t),set:(s,o,a)=>(t[o]=a,delete s[o],!0)})}function VR(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:ba(n)?n:()=>n,isIndexable:ba(i)?i:()=>i}}const X9=(t,e)=>t?t+cw(e):e,Dw=(t,e)=>gn(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function GR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function zR(t,e,n){return ba(t)?t(e,n):t}const Z9=(t,e)=>!0===t?e:"string"==typeof t?ya(e,t):void 0;function Q9(t,e,n,i,r){for(const s of e){const o=Z9(n,s);if(o){t.add(o);const a=zR(o._fallback,n,r);if(Wr(a)&&a!==n&&a!==i)return a}else if(!1===o&&Wr(i)&&n!==i)return null}return!1}function Sw(t,e,n,i){const r=e._rootScopes,s=zR(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=$R(a,o,n,s||n,i);return!(null===l||Wr(s)&&s!==n&&(l=$R(a,o,s,l,i),null===l))&&Cw(Array.from(a),[""],r,s,()=>function J9(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Bn(r)&&gn(n)?n:r}(e,n,i))}function $R(t,e,n,i,r){for(;n;)n=Q9(t,e,n,i,r);return n}function WR(t,e){for(const n of e){if(!n)continue;const i=n[t];if(Wr(i))return i}}function XR(t){let e=t._keys;return e||(e=t._keys=function tX(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}(t._scopes)),e}function YR(t,e,n,i){const{iScale:r}=t,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,f;for(a=0,l=i;a<l;++a)c=a+n,f=e[c],o[a]={r:r.parse(ya(f,s),c)};return o}const nX=Number.EPSILON||1e-14,uu=(t,e)=>e<t.length&&!t[e].skip&&t[e],qR=t=>"x"===t?"y":"x";function iX(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=hw(s,r),l=hw(o,s);let c=a/(a+l),f=l/(a+l);c=isNaN(c)?0:c,f=isNaN(f)?0:f;const g=i*c,v=i*f;return{previous:{x:s.x-g*(o.x-r.x),y:s.y-g*(o.y-r.y)},next:{x:s.x+v*(o.x-r.x),y:s.y+v*(o.y-r.y)}}}function lm(t,e,n){return Math.max(Math.min(t,n),e)}function lX(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),"monotone"===e.cubicInterpolationMode)!function oX(t,e="x"){const n=qR(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=uu(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=uu(t,o+1),l){if(c){const f=c[e]-l[e];r[o]=0!==f?(c[n]-l[n])/f:0}s[o]=a?c?Ys(r[o-1])!==Ys(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}(function rX(t,e,n){const i=t.length;let r,s,o,a,l,c=uu(t,0);for(let f=0;f<i-1;++f)if(l=c,c=uu(t,f+1),l&&c){if(Ed(e[f],0,nX)){n[f]=n[f+1]=0;continue}r=n[f]/e[f],s=n[f+1]/e[f],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[f]=r*o*e[f],n[f+1]=s*o*e[f])}})(t,r,s),function sX(t,e,n="x"){const i=qR(n),r=t.length;let s,o,a,l=uu(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=uu(t,c+1),!a)continue;const f=a[n],g=a[i];o&&(s=(f-o[n])/3,a[`cp1${n}`]=f-s,a[`cp1${i}`]=g-s*e[c]),l&&(s=(l[n]-f)/3,a[`cp2${n}`]=f+s,a[`cp2${i}`]=g+s*e[c])}}(t,s,e)}(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=iX(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&function aX(t,e){let n,i,r,s,o,a=Id(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Id(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=lm(r.cp1x,e.left,e.right),r.cp1y=lm(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=lm(r.cp2x,e.left,e.right),r.cp2y=lm(r.cp2y,e.top,e.bottom)))}(t,n)}function KR(){return typeof window<"u"&&typeof document<"u"}function Tw(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function cm(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const um=t=>window.getComputedStyle(t,null),uX=["top","right","bottom","left"];function Sl(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=uX[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Tl(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=um(n),s="border-box"===r.boxSizing,o=Sl(r,"padding"),a=Sl(r,"border","width"),{x:l,y:c,box:f}=function dX(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let a,l,o=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}(t,n),g=o.left+(f&&a.left),v=o.top+(f&&a.top);let{width:_,height:y}=e;return s&&(_-=o.width+a.width,y-=o.height+a.height),{x:Math.round((l-g)/_*n.width/i),y:Math.round((c-v)/y*n.height/i)}}const Aw=t=>Math.round(10*t)/10;function ZR(t,e,n){const i=e||1,r=Math.floor(t.height*i),s=Math.floor(t.width*i);t.height=r/i,t.width=s/i;const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0)}const gX=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return t}();function QR(t,e){const n=function cX(t,e){return um(t).getPropertyValue(e)}(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Al(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function mX(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function vX(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Al(t,r,n),a=Al(r,s,n),l=Al(s,e,n),c=Al(o,a,n),f=Al(a,l,n);return Al(c,f,n)}const JR=new Map;function Pd(t,e,n){return function _X(t,e){e=e||{};const n=t+JSON.stringify(e);let i=JR.get(n);return i||(i=new Intl.NumberFormat(t,e),JR.set(n,i)),i}(e,n).format(t)}function hu(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(n){e=n},textAlign:n=>"center"===n?n:"right"===n?"left":"right",xPlus:(n,i)=>n-i,leftForLtr:(n,i)=>n-i}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function eP(t,e){let n,i;("ltr"===e||"rtl"===e)&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function tP(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function nP(t){return"angle"===t?{between:Cd,compare:o9,normalize:Tr}:{between:Io,compare:(e,n)=>e-n,normalize:e=>e}}function iP({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function rP(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=nP(i),{start:f,end:g,loop:v,style:_}=function wX(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=nP(i),l=e.length;let v,_,{start:c,end:f,loop:g}=t;if(g){for(c+=l,f+=l,v=0,_=l;v<_&&o(a(e[c%l][i]),r,s);++v)c--,f--;c%=l,f%=l}return f<c&&(f+=l),{start:c,end:f,loop:g,style:t.style}}(t,e,n),y=[];let T,R,I,E=!1,S=null;for(let ae=f,ye=f;ae<=g;++ae)R=e[ae%o],!R.skip&&(T=c(R[i]),T!==I&&(E=l(T,r,s),null===S&&(E||l(r,I,T)&&0!==a(r,I))&&(S=0===a(T,r)?ae:ye),null!==S&&(!E||0===a(s,T)||l(s,I,T))&&(y.push(iP({start:S,end:ae,loop:v,count:o,style:_})),S=null),ye=ae,I=T));return null!==S&&y.push(iP({start:S,end:g,loop:v,count:o,style:_})),y}function sP(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=rP(i[r],t.points,e);s.length&&n.push(...s)}return n}function aP(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function SX(t,e){return e&&JSON.stringify(t)!==JSON.stringify(e)}var Po=new class TX{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const o=n.duration;n.listeners[r].forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=ER.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let l,o=s.length-1,a=!1;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,0===n&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);!n||(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}};const lP="transparent",AX={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=BR(t||lP),r=i.valid&&BR(e||lP);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class IX{constructor(e,n,i,r){const s=n[i];r=Rd([e.to,r,s,e.from]);const o=Rd([e.from,s,r]);this._active=!0,this._fn=e.fn||AX[e.type||typeof o],this._easing=Dd[e.easing]||Dd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Rd([e.to,n,r,e.from]),this._from=Rd([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active)return this._target[r]=a,void this._notify(!0);n<0?this._target[r]=s:(l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l))}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}mn.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const PX=Object.keys(mn.animation);mn.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),mn.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),mn.describe("animations",{_fallback:"animation"}),mn.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}});class cP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!gn(e))return;const n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!gn(r))return;const s={};for(const o of PX)s[o]=r[o];(Bn(r.properties)&&r.properties||[i]).forEach(o=>{(o===i||!n.has(o))&&n.set(o,s)})})}_animateOptions(e,n){const i=n.options,r=function kX(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&function OX(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if("$"===c.charAt(0))continue;if("options"===c){r.push(...this._animateOptions(e,n));continue}const f=n[c];let g=s[c];const v=i.get(c);if(g){if(v&&g.active()){g.update(v,f,a);continue}g.cancel()}v&&v.duration?(s[c]=g=new IX(v,e,c,f),r.push(g)):e[c]=f}return r}update(e,n){if(0===this._properties.size)return void Object.assign(e,n);const i=this._createAnimations(e,n);return i.length?(Po.add(this._chart,i),!0):void 0}}function uP(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,s=void 0===n.max?e:0;return{start:i?s:r,end:i?r:s}}function hP(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function dP(t,e,n,i={}){const r=t.keys,s="single"===i.mode;let o,a,l,c;if(null!==e){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=t.values[l],ii(c)&&(s||0===e||Ys(e)===Ys(c))&&(e+=c)}return e}}function fP(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function jX(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function pP(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function gP(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,f=function BX(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(s,o,i),g=e.length;let v;for(let _=0;_<g;++_){const y=e[_],{[l]:E,[c]:S}=y;v=(y._stacks||(y._stacks={}))[c]=jX(r,f,E),v[a]=S,v._top=pP(v,o,!0,i.type),v._bottom=pP(v,o,!1,i.type)}}function Iw(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Od(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||void 0===s[i]||void 0===s[i][n])return;delete s[i][n]}}}const Mw=t=>"reset"===t||"none"===t,mP=(t,e)=>e?t:Object.assign({},t);let qs=(()=>{class t{constructor(n,i){this.chart=n,this._ctx=n.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=fP(n.vScale,n),this.addElements()}updateIndex(n){this.index!==n&&Od(this._cachedMeta),this.index=n}linkScales(){const n=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(v,_,y,E)=>"x"===v?_:"r"===v?E:y,o=i.xAxisID=tn(r.xAxisID,Iw(n,"x")),a=i.yAxisID=tn(r.yAxisID,Iw(n,"y")),l=i.rAxisID=tn(r.rAxisID,Iw(n,"r")),c=i.indexAxis,f=i.iAxisID=s(c,o,a,l),g=i.vAxisID=s(c,a,o,l);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(f),i.vScale=this.getScaleForId(g)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){const i=this._cachedMeta;return n===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const n=this._cachedMeta;this._data&&wR(this._data,this),n._stacked&&Od(n)}_dataCheck(){const n=this.getDataset(),i=n.data||(n.data=[]),r=this._data;if(gn(i))this._data=function LX(t){const e=Object.keys(t),n=new Array(e.length);let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],n[i]={x:s,y:t[s]};return n}(i);else if(r!==i){if(r){wR(r,this);const s=this._cachedMeta;Od(s),s._parsed=[]}i&&Object.isExtensible(i)&&function u9(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),bR.forEach(n=>{const i="_onData"+cw(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{"function"==typeof a[i]&&a[i](...s)}),o}})}))}(i,this),this._syncList=[],this._data=i}}addElements(){const n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){const i=this._cachedMeta,r=this.getDataset();let s=!1;this._dataCheck();const o=i._stacked;i._stacked=fP(i.vScale,i),i.stack!==r.stack&&(s=!0,Od(i),i.stack=r.stack),this._resyncElements(n),(s||o!==i._stacked)&&gP(this,i._parsed)}configure(){const n=this.chart.config,i=n.datasetScopeKeys(this._type),r=n.getOptionScopes(this.getDataset(),i,!0);this.options=n.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,i){const{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis;let g,v,_,c=0===n&&i===s.length||r._sorted,f=n>0&&r._parsed[n-1];if(!1===this._parsing)r._parsed=s,r._sorted=!0,_=s;else{_=Bn(s[n])?this.parseArrayData(r,s,n,i):gn(s[n])?this.parseObjectData(r,s,n,i):this.parsePrimitiveData(r,s,n,i);const y=()=>null===v[l]||f&&v[l]<f[l];for(g=0;g<i;++g)r._parsed[g+n]=v=_[g],c&&(y()&&(c=!1),f=v);r._sorted=c}a&&gP(this,_)}parsePrimitiveData(n,i,r,s){const{iScale:o,vScale:a}=n,l=o.axis,c=a.axis,f=o.getLabels(),g=o===a,v=new Array(s);let _,y,E;for(_=0,y=s;_<y;++_)E=_+r,v[_]={[l]:g||o.parse(f[E],E),[c]:a.parse(i[E],E)};return v}parseArrayData(n,i,r,s){const{xScale:o,yScale:a}=n,l=new Array(s);let c,f,g,v;for(c=0,f=s;c<f;++c)g=c+r,v=i[g],l[c]={x:o.parse(v[0],g),y:a.parse(v[1],g)};return l}parseObjectData(n,i,r,s){const{xScale:o,yScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f=new Array(s);let g,v,_,y;for(g=0,v=s;g<v;++g)_=g+r,y=i[_],f[g]={x:o.parse(ya(y,l),_),y:a.parse(ya(y,c),_)};return f}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,i,r){const o=this._cachedMeta,a=i[n.axis];return dP({keys:hP(this.chart,!0),values:i._stacks[n.axis]},a,o.index,{mode:r})}updateRangeFromParsed(n,i,r,s){const o=r[i.axis];let a=null===o?NaN:o;const l=s&&r._stacks[i.axis];s&&l&&(s.values=l,a=dP(s,o,this._cachedMeta.index)),n.min=Math.min(n.min,a),n.max=Math.max(n.max,a)}getMinMax(n,i){const r=this._cachedMeta,s=r._parsed,o=r._sorted&&n===r.iScale,a=s.length,l=this._getOtherScale(n),c=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:hP(this.chart,!0),values:null})(i,r),f={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:g,max:v}=function UX(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(l);let _,y;function E(){y=s[_];const S=y[l.axis];return!ii(y[n.axis])||g>S||v<S}for(_=0;_<a&&(E()||(this.updateRangeFromParsed(f,n,y,c),!o));++_);if(o)for(_=a-1;_>=0;--_)if(!E()){this.updateRangeFromParsed(f,n,y,c);break}return f}getAllParsedValues(n){const i=this._cachedMeta._parsed,r=[];let s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][n.axis],ii(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(n){const i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(n);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(n){const i=this._cachedMeta;this.update(n||"default"),i._clip=function FX(t){let e,n,i,r;return gn(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(tn(this.options.clip,function NX(t,e,n){if(!1===n)return!1;const i=uP(t,n),r=uP(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(n){}draw(){const n=this._ctx,r=this._cachedMeta,s=r.data||[],o=this.chart.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,f=this.options.drawActiveElementsOnTop;let g;for(r.dataset&&r.dataset.draw(n,o,l,c),g=l;g<l+c;++g){const v=s[g];v.hidden||(v.active&&f?a.push(v):v.draw(n,o))}for(g=0;g<a.length;++g)a[g].draw(n,o)}getStyle(n,i){const r=i?"active":"default";return void 0===n&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(n||0,r)}getContext(n,i,r){const s=this.getDataset();let o;if(n>=0&&n<this._cachedMeta.data.length){const a=this._cachedMeta.data[n];o=a.$context||(a.$context=function VX(t,e,n){return Ea(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),n,a)),o.parsed=this.getParsed(n),o.raw=s.data[n],o.index=o.dataIndex=n}else o=this.$context||(this.$context=function HX(t,e){return Ea(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,i){return this._resolveElementOptions(this.dataElementType.id,i,n)}_resolveElementOptions(n,i="default",r){const s="active"===i,o=this._cachedDataOpts,a=n+"-"+i,l=o[a],c=this.enableOptionSharing&&Wr(r);if(l)return mP(l,c);const f=this.chart.config,g=f.datasetElementScopeKeys(this._type,n),v=s?[`${n}Hover`,"hover",n,""]:[n,""],_=f.getOptionScopes(this.getDataset(),g),y=Object.keys(mn.elements[n]),S=f.resolveNamedOptions(_,y,()=>this.getContext(r,s),v);return S.$shared&&(S.$shared=c,o[a]=Object.freeze(mP(S,c))),S}_resolveAnimations(n,i,r){const s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,l=o[a];if(l)return l;let c;if(!1!==s.options.animation){const g=this.chart.config,v=g.datasetAnimationScopeKeys(this._type,i),_=g.getOptionScopes(this.getDataset(),v);c=g.createResolver(_,this.getContext(n,r,i))}const f=new cP(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(f)),f}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,i){return!i||Mw(n)||this.chart._animationsDisabled}_getSharedOptions(n,i){const r=this.resolveDataElementOptions(n,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(n,i,r,s){Mw(s)?Object.assign(n,r):this._resolveAnimations(i,s).update(n,r)}updateSharedOptions(n,i,r){n&&!Mw(i)&&this._resolveAnimations(void 0,i).update(n,r)}_setStyle(n,i,r,s){n.active=s;const o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(n,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(n,i,r){this._setStyle(n,r,"active",!1)}setHoverStyle(n,i,r){this._setStyle(n,r,"active",!0)}_removeDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){const n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){const i=this._data,r=this._cachedMeta.data;for(const[l,c,f]of this._syncList)this[l](c,f);this._syncList=[];const s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,n):o<s&&this._removeElements(o,s-o)}_insertElements(n,i,r=!0){const s=this._cachedMeta,o=s.data,a=n+i;let l;const c=f=>{for(f.length+=i,l=f.length-1;l>=a;l--)f[l]=f[l-i]};for(c(o),l=n;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(n,i),r&&this.updateElements(o,n,i,"reset")}updateElements(n,i,r,s){}_removeElements(n,i){const r=this._cachedMeta;if(this._parsing){const s=r._parsed.splice(n,i);r._stacked&&Od(r,s)}r.data.splice(n,i)}_sync(n){if(this._parsing)this._syncList.push(n);else{const[i,r,s]=n;this[i](r,s)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){const n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,i){i&&this._sync(["_removeElements",n,i]);const r=arguments.length-2;r&&this._sync(["_insertElements",n,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t.defaults={},t})();function $X(t){const e=t.iScale,n=function zX(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=xR(i.sort((r,s)=>r-s))}return t._cache.$bar}(e,t.type);let r,s,o,a,i=e._length;const l=()=>{32767===o||-32768===o||(Wr(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function vP(t,e,n,i){return Bn(t)?function YX(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function _P(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,f,g,v;for(c=n,f=n+i;c<f;++c)v=e[c],g={},g[r.axis]=a||r.parse(o[c],c),l.push(vP(v,g,s,c));return l}function Rw(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function ZX(t,e,n,i){let r=e.borderSkipped;const s={};if(!r)return void(t.borderSkipped=s);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:f}=function KX(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=f:(s[yP(f,o,a,l)]=!0,r=c)),s[yP(r,o,a,l)]=!0,t.borderSkipped=s}function yP(t,e,n,i){return i?(t=function QX(t,e,n){return t===e?n:t===n?e:t}(t,e,n),t=bP(t,n,e)):t=bP(t,e,n),t}function bP(t,e,n){return"start"===t?e:"end"===t?n:t}function JX(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}qs.prototype.datasetElementType=null,qs.prototype.dataElementType=null;let eY=(()=>{class t extends qs{parsePrimitiveData(n,i,r,s){return _P(n,i,r,s)}parseArrayData(n,i,r,s){return _P(n,i,r,s)}parseObjectData(n,i,r,s){const{iScale:o,vScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,f="x"===o.axis?l:c,g="x"===a.axis?l:c,v=[];let _,y,E,S;for(_=r,y=r+s;_<y;++_)S=i[_],E={},E[o.axis]=o.parse(ya(S,f),_),v.push(vP(ya(S,g),E,a,_));return v}updateRangeFromParsed(n,i,r,s){super.updateRangeFromParsed(n,i,r,s);const o=r._custom;o&&i===this._cachedMeta.vScale&&(n.min=Math.min(n.min,o.min),n.max=Math.max(n.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(n){const i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(n),a=o._custom,l=Rw(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(n){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,n)}updateElements(n,i,r,s){const o="reset"===s,{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),f=l.isHorizontal(),g=this._getRuler(),{sharedOptions:v,includeOptions:_}=this._getSharedOptions(i,s);for(let y=i;y<i+r;y++){const E=this.getParsed(y),S=o||En(E[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(y),T=this._calculateBarIndexPixels(y,g),R=(E._stacks||{})[l.axis],I={horizontal:f,base:S.base,enableBorderRadius:!R||Rw(E._custom)||a===R._top||a===R._bottom,x:f?S.head:T.center,y:f?T.center:S.head,height:f?T.size:Math.abs(S.size),width:f?Math.abs(S.size):T.size};_&&(I.options=v||this.resolveDataElementOptions(y,n[y].active?"active":s));const k=I.options||n[y].options;ZX(I,k,R,a),JX(I,k,g.ratio),this.updateElement(n[y],y,I,s)}}_getStacks(n,i){const{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),o=r.options.stacked,a=[],l=c=>{const f=c.controller.getParsed(i),g=f&&f[c.vScale.axis];if(En(g)||isNaN(g))return!0};for(const c of s)if((void 0===i||!l(c))&&((!1===o||-1===a.indexOf(c.stack)||void 0===o&&void 0===c.stack)&&a.push(c.stack),c.index===n))break;return a.length||a.push(void 0),a}_getStackCount(n){return this._getStacks(void 0,n).length}_getStackIndex(n,i,r){const s=this._getStacks(n,r),o=void 0!==i?s.indexOf(i):-1;return-1===o?s.length-1:o}_getRuler(){const n=this.options,i=this._cachedMeta,r=i.iScale,s=[];let o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));const l=n.barThickness;return{min:l||$X(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:n.grouped,ratio:l?1:n.categoryPercentage*n.barPercentage}}_calculateBarValuePixels(n){const{_cachedMeta:{vScale:i,_stacked:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(n),c=l._custom,f=Rw(c);let y,E,g=l[i.axis],v=0,_=r?this.applyStack(i,l,r):g;_!==g&&(v=_-g,_=g),f&&(g=c.barStart,_=c.barEnd-c.barStart,0!==g&&Ys(g)!==Ys(c.barEnd)&&(v=0),v+=g);const S=En(s)||f?v:s;let T=i.getPixelForValue(S);if(y=this.chart.getDataVisibility(n)?i.getPixelForValue(v+_):T,E=y-T,Math.abs(E)<o){E=function qX(t,e,n){return 0!==t?Ys(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(E,i,a)*o,g===a&&(T-=E/2);const R=i.getPixelForDecimal(0),I=i.getPixelForDecimal(1),k=Math.min(R,I),V=Math.max(R,I);T=Math.max(Math.min(T,V),k),y=T+E}if(T===i.getPixelForValue(a)){const R=Ys(E)*i.getLineWidthForValue(a)/2;T+=R,E-=R}return{size:E,base:T,head:y,center:y+E/2}}_calculateBarIndexPixels(n,i){const r=i.scale,s=this.options,o=s.skipNull,a=tn(s.maxBarThickness,1/0);let l,c;if(i.grouped){const f=o?this._getStackCount(n):i.stackCount,g="flex"===s.barThickness?function XX(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?e.end-e.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(n,i,s,f):function WX(t,e,n,i){const r=n.barThickness;let s,o;return En(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}(n,i,s,f),v=this._getStackIndex(this.index,this._cachedMeta.stack,o?n:void 0);l=g.start+g.chunk*v+g.chunk/2,c=Math.min(a,g.chunk*g.ratio)}else l=r.getPixelForValue(this.getParsed(n)[r.axis],n),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const n=this._cachedMeta,i=n.vScale,r=n.data,s=r.length;let o=0;for(;o<s;++o)null!==this.getParsed(o)[i.axis]&&r[o].draw(this._ctx)}}return t.id="bar",t.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},t.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}},t})(),tY=(()=>{class t extends qs{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(n,i,r,s){const o=super.parsePrimitiveData(n,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(n,i,r,s){const o=super.parseArrayData(n,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=tn(i[r+a][2],this.resolveDataElementOptions(a+r).radius);return o}parseObjectData(n,i,r,s){const o=super.parseObjectData(n,i,r,s);for(let a=0;a<o.length;a++){const l=i[r+a];o[a]._custom=tn(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){const n=this._cachedMeta.data;let i=0;for(let r=n.length-1;r>=0;--r)i=Math.max(i,n[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(n){const i=this._cachedMeta,{xScale:r,yScale:s}=i,o=this.getParsed(n),a=r.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:i.label,value:"("+a+", "+l+(c?", "+c:"")+")"}}update(n){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,n)}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:f}=this._getSharedOptions(i,s),g=a.axis,v=l.axis;for(let _=i;_<i+r;_++){const y=n[_],E=!o&&this.getParsed(_),S={},T=S[g]=o?a.getPixelForDecimal(.5):a.getPixelForValue(E[g]),R=S[v]=o?l.getBasePixel():l.getPixelForValue(E[v]);S.skip=isNaN(T)||isNaN(R),f&&(S.options=c||this.resolveDataElementOptions(_,y.active?"active":s),o&&(S.options.radius=0)),this.updateElement(y,_,S,s)}}resolveDataElementOptions(n,i){const r=this.getParsed(n);let s=super.resolveDataElementOptions(n,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const o=s.radius;return"active"!==i&&(s.radius=0),s.radius+=tn(r&&r._custom,o),s}}return t.id="bubble",t.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},t.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}},t})(),wP=(()=>{class t extends qs{constructor(n,i){super(n,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(n,i){const r=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=r;else{let a,l,o=c=>+r[c];if(gn(r[n])){const{key:c="value"}=this._parsing;o=f=>+ya(r[f],c)}for(a=n,l=n+i;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return ws(this.options.rotation-90)}_getCircumference(){return ws(this.options.circumference)}_getRotationExtents(){let n=Pn,i=-Pn;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)){const s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();n=Math.min(n,o),i=Math.max(i,o+a)}return{rotation:n,circumference:i-n}}update(n){const i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(((t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:t/e)(this.options.cutout,l),1),f=this._getRingWeight(this.index),{circumference:g,rotation:v}=this._getRotationExtents(),{ratioX:_,ratioY:y,offsetX:E,offsetY:S}=function nY(t,e,n){let i=1,r=1,s=0,o=0;if(e<Pn){const a=t,l=a+e,c=Math.cos(a),f=Math.sin(a),g=Math.cos(l),v=Math.sin(l),_=(I,k,V)=>Cd(I,a,l,!0)?1:Math.max(k,k*n,V,V*n),y=(I,k,V)=>Cd(I,a,l,!0)?-1:Math.min(k,k*n,V,V*n),E=_(0,c,g),S=_(Qn,f,v),T=y(Wn,c,g),R=y(Wn+Qn,f,v);i=(E-T)/2,r=(S-R)/2,s=-(E+T)/2,o=-(S+R)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(v,g,c),I=Math.max(Math.min((r.width-a)/_,(r.height-a)/y)/2,0),k=hR(this.options.radius,I),K=(k-Math.max(k*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=E*k,this.offsetY=S*k,s.total=this.calculateTotal(),this.outerRadius=k-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*f,0),this.updateElements(o,0,o.length,n)}_circumference(n,i){const r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(n)||null===s._parsed[n]||s.data[n].hidden?0:this.calculateCircumference(s._parsed[n]*o/Pn)}updateElements(n,i,r,s){const o="reset"===s,a=this.chart,l=a.chartArea,g=(l.left+l.right)/2,v=(l.top+l.bottom)/2,_=o&&a.options.animation.animateScale,y=_?0:this.innerRadius,E=_?0:this.outerRadius,{sharedOptions:S,includeOptions:T}=this._getSharedOptions(i,s);let I,R=this._getRotation();for(I=0;I<i;++I)R+=this._circumference(I,o);for(I=i;I<i+r;++I){const k=this._circumference(I,o),V=n[I],K={x:g+this.offsetX,y:v+this.offsetY,startAngle:R,endAngle:R+k,circumference:k,outerRadius:E,innerRadius:y};T&&(K.options=S||this.resolveDataElementOptions(I,V.active?"active":s)),R+=k,this.updateElement(V,I,K,s)}}calculateTotal(){const n=this._cachedMeta,i=n.data;let s,r=0;for(s=0;s<i.length;s++){const o=n._parsed[s];null!==o&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(n){const i=this._cachedMeta.total;return i>0&&!isNaN(n)?Pn*(Math.abs(n)/i):0}getLabelAndValue(n){const r=this.chart,s=r.data.labels||[],o=Pd(this._cachedMeta._parsed[n],r.options.locale);return{label:s[n]||"",value:o}}getMaxBorderWidth(n){let i=0;const r=this.chart;let s,o,a,l,c;if(!n)for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),n=a.data,l=a.controller;break}if(!n)return 0;for(s=0,o=n.length;s<o;++s)c=l.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(n){let i=0;for(let r=0,s=n.length;r<s;++r){const o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(n){let i=0;for(let r=0;r<n;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(n){return Math.max(tn(this.chart.data.datasets[n].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t.id="doughnut",t.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},t.descriptors={_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e},t.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return n.labels.map((r,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(e){let n=e.label;const i=": "+e.formattedValue;return Bn(n)?(n=n.slice(),n[0]+=i):n+=i,n}}}}},t})(),iY=(()=>{class t extends qs{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(n){const i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled;let{start:l,count:c}=DR(i,s,a);this._drawStart=l,this._drawCount=c,SR(i)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;const f=this.resolveDatasetElementOptions(n);this.options.showLine||(f.borderWidth=0),f.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:f},n),this.updateElements(s,l,c,n)}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,{sharedOptions:g,includeOptions:v}=this._getSharedOptions(i,s),_=a.axis,y=l.axis,{spanGaps:E,segment:S}=this.options,T=au(E)?E:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||"none"===s;let I=i>0&&this.getParsed(i-1);for(let k=i;k<i+r;++k){const V=n[k],K=this.getParsed(k),ee=R?V:{},ae=En(K[y]),ye=ee[_]=a.getPixelForValue(K[_],k),de=ee[y]=o||ae?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,K,c):K[y],k);ee.skip=isNaN(ye)||isNaN(de)||ae,ee.stop=k>0&&Math.abs(K[_]-I[_])>T,S&&(ee.parsed=K,ee.raw=f.data[k]),v&&(ee.options=g||this.resolveDataElementOptions(k,V.active?"active":s)),R||this.updateElement(V,k,ee,s),I=K}}getMaxOverflow(){const n=this._cachedMeta,i=n.dataset,r=i.options&&i.options.borderWidth||0,s=n.data||[];if(!s.length)return r;const o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){const n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis),super.draw()}}return t.id="line",t.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},t.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}},t})(),rY=(()=>{class t extends qs{constructor(n,i){super(n,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(n){const r=this.chart,s=r.data.labels||[],o=Pd(this._cachedMeta._parsed[n].r,r.options.locale);return{label:s[n]||"",value:o}}parseObjectData(n,i,r,s){return YR.bind(this)(n,i,r,s)}update(n){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,n)}getMinMax(){const i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return this._cachedMeta.data.forEach((r,s)=>{const o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){const n=this.chart,i=n.chartArea,r=n.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),l=(o-Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0))/n.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(n,i,r,s){const o="reset"===s,a=this.chart,c=a.options.animation,f=this._cachedMeta.rScale,g=f.xCenter,v=f.yCenter,_=f.getIndexAngle(0)-.5*Wn;let E,y=_;const S=360/this.countVisibleElements();for(E=0;E<i;++E)y+=this._computeAngle(E,s,S);for(E=i;E<i+r;E++){const T=n[E];let R=y,I=y+this._computeAngle(E,s,S),k=a.getDataVisibility(E)?f.getDistanceFromCenterForValue(this.getParsed(E).r):0;y=I,o&&(c.animateScale&&(k=0),c.animateRotate&&(R=I=_));const V={x:g,y:v,innerRadius:0,outerRadius:k,startAngle:R,endAngle:I,options:this.resolveDataElementOptions(E,T.active?"active":s)};this.updateElement(T,E,V,s)}}countVisibleElements(){let i=0;return this._cachedMeta.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(n,i,r){return this.chart.getDataVisibility(n)?ws(this.resolveDataElementOptions(n,i).angle||r):0}}return t.id="polarArea",t.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},t.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:i}}=e.legend.options;return n.labels.map((r,s)=>{const a=e.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:a.backgroundColor,strokeStyle:a.borderColor,lineWidth:a.borderWidth,pointStyle:i,hidden:!e.getDataVisibility(s),index:s}})}return[]}},onClick(e,n,i){i.chart.toggleDataVisibility(n.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:e=>e.chart.data.labels[e.dataIndex]+": "+e.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}},t})(),sY=(()=>{class t extends wP{}return t.id="pie",t.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"},t})(),oY=(()=>{class t extends qs{getLabelAndValue(n){const i=this._cachedMeta.vScale,r=this.getParsed(n);return{label:i.getLabels()[n],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(n,i,r,s){return YR.bind(this)(n,i,r,s)}update(n){const i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,"resize"!==n){const a=this.resolveDatasetElementOptions(n);this.options.showLine||(a.borderWidth=0),this.updateElement(r,void 0,{_loop:!0,_fullLoop:o.length===s.length,options:a},n)}this.updateElements(s,0,s.length,n)}updateElements(n,i,r,s){const o=this._cachedMeta.rScale,a="reset"===s;for(let l=i;l<i+r;l++){const c=n[l],f=this.resolveDataElementOptions(l,c.active?"active":s),g=o.getPointPositionForValue(l,this.getParsed(l).r),v=a?o.xCenter:g.x,_=a?o.yCenter:g.y,y={x:v,y:_,angle:g.angle,skip:isNaN(v)||isNaN(_),options:f};this.updateElement(c,l,y,s)}}}return t.id="radar",t.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},t.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}},t})();class xs{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return au(this.x)&&au(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}xs.defaults={},xs.defaultRoutes=void 0;const xP={values:t=>Bn(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=function aY(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const o=Xr(Math.abs(s)),a=Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Pd(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=t/Math.pow(10,Math.floor(Xr(t)));return 1===i||2===i||5===i?xP.numeric.call(this,t,e,n):""}};var hm={formatters:xP};function dm(t,e,n,i,r){const s=tn(i,0),o=Math.min(tn(r,t.length),t.length);let l,c,f,a=0;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),f=s;f<0;)a++,f=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===f&&(e.push(t[c]),a++,f=Math.round(s+a*n))}mn.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:hm.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),mn.route("scale.ticks","color","","color"),mn.route("scale.grid","color","","borderColor"),mn.route("scale.grid","borderColor","","borderColor"),mn.route("scale.title","color","","color"),mn.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t}),mn.describe("scales",{_fallback:"scale"}),mn.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t});const EP=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n;function CP(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function gY(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let c,l=t.getPixelForTick(r);if(!(n&&(c=1===i?Math.max(l-s,o-l):0===e?(t.getPixelForTick(1)-l)/2:(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function kd(t){return t.drawTicks?t.tickLength:0}function DP(t,e){if(!t.display)return 0;const n=mi(t.font,e),i=Hi(t.padding);return(Bn(t.text)?t.text.length:1)*n.lineHeight+i.height}function yY(t,e,n){let i=fw(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Il extends xs{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=$r(e,Number.POSITIVE_INFINITY),n=$r(n,Number.NEGATIVE_INFINITY),i=$r(i,Number.POSITIVE_INFINITY),r=$r(r,Number.NEGATIVE_INFINITY),{min:$r(e,i),max:$r(n,r),minDefined:ii(e),maxDefined:ii(n)}}getMinMax(e){let o,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:$r(n,$r(i,n)),max:$r(i,$r(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Un(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function W9(t,e,n){const{min:i,max:r}=t,s=hR(e,(r-i)/2),o=(a,l)=>n&&0===a?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?CP(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function lY(t,e){const n=t.options.ticks,i=n.maxTicksLimit||function cY(t){const e=t.options.offset,n=t._tickSize();return Math.floor(Math.min(t._length/n+(e?0:1),t._maxLength/n))}(t),r=n.major.enabled?function hY(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],s=r.length,o=r[0],a=r[s-1],l=[];if(s>i)return function dY(t,e,n,i){let o,r=0,s=n[0];for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}(e,l,r,s/i),l;const c=function uY(t,e,n){const i=function fY(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const s=function r9(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}(r,e,i);if(s>0){let f,g;const v=s>1?Math.round((a-o)/(s-1)):null;for(dm(e,l,c,En(v)?0:o-v,o),f=0,g=s-1;f<g;f++)dm(e,l,c,r[f],r[f+1]);return dm(e,l,c,a,En(v)?e.length:a+v),l}return dm(e,l,c),l}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let n,i,e=this.options.reverse;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Un(this.options.afterUpdate,[this])}beforeSetDimensions(){Un(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Un(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Un(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Un(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Un(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Un(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Un(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=this.ticks.length,r=n.minRotation||0,s=n.maxRotation;let a,l,c,o=r;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal())return void(this.labelRotation=r);const f=this._getLabelSizes(),g=f.widest.width,v=f.highest.height,_=xi(this.chart.width-g,0,this.maxWidth);a=e.offset?this.maxWidth/i:_/(i-1),g+6>a&&(a=_/(i-(e.offset?.5:1)),l=this.maxHeight-kd(e.grid)-n.padding-DP(e.title,this.chart.options.font),c=Math.sqrt(g*g+v*v),o=uw(Math.min(Math.asin(xi((f.highest.height+6)/a,-1,1)),Math.asin(xi(l/c,-1,1))-Math.asin(xi(v/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Un(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Un(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=DP(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=kd(s)+l):(e.height=this.maxHeight,e.width=kd(s)+l),i.display&&this.ticks.length){const{first:c,last:f,widest:g,highest:v}=this._getLabelSizes(),_=2*i.padding,y=ws(this.labelRotation),E=Math.cos(y),S=Math.sin(y);a?e.height=Math.min(this.maxHeight,e.height+(i.mirror?0:S*g.width+E*v.height)+_):e.width=Math.min(this.maxWidth,e.width+(i.mirror?0:E*g.width+S*v.height)+_),this._calculatePadding(c,f,S,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=0!==this.labelRotation,c="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,g=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,_=0;l?c?(v=r*e.width,_=i*n.height):(v=i*e.height,_=r*n.width):"start"===s?_=n.width:"end"===s?v=e.width:"inner"!==s&&(v=e.width/2,_=n.width/2),this.paddingLeft=Math.max((v-f+o)*this.width/(this.width-f),0),this.paddingRight=Math.max((_-g+o)*this.width/(this.width-g),0)}else{let f=n.height/2,g=e.height/2;"start"===s?(f=0,g=e.height):"end"===s&&(f=n.height,g=0),this.paddingTop=f+o,this.paddingBottom=g+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Un(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return"top"===n||"bottom"===n||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let n,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),n=0,i=e.length;n<i;n++)En(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=CP(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length)}return e}_computeLabelSizes(e,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[];let c,f,g,v,_,y,E,S,T,R,I,a=0,l=0;for(c=0;c<n;++c){if(v=e[c].label,_=this._resolveTickFontOptions(c),i.font=y=_.string,E=r[y]=r[y]||{data:{},gc:[]},S=_.lineHeight,T=R=0,En(v)||Bn(v)){if(Bn(v))for(f=0,g=v.length;f<g;++f)I=v[f],!En(I)&&!Bn(I)&&(T=sm(i,E.data,E.gc,T,I),R+=S)}else T=sm(i,E.data,E.gc,T,v),R=S;s.push(T),o.push(R),a=Math.max(T,a),l=Math.max(R,l)}!function mY(t,e){In(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}(r,n);const k=s.indexOf(a),V=o.indexOf(l),K=ee=>({width:s[ee]||0,height:o[ee]||0});return{first:K(0),last:K(n-1),widest:K(k),highest:K(V),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return function a9(t){return xi(t,-32768,32767)}(this._alignToPixels?El(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=function _Y(t,e,n){return Ea(t,{tick:n,index:e,type:"tick"})}(this.getContext(),e,i))}return this.$context||(this.$context=function vY(t,e){return Ea(t,{scale:e,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=ws(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o}=r,a=s.offset,l=this.isHorizontal(),f=this.ticks.length+(a?1:0),g=kd(s),v=[],_=s.setContext(this.getContext()),y=_.drawBorder?_.borderWidth:0,E=y/2,S=function(Ye){return El(i,Ye,y)};let T,R,I,k,V,K,ee,ae,ye,de,se,fe;if("top"===o)T=S(this.bottom),K=this.bottom-g,ae=T-E,de=S(e.top)+E,fe=e.bottom;else if("bottom"===o)T=S(this.top),de=e.top,fe=S(e.bottom)-E,K=T+E,ae=this.top+g;else if("left"===o)T=S(this.right),V=this.right-g,ee=T-E,ye=S(e.left)+E,se=e.right;else if("right"===o)T=S(this.left),ye=e.left,se=S(e.right)-E,V=T+E,ee=this.left+g;else if("x"===n){if("center"===o)T=S((e.top+e.bottom)/2+.5);else if(gn(o)){const Ye=Object.keys(o)[0];T=S(this.chart.scales[Ye].getPixelForValue(o[Ye]))}de=e.top,fe=e.bottom,K=T+E,ae=K+g}else if("y"===n){if("center"===o)T=S((e.left+e.right)/2);else if(gn(o)){const Ye=Object.keys(o)[0];T=S(this.chart.scales[Ye].getPixelForValue(o[Ye]))}V=T-E,ee=V-g,ye=e.left,se=e.right}const he=tn(r.ticks.maxTicksLimit,f),me=Math.max(1,Math.ceil(f/he));for(R=0;R<f;R+=me){const Ye=s.setContext(this.getContext(R)),lt=Ye.lineWidth,it=Ye.color,vn=Ye.borderDash||[],an=Ye.borderDashOffset,qr=Ye.tickWidth,Qs=Ye.tickColor,ko=Ye.tickBorderDash||[],Js=Ye.tickBorderDashOffset;I=gY(this,R,a),void 0!==I&&(k=El(i,I,lt),l?V=ee=ye=se=k:K=ae=de=fe=k,v.push({tx1:V,ty1:K,tx2:ee,ty2:ae,x1:ye,y1:de,x2:se,y2:fe,width:lt,color:it,borderDash:vn,borderDashOffset:an,tickWidth:qr,tickColor:Qs,tickBorderDash:ko,tickBorderDashOffset:Js}))}return this._ticksLength=f,this._borderValue=T,v}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:f,mirror:g}=s,v=kd(i.grid),_=v+f,y=g?-f:_,E=-ws(this.labelRotation),S=[];let T,R,I,k,V,K,ee,ae,ye,de,se,fe,he="middle";if("top"===r)K=this.bottom-y,ee=this._getXAxisLabelAlignment();else if("bottom"===r)K=this.top+y,ee=this._getXAxisLabelAlignment();else if("left"===r){const Ye=this._getYAxisLabelAlignment(v);ee=Ye.textAlign,V=Ye.x}else if("right"===r){const Ye=this._getYAxisLabelAlignment(v);ee=Ye.textAlign,V=Ye.x}else if("x"===n){if("center"===r)K=(e.top+e.bottom)/2+_;else if(gn(r)){const Ye=Object.keys(r)[0];K=this.chart.scales[Ye].getPixelForValue(r[Ye])+_}ee=this._getXAxisLabelAlignment()}else if("y"===n){if("center"===r)V=(e.left+e.right)/2-_;else if(gn(r)){const Ye=Object.keys(r)[0];V=this.chart.scales[Ye].getPixelForValue(r[Ye])}ee=this._getYAxisLabelAlignment(v).textAlign}"y"===n&&("start"===l?he="top":"end"===l&&(he="bottom"));const me=this._getLabelSizes();for(T=0,R=a.length;T<R;++T){I=a[T],k=I.label;const Ye=s.setContext(this.getContext(T));ae=this.getPixelForTick(T)+s.labelOffset,ye=this._resolveTickFontOptions(T),de=ye.lineHeight,se=Bn(k)?k.length:1;const lt=se/2,it=Ye.color,vn=Ye.textStrokeColor,an=Ye.textStrokeWidth;let Qs,qr=ee;if(o?(V=ae,"inner"===ee&&(qr=T===R-1?this.options.reverse?"left":"right":0===T?this.options.reverse?"right":"left":"center"),fe="top"===r?"near"===c||0!==E?-se*de+de/2:"center"===c?-me.highest.height/2-lt*de+de:de/2-me.highest.height:"near"===c||0!==E?de/2:"center"===c?me.highest.height/2-lt*de:me.highest.height-se*de,g&&(fe*=-1)):(K=ae,fe=(1-se)*de/2),Ye.showLabelBackdrop){const ko=Hi(Ye.backdropPadding),Js=me.heights[T],No=me.widths[T];let yu=K+fe-ko.top,bu=V-ko.left;switch(he){case"middle":yu-=Js/2;break;case"bottom":yu-=Js}switch(ee){case"center":bu-=No/2;break;case"right":bu-=No}Qs={left:bu,top:yu,width:No+ko.width,height:Js+ko.height,color:Ye.backdropColor}}S.push({rotation:E,label:k,font:ye,color:it,strokeColor:vn,strokeWidth:an,textOffset:fe,textAlign:qr,textBaseline:he,translation:[V,K],backdrop:Qs})}return S}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-ws(this.labelRotation))return"top"===e?"left":"right";let r="center";return"start"===n.align?r="left":"end"===n.align?r="right":"inner"===n.align&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,a=e+s,l=this._getLabelSizes().widest.width;let c,f;return"left"===n?r?(f=this.right+s,"near"===i?c="left":"center"===i?(c="center",f+=l/2):(c="right",f+=l)):(f=this.right-a,"near"===i?c="right":"center"===i?(c="center",f-=l/2):(c="left",f=this.left)):"right"===n?r?(f=this.left+s,"near"===i?c="right":"center"===i?(c="center",f-=l/2):(c="left",f-=l)):(f=this.left+a,"near"===i?c="left":"center"===i?(c="center",f+=l/2):(c="right",f=this.right)):c="right",{textAlign:c,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;return"left"===n||"right"===n?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===n||"bottom"===n?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,f)=>{!f.width||!f.color||(i.save(),i.lineWidth=f.width,i.strokeStyle=f.color,i.setLineDash(f.borderDash||[]),i.lineDashOffset=f.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{grid:i}}=this,r=i.setContext(this.getContext()),s=i.drawBorder?r.borderWidth:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,f,g;this.isHorizontal()?(l=El(e,this.left,s)-s/2,c=El(e,this.right,o)+o/2,f=g=a):(f=El(e,this.top,s)-s/2,g=El(e,this.bottom,o)+o/2,l=c=a),n.save(),n.lineWidth=r.borderWidth,n.strokeStyle=r.borderColor,n.beginPath(),n.moveTo(l,f),n.lineTo(c,g),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&om(i,r);const s=this._labelItems||(this._labelItems=this._computeLabelItems(e));let o,a;for(o=0,a=s.length;o<a;++o){const l=s[o],c=l.font,f=l.label;l.backdrop&&(i.fillStyle=l.backdrop.color,i.fillRect(l.backdrop.left,l.backdrop.top,l.backdrop.width,l.backdrop.height)),Cl(i,f,0,l.textOffset,c,l)}r&&am(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=mi(i.font),o=Hi(i.padding),a=i.align;let l=s.lineHeight/2;"bottom"===n||"center"===n||gn(n)?(l+=o.bottom,Bn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:f,maxWidth:g,rotation:v}=function bY(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:f}=l;let v,_,y,g=0;const E=o-r,S=a-s;if(t.isHorizontal()){if(_=ji(i,s,a),gn(n)){const T=Object.keys(n)[0];y=f[T].getPixelForValue(n[T])+E-e}else y="center"===n?(c.bottom+c.top)/2+E-e:EP(t,n,e);v=a-s}else{if(gn(n)){const T=Object.keys(n)[0];_=f[T].getPixelForValue(n[T])-S+e}else _="center"===n?(c.left+c.right)/2-S+e:EP(t,n,e);y=ji(i,o,r),g="left"===n?-Qn:Qn}return{titleX:_,titleY:y,maxWidth:v,rotation:g}}(this,l,n,a);Cl(e,i.text,0,0,s,{color:i.color,maxWidth:g,rotation:v,textAlign:yY(a,n,r),textBaseline:"middle",translation:[c,f]})}draw(e){!this._isVisible()||(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=tn(e.grid&&e.grid.z,-1);return this._isVisible()&&this.draw===Il.prototype.draw?[{z:i,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:i+1,draw:()=>{this.drawBorder()}},{z:n,draw:r=>{this.drawLabels(r)}}]:[{z:n,draw:r=>{this.draw(r)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){return mi(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class fm{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;(function EY(t){return"id"in t&&"defaults"in t})(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,function wY(t,e,n){const i=bd(Object.create(null),[n?mn.get(n):{},mn.get(e),t.defaults]);mn.set(e,i),t.defaultRoutes&&function xY(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");mn.route(s,r,l,a)})}(e,t.defaultRoutes),t.descriptors&&mn.describe(e,t.descriptors)}(e,o,i),this.override&&mn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in mn[r]&&(delete mn[r][i],this.override&&delete xl[i])}}var Ks=new class CY{constructor(){this.controllers=new fm(qs,"datasets",!0),this.elements=new fm(xs,"elements"),this.plugins=new fm(Object,"plugins"),this.scales=new fm(Il,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):In(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=cw(e);Un(i["before"+r],[],i),n[e](i),Un(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+i+".");return r}},DY=Object.freeze({__proto__:null,BarController:eY,BubbleController:tY,DoughnutController:wP,LineController:iY,PolarAreaController:rY,PieController:sY,RadarController:oY,ScatterController:(()=>{class t extends qs{update(n){const i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled;let{start:o,count:a}=DR(i,r,s);if(this._drawStart=o,this._drawCount=a,SR(i)&&(o=0,a=r.length),this.options.showLine){const{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;const f=this.resolveDatasetElementOptions(n);f.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:f},n)}this.updateElements(r,o,a,n)}addElements(){const{showLine:n}=this.options;!this.datasetElementType&&n&&(this.datasetElementType=Ks.getElement("line")),super.addElements()}updateElements(n,i,r,s){const o="reset"===s,{iScale:a,vScale:l,_stacked:c,_dataset:f}=this._cachedMeta,g=this.resolveDataElementOptions(i,s),v=this.getSharedOptions(g),_=this.includeOptions(s,v),y=a.axis,E=l.axis,{spanGaps:S,segment:T}=this.options,R=au(S)?S:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||o||"none"===s;let k=i>0&&this.getParsed(i-1);for(let V=i;V<i+r;++V){const K=n[V],ee=this.getParsed(V),ae=I?K:{},ye=En(ee[E]),de=ae[y]=a.getPixelForValue(ee[y],V),se=ae[E]=o||ye?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,ee,c):ee[E],V);ae.skip=isNaN(de)||isNaN(se)||ye,ae.stop=V>0&&Math.abs(ee[y]-k[y])>R,T&&(ae.parsed=ee,ae.raw=f.data[V]),_&&(ae.options=v||this.resolveDataElementOptions(V,K.active?"active":s)),I||this.updateElement(K,V,ae,s),k=ee}this.updateSharedOptions(v,s,g)}getMaxOverflow(){const n=this._cachedMeta,i=n.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}const r=n.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;const o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return t.id="scatter",t.defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1},t.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:e=>"("+e.label+", "+e.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}},t})()});function Ml(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var SY={_date:(()=>{class t{constructor(n){this.options=n||{}}init(n){}formats(){return Ml()}parse(n,i){return Ml()}format(n,i){return Ml()}add(n,i,r){return Ml()}diff(n,i,r){return Ml()}startOf(n,i,r){return Ml()}endOf(n,i){return Ml()}}return t.override=function(e){Object.assign(t.prototype,e)},t})()};function TY(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&"r"!==e&&o&&s.length){const l=a._reversePixels?l9:Mo;if(!i)return l(s,e,n);if(r._sharedOptions){const c=s[0],f="function"==typeof c.getRange&&c.getRange(e);if(f){const g=l(s,e,n-f),v=l(s,e,n+f);return{lo:g.lo,hi:v.hi}}}}return{lo:0,hi:s.length-1}}function Nd(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:f}=s[a],{lo:g,hi:v}=TY(s[a],e,o,r);for(let _=g;_<=v;++_){const y=f[_];y.skip||i(y,c,_)}}}function Pw(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Nd(t,n,e,function(a,l,c){!r&&!Id(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Ow(t,e,n,i,r,s){return s||t.isPointInArea(e)?"r"!==n||i?function MY(t,e,n,i,r,s){let o=[];const a=function AY(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return Nd(t,n,e,function c(f,g,v){const _=f.inRange(e.x,e.y,r);if(i&&!_)return;const y=f.getCenterPoint(r);if(!s&&!t.isPointInArea(y)&&!_)return;const S=a(e,y);S<l?(o=[{element:f,datasetIndex:g,index:v}],l=S):S===l&&o.push({element:f,datasetIndex:g,index:v})}),o}(t,e,n,i,r,s):function IY(t,e,n,i){let r=[];return Nd(t,n,e,function s(o,a,l){const{startAngle:c,endAngle:f}=o.getProps(["startAngle","endAngle"],i),{angle:g}=yR(o,{x:e.x,y:e.y});Cd(g,c,f)&&r.push({element:o,datasetIndex:a,index:l})}),r}(t,e,n,r):[]}function SP(t,e,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return Nd(t,n,e,(l,c,f)=>{l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:f}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var RY={evaluateInteractionItems:Nd,modes:{index(t,e,n,i){const r=Tl(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Pw(t,r,s,i,o):Ow(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const f=a[0].index,g=c.data[f];g&&!g.skip&&l.push({element:g,datasetIndex:c.index,index:f})}),l):[]},dataset(t,e,n,i){const r=Tl(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Pw(t,r,s,i,o):Ow(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let f=0;f<c.length;++f)a.push({element:c[f],datasetIndex:l,index:f})}return a},point:(t,e,n,i)=>Pw(t,Tl(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest:(t,e,n,i)=>Ow(t,Tl(e,t),n.axis||"xy",n.intersect,i,n.includeInvisible||!1),x:(t,e,n,i)=>SP(t,Tl(e,t),"x",n.intersect,i),y:(t,e,n,i)=>SP(t,Tl(e,t),"y",n.intersect,i)}};const TP=["left","top","right","bottom"];function Fd(t,e){return t.filter(n=>n.pos===e)}function AP(t,e){return t.filter(n=>-1===TP.indexOf(n.pos)&&n.box.axis===e)}function Ld(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function IP(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function MP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function FY(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!gn(r)){n.size&&(t[r]-=n.size);const g=i[n.stack]||{size:0,count:1};g.size=Math.max(g.size,n.horizontal?s.height:s.width),n.size=g.size/g.count,t[r]+=n.size}s.getPadding&&MP(o,s.getPadding());const a=Math.max(0,e.outerWidth-IP(o,t,"left","right")),l=Math.max(0,e.outerHeight-IP(o,t,"top","bottom")),c=a!==t.w,f=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:f}:{same:f,other:c}}function BY(t,e){const n=e.maxPadding;return function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}(t?["left","right"]:["top","bottom"])}function Bd(t,e,n,i){const r=[];let s,o,a,l,c,f;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,BY(a.horizontal,e));const{same:g,other:v}=FY(e,n,a,i);c|=g&&r.length,f=f||v,l.fullSize||r.push(a)}return c&&Bd(r,e,n,i)||f}function pm(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function RP(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},f=a.stackWeight/c.weight||1;if(a.horizontal){const g=e.w*f,v=c.size||l.height;Wr(c.start)&&(o=c.start),l.fullSize?pm(l,r.left,o,n.outerWidth-r.right-r.left,v):pm(l,e.left+c.placed,o,g,v),c.start=o,c.placed+=g,o=l.bottom}else{const g=e.h*f,v=c.size||l.width;Wr(c.start)&&(s=c.start),l.fullSize?pm(l,s,r.top,v,n.outerHeight-r.bottom-r.top):pm(l,s,e.top+c.placed,v,g),c.start=s,c.placed+=g,s=l.right}}e.x=s,e.y=o}mn.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var Vi={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Hi(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=function NY(t){const e=function PY(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}(t),n=Ld(e.filter(c=>c.box.fullSize),!0),i=Ld(Fd(e,"left"),!0),r=Ld(Fd(e,"right")),s=Ld(Fd(e,"top"),!0),o=Ld(Fd(e,"bottom")),a=AP(e,"x"),l=AP(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Fd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(t.boxes),l=a.vertical,c=a.horizontal;In(t.boxes,E=>{"function"==typeof E.beforeLayout&&E.beforeLayout()});const f=l.reduce((E,S)=>S.box.options&&!1===S.box.options.display?E:E+1,0)||1,g=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/f,hBoxMaxHeight:o/2}),v=Object.assign({},r);MP(v,Hi(i));const _=Object.assign({maxPadding:v,w:s,h:o,x:r.left,y:r.top},r),y=function kY(t,e){const n=function OY(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!TP.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],f=c&&a.stackWeight/c.weight;a.horizontal?(a.width=f?f*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=f?f*r:l&&e.availableHeight)}return n}(l.concat(c),g);Bd(a.fullSize,_,g,y),Bd(l,_,g,y),Bd(c,_,g,y)&&Bd(l,_,g,y),function LY(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(_),RP(a.leftAndTop,_,g,y),_.x+=_.w,_.y+=_.h,RP(a.rightAndBottom,_,g,y),t.chartArea={left:_.left,top:_.top,right:_.left+_.w,bottom:_.top+_.h,height:_.h,width:_.w},In(a.chartArea,E=>{const S=E.box;Object.assign(S,t.chartArea),S.update(_.w,_.h,{left:0,top:0,right:0,bottom:0})})}};class PP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class UY extends PP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const gm="$chartjs",jY={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},OP=t=>null===t||""===t,kP=!!gX&&{passive:!0};function GY(t,e,n){t.canvas.removeEventListener(e,n,kP)}function mm(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function $Y(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||mm(a.addedNodes,i),o=o&&!mm(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function WY(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||mm(a.removedNodes,i),o=o&&!mm(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const Ud=new Map;let NP=0;function FP(){const t=window.devicePixelRatio;t!==NP&&(NP=t,Ud.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function qY(t,e,n){const i=t.canvas,r=i&&Tw(i);if(!r)return;const s=CR((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,f=l.contentRect.height;0===c&&0===f||s(c,f)});return o.observe(r),function XY(t,e){Ud.size||window.addEventListener("resize",FP),Ud.set(t,e)}(t,s),o}function kw(t,e,n){n&&n.disconnect(),"resize"===e&&function YY(t){Ud.delete(t),Ud.size||window.removeEventListener("resize",FP)}(t)}function KY(t,e,n){const i=t.canvas,r=CR(s=>{null!==t.ctx&&n(function zY(t,e){const n=jY[t.type]||t.type,{x:i,y:r}=Tl(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(s,t))},t,s=>{const o=s[0];return[o,o.offsetX,o.offsetY]});return function VY(t,e,n){t.addEventListener(e,n,kP)}(i,e,r),r}class ZY extends PP{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(function HY(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[gm]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",OP(r)){const s=QR(t,"width");void 0!==s&&(t.width=s)}if(OP(i))if(""===t.style.height)t.height=t.width/(e||2);else{const s=QR(t,"height");void 0!==s&&(t.height=s)}}(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[gm])return!1;const i=n[gm].initial;["height","width"].forEach(s=>{const o=i[s];En(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[gm],!0}addEventListener(e,n,i){this.removeEventListener(e,n),(e.$proxies||(e.$proxies={}))[n]=({attach:$Y,detach:WY,resize:qY}[n]||KY)(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];r&&(({attach:kw,detach:kw,resize:kw}[n]||GY)(e,n,r),i[n]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return function pX(t,e,n,i){const r=um(t),s=Sl(r,"margin"),o=cm(r.maxWidth,t,"clientWidth")||Jg,a=cm(r.maxHeight,t,"clientHeight")||Jg,l=function fX(t,e,n){let i,r;if(void 0===e||void 0===n){const s=Tw(t);if(s){const o=s.getBoundingClientRect(),a=um(s),l=Sl(a,"border","width"),c=Sl(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=cm(a.maxWidth,s,"clientWidth"),r=cm(a.maxHeight,s,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||Jg,maxHeight:r||Jg}}(t,e,n);let{width:c,height:f}=l;if("content-box"===r.boxSizing){const g=Sl(r,"border","width"),v=Sl(r,"padding");c-=v.width+g.width,f-=v.height+g.height}return c=Math.max(0,c-s.width),f=Math.max(0,i?Math.floor(c/i):f-s.height),c=Aw(Math.min(c,o,l.maxWidth)),f=Aw(Math.min(f,a,l.maxHeight)),c&&!f&&(f=Aw(c/2)),{width:c,height:f}}(e,n,i,r)}isAttached(e){const n=Tw(e);return!(!n||!n.isConnected)}}class JY{constructor(){this._init=[]}notify(e,n,i,r){"beforeInit"===n&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return"afterDestroy"===n&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin;if(!1===Un(o[i],[n,r,s.options],o)&&r.cancelable)return!1}return!0}invalidate(){En(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=tn(i.options&&i.options.plugins,{}),s=function eq(t){const e={},n=[],i=Object.keys(Ks.plugins.items);for(let s=0;s<i.length;s++)n.push(Ks.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];-1===n.indexOf(o)&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}(i);return!1!==r||n?function nq(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=tq(i[l],r);null!==c&&s.push({plugin:a,options:iq(t.config,{plugin:a,local:n[l]},c,o)})}return s}(e,s,r,n):[]}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function tq(t,e){return e||!1!==t?!0===t?{}:t:null}function iq(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nw(t,e){return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||(mn.datasets[t]||{}).indexAxis||"x"}function Fw(t,e){return"x"===t||"y"===t?t:e.axis||function oq(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}(e.position)||t.charAt(0).toLowerCase()}function LP(t){const e=t.options||(t.options={});e.plugins=tn(e.plugins,{}),e.scales=function aq(t,e){const n=xl[t.type]||{scales:{}},i=e.scales||{},r=Nw(t.type,e),s=Object.create(null),o=Object.create(null);return Object.keys(i).forEach(a=>{const l=i[a];if(!gn(l))return console.error(`Invalid scale configuration for scale: ${a}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const c=Fw(a,l),f=function sq(t,e){return t===e?"_index_":"_value_"}(c,r),g=n.scales||{};s[c]=s[c]||a,o[a]=wd(Object.create(null),[{axis:c},l,g[c],g[f]])}),t.data.datasets.forEach(a=>{const l=a.type||t.type,c=a.indexAxis||Nw(l,e),g=(xl[l]||{}).scales||{};Object.keys(g).forEach(v=>{const _=function rq(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(v,c),y=a[_+"AxisID"]||s[_]||_;o[y]=o[y]||Object.create(null),wd(o[y],[{axis:_},i[y],g[v]])})}),Object.keys(o).forEach(a=>{const l=o[a];wd(l,[mn.scales[l.type],mn.scale])}),o}(t,e)}function BP(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const UP=new Map,jP=new Set;function vm(t,e){let n=UP.get(t);return n||(n=e(),UP.set(t,n),jP.add(n)),n}const jd=(t,e,n)=>{const i=ya(e,n);void 0!==i&&t.add(i)};class cq{constructor(e){this._config=function lq(t){return(t=t||{}).data=BP(t.data),LP(t),t}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=BP(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),LP(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return vm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return vm(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return vm(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id;return vm(`${this.type}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(f=>{e&&(l.add(e),f.forEach(g=>jd(l,e,g))),f.forEach(g=>jd(l,r,g)),f.forEach(g=>jd(l,xl[s]||{},g)),f.forEach(g=>jd(l,mn,g)),f.forEach(g=>jd(l,bw,g))});const c=Array.from(l);return 0===c.length&&c.push(Object.create(null)),jP.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xl[n]||{},mn.datasets[n]||{},{type:n},mn,bw]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=HP(this._resolverCache,e,r);let l=o;(function hq(t,e){const{isScriptable:n,isIndexable:i}=VR(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(ba(a)||uq(a))||o&&Bn(a))return!0}return!1})(o,n)&&(s.$shared=!1,l=cu(o,i=ba(i)?i():i,this.createResolver(e,i,a)));for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=HP(this._resolverCache,e,i);return gn(n)?cu(s,n,void 0,r):s}}function HP(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Cw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const uq=t=>gn(t)&&Object.getOwnPropertyNames(t).reduce((e,n)=>e||ba(t[n]),!1),fq=["top","bottom","left","right","chartArea"];function VP(t,e){return"top"===t||"bottom"===t||-1===fq.indexOf(t)&&"x"===e}function GP(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function zP(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Un(n&&n.onComplete,[t],e)}function pq(t){const e=t.chart,n=e.options.animation;Un(n&&n.onProgress,[t],e)}function $P(t){return KR()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _m={},WP=t=>{const e=$P(t);return Object.values(_m).filter(n=>n.canvas===e).pop()};function gq(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}class ym{constructor(e,n){const i=this.config=new cq(n),r=$P(e),s=WP(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function QY(t){return!KR()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?UY:ZY}(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,f=l&&l.width;this.id=q7(),this.ctx=a,this.canvas=l,this.width=f,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new JY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function h9(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}(g=>this.update(g),o.resizeDelay||0),this._dataChanges=[],_m[this.id]=this,a&&l?(Po.listen(this,"complete",zP),Po.listen(this,"progress",pq),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return En(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ZR(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return UR(this.canvas,this.ctx),this}stop(){return Po.stop(this),this}resize(e,n){Po.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,o=this.platform.getMaximumSize(this.canvas,e,n,i.maintainAspectRatio&&this.aspectRatio),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ZR(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Un(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){In(this.options.scales||{},(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Fw(o,a),c="r"===l,f="x"===l;return{options:a,dposition:c?"chartArea":f?"bottom":"left",dtype:c?"radialLinear":f?"category":"linear"}}))),In(s,o=>{const a=o.options,l=a.id,c=Fw(l,a),f=tn(a.type,o.dtype);(void 0===a.position||VP(a.position,c)!==VP(o.dposition))&&(a.position=o.dposition),r[l]=!0;let g=null;l in i&&i[l].type===f?g=i[l]:(g=new(Ks.getScale(f))({id:l,type:f,ctx:this.ctx,chart:this}),i[g.id]=g),g.init(a,e)}),In(r,(o,a)=>{o||delete i[a]}),In(i,o=>{Vi.configure(this,o,o.options),Vi.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(GP("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{0===n.filter(s=>s===i._dataset).length&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Nw(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=Ks.getController(a),{datasetElementType:c,dataElementType:f}=mn.datasets[a];Object.assign(l.prototype,{dataElementType:Ks.getElement(f),datasetElementType:c&&Ks.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){In(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,f=this.data.datasets.length;c<f;c++){const{controller:g}=this.getDatasetMeta(c),v=!r&&-1===s.indexOf(g);g.buildOrUpdateElements(v),o=Math.max(+g.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||In(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(GP("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){In(this.scales,e=>{Vi.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!pR(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n)gq(e,r,"_removeElements"===i?-s:s)}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!pR(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Vi.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],In(this.boxes,r=>{i&&"chartArea"===r.position||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,ba(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Po.has(this)?this.attached&&!Po.running(this)&&Po.start(this):(this.draw(),zP({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resize(i,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i=e._clip,r=!i.disabled,s=this.chartArea,o={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(r&&om(n,{left:!1===i.left?0:s.left-i.left,right:!1===i.right?this.width:s.right+i.right,top:!1===i.top?0:s.top-i.top,bottom:!1===i.bottom?this.height:s.bottom+i.bottom}),e.controller.draw(),r&&am(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Id(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=RY.modes[n];return"function"==typeof s?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Ea(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return"boolean"==typeof i.hidden?!i.hidden:!n.hidden}setDatasetVisibility(e,n){this.getDatasetMeta(e).hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Wr(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Po.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),UR(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete _m[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};In(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){In(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},In(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for("dataset"===n&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Zg(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(f=>!c.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",i,r))return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,a=this._getActiveElements(e,r,i,n),l=function t9(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(e),c=function mq(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Un(s.onHover,[e,a,this],this),l&&Un(s.onClick,[e,a,this],this));const f=!Zg(a,r);return(f||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,f}_getActiveElements(e,n,i,r){if("mouseout"===e.type)return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}}const XP=()=>In(ym.instances,t=>t._plugins.invalidate()),Ca=!0;function YP(t,e,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=r/a;t.beginPath(),t.arc(s,o,a,i-c,n+c),l>r?(c=r/l,t.arc(s,o,l,n+c,i-c,!0)):t.arc(s,o,r,n+Qn,i-Qn),t.closePath(),t.clip()}function du(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Lw(t,e,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:f}=e,g=Math.max(e.outerRadius+i+n-c,0),v=f>0?f+i+n+c:0;let _=0;const y=r-l;if(i){const it=((f>0?f-i:0)+(g>0?g-i:0))/2;_=(y-(0!==it?y*it/(it+i):y))/2}const S=(y-Math.max(.001,y*g-n/Wn)/g)/2,T=l+S+_,R=r-S-_,{outerStart:I,outerEnd:k,innerStart:V,innerEnd:K}=function _q(t,e,n,i){const r=function vq(t){return Ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,i*e/2),a=l=>{const c=(n-Math.min(s,l))*i/2;return xi(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:xi(r.innerStart,0,o),innerEnd:xi(r.innerEnd,0,o)}}(e,v,g,R-T),ee=g-I,ae=g-k,ye=T+I/ee,de=R-k/ae,se=v+V,fe=v+K,he=T+V/se,me=R-K/fe;if(t.beginPath(),s){if(t.arc(o,a,g,ye,de),k>0){const it=du(ae,de,o,a);t.arc(it.x,it.y,k,de,R+Qn)}const Ye=du(fe,R,o,a);if(t.lineTo(Ye.x,Ye.y),K>0){const it=du(fe,me,o,a);t.arc(it.x,it.y,K,R+Qn,me+Math.PI)}if(t.arc(o,a,v,R-K/v,T+V/v,!0),V>0){const it=du(se,he,o,a);t.arc(it.x,it.y,V,he+Math.PI,T-Qn)}const lt=du(ee,T,o,a);if(t.lineTo(lt.x,lt.y),I>0){const it=du(ee,ye,o,a);t.arc(it.x,it.y,I,T-Qn,ye)}}else{t.moveTo(o,a);const Ye=Math.cos(ye)*g+o,lt=Math.sin(ye)*g+a;t.lineTo(Ye,lt);const it=Math.cos(de)*g+o,vn=Math.sin(de)*g+a;t.lineTo(it,vn)}t.closePath()}Object.defineProperties(ym,{defaults:{enumerable:Ca,value:mn},instances:{enumerable:Ca,value:_m},overrides:{enumerable:Ca,value:xl},registry:{enumerable:Ca,value:Ks},version:{enumerable:Ca,value:"3.9.1"},getChart:{enumerable:Ca,value:WP},register:{enumerable:Ca,value:(...t)=>{Ks.add(...t),XP()}},unregister:{enumerable:Ca,value:(...t)=>{Ks.remove(...t),XP()}}});class bm extends xs{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){const r=this.getProps(["x","y"],i),{angle:s,distance:o}=yR(r,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:f,circumference:g}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=this.options.spacing/2,y=tn(g,l-a)>=Pn||Cd(s,a,l),E=Io(o,c+v,f+v);return y&&E}getCenterPoint(e){const{x:n,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:l,spacing:c}=this.options,f=(r+s)/2,g=(o+a+c+l)/2;return{x:n+Math.cos(f)*g,y:i+Math.sin(f)*g}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:n,circumference:i}=this,r=(n.offset||0)/2,s=(n.spacing||0)/2,o=n.circular;if(this.pixelMargin="inner"===n.borderAlign?.33:0,this.fullCircles=i>Pn?Math.floor(i/Pn):0,0===i||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=0;if(r){a=r/2;const c=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(c)*a,Math.sin(c)*a),this.circumference>=Wn&&(a=r)}e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor;const l=function yq(t,e,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){Lw(t,e,n,i,o+Pn,r);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+a%Pn,a%Pn==0&&(l+=Pn))}return Lw(t,e,n,i,l,r),t.fill(),l}(e,this,a,s,o);(function wq(t,e,n,i,r,s){const{options:o}=e,{borderWidth:a,borderJoinStyle:l}=o,c="inner"===o.borderAlign;!a||(c?(t.lineWidth=2*a,t.lineJoin=l||"round"):(t.lineWidth=a,t.lineJoin=l||"bevel"),e.fullCircles&&function bq(t,e,n){const{x:i,y:r,startAngle:s,pixelMargin:o,fullCircles:a}=e,l=Math.max(e.outerRadius-o,0),c=e.innerRadius+o;let f;for(n&&YP(t,e,s+Pn),t.beginPath(),t.arc(i,r,c,s+Pn,s,!0),f=0;f<a;++f)t.stroke();for(t.beginPath(),t.arc(i,r,l,s,s+Pn),f=0;f<a;++f)t.stroke()}(t,e,c),c&&YP(t,e,r),Lw(t,e,n,i,r,s),t.stroke())})(e,this,a,s,l,o),e.restore()}}function qP(t,e,n=e){t.lineCap=tn(n.borderCapStyle,e.borderCapStyle),t.setLineDash(tn(n.borderDash,e.borderDash)),t.lineDashOffset=tn(n.borderDashOffset,e.borderDashOffset),t.lineJoin=tn(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=tn(n.borderWidth,e.borderWidth),t.strokeStyle=tn(n.borderColor,e.borderColor)}function xq(t,e,n){t.lineTo(n.x,n.y)}function KP(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a);return{count:i,start:l,loop:e.loop,ilen:c<l&&!(r<o&&s<o||r>a&&s>a)?i+c-l:c-l}}function Cq(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=KP(r,n,i),f=function Eq(t){return t.stepped?B9:t.tension||"monotone"===t.cubicInterpolationMode?U9:xq}(s);let _,y,E,{move:g=!0,reverse:v}=i||{};for(_=0;_<=c;++_)y=r[(a+(v?c-_:_))%o],!y.skip&&(g?(t.moveTo(y.x,y.y),g=!1):f(t,E,y,v,s.stepped),E=y);return l&&(y=r[(a+(v?c:0))%o],f(t,E,y,v,s.stepped)),!!l}function Dq(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=KP(r,n,i),{move:l=!0,reverse:c}=i||{};let v,_,y,E,S,T,f=0,g=0;const R=k=>(o+(c?a-k:k))%s,I=()=>{E!==S&&(t.lineTo(f,S),t.lineTo(f,E),t.lineTo(f,T))};for(l&&(_=r[R(0)],t.moveTo(_.x,_.y)),v=0;v<=a;++v){if(_=r[R(v)],_.skip)continue;const k=_.x,V=_.y,K=0|k;K===y?(V<E?E=V:V>S&&(S=V),f=(g*f+k)/++g):(I(),t.lineTo(k,V),y=K,g=0,E=S=V),T=V}I()}function Bw(t){const e=t.options;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||e.borderDash&&e.borderDash.length?Cq:Dq}bm.id="arc",bm.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0},bm.defaultRoutes={backgroundColor:"backgroundColor"};const Iq="function"==typeof Path2D;let wm=(()=>{class t extends xs{constructor(n){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,n&&Object.assign(this,n)}updateControlPoints(n,i){const r=this.options;!r.tension&&"monotone"!==r.cubicInterpolationMode||r.stepped||this._pointsUpdated||(lX(this._points,r,n,r.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(n){this._points=n,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function CX(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=function xX(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}(n,r,s,i);return function oP(t,e,n,i){return i&&i.setContext&&n?function DX(t,e,n,i){const r=t._chart.getContext(),s=aP(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let f=s,g=e[0].start,v=g;function _(y,E,S,T){const R=a?-1:1;if(y!==E){for(y+=l;n[y%l].skip;)y-=R;for(;n[E%l].skip;)E+=R;y%l!=E%l&&(c.push({start:y%l,end:E%l,loop:S,style:T}),f=T,g=E%l)}}for(const y of e){g=a?g:y.start;let S,E=n[g%l];for(v=g+1;v<=y.end;v++){const T=n[v%l];S=aP(i.setContext(Ea(r,{type:"segment",p0:E,p1:T,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),SX(S,f)&&_(g,v-1,y.loop,f),E=T,f=S}g<v-1&&_(g,v-1,y.loop,f)}return c}(t,e,n,i):e}(t,!0===i?[{start:o,end:a,loop:s}]:function EX(t,e,n,i){const r=t.length,s=[];let l,o=e,a=t[e];for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(s.push({start:e%r,end:(l-1)%r,loop:i=!1}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return null!==o&&s.push({start:e%r,end:o%r,loop:i}),s}(n,o,a<o?a+r:a,!!t._fullLoop&&0===o&&a===r-1),n,e)}(this,this.options.segment))}first(){const n=this.segments;return n.length&&this.points[n[0].start]}last(){const n=this.segments,r=n.length;return r&&this.points[n[r-1].end]}interpolate(n,i){const r=this.options,s=n[i],o=this.points,a=sP(this,{property:i,start:s,end:s});if(!a.length)return;const l=[],c=function Sq(t){return t.stepped?mX:t.tension||"monotone"===t.cubicInterpolationMode?vX:Al}(r);let f,g;for(f=0,g=a.length;f<g;++f){const{start:v,end:_}=a[f],y=o[v],E=o[_];if(y===E){l.push(y);continue}const T=c(y,E,Math.abs((s-y[i])/(E[i]-y[i])),r.stepped);T[i]=n[i],l.push(T)}return 1===l.length?l[0]:l}pathSegment(n,i,r){return Bw(this)(n,this,i,r)}path(n,i,r){const s=this.segments,o=Bw(this);let a=this._loop;i=i||0,r=r||this.points.length-i;for(const l of s)a&=o(n,this,l,{start:i,end:i+r-1});return!!a}draw(n,i,r,s){(this.points||[]).length&&(this.options||{}).borderWidth&&(n.save(),function Mq(t,e,n,i){Iq&&!e.options.segment?function Tq(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),qP(t,e.options),t.stroke(r)}(t,e,n,i):function Aq(t,e,n,i){const{segments:r,options:s}=e,o=Bw(e);for(const a of r)qP(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(n,this,r,s),n.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t.id="line",t.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},t.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},t.descriptors={_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e},t})();function ZP(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}let Rq=(()=>{class t extends xs{constructor(n){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return ZP(this,n,"x",i)}inYRange(n,i){return ZP(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){let i=(n=n||this.options||{}).radius||0;return i=Math.max(i,i&&n.hoverRadius||0),2*(i+(i&&n.borderWidth||0))}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Id(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,xw(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}return t.id="point",t.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},t.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},t})();function QP(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,f,g;return t.horizontal?(g=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-g,f=i+g):(g=s/2,a=n-g,l=n+g,c=Math.min(i,r),f=Math.max(i,r)),{left:a,top:c,right:l,bottom:f}}function Da(t,e,n,i){return t?0:xi(e,n,i)}function Uw(t,e,n,i){const r=null===e,s=null===n,a=t&&!(r&&s)&&QP(t,i);return a&&(r||Io(e,a.left,a.right))&&(s||Io(n,a.top,a.bottom))}function Fq(t,e){t.rect(e.x,e.y,e.w,e.h)}function jw(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0;return{x:t.x+i,y:t.y+r,w:t.w+((t.x+t.w!==n.x+n.w?e:0)-i),h:t.h+((t.y+t.h!==n.y+n.h?e:0)-r),radius:t.radius}}class xm extends xs{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=function kq(t){const e=QP(t),n=e.right-e.left,i=e.bottom-e.top,r=function Pq(t,e,n){const r=t.borderSkipped,s=HR(t.options.borderWidth);return{t:Da(r.top,s.top,0,n),r:Da(r.right,s.right,0,e),b:Da(r.bottom,s.bottom,0,n),l:Da(r.left,s.left,0,e)}}(t,n/2,i/2),s=function Oq(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Dl(r),o=Math.min(e,n),a=t.borderSkipped,l=i||gn(r);return{topLeft:Da(!l||a.top||a.left,s.topLeft,0,o),topRight:Da(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Da(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Da(!l||a.bottom||a.right,s.bottomRight,0,o)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}(this),a=function Nq(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}(o.radius)?Md:Fq;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,jw(o,n,s)),e.clip(),a(e,jw(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,jw(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Uw(this,e,n,i)}inXRange(e,n){return Uw(this,e,null,n)}inYRange(e,n){return Uw(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}xm.id="bar",xm.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},xm.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Lq=Object.freeze({__proto__:null,ArcElement:bm,LineElement:wm,PointElement:Rq,BarElement:xm});function JP(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{value:e})}}function eO(t){t.data.datasets.forEach(e=>{JP(e)})}var Hq={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void eO(t);const i=t.width;t.data.datasets.forEach((r,s)=>{const{_data:o,indexAxis:a}=r,l=t.getDatasetMeta(s),c=o||r.data;if("y"===Rd([a,t.options.indexAxis])||!l.controller.supportsDecimation)return;const f=t.scales[l.xAxisID];if("linear"!==f.type&&"time"!==f.type||t.options.parsing)return;let y,{start:g,count:v}=function jq(t,e){const n=e.length;let r,i=0;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=xi(Mo(e,s.axis,o).lo,0,n-1)),r=c?xi(Mo(e,s.axis,a).hi+1,i,n)-i:n-i,{start:i,count:r}}(l,c);if(v<=(n.threshold||4*i))JP(r);else{switch(En(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}})),n.algorithm){case"lttb":y=function Bq(t,e,n,i,r){const s=r.samples||i;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let g,v,_,y,E,f=e;for(o[l++]=t[f],g=0;g<s-2;g++){let R,S=0,T=0;const I=Math.floor((g+1)*a)+1+e,k=Math.min(Math.floor((g+2)*a)+1,n)+e,V=k-I;for(R=I;R<k;R++)S+=t[R].x,T+=t[R].y;S/=V,T/=V;const K=Math.floor(g*a)+1+e,ee=Math.min(Math.floor((g+1)*a)+1,n)+e,{x:ae,y:ye}=t[f];for(_=y=-1,R=K;R<ee;R++)y=.5*Math.abs((ae-S)*(t[R].y-ye)-(ae-t[R].x)*(T-ye)),y>_&&(_=y,v=t[R],E=R);o[l++]=v,f=E}return o[l++]=t[c],o}(c,g,v,i,n);break;case"min-max":y=function Uq(t,e,n,i){let o,a,l,c,f,g,v,_,y,E,r=0,s=0;const S=[],R=t[e].x,k=t[e+n-1].x-R;for(o=e;o<e+n;++o){a=t[o],l=(a.x-R)/k*i,c=a.y;const V=0|l;if(V===f)c<y?(y=c,g=o):c>E&&(E=c,v=o),r=(s*r+a.x)/++s;else{const K=o-1;if(!En(g)&&!En(v)){const ee=Math.min(g,v),ae=Math.max(g,v);ee!==_&&ee!==K&&S.push({...t[ee],x:r}),ae!==_&&ae!==K&&S.push({...t[ae],x:r})}o>0&&K!==_&&S.push(t[K]),S.push(a),f=V,s=0,y=E=c,g=v=_=o}}return S}(c,g,v,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=y}})},destroy(t){eO(t)}};function Hw(t,e,n,i){if(i)return;let r=e[t],s=n[t];return"angle"===t&&(r=Tr(r),s=Tr(s)),{property:t,start:r,end:s}}function Vw(t,e,n){for(;e>t;e--){const i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function tO(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function nO(t,e){let n=[],i=!1;return Bn(t)?(i=!0,n=t):n=function Gq(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=Vw(o,a,r);const l=r[o],c=r[a];null!==i?(s.push({x:l.x,y:i}),s.push({x:c.x,y:i})):null!==n&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}(t,e),n.length?new wm({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function iO(t){return t&&!1!==t.fill}function zq(t,e,n){let r=t[e].fill;const s=[e];let o;if(!n)return r;for(;!1!==r&&-1===s.indexOf(r);){if(!ii(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function $q(t,e,n){const i=function qq(t){const e=t.options,n=e.fill;let i=tn(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(gn(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return ii(r)&&Math.floor(r)===r?function Wq(t,e,n,i){return("-"===t||"+"===t)&&(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Qq(t,e,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=Jq(s,e,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(t.push(l),!a)break}t.push(...i)}function Jq(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const f=s[c],g=o[f.start][n],v=o[f.end][n];if(Io(r,g,v)){a=r===g,l=r===v;break}}return{first:a,last:l,point:i}}class rO{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){const{x:r,y:s,radius:o}=this;return e.arc(r,s,o,(n=n||{start:0,end:Pn}).end,n.start,!0),!i.bounds}interpolate(e){const{x:n,y:i,radius:r}=this,s=e.angle;return{x:n+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}}function Gw(t,e,n){const i=function eK(t){const{chart:e,fill:n,line:i}=t;if(ii(n))return function tK(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function Kq(t){const{scale:e,index:n,line:i}=t,r=[],s=i.segments,o=i.points,a=function Zq(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const s=i[r];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}(e,n);a.push(nO({x:null,y:e.bottom},i));for(let l=0;l<s.length;l++){const c=s[l];for(let f=c.start;f<=c.end;f++)Qq(r,o[f],a)}return new wm({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function nK(t){return(t.scale||{}).getPointPositionForValue?function rK(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=function Yq(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:gn(t)?t.value:e.getBaseValue(),i}(n,e,s),a=[];if(i.grid.circular){const l=e.getPointPositionForValue(0,s);return new rO({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,o));return a}(t):function iK(t){const{scale:e={},fill:n}=t,i=function Xq(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:gn(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(ii(i)){const r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}(t)}(t);return r instanceof rO?r:nO(r,i)}(e),{line:r,scale:s,axis:o}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:f=c,below:g=c}=l||{};i&&r.points.length&&(om(t,n),function sK(t,e){const{line:n,target:i,above:r,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&s!==r&&(sO(t,i,o.top),oO(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),sO(t,i,o.bottom)),oO(t,{line:n,target:i,color:s,scale:a,property:l}),t.restore()}(t,{line:r,target:i,above:f,below:g,area:n,scale:s,axis:o}),am(t))}function sO(t,e,n){const{segments:i,points:r}=e;let s=!0,o=!1;t.beginPath();for(const a of i){const{start:l,end:c}=a,f=r[l],g=r[Vw(l,c,r)];s?(t.moveTo(f.x,f.y),s=!1):(t.lineTo(f.x,n),t.lineTo(f.x,f.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(g.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function oO(t,e){const{line:n,target:i,property:r,color:s,scale:o}=e,a=function Vq(t,e,n){const i=t.segments,r=t.points,s=e.points,o=[];for(const a of i){let{start:l,end:c}=a;c=Vw(l,c,r);const f=Hw(n,r[l],r[c],a.loop);if(!e.segments){o.push({source:a,target:f,start:r[l],end:r[c]});continue}const g=sP(e,f);for(const v of g){const _=Hw(n,s[v.start],s[v.end],v.loop),y=rP(a,r,_);for(const E of y)o.push({source:E,target:v,start:{[n]:tO(f,_,"start",Math.max)},end:{[n]:tO(f,_,"end",Math.min)}})}}return o}(n,i,r);for(const{source:l,target:c,start:f,end:g}of a){const{style:{backgroundColor:v=s}={}}=l,_=!0!==i;t.save(),t.fillStyle=v,oK(t,o,_&&Hw(r,f,g)),t.beginPath();const y=!!n.pathSegment(t,l);let E;if(_){y?t.closePath():aO(t,i,g,r);const S=!!i.pathSegment(t,c,{move:y,reverse:!0});E=y&&S,E||aO(t,i,f,r)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function oK(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};"x"===s&&(t.beginPath(),t.rect(o,i,a-o,r-i),t.clip())}function aO(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var aK={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof wm&&(l={visible:t.isDatasetVisible(o),index:o,fill:$q(a,o,i),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=zq(r,o,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=r.length-1;o>=0;--o){const a=r[o].$filler;!a||(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Gw(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const s=i[r].$filler;iO(s)&&Gw(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;!iO(i)||"beforeDatasetDraw"!==n.drawTime||Gw(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const lO=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class cO extends xs{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Un(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display)return void(this.width=this.height=0);const i=e.labels,r=mi(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=lO(i,s);let c,f;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,f=this._fitRows(o,s,a,l)+10):(f=this.maxHeight,c=this._fitCols(o,s,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],f=r+a;let g=e;s.textAlign="left",s.textBaseline="middle";let v=-1,_=-f;return this.legendItems.forEach((y,E)=>{const S=i+n/2+s.measureText(y.text).width;(0===E||c[c.length-1]+S+2*a>o)&&(g+=f,c[c.length-(E>0?0:1)]=0,_+=f,v++),l[E]={left:0,top:_,row:v,width:S,height:r},c[c.length-1]+=S+a}),g}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],f=o-e;let g=a,v=0,_=0,y=0,E=0;return this.legendItems.forEach((S,T)=>{const R=i+n/2+s.measureText(S.text).width;T>0&&_+r+2*a>f&&(g+=v+a,c.push({width:v,height:_}),y+=v+a,E++,v=_=0),l[T]={left:y,top:_,col:E,width:R,height:r},v=Math.max(v,R),_+=r+a}),g+=v,c.push({width:v,height:_}),g}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=hu(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=ji(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=ji(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=ji(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=ji(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;om(e,this),this._draw(),am(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=mn.color,l=hu(e.rtl,this.left,this.width),c=mi(o.font),{color:f,padding:g}=o,v=c.size,_=v/2;let y;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:E,boxHeight:S,itemHeight:T}=lO(o,v),k=this.isHorizontal(),V=this._computeTitleHeight();y=k?{x:ji(s,this.left+g,this.right-i[0]),y:this.top+g+V,line:0}:{x:this.left+g,y:ji(s,this.top+V+g,this.bottom-n[0].height),line:0},eP(this.ctx,e.textDirection);const K=T+g;this.legendItems.forEach((ee,ae)=>{r.strokeStyle=ee.fontColor||f,r.fillStyle=ee.fontColor||f;const ye=r.measureText(ee.text).width,de=l.textAlign(ee.textAlign||(ee.textAlign=o.textAlign)),se=E+_+ye;let fe=y.x,he=y.y;l.setWidth(this.width),k?ae>0&&fe+se+g>this.right&&(he=y.y+=K,y.line++,fe=y.x=ji(s,this.left+g,this.right-i[y.line])):ae>0&&he+K>this.bottom&&(fe=y.x=fe+n[y.line].width+g,y.line++,he=y.y=ji(s,this.top+V+g,this.bottom-n[y.line].height)),function(ee,ae,ye){if(isNaN(E)||E<=0||isNaN(S)||S<0)return;r.save();const de=tn(ye.lineWidth,1);if(r.fillStyle=tn(ye.fillStyle,a),r.lineCap=tn(ye.lineCap,"butt"),r.lineDashOffset=tn(ye.lineDashOffset,0),r.lineJoin=tn(ye.lineJoin,"miter"),r.lineWidth=de,r.strokeStyle=tn(ye.strokeStyle,a),r.setLineDash(tn(ye.lineDash,[])),o.usePointStyle){const se={radius:S*Math.SQRT2/2,pointStyle:ye.pointStyle,rotation:ye.rotation,borderWidth:de},fe=l.xPlus(ee,E/2);jR(r,se,fe,ae+_,o.pointStyleWidth&&E)}else{const se=ae+Math.max((v-S)/2,0),fe=l.leftForLtr(ee,E),he=Dl(ye.borderRadius);r.beginPath(),Object.values(he).some(me=>0!==me)?Md(r,{x:fe,y:se,w:E,h:S,radius:he}):r.rect(fe,se,E,S),r.fill(),0!==de&&r.stroke()}r.restore()}(l.x(fe),he,ee),fe=((t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e)(de,fe+E+_,k?fe+se:this.right,e.rtl),function(ee,ae,ye){Cl(r,ye.text,ee,ae+T/2,c,{strikethrough:ye.hidden,textAlign:l.textAlign(ye.textAlign)})}(l.x(fe),he,ee),k?y.x+=se+g:y.y+=K}),tP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=mi(n.font),r=Hi(n.padding);if(!n.display)return;const s=hu(e.rtl,this.left,this.width),o=this.ctx,a=n.position,c=r.top+i.size/2;let f,g=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),f=this.top+c,g=ji(e.align,g,this.right-v);else{const y=this.columnSizes.reduce((E,S)=>Math.max(E,S.height),0);f=c+ji(e.align,this.top,this.bottom-y-e.labels.padding-this._computeTitleHeight())}const _=ji(a,g,g+v);o.textAlign=s.textAlign(fw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Cl(o,n.text,_,f,i)}_computeTitleHeight(){const e=this.options.title,n=mi(e.font),i=Hi(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(Io(e,this.left,this.right)&&Io(n,this.top,this.bottom))for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Io(e,r.left,r.left+r.width)&&Io(n,r.top,r.top+r.height))return this.legendItems[i];return null}handleEvent(e){const n=this.options;if(!function cK(t,e){return!(("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)&&(!e.onClick||"click"!==t&&"mouseup"!==t))}(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,s=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(r,i);r&&!s&&Un(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Un(n.onHover,[e,i,this],this)}else i&&Un(n.onClick,[e,i,this],this)}}var uK={id:"legend",_element:cO,start(t,e,n){const i=t.legend=new cO({ctx:t.ctx,options:n,chart:t});Vi.configure(t,i,n),Vi.addBox(t,i)},stop(t){Vi.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Vi.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s}}=t.legend.options;return t._getSortedDatasetMetas().map(o=>{const a=o.controller.getStyle(n?0:void 0),l=Hi(a.borderWidth);return{text:e[o.index].label,fillStyle:a.backgroundColor,fontColor:s,hidden:!o.visible,lineCap:a.borderCapStyle,lineDash:a.borderDash,lineDashOffset:a.borderDashOffset,lineJoin:a.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:a.borderColor,pointStyle:i||a.pointStyle,rotation:a.rotation,textAlign:r||a.textAlign,borderRadius:0,datasetIndex:o.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class zw extends xs{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=n;const r=Bn(i.text)?i.text.length:1;this._padding=Hi(i.padding);const s=r*mi(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let c,f,g,l=0;return this.isHorizontal()?(f=ji(a,i,s),g=n+e,c=s-i):("left"===o.position?(f=i+e,g=ji(a,r,n),l=-.5*Wn):(f=s-e,g=ji(a,n,r),l=.5*Wn),c=r-n),{titleX:f,titleY:g,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=mi(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Cl(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:fw(n.align),textBaseline:"middle",translation:[o,a]})}}var dK={id:"title",_element:zw,start(t,e,n){!function hK(t,e){const n=new zw({ctx:t.ctx,options:e,chart:t});Vi.configure(t,n,e),Vi.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){Vi.removeBox(t,t.titleBlock),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Vi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Em=new WeakMap;var fK={id:"subtitle",start(t,e,n){const i=new zw({ctx:t.ctx,options:n,chart:t});Vi.configure(t,i,n),Vi.addBox(t,i),Em.set(t,i)},stop(t){Vi.removeBox(t,Em.get(t)),Em.delete(t)},beforeUpdate(t,e,n){const i=Em.get(t);Vi.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Hd={average(t){if(!t.length)return!1;let e,n,i=0,r=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();i+=a.x,r+=a.y,++s}}return{x:i/s,y:r/s}},nearest(t,e){if(!t.length)return!1;let s,o,a,n=e.x,i=e.y,r=Number.POSITIVE_INFINITY;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const f=hw(e,l.getCenterPoint());f<r&&(r=f,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Zs(t,e){return e&&(Bn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Oo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function pK(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function uO(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=mi(e.bodyFont),c=mi(e.titleFont),f=mi(e.footerFont),g=s.length,v=r.length,_=i.length,y=Hi(e.padding);let E=y.height,S=0,T=i.reduce((k,V)=>k+V.before.length+V.lines.length+V.after.length,0);T+=t.beforeBody.length+t.afterBody.length,g&&(E+=g*c.lineHeight+(g-1)*e.titleSpacing+e.titleMarginBottom),T&&(E+=_*(e.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(T-_)*l.lineHeight+(T-1)*e.bodySpacing),v&&(E+=e.footerMarginTop+v*f.lineHeight+(v-1)*e.footerSpacing);let R=0;const I=function(k){S=Math.max(S,n.measureText(k).width+R)};return n.save(),n.font=c.string,In(t.title,I),n.font=l.string,In(t.beforeBody.concat(t.afterBody),I),R=e.displayColors?o+2+e.boxPadding:0,In(i,k=>{In(k.before,I),In(k.lines,I),In(k.after,I)}),R=0,n.font=f.string,In(t.footer,I),n.restore(),S+=y.width,{width:S,height:E}}function vK(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function mK(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if("left"===t&&r+s+o>e.width||"right"===t&&r-s-o<0)return!0}(c,t,e,n)&&(c="center"),c}function hO(t,e,n){const i=n.yAlign||e.yAlign||function gK(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||vK(t,e,n,i),yAlign:i}}function dO(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:f,topRight:g,bottomLeft:v,bottomRight:_}=Dl(o);let y=function _K(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,a);const E=function yK(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===a?y+=c:"right"===a&&(y-=c):"left"===a?y-=Math.max(f,v)+r:"right"===a&&(y+=Math.max(g,_)+r),{x:xi(y,0,i.width-e.width),y:xi(E,0,i.height-e.height)}}function Cm(t,e,n){const i=Hi(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function fO(t){return Zs([],Oo(t))}function pO(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}let gO=(()=>{class t extends xs{constructor(n){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=n.chart||n._chart,this._chart=this.chart,this.options=n.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(n){this.options=n,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const n=this._cachedAnimations;if(n)return n;const i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new cP(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=function bK(t,e,n){return Ea(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(n,i){const{callbacks:r}=i,s=r.beforeTitle.apply(this,[n]),o=r.title.apply(this,[n]),a=r.afterTitle.apply(this,[n]);let l=[];return l=Zs(l,Oo(s)),l=Zs(l,Oo(o)),l=Zs(l,Oo(a)),l}getBeforeBody(n,i){return fO(i.callbacks.beforeBody.apply(this,[n]))}getBody(n,i){const{callbacks:r}=i,s=[];return In(n,o=>{const a={before:[],lines:[],after:[]},l=pO(r,o);Zs(a.before,Oo(l.beforeLabel.call(this,o))),Zs(a.lines,l.label.call(this,o)),Zs(a.after,Oo(l.afterLabel.call(this,o))),s.push(a)}),s}getAfterBody(n,i){return fO(i.callbacks.afterBody.apply(this,[n]))}getFooter(n,i){const{callbacks:r}=i,s=r.beforeFooter.apply(this,[n]),o=r.footer.apply(this,[n]),a=r.afterFooter.apply(this,[n]);let l=[];return l=Zs(l,Oo(s)),l=Zs(l,Oo(o)),l=Zs(l,Oo(a)),l}_createItems(n){const i=this._active,r=this.chart.data,s=[],o=[],a=[];let c,f,l=[];for(c=0,f=i.length;c<f;++c)l.push(pK(this.chart,i[c]));return n.filter&&(l=l.filter((g,v,_)=>n.filter(g,v,_,r))),n.itemSort&&(l=l.sort((g,v)=>n.itemSort(g,v,r))),In(l,g=>{const v=pO(n.callbacks,g);s.push(v.labelColor.call(this,g)),o.push(v.labelPointStyle.call(this,g)),a.push(v.labelTextColor.call(this,g))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(n,i){const r=this.options.setContext(this.getContext()),s=this._active;let o,a=[];if(s.length){const l=Hd[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);const c=this._size=uO(this,r),f=Object.assign({},l,c),g=hO(this.chart,r,f),v=dO(r,f,g,this.chart);this.xAlign=g.xAlign,this.yAlign=g.yAlign,o={opacity:1,x:v.x,y:v.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}else 0!==this.opacity&&(o={opacity:0});this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),n&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(n,i,r,s){const o=this.getCaretPosition(n,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(n,i,r){const{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:f,bottomLeft:g,bottomRight:v}=Dl(l),{x:_,y}=n,{width:E,height:S}=i;let T,R,I,k,V,K;return"center"===o?(V=y+S/2,"left"===s?(T=_,R=T-a,k=V+a,K=V-a):(T=_+E,R=T+a,k=V-a,K=V+a),I=T):(R="left"===s?_+Math.max(c,g)+a:"right"===s?_+E-Math.max(f,v)-a:this.caretX,"top"===o?(k=y,V=k-a,T=R-a,I=R+a):(k=y+S,V=k+a,T=R+a,I=R-a),K=k),{x1:T,x2:R,x3:I,y1:k,y2:V,y3:K}}drawTitle(n,i,r){const s=this.title,o=s.length;let a,l,c;if(o){const f=hu(r.rtl,this.x,this.width);for(n.x=Cm(this,r.titleAlign,r),i.textAlign=f.textAlign(r.titleAlign),i.textBaseline="middle",a=mi(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],f.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+l,c+1===o&&(n.y+=r.titleMarginBottom-l)}}_drawColorBox(n,i,r,s,o){const a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:f,boxPadding:g}=o,v=mi(o.bodyFont),_=Cm(this,"left",o),y=s.x(_),S=i.y+(c<v.lineHeight?(v.lineHeight-c)/2:0);if(o.usePointStyle){const T={radius:Math.min(f,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},R=s.leftForLtr(y,f)+f/2,I=S+c/2;n.strokeStyle=o.multiKeyBackground,n.fillStyle=o.multiKeyBackground,xw(n,T,R,I),n.strokeStyle=a.borderColor,n.fillStyle=a.backgroundColor,xw(n,T,R,I)}else{n.lineWidth=gn(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,n.strokeStyle=a.borderColor,n.setLineDash(a.borderDash||[]),n.lineDashOffset=a.borderDashOffset||0;const T=s.leftForLtr(y,f-g),R=s.leftForLtr(s.xPlus(y,1),f-g-2),I=Dl(a.borderRadius);Object.values(I).some(k=>0!==k)?(n.beginPath(),n.fillStyle=o.multiKeyBackground,Md(n,{x:T,y:S,w:f,h:c,radius:I}),n.fill(),n.stroke(),n.fillStyle=a.backgroundColor,n.beginPath(),Md(n,{x:R,y:S+1,w:f-2,h:c-2,radius:I}),n.fill()):(n.fillStyle=o.multiKeyBackground,n.fillRect(T,S,f,c),n.strokeRect(T,S,f,c),n.fillStyle=a.backgroundColor,n.fillRect(R,S+1,f-2,c-2))}n.fillStyle=this.labelTextColors[r]}drawBody(n,i,r){const{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:f,boxPadding:g}=r,v=mi(r.bodyFont);let _=v.lineHeight,y=0;const E=hu(r.rtl,this.x,this.width),S=function(ye){i.fillText(ye,E.x(n.x+y),n.y+_/2),n.y+=_+o},T=E.textAlign(a);let R,I,k,V,K,ee,ae;for(i.textAlign=a,i.textBaseline="middle",i.font=v.string,n.x=Cm(this,T,r),i.fillStyle=r.bodyColor,In(this.beforeBody,S),y=l&&"right"!==T?"center"===a?f/2+g:f+2+g:0,V=0,ee=s.length;V<ee;++V){for(R=s[V],I=this.labelTextColors[V],i.fillStyle=I,In(R.before,S),k=R.lines,l&&k.length&&(this._drawColorBox(i,n,V,E,r),_=Math.max(v.lineHeight,c)),K=0,ae=k.length;K<ae;++K)S(k[K]),_=v.lineHeight;In(R.after,S)}y=0,_=v.lineHeight,In(this.afterBody,S),n.y-=o}drawFooter(n,i,r){const s=this.footer,o=s.length;let a,l;if(o){const c=hu(r.rtl,this.x,this.width);for(n.x=Cm(this,r.footerAlign,r),n.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=mi(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],c.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+r.footerSpacing}}drawBackground(n,i,r,s){const{xAlign:o,yAlign:a}=this,{x:l,y:c}=n,{width:f,height:g}=r,{topLeft:v,topRight:_,bottomLeft:y,bottomRight:E}=Dl(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(l+v,c),"top"===a&&this.drawCaret(n,i,r,s),i.lineTo(l+f-_,c),i.quadraticCurveTo(l+f,c,l+f,c+_),"center"===a&&"right"===o&&this.drawCaret(n,i,r,s),i.lineTo(l+f,c+g-E),i.quadraticCurveTo(l+f,c+g,l+f-E,c+g),"bottom"===a&&this.drawCaret(n,i,r,s),i.lineTo(l+y,c+g),i.quadraticCurveTo(l,c+g,l,c+g-y),"center"===a&&"left"===o&&this.drawCaret(n,i,r,s),i.lineTo(l,c+v),i.quadraticCurveTo(l,c,l+v,c),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(n){const i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){const a=Hd[n.position].call(this,this._active,this._eventPosition);if(!a)return;const l=this._size=uO(this,n),c=Object.assign({},a,this._size),f=hO(i,n,c),g=dO(n,c,f,i);(s._to!==g.x||o._to!==g.y)&&(this.xAlign=f.xAlign,this.yAlign=f.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,g))}}_willRender(){return!!this.opacity}draw(n){const i=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(i);const s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const a=Hi(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(n.save(),n.globalAlpha=r,this.drawBackground(o,n,s,i),eP(n,i.textDirection),o.y+=a.top,this.drawTitle(o,n,i),this.drawBody(o,n,i),this.drawFooter(o,n,i),tP(n,i.textDirection),n.restore())}getActiveElements(){return this._active||[]}setActiveElements(n,i){const r=this._active,s=n.map(({datasetIndex:l,index:c})=>{const f=this.chart.getDatasetMeta(l);if(!f)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:f.data[c],index:c}}),o=!Zg(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,o=this._active||[],a=this._getActiveElements(n,o,i,r),l=this._positionChanged(a,n),c=i||!Zg(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,i))),c}_getActiveElements(n,i,r,s){const o=this.options;if("mouseout"===n.type)return[];if(!s)return i;const a=this.chart.getElementsAtEventForMode(n,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(n,i){const{caretX:r,caretY:s,options:o}=this,a=Hd[o.position].call(this,n,i);return!1!==a&&(r!==a.x||s!==a.y)}}return t.positioners=Hd,t})();var wK={id:"tooltip",_element:gO,positioners:Hd,afterInit(t,e,n){n&&(t.tooltip=new gO({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",n))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){t.tooltip&&t.tooltip.handleEvent(e.event,e.replay,e.inChartArea)&&(e.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:Ao,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Ao,beforeBody:Ao,beforeLabel:Ao,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return En(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Ao,afterBody:Ao,beforeFooter:Ao,footer:Ao,afterFooter:Ao}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},xK=Object.freeze({__proto__:null,Decimation:Hq,Filler:aK,Legend:uK,SubTitle:fK,Title:dK,Tooltip:wK});class Dm extends Il{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(En(e))return null;const i=this.getLabels();return((t,e)=>null===t?null:xi(Math.round(t),0,e))(n=isFinite(n)&&i[n]===e?n:function CK(t,e,n,i){const r=t.indexOf(e);return-1===r?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):r!==t.lastIndexOf(e)?n:r}(i,e,tn(n,e),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=0===e&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){const n=this.getLabels();return e>=0&&e<n.length?n[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!=typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function mO(t,e,{horizontal:n,minRotation:i}){const r=ws(i),s=(n?Math.sin(r):Math.cos(r))||.001;return Math.min(e/s,.75*e*(""+t).length)}Dm.id="category",Dm.defaults={ticks:{callback:Dm.prototype.getLabelForValue}};class Sm extends Il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return En(e)||("number"==typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Ys(r),c=Ys(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=1;(s>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(l=Math.abs(.05*s)),a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let r,{maxTicksLimit:n,stepSize:i}=e;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o=function SK(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:f,maxDigits:g,includeBounds:v}=t,_=s||1,y=f-1,{min:E,max:S}=e,T=!En(o),R=!En(a),I=!En(c),k=(S-E)/(g+1);let K,ee,ae,ye,V=mR((S-E)/y/_)*_;if(V<1e-14&&!T&&!R)return[{value:E},{value:S}];ye=Math.ceil(S/V)-Math.floor(E/V),ye>y&&(V=mR(ye*V/y/_)*_),En(l)||(K=Math.pow(10,l),V=Math.ceil(V*K)/K),"ticks"===r?(ee=Math.floor(E/V)*V,ae=Math.ceil(S/V)*V):(ee=E,ae=S),T&&R&&s&&function s9(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/s,V/1e3)?(ye=Math.round(Math.min((a-o)/V,f)),V=(a-o)/ye,ee=o,ae=a):I?(ee=T?o:ee,ae=R?a:ae,ye=c-1,V=(ae-ee)/ye):(ye=(ae-ee)/V,ye=Ed(ye,Math.round(ye),V/1e3)?Math.round(ye):Math.ceil(ye));const de=Math.max(_R(V),_R(ee));K=Math.pow(10,En(l)?de:l),ee=Math.round(ee*K)/K,ae=Math.round(ae*K)/K;let se=0;for(T&&(v&&ee!==o?(n.push({value:o}),ee<o&&se++,Ed(Math.round((ee+se*V)*K)/K,o,mO(o,k,t))&&se++):ee<o&&se++);se<ye;++se)n.push({value:Math.round((ee+se*V)*K)/K});return R&&v&&ae!==a?n.length&&Ed(n[n.length-1].value,a,mO(a,k,t))?n[n.length-1].value=a:n.push({value:a}):(!R||ae===a)&&n.push({value:ae}),n}({maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:!1!==n.includeBounds},this._range||this);return"ticks"===e.bounds&&vR(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Pd(e,this.chart.options.locale,this.options.ticks.format)}}class $w extends Sm{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ii(e)?e:0,this.max=ii(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=ws(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}function vO(t){return t/Math.pow(10,Math.floor(Xr(t)))==1}$w.id="linear",$w.defaults={ticks:{callback:hm.formatters.numeric}};class Ww extends Il{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const i=Sm.prototype.parse.apply(this,[e,n]);if(0!==i)return ii(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ii(e)?Math.max(0,e):null,this.max=ii(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let i=this.min,r=this.max;const s=l=>i=e?i:l,o=l=>r=n?r:l,a=(l,c)=>Math.pow(10,Math.floor(Xr(l))+c);i===r&&(i<=0?(s(1),o(10)):(s(a(i,-1)),o(a(r,1)))),i<=0&&s(a(r,-1)),r<=0&&o(a(i,1)),this._zero&&this.min!==this._suggestedMin&&i===a(this.min,0)&&s(a(i,-1)),this.min=i,this.max=r}buildTicks(){const e=this.options,i=function TK(t,e){const n=Math.floor(Xr(e.max)),i=Math.ceil(e.max/Math.pow(10,n)),r=[];let s=$r(t.min,Math.pow(10,Math.floor(Xr(e.min)))),o=Math.floor(Xr(s)),a=Math.floor(s/Math.pow(10,o)),l=o<0?Math.pow(10,Math.abs(o)):1;do{r.push({value:s,major:vO(s)}),++a,10===a&&(a=1,++o,l=o>=0?1:l),s=Math.round(a*Math.pow(10,o)*l)/l}while(o<n||o===n&&a<i);const c=$r(t.max,s);return r.push({value:c,major:vO(s)}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&vR(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return void 0===e?"0":Pd(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Xr(e),this._valueRange=Xr(this.max)-Xr(e)}getPixelForValue(e){return(void 0===e||0===e)&&(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Xr(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}function Xw(t){const e=t.ticks;if(e.display&&t.display){const n=Hi(e.backdropPadding);return tn(e.font&&e.font.size,mn.font.size)+n.height}return 0}function AK(t,e,n){return n=Bn(n)?n:[n],{w:L9(t,e.string,n),h:n.length*e.lineHeight}}function _O(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function MK(t,e,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<e.l?(a=(e.l-i.start)/s,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function PK(t){return 0===t||180===t?"center":t<180?"left":"right"}function OK(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function kK(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}function yO(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Pn);else{let s=t.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=t.getPointPosition(o,e),r.lineTo(s.x,s.y)}}Ww.id="logarithmic",Ww.defaults={ticks:{callback:hm.formatters.logarithmic,major:{enabled:!0}}};class Vd extends Sm{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=Hi(Xw(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ii(e)&&!isNaN(e)?e:0,this.max=ii(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Xw(this.options))}generateTickLabels(e){Sm.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{const r=Un(this.options.pointLabels.callback,[n,i],this);return r||0===r?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){const e=this.options;e.display&&e.pointLabels.display?function IK(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Wn/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));r[l]=c.padding;const f=t.getPointPosition(l,t.drawingArea+r[l],a),g=mi(c.font),v=AK(t.ctx,g,t._pointLabels[l]);i[l]=v;const _=Tr(t.getIndexAngle(l)+a),y=Math.round(uw(_));MK(n,e,_,_O(y,f.x,v.w,0,180),_O(y,f.y,v.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function RK(t,e,n){const i=[],r=t._pointLabels.length,s=t.options,o=Xw(s)/2,a=t.drawingArea,l=s.pointLabels.centerPointLabels?Wn/r:0;for(let c=0;c<r;c++){const f=t.getPointPosition(c,a+o+n[c],l),g=Math.round(uw(Tr(f.angle+Qn))),v=e[c],_=kK(f.y,v.h,g),y=PK(g),E=OK(f.x,v.w,y);i.push({x:f.x,y:_,textAlign:y,left:E,top:_,right:E+v.w,bottom:_+v.h})}return i}(t,i,r)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){return Tr(e*(Pn/(this._pointLabels.length||1))+ws(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(En(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(En(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const i=n[e];return function LK(t,e,n){return Ea(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),e,i)}}getPointPosition(e,n,i=0){const r=this.getIndexAngle(e)-Qn+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const i=this.ctx;i.save(),i.beginPath(),yO(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:i,grid:r}=n,s=this._pointLabels.length;let o,a,l;if(n.pointLabels.display&&function NK(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const s=i.setContext(t.getPointLabelContext(r)),o=mi(s.font),{x:a,y:l,textAlign:c,left:f,top:g,right:v,bottom:_}=t._pointLabelItems[r],{backdropColor:y}=s;if(!En(y)){const E=Dl(s.borderRadius),S=Hi(s.backdropPadding);n.fillStyle=y;const T=f-S.left,R=g-S.top,I=v-f+S.width,k=_-g+S.height;Object.values(E).some(V=>0!==V)?(n.beginPath(),Md(n,{x:T,y:R,w:I,h:k,radius:E}),n.fill()):n.fillRect(T,R,I,k)}Cl(n,t._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((c,f)=>{0!==f&&(a=this.getDistanceFromCenterForValue(c.value),function FK(t,e,n,i){const r=t.ctx,s=e.circular,{color:o,lineWidth:a}=e;!s&&!i||!o||!a||n<0||(r.save(),r.strokeStyle=o,r.lineWidth=a,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),yO(t,n,s,i),r.closePath(),r.stroke(),r.restore())}(this,r.setContext(this.getContext(f-1)),a,s))}),i.display){for(e.save(),o=s-1;o>=0;o--){const c=i.setContext(this.getPointLabelContext(o)),{color:f,lineWidth:g}=c;!g||!f||(e.lineWidth=g,e.strokeStyle=f,e.setLineDash(c.borderDash),e.lineDashOffset=c.borderDashOffset,a=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;const r=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(0===l&&!n.reverse)return;const c=i.setContext(this.getContext(l)),f=mi(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=f.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const g=Hi(c.backdropPadding);e.fillRect(-o/2-g.left,-s-f.size/2-g.top,o+g.width,f.size+g.height)}Cl(e,a.label,0,-s,f,{color:c.color})}),e.restore()}drawTitle(){}}Vd.id="radialLinear",Vd.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:hm.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}},Vd.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Vd.descriptors={angleLines:{_fallback:"grid"}};const Tm={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},hr=Object.keys(Tm);function BK(t,e){return t-e}function bO(t,e){if(En(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return"function"==typeof i&&(o=i(o)),ii(o)||(o="string"==typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!au(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function wO(t,e,n,i){const r=hr.length;for(let s=hr.indexOf(t);s<r-1;++s){const o=Tm[hr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return hr[s]}return hr[r-1]}function xO(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=dw(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function EO(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function HK(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}let Yw=(()=>{class t extends Il{constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,i){const r=n.time||(n.time={}),s=this._adapter=new SY._date(n.adapters.date);s.init(i),wd(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(n),this._normalized=i.normalized}parse(n,i){return void 0===n?null:bO(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const n=this.options,i=this._adapter,r=n.time.unit||"day";let{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(f){!a&&!isNaN(f.min)&&(s=Math.min(s,f.min)),!l&&!isNaN(f.max)&&(o=Math.max(o,f.max))}(!a||!l)&&(c(this._getLabelBounds()),("ticks"!==n.bounds||"labels"!==n.ticks.source)&&c(this.getMinMax(!1))),s=ii(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=ii(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){const n=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return n.length&&(i=n[0],r=n[n.length-1]),{min:i,max:r}}buildTicks(){const n=this.options,i=n.time,r=n.ticks,s="labels"===r.source?this.getLabelTimestamps():this._generate();"ticks"===n.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const o=this.min,l=function c9(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}(s,o,this.max);return this._unit=i.unit||(r.autoSkip?wO(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):function UK(t,e,n,i,r){for(let s=hr.length-1;s>=hr.indexOf(n);s--){const o=hr[s];if(Tm[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return hr[n?hr.indexOf(n):0]}(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=r.major.enabled&&"year"!==this._unit?function jK(t){for(let e=hr.indexOf(t)+1,n=hr.length;e<n;++e)if(Tm[hr[e]].common)return hr[e]}(this._unit):void 0,this.initOffsets(s),n.reverse&&l.reverse(),EO(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n){let s,o,i=0,r=0;this.options.offset&&n.length&&(s=this.getDecimalForValue(n[0]),i=1===n.length?1-s:(this.getDecimalForValue(n[1])-s)/2,o=this.getDecimalForValue(n[n.length-1]),r=1===n.length?o:(o-this.getDecimalForValue(n[n.length-2]))/2);const a=n.length<3?.5:.25;i=xi(i,0,a),r=xi(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const n=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||wO(o.minUnit,i,r,this._getLabelCapacity(i)),l=tn(o.stepSize,1),c="week"===a&&o.isoWeekday,f=au(c)||!0===c,g={};let _,y,v=i;if(f&&(v=+n.startOf(v,"isoWeek",c)),v=+n.startOf(v,f?"day":a),n.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);const E="data"===s.ticks.source&&this.getDataTimestamps();for(_=v,y=0;_<r;_=+n.add(_,l,a),y++)xO(g,_,E);return(_===r||"ticks"===s.bounds||1===y)&&xO(g,_,E),Object.keys(g).sort((S,T)=>S-T).map(S=>+S)}getLabelForValue(n){const r=this.options.time;return this._adapter.format(n,r.tooltipFormat?r.tooltipFormat:r.displayFormats.datetime)}_tickFormatFunction(n,i,r,s){const o=this.options,a=o.time.displayFormats,l=this._unit,c=this._majorUnit,g=c&&a[c],v=r[i],y=this._adapter.format(n,s||(c&&g&&v&&v.major?g:l&&a[l])),E=o.ticks.callback;return E?Un(E,[y,i,r],this):y}generateTickLabels(n){let i,r,s;for(i=0,r=n.length;i<r;++i)s=n[i],s.label=this._tickFormatFunction(s.value,i,n)}getDecimalForValue(n){return null===n?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){const i=this._offsets,r=this.getDecimalForValue(n);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(n){const i=this._offsets,r=this.getDecimalForPixel(n)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(n){const i=this.options.ticks,r=this.ctx.measureText(n).width,s=ws(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(n){const i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(n,0,EO(this,[n],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let i,r,n=this._cache.data||[];if(n.length)return n;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)n=n.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const n=this._cache.labels||[];let i,r;if(n.length)return n;const s=this.getLabels();for(i=0,r=s.length;i<r;++i)n.push(bO(this,s[i]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return xR(n.sort(BK))}}return t.id="time",t.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}},t})();function Am(t,e,n){let s,o,a,l,i=0,r=t.length-1;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Mo(t,"pos",e)),({pos:s,time:a}=t[i]),({pos:o,time:l}=t[r])):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Mo(t,"time",e)),({time:s,pos:a}=t[i]),({time:o,pos:l}=t[r]));const c=o-s;return c?a+(l-a)*(e-s)/c:a}class qw extends Yw{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Am(n,this.min),this._tableRange=Am(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,f;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)f=r[o+1],l=r[o-1],c=r[o],Math.round((f+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return e=n.length&&i.length?this.normalize(n.concat(i)):n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Am(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Am(this._table,i*this._tableRange+this._minPos,!0)}}qw.id="timeseries",qw.defaults=Yw.defaults;const GK=[DY,Lq,xK,Object.freeze({__proto__:null,CategoryScale:Dm,LinearScale:$w,LogarithmicScale:Ww,RadialLinearScale:Vd,TimeScale:Yw,TimeSeriesScale:qw})],Im=function WK(t,e){return t===e||t!=t&&e!=e},Mm=function XK(t,e){for(var n=t.length;n--;)if(Im(t[n][0],e))return n;return-1};var qK=Array.prototype.splice;function fu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}fu.prototype.clear=function zK(){this.__data__=[],this.size=0},fu.prototype.delete=function KK(t){var e=this.__data__,n=Mm(e,t);return!(n<0||(n==e.length-1?e.pop():qK.call(e,n,1),--this.size,0))},fu.prototype.get=function QK(t){var e=this.__data__,n=Mm(e,t);return n<0?void 0:e[n][1]},fu.prototype.has=function eZ(t){return Mm(this.__data__,t)>-1},fu.prototype.set=function nZ(t,e){var n=this.__data__,i=Mm(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};const Rm=fu,CO="object"==typeof global&&global&&global.Object===Object&&global;var fZ="object"==typeof self&&self&&self.Object===Object&&self;const pu=CO||fZ||Function("return this")();var gZ=pu.Symbol,DO=Object.prototype,mZ=DO.hasOwnProperty,vZ=DO.toString,Gd=gZ?gZ.toStringTag:void 0;var wZ=Object.prototype.toString;var SO=gZ?gZ.toStringTag:void 0;const Om=function SZ(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":SO&&SO in Object(t)?function _Z(t){var e=mZ.call(t,Gd),n=t[Gd];try{t[Gd]=void 0;var i=!0}catch{}var r=vZ.call(t);return i&&(e?t[Gd]=n:delete t[Gd]),r}(t):function xZ(t){return wZ.call(t)}(t)},Rl=function TZ(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Kw=function PZ(t){if(!Rl(t))return!1;var e=Om(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Zw=pu["__core-js_shared__"];var TO=function(){var t=/[^.]+$/.exec(Zw&&Zw.keys&&Zw.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var LZ=Function.prototype.toString;var HZ=/^\[object .+?Constructor\]$/,WZ=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const YZ=function XZ(t){return!(!Rl(t)||function kZ(t){return!!TO&&TO in t}(t))&&(Kw(t)?WZ:HZ).test(function BZ(t){if(null!=t){try{return LZ.call(t)}catch{}try{return t+""}catch{}}return""}(t))},Qw=function ZZ(t,e){var n=function qZ(t,e){return t?.[e]}(t,e);return YZ(n)?n:void 0},AO=Qw(pu,"Map"),zd=Qw(Object,"create");var oQ=Object.prototype.hasOwnProperty;var uQ=Object.prototype.hasOwnProperty;function gu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}gu.prototype.clear=function eQ(){this.__data__=zd?zd(null):{},this.size=0},gu.prototype.delete=function nQ(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gu.prototype.get=function aQ(t){var e=this.__data__;if(zd){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return oQ.call(e,t)?e[t]:void 0},gu.prototype.has=function hQ(t){var e=this.__data__;return zd?void 0!==e[t]:uQ.call(e,t)},gu.prototype.set=function pQ(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=zd&&void 0===e?"__lodash_hash_undefined__":e,this};const IO=gu,km=function bQ(t,e){var n=t.__data__;return function _Q(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map};function mu(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}mu.prototype.clear=function mQ(){this.size=0,this.__data__={hash:new IO,map:new(AO||Rm),string:new IO}},mu.prototype.delete=function wQ(t){var e=km(this,t).delete(t);return this.size-=e?1:0,e},mu.prototype.get=function EQ(t){return km(this,t).get(t)},mu.prototype.has=function DQ(t){return km(this,t).has(t)},mu.prototype.set=function TQ(t,e){var n=km(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};const IQ=mu;function vu(t){var e=this.__data__=new Rm(t);this.size=e.size}vu.prototype.clear=function rZ(){this.__data__=new Rm,this.size=0},vu.prototype.delete=function oZ(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},vu.prototype.get=function lZ(t){return this.__data__.get(t)},vu.prototype.has=function uZ(t){return this.__data__.has(t)},vu.prototype.set=function RQ(t,e){var n=this.__data__;if(n instanceof Rm){var i=n.__data__;if(!AO||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new IQ(i)}return n.set(t,e),this.size=n.size,this};const OQ=vu;var kQ=function(){try{var t=Qw(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Nm=kQ,Jw=function NQ(t,e,n){"__proto__"==e&&Nm?Nm(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},ex=function FQ(t,e,n){(void 0!==n&&!Im(t[e],n)||void 0===n&&!(e in t))&&Jw(t,e,n)};var BQ=function LQ(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(!1===n(s[l],l,s))break}return e}}();const UQ=BQ;var MO="object"==typeof exports&&exports&&!exports.nodeType&&exports,RO=MO&&"object"==typeof module&&module&&!module.nodeType&&module,PO=RO&&RO.exports===MO?pu.Buffer:void 0,OO=PO?PO.allocUnsafe:void 0;const kO=pu.Uint8Array,XQ=function WQ(t,e){var n=e?function zQ(t){var e=new t.constructor(t.byteLength);return new kO(e).set(new kO(t)),e}(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)};var NO=Object.create,KQ=function(){function t(){}return function(e){if(!Rl(e))return{};if(NO)return NO(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const ZQ=KQ;var JQ=function QQ(t,e){return function(n){return t(e(n))}}(Object.getPrototypeOf,Object);const FO=JQ;var eJ=Object.prototype;const LO=function tJ(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||eJ)},$d=function rJ(t){return null!=t&&"object"==typeof t},BO=function oJ(t){return $d(t)&&"[object Arguments]"==Om(t)};var UO=Object.prototype,aJ=UO.hasOwnProperty,lJ=UO.propertyIsEnumerable,cJ=BO(function(){return arguments}())?BO:function(t){return $d(t)&&aJ.call(t,"callee")&&!lJ.call(t,"callee")};const tx=cJ,nx=Array.isArray,jO=function dJ(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ix=function fJ(t){return null!=t&&jO(t.length)&&!Kw(t)};var HO="object"==typeof exports&&exports&&!exports.nodeType&&exports,VO=HO&&"object"==typeof module&&module&&!module.nodeType&&module,GO=VO&&VO.exports===HO?pu.Buffer:void 0;const zO=(GO?GO.isBuffer:void 0)||function mJ(){return!1};var $O=Function.prototype.toString,CJ=Object.prototype.hasOwnProperty,DJ=$O.call(Object);var Hn={};Hn["[object Float32Array]"]=Hn["[object Float64Array]"]=Hn["[object Int8Array]"]=Hn["[object Int16Array]"]=Hn["[object Int32Array]"]=Hn["[object Uint8Array]"]=Hn["[object Uint8ClampedArray]"]=Hn["[object Uint16Array]"]=Hn["[object Uint32Array]"]=!0,Hn["[object Arguments]"]=Hn["[object Array]"]=Hn["[object ArrayBuffer]"]=Hn["[object Boolean]"]=Hn["[object DataView]"]=Hn["[object Date]"]=Hn["[object Error]"]=Hn["[object Function]"]=Hn["[object Map]"]=Hn["[object Number]"]=Hn["[object Object]"]=Hn["[object RegExp]"]=Hn["[object Set]"]=Hn["[object String]"]=Hn["[object WeakMap]"]=!1;var WO="object"==typeof exports&&exports&&!exports.nodeType&&exports,Wd=WO&&"object"==typeof module&&module&&!module.nodeType&&module,rx=Wd&&Wd.exports===WO&&CO.process,iee=function(){try{return Wd&&Wd.require&&Wd.require("util").types||rx&&rx.binding&&rx.binding("util")}catch{}}(),YO=iee&&iee.isTypedArray;const qO=YO?function eee(t){return function(e){return t(e)}}(YO):function QJ(t){return $d(t)&&jO(t.length)&&!!Hn[Om(t)]},sx=function see(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var aee=Object.prototype.hasOwnProperty;const cee=function lee(t,e,n){var i=t[e];(!aee.call(t,e)||!Im(i,n)||void 0===n&&!(e in t))&&Jw(t,e,n)};var gee=/^(?:0|[1-9]\d*)$/;const KO=function mee(t,e){var n=typeof t;return!!(e=e??9007199254740991)&&("number"==n||"symbol"!=n&&gee.test(t))&&t>-1&&t%1==0&&t<e};var _ee=Object.prototype.hasOwnProperty;const bee=function yee(t,e){var n=nx(t),i=!n&&tx(t),r=!n&&!i&&zO(t),s=!n&&!i&&!r&&qO(t),o=n||i||r||s,a=o?function dee(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}(t.length,String):[],l=a.length;for(var c in t)(e||_ee.call(t,c))&&(!o||!("length"==c||r&&("offset"==c||"parent"==c)||s&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||KO(c,l)))&&a.push(c);return a};var Cee=Object.prototype.hasOwnProperty;const See=function Dee(t){if(!Rl(t))return function wee(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=LO(t),n=[];for(var i in t)"constructor"==i&&(e||!Cee.call(t,i))||n.push(i);return n},ZO=function Tee(t){return ix(t)?bee(t,!0):See(t)},Iee=function Aee(t){return function uee(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?Jw(n,a,l):cee(n,a,l)}return n}(t,ZO(t))},Ree=function Mee(t,e,n,i,r,s,o){var a=sx(t,n),l=sx(e,n),c=o.get(l);if(c)ex(t,n,c);else{var f=s?s(a,l,n+"",t,e,o):void 0,g=void 0===f;if(g){var v=nx(l),_=!v&&zO(l),y=!v&&!_&&qO(l);f=l,v||_||y?nx(a)?f=a:function pJ(t){return $d(t)&&ix(t)}(a)?f=function YQ(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}(a):_?(g=!1,f=function HQ(t,e){if(e)return t.slice();var n=t.length,i=OO?OO(n):new t.constructor(n);return t.copy(i),i}(l,!0)):y?(g=!1,f=XQ(l,!0)):f=[]:function SJ(t){if(!$d(t)||"[object Object]"!=Om(t))return!1;var e=FO(t);if(null===e)return!0;var n=CJ.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$O.call(n)==DJ}(l)||tx(l)?(f=a,tx(a)?f=Iee(a):(!Rl(a)||Kw(a))&&(f=function nJ(t){return"function"!=typeof t.constructor||LO(t)?{}:ZQ(FO(t))}(l))):g=!1}g&&(o.set(l,f),r(f,l,i,s,o),o.delete(l)),ex(t,n,f)}},Pee=function QO(t,e,n,i,r){t!==e&&UQ(e,function(s,o){if(r||(r=new OQ),Rl(s))Ree(t,e,o,n,QO,i,r);else{var a=i?i(sx(t,o),s,o+"",t,e,r):void 0;void 0===a&&(a=s),ex(t,o,a)}},ZO)},JO=function Oee(t){return t},Nee=function kee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var ek=Math.max;const Uee=function Bee(t){return function(){return t}};var jee=Nm?function(t,e){return Nm(t,"toString",{configurable:!0,enumerable:!1,value:Uee(e),writable:!0})}:JO,zee=Date.now,Wee=function $ee(t){var e=0,n=0;return function(){var i=zee(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(jee);const Xee=Wee,qee=function Yee(t,e){return Xee(function Fee(t,e,n){return e=ek(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=ek(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),Nee(t,this,a)}}(t,e,JO),t+"")};var Jee=function Qee(t){return qee(function(e,n){var i=-1,r=n.length,s=r>1?n[r-1]:void 0,o=r>2?n[2]:void 0;for(s=t.length>3&&"function"==typeof s?(r--,s):void 0,o&&function Kee(t,e,n){if(!Rl(n))return!1;var i=typeof e;return!!("number"==i?ix(n)&&KO(e,n.length):"string"==i&&e in n)&&Im(n[e],t)}(n[0],n[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,s)}return e})}(function(t,e,n){Pee(t,e,n)});const ete=Jee,tte=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],nte={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:t=>Sa(Ta(t.datasetIndex),.4),borderColor:t=>Sa(Ta(t.datasetIndex),1),pointBackgroundColor:t=>Sa(Ta(t.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:t=>Sa(Ta(t.datasetIndex),.6),borderColor:t=>Sa(Ta(t.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:t=>Sa(Ta(t.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:t=>Sa(Ta(t.dataIndex),.6),borderColor:t=>Sa(Ta(t.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Sa(t,e){return"rgba("+t.concat(e).join(",")+")"}function ox(t,e){return Math.floor(Math.random()*(e-t+1))+t}function Ta(t=0){return tte[t]||function ite(){return[ox(0,255),ox(0,255),ox(0,255)]}()}let tk=(()=>{class t{constructor(){this.generateColors=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=mt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();ym.register(...GK);let rte=(()=>{class t{constructor(n){n?.plugins&&ym.register(...n?.plugins);const i=ete(n?.generateColors?nte:{},n?.defaults||{});mn.set(i)}static forRoot(n){return{ngModule:t,providers:[{provide:tk,useValue:n}]}}}return t.\u0275fac=function(n){return new(n||t)(bt(tk,8))},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({}),t})();je(578);let cte=(()=>{let t=class{};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=mr({type:t}),t.\u0275inj=ki({}),t})();class _u{}_u.\u0275fac=function(e){return new(e||_u)},_u.\u0275mod=mr({type:_u,bootstrap:[yd]}),_u.\u0275inj=ki({imports:[cte,Y7.forRoot(),jH,ou,G7,rte]}),UH().bootstrapModule(_u).catch(t=>console.error(t))},23:jt=>{!function(Ze){"use strict";function je(x){if(Array.isArray(x)){for(var w=0,D=Array(x.length);w<x.length;w++)D[w]=x[w];return D}return Array.from(x)}function ke(x,w){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!w||"object"!=typeof w&&"function"!=typeof w?x:w}function ft(x,w){if("function"!=typeof w&&null!==w)throw new TypeError("Super expression must either be null or a function, not "+typeof w);x.prototype=Object.create(w&&w.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(x,w):x.__proto__=w)}function tt(x,w){if(!(x instanceof w))throw new TypeError("Cannot call a class as a function")}function pt(x,w){if(w||(w=typeof window>"u"?global:window),void 0!==w[x])return w[x];for(var D=["webkit","moz","ms","o"],P=0,B=D.length,H=x.charAt(0).toUpperCase()+x.substr(1);P<B;P++){var G=w[D[P]+H];if(void 0!==G)return G}return null}function Ie(x,w,D,P,B,H,G){if("function"!=typeof P)throw new TypeError("Invalid animation rule:",P);var oe=x-D,Z=oe/B,ce=0;Z>1&&(Z=1),1!==Z&&(ce=P(Z),isFinite(ce)&&!isNaN(ce)&&(Z=ce)),w&&w(Z),oe<B?G.frame=Cu(function(O){return Ie(O,w,D,P,B,H,G)}):(H&&H(),G.inProgress=!1)}function ct(){Array.prototype.constructor.apply(this,arguments)}function wt(x,w,D,P,B,H){x.beginPath(),x.moveTo(w+H,D),x.lineTo(w+P-H,D),x.quadraticCurveTo(w+P,D,w+P,D+H),x.lineTo(w+P,D+B-H),x.quadraticCurveTo(w+P,D+B,w+P-H,D+B),x.lineTo(w+H,D+B),x.quadraticCurveTo(w,D+B,w,D+B-H),x.lineTo(w,D+H),x.quadraticCurveTo(w,D,w+H,D),x.closePath()}function zt(x,w){var oe,D=w.valueDec,P=w.valueInt,B=0,H=void 0,G=void 0;if(oe=(x=parseFloat(x))<0,x=Math.abs(x),D>0){for(H=P-(G=x.toFixed(D).toString().split("."))[0].length;B<H;++B)G[0]="0"+G[0];G=(oe?"-":"")+G[0]+"."+G[1]}else{for(H=P-(G=Math.round(x).toString()).length;B<H;++B)G="0"+G;G=(oe?"-":"")+G}return G}function Rt(x,w,D){return x["font"+w+"Style"]+" "+x["font"+w+"Weight"]+" "+x["font"+w+"Size"]*D+"px "+x["font"+w]}function An(x){x.shadowOffsetX=null,x.shadowOffsetY=null,x.shadowBlur=null,x.shadowColor="",x.strokeStyle=null,x.lineWidth=0,x.save()}function Vn(x,w,D,P){w.valueTextShadow&&(x.shadowOffsetX=D,x.shadowOffsetY=D,x.shadowBlur=P,x.shadowColor=w.colorValueTextShadow)}function Ft(x,w,D,P,B){D.beginPath(),D.arc(0,0,Ri(x),0,2*Cs,!0),D.lineWidth=w,D.strokeStyle=B?Fe.linearGradient(D,P,B,x):P,D.stroke(),D.closePath()}function M(x,w){var D=tr.pixelRatio;return x.maxRadius||(x.maxRadius=x.max-w.borderShadowWidth-w.borderOuterWidth*D-w.borderMiddleWidth*D-w.borderInnerWidth*D+(w.borderOuterWidth?.5:0)+(w.borderMiddleWidth?.5:0)+(w.borderInnerWidth?.5:0)),x.maxRadius}function ve(x,w){var D=tr.pixelRatio,B=x.max-w.borderShadowWidth*D-w.borderOuterWidth*D/2,H=B-w.borderOuterWidth*D/2-w.borderMiddleWidth*D/2+.5,G=H-w.borderMiddleWidth*D/2-w.borderInnerWidth*D/2+.5,oe=M(x,w),Z=void 0,ce=!1;x.save(),w.borderOuterWidth&&(ce=Fe.drawShadow(x,w,ce),Ft(B,w.borderOuterWidth*D,x,w.colorBorderOuter,w.colorBorderOuterEnd)),w.borderMiddleWidth&&(ce=Fe.drawShadow(x,w,ce),Ft(H,w.borderMiddleWidth*D,x,w.colorBorderMiddle,w.colorBorderMiddleEnd)),w.borderInnerWidth&&(ce=Fe.drawShadow(x,w,ce),Ft(G,w.borderInnerWidth*D,x,w.colorBorderInner,w.colorBorderInnerEnd)),Fe.drawShadow(x,w,ce),x.beginPath(),x.arc(0,0,Ri(oe),0,2*Cs,!0),w.colorPlateEnd?((Z=x.createRadialGradient(0,0,oe/2,0,0,oe)).addColorStop(0,w.colorPlate),Z.addColorStop(1,w.colorPlateEnd)):Z=w.colorPlate,x.fillStyle=Z,x.fill(),x.closePath(),x.restore()}function F(x,w){var D=x.max*(parseFloat(w.highlightsWidth)||0)/100;if(D){var P=Ri(Pt(x,w)-D/2),B=0,H=w.highlights.length,G=(w.maxValue-w.minValue)/w.ticksAngle;for(x.save();B<H;B++){var oe=w.highlights[B];x.beginPath(),x.rotate(Ds),x.arc(0,0,P,Fe.radians(w.startAngle+(oe.from-w.minValue)/G),Fe.radians(w.startAngle+(oe.to-w.minValue)/G),!1),x.strokeStyle=oe.color,x.lineWidth=D,x.lineCap=w.highlightsLineCap,x.stroke(),x.closePath(),x.restore(),x.save()}}}function Ke(x,w){var D=Pt(x,w),P=void 0,H=void 0,G=0,oe=0,Z=Math.abs(w.minorTicks)||0,ce=w.ticksAngle/(w.maxValue-w.minValue);for(x.lineWidth=tr.pixelRatio,x.strokeStyle=w.colorMinorTicks||w.colorStrokeTicks,x.save(),w.exactTicks?(P=Z?(w.maxValue-w.minValue)/Z:0,oe=(Gi.mod(w.majorTicks[0],Z)||0)*ce):P=Z*(w.majorTicks.length-1);G<P;++G)(H=w.startAngle+oe+G*(w.ticksAngle/P))<=w.ticksAngle+w.startAngle&&(x.rotate(Fe.radians(H)),x.beginPath(),x.moveTo(0,D),x.lineTo(0,D-.075*x.max),N(x))}function Pt(x,w){var D=x.max/100;return M(x,w)-5*D-(w.barWidth?2*(parseFloat(w.barStrokeWidth)||0)+((parseFloat(w.barWidth)||0)+5)*D:0)}function dn(x,w){Fe.prepareTicks(w);var B,D=Ri(Pt(x,w)),P=void 0,H=w.majorTicks.length;for(x.lineWidth=2*tr.pixelRatio,x.save(),B=w.colorMajorTicks instanceof Array?w.colorMajorTicks:new Array(H).fill(w.colorStrokeTicks||w.colorMajorTicks),P=0;P<H;++P)x.strokeStyle=B[P],x.rotate(Fe.radians(nn(w,w.exactTicks?w.majorTicks[P]:P,H))),x.beginPath(),x.moveTo(0,D),x.lineTo(0,D-.15*x.max),N(x);w.strokeTicks&&(x.strokeStyle=w.colorStrokeTicks||B[0],x.rotate(Ds),x.beginPath(),x.arc(0,0,D,Fe.radians(w.startAngle),Fe.radians(w.startAngle+w.ticksAngle),!1),N(x))}function nn(x,w,D){return x.exactTicks?x.startAngle+x.ticksAngle/(x.maxValue-x.minValue)*(w-x.minValue):x.startAngle+w*(x.ticksAngle/(D-1))}function N(x){x.stroke(),x.restore(),x.closePath(),x.save()}function $(x,w){var D=Pt(x,w)-.15*x.max,P={},B=0,H=w.majorTicks.length,G="needle"!==w.animationTarget,oe=w.colorNumbers instanceof Array?w.colorNumbers:new Array(H).fill(w.colorNumbers),Z=G?-(w.value-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle:0;for(G&&(x.save(),x.rotate(-Fe.radians(Z))),x.font=Fe.font(w,"Numbers",x.max/200),x.lineWidth=0,x.textAlign="center",x.textBaseline="middle";B<H;++B){var ce=Z+nn(w,w.exactTicks?w.majorTicks[B]:B,H),O=x.measureText(w.majorTicks[B]).width,Me=w.fontNumbersSize,st=Math.sqrt(O*O+Me*Me)/2,Et=Fe.radialPoint(D-st-w.numbersMargin/100*x.max,Fe.radians(ce));360===ce&&(ce=0),P[ce]||(P[ce]=!0,x.fillStyle=oe[B],x.fillText(w.majorTicks[B],Et.x,Et.y))}G&&x.restore()}function U(x,w){w.title&&(x.save(),x.font=Fe.font(w,"Title",x.max/200),x.fillStyle=w.colorTitle,x.textAlign="center",x.fillText(w.title,0,-x.max/4.25,.8*x.max),x.restore())}function le(x,w){w.units&&(x.save(),x.font=Fe.font(w,"Units",x.max/200),x.fillStyle=w.colorUnits,x.textAlign="center",x.fillText(Fe.formatContext(w,w.units),0,x.max/3.25,.8*x.max),x.restore())}function ue(x,w){if(w.needle){var D=w.ticksAngle<360?Fe.normalizedValue(w).indented:w.value,P=st?w.startAngle:w.startAngle+(D-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle;"right"===w.barStartPosition&&(P=w.startAngle+w.ticksAngle-(D-w.minValue)/(w.maxValue-w.minValue)*w.ticksAngle);var B=M(x,w),H=Ri(B/100*w.needleCircleSize),G=Ri(B/100*w.needleCircleSize*.75),oe=Ri(B/100*w.needleEnd),Z=Ri(w.needleStart?B/100*w.needleStart:0),ce=B/100*w.needleWidth,O=B/100*w.needleWidth/2,Me=tr.pixelRatio,st="needle"!==w.animationTarget;x.save(),Fe.drawNeedleShadow(x,w),x.rotate(Fe.radians(P)),x.fillStyle=Fe.linearGradient(x,w.colorNeedle,w.colorNeedleEnd,oe-Z),"arrow"===w.needleType?(x.beginPath(),x.moveTo(-O,-Z),x.lineTo(-ce,0),x.lineTo(-1*Me,oe),x.lineTo(Me,oe),x.lineTo(ce,0),x.lineTo(O,-Z),x.closePath(),x.fill(),x.beginPath(),x.lineTo(-.5*Me,oe),x.lineTo(-1*Me,oe),x.lineTo(-ce,0),x.lineTo(-O,-Z),x.lineTo(O/2*Me-2*Me,-Z),x.closePath(),x.fillStyle=w.colorNeedleShadowUp,x.fill()):(x.beginPath(),x.moveTo(-O,oe),x.lineTo(-O,Z),x.lineTo(O,Z),x.lineTo(O,oe),x.closePath(),x.fill()),w.needleCircleSize&&(x.restore(),Fe.drawNeedleShadow(x,w),w.needleCircleOuter&&(x.beginPath(),x.arc(0,0,H,0,2*Cs,!0),x.fillStyle=Fe.linearGradient(x,w.colorNeedleCircleOuter,w.colorNeedleCircleOuterEnd,H),x.fill(),x.closePath()),w.needleCircleInner&&(x.beginPath(),x.arc(0,0,G,0,2*Cs,!0),x.fillStyle=Fe.linearGradient(x,w.colorNeedleCircleInner,w.colorNeedleCircleInnerEnd,G),x.fill(),x.closePath()),x.restore())}}function W(x,w,D){Fe.drawValueBox(x,w,D,0,x.max-.33*x.max,x.max)}function j(x,w){var D=x.max/100,P=M(x,w)-5*D,B=parseFloat(w.barStrokeWidth+"")||0,H=(parseFloat(w.barWidth+"")||0)*D,G=P-2*B-H,oe=(P-G)/2,Z=G+oe,ce=B/Z,O=w.startAngle,Me=w.startAngle+w.ticksAngle;if(x.save(),x.rotate(Ds),B&&(x.beginPath(),x.arc(0,0,Z,Fe.radians(O)-ce,Fe.radians(Me)+ce,!1),x.strokeStyle=w.colorBarStroke,x.lineWidth=2*oe,x.stroke(),x.closePath()),H&&(x.beginPath(),x.arc(0,0,Z,Fe.radians(O),Fe.radians(Me),!1),x.strokeStyle=w.colorBar,x.lineWidth=H,x.stroke(),x.closePath(),w.barShadow&&(x.beginPath(),x.arc(0,0,P,Fe.radians(O),Fe.radians(Me),!1),x.clip(),x.beginPath(),x.strokeStyle=w.colorBar,x.lineWidth=1,x.shadowBlur=w.barShadow,x.shadowColor=w.colorBarShadow,x.shadowOffsetX=0,x.shadowOffsetY=0,x.arc(0,0,P,Fe.radians(w.startAngle),Fe.radians(w.startAngle+w.ticksAngle),!1),x.stroke(),x.closePath(),x.restore(),x.rotate(Ds)),w.barProgress)){var st=function q(x){var w=x.startAngle,D=x.startAngle+x.ticksAngle,P=w,B=w+(Fe.normalizedValue(x).normal-x.minValue)/(x.maxValue-x.minValue)*x.ticksAngle;if("middle"===x.barStartPosition){var H=.5*(x.minValue+x.maxValue);x.value<H?(P=180-(H-Fe.normalizedValue(x).normal)/(x.maxValue-x.minValue)*x.ticksAngle,B=180):(P=180,B=180+(Fe.normalizedValue(x).normal-H)/(x.maxValue-x.minValue)*x.ticksAngle)}else"right"===x.barStartPosition&&(P=D-B+w,B=D);return{startAngle:P,endAngle:B}}(w),Et=st.startAngle,Ct=st.endAngle;x.beginPath(),x.arc(0,0,Z,Fe.radians(Et),Fe.radians(Ct),!1),x.strokeStyle=w.colorBarProgress,x.lineWidth=H,x.stroke(),x.closePath()}x.restore()}function Y(x){return x.options.animatedValue?x.options.value:x.value}function ne(x,w,D,P,B,H,G,oe,Z){x.beginPath(),x.lineWidth=w,x.strokeStyle=Z?Fe.linearGradient(x,oe,Z,G,!0,B):oe,D>0?Fe.roundRect(x,P,B,H,G,D):x.rect(P,B,H,G),x.stroke(),x.closePath()}function ie(x,w,D,P,B,H,G){var oe=function be(x,w,D,P,B,H){var G=tr.pixelRatio,oe=H>=B,Z=oe?.85*B:H,ce=oe?H:B;D=oe?Ht(D+(B-Z)/2):D;var O=!!w.title,Me=!!w.units,st=!!w.valueBox,Et=void 0,Ct=void 0,rn=void 0;oe?(Ct=Ht(.05*ce),Et=Ht(.075*ce),rn=Ht(.11*ce),O&&(ce-=Et,P+=Et),Me&&(ce-=Ct),st&&(ce-=rn)):(Ct=Et=Ht(.15*Z),O&&(Z-=Et,P+=Et),Me&&(Z-=Ct));var Tt=2*w.barStrokeWidth,ot=w.barBeginCircle?Ht(Z*w.barBeginCircle/200-Tt/2):0,Kt=Ht(Z*w.barWidth/100-Tt),Yt=Ht(ce*w.barLength/100-Tt),Bt=Ht((ce-Yt)/2),ze=Ht(D+(oe?Z/2:Bt+ot)),ht=Ht(P+(oe?ce-Bt-ot+Tt/2:Z/2)),Ue=!oe||w.hasLeft&&w.hasRight?0:(w.hasRight?-1:1)*w.ticksWidth/100*Z,$t=oe||w.hasLeft&&w.hasRight?0:(w.hasRight?-1:1)*w.ticksWidth/100*Z;return x.barDimensions={isVertical:oe,width:Z,length:ce,barWidth:Kt,barLength:Yt,strokeWidth:Tt,barMargin:Bt,radius:ot,pixelRatio:G,barOffset:null,titleMargin:O?Et:0,unitsMargin:Me?Ct:0,get ticksLength(){return this.barLength-this.barOffset-this.strokeWidth},X:D+Ue,Y:P+$t,x0:ze+Ue,y0:ht+$t,baseX:D,baseY:P,ticksPadding:w.ticksPadding/100},x.barDimensions}(x,w,P,B,H,G),Z=oe.isVertical,ce=oe.width,O=oe.barWidth,Me=oe.barLength,st=oe.strokeWidth,Et=oe.barMargin,Ct=oe.radius,rn=oe.x0,Tt=oe.y0,ot=oe.X,Kt=oe.Y,Yt=Me;if(x.save(),x.beginPath(),w.barBeginCircle){var Bt=Fe.radians(Z?270:0),ze=Math.asin(O/2/Ct),ht=Math.cos(ze),Ue=Math.sin(ze),$t=rn+(Z?Ct*Ue:Ct*ht-st/2),we=Z?Tt-Ct*ht:Tt+Ct*Ue,gt=Ri(Z?we-Tt:$t-rn);x.barDimensions.barOffset=Ht(gt+Ct);var rt=Z?Ht(rn-Ct*Ue):$t,On=Z?we:Ht(Tt-Ct*Ue);"progress"===D&&(Me=x.barDimensions.barOffset+(Me-x.barDimensions.barOffset)*(Fe.normalizedValue(w).normal-w.minValue)/(w.maxValue-w.minValue));var Vt=Ht($t+Me-x.barDimensions.barOffset+st/2),Mr=Ht(we-Me+x.barDimensions.barOffset-st/2);x.arc(rn,Tt,Ct,Bt+ze,Bt-ze),Z?(x.moveTo($t,On),x.lineTo($t,Mr),x.lineTo(rt,Mr),x.lineTo(rt,On)):(x.moveTo($t,On),x.lineTo(Vt,On),x.lineTo(Vt,we),x.lineTo($t,we))}else{var ln=Ht(Z?ot+(ce-O)/2:ot+Et),pr=Ht(Z?Kt+Me+Et:Kt+(ce-O)/2);"progress"===D&&(Me*=(w.value-w.minValue)/(w.maxValue-w.minValue)),Z?x.rect(ln,pr,O,-Me):x.rect(ln,pr,Me,O)}"progress"!==D&&w.barStrokeWidth&&(x.lineWidth=st,x.strokeStyle=w.colorBarStroke,x.stroke()),"progress"!==D&&w.colorBar?(x.fillStyle=w.colorBarEnd?Fe.linearGradient(x,w.colorBar,w.colorBarEnd,Me,Z,Z?Kt:ot):w.colorBar,x.fill()):"progress"===D&&w.colorBarProgress&&(x.fillStyle=w.colorBarProgressEnd?Fe.linearGradient(x,w.colorBarProgress,w.colorBarProgressEnd,Yt,Z,Z?Kt:ot):w.colorBarProgress,x.fill()),x.closePath(),w.barBeginCircle&&(x.barDimensions.radius+=st),x.barDimensions.barWidth+=st,x.barDimensions.barLength+=st}function ge(x,w,D,P,B,H){ie(x,w,"",D,P,B,H)}function Ne(x,w){return w.needleSide!==x||w.tickSide!==x||w.numberSide!==x}function Ge(x,w,D,P,B,H){w.barProgress&&ie(x,w,"progress",D,P,B,H)}function xt(x,w,D,P,B){x.beginPath(),x.moveTo(w,D),x.lineTo(P,B),x.stroke(),x.closePath(),x.save()}function Be(x,w,D,P,B,H,G,oe,Z){var ce=x.barDimensions,O=ce.isVertical,Me=ce.length,st=ce.barWidth,Et=ce.barOffset,Ct=ce.barMargin,rn=ce.pixelRatio,Tt=ce.width,ot=ce.X,Kt=ce.Y,Yt=ce.ticksLength,Bt=ce.ticksPadding,ze=(Tt-st)/2,ht=void 0,Ue=void 0,$t=0,we=D.length,gt=void 0,rt=Z*Tt,On=ze-Bt*Tt,Vt=ze+st+rt+Bt*Tt,Mr=w instanceof Array?w:new Array(D.length).fill(w);x.lineWidth=oe*rn,x.save();for(var ln=Yt/(B-P);$t<we;$t++)gt=D[$t],x.strokeStyle=Mr[$t],O?(Ue=Kt+Me-Ct-Et+(P-gt)*ln,H&&xt(x,ht=ot+On,Ue,Ht(ht-rt),Ue),G&&xt(x,ht=ot+Vt,Ue,Ht(ht-rt),Ue)):(ht=ot+Ct+Et-(P-gt)*ln,H&&xt(x,ht,Ue=Kt+On,ht,Ht(Ue-rt)),G&&xt(x,ht,Ht(Ue=Kt+Vt),ht,Ue-rt))}function dr(x,w,D,P,B){x.beginPath(),x.moveTo(w,D),x.lineTo(P,B),x.stroke(),x.closePath()}function wu(x,w,D,P){return w.colorNeedleEnd?Fe.linearGradient(x,P?w.colorNeedleEnd:w.colorNeedle,P?w.colorNeedle:w.colorNeedleEnd,D,!x.barDimensions.isVertical):w.colorNeedle}function Xd(x,w,D,P,B,H,G,oe){x.lineWidth=w.needleWidth,x.strokeStyle=wu(x,w,G,oe),x.beginPath(),x.moveTo(D,P),x.lineTo(B,H),x.stroke(),x.closePath()}function xu(x,w,D,P,B,H,G,oe){var ce=G-Ht(.4*G),O=D===B,Me=w.needleWidth/2;x.fillStyle=wu(x,w,G,oe),x.beginPath(),O?(P>H&&(ce*=-1),x.moveTo(D-Me,P),x.lineTo(D+Me,P),x.lineTo(D+Me,P+ce),x.lineTo(D,H),x.lineTo(D-Me,P+ce),x.lineTo(D-Me,P)):(D>B&&(ce*=-1),x.moveTo(D,P-Me),x.lineTo(D,P+Me),x.lineTo(D+ce,P+Me),x.lineTo(B,P),x.lineTo(D+ce,P-Me),x.lineTo(D,P-Me)),x.fill(),x.closePath()}function Mi(x,w,D,P,B,H,G){var oe=(parseFloat(w.fontValueSize)||0)*H/200;x.barDimensions.isVertical&&Fe.drawValueBox(x,w,D,P+H/2,B+G-oe-(.11*G-oe)/2,H)}var Aa=function(w,D){if(Array.isArray(w))return w;if(Symbol.iterator in Object(w))return function x(w,D){var P=[],B=!0,H=!1,G=void 0;try{for(var oe,Z=w[Symbol.iterator]();!(B=(oe=Z.next()).done)&&(P.push(oe.value),!D||P.length!==D);B=!0);}catch(ce){H=!0,G=ce}finally{try{!B&&Z.return&&Z.return()}finally{if(H)throw G}}return P}(w,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")},Fl=function x(w,D,P){null===w&&(w=Function.prototype);var B=Object.getOwnPropertyDescriptor(w,D);if(void 0===B){var H=Object.getPrototypeOf(w);return null===H?void 0:x(H,D,P)}if("value"in B)return B.value;var G=B.get;return void 0!==G?G.call(P):void 0},Ll=function x(w,D,P,B){var H=Object.getOwnPropertyDescriptor(w,D);if(void 0===H){var G=Object.getPrototypeOf(w);null!==G&&x(G,D,P,B)}else if("value"in H&&H.writable)H.value=P;else{var oe=H.set;void 0!==oe&&oe.call(B,P)}return P},Es=function(){function x(w,D){for(var P=0;P<D.length;P++){var B=D[P];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(w,B.key,B)}}return function(w,D,P){return D&&x(w.prototype,D),P&&x(w,P),w}}();Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(x,w){if(null==x)throw new TypeError("Cannot convert first argument to object");for(var D=Object(x),P=1;P<arguments.length;P++){var B=arguments[P];if(null!=B)for(var H=Object.keys(Object(B)),G=0,oe=H.length;G<oe;G++){var Z=H[G],ce=Object.getOwnPropertyDescriptor(B,Z);void 0!==ce&&ce.enumerable&&(D[Z]=B[Z])}}return D}}),Array.prototype.indexOf||Object.defineProperty(Array.prototype,"indexOf",{value:function(x,w){var D;if(null===this)throw new TypeError('"this" is null or not defined');var P=Object(this),B=P.length>>>0;if(0===B)return-1;var H=+w||0;if(Math.abs(H)===1/0&&(H=0),H>=B)return-1;for(D=Math.max(H>=0?H:B-Math.abs(H),0);D<B;){if(D in P&&P[D]===x)return D;D++}return-1}}),Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{value:function(x){if(null===this)throw new TypeError("this is null or not defined");for(var w=Object(this),D=w.length>>>0,P=arguments[1],B=P>>0,H=B<0?Math.max(D+B,0):Math.min(B,D),G=arguments[2],oe=void 0===G?D:G>>0,Z=oe<0?Math.max(D+oe,0):Math.min(oe,D);H<Z;)w[H]=x,H++;return w}}),typeof window>"u"&&(window=typeof global>"u"?{}:global);var Eu=function(){function x(){tt(this,x),this._events={},this.addListener=this.on,this.removeListener=this.off}return Es(x,[{key:"emit",value:function(w){if(this._events[w]){for(var D=0,P=this._events[w].length,B=arguments.length,H=Array(B>1?B-1:0),G=1;G<B;G++)H[G-1]=arguments[G];for(;D<P;D++)this._events[w][D]&&this._events[w][D].apply(this,H)}}},{key:"once",value:function(w){for(var D=arguments.length,P=Array(D>1?D-1:0),B=1;B<D;B++)P[B-1]=arguments[B];for(var H=0,G=P.length,oe=this;H<G;H++)!function(){var Z=P[H];P[H]=function O(){oe.off(w,O),Z.apply(oe,arguments)}}();this.on.apply(this,[w].concat(P))}},{key:"on",value:function(w){this._events[w]||(this._events[w]=[]);for(var D=0,P=arguments.length<=1?0:arguments.length-1;D<P;D++)this._events[w].push(arguments.length<=D+1?void 0:arguments[D+1])}},{key:"off",value:function(w){if(this._events[w])for(var D=0,P=arguments.length<=1?0:arguments.length-1;D<P;D++)for(var B=arguments.length<=D+1?void 0:arguments[D+1],H=void 0;~(H=this._events[w].indexOf(B));)this._events[w].splice(H,1)}},{key:"removeAllListeners",value:function(w){delete this._events[w]}},{key:"listeners",get:function(){return this._events}}]),x}(),Cu=pt("requestAnimationFrame")||function(x){return setTimeout(function(){return x((new Date).getTime())},1e3/60)},Lo={linear:function(x){return x},quad:function(x){return Math.pow(x,2)},dequad:function(x){return 1-Lo.quad(1-x)},quint:function(x){return Math.pow(x,5)},dequint:function(x){return 1-Math.pow(1-x,5)},cycle:function(x){return 1-Math.sin(Math.acos(x))},decycle:function(x){return Math.sin(Math.acos(1-x))},bounce:function(x){return 1-Lo.debounce(1-x)},debounce:function(x){for(var w=0,D=1;;w+=D,D/=2)if(x>=(7-4*w)/11)return-Math.pow((11-6*w-11*x)/4,2)+Math.pow(D,2)},elastic:function(x){return 1-Lo.delastic(1-x)},delastic:function(x){return Math.pow(2,10*(x-1))*Math.cos(20*Math.PI*1.5/3*x)}},Bl=function(){function x(){var w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"linear",D=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},B=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(tt(this,x),this.duration=D,this.rule=w,this.draw=P,this.end=B,"function"!=typeof this.draw)throw new TypeError("Invalid animation draw callback:",P);if("function"!=typeof this.end)throw new TypeError("Invalid animation end callback:",B)}return Es(x,[{key:"animate",value:function(w,D){var P=this;this.frame&&this.cancel();var B=window.performance&&window.performance.now?window.performance.now():pt("animationStartTime")||Date.now();D=D||this.end,this.draw=w=w||this.draw,this.end=D,this.frame=Cu(function(H){return Ie(H,w,B,Lo[P.rule]||P.rule,P.duration,D,P)})}},{key:"cancel",value:function(){this.frame&&((pt("cancelAnimationFrame")||function(w){})(this.frame),this.frame=null)}},{key:"destroy",value:function(){this.cancel(),this.draw=null,this.end=null}}]),x}();Bl.rules=Lo;var to=function(){function x(w,D,P){tt(this,x),this.options=w,this.element=D.toLowerCase(),this.type=x.toDashed(P),this.Type=Ze[P],this.mutationsObserved=!1,this.isObservable=!!window.MutationObserver,window.GAUGES_NO_AUTO_INIT||x.domReady(this.traverse.bind(this))}return Es(x,[{key:"isValidNode",value:function(w){return!(!w.tagName||w.tagName.toLowerCase()!==this.element||w.getAttribute("data-type")!==this.type)}},{key:"traverse",value:function(){for(var w=document.getElementsByTagName(this.element),D=0,P=w.length;D<P;D++)this.process(w[D]);this.isObservable&&!this.mutationsObserved&&(new MutationObserver(this.observe.bind(this)).observe(document.body,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.mutationsObserved=!0)}},{key:"observe",value:function(w){for(var D=0,P=w.length;D<P;D++){var B=w[D];if("attributes"===B.type&&"data-type"===B.attributeName&&this.isValidNode(B.target)&&B.oldValue!==this.type)setTimeout(this.process.bind(this,B.target));else if(B.addedNodes&&B.addedNodes.length)for(var H=0,G=B.addedNodes.length;H<G;H++)setTimeout(this.process.bind(this,B.addedNodes[H]))}}},{key:"process",value:function(w){var D=this;if(!this.isValidNode(w))return null;var P=void 0,B=JSON.parse(JSON.stringify(this.options)),H=null;for(P in B)if(B.hasOwnProperty(P)){var G=x.toAttributeName(P),oe=x.parse(w.getAttribute(G));null!=oe&&(B[P]=oe)}return B.renderTo=w,(H=new this.Type(B)).draw&&H.draw(),this.isObservable&&(H.observer=new MutationObserver(function(Z){Z.forEach(function(ce){if("attributes"===ce.type){var O=ce.attributeName.toLowerCase(),Me=w.getAttribute(O).toLowerCase();if("data-type"===O&&Me&&Me!==D.type)H.observer.disconnect(),delete H.observer,H.destroy&&H.destroy();else if("data-"===O.substr(0,5)){var st=O.substr(5).split("-").map(function(Ct,rn){return rn?Ct.charAt(0).toUpperCase()+Ct.substr(1):Ct}).join(""),Et={};Et[st]=x.parse(w.getAttribute(ce.attributeName)),"value"===st?H&&(H.value=Et[st]):H.update&&H.update(Et)}}})}),H.observer.observe(w,{attributes:!0})),H}}],[{key:"parse",value:function(w){if("true"===w)return!0;if("false"===w)return!1;if("undefined"!==w){if("null"===w)return null;if(/^[-+#.\w\d\s]+(?:,[-+#.\w\d\s]*)+$/.test(w))return w.split(",");try{return JSON.parse(w)}catch{}return w}}},{key:"toDashed",value:function(w){for(var D=w.split(/(?=[A-Z])/),P=1,B=D.length,H=D[0].toLowerCase();P<B;P++)H+="-"+D[P].toLowerCase();return H}},{key:"toCamelCase",value:function(w){for(var D=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],P=w.split(/-/),B=0,H=P.length,G="";B<H;B++)G+=B||D?P[B][0].toUpperCase()+P[B].substr(1).toLowerCase():P[B].toLowerCase();return G}},{key:"toAttributeName",value:function(w){return"data-"+x.toDashed(w)}},{key:"domReady",value:function(w){if(/comp|inter|loaded/.test((window.document||{}).readyState+""))return w();window.addEventListener?window.addEventListener("DOMContentLoaded",w,!1):window.attachEvent&&window.attachEvent("onload",w)}}]),x}(),tr=function(){function x(w,D,P){tt(this,x),x.collection.push(this),this.width=D||0,this.height=P||0,this.element=w,this.init()}return Es(x,[{key:"init",value:function(){var w=x.pixelRatio;this.element.width=this.width*w,this.element.height=this.height*w,this.element.style.width=this.width+"px",this.element.style.height=this.height+"px",this.elementClone=this.element.cloneNode(!0),this.context=this.element.getContext("2d"),this.contextClone=this.elementClone.getContext("2d"),this.drawWidth=this.element.width,this.drawHeight=this.element.height,this.drawX=this.drawWidth/2,this.drawY=this.drawHeight/2,this.minSide=this.drawX<this.drawY?this.drawX:this.drawY,this.elementClone.initialized=!1,this.contextClone.translate(this.drawX,this.drawY),this.contextClone.save(),this.context.translate(this.drawX,this.drawY),this.context.save(),this.context.max=this.contextClone.max=this.minSide,this.context.maxRadius=this.contextClone.maxRadius=null}},{key:"destroy",value:function(){var w=x.collection.indexOf(this);~w&&x.collection.splice(w,1),this.context.clearRect(-this.drawX,-this.drawY,this.drawWidth,this.drawHeight),this.context.max=null,delete this.context.max,this.context.maxRadius=null,delete this.context.maxRadius,this.context=null,this.contextClone=null,this.elementClone=null,this.element=null,this.onRedraw=null}},{key:"commit",value:function(){var w=x.pixelRatio;return 1!==w&&(this.contextClone.scale(w,w),this.contextClone.save()),this}},{key:"redraw",value:function(){return this.init(),this.onRedraw&&this.onRedraw(),this}}],[{key:"redraw",value:function(){for(var w=0,D=x.collection.length;w<D;w++)x.collection[w].redraw()}},{key:"pixelRatio",get:function(){return window.devicePixelRatio||1}}]),x}();tr.collection=[],window.matchMedia&&window.matchMedia("screen and (min-resolution: 2dppx)").addListener(tr.redraw);var no={renderTo:null,width:0,height:0,minValue:0,maxValue:100,value:0,units:!1,exactTicks:!1,majorTicks:[0,20,40,60,80,100],minorTicks:10,strokeTicks:!0,animatedValue:!1,animateOnInit:!1,title:!1,borders:!0,numbersMargin:1,listeners:null,valueInt:3,valueDec:2,majorTicksInt:1,majorTicksDec:0,animation:!0,animationDuration:500,animationRule:"cycle",colorPlate:"#fff",colorPlateEnd:"",colorMajorTicks:"#444",colorMinorTicks:"#666",colorStrokeTicks:"",colorTitle:"#888",colorUnits:"#888",colorNumbers:"#444",colorNeedle:"rgba(240,128,128,1)",colorNeedleEnd:"rgba(255,160,122,.9)",colorValueText:"#444",colorValueTextShadow:"rgba(0,0,0,0.3)",colorBorderShadow:"rgba(0,0,0,0.5)",colorBorderOuter:"#ddd",colorBorderOuterEnd:"#aaa",colorBorderMiddle:"#eee",colorBorderMiddleEnd:"#f0f0f0",colorBorderInner:"#fafafa",colorBorderInnerEnd:"#ccc",colorValueBoxRect:"#888",colorValueBoxRectEnd:"#666",colorValueBoxBackground:"#babab2",colorValueBoxShadow:"rgba(0,0,0,1)",colorNeedleShadowUp:"rgba(2,255,255,0.2)",colorNeedleShadowDown:"rgba(188,143,143,0.45)",colorBarStroke:"#222",colorBar:"#ccc",colorBarProgress:"#888",colorBarShadow:"#000",fontNumbers:"Arial",fontTitle:"Arial",fontUnits:"Arial",fontValue:"Arial",fontNumbersSize:20,fontTitleSize:24,fontUnitsSize:22,fontValueSize:26,fontNumbersStyle:"normal",fontTitleStyle:"normal",fontUnitsStyle:"normal",fontValueStyle:"normal",fontNumbersWeight:"normal",fontTitleWeight:"normal",fontUnitsWeight:"normal",fontValueWeight:"normal",needle:!0,needleShadow:!0,needleType:"arrow",needleStart:5,needleEnd:85,needleWidth:4,borderOuterWidth:3,borderMiddleWidth:3,borderInnerWidth:3,borderShadowWidth:3,valueBox:!0,valueBoxStroke:5,valueBoxWidth:0,valueText:"",valueTextShadow:!0,valueBoxBorderRadius:2.5,highlights:[{from:20,to:60,color:"#eee"},{from:60,to:80,color:"#ccc"},{from:80,to:100,color:"#999"}],highlightsWidth:15,highlightsLineCap:"butt",barWidth:20,barStrokeWidth:0,barProgress:!0,barShadow:0};(ct.prototype=Object.create(Array.prototype)).constructor=ct,ct.prototype.get=function(x){if("string"==typeof x){for(var w=0,D=this.length;w<D;w++)if((this[w].options.renderTo.tagName?this[w].options.renderTo:document.getElementById(this[w].options.renderTo||"")).getAttribute("id")===x)return this[w]}else if("number"==typeof x)return this[x];return null};var Bo="2.1.7",Ht=Math.round,Ri=Math.abs,yn=new ct;yn.version=Bo;var Gi=function(x){function w(D){tt(this,w);var P=ke(this,(w.__proto__||Object.getPrototypeOf(w)).call(this)),B=P.constructor.name;if("BaseGauge"===B)throw new TypeError("Attempt to instantiate abstract class!");if(yn.push(P),D.listeners&&Object.keys(D.listeners).forEach(function(G){(D.listeners[G]instanceof Array?D.listeners[G]:[D.listeners[G]]).forEach(function(oe){P.on(G,oe)})}),P.version=Bo,P.type=Ze[B]||w,P.initialized=!1,D.minValue=parseFloat(D.minValue),D.maxValue=parseFloat(D.maxValue),D.value=parseFloat(D.value)||0,D.borders||(D.borderInnerWidth=D.borderMiddleWidth=D.borderOuterWidth=0),!D.renderTo)throw TypeError("Canvas element was not specified when creating the Gauge object!");var H=D.renderTo.tagName?D.renderTo:document.getElementById(D.renderTo);if(!(H instanceof HTMLCanvasElement))throw TypeError("Given gauge canvas element is invalid!");return D.width=parseFloat(D.width)||0,D.height=parseFloat(D.height)||0,D.width&&D.height||(D.width||(D.width=H.parentNode?H.parentNode.offsetWidth:H.offsetWidth),D.height||(D.height=H.parentNode?H.parentNode.offsetHeight:H.offsetHeight)),P.options=D||{},P.options.animateOnInit&&(P._value=P.options.value,P.options.value=P.options.minValue),P.canvas=new tr(H,D.width,D.height),P.canvas.onRedraw=P.draw.bind(P),P.animation=new Bl(D.animationRule,D.animationDuration),P}return ft(w,x),Es(w,[{key:"update",value:function(D){return Object.assign(this.options,this.type.configure(D||{})),this.canvas.width=this.options.width,this.canvas.height=this.options.height,this.animation.rule=this.options.animationRule,this.animation.duration=this.options.animationDuration,this.canvas.redraw(),this}},{key:"destroy",value:function(){var D=yn.indexOf(this);~D&&yn.splice(D,1),this.canvas.destroy(),this.canvas=null,this.animation.destroy(),this.animation=null,this.emit("destroy")}},{key:"draw",value:function(){return this.options.animateOnInit&&!this.initialized&&(this.value=this._value,this.initialized=!0,this.emit("init")),this.emit("render"),this}},{key:"value",set:function(D){var P=this;D=w.ensureValue(D,this.options.minValue);var B=this.options.value;if(D!==B)if(this.options.animation){if(this.animation.frame&&(this.options.value=this._value,this._value===D))return this.animation.cancel(),void delete this._value;void 0===this._value&&(this._value=D),this.emit("animationStart"),this.animation.animate(function(H){var G=B+(D-B)*H;P.options.animatedValue&&P.emit("value",G,P.value),P.options.value=G,P.draw(),P.emit("animate",H,P.options.value)},function(){void 0!==P._value&&(P.emit("value",P._value,P.value),P.options.value=P._value,delete P._value),P.draw(),P.emit("animationEnd")})}else this.emit("value",D,this.value),this.options.value=D,this.draw()},get:function(){return void 0===this._value?this.options.value:this._value}}],[{key:"configure",value:function(D){return D}},{key:"initialize",value:function(D,P){return new to(P,"canvas",D)}},{key:"fromElement",value:function(D){var P=to.toCamelCase(D.getAttribute("data-type")),B=D.attributes,H=0,G=B.length,oe={};if(P){for(/Gauge$/.test(P)||(P+="Gauge");H<G;H++)oe[to.toCamelCase(B[H].name.replace(/^data-/,""),!1)]=to.parse(B[H].value);new to(oe,D.tagName,P).process(D)}}},{key:"ensureValue",value:function(D){var P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return D=parseFloat(D),!isNaN(D)&&isFinite(D)||(D=parseFloat(P)||0),D}},{key:"mod",value:function(D,P){return(D%P+P)%P}},{key:"version",get:function(){return Bo}}]),w}(Eu);void 0!==Ze&&(Ze.BaseGauge=Gi,Ze.gauges=(window.document||{}).gauges=yn);var Uo=/{([_a-zA-Z]+[_a-zA-Z0-9]*)}/g,Fe={roundRect:wt,padValue:zt,formatMajorTickNumber:function Oe(x,w){var D=void 0,P=!1;return D=0===w.majorTicksDec?Math.round(x).toString():x.toFixed(w.majorTicksDec),w.majorTicksInt>1?(P=~D.indexOf("."),~D.indexOf("-")?"-"+[w.majorTicksInt+w.majorTicksDec+2+(P?1:0)-D.length].join("0")+D.replace("-",""):[w.majorTicksInt+w.majorTicksDec+1+(P?1:0)-D.length].join("0")+D):D},radians:function pe(x){return x*Math.PI/180},radialPoint:function De(x,w){return{x:-x*Math.sin(w),y:x*Math.cos(w)}},linearGradient:function hn(x,w,D,P){var B=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],H=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,G=x.createLinearGradient(B?0:H,B?H:0,B?0:P,B?P:0);return G.addColorStop(0,w),G.addColorStop(1,D),G},drawNeedleShadow:function Mt(x,w){w.needleShadow&&(x.shadowOffsetX=2,x.shadowOffsetY=2,x.shadowBlur=10,x.shadowColor=w.colorNeedleShadowDown)},drawValueBox:function Qe(x,w,D,P,B,H){if(w.valueBox){An(x);var G=w.valueDec?1+w.valueDec:0,oe="9".repeat(Math.max.apply(null,[String(parseInt(D)).length+G].concat(w.majorTicks.map(function(we){return String(parseInt(we,10)).length+G})))),Z=w.valueText||zt(D,w),ce=H/200,O=H/100,Me=.4*O,st=1.2*O;x.font=Rt(w,"Value",ce),Vn(x,w,Me,st);var Et=x.measureText(w.valueText?Z:"-"+zt(Number(oe),w)).width;An(x);var Ct=parseFloat(w.fontValueSize)*ce+Me+st,rn=O*parseFloat(w.valueBoxStroke),Tt=2*H-2*rn,ot=Et+10*O,Kt=1.1*Ct+Me+st,Yt=O*w.valueBoxBorderRadius,Bt=(parseFloat(w.valueBoxWidth)||0)/100*Tt;Bt>ot&&(ot=Bt),ot>Tt&&(ot=Tt);var ze=P-ot/2,ht=B-Kt/2,Ue=B-5.75*O;if(x.beginPath(),Yt?wt(x,ze,ht,ot,Kt,Yt):x.rect(ze,ht,ot,Kt),rn){var $t=x.createRadialGradient(P,Ue,10*O,P,Ue,20*O);$t.addColorStop(0,w.colorValueBoxRect),$t.addColorStop(1,w.colorValueBoxRectEnd),x.strokeStyle=$t,x.lineWidth=rn,x.stroke()}w.colorValueBoxShadow&&(x.shadowBlur=1.2*O,x.shadowColor=w.colorValueBoxShadow),w.colorValueBoxBackground&&(x.fillStyle=w.colorValueBoxBackground,x.fill()),x.closePath(),x.restore(),Vn(x,w,Me,st),x.fillStyle=w.colorValueText,x.textAlign="center",x.textBaseline="alphabetic",x.fillText(Z,ze+ot/2,B+Kt/2-Ct/3),x.restore()}},verifyError:function et(x){if(!(x instanceof DOMException&&2152923147===x.result))throw x},prepareTicks:function qe(x){return x.majorTicks instanceof Array||(x.majorTicks=x.majorTicks?[x.majorTicks]:[]),x.majorTicks.length||(x.majorTicks.push(Fe.formatMajorTickNumber(x.minValue,x)),x.majorTicks.push(Fe.formatMajorTickNumber(x.maxValue,x))),["right"!==x.tickSide,"left"!==x.tickSide]},drawShadow:function Tn(x,w){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return x.restore(),!0;x.save();var D=w.borderShadowWidth;return D&&(x.shadowBlur=D,x.shadowColor=w.colorBorderShadow),!0},font:Rt,normalizedValue:function Le(x){var w=x.value,D=x.minValue,P=x.maxValue,B=.01*(P-D);return{normal:w<D?D:w>P?P:w,indented:w<D?D-B:w>P?P+B:w}},formatContext:function Ve(x,w){return w.replace(Uo,function(D,P){var B=x[P];return void 0!==B?B:D})}},Cs=Math.PI,Ds=Cs/2,Ei=Object.assign({},no,{ticksAngle:270,startAngle:45,colorNeedleCircleOuter:"#f0f0f0",colorNeedleCircleOuterEnd:"#ccc",colorNeedleCircleInner:"#e8e8e8",colorNeedleCircleInnerEnd:"#f5f5f5",needleCircleSize:10,needleCircleInner:!0,needleCircleOuter:!0,needleStart:20,animationTarget:"needle",useMinPath:!1,barWidth:0,barStartPosition:"left"}),Du=function(x){function w(D){return tt(this,w),D=Object.assign({},Ei,D||{}),ke(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w.configure(D)))}return ft(w,x),Es(w,[{key:"draw",value:function(){try{var D=this.canvas,P=[-D.drawX,-D.drawY,D.drawWidth,D.drawHeight],B=P[0],H=P[1],G=P[2],oe=P[3],Z=this.options;if("needle"===Z.animationTarget){if(!D.elementClone.initialized){var ce=D.contextClone;ce.clearRect(B,H,G,oe),ce.save(),this.emit("beforePlate"),ve(ce,Z),this.emit("beforeHighlights"),F(ce,Z),this.emit("beforeMinorTicks"),Ke(ce,Z),this.emit("beforeMajorTicks"),dn(ce,Z),this.emit("beforeNumbers"),$(ce,Z),this.emit("beforeTitle"),U(ce,Z),this.emit("beforeUnits"),le(ce,Z),D.elementClone.initialized=!0}this.canvas.commit(),D.context.clearRect(B,H,G,oe),D.context.save(),D.context.drawImage(D.elementClone,B,H,G,oe),D.context.save(),this.emit("beforeProgressBar"),j(D.context,Z),this.emit("beforeValueBox"),W(D.context,Z,Y(this)),this.emit("beforeNeedle"),ue(D.context,Z)}else{var O=-Fe.radians((Z.value-Z.minValue)/(Z.maxValue-Z.minValue)*Z.ticksAngle);if(D.context.clearRect(B,H,G,oe),D.context.save(),this.emit("beforePlate"),ve(D.context,Z),D.context.rotate(O),this.emit("beforeHighlights"),F(D.context,Z),this.emit("beforeMinorTicks"),Ke(D.context,Z),this.emit("beforeMajorTicks"),dn(D.context,Z),this.emit("beforeNumbers"),$(D.context,Z),this.emit("beforeProgressBar"),j(D.context,Z),D.context.rotate(-O),D.context.save(),!D.elementClone.initialized){var Me=D.contextClone;Me.clearRect(B,H,G,oe),Me.save(),this.emit("beforeTitle"),U(Me,Z),this.emit("beforeUnits"),le(Me,Z),this.emit("beforeNeedle"),ue(Me,Z),D.elementClone.initialized=!0}D.context.drawImage(D.elementClone,B,H,G,oe)}this.emit("beforeValueBox"),W(D.context,Z,Y(this)),Fl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"draw",this).call(this)}catch(st){Fe.verifyError(st)}return this}},{key:"value",set:function(D){D=Gi.ensureValue(D,this.options.minValue),this.options.animation&&360===this.options.ticksAngle&&this.options.useMinPath&&(this._value=D,D=this.options.value+((D-this.options.value)%360+540)%360-180),Ll(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",D,this)},get:function(){return Fl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this)}}],[{key:"configure",value:function(D){return D.barWidth>50&&(D.barWidth=50),isNaN(D.startAngle)&&(D.startAngle=45),isNaN(D.ticksAngle)&&(D.ticksAngle=270),D.ticksAngle>360&&(D.ticksAngle=360),D.ticksAngle<0&&(D.ticksAngle=0),D.startAngle<0&&(D.startAngle=0),D.startAngle>360&&(D.startAngle=360),D}}]),w}(Gi);void 0!==Ze&&(Ze.RadialGauge=Du),Gi.initialize("RadialGauge",Ei);var jo=Object.assign({},no,{borderRadius:0,barBeginCircle:30,colorBarEnd:"",colorBarProgressEnd:"",needleWidth:6,tickSide:"both",needleSide:"both",numberSide:"both",ticksWidth:10,ticksWidthMinor:5,ticksPadding:5,barLength:85,fontTitleSize:26,highlightsWidth:10}),Ul=function(x){function w(D){return tt(this,w),D=Object.assign({},jo,D||{}),ke(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,w.configure(D)))}return ft(w,x),Es(w,[{key:"draw",value:function(){try{var D=this.canvas,P=[-D.drawX,-D.drawY,D.drawWidth,D.drawHeight],B=P[0],H=P[1],G=P[2],oe=P[3],Z=this.options;if(!D.elementClone.initialized){var ce=D.contextClone;ce.clearRect(B,H,G,oe),ce.save(),this.emit("beforePlate"),this.drawBox=function te(x,w,D,P,B,H){var G=tr.pixelRatio;x.save();var oe=w.borderRadius*G,Z=B-w.borderShadowWidth-w.borderOuterWidth*G,ce=Z-w.borderOuterWidth*G-w.borderMiddleWidth*G,O=ce-w.borderMiddleWidth*G-w.borderInnerWidth*G,Me=O-w.borderInnerWidth*G,st=H-w.borderShadowWidth-w.borderOuterWidth*G,Et=st-w.borderOuterWidth*G-w.borderMiddleWidth*G,Ct=Et-w.borderMiddleWidth*G-w.borderInnerWidth*G,rn=Ct-w.borderInnerWidth*G,Tt=D-(ce-Z)/2,ot=Tt-(O-ce)/2,Kt=ot-(Me-O)/2,Yt=P-(Et-st)/2,Bt=Yt-(Ct-Et)/2,ze=Bt-(rn-Ct)/2,ht=0,Ue=!1;return w.borderOuterWidth&&(Ue=Fe.drawShadow(x,w,Ue),ne(x,w.borderOuterWidth*G,oe,D+w.borderOuterWidth*G/2-ht,P+w.borderOuterWidth*G/2-ht,Z,st,w.colorBorderOuter,w.colorBorderOuterEnd),ht+=.5*G),w.borderMiddleWidth&&(Ue=Fe.drawShadow(x,w,Ue),ne(x,w.borderMiddleWidth*G,oe-=1+2*ht,Tt+w.borderMiddleWidth*G/2-ht,Yt+w.borderMiddleWidth*G/2-ht,ce+2*ht,Et+2*ht,w.colorBorderMiddle,w.colorBorderMiddleEnd),ht+=.5*G),w.borderInnerWidth&&(Ue=Fe.drawShadow(x,w,Ue),ne(x,w.borderInnerWidth*G,oe-=1+2*ht,ot+w.borderInnerWidth*G/2-ht,Bt+w.borderInnerWidth*G/2-ht,O+2*ht,Ct+2*ht,w.colorBorderInner,w.colorBorderInnerEnd),ht+=.5*G),Fe.drawShadow(x,w,Ue),function Q(x,w,D,P,B,H,G,oe){x.beginPath(),x.fillStyle=oe?Fe.linearGradient(x,G,oe,B>H?B:H,H>B,B>H?D:P):G,w>0?Fe.roundRect(x,D,P,B,H,w):x.rect(D,P,B,H),x.fill(),x.closePath()}(x,oe,Kt,ze,Me+2*ht,rn+2*ht,w.colorPlate,w.colorPlateEnd),x.restore(),[Kt,ze,Me,rn]}(ce,Z,B,H,G,oe),this.emit("beforeBar"),ge.apply(void 0,[ce,Z].concat(je(this.drawBox))),D.context.barDimensions=ce.barDimensions,this.emit("beforeHighlights"),function Ot(x,w){var D=x.barDimensions,P=D.isVertical,B=D.width,H=D.length,G=D.barWidth,oe=D.barOffset,Z=D.barMargin,ce=D.X,O=D.Y,Me=D.ticksLength,st=D.ticksPadding,Et=B*(parseFloat(w.highlightsWidth)||0)/100;if(w.highlights&&Et){var Ct="right"!==w.tickSide,rn="left"!==w.tickSide,Tt=0,ot=w.highlights.length,Kt=(B-G)/2,Yt=w.maxValue-w.minValue,Bt=Ht(P?ce+Kt:ce+Z+oe),ze=Et,ht=P?O+H-Z-oe:O+Kt,Ue=Ht((w.ticksWidth/100+st)*B)+(Et-w.ticksWidth/100*B),$t=Ht(G+st*B);for(x.save();Tt<ot;Tt++){var we=w.highlights[Tt],gt=Me*Ri(w.minValue-we.from)/Yt,rt=Me*Ri((we.to-we.from)/Yt);x.beginPath(),x.fillStyle=we.color,P?(Ct&&x.rect(Bt-Ue,ht-gt,ze,-rt),rn&&x.rect(Bt+$t,ht-gt,ze,-rt)):(Ct&&x.rect(Bt+gt,ht-Ue,rt,ze),rn&&x.rect(Bt+gt,ht+$t,rt,ze)),x.fill(),x.closePath()}}}(ce,Z),this.emit("beforeMinorTicks"),function Ar(x,w){var D=Fe.prepareTicks(w),P=Aa(D,2),B=P[0],H=P[1],G=[],oe=w.minValue,Z=Math.abs(w.minorTicks)||0,ce=Z?(w.maxValue-w.minValue)/(Z*(w.majorTicks.length-1)):0;if(Z)if(w.exactTicks)for(var O=Gi.mod(w.majorTicks[0],Z)||0;oe<w.maxValue;oe+=Z)O+oe<w.maxValue&&G.push(O+oe);else for(;oe<w.maxValue;oe+=ce)G.push(oe);Be(x,w.colorMinorTicks||w.colorStrokeTicks,G,w.minValue,w.maxValue,B,H,1,w.ticksWidthMinor/100)}(ce,Z),this.emit("beforeMajorTicks"),function yt(x,w){var D=Fe.prepareTicks(w),P=Aa(D,2),B=P[0],H=P[1],G=2,oe=(w.maxValue-w.minValue)/(w.majorTicks.length-1),Z=w.colorMajorTicks instanceof Array?w.colorMajorTicks:new Array(w.majorTicks.length).fill(w.colorStrokeTicks||w.colorMajorTicks);if(Be(x,Z,w.exactTicks?w.majorTicks:w.majorTicks.map(function(rt,On){return w.minValue+oe*On}),w.minValue,w.maxValue,B,H,G,w.ticksWidth/100),w.strokeTicks){var ce=x.barDimensions,O=ce.isVertical,Me=ce.length,st=ce.width,Et=ce.barWidth,Ct=ce.barMargin,rn=ce.barOffset,Tt=ce.X,ot=ce.Y,Kt=ce.ticksLength,Yt=ce.pixelRatio,Bt=ce.ticksPadding,ze=(st-Et)/2+Et+Bt*st,ht=(st-Et)/2-Bt*st,Ue=void 0,$t=void 0,we=void 0,gt=void 0;x.strokeStyle=w.colorStrokeTicks||Z[0],G*=Yt,O?(gt=($t=ot+Me-Ct-rn+G/2)-Kt-G,B&&(we=Ue=Ht(Tt+ht),dr(x,Ue,$t,we,gt)),H&&(we=Ue=Ht(Tt+ze),dr(x,Ue,$t,we,gt))):(we=(Ue=Tt+Ct+rn-G/2)+Kt+G,B&&(gt=$t=Ht(ot+ht),dr(x,Ue,$t,we,gt)),H&&(gt=$t=Ht(ot+ze),dr(x,Ue,$t,we,gt)))}}(ce,Z),this.emit("beforeNumbers"),function fr(x,w){var D=x.barDimensions,P=D.isVertical,B=D.length,H=D.width,G=D.barWidth,oe=D.barMargin,Z=D.barOffset,ce=D.X,O=D.Y,Me=D.ticksLength,st=D.ticksPadding,Et=w.maxValue-w.minValue,Ct=Et/(w.majorTicks.length-1),rn=w.exactTicks?w.majorTicks:w.majorTicks.map(function(Mr,ln){return w.minValue+Ct*ln}),Tt=rn.length,ot="right"!==w.numberSide,Kt="left"!==w.numberSide,Yt=w.fontNumbersSize*H/200,Bt=0,ze=(w.ticksWidth/100+2*st)*H,ht=(H-G)/2-ze,Ue=(H-G)/2+G+ze,$t=void 0,we=void 0,gt=void 0,rt=void 0,On=w.colorNumbers instanceof Array?w.colorNumbers:new Array(Tt).fill(w.colorNumbers),Vt=w.numbersMargin/100*H;for(x.font=Fe.font(w,"Numbers",H/200),x.lineWidth=0,x.textAlign="center";Bt<Tt;Bt++)x.fillStyle=On[Bt],rt=w.majorTicks[Bt],gt=w.exactTicks?Me*((rn[Bt]-w.minValue)/Et):Bt*Me/(Tt-1),P?(we=O+B-oe-Z-gt+Yt/3,ot&&(x.textAlign="right",x.fillText(rt,ce+ht-Vt,we)),Kt&&(x.textAlign="left",x.fillText(rt,ce+Ue+Vt,we))):(x.measureText(rt),$t=ce+oe+Z+gt,ot&&x.fillText(rt,$t,O+ht-Vt),Kt&&x.fillText(rt,$t,O+Ue+Yt+Vt))}(ce,Z),this.emit("beforeTitle"),function eo(x,w){if(w.title){var D=x.barDimensions,P=D.isVertical,B=D.width,H=D.length,oe=D.baseY,Z=D.titleMargin,ce=w.fontTitleSize*B/200,O=Ht(D.baseX+(P?B:H)/2),Me=Ht(oe+Z/2-(P?ce:ce/2)-.025*(P?H:B));x.save(),x.textAlign="center",x.fillStyle=w.colorTitle,x.font=Fe.font(w,"Title",B/200),x.lineWidth=0,x.fillText(w.title,O,Me,P?B:H)}}(ce,Z),this.emit("beforeUnits"),function Ir(x,w){if(w.units){var D=x.barDimensions,P=D.isVertical,B=D.width,H=D.length,oe=D.baseY,Z=D.unitsMargin,ce=w.fontUnitsSize*B/200,O=Ht(D.baseX+(P?B:H)/2),Me=Ht(oe+(P?H:B)+Z/2-ce/2);x.save(),x.textAlign="center",x.fillStyle=w.colorUnits,x.font=Fe.font(w,"Units",B/200),x.lineWidth=0,x.fillText(Fe.formatContext(w,w.units),O,Me,P?B:H)}}(ce,Z),D.elementClone.initialized=!0}this.canvas.commit(),D.context.clearRect(B,H,G,oe),D.context.save(),D.context.drawImage(D.elementClone,B,H,G,oe),D.context.save(),this.emit("beforeProgressBar"),Ge.apply(void 0,[D.context,Z].concat(je(this.drawBox))),this.emit("beforeNeedle"),function Fo(x,w){if(w.needle){var D=x.barDimensions,P=D.isVertical,B=D.width,H=D.length,G=D.barWidth,oe=D.barOffset,Z=D.barMargin,O=D.X,Me=D.Y,st=D.ticksPadding,Et="right"!==w.needleSide,Ct="left"!==w.needleSide,rn=D.ticksLength*(Fe.normalizedValue(w).indented-w.minValue)/(w.maxValue-w.minValue),Tt=(w.ticksWidth/100+st)*B,ot=G/2+Tt,Kt=ot*(w.needleEnd/100),Yt=void 0,ze=void 0,Ue="arrow"===w.needleType.toLowerCase()?xu:Xd,$t=(B-G)/2,we=ot*(w.needleStart/100),gt=$t-Tt-we,rt=$t+G+Tt+we;x.save(),Fe.drawNeedleShadow(x,w),P?(ze=Ht(Me+H-Z-oe-rn),Et&&Ue(x,w,Yt=Ht(O+gt),ze,Yt+Kt,ze,Kt),Ct&&Ue(x,w,Yt=Ht(O+rt),ze,Yt-Kt,ze,Kt,!0)):(Yt=Ht(O+Z+oe+rn),Et&&Ue(x,w,Yt,ze=Ht(Me+gt),Yt,ze+Kt,Kt),Ct&&Ue(x,w,Yt,ze=Ht(Me+rt),Yt,ze-Kt,Kt,!0)),x.restore()}}(D.context,Z),this.emit("beforeValueBox"),Mi.apply(void 0,[D.context,Z,Z.animatedValue?this.options.value:this.value].concat(je(this.drawBox))),Fl(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"draw",this).call(this)}catch(O){Fe.verifyError(O)}return this}}],[{key:"configure",value:function(D){return D.barStrokeWidth>=D.barWidth&&(D.barStrokeWidth=Ht(D.barWidth/2)),D.hasLeft=Ne("right",D),D.hasRight=Ne("left",D),D.value>D.maxValue&&(D.value=D.maxValue),D.value<D.minValue&&(D.value=D.minValue),Gi.configure(D)}}]),w}(Gi);void 0!==Ze&&(Ze.LinearGauge=Ul),Gi.initialize("LinearGauge",jo),Object.assign(Ze,{Collection:ct,GenericOptions:no,Animation:Bl,BaseGauge:Gi,drawings:Fe,SmartCanvas:tr,DomObserver:to,vendorize:pt})}(jt.exports)},469:jt=>{"use strict";function Ze(N,$,U){U=U||2;var j,Y,Q,ne,te,be,ie,le=$&&$.length,ue=le?$[0]*U:N.length,W=je(N,0,ue,U,!0),q=[];if(!W||W.next===W.prev)return q;if(le&&(W=function et(N,$,U,le){var W,q,Q,ue=[];for(W=0,q=$.length;W<q;W++)(Q=je(N,$[W]*le,W<q-1?$[W+1]*le:N.length,le,!1))===Q.next&&(Q.steiner=!0),ue.push(hn(Q));for(ue.sort(Ve),W=0;W<ue.length;W++)U=qe(ue[W],U);return U}(N,$,W,U)),N.length>80*U){j=Q=N[0],Y=ne=N[1];for(var ge=U;ge<ue;ge+=U)(te=N[ge])<j&&(j=te),(be=N[ge+1])<Y&&(Y=be),te>Q&&(Q=te),be>ne&&(ne=be);ie=0!==(ie=Math.max(Q-j,ne-Y))?32767/ie:0}return ft(W,q,U,j,Y,ie,0),q}function je(N,$,U,le,ue){var W,q;if(ue===nn(N,$,U,le)>0)for(W=$;W<U;W+=le)q=Ke(W,N[W],N[W+1],q);else for(W=U-le;W>=$;W-=le)q=Ke(W,N[W],N[W+1],q);return q&&An(q,q.next)&&(Pt(q),q=q.next),q}function ke(N,$){if(!N)return N;$||($=N);var le,U=N;do{if(le=!1,U.steiner||!An(U,U.next)&&0!==Rt(U.prev,U,U.next))U=U.next;else{if(Pt(U),(U=$=U.prev)===U.next)break;le=!0}}while(le||U!==$);return $}function ft(N,$,U,le,ue,W,q){if(N){!q&&W&&function Oe(N,$,U,le){var ue=N;do{0===ue.z&&(ue.z=De(ue.x,ue.y,$,U,le)),ue.prevZ=ue.prev,ue.nextZ=ue.next,ue=ue.next}while(ue!==N);ue.prevZ.nextZ=null,ue.prevZ=null,function pe(N){var $,U,le,ue,W,q,j,Y,Q=1;do{for(U=N,N=null,W=null,q=0;U;){for(q++,le=U,j=0,$=0;$<Q&&(j++,le=le.nextZ);$++);for(Y=Q;j>0||Y>0&&le;)0!==j&&(0===Y||!le||U.z<=le.z)?(ue=U,U=U.nextZ,j--):(ue=le,le=le.nextZ,Y--),W?W.nextZ=ue:N=ue,ue.prevZ=W,W=ue;U=le}W.nextZ=null,Q*=2}while(q>1)}(ue)}(N,le,ue,W);for(var Y,Q,j=N;N.prev!==N.next;)if(Y=N.prev,Q=N.next,W?pt(N,le,ue,W):tt(N))$.push(Y.i/U|0),$.push(N.i/U|0),$.push(Q.i/U|0),Pt(N),N=Q.next,j=Q.next;else if((N=Q)===j){q?1===q?ft(N=Ie(ke(N),$,U),$,U,le,ue,W,2):2===q&&ct(N,$,U,le,ue,W):ft(ke(N),$,U,le,ue,W,1);break}}}function tt(N){var $=N.prev,U=N,le=N.next;if(Rt($,U,le)>=0)return!1;for(var ue=$.x,W=U.x,q=le.x,j=$.y,Y=U.y,Q=le.y,ne=ue<W?ue<q?ue:q:W<q?W:q,te=j<Y?j<Q?j:Q:Y<Q?Y:Q,be=ue>W?ue>q?ue:q:W>q?W:q,ie=j>Y?j>Q?j:Q:Y>Q?Y:Q,ge=le.next;ge!==$;){if(ge.x>=ne&&ge.x<=be&&ge.y>=te&&ge.y<=ie&&Tn(ue,j,W,Y,q,Q,ge.x,ge.y)&&Rt(ge.prev,ge,ge.next)>=0)return!1;ge=ge.next}return!0}function pt(N,$,U,le){var ue=N.prev,W=N,q=N.next;if(Rt(ue,W,q)>=0)return!1;for(var j=ue.x,Y=W.x,Q=q.x,ne=ue.y,te=W.y,be=q.y,ie=j<Y?j<Q?j:Q:Y<Q?Y:Q,ge=ne<te?ne<be?ne:be:te<be?te:be,Ne=j>Y?j>Q?j:Q:Y>Q?Y:Q,Ge=ne>te?ne>be?ne:be:te>be?te:be,Ot=De(ie,ge,$,U,le),xt=De(Ne,Ge,$,U,le),Be=N.prevZ,yt=N.nextZ;Be&&Be.z>=Ot&&yt&&yt.z<=xt;){if(Be.x>=ie&&Be.x<=Ne&&Be.y>=ge&&Be.y<=Ge&&Be!==ue&&Be!==q&&Tn(j,ne,Y,te,Q,be,Be.x,Be.y)&&Rt(Be.prev,Be,Be.next)>=0||(Be=Be.prevZ,yt.x>=ie&&yt.x<=Ne&&yt.y>=ge&&yt.y<=Ge&&yt!==ue&&yt!==q&&Tn(j,ne,Y,te,Q,be,yt.x,yt.y)&&Rt(yt.prev,yt,yt.next)>=0))return!1;yt=yt.nextZ}for(;Be&&Be.z>=Ot;){if(Be.x>=ie&&Be.x<=Ne&&Be.y>=ge&&Be.y<=Ge&&Be!==ue&&Be!==q&&Tn(j,ne,Y,te,Q,be,Be.x,Be.y)&&Rt(Be.prev,Be,Be.next)>=0)return!1;Be=Be.prevZ}for(;yt&&yt.z<=xt;){if(yt.x>=ie&&yt.x<=Ne&&yt.y>=ge&&yt.y<=Ge&&yt!==ue&&yt!==q&&Tn(j,ne,Y,te,Q,be,yt.x,yt.y)&&Rt(yt.prev,yt,yt.next)>=0)return!1;yt=yt.nextZ}return!0}function Ie(N,$,U){var le=N;do{var ue=le.prev,W=le.next.next;!An(ue,W)&&Vn(ue,le,le.next,W)&&M(ue,W)&&M(W,ue)&&($.push(ue.i/U|0),$.push(le.i/U|0),$.push(W.i/U|0),Pt(le),Pt(le.next),le=N=W),le=le.next}while(le!==N);return ke(le)}function ct(N,$,U,le,ue,W){var q=N;do{for(var j=q.next.next;j!==q.prev;){if(q.i!==j.i&&Mt(q,j)){var Y=F(q,j);return q=ke(q,q.next),Y=ke(Y,Y.next),ft(q,$,U,le,ue,W,0),void ft(Y,$,U,le,ue,W,0)}j=j.next}q=q.next}while(q!==N)}function Ve(N,$){return N.x-$.x}function qe(N,$){var U=function wt(N,$){var q,U=$,le=N.x,ue=N.y,W=-1/0;do{if(ue<=U.y&&ue>=U.next.y&&U.next.y!==U.y){var j=U.x+(ue-U.y)*(U.next.x-U.x)/(U.next.y-U.y);if(j<=le&&j>W&&(W=j,q=U.x<U.next.x?U:U.next,j===le))return q}U=U.next}while(U!==$);if(!q)return null;var be,Y=q,Q=q.x,ne=q.y,te=1/0;U=q;do{le>=U.x&&U.x>=Q&&le!==U.x&&Tn(ue<ne?le:W,ue,Q,ne,ue<ne?W:le,ue,U.x,U.y)&&(be=Math.abs(ue-U.y)/(le-U.x),M(U,N)&&(be<te||be===te&&(U.x>q.x||U.x===q.x&&zt(q,U)))&&(q=U,te=be)),U=U.next}while(U!==Y);return q}(N,$);if(!U)return $;var le=F(U,N);return ke(le,le.next),ke(U,U.next)}function zt(N,$){return Rt(N.prev,N,$.prev)<0&&Rt($.next,N,N.next)<0}function De(N,$,U,le,ue){return(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=(N-U)*ue|0)|N<<8))|N<<4))|N<<2))|N<<1))|($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=($-le)*ue|0)|$<<8))|$<<4))|$<<2))|$<<1))<<1}function hn(N){var $=N,U=N;do{($.x<U.x||$.x===U.x&&$.y<U.y)&&(U=$),$=$.next}while($!==N);return U}function Tn(N,$,U,le,ue,W,q,j){return(ue-q)*($-j)>=(N-q)*(W-j)&&(N-q)*(le-j)>=(U-q)*($-j)&&(U-q)*(W-j)>=(ue-q)*(le-j)}function Mt(N,$){return N.next.i!==$.i&&N.prev.i!==$.i&&!function Ft(N,$){var U=N;do{if(U.i!==N.i&&U.next.i!==N.i&&U.i!==$.i&&U.next.i!==$.i&&Vn(U,U.next,N,$))return!0;U=U.next}while(U!==N);return!1}(N,$)&&(M(N,$)&&M($,N)&&function ve(N,$){var U=N,le=!1,ue=(N.x+$.x)/2,W=(N.y+$.y)/2;do{U.y>W!=U.next.y>W&&U.next.y!==U.y&&ue<(U.next.x-U.x)*(W-U.y)/(U.next.y-U.y)+U.x&&(le=!le),U=U.next}while(U!==N);return le}(N,$)&&(Rt(N.prev,N,$.prev)||Rt(N,$.prev,$))||An(N,$)&&Rt(N.prev,N,N.next)>0&&Rt($.prev,$,$.next)>0)}function Rt(N,$,U){return($.y-N.y)*(U.x-$.x)-($.x-N.x)*(U.y-$.y)}function An(N,$){return N.x===$.x&&N.y===$.y}function Vn(N,$,U,le){var ue=Le(Rt(N,$,U)),W=Le(Rt(N,$,le)),q=Le(Rt(U,le,N)),j=Le(Rt(U,le,$));return!!(ue!==W&&q!==j||0===ue&&Qe(N,U,$)||0===W&&Qe(N,le,$)||0===q&&Qe(U,N,le)||0===j&&Qe(U,$,le))}function Qe(N,$,U){return $.x<=Math.max(N.x,U.x)&&$.x>=Math.min(N.x,U.x)&&$.y<=Math.max(N.y,U.y)&&$.y>=Math.min(N.y,U.y)}function Le(N){return N>0?1:N<0?-1:0}function M(N,$){return Rt(N.prev,N,N.next)<0?Rt(N,$,N.next)>=0&&Rt(N,N.prev,$)>=0:Rt(N,$,N.prev)<0||Rt(N,N.next,$)<0}function F(N,$){var U=new dn(N.i,N.x,N.y),le=new dn($.i,$.x,$.y),ue=N.next,W=$.prev;return N.next=$,$.prev=N,U.next=ue,ue.prev=U,le.next=U,U.prev=le,W.next=le,le.prev=W,le}function Ke(N,$,U,le){var ue=new dn(N,$,U);return le?(ue.next=le.next,ue.prev=le,le.next.prev=ue,le.next=ue):(ue.prev=ue,ue.next=ue),ue}function Pt(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function dn(N,$,U){this.i=N,this.x=$,this.y=U,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nn(N,$,U,le){for(var ue=0,W=$,q=U-le;W<U;W+=le)ue+=(N[q]-N[W])*(N[W+1]+N[q+1]),q=W;return ue}jt.exports=Ze,jt.exports.default=Ze,Ze.deviation=function(N,$,U,le){var ue=$&&$.length,q=Math.abs(nn(N,0,ue?$[0]*U:N.length,U));if(ue)for(var j=0,Y=$.length;j<Y;j++)q-=Math.abs(nn(N,$[j]*U,j<Y-1?$[j+1]*U:N.length,U));var te=0;for(j=0;j<le.length;j+=3){var be=le[j]*U,ie=le[j+1]*U,ge=le[j+2]*U;te+=Math.abs((N[be]-N[ge])*(N[ie+1]-N[be+1])-(N[be]-N[ie])*(N[ge+1]-N[be+1]))}return 0===q&&0===te?0:Math.abs((te-q)/q)},Ze.flatten=function(N){for(var $=N[0][0].length,U={vertices:[],holes:[],dimensions:$},le=0,ue=0;ue<N.length;ue++){for(var W=0;W<N[ue].length;W++)for(var q=0;q<$;q++)U.vertices.push(N[ue][W][q]);ue>0&&U.holes.push(le+=N[ue-1].length)}return U}},5:jt=>{"use strict";var Ze=Object.prototype.hasOwnProperty,je="~";function ke(){}function ft(ct,et,Ve){this.fn=ct,this.context=et,this.once=Ve||!1}function tt(ct,et,Ve,qe,wt){if("function"!=typeof Ve)throw new TypeError("The listener must be a function");var zt=new ft(Ve,qe||ct,wt),Oe=je?je+et:et;return ct._events[Oe]?ct._events[Oe].fn?ct._events[Oe]=[ct._events[Oe],zt]:ct._events[Oe].push(zt):(ct._events[Oe]=zt,ct._eventsCount++),ct}function pt(ct,et){0==--ct._eventsCount?ct._events=new ke:delete ct._events[et]}function Ie(){this._events=new ke,this._eventsCount=0}Object.create&&(ke.prototype=Object.create(null),(new ke).__proto__||(je=!1)),Ie.prototype.eventNames=function(){var Ve,qe,et=[];if(0===this._eventsCount)return et;for(qe in Ve=this._events)Ze.call(Ve,qe)&&et.push(je?qe.slice(1):qe);return Object.getOwnPropertySymbols?et.concat(Object.getOwnPropertySymbols(Ve)):et},Ie.prototype.listeners=function(et){var qe=this._events[je?je+et:et];if(!qe)return[];if(qe.fn)return[qe.fn];for(var wt=0,zt=qe.length,Oe=new Array(zt);wt<zt;wt++)Oe[wt]=qe[wt].fn;return Oe},Ie.prototype.listenerCount=function(et){var qe=this._events[je?je+et:et];return qe?qe.fn?1:qe.length:0},Ie.prototype.emit=function(et,Ve,qe,wt,zt,Oe){var pe=je?je+et:et;if(!this._events[pe])return!1;var Tn,Mt,De=this._events[pe],hn=arguments.length;if(De.fn){switch(De.once&&this.removeListener(et,De.fn,void 0,!0),hn){case 1:return De.fn.call(De.context),!0;case 2:return De.fn.call(De.context,Ve),!0;case 3:return De.fn.call(De.context,Ve,qe),!0;case 4:return De.fn.call(De.context,Ve,qe,wt),!0;case 5:return De.fn.call(De.context,Ve,qe,wt,zt),!0;case 6:return De.fn.call(De.context,Ve,qe,wt,zt,Oe),!0}for(Mt=1,Tn=new Array(hn-1);Mt<hn;Mt++)Tn[Mt-1]=arguments[Mt];De.fn.apply(De.context,Tn)}else{var An,Rt=De.length;for(Mt=0;Mt<Rt;Mt++)switch(De[Mt].once&&this.removeListener(et,De[Mt].fn,void 0,!0),hn){case 1:De[Mt].fn.call(De[Mt].context);break;case 2:De[Mt].fn.call(De[Mt].context,Ve);break;case 3:De[Mt].fn.call(De[Mt].context,Ve,qe);break;case 4:De[Mt].fn.call(De[Mt].context,Ve,qe,wt);break;default:if(!Tn)for(An=1,Tn=new Array(hn-1);An<hn;An++)Tn[An-1]=arguments[An];De[Mt].fn.apply(De[Mt].context,Tn)}}return!0},Ie.prototype.on=function(et,Ve,qe){return tt(this,et,Ve,qe,!1)},Ie.prototype.once=function(et,Ve,qe){return tt(this,et,Ve,qe,!0)},Ie.prototype.removeListener=function(et,Ve,qe,wt){var zt=je?je+et:et;if(!this._events[zt])return this;if(!Ve)return pt(this,zt),this;var Oe=this._events[zt];if(Oe.fn)Oe.fn===Ve&&(!wt||Oe.once)&&(!qe||Oe.context===qe)&&pt(this,zt);else{for(var pe=0,De=[],hn=Oe.length;pe<hn;pe++)(Oe[pe].fn!==Ve||wt&&!Oe[pe].once||qe&&Oe[pe].context!==qe)&&De.push(Oe[pe]);De.length?this._events[zt]=1===De.length?De[0]:De:pt(this,zt)}return this},Ie.prototype.removeAllListeners=function(et){var Ve;return et?this._events[Ve=je?je+et:et]&&pt(this,Ve):(this._events=new ke,this._eventsCount=0),this},Ie.prototype.off=Ie.prototype.removeListener,Ie.prototype.addListener=Ie.prototype.on,Ie.prefixed=je,Ie.EventEmitter=Ie,jt.exports=Ie},521:(jt,Ze,je)=>{var ke;!function(ft,tt,pt){if(ft){for(var qe,Ie={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},ct={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},et={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},Ve={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},wt=1;wt<20;++wt)Ie[111+wt]="f"+wt;for(wt=0;wt<=9;++wt)Ie[wt+96]=wt.toString();Ft.prototype.bind=function(M,ve,F){return this._bindMultiple.call(this,M=M instanceof Array?M:[M],ve,F),this},Ft.prototype.unbind=function(M,ve){return this.bind.call(this,M,function(){},ve)},Ft.prototype.trigger=function(M,ve){var F=this;return F._directMap[M+":"+ve]&&F._directMap[M+":"+ve]({},M),F},Ft.prototype.reset=function(){var M=this;return M._callbacks={},M._directMap={},M},Ft.prototype.stopCallback=function(M,ve){if((" "+ve.className+" ").indexOf(" mousetrap ")>-1||Le(ve,this.target))return!1;if("composedPath"in M&&"function"==typeof M.composedPath){var Ke=M.composedPath()[0];Ke!==M.target&&(ve=Ke)}return"INPUT"==ve.tagName||"SELECT"==ve.tagName||"TEXTAREA"==ve.tagName||ve.isContentEditable},Ft.prototype.handleKey=function(){var M=this;return M._handleKey.apply(M,arguments)},Ft.addKeycodes=function(M){for(var ve in M)M.hasOwnProperty(ve)&&(Ie[ve]=M[ve]);qe=null},Ft.init=function(){var M=Ft(tt);for(var ve in M)"_"!==ve.charAt(0)&&(Ft[ve]=function(F){return function(){return M[F].apply(M,arguments)}}(ve))},Ft.init(),ft.Mousetrap=Ft,jt.exports&&(jt.exports=Ft),void 0!==(ke=function(){return Ft}.call(Ze,je,Ze,jt))&&(jt.exports=ke)}function zt(M,ve,F){M.addEventListener?M.addEventListener(ve,F,!1):M.attachEvent("on"+ve,F)}function Oe(M){if("keypress"==M.type){var ve=String.fromCharCode(M.which);return M.shiftKey||(ve=ve.toLowerCase()),ve}return Ie[M.which]?Ie[M.which]:ct[M.which]?ct[M.which]:String.fromCharCode(M.which).toLowerCase()}function pe(M,ve){return M.sort().join(",")===ve.sort().join(",")}function Mt(M){return"shift"==M||"ctrl"==M||"alt"==M||"meta"==M}function An(M,ve,F){return F||(F=function Rt(){if(!qe)for(var M in qe={},Ie)M>95&&M<112||Ie.hasOwnProperty(M)&&(qe[Ie[M]]=M);return qe}()[M]?"keydown":"keypress"),"keypress"==F&&ve.length&&(F="keydown"),F}function Qe(M,ve){var F,Ke,Pt,dn=[];for(F=function Vn(M){return"+"===M?["+"]:(M=M.replace(/\+{2}/g,"+plus")).split("+")}(M),Pt=0;Pt<F.length;++Pt)Ve[Ke=F[Pt]]&&(Ke=Ve[Ke]),ve&&"keypress"!=ve&&et[Ke]&&(Ke=et[Ke],dn.push("shift")),Mt(Ke)&&dn.push(Ke);return{key:Ke,modifiers:dn,action:ve=An(Ke,dn,ve)}}function Le(M,ve){return null!==M&&M!==tt&&(M===ve||Le(M.parentNode,ve))}function Ft(M){var ve=this;if(M=M||tt,!(ve instanceof Ft))return new Ft(M);ve.target=M,ve._callbacks={},ve._directMap={};var Ke,F={},Pt=!1,dn=!1,nn=!1;function N(j){j=j||{};var Q,Y=!1;for(Q in F)j[Q]?Y=!0:F[Q]=0;Y||(nn=!1)}function $(j,Y,Q,ne,te,be){var ie,ge,Ne=[],Ge=Q.type;if(!ve._callbacks[j])return[];for("keyup"==Ge&&Mt(j)&&(Y=[j]),ie=0;ie<ve._callbacks[j].length;++ie)ge=ve._callbacks[j][ie],!ne&&ge.seq&&F[ge.seq]!=ge.level||Ge!=ge.action||("keypress"!=Ge||Q.metaKey||Q.ctrlKey)&&!pe(Y,ge.modifiers)||((!ne&&ge.combo==te||ne&&ge.seq==ne&&ge.level==be)&&ve._callbacks[j].splice(ie,1),Ne.push(ge));return Ne}function U(j,Y,Q,ne){ve.stopCallback(Y,Y.target||Y.srcElement,Q,ne)||!1===j(Y,Q)&&(function hn(M){M.preventDefault?M.preventDefault():M.returnValue=!1}(Y),function Tn(M){M.stopPropagation?M.stopPropagation():M.cancelBubble=!0}(Y))}function le(j){"number"!=typeof j.which&&(j.which=j.keyCode);var Y=Oe(j);if(Y){if("keyup"==j.type&&Pt===Y)return void(Pt=!1);ve.handleKey(Y,function De(M){var ve=[];return M.shiftKey&&ve.push("shift"),M.altKey&&ve.push("alt"),M.ctrlKey&&ve.push("ctrl"),M.metaKey&&ve.push("meta"),ve}(j),j)}}function q(j,Y,Q,ne,te){ve._directMap[j+":"+Q]=Y;var ie,be=(j=j.replace(/\s+/g," ")).split(" ");be.length>1?function W(j,Y,Q,ne){function te(Ge){return function(){nn=Ge,++F[j],function ue(){clearTimeout(Ke),Ke=setTimeout(N,1e3)}()}}function be(Ge){U(Q,Ge,j),"keyup"!==ne&&(Pt=Oe(Ge)),setTimeout(N,10)}F[j]=0;for(var ie=0;ie<Y.length;++ie){var Ne=ie+1===Y.length?be:te(ne||Qe(Y[ie+1]).action);q(Y[ie],Ne,ne,j,ie)}}(j,be,Y,Q):(ie=Qe(j,Q),ve._callbacks[ie.key]=ve._callbacks[ie.key]||[],$(ie.key,ie.modifiers,{type:ie.action},ne,j,te),ve._callbacks[ie.key][ne?"unshift":"push"]({callback:Y,modifiers:ie.modifiers,action:ie.action,seq:ne,level:te,combo:j}))}ve._handleKey=function(j,Y,Q){var te,ne=$(j,Y,Q),be={},ie=0,ge=!1;for(te=0;te<ne.length;++te)ne[te].seq&&(ie=Math.max(ie,ne[te].level));for(te=0;te<ne.length;++te)if(ne[te].seq){if(ne[te].level!=ie)continue;ge=!0,be[ne[te].seq]=1,U(ne[te].callback,Q,ne[te].combo,ne[te].seq)}else ge||U(ne[te].callback,Q,ne[te].combo);var Ne="keypress"==Q.type&&dn;Q.type==nn&&!Mt(j)&&!Ne&&N(be),dn=ge&&"keydown"==Q.type},ve._bindMultiple=function(j,Y,Q){for(var ne=0;ne<j.length;++ne)q(j[ne],Y,Q)},zt(M,"keypress",le),zt(M,"keydown",le),zt(M,"keyup",le)}}(typeof window<"u"?window:null,typeof window<"u"?document:null)},516:jt=>{"use strict";function Ze(je,ke){return Object.prototype.hasOwnProperty.call(je,ke)}jt.exports=function(je,ke,ft,tt){ft=ft||"=";var pt={};if("string"!=typeof je||0===je.length)return pt;var Ie=/\+/g;je=je.split(ke=ke||"&");var ct=1e3;tt&&"number"==typeof tt.maxKeys&&(ct=tt.maxKeys);var et=je.length;ct>0&&et>ct&&(et=ct);for(var Ve=0;Ve<et;++Ve){var zt,Oe,pe,De,qe=je[Ve].replace(Ie,"%20"),wt=qe.indexOf(ft);wt>=0?(zt=qe.substr(0,wt),Oe=qe.substr(wt+1)):(zt=qe,Oe=""),pe=decodeURIComponent(zt),De=decodeURIComponent(Oe),Ze(pt,pe)?Array.isArray(pt[pe])?pt[pe].push(De):pt[pe]=[pt[pe],De]:pt[pe]=De}return pt}},776:jt=>{"use strict";var Ze=function(je){switch(typeof je){case"string":return je;case"boolean":return je?"true":"false";case"number":return isFinite(je)?je:"";default:return""}};jt.exports=function(je,ke,ft,tt){return ke=ke||"&",ft=ft||"=",null===je&&(je=void 0),"object"==typeof je?Object.keys(je).map(function(pt){var Ie=encodeURIComponent(Ze(pt))+ft;return Array.isArray(je[pt])?je[pt].map(function(ct){return Ie+encodeURIComponent(Ze(ct))}).join(ke):Ie+encodeURIComponent(Ze(je[pt]))}).join(ke):tt?encodeURIComponent(Ze(tt))+ft+encodeURIComponent(Ze(je)):""}},137:(jt,Ze,je)=>{"use strict";Ze.decode=Ze.parse=je(516),Ze.encode=Ze.stringify=je(776)},578:function(jt,Ze,je){var ke,ft;jt=je.nmd(jt),function(tt){var pt={function:!0,object:!0};function Ie(De){return De&&De.Object===Object?De:null}var Ve=Ie((pt[typeof Ze]&&Ze&&!Ze.nodeType?Ze:null)&&(pt.object&&jt&&!jt.nodeType?jt:null)&&"object"==typeof global&&global),qe=Ie(pt[typeof self]&&self),wt=Ie(pt[typeof window]&&window),Oe=Ie(pt[typeof this]&&this),pe=Ve||wt!==(Oe&&Oe.window)&&wt||qe||Oe||Function("return this")();ke=[je(149)],void 0!==(ft=function(De,hn){return tt(pe,hn,De)}.apply(Ze,ke))&&(jt.exports=ft)}.call(this,function(tt,pt,Ie,ct){var Ve=Ie.ObservableBase,qe=Ie.internals.AbstractObserver,Mt=Ie.Subject,An=Ie.DOM={},Ft=Ie.internals.inherits;function Pt(j,Y,Q,ne){j&&(Y&&(Y.onNext(),Y.onCompleted()),Q?j.close(Q,ne):j.close())}var dn=function(j){function Y(ge,Ne,Ge,Ot,xt){this._state=ge,this._url=Ne,this._protocol=Ge,this._open=Ot,this._close=xt,j.call(this)}function ie(ge,Ne,Ge,Ot,xt){this._socket=ge,this._msgFn=Ne,this._errFn=Ge,this._closeFn=Ot,this._close=xt,this.isDisposed=!1}return Ft(Y,j),ie.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Pt(this._socket,this._close),this._socket.removeEventListener("message",this._msgFn,!1),this._socket.removeEventListener("error",this._errFn,!1),this._socket.removeEventListener("close",this._closeFn,!1))},Y.prototype.subscribeCore=function(ge){this._state.socket=this._protocol?new WebSocket(this._url,this._protocol):new WebSocket(this._url);var Ne=function Q(ge,Ne){return function Ge(Ot){ge.onNext(Ot),ge.onCompleted(),Ne.removeEventListener("open",Ge,!1)}}(this._open,this._state.socket),Ge=function ne(ge){return function(Ge){ge.onNext(Ge)}}(ge),Ot=function te(ge){return function(Ge){ge.onError(Ge)}}(ge),xt=function be(ge){return function(Ge){if(1e3!==Ge.code||!Ge.wasClean)return ge.onError(Ge);ge.onCompleted()}}(ge);return this._open&&this._state.socket.addEventListener("open",Ne,!1),this._state.socket.addEventListener("message",Ge,!1),this._state.socket.addEventListener("error",Ot,!1),this._state.socket.addEventListener("close",xt,!1),new ie(this._state.socket,Ge,Ot,xt,this._close)},Y}(Ve),nn=function(j){function Y(Q,ne){this._state=Q,this._close=ne,j.call(this)}return Ft(Y,j),Y.prototype.next=function(Q){this._state.socket&&this._state.socket.readyState===WebSocket.OPEN&&this._state.socket.send(Q)},Y.prototype.error=function(Q){if(!Q.code)throw new Error('no code specified. be sure to pass { code: ###, reason: "" } to onError()');Pt(this._state.socket,this._close,Q.code,Q.reason||"")},Y.prototype.completed=function(){Pt(this._state.socket,this._close,1e3,"")},Y}(qe);An.fromWebSocket=function(j,Y,Q,ne){if(!WebSocket)throw new TypeError("WebSocket not implemented in your runtime.");var te={socket:null};return Mt.create(new nn(te,ne),new dn(te,j,Y,Q,ne))};var N=function(j){function Y(Q){this._state=Q,j.call(this)}return Ft(Y,j),Y.prototype.next=function(Q){this._state.worker&&this._state.worker.postMessage(Q)},Y.prototype.error=function(Q){throw Q},Y.prototype.completed=function(){},Y}(qe),$=function(j){function Y(be,ie){this._state=be,this._url=ie,j.call(this)}function te(be,ie,ge){this._w=be,this._msgFn=ie,this._errFn=ge,this.isDisposed=!1}return Ft(Y,j),te.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._w.terminate(),this._w.removeEventListener("message",this._msgFn,!1),this._w.removeEventListener("error",this._errFn,!1))},Y.prototype.subscribeCore=function(be){this._state.worker=new tt.Worker(this._url);var ie=function Q(be){return function(ge){be.onNext(ge)}}(be),ge=function ne(be){return function(ge){be.onError(ge)}}(be);return this._state.worker.addEventListener("message",ie,!1),this._state.worker.addEventListener("error",ge,!1),new te(this._state.worker,ie,ge)},Y}(Ve);An.fromWorker=function(j){if(!tt.Worker)throw new TypeError("Worker not implemented in your runtime.");var Y={worker:null};return Mt.create(new N(Y),new $(Y,j))};var le=function(j){function Y(ne,te){this._target=ne,this._options=te,j.call(this)}function Q(ne){this._m=ne,this.isDisposed=!1}return Ft(Y,j),Q.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._m.disconnect())},Y.prototype.subscribeCore=function(ne){var te=function U(j){return new(tt.MutationObserver||tt.WebKitMutationObserver)(j)}(function(be){ne.onNext(be)});return te.observe(this._target,this._options),new Q(te)},Y}(Ve);An.fromMutationObserver=function(j,Y){if(!tt.MutationObserver&&!tt.WebKitMutationObserver)throw new TypeError("MutationObserver not implemented in your runtime.");return new le(j,Y)};var ue=function(j){function Y(Q){this._opts=Q,j.call(this)}return Ft(Y,j),Y.prototype.subscribeCore=function(Q){tt.navigator.geolocation.getCurrentPosition(function(ne){Q.onNext(ne),Q.onCompleted()},function(ne){Q.onError(ne)},this._opts)},Y}(Ve),W=function(j){function Y(ne){this._opts=ne,j.call(this)}function Q(ne){this._id=ne,this.isDisposed=!1}return Ft(Y,j),Q.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,tt.navigator.geolocation.clearWatch(this._id))},Y.prototype.subscribeCore=function(ne){return new Q(tt.navigator.geolocation.watchPosition(function(be){ne.onNext(be)},function(be){ne.onError(be)},this._opts))},Y}(Ve);Ie.DOM.geolocation={getCurrentPosition:function(j){if(!tt.navigator&&!tt.navigation.geolocation)throw new TypeError("geolocation not available");return new ue(j)},watchPosition:function(j){if(!tt.navigator&&!tt.navigation.geolocation)throw new TypeError("geolocation not available");return new W(j).publish().refCount()}};var q=function(j){function Y(ie,ge,Ne,Ge){this._readerFn=ie,this._file=ge,this._progressObserver=Ne,this._encoding=Ge,j.call(this)}function be(ie,ge,Ne,Ge,Ot){this._r=ie,this._po=ge,this._lFn=Ne,this._eFn=Ge,this._pFn=Ot,this.isDisposed=!1}return Ft(Y,j),be.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._r.readyState===tt.FileReader.LOADING&&this._r.abort(),this._r.removeEventListener("load",this._lFn,!1),this._r.removeEventListener("error",this._eFn,!1),this._po&&this._r.removeEventListener("progress",this._pFn,!1))},Y.prototype.subscribeCore=function(ie){var ge=new tt.FileReader,Ne=function Q(ie,ge){return function(Ge){ge&&ge.onCompleted(),ie.onNext(Ge.target.result),ie.onCompleted()}}(ie,this._progressObserver),Ge=function ne(ie){return function(Ne){ie.onError(Ne.target.error)}}(ie),Ot=function te(ie){return function(Ne){ie.onNext(Ne)}}(this._progressObserver);return ge.addEventListener("load",Ne,!1),ge.addEventListener("error",Ge,!1),this._progressObserver&&ge.addEventListener("progress",Ot,!1),ge[this._readerFn](this._file,this._encoding),new be(ge,this._progressObserver,Ne,Ge,Ot)},Y}(Ve);return An.fromReader=function(j,Y){if(!tt.FileReader)throw new TypeError("FileReader not implemented in your runtime.");return{asArrayBuffer:function(){return new q("readAsArrayBuffer",j,Y)},asBinaryString:function(){return new q("readAsBinaryString",j,Y)},asDataURL:function(){return new q("readAsDataURL",j,Y)},asText:function(Q){return new q("readAsText",j,Y,Q)}}},Ie})},149:function(jt,Ze,je){var ke;jt=je.nmd(jt),function(ft){var tt={function:!0,object:!0};function pt(h){return h&&h.Object===Object?h:null}var h,Ie=tt[typeof Ze]&&Ze&&!Ze.nodeType?Ze:null,ct=tt.object&&jt&&!jt.nodeType?jt:null,et=pt(Ie&&ct&&"object"==typeof global&&global),Ve=pt(tt[typeof self]&&self),qe=pt(tt[typeof window]&&window),wt=ct&&ct.exports===Ie?Ie:null,zt=pt(tt[typeof this]&&this),Oe=et||qe!==(zt&&zt.window)&&qe||Ve||zt||Function("return this")(),pe={internals:{},config:{Promise:Oe.Promise},helpers:{}},De=pe.helpers.noop=function(){},hn=pe.helpers.identity=function(h){return h},Tn=pe.helpers.defaultNow=Date.now,Mt=pe.helpers.defaultComparer=function(h,u){return oe(h,u)},Rt=pe.helpers.defaultSubComparer=function(h,u){return h>u?1:h<u?-1:0},Vn=(pe.helpers.defaultKeySerializer=function(h){return h.toString()},pe.helpers.defaultError=function(h){throw h}),Qe=pe.helpers.isPromise=function(h){return!!h&&"function"!=typeof h.subscribe&&"function"==typeof h.then},Le=pe.helpers.isFunction=((h=function(u){return"function"==typeof u||!1})(/x/)&&(h=function(u){return"function"==typeof u&&"[object Function]"==toString.call(u)}),h);function Ft(h){for(var u=[],d=0,p=h.length;d<p;d++)u.push(h[d]);return u}var M={e:{}},F=pe.internals.tryCatch=function(u){if(!Le(u))throw new TypeError("fn must be a function");return function ve(h){return function(){try{return h.apply(this,arguments)}catch(d){return M.e=d,M}}}(u)};function Ke(h){throw h}pe.config.longStackSupport=!1;var Pt,dn=F(function(){throw new Error})();Pt=!!dn.e&&!!dn.e.stack;var N,nn=q(),$="From previous event:";function ue(h){var u=j(h);if(!u)return!1;var p=u[1];return u[0]===N&&p>=nn&&p<=ta}function W(h){return-1!==h.indexOf("(module.js:")||-1!==h.indexOf("(node.js:")}function q(){if(Pt)try{throw new Error}catch(p){var h=p.stack.split("\n"),d=j(h[0].indexOf("@")>0?h[1]:h[2]);return d?(N=d[0],d[1]):void 0}}function j(h){var u=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(h);if(u)return[u[1],Number(u[2])];var d=/at ([^ ]+):(\d+):(?:\d+)$/.exec(h);if(d)return[d[1],Number(d[2])];var p=/.*@(.+):(\d+)$/.exec(h);return p?[p[1],Number(p[2])]:void 0}var Y=pe.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};Y.prototype=Object.create(Error.prototype),Y.prototype.name="EmptyError";var Q=pe.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};Q.prototype=Object.create(Error.prototype),Q.prototype.name="ObjectDisposedError";var ne=pe.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};ne.prototype=Object.create(Error.prototype),ne.prototype.name="ArgumentOutOfRangeError";var te=pe.NotSupportedError=function(h){this.message=h||"This operation is not supported",Error.call(this)};te.prototype=Object.create(Error.prototype),te.prototype.name="NotSupportedError";var be=pe.NotImplementedError=function(h){this.message=h||"This operation is not implemented",Error.call(this)};be.prototype=Object.create(Error.prototype),be.prototype.name="NotImplementedError";var ie=pe.helpers.notImplemented=function(){throw new be},Ne=(pe.helpers.notSupported=function(){throw new te},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");Oe.Set&&"function"==typeof(new Oe.Set)["@@iterator"]&&(Ne="@@iterator");var Ge=pe.doneEnumerator={done:!0,value:ft},Ot=pe.helpers.isIterable=function(h){return h&&h[Ne]!==ft},xt=pe.helpers.isArrayLike=function(h){return h&&h.length!==ft};pe.helpers.iterator=Ne;var Be=pe.internals.bindCallback=function(h,u,d){if(typeof u>"u")return h;switch(d){case 0:return function(){return h.call(u)};case 1:return function(p){return h.call(u,p)};case 2:return function(p,m){return h.call(u,p,m)};case 3:return function(p,m,b){return h.call(u,p,m,b)}}return function(){return h.apply(u,arguments)}},Ar="[object Arguments]",fr="[object Array]",eo="[object Boolean]",Ir="[object Date]",Fo="[object Error]",xu="[object Number]",Mi="[object Object]",Aa="[object RegExp]",Ll="[object String]",yn={};yn["[object Float32Array]"]=yn["[object Float64Array]"]=yn["[object Int8Array]"]=yn["[object Int16Array]"]=yn["[object Int32Array]"]=yn["[object Uint8Array]"]=yn["[object Uint8ClampedArray]"]=yn["[object Uint16Array]"]=yn["[object Uint32Array]"]=!0,yn[Ar]=yn[fr]=yn["[object ArrayBuffer]"]=yn[eo]=yn[Ir]=yn[Fo]=yn["[object Function]"]=yn["[object Map]"]=yn[xu]=yn[Mi]=yn[Aa]=yn["[object Set]"]=yn[Ll]=yn["[object WeakMap]"]=!1;var Gi=Object.prototype,Uo=Gi.hasOwnProperty,Fe=Gi.toString,Cs=Math.pow(2,53)-1,Ds=Object.keys||function(){var h=Object.prototype.hasOwnProperty,u=!{toString:null}.propertyIsEnumerable("toString"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],p=d.length;return function(m){if("object"!=typeof m&&("function"!=typeof m||null===m))throw new TypeError("Object.keys called on non-object");var C,A,b=[];for(C in m)h.call(m,C)&&b.push(C);if(u)for(A=0;A<p;A++)h.call(m,d[A])&&b.push(d[A]);return b}}();function Ei(h,u,d,p,m,b){var C=Ds(h),A=C.length;if(A!==Ds(u).length&&!p)return!1;for(var re,z=A;z--;)if(re=C[z],!(p?re in u:Uo.call(u,re)))return!1;for(var xe=p;++z<A;){if(re=C[z],void 0!==ft||!d(h[re],u[re],p,m,b))return!1;xe||(xe="constructor"===re)}if(!xe){var vt=h.constructor,nt=u.constructor;if(vt!==nt&&"constructor"in h&&"constructor"in u&&!("function"==typeof vt&&vt instanceof vt&&"function"==typeof nt&&nt instanceof nt))return!1}return!0}var tc=pe.internals.isObject=function(h){var u=typeof h;return!!h&&("object"===u||"function"===u)};function jo(h){return!!h&&"object"==typeof h}function Ul(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=Cs}var x=function(){try{Object({toString:0}+"")}catch{return function(){return!1}}return function(h){return"function"!=typeof h.toString&&"string"==typeof(h+"")}}(),D=Array.isArray||function(h){return jo(h)&&Ul(h.length)&&Fe.call(h)===fr};function P(h,u){for(var d=-1,p=h.length;++d<p;)if(u(h[d],d,h))return!0;return!1}function B(h,u,d,p,m,b){var C=-1,A=h.length,L=u.length;if(A!==L&&!(p&&L>A))return!1;for(;++C<A;){var X=h[C],z=u[C];if(void 0!==ft)return!1;if(p){if(!P(u,function(xe){return X===xe||d(X,xe,p,m,b)}))return!1}else if(X!==z&&!d(X,z,p,m,b))return!1}return!0}function H(h,u,d,p,m,b){var C=D(h),A=D(u),L=fr,X=fr;C||((L=Fe.call(h))===Ar?L=Mi:L!==Mi&&(C=function w(h){return jo(h)&&Ul(h.length)&&!!yn[Fe.call(h)]}(h))),A||(X=Fe.call(u))===Ar&&(X=Mi);var z=L===Mi&&!x(h),re=X===Mi&&!x(u),xe=L===X;if(xe&&!C&&!z)return function Du(h,u,d){switch(d){case eo:case Ir:return+h==+u;case Fo:return h.name===u.name&&h.message===u.message;case xu:return h!==+h?u!==+u:h===+u;case Aa:case Ll:return h===u+""}return!1}(h,u,L);if(!p){var at=z&&Uo.call(h,"__wrapped__"),Je=re&&Uo.call(u,"__wrapped__");if(at||Je)return d(at?h.value():h,Je?u.value():u,p,m,b)}if(!xe)return!1;m||(m=[]),b||(b=[]);for(var dt=m.length;dt--;)if(m[dt]===h)return b[dt]===u;m.push(h),b.push(u);var vt=(C?B:Ei)(h,u,d,p,m,b);return m.pop(),b.pop(),vt}function G(h,u,d,p,m){return h===u||(null==h||null==u||!tc(h)&&!jo(u)?h!=h&&u!=u:H(h,u,G,d,p,m))}var oe=pe.internals.isEqual=function(h,u){return G(h,u)},O=pe.internals.inherits=function(h,u){function d(){this.constructor=h}d.prototype=u.prototype,h.prototype=new d},Me=pe.internals.addProperties=function(h){for(var u=[],d=1,p=arguments.length;d<p;d++)u.push(arguments[d]);for(var m=0,b=u.length;m<b;m++){var C=u[m];for(var A in C)h[A]=C[A]}},st=pe.internals.addRef=function(h,u){return new Qt(function(d){return new rt(u.getDisposable(),h.subscribe(d))})};function Et(h,u){for(var d=new Array(h),p=0;p<h;p++)d[p]=u();return d}function Ct(h,u){this.id=h,this.value=u}Ct.prototype.compareTo=function(h){var u=this.value.compareTo(h.value);return 0===u&&(u=this.id-h.id),u};var rn=pe.internals.PriorityQueue=function(h){this.items=new Array(h),this.length=0},Tt=rn.prototype;Tt.isHigherPriority=function(h,u){return this.items[h].compareTo(this.items[u])<0},Tt.percolate=function(h){if(!(h>=this.length||h<0)){var u=h-1>>1;if(!(u<0||u===h)&&this.isHigherPriority(h,u)){var d=this.items[h];this.items[h]=this.items[u],this.items[u]=d,this.percolate(u)}}},Tt.heapify=function(h){if(+h||(h=0),!(h>=this.length||h<0)){var u=2*h+1,d=2*h+2,p=h;if(u<this.length&&this.isHigherPriority(u,p)&&(p=u),d<this.length&&this.isHigherPriority(d,p)&&(p=d),p!==h){var m=this.items[h];this.items[h]=this.items[p],this.items[p]=m,this.heapify(p)}}},Tt.peek=function(){return this.items[0].value},Tt.removeAt=function(h){this.items[h]=this.items[--this.length],this.items[this.length]=ft,this.heapify()},Tt.dequeue=function(){var h=this.peek();return this.removeAt(0),h},Tt.enqueue=function(h){var u=this.length++;this.items[u]=new Ct(rn.count++,h),this.percolate(u)},Tt.remove=function(h){for(var u=0;u<this.length;u++)if(this.items[u].value===h)return this.removeAt(u),!0;return!1},rn.count=0;var ot=pe.CompositeDisposable=function(){var u,d,h=[];if(Array.isArray(arguments[0]))h=arguments[0];else for(d=arguments.length,h=new Array(d),u=0;u<d;u++)h[u]=arguments[u];this.disposables=h,this.isDisposed=!1,this.length=h.length},Kt=ot.prototype;Kt.add=function(h){this.isDisposed?h.dispose():(this.disposables.push(h),this.length++)},Kt.remove=function(h){var u=!1;if(!this.isDisposed){var d=this.disposables.indexOf(h);-1!==d&&(u=!0,this.disposables.splice(d,1),this.length--,h.dispose())}return u},Kt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var h=this.disposables.length,u=new Array(h),d=0;d<h;d++)u[d]=this.disposables[d];for(this.disposables=[],this.length=0,d=0;d<h;d++)u[d].dispose()}};var Yt=pe.Disposable=function(h){this.isDisposed=!1,this.action=h||De};Yt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Bt=Yt.create=function(h){return new Yt(h)},ze=Yt.empty={dispose:De},ht=Yt.isDisposable=function(h){return h&&Le(h.dispose)},Ue=Yt.checkDisposed=function(h){if(h.isDisposed)throw new Q},$t=Yt._fixup=function(h){return ht(h)?h:ze},we=pe.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};we.prototype.getDisposable=function(){return this.current},we.prototype.setDisposable=function(h){if(this.current)throw new Error("Disposable has already been assigned");var u=this.isDisposed;!u&&(this.current=h),u&&h&&h.dispose()},we.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this.current;this.current=null,h&&h.dispose()}};var gt=pe.SerialDisposable=function(){this.isDisposed=!1,this.current=null};gt.prototype.getDisposable=function(){return this.current},gt.prototype.setDisposable=function(h){var u=this.isDisposed;if(!u){var d=this.current;this.current=h}d&&d.dispose(),u&&h&&h.dispose()},gt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this.current;this.current=null}h&&h.dispose()};var rt=pe.BinaryDisposable=function(h,u){this._first=h,this._second=u,this.isDisposed=!1};rt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var h=this._first;this._first=null,h&&h.dispose();var u=this._second;this._second=null,u&&u.dispose()}};var On=pe.NAryDisposable=function(h){this._disposables=h,this.isDisposed=!1};On.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var h=0,u=this._disposables.length;h<u;h++)this._disposables[h].dispose();this._disposables.length=0}};var Vt=pe.RefCountDisposable=function(){function h(d){this.disposable=d,this.disposable.count++,this.isInnerDisposed=!1}function u(d){this.underlyingDisposable=d,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return h.prototype.dispose=function(){!this.disposable.isDisposed&&!this.isInnerDisposed&&(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},u.prototype.dispose=function(){!this.isDisposed&&!this.isPrimaryDisposed&&(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},u.prototype.getDisposable=function(){return this.isDisposed?ze:new h(this)},u}();function Mr(h,u){this.scheduler=h,this.disposable=u,this.isDisposed=!1}function ln(h,u){u.isDisposed||(u.isDisposed=!0,u.disposable.dispose())}Mr.prototype.dispose=function(){this.scheduler.schedule(this,ln)};var pr=pe.internals.ScheduledItem=function(h,u,d,p,m){this.scheduler=h,this.state=u,this.action=d,this.dueTime=p,this.comparer=m||Rt,this.disposable=new we};pr.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},pr.prototype.compareTo=function(h){return this.comparer(this.dueTime,h.dueTime)},pr.prototype.isCancelled=function(){return this.disposable.isDisposed},pr.prototype.invokeCore=function(){return $t(this.action(this.scheduler,this.state))};var Pi=pe.Scheduler=function(){function h(){}h.isScheduler=function(d){return d instanceof h};var u=h.prototype;return u.schedule=function(d,p){throw new be},u.scheduleFuture=function(d,p,m){var b=p;return b instanceof Date&&(b-=this.now()),0===(b=h.normalize(b))?this.schedule(d,m):this._scheduleFuture(d,b,m)},u._scheduleFuture=function(d,p,m){throw new be},h.now=Tn,h.prototype.now=Tn,h.normalize=function(d){return d<0&&(d=0),d},h}(),jl=Pi.normalize,Ce=Pi.isScheduler;(function(h){function u(p,m){var b=m[0],C=m[1],A=new ot;return C(b,function L(X){var z=!1,re=!1,xe=p.schedule(X,function at(Je,dt){return z?A.remove(xe):re=!0,C(dt,L),ze});re||(A.add(xe),z=!0)}),A}function d(p,m){var b=m[0],C=m[1],A=new ot;return C(b,function L(X,z){var re=!1,xe=!1,at=p.scheduleFuture(X,z,function Je(dt,vt){return re?A.remove(at):xe=!0,C(vt,L),ze});xe||(A.add(at),re=!0)}),A}h.scheduleRecursive=function(p,m){return this.schedule([p,m],u)},h.scheduleRecursiveFuture=function(p,m,b){return this.scheduleFuture([p,b],m,d)}})(Pi.prototype),function(h){h.schedulePeriodic=function(u,d,p){if(typeof Oe.setInterval>"u")throw new te;d=jl(d);var m=u,b=Oe.setInterval(function(){m=p(m)},d);return Bt(function(){Oe.clearInterval(b)})}}(Pi.prototype),function(h){h.catchError=h.catch=function(u){return new $i(this,u)}}(Pi.prototype);var gr,Lt,Su=pe.internals.SchedulePeriodicRecursive=function(){function u(d,p,m,b){this._scheduler=d,this._state=p,this._period=m,this._action=b}return u.prototype.start=function(){var d=new we;return this._cancel=d,d.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,function h(d){return function(m,b){b(0,d._period);var C=F(d._action)(d._state);C===M&&(d._cancel.dispose(),Ke(C.e)),d._state=C}}(this))),d},u}(),Tu=function(h){function u(){h.call(this)}return O(u,h),u.prototype.schedule=function(d,p){return $t(p(this,d))},u}(Pi),zi=Pi.immediate=new Tu,Yd=function(h){var u;function d(){for(;u.length>0;){var m=u.dequeue();!m.isCancelled()&&m.invoke()}}function p(){h.call(this)}return O(p,h),p.prototype.schedule=function(m,b){var C=new pr(this,m,b,this.now());if(u)u.enqueue(C);else{(u=new rn(4)).enqueue(C);var A=F(d)();u=null,A===M&&Ke(A.e)}return C.disposable},p.prototype.scheduleRequired=function(){return!u},p}(Pi),Ee=Pi.currentThread=new Yd,bn=function(){var h,u=De;if(Oe.setTimeout)h=Oe.setTimeout,u=Oe.clearTimeout;else{if(!Oe.WScript)throw new te;h=function(d,p){Oe.WScript.Sleep(p),d()}}return{setTimeout:h,clearTimeout:u}}(),Au=bn.setTimeout,lx=bn.clearTimeout;!function(){var h=1,u={},d=!1;function p(z){if(d)Au(function(){p(z)},0);else{var re=u[z];if(re){d=!0;var xe=F(re)();Lt(z),d=!1,xe===M&&Ke(xe.e)}}}Lt=function(z){delete u[z]};var m=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),b="function"==typeof(b=et&&wt&&et.setImmediate)&&!m.test(b)&&b;if(Le(b))gr=function(z){var re=h++;return u[re]=z,b(function(){p(re)}),re};else if(typeof process<"u"&&"[object process]"==={}.toString.call(process))gr=function(z){var re=h++;return u[re]=z,process.nextTick(function(){p(re)}),re};else if(function C(){if(!Oe.postMessage||Oe.importScripts)return!1;var z=!1,re=Oe.onmessage;return Oe.onmessage=function(){z=!0},Oe.postMessage("","*"),Oe.onmessage=re,z}()){var A="ms.rx.schedule"+Math.random();Oe.addEventListener("message",function(z){"string"==typeof z.data&&z.data.substring(0,A.length)===A&&p(z.data.substring(A.length))},!1),gr=function(z){var re=h++;return u[re]=z,Oe.postMessage(A+re,"*"),re}}else if(Oe.MessageChannel){var X=new Oe.MessageChannel;X.port1.onmessage=function(z){p(z.data)},gr=function(z){var re=h++;return u[re]=z,X.port2.postMessage(re),re}}else gr="document"in Oe&&"onreadystatechange"in Oe.document.createElement("script")?function(z){var re=Oe.document.createElement("script"),xe=h++;return u[xe]=z,re.onreadystatechange=function(){p(xe),re.onreadystatechange=null,re.parentNode.removeChild(re),re=null},Oe.document.documentElement.appendChild(re),xe}:function(z){var re=h++;return u[re]=z,Au(function(){p(re)},0),re}}();var Bm=function(h){function u(){h.call(this)}function d(C,A,L,X){return function(){C.setDisposable(Yt._fixup(A(L,X)))}}function p(C){this._id=C,this.isDisposed=!1}function m(C){this._id=C,this.isDisposed=!1}return O(u,h),p.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Lt(this._id))},m.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,lx(this._id))},u.prototype.schedule=function(C,A){var L=new we,X=gr(d(L,A,this,C));return new rt(L,new p(X))},u.prototype._scheduleFuture=function(C,A,L){if(0===A)return this.schedule(C,L);var X=new we,z=Au(d(X,L,this,C),A);return new rt(X,new m(z))},u.prototype.scheduleLongRunning=function(C,A){var L=Bt(De);return gr(function b(C,A,L){return function(){A(C,L)}}(C,A,L)),L},u}(Pi),Cn=Pi.default=Pi.async=new Bm,$i=function(h){function u(d,p){this._scheduler=d,this._handler=p,this._recursiveOriginal=null,this._recursiveWrapper=null,h.call(this)}return O(u,h),u.prototype.schedule=function(d,p){return this._scheduler.schedule(d,this._wrap(p))},u.prototype._scheduleFuture=function(d,p,m){return this._scheduler.schedule(d,p,this._wrap(m))},u.prototype.now=function(){return this._scheduler.now()},u.prototype._clone=function(d){return new u(d,this._handler)},u.prototype._wrap=function(d){var p=this;return function(m,b){var C=F(d)(p._getRecursiveWrapper(m),b);return C===M?(p._handler(C.e)||Ke(C.e),ze):$t(C)}},u.prototype._getRecursiveWrapper=function(d){if(this._recursiveOriginal!==d){this._recursiveOriginal=d;var p=this._clone(d);p._recursiveOriginal=d,p._recursiveWrapper=p,this._recursiveWrapper=p}return this._recursiveWrapper},u.prototype.schedulePeriodic=function(d,p,m){var b=this,C=!1,A=new we;return A.setDisposable(this._scheduler.schedulePeriodic(d,p,function(L){if(C)return null;var X=F(m)(L);return X===M?(C=!0,b._handler(X.e)||Ke(X.e),A.dispose(),null):X})),A},u}(Pi),Oi=pe.Notification=function(){function h(){}return h.prototype._accept=function(u,d,p){throw new be},h.prototype._acceptObserver=function(u,d,p){throw new be},h.prototype.accept=function(u,d,p){return u&&"object"==typeof u?this._acceptObserver(u):this._accept(u,d,p)},h.prototype.toObservable=function(u){var d=this;return Ce(u)||(u=zi),new Qt(function(p){return u.schedule(d,function(m,b){b._acceptObserver(p),"N"===b.kind&&p.onCompleted()})})},h}(),Um=function(h){function u(d){this.value=d,this.kind="N"}return O(u,h),u.prototype._accept=function(d){return d(this.value)},u.prototype._acceptObserver=function(d){return d.onNext(this.value)},u.prototype.toString=function(){return"OnNext("+this.value+")"},u}(Oi),cx=function(h){function u(d){this.error=d,this.kind="E"}return O(u,h),u.prototype._accept=function(d,p){return p(this.error)},u.prototype._acceptObserver=function(d){return d.onError(this.error)},u.prototype.toString=function(){return"OnError("+this.error+")"},u}(Oi),Ss=function(h){function u(){this.kind="C"}return O(u,h),u.prototype._accept=function(d,p,m){return m()},u.prototype._acceptObserver=function(d){return d.onCompleted()},u.prototype.toString=function(){return"OnCompleted()"},u}(Oi),jm=Oi.createOnNext=function(h){return new Um(h)},Hm=Oi.createOnError=function(h){return new cx(h)},Vm=Oi.createOnCompleted=function(){return new Ss},vi=pe.Observer=function(){};vi.prototype.toNotifier=function(){var h=this;return function(u){return u.accept(h)}},vi.prototype.asObserver=function(){var h=this;return new Iu(function(u){h.onNext(u)},function(u){h.onError(u)},function(){h.onCompleted()})},vi.prototype.checked=function(){return new ux(this)};var Ts=vi.create=function(h,u,d){return h||(h=De),u||(u=Vn),d||(d=De),new Iu(h,u,d)};vi.fromNotifier=function(h,u){var d=Be(h,u,1);return new Iu(function(p){return d(jm(p))},function(p){return d(Hm(p))},function(){return d(Vm())})},vi.prototype.notifyOn=function(h){return new wn(h,this)},vi.prototype.makeSafe=function(h){return new AnonymousSafeObserver(this._onNext,this._onError,this._onCompleted,h)};var J,Ae=pe.internals.AbstractObserver=function(h){function u(){this.isStopped=!1}return O(u,h),u.prototype.next=ie,u.prototype.error=ie,u.prototype.completed=ie,u.prototype.onNext=function(d){!this.isStopped&&this.next(d)},u.prototype.onError=function(d){this.isStopped||(this.isStopped=!0,this.error(d))},u.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},u.prototype.dispose=function(){this.isStopped=!0},u.prototype.fail=function(d){return!this.isStopped&&(this.isStopped=!0,this.error(d),!0)},u}(vi),Iu=pe.AnonymousObserver=function(h){function u(d,p,m){h.call(this),this._onNext=d,this._onError=p,this._onCompleted=m}return O(u,h),u.prototype.next=function(d){this._onNext(d)},u.prototype.error=function(d){this._onError(d)},u.prototype.completed=function(){this._onCompleted()},u}(Ae),ux=function(h){function u(p){h.call(this),this._observer=p,this._state=0}O(u,h);var d=u.prototype;return d.onNext=function(p){this.checkAccess();var m=F(this._observer.onNext).call(this._observer,p);this._state=0,m===M&&Ke(m.e)},d.onError=function(p){this.checkAccess();var m=F(this._observer.onError).call(this._observer,p);this._state=2,m===M&&Ke(m.e)},d.onCompleted=function(){this.checkAccess();var p=F(this._observer.onCompleted).call(this._observer);this._state=2,p===M&&Ke(p.e)},d.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},u}(vi),Wi=pe.internals.ScheduledObserver=function(h){function u(C,A){h.call(this),this.scheduler=C,this.observer=A,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new gt}function b(C,A){var L;if(C.queue.length>0){L=C.queue.shift();var X=F(L)();if(X===M)return C.queue=[],C.hasFaulted=!0,Ke(X.e);A(C)}else C.isAcquired=!1}return O(u,h),u.prototype.next=function(C){this.queue.push(function d(C,A){return function(){C.onNext(A)}}(this.observer,C))},u.prototype.error=function(C){this.queue.push(function p(C,A){return function(){C.onError(A)}}(this.observer,C))},u.prototype.completed=function(){this.queue.push(function m(C){return function(){C.onCompleted()}}(this.observer))},u.prototype.ensureActive=function(){var C=!1;!this.hasFaulted&&this.queue.length>0&&(C=!this.isAcquired,this.isAcquired=!0),C&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,b))},u.prototype.dispose=function(){h.prototype.dispose.call(this),this.disposable.dispose()},u}(Ae),wn=function(h){function u(d,p,m){h.call(this,d,p),this._cancel=m}return O(u,h),u.prototype.next=function(d){h.prototype.next.call(this,d),this.ensureActive()},u.prototype.error=function(d){h.prototype.error.call(this,d),this.ensureActive()},u.prototype.completed=function(){h.prototype.completed.call(this),this.ensureActive()},u.prototype.dispose=function(){h.prototype.dispose.call(this),this._cancel&&this._cancel.dispose(),this._cancel=null},u}(Wi),Re=pe.Observable=function(){function u(){if(pe.config.longStackSupport&&Pt){var d=this._subscribe,p=F(Ke)(new Error).e;this.stack=p.stack.substring(p.stack.indexOf("\n")+1),this._subscribe=function h(d,p){return function(m){var b=m.onError;return m.onError=function(C){(function U(h,u){if(Pt&&u.stack&&"object"==typeof h&&null!==h&&h.stack&&-1===h.stack.indexOf($)){for(var d=[],p=u;p;p=p.source)p.stack&&d.unshift(p.stack);d.unshift(h.stack);var m=d.join("\n"+$+"\n");h.stack=function le(h){for(var u=h.split("\n"),d=[],p=0,m=u.length;p<m;p++){var b=u[p];!ue(b)&&!W(b)&&b&&d.push(b)}return d.join("\n")}(m)}})(C,d),b.call(m,C)},p.call(d,m)}}(this,d)}}return J=u.prototype,u.isObservable=function(d){return d&&Le(d.subscribe)},J.subscribe=J.forEach=function(d,p,m){return this._subscribe("object"==typeof d?d:Ts(d,p,m))},J.subscribeOnNext=function(d,p){return this._subscribe(Ts(typeof p<"u"?function(m){d.call(p,m)}:d))},J.subscribeOnError=function(d,p){return this._subscribe(Ts(null,typeof p<"u"?function(m){d.call(p,m)}:d))},J.subscribeOnCompleted=function(d,p){return this._subscribe(Ts(null,null,typeof p<"u"?function(){d.call(p)}:d))},u}(),Se=pe.ObservableBase=function(h){function d(m,b){var C=b[0],A=b[1],L=F(A.subscribeCore).call(A,C);L===M&&!C.fail(M.e)&&Ke(M.e),C.setDisposable(function u(m){return m&&Le(m.dispose)?m:Le(m)?Bt(m):ze}(L))}function p(){h.call(this)}return O(p,h),p.prototype._subscribe=function(m){var b=new oo(m),C=[b,this];return Ee.scheduleRequired()?Ee.schedule(C,d):d(0,C),b},p.prototype.subscribeCore=ie,p}(Re),mt=pe.FlatMapObservable=function(h){function u(p,m,b,C){this.resultSelector=Le(b)?b:null,this.selector=Be(Le(m)?m:function(){return m},C,3),this.source=p,h.call(this)}function d(p,m,b,C){this.i=0,this.selector=m,this.resultSelector=b,this.source=C,this.o=p,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this.selector,this.resultSelector,this))},O(d,Ae),d.prototype._wrapResult=function(p,m,b){return this.resultSelector?p.map(function(C,A){return this.resultSelector(m,C,b,A)},this):p},d.prototype.next=function(p){var m=this.i++,b=F(this.selector)(p,m,this.source);if(b===M)return this.o.onError(b.e);Qe(b)&&(b=Wt(b)),(xt(b)||Ot(b))&&(b=Re.from(b)),this.o.onNext(this._wrapResult(b,p,m))},d.prototype.error=function(p){this.o.onError(p)},d.prototype.completed=function(){this.o.onCompleted()},u}(Se),Ho=pe.internals.Enumerable=function(){};function ki(h){this._s=h,this.isDisposed=!1}ki.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var Hl=function(h){function u(m){this.sources=m,h.call(this)}function d(m,b){if(!m.isDisposed){var C=F(m.e.next).call(m.e);if(C===M)return m.o.onError(C.e);if(C.done)return m.o.onCompleted();var A=C.value;Qe(A)&&(A=Wt(A));var L=new we;m.subscription.setDisposable(L),L.setDisposable(A.subscribe(new p(m,b)))}}function p(m,b){this._state=m,this._recurse=b,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(m){var b=new gt,C={isDisposed:!1,o:m,subscription:b,e:this.sources[Ne]()},A=Ee.scheduleRecursive(C,d);return new On([b,A,new ki(C)])},O(p,Ae),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.o.onError(m)},p.prototype.completed=function(){this._recurse(this._state)},u}(Se);Ho.prototype.concat=function(){return new Hl(this)};var Gm=function(h){function u(m){this.sources=m,h.call(this)}function d(m,b){if(!m.isDisposed){var C=F(m.e.next).call(m.e);if(C===M)return m.o.onError(C.e);if(C.done)return null!==m.lastError?m.o.onError(m.lastError):m.o.onCompleted();var A=C.value;Qe(A)&&(A=Wt(A));var L=new we;m.subscription.setDisposable(L),L.setDisposable(A.subscribe(new p(m,b)))}}function p(m,b){this._state=m,this._recurse=b,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(m){var b=new gt,C={isDisposed:!1,e:this.sources[Ne](),subscription:b,lastError:null,o:m},A=Ee.scheduleRecursive(C,d);return new On([b,A,new ki(C)])},O(p,Ae),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.lastError=m,this._recurse(this._state)},p.prototype.completed=function(){this._state.o.onCompleted()},u}(Se);Ho.prototype.catchError=function(){return new Gm(this)};var qd=function(h){function u(p,m){this.v=p,this.c=m??-1}function d(p){this.v=p.v,this.l=p.c}return O(u,h),u.prototype[Ne]=function(){return new d(this)},d.prototype.next=function(){return 0===this.l?Ge:(this.l>0&&this.l--,{done:!1,value:this.v})},u}(Ho),Kd=Ho.repeat=function(h,u){return new qd(h,u)},zm=function(h){function u(p,m,b){this.s=p,this.fn=m?Be(m,b,3):null}function d(p){this.i=-1,this.s=p.s,this.l=this.s.length,this.fn=p.fn}return O(u,h),u.prototype[Ne]=function(){return new d(this)},d.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:Ge},u}(Ho),Mu=Ho.of=function(h,u,d){return new zm(h,u,d)},Vl=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new wn(this._s,d))},u}(Se);J.observeOn=function(h){return new Vl(this,h)};var Ru=function(h){function u(p,m){this.source=p,this._s=m,h.call(this)}function d(p,m){m[1].setDisposable(new Mr(p,m[0].subscribe(m[2])))}return O(u,h),u.prototype.subscribeCore=function(p){var m=new we,b=new gt;return b.setDisposable(m),m.setDisposable(this._s.schedule([this.source,b,p],d)),b},u}(Se);J.subscribeOn=function(h){return new Ru(this,h)};var Zd=function(h){function u(m,b){this._p=m,this._s=b,h.call(this)}function d(m,b){var C=b[0];C.onNext(b[1]),C.onCompleted()}function p(m,b){b[0].onError(b[1])}return O(u,h),u.prototype.subscribeCore=function(m){var b=new we,C=this,A=this._p;return Le(A)&&(A=F(A)())===M?(m.onError(A.e),b):(A.then(function(L){b.setDisposable(C._s.schedule([m,L],d))},function(L){b.setDisposable(C._s.schedule([m,L],p))}),b)},u}(Se),Wt=Re.fromPromise=function(h,u){return u||(u=Cn),new Zd(h,u)};J.toPromise=function(h){if(h||(h=pe.config.Promise),!h)throw new te("Promise type not provided nor in Rx.config.Promise");var u=this;return new h(function(d,p){var m;u.subscribe(function(b){m=b},p,function(){d(m)})})};var Dt=function(h){function u(p){this.source=p,h.call(this)}function d(p){this.o=p,this.a=[],Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p))},O(d,Ae),d.prototype.next=function(p){this.a.push(p)},d.prototype.error=function(p){this.o.onError(p)},d.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},u}(Se);J.toArray=function(){return new Dt(this)},Re.create=function(h,u){return new Qt(h,u)};var Pu=function(h){function u(d){this._f=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=F(this._f)();return p===M?Ms(p.e).subscribe(d):(Qe(p)&&(p=Wt(p)),p.subscribe(d))},u}(Se),Ia=Re.defer=function(h){return new Pu(h)},Xi=function(h){function u(m){this.scheduler=m,h.call(this)}function d(m,b){this.observer=m,this.scheduler=b}function p(m,b){return b.onCompleted(),ze}return O(u,h),u.prototype.subscribeCore=function(m){return new d(m,this.scheduler).run()},d.prototype.run=function(){var m=this.observer;return this.scheduler===zi?p(0,m):this.scheduler.schedule(m,p)},u}(Se),Qd=new Xi(zi),Ma=Re.empty=function(h){return Ce(h)||(h=zi),h===zi?Qd:new Xi(h)},Mn=function(h){function u(p,m,b){this._iterable=p,this._fn=m,this._scheduler=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){var b=function Xm(h){var u=h[Ne];if(!u&&"string"==typeof h)return new Wm(h)[Ne]();if(!u&&h.length!==ft)return new Vo(h)[Ne]();if(!u)throw new TypeError("Object is not iterable");return h[Ne]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,L){var X=F(m.next).call(m);if(X===M)return p.onError(X.e);if(X.done)return p.onCompleted();var z=X.value;if(Le(b)&&(z=F(b)(z,A))===M)return p.onError(z.e);p.onNext(z),L(A+1)}}(p,b,this._fn))},u}(Se),$m=Math.pow(2,53)-1;function Wm(h){this._s=h}function Jd(h){this._s=h,this._l=h.length,this._i=0}function Vo(h){this._a=h}function Ra(h){this._a=h,this._l=function ef(h){var u=+h.length;return isNaN(u)?0:0!==u&&function Gl(h){return"number"==typeof h&&Oe.isFinite(h)}(u)?(u=function Ym(h){var u=+h;return 0===u||isNaN(u)?u:u<0?-1:1}(u)*Math.floor(Math.abs(u)))<=0?0:u>$m?$m:u:u}(h),this._i=0}Wm.prototype[Ne]=function(){return new Jd(this._s)},Jd.prototype[Ne]=function(){return this},Jd.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:Ge},Vo.prototype[Ne]=function(){return new Ra(this._a)},Ra.prototype[Ne]=function(){return this},Ra.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:Ge};var As=Re.from=function(h,u,d,p){if(null==h)throw new Error("iterable cannot be null.");if(u&&!Le(u))throw new Error("mapFn when provided must be a function");if(u)var m=Be(u,d,2);return Ce(p)||(p=Ee),new Mn(h,m,p)},Kr=function(h){function u(p,m){this._args=p,this._scheduler=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this._scheduler.scheduleRecursive(0,function d(p,m){var b=m.length;return function(A,L){A<b?(p.onNext(m[A]),L(A+1)):p.onCompleted()}}(p,this._args))},u}(Se),qm=Re.fromArray=function(h,u){return Ce(u)||(u=Ee),new Kr(h,u)},bt=function(h){function u(p,m,b,C,A){this._initialState=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._s=A,h.call(this)}function d(p,m){if(p.first)p.first=!1;else if(p.newState=F(p.self._itrFn)(p.newState),p.newState===M)return p.o.onError(p.newState.e);var b=F(p.self._cndFn)(p.newState);if(b===M)return p.o.onError(b.e);if(b){var C=F(p.self._resFn)(p.newState);if(C===M)return p.o.onError(C.e);p.o.onNext(C),m(p)}else p.o.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursive({o:p,self:this,first:!0,newState:this._initialState},d)},u}(Se);function Ou(h,u){return Ce(h)||(h=Ee),new Kr(u,h)}Re.generate=function(h,u,d,p,m){return Ce(m)||(m=Ee),new bt(h,u,d,p,m)},Re.of=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return new Kr(u,Ee)},Re.ofWithScheduler=function(h){for(var u=arguments.length,d=new Array(u-1),p=1;p<u;p++)d[p-1]=arguments[p];return new Kr(d,h)},Re.ofArrayChanges=function(h){if(!Array.isArray(h))throw new TypeError("Array.observe only accepts arrays.");if("function"!=typeof Array.observe&&"function"!=typeof Array.unobserve)throw new TypeError("Array.observe is not supported on your platform");return new Qt(function(u){function d(p){for(var m=0,b=p.length;m<b;m++)u.onNext(p[m])}return Array.observe(h,d),function(){Array.unobserve(h,d)}})},Re.ofObjectChanges=function(h){if(null==h)throw new TypeError("object must not be null or undefined.");if("function"!=typeof Object.observe&&"function"!=typeof Object.unobserve)throw new TypeError("Object.observe is not supported on your platform");return new Qt(function(u){function d(p){for(var m=0,b=p.length;m<b;m++)u.onNext(p[m])}return Object.observe(h,d),function(){Object.unobserve(h,d)}})};var fn=function(h){function u(){h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return ze},u}(Se),zl=new fn,Pa=Re.never=function(){return zl},Oa=function(h){function u(p,m){this._o=p,this._keys=Object.keys(p),this._scheduler=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this._scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,L){if(A<b.length){var X=b[A];p.onNext([X,m[X]]),L(A+1)}else p.onCompleted()}}(p,this._o,this._keys))},u}(Se);Re.pairs=function(h,u){return u||(u=Ee),new Oa(h,u)};var Km=function(h){function u(p,m,b){this.start=p,this.rangeCount=m,this.scheduler=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.scheduler.scheduleRecursive(0,function d(p,m,b){return function(A,L){A<m?(b.onNext(p+A),L(A+1)):b.onCompleted()}}(this.start,this.rangeCount,p))},u}(Se);Re.range=function(h,u,d){return Ce(d)||(d=Ee),new Km(h,u,d)};var Zm=function(h){function u(d,p,m){this.value=d,this.repeatCount=p??-1,this.scheduler=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return new tf(d,this).run()},u}(Se);function tf(h,u){this.observer=h,this.parent=u}tf.prototype.run=function(){var h=this.observer,u=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,function d(p,m){if((-1===p||p>0)&&(h.onNext(u),p>0&&p--),0===p)return h.onCompleted();m(p)})},Re.repeat=function(h,u,d){return Ce(d)||(d=Ee),new Zm(h,u,d)};var Is=function(h){function u(p,m){this._value=p,this._scheduler=m,h.call(this)}function d(p,m){var C=m[1];return C.onNext(m[0]),C.onCompleted(),ze}return O(u,h),u.prototype.subscribeCore=function(p){var m=[this._value,p];return this._scheduler===zi?d(0,m):this._scheduler.schedule(m,d)},u}(Se),dx=(Re.return=Re.just=function(h,u){return Ce(u)||(u=zi),new Is(h,u)},function(h){function u(p,m){this._error=p,this._scheduler=m,h.call(this)}function d(p,m){return m[1].onError(m[0]),ze}return O(u,h),u.prototype.subscribeCore=function(p){var m=[this._error,p];return this._scheduler===zi?d(0,m):this._scheduler.schedule(m,d)},u}(Se)),Ms=Re.throw=function(h,u){return Ce(u)||(u=zi),new dx(h,u)},Pr=function(h){function u(d,p){this._resFn=d,this._obsFn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=ze,m=F(this._resFn)();if(m===M)return new rt(Ms(m.e).subscribe(d),p);m&&(p=m);var b=F(this._obsFn)(m);return new rt(b===M?Ms(b.e).subscribe(d):b.subscribe(d),p)},u}(Se);function Zr(h,u){return h.amb(u)}Re.using=function(h,u){return new Pr(h,u)},J.amb=function(h){var u=this;return new Qt(function(d){var p,m="L",b="R",C=new we,A=new we;function L(){p||(p=m,A.dispose())}function X(){p||(p=b,C.dispose())}Qe(h)&&(h=Wt(h));var z=Ts(function(xe){L(),p===m&&d.onNext(xe)},function(xe){L(),p===m&&d.onError(xe)},function(){L(),p===m&&d.onCompleted()}),re=Ts(function(xe){X(),p===b&&d.onNext(xe)},function(xe){X(),p===b&&d.onError(xe)},function(){X(),p===b&&d.onCompleted()});return C.setDisposable(u.subscribe(z)),A.setDisposable(h.subscribe(re)),new rt(C,A)})},Re.amb=function(){var u,h=Pa();if(Array.isArray(arguments[0]))u=arguments[0];else{var d=arguments.length;u=new Array(u);for(var p=0;p<d;p++)u[p]=arguments[p]}for(p=0,d=u.length;p<d;p++)h=Zr(h,u[p]);return h};var xn=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new we,m=new gt;return m.setDisposable(p),p.setDisposable(this.source.subscribe(new $l(d,m,this._fn))),m},u}(Se),$l=function(h){function u(d,p,m){this._o=d,this._s=p,this._fn=m,h.call(this)}return O(u,h),u.prototype.next=function(d){this._o.onNext(d)},u.prototype.completed=function(){return this._o.onCompleted()},u.prototype.error=function(d){var p=F(this._fn)(d);if(p===M)return this._o.onError(p.e);Qe(p)&&(p=Wt(p));var m=new we;this._s.setDisposable(m),m.setDisposable(p.subscribe(this._o))},u}(Ae);J.catch=function(h){return Le(h)?new xn(this,h):ku([this,h])};var ku=Re.catch=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}return Mu(h).catchError()};J.combineLatest=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return Array.isArray(u[0])?u[0].unshift(this):u.unshift(this),Qr.apply(this,u)};var Nu=function(h){function u(d,p){this._params=d,this._cb=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){for(var p=this._params.length,m=new Array(p),b={hasValue:Et(p,_r),hasValueAll:!1,isDone:Et(p,_r),values:new Array(p)},C=0;C<p;C++){var A=this._params[C],L=new we;m[C]=L,Qe(A)&&(A=Wt(A)),L.setDisposable(A.subscribe(new nf(d,C,this._cb,b)))}return new On(m)},u}(Se),nf=function(h){function u(p,m,b,C){this._o=p,this._i=m,this._cb=b,this._state=C,h.call(this)}return O(u,h),u.prototype.next=function(p){if(this._state.values[this._i]=p,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(hn))){var m=F(this._cb).apply(null,this._state.values);if(m===M)return this._o.onError(m.e);this._o.onNext(m)}else this._state.isDone.filter(function d(p){return function(m,b){return b!==p}}(this._i)).every(hn)&&this._o.onCompleted()},u.prototype.error=function(p){this._o.onError(p)},u.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(hn)&&this._o.onCompleted()},u}(Ae),Qr=Re.combineLatest=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Le(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new Nu(u,p)};J.concat=function(){for(var h=[],u=0,d=arguments.length;u<d;u++)h.push(arguments[u]);return h.unshift(this),Jr.apply(null,h)};var ka=function(h){function u(d,p){this._s=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._s.o.onNext(d)},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.i++,this._fn(this._s)},u}(Ae),Qm=function(h){function u(p){this._sources=p,h.call(this)}function d(p,m){if(!p.disposable.isDisposed){if(p.i===p.sources.length)return p.o.onCompleted();var b=p.sources[p.i];Qe(b)&&(b=Wt(b));var C=new we;p.subscription.setDisposable(C),C.setDisposable(b.subscribe(new ka(p,m)))}}return O(u,h),u.prototype.subscribeCore=function(p){var m=new gt,b=Bt(De),A=zi.scheduleRecursive({o:p,i:0,subscription:m,disposable:b,sources:this._sources},d);return new On([m,b,A])},u}(Se),Jr=Re.concat=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{h=new Array(arguments.length);for(var u=0,d=arguments.length;u<d;u++)h[u]=arguments[u]}return new Qm(h)};J.concatAll=function(){return this.merge(1)};var Jm=function(h){function u(d,p){this.source=d,this.maxConcurrent=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new ot;return p.add(this.source.subscribe(new rf(d,this.maxConcurrent,p))),p},u}(Se),rf=function(h){function u(p,m,b){this.o=p,this.max=m,this.g=b,this.done=!1,this.q=[],this.activeCount=0,h.call(this)}function d(p,m){this.parent=p,this.sad=m,h.call(this)}return O(u,h),u.prototype.handleSubscribe=function(p){var m=new we;this.g.add(m),Qe(p)&&(p=Wt(p)),m.setDisposable(p.subscribe(new d(this,m)))},u.prototype.next=function(p){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(p)):this.q.push(p)},u.prototype.error=function(p){this.o.onError(p)},u.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},O(d,h),d.prototype.next=function(p){this.parent.o.onNext(p)},d.prototype.error=function(p){this.parent.o.onError(p)},d.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},u}(Ae);J.merge=function(h){return"number"!=typeof h?sf(this,h):new Jm(this,h)};var sf=Re.merge=function(){var h,d,u=[],p=arguments.length;if(arguments[0])if(Ce(arguments[0]))for(h=arguments[0],d=1;d<p;d++)u.push(arguments[d]);else for(h=zi,d=0;d<p;d++)u.push(arguments[d]);else for(h=zi,d=1;d<p;d++)u.push(arguments[d]);return Array.isArray(u[0])&&(u=u[0]),Ou(h,u).mergeAll()},mr=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new ot,m=new we;return p.add(m),m.setDisposable(this.source.subscribe(new ev(d,p))),p},u}(Se),ev=function(h){function u(p,m){this.o=p,this.g=m,this.done=!1,h.call(this)}function d(p,m){this.parent=p,this.sad=m,h.call(this)}return O(u,h),u.prototype.next=function(p){var m=new we;this.g.add(m),Qe(p)&&(p=Wt(p)),m.setDisposable(p.subscribe(new d(this,m)))},u.prototype.error=function(p){this.o.onError(p)},u.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},O(d,h),d.prototype.next=function(p){this.parent.o.onNext(p)},d.prototype.error=function(p){this.parent.o.onError(p)},d.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},u}(Ae);J.mergeAll=function(){return new mr(this)};var Wl=pe.CompositeError=function(h){this.innerErrors=h,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};Wl.prototype=Object.create(Error.prototype),Wl.prototype.name="CompositeError";var Jn=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new ot,m=new we,b={isStopped:!1,errors:[],o:d};return p.add(m),m.setDisposable(this.source.subscribe(new Ni(p,b))),p},u}(Se),Ni=function(h){function u(m,b){this._group=m,this._state=b,h.call(this)}function d(m,b){0===b.length?m.onCompleted():m.onError(1===b.length?b[0]:new Wl(b))}function p(m,b,C){this._inner=m,this._group=b,this._state=C,h.call(this)}return O(u,h),u.prototype.next=function(m){var b=new we;this._group.add(b),Qe(m)&&(m=Wt(m)),b.setDisposable(m.subscribe(new p(b,this._group,this._state)))},u.prototype.error=function(m){this._state.errors.push(m),this._state.isStopped=!0,1===this._group.length&&d(this._state.o,this._state.errors)},u.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&d(this._state.o,this._state.errors)},O(p,h),p.prototype.next=function(m){this._state.o.onNext(m)},p.prototype.error=function(m){this._state.errors.push(m),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&d(this._state.o,this._state.errors)},p.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&d(this._state.o,this._state.errors)},u}(Ae);Re.mergeDelayError=function(){var h;if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}var p=Ou(null,h);return new Jn(p)},J.onErrorResumeNext=function(h){if(!h)throw new Error("Second observable is required");return Ci([this,h])};var Dn=function(h){function u(p){this.sources=p,h.call(this)}function d(p,m){if(p.pos<p.sources.length){var b=p.sources[p.pos++];Qe(b)&&(b=Wt(b));var C=new we;p.subscription.setDisposable(C),C.setDisposable(b.subscribe(new _i(p,m)))}else p.o.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){var m=new gt,C=zi.scheduleRecursive({pos:0,subscription:m,o:p,sources:this.sources},d);return new rt(m,C)},u}(Se),_i=function(h){function u(d,p){this._state=d,this._recurse=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._state.o.onNext(d)},u.prototype.error=function(){this._recurse(this._state)},u.prototype.completed=function(){this._recurse(this._state)},u}(Ae),Ci=Re.onErrorResumeNext=function(){var h=[];if(Array.isArray(arguments[0]))h=arguments[0];else{var u=arguments.length;h=new Array(u);for(var d=0;d<u;d++)h[d]=arguments[d]}return new Dn(h)},Go=function(h){function u(d,p){this._s=d,this._o=Qe(p)?Wt(p):p,this._open=!1,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new we;p.setDisposable(this._s.subscribe(new Yi(d,this))),Qe(this._o)&&(this._o=Wt(this._o));var m=new we;return m.setDisposable(this._o.subscribe(new es(d,this,m))),new rt(p,m)},u}(Se),Yi=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},u}(Ae),es=function(h){function u(d,p,m){this._o=d,this._p=p,this._r=m,h.call(this)}return O(u,h),u.prototype.next=function(){this._p._open=!0,this._r.dispose()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=function(){this._r.dispose()},u}(Ae);J.skipUntil=function(h){return new Go(this,h)};var Xe=function(h){function u(m){this.source=m,h.call(this)}function d(m,b){this.o=m,this.inner=b,this.stopped=!1,this.latest=0,this.hasLatest=!1,Ae.call(this)}function p(m,b){this.parent=m,this.id=b,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(m){var b=new gt,C=this.source.subscribe(new d(m,b));return new rt(C,b)},O(d,Ae),d.prototype.next=function(m){var b=new we,C=++this.latest;this.hasLatest=!0,this.inner.setDisposable(b),Qe(m)&&(m=Wt(m)),b.setDisposable(m.subscribe(new p(this,C)))},d.prototype.error=function(m){this.o.onError(m)},d.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},O(p,Ae),p.prototype.next=function(m){this.parent.latest===this.id&&this.parent.o.onNext(m)},p.prototype.error=function(m){this.parent.latest===this.id&&this.parent.o.onError(m)},p.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},u}(Se);J.switch=J.switchLatest=function(){return new Xe(this)};var qt=function(h){function u(d,p){this.source=d,this.other=Qe(p)?Wt(p):p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return new rt(this.source.subscribe(d),this.other.subscribe(new Gn(d)))},u}(Se),Gn=function(h){function u(d){this._o=d,h.call(this)}return O(u,h),u.prototype.next=function(){this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.onCompleted=De,u}(Ae);J.takeUntil=function(h){return new qt(this,h)};var vr=function(h){function u(d,p,m){this._s=d,this._ss=p,this._cb=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){for(var p=this._ss.length,m={hasValue:Et(p,_r),hasValueAll:!1,values:new Array(p)},b=this._ss.length,C=new Array(b+1),A=0;A<b;A++){var L=this._ss[A],X=new we;Qe(L)&&(L=Wt(L)),X.setDisposable(L.subscribe(new io(d,A,m))),C[A]=X}var z=new we;return z.setDisposable(this._s.subscribe(new yi(d,this._cb,m))),C[b]=z,new On(C)},u}(Se),io=function(h){function u(d,p,m){this._o=d,this._i=p,this._state=m,h.call(this)}return O(u,h),u.prototype.next=function(d){this._state.values[this._i]=d,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(hn)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=De,u}(Ae),yi=function(h){function u(d,p,m){this._o=d,this._cb=p,this._state=m,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=[d].concat(this._state.values);if(this._state.hasValueAll){var m=F(this._cb).apply(null,p);if(m===M)return this._o.onError(m.e);this._o.onNext(m)}},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Le(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new vr(this,u,p)};var zo=function(h){function u(d,p){this._s=d,this._cb=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){for(var p=this._s.length,m=new Array(p),b=Et(p,_r),C=Et(p,$o),A=0;A<p;A++){var L=this._s[A],X=new we;m[A]=X,Qe(L)&&(L=Wt(L)),X.setDisposable(L.subscribe(new Xn(d,A,this,C,b)))}return new On(m)},u}(Se),Xn=function(h){function u(b,C,A,L,X){this._o=b,this._i=C,this._p=A,this._q=L,this._d=X,h.call(this)}function d(b){return b.length>0}function p(b){return b.shift()}return O(u,h),u.prototype.next=function(b){if(this._q[this._i].push(b),this._q.every(d)){var C=this._q.map(p),A=F(this._p._cb).apply(null,C);if(A===M)return this._o.onError(A.e);this._o.onNext(A)}else this._d.filter(function m(b){return function(C,A){return A!==b}}(this._i)).every(hn)&&this._o.onCompleted()},u.prototype.error=function(b){this._o.onError(b)},u.prototype.completed=function(){this._d[this._i]=!0,this._d.every(hn)&&this._o.onCompleted()},u}(Ae);function _r(){return!1}function $o(){return[]}J.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Le(u[h-1])?u.pop():is;Array.isArray(u[0])&&(u=u[0]);var m=this;return u.unshift(m),new zo(u,p)},Re.zip=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];Array.isArray(u[0])&&(u=Le(u[1])?u[0].concat(u[1]):u[0]);var p=u.shift();return p.zip.apply(p,u)};var Zt=function(h){function u(d,p){this.sources=d,this._cb=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){for(var p=this.sources,m=p.length,b=new Array(m),C={q:Et(m,$o),done:Et(m,_r),cb:this._cb,o:d},A=0;A<m;A++)X=void 0,z=void 0,X=p[L=A],z=new we,(xt(X)||Ot(X))&&(X=As(X)),b[L]=z,z.setDisposable(X.subscribe(new Fu(C,L)));var L,X,z;return new On(b)},u}(Se),Fu=function(h){function u(b,C){this._s=b,this._i=C,h.call(this)}function d(b){return b.length>0}function p(b){return b.shift()}return O(u,h),u.prototype.next=function(b){if(this._s.q[this._i].push(b),this._s.q.every(d)){var C=this._s.q.map(p),A=F(this._s.cb).apply(null,C);if(A===M)return this._s.o.onError(A.e);this._s.o.onNext(A)}else this._s.done.filter(function m(b){return function(C,A){return A!==b}}(this._i)).every(hn)&&this._s.o.onCompleted()},u.prototype.error=function(b){this._s.o.onError(b)},u.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(hn)&&this._s.o.onCompleted()},u}(Ae);function af(h){return h.length>0}J.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Le(u[h-1])?u.pop():is,m=this;return u.unshift(m),new Zt(u,p)},J.asObservable=function(){return new Qt(function Na(h){return function(d){return h.subscribe(d)}}(this),this)},J.bufferWithCount=J.bufferCount=function(h,u){return"number"!=typeof u&&(u=h),this.windowWithCount(h,u).flatMap(rs).filter(af)};var Wo=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new bi(d))},u}(Se),bi=function(h){function u(d){this._o=d,h.call(this)}return O(u,h),u.prototype.next=function(d){d.accept(this._o)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.dematerialize=function(){return new Wo(this)};var Fa=function(h){function u(d,p,m){this.source=d,this.keyFn=p,this.comparer=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Xo(d,this.keyFn,this.comparer))},u}(Se),Xo=function(h){function u(d,p,m){this.o=d,this.keyFn=p,this.comparer=m,this.hasCurrentKey=!1,this.currentKey=null,h.call(this)}return O(u,h),u.prototype.next=function(d){var m,p=d;return Le(this.keyFn)&&(p=F(this.keyFn)(d))===M?this.o.onError(p.e):this.hasCurrentKey&&(m=F(this.comparer)(this.currentKey,p))===M?this.o.onError(m.e):void((!this.hasCurrentKey||!m)&&(this.hasCurrentKey=!0,this.currentKey=p,this.o.onNext(d)))},u.prototype.error=function(d){this.o.onError(d)},u.prototype.completed=function(){this.o.onCompleted()},u}(Ae);J.distinctUntilChanged=function(h,u){return u||(u=Mt),new Fa(this,h,u)};var Or=function(h){function u(p,m,b,C){this.source=p,this._oN=m,this._oE=b,this._oC=C,h.call(this)}function d(p,m){this.o=p,this.t=!m._oN||Le(m._oN)?Ts(m._oN||De,m._oE||De,m._oC||De):m._oN,this.isStopped=!1,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this))},O(d,Ae),d.prototype.next=function(p){var m=F(this.t.onNext).call(this.t,p);m===M&&this.o.onError(m.e),this.o.onNext(p)},d.prototype.error=function(p){var m=F(this.t.onError).call(this.t,p);if(m===M)return this.o.onError(m.e);this.o.onError(p)},d.prototype.completed=function(){var p=F(this.t.onCompleted).call(this.t);if(p===M)return this.o.onError(p.e);this.o.onCompleted()},u}(Se);J.do=J.tap=J.doAction=function(h,u,d){return new Or(this,h,u,d)},J.doOnNext=J.tapOnNext=function(h,u){return this.tap(typeof u<"u"?function(d){h.call(u,d)}:h)},J.doOnError=J.tapOnError=function(h,u){return this.tap(De,typeof u<"u"?function(d){h.call(u,d)}:h)},J.doOnCompleted=J.tapOnCompleted=function(h,u){return this.tap(De,null,typeof u<"u"?function(){h.call(u)}:h)};var La=function(h){function u(p,m,b){this.source=p,this._fn=Be(m,b,0),h.call(this)}function d(p,m){this.isDisposed=!1,this._s=p,this._fn=m}return O(u,h),u.prototype.subscribeCore=function(p){var m=F(this.source.subscribe).call(this.source,p);return m===M&&(this._fn(),Ke(m.e)),new d(m,this._fn)},d.prototype.dispose=function(){if(!this.isDisposed){var p=F(this._s.dispose).call(this._s);this._fn(),p===M&&Ke(p.e)}},u}(Se);J.finally=function(h,u){return new La(this,h,u)};var lf=function(h){function u(p){this.source=p,h.call(this)}function d(p){this.o=p,this.isStopped=!1}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p))},d.prototype.onNext=De,d.prototype.onError=function(p){this.isStopped||(this.isStopped=!0,this.o.onError(p))},d.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},d.prototype.dispose=function(){this.isStopped=!0},d.prototype.fail=function(p){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(p),!0)},u}(Se);J.ignoreElements=function(){return new lf(this)};var kn=function(h){function u(d,p){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new fx(d))},u}(Se),fx=function(h){function u(d){this._o=d,h.call(this)}return O(u,h),u.prototype.next=function(d){this._o.onNext(jm(d))},u.prototype.error=function(d){this._o.onNext(Hm(d)),this._o.onCompleted()},u.prototype.completed=function(){this._o.onNext(Vm()),this._o.onCompleted()},u}(Ae);J.materialize=function(){return new kn(this)},J.repeat=function(h){return Kd(this,h).concat()},J.retry=function(h){return Kd(this,h).catchError()};var Lu=function(h){function u(p){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,p.isDisposed=!0)}}}function d(p,m){this.source=p,this._notifier=m,h.call(this)}return O(d,h),d.prototype.subscribeCore=function(p){var m=new Fn,b=new Fn,A=this._notifier(m).subscribe(b),L=this.source["@@iterator"](),X={isDisposed:!1},re=new gt,xe=Ee.scheduleRecursive(null,function(at,Je){if(!X.isDisposed){var dt=L.next();if(dt.done)return void p.onCompleted();var vt=dt.value;Qe(vt)&&(vt=Wt(vt));var nt=new we,Nn=new we;re.setDisposable(new rt(Nn,nt)),nt.setDisposable(vt.subscribe(function(Sn){p.onNext(Sn)},function(Sn){Nn.setDisposable(b.subscribe(Je,function(Hv){p.onError(Hv)},function(){p.onCompleted()})),m.onNext(Sn),nt.dispose()},function(){p.onCompleted()}))}});return new On([A,re,xe,u(X)])},d}(Se);function Xl(h){return{"@@iterator":function(){return{next:function(){return{done:!1,value:h}}}}}}J.retryWhen=function(h){return new Lu(Xl(this),h)};var Yl=function(h){function u(p){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,p.isDisposed=!0)}}}function d(p,m){this.source=p,this._notifier=m,h.call(this)}return O(d,h),d.prototype.subscribeCore=function(p){var m=new Fn,b=new Fn,A=this._notifier(m).subscribe(b),L=this.source["@@iterator"](),X={isDisposed:!1},re=new gt,xe=Ee.scheduleRecursive(null,function(at,Je){if(!X.isDisposed){var dt=L.next();if(dt.done)return void p.onCompleted();var vt=dt.value;Qe(vt)&&(vt=Wt(vt));var nt=new we,Nn=new we;re.setDisposable(new rt(Nn,nt)),nt.setDisposable(vt.subscribe(function(Sn){p.onNext(Sn)},function(Sn){p.onError(Sn)},function(){Nn.setDisposable(b.subscribe(Je,function(Sn){p.onError(Sn)},function(){p.onCompleted()})),m.onNext(null),nt.dispose()}))}});return new On([A,re,xe,u(X)])},d}(Se);J.repeatWhen=function(h){return new Yl(Xl(this),h)};var ql=function(h){function u(d,p,m,b){this.source=d,this.accumulator=p,this.hasSeed=m,this.seed=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Yo(d,this))},u}(Se),Yo=function(h){function u(d,p){this._o=d,this._p=p,this._fn=p.accumulator,this._hs=p.hasSeed,this._s=p.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(!this._hv&&(this._hv=!0),this._ha?this._a=F(this._fn)(this._a,d,this._i,this._p):(this._a=this._hs?F(this._fn)(this._s,d,this._i,this._p):d,this._ha=!0),this._a===M)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},u}(Ae);J.scan=function(){var u,h=!1,d=arguments[0];return 2===arguments.length&&(h=!0,u=arguments[1]),new ql(this,d,h,u)};var Di=function(h){function u(d,p){this.source=d,this._c=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new px(d,this._c))},u}(Se),px=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return O(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._o.onNext(this._q.shift())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.skipLast=function(h){if(h<0)throw new ne;return new Di(this,h)},J.startWith=function(){var u,d=0;arguments.length&&Ce(arguments[0])?(u=arguments[0],d=1):u=zi;for(var p=[],m=d,b=arguments.length;m<b;m++)p.push(arguments[m]);return Jr.apply(null,[qm(p,u),this])};var qi=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return O(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},u}(Ae);J.takeLast=function(h){if(h<0)throw new ne;var u=this;return new Qt(function(d){return u.subscribe(new qi(d,h))},u)};var yr=function(h){function u(d,p){this._o=d,this._c=p,this._q=[],h.call(this)}return O(u,h),u.prototype.next=function(d){this._q.push(d),this._q.length>this._c&&this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._q),this._o.onCompleted()},u}(Ae);function Kl(h,u,d){var p=Be(u,d,3);return h.map(function(m,b){var C=p(m,b,h);return Qe(C)&&(C=Wt(C)),(xt(C)||Ot(C))&&(C=As(C)),C}).concatAll()}J.takeLastBuffer=function(h){if(h<0)throw new ne;var u=this;return new Qt(function(d){return u.subscribe(new yr(d,h))},u)},J.windowWithCount=J.windowCount=function(h,u){var d=this;if(+h||(h=0),Math.abs(h)===1/0&&(h=0),h<=0)throw new ne;if(null==u&&(u=h),+u||(u=0),Math.abs(u)===1/0&&(u=0),u<=0)throw new ne;return new Qt(function(p){var m=new we,b=new Vt(m),C=0,A=[];function L(){var X=new Fn;A.push(X),p.onNext(st(X,b))}return L(),m.setDisposable(d.subscribe(function(X){for(var z=0,re=A.length;z<re;z++)A[z].onNext(X);var xe=C-h+1;xe>=0&&xe%u==0&&A.shift().onCompleted(),++C%u==0&&L()},function(X){for(;A.length>0;)A.shift().onError(X);p.onError(X)},function(){for(;A.length>0;)A.shift().onCompleted();p.onCompleted()})),b},d)},J.selectConcat=J.concatMap=function(h,u,d){return Le(h)&&Le(u)?this.concatMap(function(p,m){var b=h(p,m);return Qe(b)&&(b=Wt(b)),(xt(b)||Ot(b))&&(b=As(b)),b.map(function(C,A){return u(p,C,m,A)})}):Le(h)?Kl(this,h,d):Kl(this,function(){return h})},J.concatMapObserver=J.selectConcatObserver=function(h,u,d,p){var m=this,b=Be(h,p,2),C=Be(u,p,1),A=Be(d,p,0);return new Qt(function(L){var X=0;return m.subscribe(function(z){var re;try{re=b(z,X++)}catch(xe){return void L.onError(xe)}Qe(re)&&(re=Wt(re)),L.onNext(re)},function(z){var re;try{re=C(z)}catch(xe){return void L.onError(xe)}Qe(re)&&(re=Wt(re)),L.onNext(re),L.onCompleted()},function(){var z;try{z=A()}catch(re){return void L.onError(re)}Qe(z)&&(z=Wt(z)),L.onNext(z),L.onCompleted()})},this).concatAll()};var Ba=function(h){function u(d,p){this._o=d,this._d=p,this._f=!1,h.call(this)}return O(u,h),u.prototype.next=function(d){this._f=!0,this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){!this._f&&this._o.onNext(this._d),this._o.onCompleted()},u}(Ae);function nr(h){this.comparer=h,this.set=[]}J.defaultIfEmpty=function(h){var u=this;return h===ft&&(h=null),new Qt(function(d){return u.subscribe(new Ba(d,h))},u)},nr.prototype.push=function(h){var u=-1===function Zl(h,u,d){for(var p=0,m=h.length;p<m;p++)if(d(h[p],u))return p;return-1}(this.set,h,this.comparer);return u&&this.set.push(h),u};var tv=function(h){function u(d,p,m){this.source=d,this._keyFn=p,this._cmpFn=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new gx(d,this._keyFn,this._cmpFn))},u}(Se),gx=function(h){function u(d,p,m){this._o=d,this._keyFn=p,this._h=new nr(m),h.call(this)}return O(u,h),u.prototype.next=function(d){var p=d;if(Le(this._keyFn)&&(p=F(this._keyFn)(d))===M)return this._o.onError(p.e);this._h.push(p)&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.distinct=function(h,u){return u||(u=Mt),new tv(this,h,u)},J.groupBy=function(h,u){return this.groupByUntil(h,u,Pa)},J.groupByUntil=function(h,u,d){var p=this;return new Qt(function(m){var b=new so,C=new ot,A=new Vt(C),L=function(X){return function(z){z.onError(X)}};return C.add(p.subscribe(function(X){var z=F(h)(X);if(z===M)return b.forEach(L(z.e)),m.onError(z.e);var re=!1,xe=b.get(z);if(xe===ft&&(xe=new Fn,b.set(z,xe),re=!0),re){var at=new nh(z,xe,A),Je=new nh(z,xe),dt=F(d)(Je);if(dt===M)return b.forEach(L(dt.e)),m.onError(dt.e);m.onNext(at);var vt=new we;C.add(vt),vt.setDisposable(dt.take(1).subscribe(De,function(Nn){b.forEach(L(Nn)),m.onError(Nn)},function(){b.delete(z)&&xe.onCompleted(),C.remove(vt)}))}var nt=X;if(Le(u)&&(nt=F(u)(X))===M)return b.forEach(L(nt.e)),m.onError(nt.e);xe.onNext(nt)},function(X){b.forEach(L(X)),m.onError(X)},function(){b.forEach(function(X){X.onCompleted()}),m.onCompleted()})),A},p)};var cf=function(h){function u(m,b,C){this.source=m,this.selector=Be(b,C,3),h.call(this)}function p(m,b,C){this.o=m,this.selector=b,this.source=C,this.i=0,Ae.call(this)}return O(u,h),u.prototype.internalMap=function(m,b){return new u(this.source,function d(m,b){return function(C,A,L){return m.call(this,b.selector(C,A,L),A,L)}}(m,this),b)},u.prototype.subscribeCore=function(m){return this.source.subscribe(new p(m,this.selector,this))},O(p,Ae),p.prototype.next=function(m){var b=F(this.selector)(m,this.i++,this.source);if(b===M)return this.o.onError(b.e);this.o.onNext(b)},p.prototype.error=function(m){this.o.onError(m)},p.prototype.completed=function(){this.o.onCompleted()},u}(Se);function nv(h,u){return function(p){for(var m=p,b=0;b<u;b++){var C=m[h[b]];if(!(typeof C<"u"))return ft;m=C}return m}}J.map=J.select=function(h,u){var d="function"==typeof h?h:function(){return h};return this instanceof cf?this.internalMap(d,u):new cf(this,d,u)},J.pluck=function(){var h=arguments.length,u=new Array(h);if(0===h)throw new Error("List of properties cannot be empty.");for(var d=0;d<h;d++)u[d]=arguments[d];return this.map(nv(u,h))},J.flatMap=J.selectMany=J.mergeMap=function(h,u,d){return new mt(this,h,u,d).mergeAll()},J.flatMapObserver=J.selectManyObserver=function(h,u,d,p){var m=this;return new Qt(function(b){var C=0;return m.subscribe(function(A){var L;try{L=h.call(p,A,C++)}catch(X){return void b.onError(X)}Qe(L)&&(L=Wt(L)),b.onNext(L)},function(A){var L;try{L=u.call(p,A)}catch(X){return void b.onError(X)}Qe(L)&&(L=Wt(L)),b.onNext(L),b.onCompleted()},function(){var A;try{A=d.call(p)}catch(L){return void b.onError(L)}Qe(A)&&(A=Wt(A)),b.onNext(A),b.onCompleted()})},m).mergeAll()},J.flatMapLatest=J.switchMap=function(h,u,d){return new mt(this,h,u,d).switchLatest()};var mx=function(h){function u(p,m){this.source=p,this._count=m,h.call(this)}function d(p,m){this._o=p,this._r=m,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this._count))},O(d,Ae),d.prototype.next=function(p){this._r<=0?this._o.onNext(p):this._r--},d.prototype.error=function(p){this._o.onError(p)},d.prototype.completed=function(){this._o.onCompleted()},u}(Se);J.skip=function(h){if(h<0)throw new ne;return new mx(this,h)};var vx=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new _x(d,this))},u}(Se),_x=function(h){function u(d,p){this._o=d,this._p=p,this._i=0,this._r=!1,h.call(this)}return O(u,h),u.prototype.next=function(d){if(!this._r){var p=F(this._p._fn)(d,this._i++,this._p);if(p===M)return this._o.onError(p.e);this._r=!p}this._r&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.skipWhile=function(h,u){var d=Be(h,u,3);return new vx(this,d)};var yx=function(h){function u(p,m){this.source=p,this._count=m,h.call(this)}function d(p,m){this._o=p,this._c=m,this._r=m,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return this.source.subscribe(new d(p,this._count))},O(d,Ae),d.prototype.next=function(p){this._r-- >0&&(this._o.onNext(p),this._r<=0&&this._o.onCompleted())},d.prototype.error=function(p){this._o.onError(p)},d.prototype.completed=function(){this._o.onCompleted()},u}(Se);J.take=function(h,u){if(h<0)throw new ne;return 0===h?Ma(u):new yx(this,h)};var bx=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new wx(d,this))},u}(Se),wx=function(h){function u(d,p){this._o=d,this._p=p,this._i=0,this._r=!0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(this._r&&(this._r=F(this._p._fn)(d,this._i++,this._p),this._r===M))return this._o.onError(this._r.e);this._r?this._o.onNext(d):this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.takeWhile=function(h,u){var d=Be(h,u,3);return new bx(this,d)};var iv=function(h){function u(m,b,C){this.source=m,this.predicate=Be(b,C,3),h.call(this)}function p(m,b,C){this.o=m,this.predicate=b,this.source=C,this.i=0,Ae.call(this)}return O(u,h),u.prototype.subscribeCore=function(m){return this.source.subscribe(new p(m,this.predicate,this))},u.prototype.internalFilter=function(m,b){return new u(this.source,function d(m,b){return function(C,A,L){return b.predicate(C,A,L)&&m.call(this,C,A,L)}}(m,this),b)},O(p,Ae),p.prototype.next=function(m){var b=F(this.predicate)(m,this.i++,this.source);if(b===M)return this.o.onError(b.e);b&&this.o.onNext(m)},p.prototype.error=function(m){this.o.onError(m)},p.prototype.completed=function(){this.o.onCompleted()},u}(Se);J.filter=J.where=function(h,u){return this instanceof iv?this.internalFilter(h,u):new iv(this,h,u)};var rv=function(h){function u(d,p,m){this.source=d,this._k=p,this._c=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new xx(d,this._k,this._c))},u}(Se),xx=function(h){function u(d,p,m){this._o=d,this._k=p,this._c=m,this._v=null,this._hv=!1,this._l=[],h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._k)(d);if(p===M)return this._o.onError(p.e);var m=0;if(this._hv){if((m=F(this._c)(p,this._v))===M)return this._o.onError(m.e)}else this._hv=!0,this._v=p;m>0&&(this._v=p,this._l=[]),m>=0&&this._l.push(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},u}(Ae);function sv(h){if(0===h.length)throw new Y;return h[0]}var Ex=function(h){function u(d,p,m,b){this.source=d,this.accumulator=p,this.hasSeed=m,this.seed=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Cx(d,this))},u}(Se),Cx=function(h){function u(d,p){this._o=d,this._p=p,this._fn=p.accumulator,this._hs=p.hasSeed,this._s=p.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(!this._hv&&(this._hv=!0),this._ha?this._a=F(this._fn)(this._a,d,this._i,this._p):(this._a=this._hs?F(this._fn)(this._s,d,this._i,this._p):d,this._ha=!0),this._a===M)return this._o.onError(this._a.e);this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new Y),this._o.onCompleted()},u}(Ae);J.reduce=function(){var u,h=!1,d=arguments[0];return 2===arguments.length&&(h=!0,u=arguments[1]),new Ex(this,d,h,u)};var uf=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new hf(d,this._fn,this.source))},u}(Se),hf=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._fn)(d,this._i++,this._s);if(p===M)return this._o.onError(p.e);Boolean(p)&&(this._o.onNext(!0),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},u}(Ae);J.some=function(h,u){var d=Be(h,u,3);return new uf(this,d)};var Dx=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Sx(d))},u}(Se),Sx=function(h){function u(d){this._o=d,h.call(this)}return O(u,h),u.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},u}(Ae);J.isEmpty=function(){return new Dx(this)};var Tx=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new ro(d,this._fn,this.source))},u}(Se),ro=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._fn)(d,this._i++,this._s);if(p===M)return this._o.onError(p.e);Boolean(p)||(this._o.onNext(!1),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},u}(Ae);J.every=function(h,u){var d=Be(h,u,3);return new Tx(this,d)};var ov=function(h){function u(d,p,m){var b=+m||0;Math.abs(b)===1/0&&(b=0),this.source=d,this._elem=p,this._n=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(!1),d.onCompleted(),ze):this.source.subscribe(new Rs(d,this._elem,this._n))},u}(Se),Rs=function(h){function u(p,m,b){this._o=p,this._elem=m,this._n=b,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(p){this._i++>=this._n&&function d(p,m){return 0===p&&0===m||p===m||isNaN(p)&&isNaN(m)}(p,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},u.prototype.error=function(p){this._o.onError(p)},u.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},u}(Ae);J.includes=function(h,u){return new ov(this,h,u)};var df=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new av(d,this._fn,this.source))},u}(Se),av=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,this._c=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(this._fn){var p=F(this._fn)(d,this._i++,this._s);if(p===M)return this._o.onError(p.e);Boolean(p)&&this._c++}else this._c++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},u}(Ae);J.count=function(h,u){var d=Be(h,u,3);return new df(this,d)};var lv=function(h){function u(d,p,m){this.source=d,this._e=p,this._n=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(-1),d.onCompleted(),ze):this.source.subscribe(new ff(d,this._e,this._n))},u}(Se),ff=function(h){function u(d,p,m){this._o=d,this._e=p,this._n=m,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){this._i>=this._n&&d===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},u}(Ae);J.indexOf=function(h,u){var d=+u||0;return Math.abs(d)===1/0&&(d=0),new lv(this,h,d)};var pf=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new cv(d,this._fn,this.source))},u}(Se),cv=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._i=0,this._c=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(this._fn){var p=F(this._fn)(d,this._i++,this._s);if(p===M)return this._o.onError(p.e);this._c+=p}else this._c+=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},u}(Ae);J.sum=function(h,u){var d=Be(h,u,3);return new pf(this,d)},J.minBy=function(h,u){return u||(u=Rt),new rv(this,h,function(d,p){return-1*u(d,p)})},J.min=function(h){return this.minBy(hn,h).map(sv)},J.maxBy=function(h,u){return u||(u=Rt),new rv(this,h,u)},J.max=function(h){return this.maxBy(hn,h).map(sv)};var Bu=function(h){function u(d,p){this.source=d,this._fn=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new uv(d,this._fn,this.source))},u}(Se),uv=function(h){function u(d,p,m){this._o=d,this._fn=p,this._s=m,this._c=0,this._t=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(this._fn){var p=F(this._fn)(d,this._c++,this._s);if(p===M)return this._o.onError(p.e);this._t+=p}else this._c++,this._t+=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){if(0===this._c)return this._o.onError(new Y);this._o.onNext(this._t/this._c),this._o.onCompleted()},u}(Ae);J.average=function(h,u){var p;return Le(h)&&(p=Be(h,u,3)),new Bu(this,p)},J.sequenceEqual=function(h,u){var d=this;return u||(u=Mt),new Qt(function(p){var m=!1,b=!1,C=[],A=[],L=d.subscribe(function(z){if(A.length>0){var re=A.shift(),xe=F(u)(re,z);if(xe===M)return p.onError(xe.e);xe||(p.onNext(!1),p.onCompleted())}else b?(p.onNext(!1),p.onCompleted()):C.push(z)},function(z){p.onError(z)},function(){m=!0,0===C.length&&(A.length>0?(p.onNext(!1),p.onCompleted()):b&&(p.onNext(!0),p.onCompleted()))});(xt(h)||Ot(h))&&(h=As(h)),Qe(h)&&(h=Wt(h));var X=h.subscribe(function(z){if(C.length>0){var re=C.shift(),xe=F(u)(re,z);if(xe===M)return p.onError(xe.e);xe||(p.onNext(!1),p.onCompleted())}else m?(p.onNext(!1),p.onCompleted()):A.push(z)},function(z){p.onError(z)},function(){b=!0,0===A.length&&(C.length>0?(p.onNext(!1),p.onCompleted()):m&&(p.onNext(!0),p.onCompleted()))});return new rt(L,X)},d)};var ir=function(h){function u(d,p,m){this.source=d,this._i=p,this._d=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new gf(d,this._i,this._d))},u}(Se),gf=function(h){function u(d,p,m){this._o=d,this._i=p,this._d=m,h.call(this)}return O(u,h),u.prototype.next=function(d){0==this._i--&&(this._o.onNext(d),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._d===ft?this._o.onError(new ne):(this._o.onNext(this._d),this._o.onCompleted())},u}(Ae);J.elementAt=function(h,u){if(h<0)throw new ne;return new ir(this,h,u)};var mf=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,this._hv=!1,this._v=null,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=!1;if(this._obj.predicate){var m=F(this._obj.predicate)(d,this._i++,this._s);if(m===M)return this._o.onError(m.e);Boolean(m)&&(p=!0)}else this._obj.predicate||(p=!0);if(p){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=d}},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===ft?this._o.onError(new Y):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Ae);J.single=function(h,u){var d={},p=this;if(Le((d="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var m=d.predicate;d.predicate=Be(m,d.thisArg,3)}return new Qt(function(b){return p.subscribe(new mf(b,d,p))},p)};var ci=function(h){function u(d,p){this.source=d,this._obj=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new hv(d,this._obj,this.source))},u}(Se),hv=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){if(this._obj.predicate){var p=F(this._obj.predicate)(d,this._i++,this._s);if(p===M)return this._o.onError(p.e);Boolean(p)&&(this._o.onNext(d),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(d),this._o.onCompleted())},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._obj.defaultValue===ft?this._o.onError(new Y):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Ae);J.first=function(){var h={};if(Le((h="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var d=h.predicate;h.predicate=Be(d,h.thisArg,3)}return new ci(this,h)};var Ql=function(h){function u(d,p){this.source=d,this._obj=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Ki(d,this._obj,this.source))},u}(Se),Ki=function(h){function u(d,p,m){this._o=d,this._obj=p,this._s=m,this._i=0,this._hv=!1,this._v=null,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=!1;if(this._obj.predicate){var m=F(this._obj.predicate)(d,this._i++,this._s);if(m===M)return this._o.onError(m.e);Boolean(m)&&(p=!0)}else this._obj.predicate||(p=!0);p&&(this._hv=!0,this._v=d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===ft?this._o.onError(new Y):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},u}(Ae);J.last=function(){var h={};if(Le((h="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]}).predicate)){var d=h.predicate;h.predicate=Be(d,h.thisArg,3)}return new Ql(this,h)};var dv=function(h){function u(d,p,m,b){this._o=d,this._s=p,this._cb=m,this._y=b,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._cb)(d,this._i,this._s);if(p===M)return this._o.onError(p.e);p?(this._o.onNext(this._y?this._i:d),this._o.onCompleted()):this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},u}(Ae);function Uu(h,u,d,p){var m=Be(u,d,3);return new Qt(function(b){return h.subscribe(new dv(b,h,m,p))},h)}J.find=function(h,u){return Uu(this,h,u,!1)},J.findIndex=function(h,u){return Uu(this,h,u,!0)};var qo=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Zi(d))},u}(Se),Zi=function(h){function u(d){this._o=d,this._s=new Oe.Set,h.call(this)}return O(u,h),u.prototype.next=function(d){this._s.add(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},u}(Ae);J.toSet=function(){if(typeof Oe.Set>"u")throw new TypeError;return new qo(this)};var fv=function(h){function u(d,p,m){this.source=d,this._k=p,this._e=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Jl(d,this._k,this._e))},u}(Se),Jl=function(h){function u(d,p,m){this._o=d,this._k=p,this._e=m,this._m=new Oe.Map,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._k)(d);if(p===M)return this._o.onError(p.e);var m=d;if(this._e&&(m=F(this._e)(d))===M)return this._o.onError(m.e);this._m.set(p,m)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},u}(Ae);J.toMap=function(h,u){if(typeof Oe.Map>"u")throw new TypeError;return new fv(this,h,u)};var pv=function(h){function u(d,p,m){this.source=d,this._b=p,this._e=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Ps(d,this._b,this._e))},u}(Se),Ps=function(h){function u(d,p,m){this._o=d,this._b=p,this._e=m,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(d)),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.slice=function(h,u){var d=h||0;if(d<0)throw new pe.ArgumentOutOfRangeError;if("number"==typeof u&&u<d)throw new pe.ArgumentOutOfRangeError;return new pv(this,d,u)};var vf=function(h){function u(d,p,m){this.source=d,this._e=p,this._n=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this._n<0?(d.onNext(-1),d.onCompleted(),ze):this.source.subscribe(new ju(d,this._e,this._n))},u}(Se),ju=function(h){function u(d,p,m){this._o=d,this._e=p,this._n=m,this._v=0,this._hv=!1,this._i=0,h.call(this)}return O(u,h),u.prototype.next=function(d){this._i>=this._n&&d===this._e&&(this._hv=!0,this._v=this._i),this._i++},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onNext(this._hv?this._v:-1),this._o.onCompleted()},u}(Ae);J.lastIndexOf=function(h,u){var d=+u||0;return Math.abs(d)===1/0&&(d=0),new vf(this,h,d)},Re.wrap=function(h){function u(){return Re.spawn.call(this,h.apply(this,arguments))}return u.__generatorFunction__=h,u};var Gt=Re.spawn=function(){for(var h=arguments[0],u=this,d=[],p=1,m=arguments.length;p<m;p++)d.push(arguments[p]);return new Qt(function(b){var C=new ot;if(Le(h)&&(h=h.apply(u,d)),!h||!Le(h.next))return b.onNext(h),b.onCompleted();function A(z){var re=F(h.next).call(h,z);if(re===M)return b.onError(re.e);X(re)}function L(z){var re=F(h.next).call(h,z);if(re===M)return b.onError(re.e);X(re)}function X(z){if(z.done)return b.onNext(z.value),void b.onCompleted();var re=ec.call(u,z.value),xe=null,at=!1;Re.isObservable(re)?C.add(re.subscribe(function(Je){at=!0,xe=Je},L,function(){at&&A(xe)})):L(new TypeError("type not supported"))}return A(),C})};function ec(h){return!h||Re.isObservable(h)?h:Qe(h)?Re.fromPromise(h):function yf(h){var u=h.constructor;return!!u&&("GeneratorFunction"===u.name||"GeneratorFunction"===u.displayName||_f(u.prototype))}(h)||_f(h)?Gt.call(this,h):Le(h)?mv.call(this,h):xt(h)||Ot(h)?Ax.call(this,h):tc(h)?gv.call(this,h):h}function Ax(h){return Re.from(h).concatMap(function(u){return Re.isObservable(u)||tc(u)?ec.call(null,u):pe.Observable.just(u)}).toArray()}function gv(h){for(var u=new h.constructor,d=Object.keys(h),p=[],m=0,b=d.length;m<b;m++){var C=d[m],A=ec.call(this,h[C]);A&&Re.isObservable(A)?L(A,C):u[C]=h[C]}return Re.forkJoin.apply(Re,p).map(function(){return u});function L(X,z){u[z]=ft,p.push(X.map(function(re){u[z]=re}))}}function mv(h){var u=this;return new Qt(function(d){h.call(u,function(){var p=arguments[0],m=arguments[1];if(p)return d.onError(p);if(arguments.length>2){for(var b=[],C=1,A=arguments.length;C<A;C++)b.push(arguments[C]);m=b}d.onNext(m),d.onCompleted()})})}function _f(h){return Le(h.next)&&Le(h.throw)}function tc(h){return Object==h.constructor}Re.start=function(h,u,d){return vv(h,u,d)()};var vv=Re.toAsync=function(h,u,d){return Ce(d)||(d=Cn),function(){var p=arguments,m=new Jo;return d.schedule(null,function(){var b;try{b=h.apply(u,p)}catch(C){return void m.onError(C)}m.onNext(b),m.onCompleted()}),m.asObservable()}};function _e(h,u,d,p){var m=new Jo;return p.push(function pn(h,u,d){return function(){for(var m=arguments.length,b=new Array(m),C=0;C<m;C++)b[C]=arguments[C];if(Le(d)){if((b=F(d).apply(u,b))===M)return h.onError(b.e);h.onNext(b)}else h.onNext(b.length<=1?b[0]:b);h.onCompleted()}}(m,u,d)),h.apply(u,p),m.asObservable()}function _v(h,u,d,p){var m=new Jo;return p.push(function yv(h,u,d){return function(){var m=arguments[0];if(m)return h.onError(m);for(var b=arguments.length,C=[],A=1;A<b;A++)C[A-1]=arguments[A];if(Le(d)){if((C=F(d).apply(u,C))===M)return h.onError(C.e);h.onNext(C)}else h.onNext(C.length<=1?C[0]:C);h.onCompleted()}}(m,u,d)),h.apply(u,p),m.asObservable()}function Hu(h,u,d){this._e=h,this._n=u,this._fn=d,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function Ko(h,u,d){var p=new ot,m=Object.prototype.toString.call(h);if(function ui(h){return Oe.StaticNodeList?h instanceof Oe.StaticNodeList||h instanceof Oe.NodeList:"[object NodeList]"===Object.prototype.toString.call(h)}(h)||"[object HTMLCollection]"===m)for(var b=0,C=h.length;b<C;b++)p.add(Ko(h.item(b),u,d));else h&&p.add(new Hu(h,u,d));return p}Re.fromCallback=function(h,u,d){return function(){typeof u>"u"&&(u=this);for(var p=arguments.length,m=new Array(p),b=0;b<p;b++)m[b]=arguments[b];return _e(h,u,d,m)}},Re.fromNodeCallback=function(h,u,d){return function(){typeof u>"u"&&(u=this);for(var p=arguments.length,m=new Array(p),b=0;b<p;b++)m[b]=arguments[b];return _v(h,u,d,m)}},Hu.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},pe.config.useNativeEvents=!1;var kr=function(h){function u(p,m,b){this._el=p,this._n=m,this._fn=b,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(p){return Ko(this._el,this._n,function d(p,m){return function(){var C=arguments[0];if(Le(m)&&(C=F(m).apply(null,arguments))===M)return p.onError(C.e);p.onNext(C)}}(p,this._fn))},u}(Se);Re.fromEvent=function(h,u,d){return h.addListener?nc(function(p){h.addListener(u,p)},function(p){h.removeListener(u,p)},d):pe.config.useNativeEvents||"function"!=typeof h.on||"function"!=typeof h.off?new kr(h,u,d).publish().refCount():nc(function(p){h.on(u,p)},function(p){h.off(u,p)},d)};var Vu=function(h){function u(m,b,C){this._add=m,this._del=b,this._fn=C,h.call(this)}function p(m,b,C){this._del=m,this._fn=b,this._ret=C,this.isDisposed=!1}return O(u,h),u.prototype.subscribeCore=function(m){var b=function d(m,b){return function(){var A=arguments[0];if(Le(b)&&(A=F(b).apply(null,arguments))===M)return m.onError(A.e);m.onNext(A)}}(m,this._fn),C=this._add(b);return new p(this._del,b,C)},p.prototype.dispose=function(){this.isDisposed||(Le(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},u}(Se),nc=Re.fromEventPattern=function(h,u,d){return new Vu(h,u,d).publish().refCount()};Re.startAsync=function(h){var u=F(h)();return u===M?Ms(u.e):Wt(u)};var bv=function(h){function u(d,p){this.source=d,this.controller=new Fn,this.paused=!0,this.pauser=p&&p.subscribe?this.controller.merge(p):this.controller,h.call(this)}return O(u,h),u.prototype._subscribe=function(d){var p=this.source.publish(),m=p.subscribe(d),b=ze,C=this.pauser.startWith(!this.paused).distinctUntilChanged().subscribe(function(A){A?b=p.connect():(b.dispose(),b=ze)});return new On([m,b,C])},u.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},u.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},u}(Re);J.pausable=function(h){return new bv(this,h)};var bf=function(h){function u(d,p){this.source=d,this.controller=new Fn,this.paused=!0,this.pauser=p&&p.subscribe?this.controller.merge(p):this.controller,h.call(this)}return O(u,h),u.prototype._subscribe=function(d){var m,p=[];function b(){for(;p.length>0;)d.onNext(p.shift())}var C=function Ix(h,u,d){return new Qt(function(p){var L,m=[!1,!1],b=!1,C=!1,A=new Array(2);function X(z,re){if(A[re]=z,m[re]=!0,b||(b=m.every(hn))){if(L)return p.onError(L);var xe=F(d).apply(null,A);if(xe===M)return p.onError(xe.e);p.onNext(xe)}C&&A[1]&&p.onCompleted()}return new rt(h.subscribe(function(z){X(z,0)},function(z){A[1]?p.onError(z):L=z},function(){C=!0,A[1]&&p.onCompleted()}),u.subscribe(function(z){X(z,1)},function(z){p.onError(z)},function(){C=!0,X(!0,1)}))},h)}(this.source,this.pauser.startWith(!this.paused).distinctUntilChanged(),function(A,L){return{data:A,shouldFire:L}}).subscribe(function(A){m!==ft&&A.shouldFire!==m?(m=A.shouldFire,A.shouldFire&&b()):(m=A.shouldFire,A.shouldFire?d.onNext(A.data):p.push(A.data))},function(A){b(),d.onError(A)},function(){b(),d.onCompleted()});return C},u.prototype.pause=function(){this.paused=!0,this.controller.onNext(!1)},u.prototype.resume=function(){this.paused=!1,this.controller.onNext(!0)},u}(Re);J.pausableBuffered=function(h){return new bf(this,h)};var hi=function(h){function u(d,p,m){h.call(this),this.subject=new ts(p,m),this.source=d.multicast(this.subject).refCount()}return O(u,h),u.prototype._subscribe=function(d){return this.source.subscribe(d)},u.prototype.request=function(d){return this.subject.request(d??-1)},u}(Re),ts=function(h){function u(d,p){null==d&&(d=!0),h.call(this),this.subject=new Fn,this.enableQueue=d,this.queue=d?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=p||Ee}return O(u,h),Me(u.prototype,vi,{_subscribe:function(d){return this.subject.subscribe(d)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Oi.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(d){this.hasFailed=!0,this.error=d,this.enableQueue&&0!==this.queue.length?this.queue.push(Oi.createOnError(d)):(this.subject.onError(d),this.disposeCurrentRequest())},onNext:function(d){this.requestedCount<=0?this.enableQueue&&this.queue.push(Oi.createOnNext(d)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(d))},_processRequest:function(d){if(this.enableQueue)for(;this.queue.length>0&&(d>0||"N"!==this.queue[0].kind);){var p=this.queue.shift();p.accept(this.subject),"N"===p.kind?d--:(this.disposeCurrentRequest(),this.queue=[])}return d},request:function(d){this.disposeCurrentRequest();var p=this;return this.requestedDisposable=this.scheduler.schedule(d,function(m,b){var C=p._processRequest(b);if(!p.hasCompleted&&!p.hasFailed&&C>0)return p.requestedCount=C,Bt(function(){p.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),u}(Re);J.controlled=function(h,u){return h&&Ce(h)&&(u=h,h=!0),null==h&&(h=!0),new hi(this,h,u)};var wf=function(h){function u(m){h.call(this),this.source=m}function d(m,b){return b.source.request(1)}O(u,h),u.prototype._subscribe=function(m){return this.subscription=this.source.subscribe(new p(m,this,this.subscription)),new rt(this.subscription,Cn.schedule(this,d))};var p=function(m){function b(A,L,X){m.call(this),this.observer=A,this.observable=L,this.cancel=X,this.scheduleDisposable=null}function C(A,L){return L.observable.source.request(1)}return O(b,m),b.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},b.prototype.error=function(A){this.observer.onError(A),this.dispose()},b.prototype.next=function(A){this.observer.onNext(A),this.scheduleDisposable=Cn.schedule(this,C)},b.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),m.prototype.dispose.call(this)},b}(Ae);return u}(Re);hi.prototype.stopAndWait=function(){return new wf(this)};var Zo=function(h){function u(m,b){h.call(this),this.source=m,this.windowSize=b}function d(m,b){return b.source.request(b.windowSize)}O(u,h),u.prototype._subscribe=function(m){return this.subscription=this.source.subscribe(new p(m,this,this.subscription)),new rt(this.subscription,Cn.schedule(this,d))};var p=function(m){function b(A,L,X){this.observer=A,this.observable=L,this.cancel=X,this.received=0,this.scheduleDisposable=null,m.call(this)}function C(A,L){return L.observable.source.request(L.observable.windowSize)}return O(b,m),b.prototype.completed=function(){this.observer.onCompleted(),this.dispose()},b.prototype.error=function(A){this.observer.onError(A),this.dispose()},b.prototype.next=function(A){this.observer.onNext(A),this.received=++this.received%this.observable.windowSize,0===this.received&&(this.scheduleDisposable=Cn.schedule(this,C))},b.prototype.dispose=function(){this.observer=null,this.cancel&&(this.cancel.dispose(),this.cancel=null),this.scheduleDisposable&&(this.scheduleDisposable.dispose(),this.scheduleDisposable=null),m.prototype.dispose.call(this)},b}(Ae);return u}(Re);hi.prototype.windowed=function(h){return new Zo(this,h)},J.pipe=function(h){var u=this.pausableBuffered();function d(){u.resume()}return h.addListener("drain",d),u.subscribe(function(p){!h.write(p)&&u.pause()},function(p){h.emit("error",p)},function(){!h._isStdio&&h.end(),h.removeListener("drain",d)}),u.resume(),h};var ns=function(h){function u(d,p,m){this.source=d,this._fn1=p,this._fn2=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=this.source.multicast(this._fn1());return new rt(this._fn2(p).subscribe(d),p.connect())},u}(Se);J.multicast=function(h,u){return Le(h)?new ns(this,h,u):new wv(this,h)},J.publish=function(h){return h&&Le(h)?this.multicast(function(){return new Fn},h):this.multicast(new Fn)},J.share=function(){return this.publish().refCount()},J.publishLast=function(h){return h&&Le(h)?this.multicast(function(){return new Jo},h):this.multicast(new Jo)},J.publishValue=function(h,u){return 2===arguments.length?this.multicast(function(){return new ih(u)},h):this.multicast(new ih(h))},J.shareValue=function(h){return this.publishValue(h).refCount()},J.replay=function(h,u,d,p){return h&&Le(h)?this.multicast(function(){return new za(u,d,p)},h):this.multicast(new za(u,d,p))},J.shareReplay=function(h,u,d){return this.replay(null,h,u,d).refCount()};var ic=function(h,u){this._s=h,this._o=u};ic.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var h=this._s.observers.indexOf(this._o);this._s.observers.splice(h,1),this._o=null}};var xf=function(h){function u(p){this.source=p,this._count=0,this._connectableSubscription=null,h.call(this)}function d(p,m){this._p=p,this._s=m,this.isDisposed=!1}return O(u,h),u.prototype.subscribeCore=function(p){var m=this.source.subscribe(p);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new d(this,m)},d.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},u}(Se),wv=pe.ConnectableObservable=function(h){function u(p,m){this.source=p,this._connection=null,this._source=p.asObservable(),this._subject=m,h.call(this)}function d(p,m){this._p=p,this._s=m}return O(u,h),d.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},u.prototype.connect=function(){if(!this._connection){if(this._subject.isStopped)return ze;var p=this._source.subscribe(this._subject);this._connection=new d(this,p)}return this._connection},u.prototype._subscribe=function(p){return this._subject.subscribe(p)},u.prototype.refCount=function(){return new xf(this)},u}(Re);function xv(h,u){return h.groupJoin(this,u,Ma,function(d,p){return p})}function Gu(h){var u=this;return new Qt(function(d){var p=new Fn,m=new ot,b=new Vt(m);return d.onNext(st(p,b)),m.add(u.subscribe(function(C){p.onNext(C)},function(C){p.onError(C),d.onError(C)},function(){p.onCompleted(),d.onCompleted()})),Qe(h)&&(h=Wt(h)),m.add(h.subscribe(function(C){p.onCompleted(),p=new Fn,d.onNext(st(p,b))},function(C){p.onError(C),d.onError(C)},function(){p.onCompleted(),d.onCompleted()})),b},u)}function zu(h){var u=this;return new Qt(function(d){var p=new gt,m=new ot(p),b=new Vt(m),C=new Fn;return d.onNext(st(C,b)),m.add(u.subscribe(function(L){C.onNext(L)},function(L){C.onError(L),d.onError(L)},function(){C.onCompleted(),d.onCompleted()})),function A(){var L;try{L=h()}catch(z){return void d.onError(z)}Qe(L)&&(L=Wt(L));var X=new we;p.setDisposable(X),X.setDisposable(L.take(1).subscribe(De,function(z){C.onError(z),d.onError(z)},function(){C.onCompleted(),C=new Fn,d.onNext(st(C,b)),A()}))}(),b},u)}J.singleInstance=function(){var d,h=this,u=!1;return new Qt(function(m){return function p(){return u||(u=!0,d=h.finally(function(){u=!1}).publish().refCount()),d}().subscribe(m)})},J.join=function(h,u,d,p){var m=this;return new Qt(function(b){var C=new ot,A=!1,L=!1,X=0,z=0,re=new so,xe=new so,at=function(Je){b.onError(Je)};return C.add(m.subscribe(function(Je){var dt=X++,vt=new we;re.set(dt,Je),C.add(vt);var nt=F(u)(Je);if(nt===M)return b.onError(nt.e);vt.setDisposable(nt.take(1).subscribe(De,at,function(){re.delete(dt)&&0===re.size&&A&&b.onCompleted(),C.remove(vt)})),xe.forEach(function(Nn){var Sn=F(p)(Je,Nn);if(Sn===M)return b.onError(Sn.e);b.onNext(Sn)})},at,function(){A=!0,(L||0===re.size)&&b.onCompleted()})),C.add(h.subscribe(function(Je){var dt=z++,vt=new we;xe.set(dt,Je),C.add(vt);var nt=F(d)(Je);if(nt===M)return b.onError(nt.e);vt.setDisposable(nt.take(1).subscribe(De,at,function(){xe.delete(dt)&&0===xe.size&&L&&b.onCompleted(),C.remove(vt)})),re.forEach(function(Nn){var Sn=F(p)(Nn,Je);if(Sn===M)return b.onError(Sn.e);b.onNext(Sn)})},at,function(){L=!0,(A||0===xe.size)&&b.onCompleted()})),C},m)},J.groupJoin=function(h,u,d,p){var m=this;return new Qt(function(b){var C=new ot,A=new Vt(C),L=new so,X=new so,z=0,re=0;return C.add(m.subscribe(function(at){var Je=new Fn,dt=z++;L.set(dt,Je);var vt=F(p)(at,st(Je,A));if(vt===M)return L.forEach(void 0),b.onError(vt.e);b.onNext(vt),X.forEach(function(Sn){Je.onNext(Sn)});var nt=new we;C.add(nt);var Nn=F(u)(at);if(Nn===M)return L.forEach(void 0),b.onError(Nn.e);nt.setDisposable(Nn.take(1).subscribe(De,function(Sn){L.forEach(void 0),b.onError(Sn)},function(){L.delete(dt)&&Je.onCompleted(),C.remove(nt)}))},function(at){L.forEach(void 0),b.onError(at)},function(){b.onCompleted()})),C.add(h.subscribe(function(at){var Je=re++;X.set(Je,at);var dt=new we;C.add(dt);var vt=F(d)(at);if(vt===M)return L.forEach(void 0),b.onError(vt.e);dt.setDisposable(vt.take(1).subscribe(De,function(nt){L.forEach(void 0),b.onError(nt)},function(){X.delete(Je),C.remove(dt)})),L.forEach(function(nt){nt.onNext(at)})},function(at){L.forEach(void 0),b.onError(at)})),A},m)},J.buffer=function(){return this.window.apply(this,arguments).flatMap(rs)},J.window=function(h,u){return 1===arguments.length&&"function"!=typeof arguments[0]?Gu.call(this,h):"function"==typeof h?zu.call(this,h):xv.call(this,h,u)};var Ef=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new $u(d))},u}(Se),$u=function(h){function u(d){this._o=d,this._p=null,this._hp=!1,h.call(this)}return O(u,h),u.prototype.next=function(d){this._hp?this._o.onNext([this._p,d]):this._hp=!0,this._p=d},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.pairwise=function(){return new Ef(this)},J.partition=function(h,u){var d=Be(h,u,3);return[this.filter(h,u),this.filter(function(p,m,b){return!d(p,m,b)})]};var Ev=function(h){function u(d,p){this.c=d,this.s=p}return O(u,h),u.prototype[Ne]=function(){var d=this;return{next:function(){return d.c()?{done:!1,value:d.s}:{done:!0,value:void 0}}}},u}(Ho);J.letBind=J.let=function(h){return h(this)},Re.if=function(h,u,d){return Ia(function(){return d||(d=Ma()),Qe(u)&&(u=Wt(u)),Qe(d)&&(d=Wt(d)),"function"==typeof d.now&&(d=Ma(d)),h()?u:d})},Re.for=Re.forIn=function(h,u,d){return Mu(h,u,d).concat()};var Wu=Re.while=Re.whileDo=function(h,u){return Qe(u)&&(u=Wt(u)),function Cf(h,u){return new Ev(h,u)}(h,u).concat()};J.doWhile=function(h){return Jr([this,Wu(h,this)])},Re.case=function(h,u,d){return Ia(function(){Qe(d)&&(d=Wt(d)),d||(d=Ma()),Ce(d)&&(d=Ma(d));var p=u[h()];return Qe(p)&&(p=Wt(p)),p||d})};var Df=function(h){function u(p,m,b){this.source=p,this._fn=m,this._scheduler=b,h.call(this)}function d(p,m){var A,b=p[0],C=p[1];if(b.q.length>0){A=b.q.shift();var L=new we;b.d.add(L),L.setDisposable(A.subscribe(new Sf(b,C,L))),m([b,C])}else b.isAcquired=!1}return O(u,h),u.prototype._ensureActive=function(p){var m=!1;p.q.length>0&&(m=!p.isAcquired,p.isAcquired=!0),m&&p.m.setDisposable(this._scheduler.scheduleRecursive([p,this],d))},u.prototype.subscribeCore=function(p){var m=new gt,b=new ot(m),C={q:[],m,d:b,activeCount:0,isAcquired:!1,o:p};return C.q.push(this.source),C.activeCount++,this._ensureActive(C),b},u}(Se),Sf=function(h){function u(d,p,m){this._s=d,this._p=p,this._m1=m,h.call(this)}return O(u,h),u.prototype.next=function(d){this._s.o.onNext(d);var p=F(this._p._fn)(d);if(p===M)return this._s.o.onError(p.e);this._s.q.push(p),this._s.activeCount++,this._p._ensureActive(this._s)},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.d.remove(this._m1),this._s.activeCount--,0===this._s.activeCount&&this._s.o.onCompleted()},u}(Ae);function is(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return u}J.expand=function(h,u){return Ce(u)||(u=Ee),new Df(this,h,u)};var Tf=function(h){function u(d,p){this._sources=d,this._cb=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){if(0===this._sources.length)return d.onCompleted(),ze;for(var p=this._sources.length,m={finished:!1,hasResults:new Array(p),hasCompleted:new Array(p),results:new Array(p)},b=new ot,C=0,A=this._sources.length;C<A;C++){var L=this._sources[C];Qe(L)&&(L=Wt(L)),b.add(L.subscribe(new Xu(d,m,C,this._cb,b)))}return b},u}(Se),Xu=function(h){function u(d,p,m,b,C){this._o=d,this._s=p,this._i=m,this._cb=b,this._subs=C,h.call(this)}return O(u,h),u.prototype.next=function(d){this._s.finished||(this._s.hasResults[this._i]=!0,this._s.results[this._i]=d)},u.prototype.error=function(d){this._s.finished=!0,this._o.onError(d),this._subs.dispose()},u.prototype.completed=function(){if(!this._s.finished){if(!this._s.hasResults[this._i])return this._o.onCompleted();this._s.hasCompleted[this._i]=!0;for(var d=0;d<this._s.results.length;d++)if(!this._s.hasCompleted[d])return;this._s.finished=!0;var p=F(this._cb).apply(null,this._s.results);if(p===M)return this._o.onError(p.e);this._o.onNext(p),this._o.onCompleted()}},u}(Ae);Re.forkJoin=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];var p=Le(u[h-1])?u.pop():is;return Array.isArray(u[0])&&(u=u[0]),new Tf(u,p)},J.forkJoin=function(){for(var h=arguments.length,u=new Array(h),d=0;d<h;d++)u[d]=arguments[d];return Array.isArray(u[0])?u[0].unshift(this):u.unshift(this),Re.forkJoin.apply(null,u)},J.manySelect=J.extend=function(h,u){Ce(u)||(u=pe.Scheduler.immediate);var d=this;return Ia(function(){var p;return d.map(function(m){var b=new Cv(m);return p&&p.onNext(m),p=b,b}).tap(De,function(m){p&&p.onError(m)},function(){p&&p.onCompleted()}).observeOn(u).map(h)},d)};var Cv=function(h){function u(d){h.call(this),this.head=d,this.tail=new Jo}return O(u,h),Me(u.prototype,vi,{_subscribe:function(d){var p=new ot;return p.add(Ee.schedule(this,function(m,b){d.onNext(b.head),p.add(b.tail.mergeAll().subscribe(d))})),p},onCompleted:function(){this.onNext(Re.empty())},onError:function(d){this.onNext(Re.throw(d))},onNext:function(d){this.tail.onNext(d),this.tail.onCompleted()}}),u}(Re),so=Oe.Map||function(){function h(){this.size=0,this._values=[],this._keys=[]}return h.prototype.delete=function(u){var d=this._keys.indexOf(u);return-1!==d&&(this._values.splice(d,1),this._keys.splice(d,1),this.size--,!0)},h.prototype.get=function(u){var d=this._keys.indexOf(u);return-1===d?ft:this._values[d]},h.prototype.set=function(u,d){var p=this._keys.indexOf(u);return-1===p?(this._keys.push(u),this._values.push(d),this.size++):this._values[p]=d,this},h.prototype.forEach=function(u,d){for(var p=0;p<this.size;p++)u.call(d,this._values[p],this._keys[p])},h}();function ei(h){this.patterns=h}function Os(h,u){this.expression=h,this.selector=u}function Sv(h,u,d){var p=h.get(u);if(!p){var m=new Tv(u,d);return h.set(u,m),m}return p}function Yu(h,u,d){this.joinObserverArray=h,this.onNext=u,this.onCompleted=d,this.joinObservers=new so;for(var p=0,m=this.joinObserverArray.length;p<m;p++){var b=this.joinObserverArray[p];this.joinObservers.set(b,b)}}ei.prototype.and=function(h){return new ei(this.patterns.concat(h))},ei.prototype.thenDo=function(h){return new Os(this,h)},Os.prototype.activate=function(h,u,d){for(var p=[],m=function jn(h){return function(u){h.onError(u)}}(u),b=0,C=this.expression.patterns.length;b<C;b++)p.push(Sv(h,this.expression.patterns[b],m));var A=new Yu(p,function Dv(h,u){return function(){var p=F(h.selector).apply(h,arguments);if(p===M)return u.onError(p.e);u.onNext(p)}}(this,u),function(){for(var L=0,X=p.length;L<X;L++)p[L].removeActivePlan(A);d(A)});for(b=0,C=p.length;b<C;b++)p[b].addActivePlan(A);return A},Yu.prototype.dequeue=function(){this.joinObservers.forEach(function(h){h.queue.shift()})},Yu.prototype.match=function(){var h,u,d=!0;for(h=0,u=this.joinObserverArray.length;h<u;h++)if(0===this.joinObserverArray[h].queue.length){d=!1;break}if(d){var p=[],m=!1;for(h=0,u=this.joinObserverArray.length;h<u;h++)p.push(this.joinObserverArray[h].queue[0]),"C"===this.joinObserverArray[h].queue[0].kind&&(m=!0);if(m)this.onCompleted();else{this.dequeue();var b=[];for(h=0,u=p.length;h<p.length;h++)b.push(p[h].value);this.onNext.apply(this,b)}}};var Tv=function(h){function u(p,m){h.call(this),this.source=p,this.onError=m,this.queue=[],this.activePlans=[],this.subscription=new we,this.isDisposed=!1}O(u,h);var d=u.prototype;return d.next=function(p){if(!this.isDisposed){if("E"===p.kind)return this.onError(p.error);this.queue.push(p);for(var m=this.activePlans.slice(0),b=0,C=m.length;b<C;b++)m[b].match()}},d.error=De,d.completed=De,d.addActivePlan=function(p){this.activePlans.push(p)},d.subscribe=function(){this.subscription.setDisposable(this.source.materialize().subscribe(this))},d.removeActivePlan=function(p){this.activePlans.splice(this.activePlans.indexOf(p),1),0===this.activePlans.length&&this.dispose()},d.dispose=function(){h.prototype.dispose.call(this),this.isDisposed||(this.isDisposed=!0,this.subscription.dispose())},u}(Ae);J.and=function(h){return new ei([this,h])},J.thenDo=function(h){return new ei([this]).thenDo(h)},Re.when=function(){var u,h=arguments.length;if(Array.isArray(arguments[0]))u=arguments[0];else{u=new Array(h);for(var d=0;d<h;d++)u[d]=arguments[d]}return new Qt(function(p){var m=[],b=new so,C=Ts(function(z){p.onNext(z)},function(z){b.forEach(function(re){re.onError(z)}),p.onError(z)},function(z){p.onCompleted()});try{for(var A=0,L=u.length;A<L;A++)m.push(u[A].activate(b,C,function(z){var re=m.indexOf(z);m.splice(re,1),0===m.length&&p.onCompleted()}))}catch(z){return Ms(z).subscribe(p)}var X=new ot;return b.forEach(function(z){z.subscribe(),X.add(z)}),X})};var Av=function(h){function u(p,m){this._dt=p,this._s=m,h.call(this)}function d(p,m){m.onNext(0),m.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleFuture(p,this._dt,d)},u}(Se);function Ua(h,u,d){return new Qt(function(p){var m=h,b=jl(u);return d.scheduleRecursiveFuture(0,m,function(C,A){if(b>0){var L=d.now();(m=new Date(m.getTime()+b)).getTime()<=L&&(m=new Date(L+b))}p.onNext(C),A(C+1,new Date(m))})})}function ja(h,u,d){return h===u?new Qt(function(p){return d.schedulePeriodic(0,u,function(m){return p.onNext(m),m+1})}):Ia(function(){return Ua(new Date(d.now()+h),u,d)})}var rc=Re.interval=function(h,u){return ja(h,h,Ce(u)?u:Cn)};function qu(h,u,d){return new Qt(function(p){var X,m=!1,b=new gt,C=null,A=[],L=!1;return X=h.materialize().timestamp(d).subscribe(function(z){var re,xe;"E"===z.value.kind?((A=[]).push(z),C=z.value.error,xe=!L):(A.push({value:z.value,timestamp:z.timestamp+u}),xe=!m,m=!0),xe&&(null!==C?p.onError(C):(re=new we,b.setDisposable(re),re.setDisposable(d.scheduleRecursiveFuture(null,u,function(at,Je){var dt,vt,nt,Nn;if(null===C){L=!0;do{nt=null,A.length>0&&A[0].timestamp-d.now()<=0&&(nt=A.shift().value),null!==nt&&nt.accept(p)}while(null!==nt);Nn=!1,vt=0,A.length>0?(Nn=!0,vt=Math.max(0,A[0].timestamp-d.now())):m=!1,L=!1,null!==(dt=C)?p.onError(dt):Nn&&Je(null,vt)}}))))}),new rt(X,b)},h)}function Mv(h,u,d){return Ia(function(){return qu(h,u-d.now(),d)})}function Qo(h,u,d){var p,m;return Le(u)?m=u:(p=u,m=d),new Qt(function(b){var C=new ot,A=!1,L=new gt;function X(){L.setDisposable(h.subscribe(function(re){var xe=F(m)(re);if(xe===M)return b.onError(xe.e);var at=new we;C.add(at),at.setDisposable(xe.subscribe(function(){b.onNext(re),C.remove(at),z()},function(Je){b.onError(Je)},function(){b.onNext(re),C.remove(at),z()}))},function(re){b.onError(re)},function(){A=!0,L.dispose(),z()}))}function z(){A&&0===C.length&&b.onCompleted()}return p?L.setDisposable(p.subscribe(X,function(re){b.onError(re)},X)):X(),new rt(L,C)},h)}Re.timer=function(h,u,d){var p;return Ce(d)||(d=Cn),null!=u&&"number"==typeof u?p=u:Ce(u)&&(d=u),(h instanceof Date||"number"==typeof h)&&p===ft?function Iv(h,u){return new Av(h,u)}(h,d):h instanceof Date&&p!==ft?Ua(h,u,d):ja(h,p,d)},J.delay=function(){var h=arguments[0];if("number"==typeof h||h instanceof Date){var u=h,d=arguments[1];return Ce(d)||(d=Cn),u instanceof Date?Mv(this,u,d):qu(this,u,d)}if(Re.isObservable(h)||Le(h))return Qo(this,h,arguments[1]);throw new Error("Invalid arguments")};var Ha=function(h){function u(d,p,m){Ce(m)||(m=Cn),this.source=d,this._dt=p,this._s=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new gt;return new rt(this.source.subscribe(new Rv(d,this._dt,this._s,p)),p)},u}(Se),Rv=function(h){function u(p,m,b,C){this._o=p,this._d=m,this._scheduler=b,this._c=C,this._v=null,this._hv=!1,this._id=0,h.call(this)}return O(u,h),u.prototype.next=function(p){this._hv=!0,this._v=p;var m=++this._id,b=new we;this._c.setDisposable(b),b.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(C,A){A._hv&&A._id===m&&A._o.onNext(p),A._hv=!1}))},u.prototype.error=function(p){this._c.dispose(),this._o.onError(p),this._hv=!1,this._id++},u.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},u}(Ae);function Mx(h,u){return new Qt(function(d){var p,m=!1,b=new gt,C=0,A=h.subscribe(function(L){var X=F(u)(L);if(X===M)return d.onError(X.e);Qe(X)&&(X=Wt(X)),m=!0,p=L;var z=++C,re=new we;b.setDisposable(re),re.setDisposable(X.subscribe(function(){m&&C===z&&d.onNext(p),m=!1,re.dispose()},function(xe){d.onError(xe)},function(){m&&C===z&&d.onNext(p),m=!1,re.dispose()}))},function(L){b.dispose(),d.onError(L),m=!1,C++},function(){b.dispose(),m&&d.onNext(p),d.onCompleted(),m=!1,C++});return new rt(A,b)},h)}function rs(h){return h.toArray()}J.debounce=function(){if(Le(arguments[0]))return Mx(this,arguments[0]);if("number"==typeof arguments[0])return new Ha(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")},J.windowWithTime=J.windowTime=function(h,u,d){var m,p=this;return null==u&&(m=h),Ce(d)||(d=Cn),"number"==typeof u?m=u:Ce(u)&&(m=h,d=u),new Qt(function(b){var C,z,A=m,L=h,X=[],re=new gt,xe=0;return C=new ot(re),z=new Vt(C),X.push(new Fn),b.onNext(st(X[0],z)),function at(){var Je=new we,dt=!1,vt=!1;re.setDisposable(Je),L===A?(dt=!0,vt=!0):L<A?dt=!0:vt=!0;var nt=dt?L:A,Nn=nt-xe;xe=nt,dt&&(L+=m),vt&&(A+=m),Je.setDisposable(d.scheduleFuture(null,Nn,function(){if(vt){var Sn=new Fn;X.push(Sn),b.onNext(st(Sn,z))}dt&&X.shift().onCompleted(),at()}))}(),C.add(p.subscribe(function(Je){for(var dt=0,vt=X.length;dt<vt;dt++)X[dt].onNext(Je)},function(Je){for(var dt=0,vt=X.length;dt<vt;dt++)X[dt].onError(Je);b.onError(Je)},function(){for(var Je=0,dt=X.length;Je<dt;Je++)X[Je].onCompleted();b.onCompleted()})),z},p)},J.windowWithTimeOrCount=J.windowTimeOrCount=function(h,u,d){var p=this;return Ce(d)||(d=Cn),new Qt(function(m){var b=new gt,C=new ot(b),A=new Vt(C),L=0,X=0,z=new Fn;function re(xe){var at=new we;b.setDisposable(at),at.setDisposable(d.scheduleFuture(null,h,function(){if(xe===X){L=0;var Je=++X;z.onCompleted(),z=new Fn,m.onNext(st(z,A)),re(Je)}}))}return m.onNext(st(z,A)),re(0),C.add(p.subscribe(function(xe){var at=0,Je=!1;z.onNext(xe),++L===u&&(Je=!0,L=0,at=++X,z.onCompleted(),z=new Fn,m.onNext(st(z,A))),Je&&re(at)},function(xe){z.onError(xe),m.onError(xe)},function(){z.onCompleted(),m.onCompleted()})),A},p)},J.bufferWithTime=J.bufferTime=function(h,u,d){return this.windowWithTime(h,u,d).flatMap(rs)},J.bufferWithTimeOrCount=J.bufferTimeOrCount=function(h,u,d){return this.windowWithTimeOrCount(h,u,d).flatMap(rs)};var Rx=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Pv(d,this._s))},u}(Se),Pv=function(h){function u(d,p){this._o=d,this._s=p,this._l=p.now(),h.call(this)}return O(u,h),u.prototype.next=function(d){var p=this._s.now(),m=p-this._l;this._l=p,this._o.onNext({value:d,interval:m})},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.timeInterval=function(h){return Ce(h)||(h=Cn),new Rx(this,h)};var Ov=function(h){function u(d,p){this.source=d,this._s=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Px(d,this._s))},u}(Se),Px=function(h){function u(d,p){this._o=d,this._s=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._o.onNext({value:d,timestamp:this._s.now()})},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.timestamp=function(h){return Ce(h)||(h=Cn),new Ov(this,h)};var kv=function(h){function u(d,p){this.source=d,this._sampler=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p={o:d,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new we};return p.sourceSubscription.setDisposable(this.source.subscribe(new If(p))),new rt(p.sourceSubscription,this._sampler.subscribe(new Ku(p)))},u}(Se),Ku=function(h){function u(d){this._s=d,h.call(this)}return O(u,h),u.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},u.prototype.next=function(){this._handleMessage()},u.prototype.error=function(d){this._s.onError(d)},u.prototype.completed=function(){this._handleMessage()},u}(Ae),If=function(h){function u(d){this._s=d,h.call(this)}return O(u,h),u.prototype.next=function(d){this._s.hasValue=!0,this._s.value=d},u.prototype.error=function(d){this._s.o.onError(d)},u.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},u}(Ae);J.sample=function(h,u){return Ce(u)||(u=Cn),new kv(this,"number"==typeof h?rc(h,u):h)};var Va=pe.TimeoutError=function(h){this.message=h||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};function Ga(h,u,d,p){return Le(u)&&(p=d,d=u,u=Pa()),Re.isObservable(p)||(p=Ms(new Va)),new Qt(function(m){var b=new gt,C=new gt,A=new we;b.setDisposable(A);var L=0,X=!1;function z(xe){var at=L,Je=new we;function dt(){return X=at===L}C.setDisposable(Je),Je.setDisposable(xe.subscribe(function(){dt()&&b.setDisposable(p.subscribe(m)),Je.dispose()},function(vt){dt()&&m.onError(vt)},function(){dt()&&b.setDisposable(p.subscribe(m))}))}function re(){var xe=!X;return xe&&L++,xe}return z(u),A.setDisposable(h.subscribe(function(xe){if(re()){m.onNext(xe);var at=F(d)(xe);if(at===M)return m.onError(at.e);z(Qe(at)?Wt(at):at)}},function(xe){re()&&m.onError(xe)},function(){re()&&m.onCompleted()})),new rt(b,C)},h)}function Mf(h,u,d,p){return Ce(d)&&(p=d,d=Ms(new Va)),d instanceof Error&&(d=Ms(d)),Ce(p)||(p=Cn),Re.isObservable(d)||(d=Ms(new Va)),new Qt(function(m){var b=0,C=new we,A=new gt,L=!1,X=new gt;function z(){var re=b;X.setDisposable(p.scheduleFuture(null,u,function(){(L=b===re)&&(Qe(d)&&(d=Wt(d)),A.setDisposable(d.subscribe(m)))}))}return A.setDisposable(C),z(),C.setDisposable(h.subscribe(function(re){L||(b++,m.onNext(re),z())},function(re){L||(b++,m.onError(re))},function(){L||(b++,m.onCompleted())})),new rt(A,X)},h)}Va.prototype=Object.create(Error.prototype),J.timeout=function(){var h=arguments[0];if(h instanceof Date||"number"==typeof h)return Mf(this,h,arguments[1],arguments[2]);if(Re.isObservable(h)||Le(h))return Ga(this,h,arguments[1],arguments[2]);throw new Error("Invalid arguments")};var Rf=function(h){function u(p,m,b,C,A,L){this._state=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._timeFn=A,this._s=L,h.call(this)}function d(p,m){if(p.hasResult&&p.o.onNext(p.result),p.first)p.first=!1;else if(p.newState=F(p.self._itrFn)(p.newState),p.newState===M)return p.o.onError(p.newState.e);if(p.hasResult=F(p.self._cndFn)(p.newState),p.hasResult===M)return p.o.onError(p.hasResult.e);if(p.hasResult){if(p.result=F(p.self._resFn)(p.newState),p.result===M)return p.o.onError(p.result.e);var b=F(p.self._timeFn)(p.newState);if(b===M)return p.o.onError(b.e);m(p,b)}else p.o.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursiveFuture({o:p,self:this,newState:this._state,first:!0,hasResult:!1},new Date(this._s.now()),d)},u}(Se);Re.generateWithAbsoluteTime=function(h,u,d,p,m,b){return Ce(b)||(b=Cn),new Rf(h,u,d,p,m,b)};var sc=function(h){function u(p,m,b,C,A,L){this._state=p,this._cndFn=m,this._itrFn=b,this._resFn=C,this._timeFn=A,this._s=L,h.call(this)}function d(p,m){if(p.hasResult&&p.o.onNext(p.result),p.first)p.first=!1;else if(p.newState=F(p.self._itrFn)(p.newState),p.newState===M)return p.o.onError(p.newState.e);if(p.hasResult=F(p.self._cndFn)(p.newState),p.hasResult===M)return p.o.onError(p.hasResult.e);if(p.hasResult){if(p.result=F(p.self._resFn)(p.newState),p.result===M)return p.o.onError(p.result.e);var b=F(p.self._timeFn)(p.newState);if(b===M)return p.o.onError(b.e);m(p,b)}else p.o.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){return this._s.scheduleRecursiveFuture({o:p,self:this,newState:this._state,first:!0,hasResult:!1},0,d)},u}(Se);Re.generateWithRelativeTime=function(h,u,d,p,m,b){return Ce(b)||(b=Cn),new sc(h,u,d,p,m,b)};var Nv=function(h){function u(p,m,b){this.source=p,this._dt=m,this._s=b,h.call(this)}function d(p,m){m[2].setDisposable(m[0].subscribe(m[1]))}return O(u,h),u.prototype.subscribeCore=function(p){var m=new gt;return m.setDisposable(this._s.scheduleFuture([this.source,p,m],this._dt,d)),m},u}(Se);J.delaySubscription=function(h,u){return Ce(u)||(u=Cn),new Nv(this,h,u)};var oc=function(h){function u(d,p,m){this.source=d,this._d=p,this._s=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Zu(d,this))},u}(Se),Zu=function(h){function u(d,p){this._o=d,this._s=p._s,this._d=p._d,this._q=[],h.call(this)}return O(u,h),u.prototype.next=function(d){var p=this._s.now();for(this._q.push({interval:p,value:d});this._q.length>0&&p-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(var d=this._s.now();this._q.length>0&&d-this._q[0].interval>=this._d;)this._o.onNext(this._q.shift().value);this._o.onCompleted()},u}(Ae);J.skipLastWithTime=function(h,u){return Ce(u)||(u=Cn),new oc(this,h,u)};var ac=function(h){function u(d,p,m){this.source=d,this._d=p,this._s=m,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return this.source.subscribe(new Ox(d,this._d,this._s))},u}(Se),Ox=function(h){function u(d,p,m){this._o=d,this._d=p,this._s=m,this._q=[],h.call(this)}return O(u,h),u.prototype.next=function(d){var p=this._s.now();for(this._q.push({interval:p,value:d});this._q.length>0&&p-this._q[0].interval>=this._d;)this._q.shift()},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){for(var d=this._s.now();this._q.length>0;){var p=this._q.shift();d-p.interval<=this._d&&this._o.onNext(p.value)}this._o.onCompleted()},u}(Ae);J.takeLastWithTime=function(h,u){return Ce(u)||(u=Cn),new ac(this,h,u)},J.takeLastBufferWithTime=function(h,u){var d=this;return Ce(u)||(u=Cn),new Qt(function(p){var m=[];return d.subscribe(function(b){var C=u.now();for(m.push({interval:C,value:b});m.length>0&&C-m[0].interval>=h;)m.shift()},function(b){p.onError(b)},function(){for(var b=u.now(),C=[];m.length>0;){var A=m.shift();b-A.interval<=h&&C.push(A.value)}p.onNext(C),p.onCompleted()})},d)};var Pf=function(h){function u(p,m,b){this.source=p,this._d=m,this._s=b,h.call(this)}function d(p,m){m.onCompleted()}return O(u,h),u.prototype.subscribeCore=function(p){return new rt(this._s.scheduleFuture(p,this._d,d),this.source.subscribe(p))},u}(Se);J.takeWithTime=function(h,u){return Ce(u)||(u=Cn),new Pf(this,h,u)};var Of=function(h){function u(p,m,b){this.source=p,this._d=m,this._s=b,this._open=!1,h.call(this)}function d(p,m){m._open=!0}return O(u,h),u.prototype.subscribeCore=function(p){return new rt(this._s.scheduleFuture(this,this._d,d),this.source.subscribe(new Fv(p,this)))},u}(Se),Fv=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.skipWithTime=function(h,u){return Ce(u)||(u=Cn),new Of(this,h,u)};var Nr=function(h){function u(p,m,b){this.source=p,this._st=m,this._s=b,h.call(this)}function d(p,m){m._open=!0}return O(u,h),u.prototype.subscribeCore=function(p){return this._open=!1,new rt(this._s.scheduleFuture(this,this._st,d),this.source.subscribe(new Lv(p,this)))},u}(Se),Lv=function(h){function u(d,p){this._o=d,this._p=p,h.call(this)}return O(u,h),u.prototype.next=function(d){this._p._open&&this._o.onNext(d)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._o.onCompleted()},u}(Ae);J.skipUntilWithTime=function(h,u){return Ce(u)||(u=Cn),new Nr(this,h,u)},J.takeUntilWithTime=function(h,u){Ce(u)||(u=Cn);var d=this;return new Qt(function(p){return new rt(u.scheduleFuture(p,h,function(m,b){b.onCompleted()}),d.subscribe(p))},d)},J.throttle=function(h,u){Ce(u)||(u=Cn);var d=+h||0;if(d<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var p=this;return new Qt(function(m){var b=0;return p.subscribe(function(C){var A=u.now();(0===b||A-b>=d)&&(b=A,m.onNext(C))},function(C){m.onError(C)},function(){m.onCompleted()})},p)};var lc=function(h){function u(d,p){this._o=d,this._xform=p,h.call(this)}return O(u,h),u.prototype.next=function(d){var p=F(this._xform["@@transducer/step"]).call(this._xform,this._o,d);p===M&&this._o.onError(p.e)},u.prototype.error=function(d){this._o.onError(d)},u.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},u}(Ae);J.transduce=function(h){var u=this;return new Qt(function(d){var p=h(function Qu(h){return{"@@transducer/init":function(){return h},"@@transducer/step":function(u,d){return u.onNext(d)},"@@transducer/result":function(u){return u.onCompleted()}}}(d));return u.subscribe(new lc(d,p))},u)};var kf=function(h){function u(d){this.source=d,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){var p=new we,m=new ot,b={hasCurrent:!1,isStopped:!1,o:d,g:m};return m.add(p),p.setDisposable(this.source.subscribe(new Ju(b))),m},u}(Se),Ju=function(h){function u(p){this._s=p,h.call(this)}function d(p,m){this._s=p,this._i=m,h.call(this)}return O(u,h),u.prototype.next=function(p){if(!this._s.hasCurrent){this._s.hasCurrent=!0,Qe(p)&&(p=Wt(p));var m=new we;this._s.g.add(m),m.setDisposable(p.subscribe(new d(this._s,m)))}},u.prototype.error=function(p){this._s.o.onError(p)},u.prototype.completed=function(){this._s.isStopped=!0,!this._s.hasCurrent&&1===this._s.g.length&&this._s.o.onCompleted()},O(d,h),d.prototype.next=function(p){this._s.o.onNext(p)},d.prototype.error=function(p){this._s.o.onError(p)},d.prototype.completed=function(){this._s.g.remove(this._i),this._s.hasCurrent=!1,this._s.isStopped&&1===this._s.g.length&&this._s.o.onCompleted()},u}(Ae);J.switchFirst=function(){return new kf(this)},J.flatMapFirst=J.exhaustMap=function(h,u,d){return new mt(this,h,u,d).switchFirst()},J.flatMapWithMaxConcurrent=J.flatMapMaxConcurrent=function(h,u,d,p){return new mt(this,u,d,p).merge(h)};var eh=pe.VirtualTimeScheduler=function(h){function u(p,m){this.clock=p,this.comparer=m,this.isEnabled=!1,this.queue=new rn(1024),h.call(this)}O(u,h);var d=u.prototype;return d.now=function(){return this.toAbsoluteTime(this.clock)},d.schedule=function(p,m){return this.scheduleAbsolute(p,this.clock,m)},d.scheduleFuture=function(p,m,b){var C=m instanceof Date?this.toRelativeTime(m-this.now()):this.toRelativeTime(m);return this.scheduleRelative(p,C,b)},d.add=ie,d.toAbsoluteTime=ie,d.toRelativeTime=ie,d.schedulePeriodic=function(p,m,b){return new Su(this,p,m,b).start()},d.scheduleRelative=function(p,m,b){var C=this.add(this.clock,m);return this.scheduleAbsolute(p,C,b)},d.start=function(){if(!this.isEnabled){this.isEnabled=!0;do{var p=this.getNext();null!==p?(this.comparer(p.dueTime,this.clock)>0&&(this.clock=p.dueTime),p.invoke()):this.isEnabled=!1}while(this.isEnabled)}},d.stop=function(){this.isEnabled=!1},d.advanceTo=function(p){var m=this.comparer(this.clock,p);if(this.comparer(this.clock,p)>0)throw new ne;if(0!==m&&!this.isEnabled){this.isEnabled=!0;do{var b=this.getNext();null!==b&&this.comparer(b.dueTime,p)<=0?(this.comparer(b.dueTime,this.clock)>0&&(this.clock=b.dueTime),b.invoke()):this.isEnabled=!1}while(this.isEnabled);this.clock=p}},d.advanceBy=function(p){var m=this.add(this.clock,p),b=this.comparer(this.clock,m);if(b>0)throw new ne;0!==b&&this.advanceTo(m)},d.sleep=function(p){var m=this.add(this.clock,p);if(this.comparer(this.clock,m)>=0)throw new ne;this.clock=m},d.getNext=function(){for(;this.queue.length>0;){var p=this.queue.peek();if(!p.isCancelled())return p;this.queue.dequeue()}return null},d.scheduleAbsolute=function(p,m,b){var C=this,L=new pr(this,p,function A(X,z){return C.queue.remove(L),b(X,z)},m,this.comparer);return this.queue.enqueue(L),L.disposable},u}(Pi);function Nf(h){this.predicate=h}function th(h){this.predicate=h}pe.HistoricalScheduler=function(h){function u(p,m){h.call(this,p??0,m||Rt)}O(u,h);var d=u.prototype;return d.add=function(p,m){return p+m},d.toAbsoluteTime=function(p){return new Date(p).getTime()},d.toRelativeTime=function(p){return p},u}(pe.VirtualTimeScheduler),Nf.prototype.equals=function(h){return h===this||null!=h&&"N"===h.kind&&this.predicate(h.value)},th.prototype.equals=function(h){return h===this||null!=h&&"E"===h.kind&&this.predicate(h.error)};var cc=pe.ReactiveTest={created:100,subscribed:200,disposed:1e3,onNext:function(h,u){return new br(h,"function"==typeof u?new Nf(u):Oi.createOnNext(u))},onError:function(h,u){return new br(h,"function"==typeof u?new th(u):Oi.createOnError(u))},onCompleted:function(h){return new br(h,Oi.createOnCompleted())},subscribe:function(h,u){return new wr(h,u)}},br=pe.Recorded=function(h,u,d){this.time=h,this.value=u,this.comparer=d||Mt};br.prototype.equals=function(h){return this.time===h.time&&this.comparer(this.value,h.value)},br.prototype.toString=function(){return this.value.toString()+"@"+this.time};var wr=pe.Subscription=function(h,u){this.subscribe=h,this.unsubscribe=u||Number.MAX_VALUE};wr.prototype.equals=function(h){return this.subscribe===h.subscribe&&this.unsubscribe===h.unsubscribe},wr.prototype.toString=function(){return"("+this.subscribe+", "+(this.unsubscribe===Number.MAX_VALUE?"Infinite":this.unsubscribe)+")"};var Bv=pe.MockDisposable=function(h){this.scheduler=h,this.disposes=[],this.disposes.push(this.scheduler.clock)};Bv.prototype.dispose=function(){this.disposes.push(this.scheduler.clock)};var uc=function(h){function u(p){h.call(this),this.scheduler=p,this.messages=[]}O(u,h);var d=u.prototype;return d.onNext=function(p){this.messages.push(new br(this.scheduler.clock,Oi.createOnNext(p)))},d.onError=function(p){this.messages.push(new br(this.scheduler.clock,Oi.createOnError(p)))},d.onCompleted=function(){this.messages.push(new br(this.scheduler.clock,Oi.createOnCompleted()))},u}(vi);function xr(h,u){var d=this;this.scheduler=h,this.messages=u,this.subscriptions=[],this.observers=[];for(var p=0,m=this.messages.length;p<m;p++){var b=this.messages[p];!function(A){h.scheduleAbsolute(null,b.time,function(){for(var L=d.observers.slice(0),X=0,z=L.length;X<z;X++)A.accept(L[X]);return ze})}(b.value)}}xr.prototype.then=function(h,u){var d=this;this.subscriptions.push(new wr(this.scheduler.clock));var m,p=this.subscriptions.length-1,b=pe.Observer.create(function(C){var A=h(C);if(A&&"function"==typeof A.then)m=A;else{var L=d.scheduler.clock;m=new xr(d.scheduler,[pe.ReactiveTest.onNext(L,ft),pe.ReactiveTest.onCompleted(L)])}var X=d.observers.indexOf(b);d.observers.splice(X,1),d.subscriptions[p]=new wr(d.subscriptions[p].subscribe,d.scheduler.clock)},function(C){u(C);var A=d.observers.indexOf(b);d.observers.splice(A,1),d.subscriptions[p]=new wr(d.subscriptions[p].subscribe,d.scheduler.clock)});return this.observers.push(b),m||new xr(this.scheduler,this.messages)};var Uv=function(h){function u(d,p){h.call(this);var m,C=this;this.scheduler=d,this.messages=p,this.subscriptions=[],this.observers=[];for(var A=0,L=this.messages.length;A<L;A++)!function(X){d.scheduleAbsolute(null,m.time,function(){for(var z=C.observers.slice(0),re=0,xe=z.length;re<xe;re++)X.accept(z[re]);return ze})}((m=this.messages[A]).value)}return O(u,h),u.prototype._subscribe=function(d){var p=this;this.observers.push(d),this.subscriptions.push(new wr(this.scheduler.clock));var m=this.subscriptions.length-1;return Bt(function(){var b=p.observers.indexOf(d);p.observers.splice(b,1),p.subscriptions[m]=new wr(p.subscriptions[m].subscribe,p.scheduler.clock)})},u}(Re),Ff=function(h){function u(d,p){h.call(this),this.scheduler=d,this.messages=p,this.subscriptions=[]}return O(u,h),u.prototype._subscribe=function(d){var p,b=this;this.subscriptions.push(new wr(this.scheduler.clock));for(var C=this.subscriptions.length-1,A=new ot,L=0,X=this.messages.length;L<X;L++)!function(z){A.add(b.scheduler.scheduleRelative(null,p.time,function(){return z.accept(d),ze}))}((p=this.messages[L]).value);return Bt(function(){b.subscriptions[C]=new wr(b.subscriptions[C].subscribe,b.scheduler.clock),A.dispose()})},u}(Re);pe.TestScheduler=function(h){function u(p,m){return p>m?1:p<m?-1:0}function d(){h.call(this,0,u)}return O(d,h),d.prototype.scheduleAbsolute=function(p,m,b){return m<=this.clock&&(m=this.clock+1),h.prototype.scheduleAbsolute.call(this,p,m,b)},d.prototype.add=function(p,m){return p+m},d.prototype.toAbsoluteTime=function(p){return new Date(p).getTime()},d.prototype.toRelativeTime=function(p){return p},d.prototype.startScheduler=function(p,m){m||(m={}),null==m.created&&(m.created=cc.created),null==m.subscribed&&(m.subscribed=cc.subscribed),null==m.disposed&&(m.disposed=cc.disposed);var C,A,b=this.createObserver();return this.scheduleAbsolute(null,m.created,function(){return C=p(),ze}),this.scheduleAbsolute(null,m.subscribed,function(){return A=C.subscribe(b),ze}),this.scheduleAbsolute(null,m.disposed,function(){return A.dispose(),ze}),this.start(),b},d.prototype.createHotObservable=function(){var m,p=arguments.length;if(Array.isArray(arguments[0]))m=arguments[0];else{m=new Array(p);for(var b=0;b<p;b++)m[b]=arguments[b]}return new Uv(this,m)},d.prototype.createColdObservable=function(){var m,p=arguments.length;if(Array.isArray(arguments[0]))m=arguments[0];else{m=new Array(p);for(var b=0;b<p;b++)m[b]=arguments[b]}return new Ff(this,m)},d.prototype.createResolvedPromise=function(p,m){return new xr(this,[pe.ReactiveTest.onNext(p,m),pe.ReactiveTest.onCompleted(p)])},d.prototype.createRejectedPromise=function(p,m){return new xr(this,[pe.ReactiveTest.onError(p,m)])},d.prototype.createObserver=function(){return new uc(this)},d}(eh);var Qt=pe.AnonymousObservable=function(h){function d(m,b){var C=b[0],A=b[1],L=F(A.__subscribe).call(A,C);L===M&&!C.fail(M.e)&&Ke(M.e),C.setDisposable(function u(m){return m&&Le(m.dispose)?m:Le(m)?Bt(m):ze}(L))}function p(m,b){this.source=b,this.__subscribe=m,h.call(this)}return O(p,h),p.prototype._subscribe=function(m){var b=new oo(m),C=[b,this];return Ee.scheduleRequired()?Ee.schedule(C,d):d(0,C),b},p}(Re),oo=function(h){function u(p){h.call(this),this.observer=p,this.m=new we}O(u,h);var d=u.prototype;return d.next=function(p){var m=F(this.observer.onNext).call(this.observer,p);m===M&&(this.dispose(),Ke(m.e))},d.error=function(p){var m=F(this.observer.onError).call(this.observer,p);this.dispose(),m===M&&Ke(m.e)},d.completed=function(){var p=F(this.observer.onCompleted).call(this.observer);this.dispose(),p===M&&Ke(p.e)},d.setDisposable=function(p){this.m.setDisposable(p)},d.getDisposable=function(){return this.m.getDisposable()},d.dispose=function(){h.prototype.dispose.call(this),this.m.dispose()},u}(Ae),jv=function(h){function u(d,p){this._m=d,this._u=p,h.call(this)}return O(u,h),u.prototype.subscribeCore=function(d){return new rt(this._m.getDisposable(),this._u.subscribe(d))},u}(Se),nh=function(h){function u(d,p,m){h.call(this),this.key=d,this.underlyingObservable=m?new jv(m,p):p}return O(u,h),u.prototype._subscribe=function(d){return this.underlyingObservable.subscribe(d)},u}(Re),Fn=pe.Subject=function(h){function u(){h.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return O(u,h),Me(u.prototype,vi.prototype,{_subscribe:function(d){return Ue(this),this.isStopped?this.hasError?(d.onError(this.error),ze):(d.onCompleted(),ze):(this.observers.push(d),new ic(this,d))},hasObservers:function(){return Ue(this),this.observers.length>0},onCompleted:function(){if(Ue(this),!this.isStopped){this.isStopped=!0;for(var d=0,p=Ft(this.observers),m=p.length;d<m;d++)p[d].onCompleted();this.observers.length=0}},onError:function(d){if(Ue(this),!this.isStopped){this.isStopped=!0,this.error=d,this.hasError=!0;for(var p=0,m=Ft(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){if(Ue(this),!this.isStopped)for(var p=0,m=Ft(this.observers),b=m.length;p<b;p++)m[p].onNext(d)},dispose:function(){this.isDisposed=!0,this.observers=null}}),u.create=function(d,p){return new ea(d,p)},u}(Re),Jo=pe.AsyncSubject=function(h){function u(){h.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return O(u,h),Me(u.prototype,vi.prototype,{_subscribe:function(d){return Ue(this),this.isStopped?(this.hasError?d.onError(this.error):(this.hasValue&&d.onNext(this.value),d.onCompleted()),ze):(this.observers.push(d),new ic(this,d))},hasObservers:function(){return Ue(this),this.observers.length>0},onCompleted:function(){var d;if(Ue(this),!this.isStopped){this.isStopped=!0;var m=Ft(this.observers),p=m.length;if(this.hasValue)for(d=0;d<p;d++){var b=m[d];b.onNext(this.value),b.onCompleted()}else for(d=0;d<p;d++)m[d].onCompleted();this.observers.length=0}},onError:function(d){if(Ue(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=d;for(var p=0,m=Ft(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){Ue(this),!this.isStopped&&(this.value=d,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),u}(Re),ih=pe.BehaviorSubject=function(h){function u(d){h.call(this),this.value=d,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return O(u,h),Me(u.prototype,vi.prototype,{_subscribe:function(d){return Ue(this),this.isStopped?(this.hasError?d.onError(this.error):d.onCompleted(),ze):(this.observers.push(d),d.onNext(this.value),new ic(this,d))},getValue:function(){return Ue(this),this.hasError&&Ke(this.error),this.value},hasObservers:function(){return Ue(this),this.observers.length>0},onCompleted:function(){if(Ue(this),!this.isStopped){this.isStopped=!0;for(var d=0,p=Ft(this.observers),m=p.length;d<m;d++)p[d].onCompleted();this.observers.length=0}},onError:function(d){if(Ue(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=d;for(var p=0,m=Ft(this.observers),b=m.length;p<b;p++)m[p].onError(d);this.observers.length=0}},onNext:function(d){if(Ue(this),!this.isStopped){this.value=d;for(var p=0,m=Ft(this.observers),b=m.length;p<b;p++)m[p].onNext(d)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),u}(Re),za=pe.ReplaySubject=function(h){var u=Math.pow(2,53)-1;function p(m,b,C){this.bufferSize=m??u,this.windowSize=b??u,this.scheduler=C||Ee,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,h.call(this)}return O(p,h),Me(p.prototype,vi.prototype,{_subscribe:function(m){Ue(this);var b=new Wi(this.scheduler,m),C=function d(m,b){return Bt(function(){b.dispose(),!m.isDisposed&&m.observers.splice(m.observers.indexOf(b),1)})}(this,b);this._trim(this.scheduler.now()),this.observers.push(b);for(var A=0,L=this.q.length;A<L;A++)b.onNext(this.q[A].value);return this.hasError?b.onError(this.error):this.isStopped&&b.onCompleted(),b.ensureActive(),C},hasObservers:function(){return Ue(this),this.observers.length>0},_trim:function(m){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&m-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(m){if(Ue(this),!this.isStopped){var b=this.scheduler.now();this.q.push({interval:b,value:m}),this._trim(b);for(var C=0,A=Ft(this.observers),L=A.length;C<L;C++){var X=A[C];X.onNext(m),X.ensureActive()}}},onError:function(m){if(Ue(this),!this.isStopped){this.isStopped=!0,this.error=m,this.hasError=!0;var b=this.scheduler.now();this._trim(b);for(var C=0,A=Ft(this.observers),L=A.length;C<L;C++){var X=A[C];X.onError(m),X.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Ue(this),!this.isStopped){this.isStopped=!0;var m=this.scheduler.now();this._trim(m);for(var b=0,C=Ft(this.observers),A=C.length;b<A;b++){var L=C[b];L.onCompleted(),L.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),p}(Re),ea=pe.AnonymousSubject=function(h){function u(d,p){this.observer=d,this.observable=p,h.call(this)}return O(u,h),Me(u.prototype,vi.prototype,{_subscribe:function(d){return this.observable.subscribe(d)},onCompleted:function(){this.observer.onCompleted()},onError:function(d){this.observer.onError(d)},onNext:function(d){this.observer.onNext(d)}}),u}(Re);pe.Pauser=function(h){function u(){h.call(this)}return O(u,h),u.prototype.pause=function(){this.onNext(!1)},u.prototype.resume=function(){this.onNext(!0)},u}(Fn),Oe.Rx=pe,(ke=function(){return pe}.call(Ze,je,Ze,jt))!==ft&&(jt.exports=ke);var ta=q()}.call(this)},308:function(jt,Ze,je){var ke;jt=je.nmd(jt),function(ft){"object"==typeof global&&global;var ct,et=2147483647,Tn=/^xn--/,Mt=/[^\x20-\x7E]/,Rt=/[\x2E\u3002\uFF0E\uFF61]/g,An={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Qe=Math.floor,Le=String.fromCharCode;function M(W){throw RangeError(An[W])}function ve(W,q){for(var j=W.length,Y=[];j--;)Y[j]=q(W[j]);return Y}function F(W,q){var j=W.split("@"),Y="";return j.length>1&&(Y=j[0]+"@",W=j[1]),Y+ve((W=W.replace(Rt,".")).split("."),q).join(".")}function Ke(W){for(var Q,ne,q=[],j=0,Y=W.length;j<Y;)(Q=W.charCodeAt(j++))>=55296&&Q<=56319&&j<Y?56320==(64512&(ne=W.charCodeAt(j++)))?q.push(((1023&Q)<<10)+(1023&ne)+65536):(q.push(Q),j--):q.push(Q);return q}function Pt(W){return ve(W,function(q){var j="";return q>65535&&(j+=Le((q-=65536)>>>10&1023|55296),q=56320|1023&q),j+Le(q)}).join("")}function dn(W){return W-48<10?W-22:W-65<26?W-65:W-97<26?W-97:36}function nn(W,q){return W+22+75*(W<26)-((0!=q)<<5)}function N(W,q,j){var Y=0;for(W=j?Qe(W/700):W>>1,W+=Qe(W/q);W>455;Y+=36)W=Qe(W/35);return Qe(Y+36*W/(W+38))}function $(W){var Y,be,ie,ge,Ne,Ge,Ot,xt,Be,yt,q=[],j=W.length,Q=0,ne=128,te=72;for((be=W.lastIndexOf("-"))<0&&(be=0),ie=0;ie<be;++ie)W.charCodeAt(ie)>=128&&M("not-basic"),q.push(W.charCodeAt(ie));for(ge=be>0?be+1:0;ge<j;){for(Ne=Q,Ge=1,Ot=36;ge>=j&&M("invalid-input"),((xt=dn(W.charCodeAt(ge++)))>=36||xt>Qe((et-Q)/Ge))&&M("overflow"),Q+=xt*Ge,!(xt<(Be=Ot<=te?1:Ot>=te+26?26:Ot-te));Ot+=36)Ge>Qe(et/(yt=36-Be))&&M("overflow"),Ge*=yt;te=N(Q-Ne,Y=q.length+1,0==Ne),Qe(Q/Y)>et-ne&&M("overflow"),ne+=Qe(Q/Y),Q%=Y,q.splice(Q++,0,ne)}return Pt(q)}function U(W){var q,j,Y,Q,ne,te,be,ie,ge,Ne,Ge,xt,Be,yt,dr,Ot=[];for(xt=(W=Ke(W)).length,q=128,j=0,ne=72,te=0;te<xt;++te)(Ge=W[te])<128&&Ot.push(Le(Ge));for(Y=Q=Ot.length,Q&&Ot.push("-");Y<xt;){for(be=et,te=0;te<xt;++te)(Ge=W[te])>=q&&Ge<be&&(be=Ge);for(be-q>Qe((et-j)/(Be=Y+1))&&M("overflow"),j+=(be-q)*Be,q=be,te=0;te<xt;++te)if((Ge=W[te])<q&&++j>et&&M("overflow"),Ge==q){for(ie=j,ge=36;!(ie<(Ne=ge<=ne?1:ge>=ne+26?26:ge-ne));ge+=36)Ot.push(Le(nn(Ne+(dr=ie-Ne)%(yt=36-Ne),0))),ie=Qe(dr/yt);Ot.push(Le(nn(ie,0))),ne=N(j,Be,Y==Q),j=0,++Y}++j,++q}return Ot.join("")}ct={version:"1.3.2",ucs2:{decode:Ke,encode:Pt},decode:$,encode:U,toASCII:function ue(W){return F(W,function(q){return Mt.test(q)?"xn--"+U(q):q})},toUnicode:function le(W){return F(W,function(q){return Tn.test(q)?$(q.slice(4).toLowerCase()):q})}},void 0!==(ke=function(){return ct}.call(Ze,je,Ze,jt))&&(jt.exports=ke)}()},762:(jt,Ze,je)=>{"use strict";var ft=je(308),tt=je(796);function pt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}Ze.Qc=Vn,Ze.DB=function Le(M,ve){return Vn(M,!1,!0).resolve(ve)},Ze.WU=function Qe(M){return tt.isString(M)&&(M=Vn(M)),M instanceof pt?M.format():pt.prototype.format.call(M)};var Ie=/^([a-z0-9.+-]+:)/i,ct=/:[0-9]*$/,et=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,qe=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),wt=["'"].concat(qe),zt=["%","/","?",";","#"].concat(wt),Oe=["/","?","#"],De=/^[+a-z0-9A-Z_-]{0,63}$/,hn=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Tn={javascript:!0,"javascript:":!0},Mt={javascript:!0,"javascript:":!0},Rt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},An=je(137);function Vn(M,ve,F){if(M&&tt.isObject(M)&&M instanceof pt)return M;var Ke=new pt;return Ke.parse(M,ve,F),Ke}pt.prototype.parse=function(M,ve,F){if(!tt.isString(M))throw new TypeError("Parameter 'url' must be a string, not "+typeof M);var Ke=M.indexOf("?"),Pt=-1!==Ke&&Ke<M.indexOf("#")?"?":"#",dn=M.split(Pt);dn[0]=dn[0].replace(/\\/g,"/");var N=M=dn.join(Pt);if(N=N.trim(),!F&&1===M.split("#").length){var $=et.exec(N);if($)return this.path=N,this.href=N,this.pathname=$[1],$[2]?(this.search=$[2],this.query=ve?An.parse(this.search.substr(1)):this.search.substr(1)):ve&&(this.search="",this.query={}),this}var U=Ie.exec(N);if(U){var le=(U=U[0]).toLowerCase();this.protocol=le,N=N.substr(U.length)}if(F||U||N.match(/^\/\/[^@\/]+@[^@\/]+/)){var ue="//"===N.substr(0,2);ue&&(!U||!Mt[U])&&(N=N.substr(2),this.slashes=!0)}if(!Mt[U]&&(ue||U&&!Rt[U])){for(var W=-1,q=0;q<Oe.length;q++)-1!==(j=N.indexOf(Oe[q]))&&(-1===W||j<W)&&(W=j);var Y,Q;for(-1!==(Q=-1===W?N.lastIndexOf("@"):N.lastIndexOf("@",W))&&(Y=N.slice(0,Q),N=N.slice(Q+1),this.auth=decodeURIComponent(Y)),W=-1,q=0;q<zt.length;q++){var j;-1!==(j=N.indexOf(zt[q]))&&(-1===W||j<W)&&(W=j)}-1===W&&(W=N.length),this.host=N.slice(0,W),N=N.slice(W),this.parseHost(),this.hostname=this.hostname||"";var ne="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ne)for(var te=this.hostname.split(/\./),be=(q=0,te.length);q<be;q++){var ie=te[q];if(ie&&!ie.match(De)){for(var ge="",Ne=0,Ge=ie.length;Ne<Ge;Ne++)ie.charCodeAt(Ne)>127?ge+="x":ge+=ie[Ne];if(!ge.match(De)){var Ot=te.slice(0,q),xt=te.slice(q+1),Be=ie.match(hn);Be&&(Ot.push(Be[1]),xt.unshift(Be[2])),xt.length&&(N="/"+xt.join(".")+N),this.hostname=Ot.join(".");break}}}this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),ne||(this.hostname=ft.toASCII(this.hostname)),this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ne&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==N[0]&&(N="/"+N))}if(!Tn[le])for(q=0,be=wt.length;q<be;q++){var Ar=wt[q];if(-1!==N.indexOf(Ar)){var fr=encodeURIComponent(Ar);fr===Ar&&(fr=escape(Ar)),N=N.split(Ar).join(fr)}}var eo=N.indexOf("#");-1!==eo&&(this.hash=N.substr(eo),N=N.slice(0,eo));var Ir=N.indexOf("?");return-1!==Ir?(this.search=N.substr(Ir),this.query=N.substr(Ir+1),ve&&(this.query=An.parse(this.query)),N=N.slice(0,Ir)):ve&&(this.search="",this.query={}),N&&(this.pathname=N),Rt[le]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(this.search||"")),this.href=this.format(),this},pt.prototype.format=function(){var M=this.auth||"";M&&(M=(M=encodeURIComponent(M)).replace(/%3A/i,":"),M+="@");var ve=this.protocol||"",F=this.pathname||"",Ke=this.hash||"",Pt=!1,dn="";this.host?Pt=M+this.host:this.hostname&&(Pt=M+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Pt+=":"+this.port)),this.query&&tt.isObject(this.query)&&Object.keys(this.query).length&&(dn=An.stringify(this.query));var nn=this.search||dn&&"?"+dn||"";return ve&&":"!==ve.substr(-1)&&(ve+=":"),this.slashes||(!ve||Rt[ve])&&!1!==Pt?(Pt="//"+(Pt||""),F&&"/"!==F.charAt(0)&&(F="/"+F)):Pt||(Pt=""),Ke&&"#"!==Ke.charAt(0)&&(Ke="#"+Ke),nn&&"?"!==nn.charAt(0)&&(nn="?"+nn),ve+Pt+(F=F.replace(/[?#]/g,function(N){return encodeURIComponent(N)}))+(nn=nn.replace("#","%23"))+Ke},pt.prototype.resolve=function(M){return this.resolveObject(Vn(M,!1,!0)).format()},pt.prototype.resolveObject=function(M){if(tt.isString(M)){var ve=new pt;ve.parse(M,!1,!0),M=ve}for(var F=new pt,Ke=Object.keys(this),Pt=0;Pt<Ke.length;Pt++){var dn=Ke[Pt];F[dn]=this[dn]}if(F.hash=M.hash,""===M.href)return F.href=F.format(),F;if(M.slashes&&!M.protocol){for(var nn=Object.keys(M),N=0;N<nn.length;N++){var $=nn[N];"protocol"!==$&&(F[$]=M[$])}return Rt[F.protocol]&&F.hostname&&!F.pathname&&(F.path=F.pathname="/"),F.href=F.format(),F}if(M.protocol&&M.protocol!==F.protocol){if(!Rt[M.protocol]){for(var U=Object.keys(M),le=0;le<U.length;le++){var ue=U[le];F[ue]=M[ue]}return F.href=F.format(),F}if(F.protocol=M.protocol,M.host||Mt[M.protocol])F.pathname=M.pathname;else{for(var be=(M.pathname||"").split("/");be.length&&!(M.host=be.shift()););M.host||(M.host=""),M.hostname||(M.hostname=""),""!==be[0]&&be.unshift(""),be.length<2&&be.unshift(""),F.pathname=be.join("/")}return F.search=M.search,F.query=M.query,F.host=M.host||"",F.auth=M.auth,F.hostname=M.hostname||M.host,F.port=M.port,(F.pathname||F.search)&&(F.path=(F.pathname||"")+(F.search||"")),F.slashes=F.slashes||M.slashes,F.href=F.format(),F}var j=F.pathname&&"/"===F.pathname.charAt(0),Y=M.host||M.pathname&&"/"===M.pathname.charAt(0),Q=Y||j||F.host&&M.pathname,ne=Q,te=F.pathname&&F.pathname.split("/")||[],ie=(be=M.pathname&&M.pathname.split("/")||[],F.protocol&&!Rt[F.protocol]);if(ie&&(F.hostname="",F.port=null,F.host&&(""===te[0]?te[0]=F.host:te.unshift(F.host)),F.host="",M.protocol&&(M.hostname=null,M.port=null,M.host&&(""===be[0]?be[0]=M.host:be.unshift(M.host)),M.host=null),Q=Q&&(""===be[0]||""===te[0])),Y)F.host=M.host||""===M.host?M.host:F.host,F.hostname=M.hostname||""===M.hostname?M.hostname:F.hostname,F.search=M.search,F.query=M.query,te=be;else if(be.length)te||(te=[]),te.pop(),te=te.concat(be),F.search=M.search,F.query=M.query;else if(!tt.isNullOrUndefined(M.search))return ie&&(F.hostname=F.host=te.shift(),(ge=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=ge.shift(),F.host=F.hostname=ge.shift())),F.search=M.search,F.query=M.query,(!tt.isNull(F.pathname)||!tt.isNull(F.search))&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.href=F.format(),F;if(!te.length)return F.pathname=null,F.path=F.search?"/"+F.search:null,F.href=F.format(),F;for(var Ne=te.slice(-1)[0],Ge=(F.host||M.host||te.length>1)&&("."===Ne||".."===Ne)||""===Ne,Ot=0,xt=te.length;xt>=0;xt--)"."===(Ne=te[xt])?te.splice(xt,1):".."===Ne?(te.splice(xt,1),Ot++):Ot&&(te.splice(xt,1),Ot--);if(!Q&&!ne)for(;Ot--;Ot)te.unshift("..");Q&&""!==te[0]&&(!te[0]||"/"!==te[0].charAt(0))&&te.unshift(""),Ge&&"/"!==te.join("/").substr(-1)&&te.push("");var ge,Be=""===te[0]||te[0]&&"/"===te[0].charAt(0);return ie&&(F.hostname=F.host=Be?"":te.length?te.shift():"",(ge=!!(F.host&&F.host.indexOf("@")>0)&&F.host.split("@"))&&(F.auth=ge.shift(),F.host=F.hostname=ge.shift())),(Q=Q||F.host&&te.length)&&!Be&&te.unshift(""),te.length?F.pathname=te.join("/"):(F.pathname=null,F.path=null),(!tt.isNull(F.pathname)||!tt.isNull(F.search))&&(F.path=(F.pathname?F.pathname:"")+(F.search?F.search:"")),F.auth=M.auth||F.auth,F.slashes=F.slashes||M.slashes,F.href=F.format(),F},pt.prototype.parseHost=function(){var M=this.host,ve=ct.exec(M);ve&&(":"!==(ve=ve[0])&&(this.port=ve.substr(1)),M=M.substr(0,M.length-ve.length)),M&&(this.hostname=M)}},796:jt=>{"use strict";jt.exports={isString:function(Ze){return"string"==typeof Ze},isObject:function(Ze){return"object"==typeof Ze&&null!==Ze},isNull:function(Ze){return null===Ze},isNullOrUndefined:function(Ze){return null==Ze}}}},jt=>{jt(jt.s=835)}]);